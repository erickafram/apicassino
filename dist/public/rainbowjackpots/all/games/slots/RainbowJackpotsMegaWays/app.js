console.log("%cRainbowJackpotsMegaWays v0.0.14 master#5aa9d11","background: #2980b9; color: #ffffff"),function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./dist/",n(n.s="./src/core/main.js")}({"./node_modules/@games/dope/src/Dopamine.js":function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return I})),n.d(e,"c",(function(){return N}));var r=n("./node_modules/eventemitter3/index.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e=u(e),function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],u(t).constructor):e.apply(t,n))}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,e)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(r=[{key:"eventNames",value:function(){return s(u(e.prototype),"eventNames",this).call(this)}},{key:"listeners",value:function(t,n){return s(u(e.prototype),"listeners",this).call(this,t,n)}},{key:"emit",value:function(t,n){var r=s(u(e.prototype),"emit",this).apply(this,arguments);if(t!==h){var i=[h].concat(arguments);s(u(e.prototype),"emit",this).apply(this,i)}return r}},{key:"on",value:function(t,n,r){return s(u(e.prototype),"on",this).call(this,t,n,r),n}},{key:"onAny",value:function(t,n){return s(u(e.prototype),"on",this).call(this,h,t,n),t}},{key:"once",value:function(t,n,r){return s(u(e.prototype),"once",this).call(this,t,n,r),n}},{key:"onceAny",value:function(t,n){return s(u(e.prototype),"once",this).call(this,h,t,n),t}},{key:"addListener",value:function(t,n,r){return s(u(e.prototype),"addListener",this).call(this,t,n,r)}},{key:"off",value:function(t,n,r,i){return s(u(e.prototype),"off",this).call(this,t,n,r,i)}},{key:"offAny",value:function(t,n,r){return s(u(e.prototype),"off",this).call(this,h,t,n,r)}},{key:"removeListener",value:function(t,n,r,i){return s(u(e.prototype),"removeListener",this).call(this,t,n,r,i)}},{key:"removeAllListeners",value:function(t){return s(u(e.prototype),"removeAllListeners",this).call(this,t)}},{key:"setMaxListeners",value:function(){throw new Error("EventEmitter::setMaxListeners is deprecated.")}},{key:"getMaxListeners",value:function(){throw new Error("EventEmitter::getMaxListeners is deprecated.")}}])&&o(n.prototype,r),i&&o(n,i),e}(n.n(r).a),h="_____ANY_EVENT_____";function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"match",value:function(t,e){return e.match(t)}},{key:"matchAll",value:function(e,n,r){r=r||t.REGEXP_SET_ORDER;var i,o=[];if(e.global)for(;null!==(i=e.exec(n));)o.push(i);else null!==(i=n.match(e))&&o.push(i);if(r===t.REGEXP_PATTERN_ORDER){for(var a=[],s=[],u=0;u<o.length;u++)s.push(o[u][0]+"");for(s.length>0&&a.push(s),u=0;u<o.length;u++){s=[];for(var c=1;c<o[u].length;c++)s.push(o[u][c]);s.length>0&&a.push(s)}o=a}return o}}],(n=null)&&f(e.prototype,n),r&&f(e,r),t}();p(d,"REGEXP_SET_ORDER",0),p(d,"REGEXP_PATTERN_ORDER",0);var y;function m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _(t,e,n){return e&&v(t.prototype,e),n&&v(t,n),t}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=function(){function t(e){m(this,t),g(this,"_storage",null),this._storage=e}return _(t,[{key:"get",value:function(t){var e=this._storage.getItem(t);return null==e?null:!1===e?e:JSON.parse(e)}},{key:"set",value:function(t,e){this._storage.setItem(t,JSON.stringify(e))}},{key:"getKey",value:function(t){return this._storage.key(t)}},{key:"remove",value:function(t){this._storage.removeItem(t)}},{key:"clear",value:function(){this._storage.clear()}},{key:"length",get:function(){return this._storage.length}}]),t}(),E=_((function t(){m(this,t)}));y=E,g(E,"getLocalStorage",(function(){var t=null;try{t=window.localStorage}catch(t){console.warn(t)}return t})),g(E,"getSessionStorage",(function(){var t=null;try{t=window.sessionStorage}catch(t){console.warn(t)}return t})),g(E,"local",new b(y.getLocalStorage())),g(E,"session",new b(y.getLocalStorage()));function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var w=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"number",value:function(t,e,n,r){var i,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=(t+"").replace(/[^0-9+\-Ee.]/g,""),s=isFinite(+a)?+a:0,u=isFinite(+e)?Math.abs(e):0,c=void 0===r?" ":r,l=void 0===n?".":n,h=function(t,e){var n=Math.pow(10,e);return""+(Math.round(t*n)/n).toFixed(e)};return(i=(u?h(s,u):""+Math.round(s)).split("."))[0].length>3&&(i[0]=i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,c)),(i[1]||"").length<u&&(i[1]=i[1]||"",i[1]+=new Array(u-i[1].length+1).join("0")),o?i[0]:i.join(l)}},{key:"currency",value:function(e,n,r,i,o,a){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];null==a&&(a=2),null==r&&(r="$%s");var u,c=Math.pow(10,a),l=Math.round(e*c)/c;if(l<0)u=("-"+r).replace("%s",t.number(Math.abs(l),a,i,o));else{var h=e%1==0,f=s&&h;u=r.replace("%s",t.number(l,a,i,o,f))}return u}},{key:"fraction",value:function(t){return"1/"+(t?(1/t).toFixed(1):"0.0")}},{key:"float",value:function(t){return t?parseFloat(t):"0"}},{key:"integer",value:function(t){return t?parseInt(t):"0"}},{key:"percent",value:function(t,e){e||0===e||(e=4);for(var n="",r=0;r<e;r++)n+="0";return t?(100*t).toFixed(e)+"%":"0."+n+"%"}}],(n=null)&&T(e.prototype,n),r&&T(e,r),t}();function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var O=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,"dir",console.dir.bind(console)),S(this,"count",console.count.bind(console)),S(this,"group",console.group.bind(console)),S(this,"groupCollapsed",console.groupCollapsed.bind(console)),S(this,"groupEnd",console.groupEnd.bind(console)),S(this,"profile",console.profile.bind(console)),S(this,"profileEnd",console.profileEnd.bind(console)),S(this,"table",console.table.bind(console)),S(this,"time",console.time.bind(console)),S(this,"timeEnd",console.timeEnd.bind(console)),S(this,"timeStamp",console.timeStamp.bind(console)),this.group=e||"",this.enabled=-1===t.DISABLED_GROUPS.indexOf(this.group)}var e,n,r;return e=t,(n=[{key:"output",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this.enabled){if(this.group){var r="["+this.group+"]";e.splice(n,0,r)}return console[t].apply(console,e)}}},{key:"disable",value:function(){this.enabled=!1}},{key:"enable",value:function(){this.enabled=!0}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.output("log",e)}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.output("info",e)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.output("warn",e)}},{key:"trace",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.output("trace",e)}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.output("error",e)}},{key:"assert",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.output("assert",e,1)}}])&&x(e.prototype,n),r&&x(e,r),t}();S(O,"DISABLED_GROUPS",[]);function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A=["NOK","SEK","DKK","AMD","BGN","CZK","GEL","VN2","KR2","ID2"],I=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),R(this,"_code","USD"),R(this,"_symbol","$"),R(this,"_position","left"),R(this,"_thousands",","),R(this,"_decimals","."),R(this,"_digits",2),R(this,"_formatting","$%s"),this._exists(e)&&this.set(e)}var e,n,r;return e=t,r=[{key:"set",value:function(t){return this.singleton.set(t)}},{key:"format",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.singleton.format(t,e)}}],(n=[{key:"set",value:function(t){this._exists(t.code)&&(this._code=t.code),this._exists(t.symbol)&&(this._symbol=t.symbol),this._exists(t.position)?this._position=t.position:A.includes(this._code)&&(this._position="right"),this._exists(t.thousands)&&(this._thousands=t.thousands),this._exists(t.decimals)&&(this._decimals=t.decimals),this._exists(t.digits)&&(this._digits=t.digits),this._formatting="right"===this._position?"%s"+this._symbol:this._symbol+"%s"}},{key:"format",value:function(t,e){return w.currency(t,this._code,this._formatting,this._decimals,this._thousands,this._digits,e)}},{key:"_exists",value:function(t){return null!=t}},{key:"code",get:function(){return this._code}},{key:"symbol",get:function(){return this._symbol}},{key:"position",get:function(){return this._position}},{key:"thousands",get:function(){return this._thousands}},{key:"decimals",get:function(){return this._decimals}},{key:"digits",get:function(){return this._digits}},{key:"formatting",get:function(){return this._formatting}}])&&P(e.prototype,n),r&&P(e,r),t}();function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}R(I,"singleton",new I({}));var N=function(){function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),k(this,"_code",""),k(this,"_texts",null),k(this,"_default",""),!n)throw new Error("Missing default language.");this._code=this._default=n,this._texts=e}var e,n,r;return e=t,r=[{key:"setLanguage",value:function(e,n,r){return this.singleton||(this.singleton=new t(n,r)),this.singleton.setLanguage(e)}},{key:"texts",get:function(){return this.singleton?this.singleton.texts:console.error("[Language] Static Module is not initiated, use Languge.setLanguage(code, text, defaultLanguage) first")}},{key:"code",get:function(){return this.singleton?this.singleton._code:console.error("[Language] Static Module is not initiated, use Languge.setLanguage(code, text, defaultLanguage) first")}}],(n=[{key:"setLanguage",value:function(t){return this._code=this._supported(t),this._code}},{key:"texts",get:function(){if(!this._code)throw new Error("No language has been set");return this._texts[this._code]}},{key:"_supported",value:function(t){if(void 0===t)return this._default;if(!this._texts.hasOwnProperty(t)){var e=t.substr(0,2);return this._texts.hasOwnProperty(e)?(console.warn("Language was not found: "+t+", fallback available: "+e),e):(console.warn("Language code was not found: "+t+", falling back to default: "+this._default),this._default)}return t}}])&&C(e.prototype,n),r&&C(e,r),t}()},"./node_modules/@games/gsap/CSSPlugin.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return dt})),n.d(e,"b",(function(){return dt}));var r,i,o,a,s,u,c,l=n("./node_modules/@games/gsap/gsap-core.js"),h={},f=180/Math.PI,p=Math.PI/180,d=Math.atan2,y=/([A-Z])/g,m=/(?:left|right|width|margin|padding|x)/i,v=/[\s,\(]\S/,_={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},g=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},b=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},E=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},T=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},w=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},x=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},S=function(t,e,n){return t.style[e]=n},O=function(t,e,n){return t.style.setProperty(e,n)},P=function(t,e,n){return t._gsap[e]=n},R=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},A=function(t,e,n,r,i){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(i,o)},I=function(t,e,n,r,i){var o=t._gsap;o[e]=n,o.renderTransform(i,o)},C="transform",k=C+"Origin",N=function(t,e){var n=i.createElementNS?i.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):i.createElement(t);return n.style?n:i.createElement(t)},M=function t(e,n,r){var i=getComputedStyle(e);return i[n]||i.getPropertyValue(n.replace(y,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&t(e,D(n)||n,1)||""},j="O,Moz,ms,Ms,Webkit".split(","),D=function(t,e,n){var r=(e||s).style,i=5;if(t in r&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);i--&&!(j[i]+t in r););return i<0?null:(3===i?"ms":i>=0?j[i]:"")+t},L=function(){"undefined"!=typeof window&&window.document&&(r=window,i=r.document,o=i.documentElement,s=N("div")||{style:{}},N("div"),C=D(C),k=C+"Origin",s.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",c=!!D("perspective"),a=1)},B=function t(e){var n,r=N("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,a=this.nextSibling,s=this.style.cssText;if(o.appendChild(r),r.appendChild(this),this.style.display="block",e)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(a?i.insertBefore(this,a):i.appendChild(this)),o.removeChild(r),this.style.cssText=s,n},F=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},U=function(t){var e;try{e=t.getBBox()}catch(n){e=B.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===B||(e=B.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+F(t,["x","cx","x1"])||0,y:+F(t,["y","cy","y1"])||0,width:0,height:0}},G=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!U(t))},H=function(t,e){if(e){var n=t.style;e in h&&e!==k&&(e=C),n.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),n.removeProperty(e.replace(y,"-$1").toLowerCase())):n.removeAttribute(e)}},V=function(t,e,n,r,i,o){var a=new l.d(t._pt,e,n,0,1,o?x:w);return t._pt=a,a.b=r,a.e=i,t._props.push(n),a},X={deg:1,rad:1,turn:1},W=function t(e,n,r,o){var a,u,c,f,p=parseFloat(r)||0,d=(r+"").trim().substr((p+"").length)||"px",y=s.style,v=m.test(n),_="svg"===e.tagName.toLowerCase(),g=(_?"client":"offset")+(v?"Width":"Height"),b="px"===o,E="%"===o;return o===d||!p||X[o]||X[d]?p:("px"!==d&&!b&&(p=t(e,n,r,"px")),f=e.getCTM&&G(e),!E&&"%"!==d||!h[n]&&!~n.indexOf("adius")?(y[v?"width":"height"]=100+(b?d:o),u=~n.indexOf("adius")||"em"===o&&e.appendChild&&!_?e:e.parentNode,f&&(u=(e.ownerSVGElement||{}).parentNode),u&&u!==i&&u.appendChild||(u=i.body),(c=u._gsap)&&E&&c.width&&v&&c.time===l.x.time?Object(l.v)(p/c.width*100):((E||"%"===d)&&(y.position=M(e,"position")),u===e&&(y.position="static"),u.appendChild(s),a=s[g],u.removeChild(s),y.position="absolute",v&&E&&((c=Object(l.j)(u)).time=l.x.time,c.width=u[g]),Object(l.v)(b?a*p/100:a&&p?100/a*p:0))):(a=f?e.getBBox()[v?"width":"height"]:e[g],Object(l.v)(E?p/a*100:p/100*a)))},Y=function(t,e,n,r){var i;return a||L(),e in _&&"transform"!==e&&~(e=_[e]).indexOf(",")&&(e=e.split(",")[0]),h[e]&&"transform"!==e?(i=rt(t,r),i="transformOrigin"!==e?i[e]:it(M(t,k))+" "+i.zOrigin+"px"):(!(i=t.style[e])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=Z[e]&&Z[e](t,e,n)||M(t,e)||Object(l.k)(t,e)||("opacity"===e?1:0)),n&&!~(i+"").trim().indexOf(" ")?W(t,e,i,n)+n:i},z=function(t,e,n,r){if(!n||"none"===n){var i=D(e,t,1),o=i&&M(t,i,1);o&&o!==n?(e=i,n=o):"borderColor"===e&&(n=M(t,"borderTopColor"))}var a,s,u,c,h,f,p,d,y,m,v,_,g=new l.d(this._pt,t.style,e,0,1,l.t),b=0,E=0;if(g.b=n,g.e=r,n+="","auto"===(r+="")&&(t.style[e]=r,r=M(t,e)||r,t.style[e]=n),a=[n,r],Object(l.g)(a),r=a[1],u=(n=a[0]).match(l.q)||[],(r.match(l.q)||[]).length){for(;s=l.q.exec(r);)p=s[0],y=r.substring(b,s.index),h?h=(h+1)%5:"rgba("!==y.substr(-5)&&"hsla("!==y.substr(-5)||(h=1),p!==(f=u[E++]||"")&&(c=parseFloat(f)||0,v=f.substr((c+"").length),(_="="===p.charAt(1)?+(p.charAt(0)+"1"):0)&&(p=p.substr(2)),d=parseFloat(p),m=p.substr((d+"").length),b=l.q.lastIndex-m.length,m||(m=m||l.h.units[e]||v,b===r.length&&(r+=m,g.e+=m)),v!==m&&(c=W(t,e,f,m)||0),g._pt={_next:g._pt,p:y||1===E?y:",",s:c,c:_?_*d:d-c,m:h&&h<4||"zIndex"===e?Math.round:0});g.c=b<r.length?r.substring(b,r.length):""}else g.r="display"===e&&"none"===r?x:w;return l.s.test(r)&&(g.e=0),this._pt=g,g},q={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},K=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,r,i,o=e.t,a=o.style,s=e.u,u=o._gsap;if("all"===s||!0===s)a.cssText="",r=1;else for(i=(s=s.split(",")).length;--i>-1;)n=s[i],h[n]&&(r=1,n="transformOrigin"===n?k:C),H(o,n);r&&(H(o,C),u&&(u.svg&&o.removeAttribute("transform"),rt(o,1),u.uncache=1))}},Z={clearProps:function(t,e,n,r,i){if("isFromStart"!==i.data){var o=t._pt=new l.d(t._pt,e,n,0,0,K);return o.u=r,o.pr=-10,o.tween=i,t._props.push(n),1}}},$=[1,0,0,1,0,0],J={},Q=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},tt=function(t){var e=M(t,C);return Q(e)?$:e.substr(7).match(l.p).map(l.v)},et=function(t,e){var n,r,i,a,s=t._gsap||Object(l.j)(t),u=t.style,c=tt(t);return s.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(c=[(i=t.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?$:c:(c!==$||t.offsetParent||t===o||s.svg||(i=u.display,u.display="block",(n=t.parentNode)&&t.offsetParent||(a=1,r=t.nextSibling,o.appendChild(t)),c=tt(t),i?u.display=i:H(t,"display"),a&&(r?n.insertBefore(t,r):n?n.appendChild(t):o.removeChild(t))),e&&c.length>6?[c[0],c[1],c[4],c[5],c[12],c[13]]:c)},nt=function(t,e,n,r,i,o){var a,s,u,c=t._gsap,l=i||et(t,!0),h=c.xOrigin||0,f=c.yOrigin||0,p=c.xOffset||0,d=c.yOffset||0,y=l[0],m=l[1],v=l[2],_=l[3],g=l[4],b=l[5],E=e.split(" "),T=parseFloat(E[0])||0,w=parseFloat(E[1])||0;n?l!==$&&(s=y*_-m*v)&&(u=T*(-m/s)+w*(y/s)-(y*b-m*g)/s,T=T*(_/s)+w*(-v/s)+(v*b-_*g)/s,w=u):(T=(a=U(t)).x+(~E[0].indexOf("%")?T/100*a.width:T),w=a.y+(~(E[1]||E[0]).indexOf("%")?w/100*a.height:w)),r||!1!==r&&c.smooth?(g=T-h,b=w-f,c.xOffset=p+(g*y+b*v)-g,c.yOffset=d+(g*m+b*_)-b):c.xOffset=c.yOffset=0,c.xOrigin=T,c.yOrigin=w,c.smooth=!!r,c.origin=e,c.originIsAbsolute=!!n,t.style[k]="0px 0px",o&&(V(o,c,"xOrigin",h,T),V(o,c,"yOrigin",f,w),V(o,c,"xOffset",p,c.xOffset),V(o,c,"yOffset",d,c.yOffset)),t.setAttribute("data-svg-origin",T+" "+w)},rt=function(t,e){var n=t._gsap||new l.a(t);if("x"in n&&!e&&!n.uncache)return n;var r,i,o,a,s,u,h,y,m,v,_,g,b,E,T,w,x,S,O,P,R,A,I,N,j,D,L,B,F,U,H,V,X=t.style,W=n.scaleX<0,Y=M(t,k)||"0";return r=i=o=u=h=y=m=v=_=0,a=s=1,n.svg=!(!t.getCTM||!G(t)),E=et(t,n.svg),n.svg&&(N=!n.uncache&&!e&&t.getAttribute("data-svg-origin"),nt(t,N||Y,!!N||n.originIsAbsolute,!1!==n.smooth,E)),g=n.xOrigin||0,b=n.yOrigin||0,E!==$&&(S=E[0],O=E[1],P=E[2],R=E[3],r=A=E[4],i=I=E[5],6===E.length?(a=Math.sqrt(S*S+O*O),s=Math.sqrt(R*R+P*P),u=S||O?d(O,S)*f:0,(m=P||R?d(P,R)*f+u:0)&&(s*=Math.abs(Math.cos(m*p))),n.svg&&(r-=g-(g*S+b*P),i-=b-(g*O+b*R))):(V=E[6],U=E[7],L=E[8],B=E[9],F=E[10],H=E[11],r=E[12],i=E[13],o=E[14],h=(T=d(V,F))*f,T&&(N=A*(w=Math.cos(-T))+L*(x=Math.sin(-T)),j=I*w+B*x,D=V*w+F*x,L=A*-x+L*w,B=I*-x+B*w,F=V*-x+F*w,H=U*-x+H*w,A=N,I=j,V=D),y=(T=d(-P,F))*f,T&&(w=Math.cos(-T),H=R*(x=Math.sin(-T))+H*w,S=N=S*w-L*x,O=j=O*w-B*x,P=D=P*w-F*x),u=(T=d(O,S))*f,T&&(N=S*(w=Math.cos(T))+O*(x=Math.sin(T)),j=A*w+I*x,O=O*w-S*x,I=I*w-A*x,S=N,A=j),h&&Math.abs(h)+Math.abs(u)>359.9&&(h=u=0,y=180-y),a=Object(l.v)(Math.sqrt(S*S+O*O+P*P)),s=Object(l.v)(Math.sqrt(I*I+V*V)),T=d(A,I),m=Math.abs(T)>2e-4?T*f:0,_=H?1/(H<0?-H:H):0),n.svg&&(N=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!Q(M(t,C)),N&&t.setAttribute("transform",N))),Math.abs(m)>90&&Math.abs(m)<270&&(W?(a*=-1,m+=u<=0?180:-180,u+=u<=0?180:-180):(s*=-1,m+=m<=0?180:-180)),n.x=r-((n.xPercent=r&&(n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-r)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+"px",n.y=i-((n.yPercent=i&&(n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-i)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+"px",n.z=o+"px",n.scaleX=Object(l.v)(a),n.scaleY=Object(l.v)(s),n.rotation=Object(l.v)(u)+"deg",n.rotationX=Object(l.v)(h)+"deg",n.rotationY=Object(l.v)(y)+"deg",n.skewX=m+"deg",n.skewY=v+"deg",n.transformPerspective=_+"px",(n.zOrigin=parseFloat(Y.split(" ")[2])||0)&&(X[k]=it(Y)),n.xOffset=n.yOffset=0,n.force3D=l.h.force3D,n.renderTransform=n.svg?ut:c?st:at,n.uncache=0,n},it=function(t){return(t=t.split(" "))[0]+" "+t[1]},ot=function(t,e,n){var r=Object(l.z)(e);return Object(l.v)(parseFloat(e)+parseFloat(W(t,"x",n+"px",r)))+r},at=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,st(t,e)},st=function(t,e){var n=e||this,r=n.xPercent,i=n.yPercent,o=n.x,a=n.y,s=n.z,u=n.rotation,c=n.rotationY,l=n.rotationX,h=n.skewX,f=n.skewY,d=n.scaleX,y=n.scaleY,m=n.transformPerspective,v=n.force3D,_=n.target,g=n.zOrigin,b="",E="auto"===v&&t&&1!==t||!0===v;if(g&&("0deg"!==l||"0deg"!==c)){var T,w=parseFloat(c)*p,x=Math.sin(w),S=Math.cos(w);w=parseFloat(l)*p,T=Math.cos(w),o=ot(_,o,x*T*-g),a=ot(_,a,-Math.sin(w)*-g),s=ot(_,s,S*T*-g+g)}"0px"!==m&&(b+="perspective("+m+") "),(r||i)&&(b+="translate("+r+"%, "+i+"%) "),(E||"0px"!==o||"0px"!==a||"0px"!==s)&&(b+="0px"!==s||E?"translate3d("+o+", "+a+", "+s+") ":"translate("+o+", "+a+") "),"0deg"!==u&&(b+="rotate("+u+") "),"0deg"!==c&&(b+="rotateY("+c+") "),"0deg"!==l&&(b+="rotateX("+l+") "),"0deg"===h&&"0deg"===f||(b+="skew("+h+", "+f+") "),1===d&&1===y||(b+="scale("+d+", "+y+") "),_.style[C]=b||"translate(0, 0)"},ut=function(t,e){var n,r,i,o,a,s=e||this,u=s.xPercent,c=s.yPercent,h=s.x,f=s.y,d=s.rotation,y=s.skewX,m=s.skewY,v=s.scaleX,_=s.scaleY,g=s.target,b=s.xOrigin,E=s.yOrigin,T=s.xOffset,w=s.yOffset,x=s.forceCSS,S=parseFloat(h),O=parseFloat(f);d=parseFloat(d),y=parseFloat(y),(m=parseFloat(m))&&(y+=m=parseFloat(m),d+=m),d||y?(d*=p,y*=p,n=Math.cos(d)*v,r=Math.sin(d)*v,i=Math.sin(d-y)*-_,o=Math.cos(d-y)*_,y&&(m*=p,a=Math.tan(y-m),i*=a=Math.sqrt(1+a*a),o*=a,m&&(a=Math.tan(m),n*=a=Math.sqrt(1+a*a),r*=a)),n=Object(l.v)(n),r=Object(l.v)(r),i=Object(l.v)(i),o=Object(l.v)(o)):(n=v,o=_,r=i=0),(S&&!~(h+"").indexOf("px")||O&&!~(f+"").indexOf("px"))&&(S=W(g,"x",h,"px"),O=W(g,"y",f,"px")),(b||E||T||w)&&(S=Object(l.v)(S+b-(b*n+E*i)+T),O=Object(l.v)(O+E-(b*r+E*o)+w)),(u||c)&&(a=g.getBBox(),S=Object(l.v)(S+u/100*a.width),O=Object(l.v)(O+c/100*a.height)),a="matrix("+n+","+r+","+i+","+o+","+S+","+O+")",g.setAttribute("transform",a),x&&(g.style[C]=a)},ct=function(t,e,n,r,i,o){var a,s,u=Object(l.m)(i),c=parseFloat(i)*(u&&~i.indexOf("rad")?f:1),h=o?c*o:c-r,p=r+h+"deg";return u&&("short"===(a=i.split("_")[1])&&(h%=360)!==h%180&&(h+=h<0?360:-360),"cw"===a&&h<0?h=(h+36e9)%360-360*~~(h/360):"ccw"===a&&h>0&&(h=(h-36e9)%360-360*~~(h/360))),t._pt=s=new l.d(t._pt,e,n,r,h,b),s.e=p,s.u="deg",t._props.push(n),s},lt=function(t,e){for(var n in e)t[n]=e[n];return t},ht=function(t,e,n){var r,i,o,a,s,u,c,f=lt({},n._gsap),p=n.style;for(i in f.svg?(o=n.getAttribute("transform"),n.setAttribute("transform",""),p[C]=e,r=rt(n,1),H(n,C),n.setAttribute("transform",o)):(o=getComputedStyle(n)[C],p[C]=e,r=rt(n,1),p[C]=o),h)(o=f[i])!==(a=r[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(s=Object(l.z)(o)!==(c=Object(l.z)(a))?W(n,i,o,c):parseFloat(o),u=parseFloat(a),t._pt=new l.d(t._pt,r,i,s,u-s,g),t._pt.u=c||0,t._props.push(i));lt(r,f)};
/*!
 * CSSPlugin 3.6.1
 * https://greensock.com
 *
 * Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/Object(l.i)("padding,margin,Width,Radius",(function(t,e){var n="Top",r="Right",i="Bottom",o="Left",a=(e<3?[n,r,i,o]:[n+o,n+r,i+r,i+o]).map((function(n){return e<2?t+n:"border"+n+t}));Z[e>1?"border"+t:t]=function(t,e,n,r,i){var o,s;if(arguments.length<4)return o=a.map((function(e){return Y(t,e,n)})),5===(s=o.join(" ")).split(o[0]).length?o[0]:s;o=(r+"").split(" "),s={},a.forEach((function(t,e){return s[t]=o[e]=o[e]||o[(e-1)/2|0]})),t.init(e,s,i)}}));var ft,pt,dt={name:"css",register:L,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,i){var o,s,u,c,f,p,d,y,m,b,w,x,S,O,P,R,A,I,k,N=this._props,M=t.style,j=n.vars.startAt;for(d in a||L(),e)if("autoRound"!==d&&(s=e[d],!l.r[d]||!Object(l.e)(d,e,n,r,t,i)))if(f=typeof s,p=Z[d],"function"===f&&(f=typeof(s=s.call(n,r,t,i))),"string"===f&&~s.indexOf("random(")&&(s=Object(l.u)(s)),p)p(this,t,d,s,n)&&(P=1);else if("--"===d.substr(0,2))o=(getComputedStyle(t).getPropertyValue(d)+"").trim(),s+="",l.f.lastIndex=0,l.f.test(o)||(y=Object(l.z)(o),m=Object(l.z)(s)),m?y!==m&&(o=W(t,d,o,m)+m):y&&(s+=y),this.add(M,"setProperty",o,s,r,i,0,0,d);else if("undefined"!==f){if(j&&d in j?(o="function"==typeof j[d]?j[d].call(n,r,t,i):j[d],d in l.h.units&&!Object(l.z)(o)&&(o+=l.h.units[d]),"="===(o+"").charAt(1)&&(o=Y(t,d))):o=Y(t,d),c=parseFloat(o),(b="string"===f&&"="===s.charAt(1)?+(s.charAt(0)+"1"):0)&&(s=s.substr(2)),u=parseFloat(s),d in _&&("autoAlpha"===d&&(1===c&&"hidden"===Y(t,"visibility")&&u&&(c=0),V(this,M,"visibility",c?"inherit":"hidden",u?"inherit":"hidden",!u)),"scale"!==d&&"transform"!==d&&~(d=_[d]).indexOf(",")&&(d=d.split(",")[0])),w=d in h)if(x||((S=t._gsap).renderTransform&&!e.parseTransform||rt(t,e.parseTransform),O=!1!==e.smoothOrigin&&S.smooth,(x=this._pt=new l.d(this._pt,M,C,0,1,S.renderTransform,S,0,-1)).dep=1),"scale"===d)this._pt=new l.d(this._pt,S,"scaleY",S.scaleY,b?b*u:u-S.scaleY),N.push("scaleY",d),d+="X";else{if("transformOrigin"===d){A=void 0,I=void 0,k=void 0,A=(R=s).split(" "),I=A[0],k=A[1]||"50%","top"!==I&&"bottom"!==I&&"left"!==k&&"right"!==k||(R=I,I=k,k=R),A[0]=q[I]||I,A[1]=q[k]||k,s=A.join(" "),S.svg?nt(t,s,0,O,0,this):((m=parseFloat(s.split(" ")[2])||0)!==S.zOrigin&&V(this,S,"zOrigin",S.zOrigin,m),V(this,M,d,it(o),it(s)));continue}if("svgOrigin"===d){nt(t,s,1,O,0,this);continue}if(d in J){ct(this,S,d,c,s,b);continue}if("smoothOrigin"===d){V(this,S,"smooth",S.smooth,s);continue}if("force3D"===d){S[d]=s;continue}if("transform"===d){ht(this,s,t);continue}}else d in M||(d=D(d)||d);if(w||(u||0===u)&&(c||0===c)&&!v.test(s)&&d in M)u||(u=0),(y=(o+"").substr((c+"").length))!==(m=Object(l.z)(s)||(d in l.h.units?l.h.units[d]:y))&&(c=W(t,d,o,m)),this._pt=new l.d(this._pt,w?S:M,d,c,b?b*u:u-c,w||"px"!==m&&"zIndex"!==d||!1===e.autoRound?g:T),this._pt.u=m||0,y!==m&&(this._pt.b=o,this._pt.r=E);else if(d in M)z.call(this,t,d,o,s);else{if(!(d in t)){Object(l.o)(d,s);continue}this.add(t,d,t[d],s,r,i)}N.push(d)}P&&Object(l.w)(this)},get:Y,aliases:_,getSetter:function(t,e,n){var r=_[e];return r&&r.indexOf(",")<0&&(e=r),e in h&&e!==k&&(t._gsap.x||Y(t,"x"))?n&&u===n?"scale"===e?R:P:(u=n||{})&&("scale"===e?A:I):t.style&&!Object(l.n)(t.style[e])?S:~e.indexOf("-")?O:Object(l.l)(t,e)},core:{_removeProperty:H,_getMatrix:et}};l.A.utils.checkPrefix=D,ft="rotation,rotationX,rotationY,skewX,skewY",pt=Object(l.i)("x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+ft+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){h[t]=1})),Object(l.i)(ft,(function(t){l.h.units[t]="deg",J[t]=1})),_[pt[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+ft,Object(l.i)("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");_[e[1]]=pt[e[0]]})),Object(l.i)("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){l.h.units[t]="px"})),l.A.registerPlugin(dt)},"./node_modules/@games/gsap/EasePack.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));
/*!
 * EasePack 3.0.0
 * https://greensock.com
 *
 * @license Copyright 2008-2019, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
var r,i,o=function(){return r||"undefined"!=typeof window&&(r=window.gsap)&&r.registerPlugin&&r},a=function(t,e){return!!(void 0===t?e:t&&!~(t+"").indexOf("false"))},s=function(t){if(r=t||o()){i=r.registerEase;var e,n=r.parseEase(),a=function(t){return function(e){var n=.5+e/2;t.config=function(e){return t(2*(1-e)*e*n+e*e)}}};for(e in n)n[e].config||a(n[e]);for(e in i("slow",f),i("expoScale",p),i("rough",d),y)"version"!==e&&r.core.globals(e,y[e]);1}},u=function(t,e,n){var r=(t=Math.min(1,t||.7))<1?e||0===e?e:.7:0,i=(1-t)/2,o=i+t,s=a(n);return function(t){var e=t+(.5-t)*r;return t<i?s?1-(t=1-t/i)*t:e-(t=1-t/i)*t*t*t*e:t>o?s?1===t?0:1-(t=(t-o)/i)*t:e+(t-e)*(t=(t-o)/i)*t*t*t:s?1:e}},c=function(t,e,n){var i=Math.log(e/t),o=e-t;return n&&(n=r.parseEase(n)),function(e){return(t*Math.exp(i*(n?n(e):e))-t)/o}},l=function(t,e,n){this.t=t,this.v=e,n&&(this.next=n,n.prev=this,this.c=n.v-e,this.gap=n.t-t)},h=function(t){"object"!=typeof t&&(t={points:+t||20});for(var e,n,i,o,s,u,c,h=t.taper||"none",f=[],p=0,d=0|(+t.points||20),y=d,m=a(t.randomize,!0),v=a(t.clamp),_=r?r.parseEase(t.template):0,g=.4*(+t.strength||1);--y>-1;)e=m?Math.random():1/d*y,n=_?_(e):e,i="none"===h?g:"out"===h?(o=1-e)*o*g:"in"===h?e*e*g:e<.5?(o=2*e)*o*.5*g:(o=2*(1-e))*o*.5*g,m?n+=Math.random()*i-.5*i:y%2?n+=.5*i:n-=.5*i,v&&(n>1?n=1:n<0&&(n=0)),f[p++]={x:e,y:n};for(f.sort((function(t,e){return t.x-e.x})),u=new l(1,1,null),y=d;y--;)s=f[y],u=new l(s.x,s.y,u);return c=new l(0,0,u.t?u:u.next),function(t){var e=c;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return c=e,e.v+(t-e.t)/e.gap*e.c}},f=u(.7);f.ease=f,f.config=u;var p=c(1,2);p.config=c;var d=h();d.ease=d,d.config=h;var y={SlowMo:f,RoughEase:d,ExpoScaleEase:p};for(var m in y)y[m].register=s,y[m].version="3.0.0";o()&&r.registerPlugin(f)},"./node_modules/@games/gsap/InertiaPlugin.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return Z}));
/*!
 * VelocityTracker: 3.6.1
 * https://greensock.com
 *
 * Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
var r,i,o,a,s,u,c,l,h=function(){return r||"undefined"!=typeof window&&(r=window.gsap)},f={},p=function(t){return l(t).id},d=function(t){return f[p("string"==typeof t?o(t)[0]:t)]},y=function(t){var e,n=s;if(t-c>=.05)for(c,c=t;n;)((e=n.g(n.t,n.p))!==n.v1||t-n.t1>.2)&&(n.v2=n.v1,n.v1=e,n.t2=n.t1,n.t1=t),n=n._next},m={deg:360,rad:2*Math.PI},v=function(){(r=h())&&(o=r.utils.toArray,a=r.utils.getUnit,l=r.core.getCache,u=r.ticker,i=1)},_=function(t,e,n,r){this.t=t,this.p=e,this.g=t._gsap.get,this.rCap=m[n||a(this.g(t,e))],this.v1=this.v2=0,this.t1=this.t2=u.time,r&&(this._next=r,r._prev=this)},g=function(){function t(t,e){i||v(),this.target=o(t)[0],f[p(this.target)]=this,this._props={},e&&this.add(e)}t.register=function(t){r=t,v()};var e=t.prototype;return e.get=function(t,e){var n,r,i,o=this._props[t]||console.warn("Not tracking "+t+" velocity.");return n=parseFloat(e?o.v1:o.g(o.t,o.p))-parseFloat(o.v2),(r=o.rCap)&&(n%=r)!==n%(r/2)&&(n=n<0?n+r:n-r),i=n/((e?o.t1:u.time)-o.t2),Math.round(1e4*i)/1e4},e.getAll=function(){var t,e={},n=this._props;for(t in n)e[t]=this.get(t);return e},e.isTracking=function(t){return t in this._props},e.add=function(t,e){t in this._props||(s||(u.add(y),c=u.time),s=this._props[t]=new _(this.target,t,e,s))},e.remove=function(t){var e,n,r=this._props[t];r&&(e=r._prev,n=r._next,e&&(e._next=n),n?n._prev=e:s===r&&(u.remove(y),s=0),delete this._props[t])},e.kill=function(t){for(var e in this._props)this.remove(e);t||delete f[p(this.target)]},t.track=function(e,n,r){i||v();for(var a,s,u=[],c=o(e),l=n.split(","),h=(r||"").split(","),f=c.length;f--;){for(a=d(c[f])||new t(c[f]),s=l.length;s--;)a.add(l[s],h[s]||h[0]);u.push(a)}return u},t.untrack=function(t,e){var n=(e||"").split(",");o(t).forEach((function(t){var e=d(t);e&&(n.length?n.forEach((function(t){return e.remove(t)})):e.kill(1))}))},t.isTracking=function(t,e){var n=d(t);return n&&n.isTracking(e)},t.getVelocity=function(t,e){var n=d(t);return n&&n.isTracking(e)?n.get(e):console.warn("Not tracking velocity of "+e)},t}();g.getByTarget=d,h()&&r.registerPlugin(g);
/*!
 * InertiaPlugin 3.6.1
 * https://greensock.com
 *
 * @license Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
var b,E,T,w,x,S,O,P,R,A,I,C,k=g.getByTarget,N=function(){return b||"undefined"!=typeof window&&(b=window.gsap)&&b.registerPlugin&&b},M=function(t){return"number"==typeof t},j=function(t){return"object"==typeof t},D=function(t){return"function"==typeof t},L=Array.isArray,B=function(t){return t},F=1e10,U=function(t,e,n){for(var r in e)r in t||r===n||(t[r]=e[r]);return t},G=function t(e){var n,r,i={};for(n in e)i[n]=j(r=e[n])?t(r):r;return i},H=function(t,e,n,r,i){var o,a,s,u,c=e.length,l=0,h=F;if(j(t)){for(;c--;){for(s in o=e[c],a=0,t)a+=(u=o[s]-t[s])*u;a<h&&(l=c,h=a)}if((i||F)<F&&i<Math.sqrt(h))return t}else for(;c--;)(a=(o=e[c])-t)<0&&(a=-a),a<h&&o>=r&&o<=n&&(l=c,h=a);return e[l]},V=function(t,e,n,r,i,o){if("auto"===t.end)return t;var a,s,u=t.end;if(n=isNaN(n)?F:n,r=isNaN(r)?-F:r,j(e)){if(a=e.calculated?e:(D(u)?u(e):H(e,u,n,r,o))||e,!e.calculated){for(s in a)e[s]=a[s];e.calculated=!0}a=a[i]}else a=D(u)?u(e):L(u)?H(e,u,n,r,o):parseFloat(u);return a>n?a=n:a<r&&(a=r),{max:a,min:a,unitFactor:t.unitFactor}},X=function(t,e,n){return isNaN(t[e])?n:+t[e]},W=function(t,e){return.05*e*t/A},Y=function(t,e,n){return Math.abs((e-t)*A/n/.05)},z={resistance:1,checkpoint:1,preventOvershoot:1,linkedProps:1,radius:1,duration:1},q=function(t,e,n,r){if(e.linkedProps){var i,o,a,s,u,c,l=e.linkedProps.split(","),h={};for(i=0;i<l.length;i++)(a=e[o=l[i]])&&(s=M(a.velocity)?a.velocity:(u=u||k(t))&&u.isTracking(o)?u.get(o):0,c=Math.abs(s/X(a,"resistance",r)),h[o]=parseFloat(n(t,o))+W(s,c));return h}},K=function(){(b=N())&&(T=b.parseEase,w=b.utils.toArray,O=b.utils.getUnit,R=b.core.getCache,I=b.utils.clamp,x=T("power3"),A=x(.05),P=b.core.PropTween,b.config({resistance:100,unitFactors:{time:1e3,totalTime:1e3,progress:1e3,totalProgress:1e3}}),S=b.config(),b.registerPlugin(g),E=1)},Z={version:"3.6.1",name:"inertia",register:function(t){b=t,K()},init:function(t,e,n,r,i){E||K();var o=k(t);if("auto"===e){if(!o)return void console.warn("No inertia tracking on "+t+". InertiaPlugin.track(target) first.");e=o.getAll()}this.target=t,this.tween=n,C=e;var a,s,u,c,l,h,f,p,d,y=t._gsap,m=y.get,v=e.duration,_=j(v),g=e.preventOvershoot||_&&0===v.overshoot,b=X(e,"resistance",S.resistance),T=M(v)?v:function(t,e,n,r,i,o){if(void 0===n&&(n=10),void 0===r&&(r=.2),void 0===i&&(i=1),void 0===o&&(o=0),"string"==typeof t&&(t=w(t)[0]),!t)return 0;var a,s,u,c,l,h,f,p,d,y,m=0,v=F,_=e.inertia||e,g=R(t).get,b=X(_,"resistance",S.resistance);for(a in y=q(t,_,g,b),_)z[a]||(s=_[a],j(s)||((p=p||k(t))&&p.isTracking(a)?s=M(s)?{velocity:s}:{velocity:p.get(a)}:(c=+s||0,u=Math.abs(c/b))),j(s)&&(c=M(s.velocity)?s.velocity:(p=p||k(t))&&p.isTracking(a)?p.get(a):0,u=I(r,n,Math.abs(c/X(s,"resistance",b))),h=(l=parseFloat(g(t,a))||0)+W(c,u),"end"in s&&(s=V(s,y&&a in y?y:h,s.max,s.min,a,_.radius),o&&(C===e&&(C=_=G(e)),_[a]=U(s,_[a],"end"))),"max"in s&&h>+s.max+1e-10?(d=s.unitFactor||S.unitFactors[a]||1,(f=l>s.max&&s.min!==s.max||c*d>-15&&c*d<45?r+.1*(n-r):Y(l,s.max,c))+i<v&&(v=f+i)):"min"in s&&h<+s.min-1e-10&&(d=s.unitFactor||S.unitFactors[a]||1,(f=l<s.min&&s.min!==s.max||c*d>-45&&c*d<15?r+.1*(n-r):Y(l,s.min,c))+i<v&&(v=f+i)),f>m&&(m=f)),u>m&&(m=u));return m>v&&(m=v),m>n?n:m<r?r:m}(t,e,_&&v.max||10,_&&v.min||.2,_&&"overshoot"in v?+v.overshoot:g?0:1,!0);for(a in e=C,C=0,d=q(t,e,m,b),e)z[a]||(s=e[a],D(s)&&(s=s(r,t,i)),M(s)?l=s:j(s)&&!isNaN(s.velocity)?l=+s.velocity:o&&o.isTracking(a)?l=o.get(a):console.warn("ERROR: No velocity was defined for "+t+" property: "+a),h=W(l,T),p=0,u=m(t,a),c=O(u),u=parseFloat(u),j(s)&&(f=u+h,"end"in s&&(s=V(s,d&&a in d?d:f,s.max,s.min,a,e.radius)),"max"in s&&+s.max<f?g||s.preventOvershoot?h=s.max-u:p=s.max-u-h:"min"in s&&+s.min>f&&(g||s.preventOvershoot?h=s.min-u:p=s.min-u-h)),this._props.push(a),this._pt=new P(this._pt,t,a,u,0,B,0,y.set(t,a,this)),this._pt.u=c||0,this._pt.c1=h,this._pt.c2=p);return n.duration(T),1},render:function(t,e){var n,r=e._pt;for(t=x(e.tween._time/e.tween._dur);r;)r.set(r.t,r.p,(n=r.s+r.c1*t+r.c2*t*t,Math.round(1e4*n)/1e4+r.u),r.d,t),r=r._next}};"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach((function(t){return Z[t]=g[t]})),N()&&b.registerPlugin(Z)},"./node_modules/@games/gsap/MotionPathPlugin.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return wt}));
/*!
 * paths 3.6.1
 * https://greensock.com
 *
 * Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
var r=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,i=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,o=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,a=/(^[#\.][a-z]|[a-y][a-z])/i,s=Math.PI/180,u=180/Math.PI,c=Math.sin,l=Math.cos,h=Math.abs,f=Math.sqrt,p=Math.atan2,d=function(t){return"string"==typeof t},y=function(t){return"number"==typeof t},m={},v={},_=function(t){return Math.round((t+1e8)%1*1e5)/1e5||(t<0?0:1)},g=function(t){return Math.round(1e5*t)/1e5||0},b=function(t){return Math.round(1e10*t)/1e10||0},E=function(t,e,n,r){var i=t[e],o=1===r?6:k(i,n,r);if(o&&o+n+2<i.length)return t.splice(e,0,i.slice(0,n+o+2)),i.splice(0,n+o),1},T=function(t,e){return e.totalLength=t.totalLength,t.samples?(e.samples=t.samples.slice(0),e.lookup=t.lookup.slice(0),e.minLength=t.minLength,e.resolution=t.resolution):t.totalPoints&&(e.totalPoints=t.totalPoints),e},w=function(t,e){var n=t.length,r=t[n-1]||[],i=r.length;n&&e[0]===r[i-2]&&e[1]===r[i-1]&&(e=r.concat(e.slice(2)),n--),t[n]=e};function x(t){var e,n=(t=d(t)&&a.test(t)&&document.querySelector(t)||t).getAttribute?t:0;return n&&(t=t.getAttribute("d"))?(n._gsPath||(n._gsPath={}),(e=n._gsPath[t])&&!e._dirty?e:n._gsPath[t]=L(t)):t?d(t)?L(t):y(t[0])?[t]:t:console.warn("Expecting a <path> element or an SVG path data string")}function S(t){var e,n=0;for(t.reverse();n<t.length;n+=2)e=t[n],t[n]=t[n+1],t[n+1]=e;t.reversed=!t.reversed}var O={rect:"rx,ry,x,y,width,height",circle:"r,cx,cy",ellipse:"rx,ry,cx,cy",line:"x1,x2,y1,y2"};function P(t,e){var n,r,o,a,s,u,c,l,h,f,p,d,y,m,v,_,g,b,E,T,w,x,S=t.tagName.toLowerCase(),P=.552284749831;return"path"!==S&&t.getBBox?(u=function(t,e){var n,r=document.createElementNS("http://www.w3.org/2000/svg","path"),i=[].slice.call(t.attributes),o=i.length;for(e=","+e+",";--o>-1;)n=i[o].nodeName.toLowerCase(),e.indexOf(","+n+",")<0&&r.setAttributeNS(null,n,i[o].nodeValue);return r}(t,"x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points"),x=function(t,e){for(var n=e?e.split(","):[],r={},i=n.length;--i>-1;)r[n[i]]=+t.getAttribute(n[i])||0;return r}(t,O[S]),"rect"===S?(a=x.rx,s=x.ry||a,r=x.x,o=x.y,f=x.width-2*a,p=x.height-2*s,n=a||s?"M"+(_=(m=(y=r+a)+f)+a)+","+(b=o+s)+" V"+(E=b+p)+" C"+[_,T=E+s*P,v=m+a*P,w=E+s,m,w,m-(m-y)/3,w,y+(m-y)/3,w,y,w,d=r+a*(1-P),w,r,T,r,E,r,E-(E-b)/3,r,b+(E-b)/3,r,b,r,g=o+s*(1-P),d,o,y,o,y+(m-y)/3,o,m-(m-y)/3,o,m,o,v,o,_,g,_,b].join(",")+"z":"M"+(r+f)+","+o+" v"+p+" h"+-f+" v"+-p+" h"+f+"z"):"circle"===S||"ellipse"===S?("circle"===S?l=(a=s=x.r)*P:(a=x.rx,l=(s=x.ry)*P),n="M"+((r=x.cx)+a)+","+(o=x.cy)+" C"+[r+a,o+l,r+(c=a*P),o+s,r,o+s,r-c,o+s,r-a,o+l,r-a,o,r-a,o-l,r-c,o-s,r,o-s,r+c,o-s,r+a,o-l,r+a,o].join(",")+"z"):"line"===S?n="M"+x.x1+","+x.y1+" L"+x.x2+","+x.y2:"polyline"!==S&&"polygon"!==S||(n="M"+(r=(h=(t.getAttribute("points")+"").match(i)||[]).shift())+","+(o=h.shift())+" L"+h.join(","),"polygon"===S&&(n+=","+r+","+o+"z")),u.setAttribute("d",U(u._gsRawPath=L(n))),e&&t.parentNode&&(t.parentNode.insertBefore(u,t),t.parentNode.removeChild(t)),u):t}function R(t,e,n){var r,i=t[e],o=t[e+2],a=t[e+4];return i+=(o-i)*n,i+=((o+=(a-o)*n)-i)*n,r=o+(a+(t[e+6]-a)*n-o)*n-i,i=t[e+1],i+=((o=t[e+3])-i)*n,i+=((o+=((a=t[e+5])-o)*n)-i)*n,g(p(o+(a+(t[e+7]-a)*n-o)*n-i,r)*u)}function A(t,e,n){n=void 0===n?1:b(n)||0,e=b(e)||0;var r=Math.max(0,~~(h(n-e)-1e-8)),i=function(t){for(var e=[],n=0;n<t.length;n++)e[n]=T(t[n],t[n].slice(0));return T(t,e)}(t);if(e>n&&(e=1-e,n=1-n,function(t,e){var n=t.length;for(e||t.reverse();n--;)t[n].reversed||S(t[n])}(i),i.totalLength=0),e<0||n<0){var o=Math.abs(~~Math.min(e,n))+1;e+=o,n+=o}i.totalLength||C(i);var a,s,u,c,l,f,p,d,y=n>1,_=N(i,e,m,!0),g=N(i,n,v),x=g.segment,O=_.segment,P=g.segIndex,A=_.segIndex,I=g.i,M=_.i,j=A===P,D=I===M&&j;if(y||r){for(a=P<A||j&&I<M||D&&g.t<_.t,E(i,A,M,_.t)&&(A++,a||(P++,D?(g.t=(g.t-_.t)/(1-_.t),I=0):j&&(I-=M))),1-(n-e)<1e-5?P=A-1:!g.t&&P?P--:E(i,P,I,g.t)&&a&&A++,1===_.t&&(A=(A+1)%i.length),l=[],p=1+(f=i.length)*r,d=A,p+=(f-A+P)%f,c=0;c<p;c++)w(l,i[d++%f]);i=l}else if(u=1===g.t?6:k(x,I,g.t),e!==n)for(s=k(O,M,D?_.t/g.t:_.t),j&&(u+=s),x.splice(I+u+2),(s||M)&&O.splice(0,M+s),c=i.length;c--;)(c<A||c>P)&&i.splice(c,1);else x.angle=R(x,I+u,0),_=x[I+=u],g=x[I+1],x.length=x.totalLength=0,x.totalPoints=i.totalPoints=8,x.push(_,g,_,g,_,g,_,g);return i.totalLength=0,i}function I(t,e,n){e=e||0,t.samples||(t.samples=[],t.lookup=[]);var r,i,o,a,s,u,c,l,p,d,y,m,v,_,g,b,E,T=~~t.resolution||12,w=1/T,x=n?e+6*n+1:t.length,S=t[e],O=t[e+1],P=e?e/6*T:0,R=t.samples,A=t.lookup,I=(e?t.minLength:1e8)||1e8,C=R[P+n*T-1],k=e?R[P-1]:0;for(R.length=A.length=0,i=e+2;i<x;i+=6){if(o=t[i+4]-S,a=t[i+2]-S,s=t[i]-S,l=t[i+5]-O,p=t[i+3]-O,d=t[i+1]-O,u=c=y=m=0,h(o)<1e-5&&h(l)<1e-5&&h(s)+h(d)<1e-5)t.length>8&&(t.splice(i,6),i-=6,x-=6);else for(r=1;r<=T;r++)u=c-(c=((_=w*r)*_*o+3*(v=1-_)*(_*a+v*s))*_),y=m-(m=(_*_*l+3*v*(_*p+v*d))*_),(b=f(y*y+u*u))<I&&(I=b),k+=b,R[P++]=k;S+=o,O+=l}if(C)for(C-=k;P<R.length;P++)R[P]+=C;if(R.length&&I)for(t.totalLength=E=R[R.length-1]||0,t.minLength=I,b=g=0,r=0;r<E;r+=I)A[b++]=R[g]<r?++g:g;else t.totalLength=R[0]=0;return e?k-R[e/2-1]:k}function C(t,e){var n,r,i;for(i=n=r=0;i<t.length;i++)t[i].resolution=~~e||12,r+=t[i].length,n+=I(t[i]);return t.totalPoints=r,t.totalLength=n,t}function k(t,e,n){if(n<=0||n>=1)return 0;var r=t[e],i=t[e+1],o=t[e+2],a=t[e+3],s=t[e+4],u=t[e+5],c=r+(o-r)*n,l=o+(s-o)*n,h=i+(a-i)*n,f=a+(u-a)*n,p=c+(l-c)*n,d=h+(f-h)*n,y=s+(t[e+6]-s)*n,m=u+(t[e+7]-u)*n;return l+=(y-l)*n,f+=(m-f)*n,t.splice(e+2,4,g(c),g(h),g(p),g(d),g(p+(l-p)*n),g(d+(f-d)*n),g(l),g(f),g(y),g(m)),t.samples&&t.samples.splice(e/6*t.resolution|0,0,0,0,0,0,0,0),6}function N(t,e,n,r){n=n||{},t.totalLength||C(t),(e<0||e>1)&&(e=_(e));var i,o,a,s,u,c,l,h=0,f=t[0];if(e)if(1===e)l=1,c=(f=t[h=t.length-1]).length-8;else{if(t.length>1){for(a=t.totalLength*e,u=c=0;(u+=t[c++].totalLength)<a;)h=c;e=(a-(s=u-(f=t[h]).totalLength))/(u-s)||0}i=f.samples,o=f.resolution,a=f.totalLength*e,s=(c=f.lookup[~~(a/f.minLength)]||0)?i[c-1]:0,(u=i[c])<a&&(s=u,u=i[++c]),l=1/o*((a-s)/(u-s)+c%o),c=6*~~(c/o),r&&1===l&&(c+6<f.length?(c+=6,l=0):h+1<t.length&&(c=l=0,f=t[++h]))}else l=c=h=0,f=t[0];return n.t=l,n.i=c,n.path=t,n.segment=f,n.segIndex=h,n}function M(t,e,n,r){var i,o,a,s,u,c,l,h,f,p=t[0],d=r||{};if((e<0||e>1)&&(e=_(e)),t.length>1){for(a=t.totalLength*e,u=c=0;(u+=t[c++].totalLength)<a;)p=t[c];e=(a-(s=u-p.totalLength))/(u-s)||0}return i=p.samples,o=p.resolution,a=p.totalLength*e,s=(c=p.lookup[e<1?~~(a/p.minLength):p.lookup.length-1]||0)?i[c-1]:0,(u=i[c])<a&&(s=u,u=i[++c]),f=1-(l=1/o*((a-s)/(u-s)+c%o)||0),h=p[c=6*~~(c/o)],d.x=g((l*l*(p[c+6]-h)+3*f*(l*(p[c+4]-h)+f*(p[c+2]-h)))*l+h),d.y=g((l*l*(p[c+7]-(h=p[c+1]))+3*f*(l*(p[c+5]-h)+f*(p[c+3]-h)))*l+h),n&&(d.angle=p.totalLength?R(p,c,l>=1?1-1e-9:l||1e-9):p.angle||0),d}function j(t,e,n,r,i,o,a){for(var s,u,c,l,h,f=t.length;--f>-1;)for(u=(s=t[f]).length,c=0;c<u;c+=2)l=s[c],h=s[c+1],s[c]=l*e+h*r+o,s[c+1]=l*n+h*i+a;return t._dirty=1,t}function D(t,e,n,r,i,o,a,u,p){if(t!==u||e!==p){n=h(n),r=h(r);var d=i%360*s,y=l(d),m=c(d),v=Math.PI,_=2*v,g=(t-u)/2,b=(e-p)/2,E=y*g+m*b,T=-m*g+y*b,w=E*E,x=T*T,S=w/(n*n)+x/(r*r);S>1&&(n=f(S)*n,r=f(S)*r);var O=n*n,P=r*r,R=(O*P-O*x-P*w)/(O*x+P*w);R<0&&(R=0);var A=(o===a?-1:1)*f(R),I=A*(n*T/r),C=A*(-r*E/n),k=(t+u)/2+(y*I-m*C),N=(e+p)/2+(m*I+y*C),M=(E-I)/n,j=(T-C)/r,D=(-E-I)/n,L=(-T-C)/r,B=M*M+j*j,F=(j<0?-1:1)*Math.acos(M/f(B)),U=(M*L-j*D<0?-1:1)*Math.acos((M*D+j*L)/f(B*(D*D+L*L)));isNaN(U)&&(U=v),!a&&U>0?U-=_:a&&U<0&&(U+=_),F%=_,U%=_;var G,H=Math.ceil(h(U)/(_/4)),V=[],X=U/H,W=4/3*c(X/2)/(1+l(X/2)),Y=y*n,z=m*n,q=m*-r,K=y*r;for(G=0;G<H;G++)E=l(i=F+G*X),T=c(i),M=l(i+=X),j=c(i),V.push(E-W*T,T+W*E,M+W*j,j-W*M,M,j);for(G=0;G<V.length;G+=2)E=V[G],T=V[G+1],V[G]=E*Y+T*q+k,V[G+1]=E*z+T*K+N;return V[G-2]=u,V[G-1]=p,V}}function L(t){var e,n,i,a,s,u,c,l,f,p,d,y,m,v,_,g=(t+"").replace(o,(function(t){var e=+t;return e<1e-4&&e>-1e-4?0:e})).match(r)||[],b=[],E=0,T=0,w=g.length,x=0,S="ERROR: malformed path: "+t,O=function(t,e,n,r){p=(n-t)/3,d=(r-e)/3,c.push(t+p,e+d,n-p,r-d,n,r)};if(!t||!isNaN(g[0])||isNaN(g[1]))return console.log(S),b;for(e=0;e<w;e++)if(m=s,isNaN(g[e])?u=(s=g[e].toUpperCase())!==g[e]:e--,i=+g[e+1],a=+g[e+2],u&&(i+=E,a+=T),e||(l=i,f=a),"M"===s)c&&(c.length<8?b.length-=1:x+=c.length),E=l=i,T=f=a,c=[i,a],b.push(c),e+=2,s="L";else if("C"===s)c||(c=[0,0]),u||(E=T=0),c.push(i,a,E+1*g[e+3],T+1*g[e+4],E+=1*g[e+5],T+=1*g[e+6]),e+=6;else if("S"===s)p=E,d=T,"C"!==m&&"S"!==m||(p+=E-c[c.length-4],d+=T-c[c.length-3]),u||(E=T=0),c.push(p,d,i,a,E+=1*g[e+3],T+=1*g[e+4]),e+=4;else if("Q"===s)p=E+2/3*(i-E),d=T+2/3*(a-T),u||(E=T=0),E+=1*g[e+3],T+=1*g[e+4],c.push(p,d,E+2/3*(i-E),T+2/3*(a-T),E,T),e+=4;else if("T"===s)p=E-c[c.length-4],d=T-c[c.length-3],c.push(E+p,T+d,i+2/3*(E+1.5*p-i),a+2/3*(T+1.5*d-a),E=i,T=a),e+=2;else if("H"===s)O(E,T,E=i,T),e+=1;else if("V"===s)O(E,T,E,T=i+(u?T-E:0)),e+=1;else if("L"===s||"Z"===s)"Z"===s&&(i=l,a=f,c.closed=!0),("L"===s||h(E-i)>.5||h(T-a)>.5)&&(O(E,T,i,a),"L"===s&&(e+=2)),E=i,T=a;else if("A"===s){if(v=g[e+4],_=g[e+5],p=g[e+6],d=g[e+7],n=7,v.length>1&&(v.length<3?(d=p,p=_,n--):(d=_,p=v.substr(2),n-=2),_=v.charAt(1),v=v.charAt(0)),y=D(E,T,+g[e+1],+g[e+2],+g[e+3],+v,+_,(u?E:0)+1*p,(u?T:0)+1*d),e+=n,y)for(n=0;n<y.length;n++)c.push(y[n]);E=c[c.length-2],T=c[c.length-1]}else console.log(S);return(e=c.length)<6?(b.pop(),e=0):c[0]===c[e-2]&&c[1]===c[e-1]&&(c.closed=!0),b.totalPoints=x+e,b}function B(t,e){void 0===e&&(e=1);for(var n=t[0],r=0,i=[n,r],o=2;o<t.length;o+=2)i.push(n,r,t[o],r=(t[o]-n)*e/2,n=t[o],-r);return i}function F(t,e,n){h(t[0]-t[2])<1e-4&&h(t[1]-t[3])<1e-4&&(t=t.slice(2));var r,i,o,a,s,u,d,y,m,v,_,b,E,T,w=t.length-2,x=+t[0],S=+t[1],O=+t[2],P=+t[3],R=[x,S,x,S],A=O-x,I=P-S,C=Math.abs(t[w]-x)<.001&&Math.abs(t[w+1]-S)<.001;for(isNaN(n)&&(n=Math.PI/10),C&&(t.push(O,P),O=x,P=S,x=t[w-2],S=t[w-1],t.unshift(x,S),w+=4),e=e||0===e?+e:1,s=2;s<w;s+=2)r=x,i=S,x=O,S=P,O=+t[s+2],P=+t[s+3],x===O&&S===P||(b=(u=A)*u+(y=I)*y,E=(A=O-x)*A+(I=P-S)*I,T=(d=O-r)*d+(m=P-i)*m,_=(o=Math.acos((b+E-T)/f(4*b*E)))/Math.PI*e,v=f(b)*_,_*=f(E),x===r&&S===i||(o>n?(a=p(m,d),R.push(g(x-l(a)*v),g(S-c(a)*v),g(x),g(S),g(x+l(a)*_),g(S+c(a)*_))):(a=p(y,u),R.push(g(x-l(a)*v),g(S-c(a)*v)),a=p(I,A),R.push(g(x),g(S),g(x+l(a)*_),g(S+c(a)*_)))));return x!==O||S!==P||R.length<4?R.push(g(O),g(P),g(O),g(P)):R.length-=2,C&&(R.splice(0,6),R.length=R.length-6),R}function U(t){y(t[0])&&(t=[t]);var e,n,r,i,o="",a=t.length;for(n=0;n<a;n++){for(i=t[n],o+="M"+g(i[0])+","+g(i[1])+" C",e=i.length,r=2;r<e;r++)o+=g(i[r++])+","+g(i[r++])+" "+g(i[r++])+","+g(i[r++])+" "+g(i[r++])+","+g(i[r])+" ";i.closed&&(o+="z")}return o}
/*!
 * matrix 3.6.1
 * https://greensock.com
 *
 * Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var G,H,V,X,W,Y,z,q,K="transform",Z=K+"Origin",$=function(t){var e=t.ownerDocument||t;!(K in t.style)&&"msTransform"in t.style&&(Z=(K="msTransform")+"Origin");for(;e.parentNode&&(e=e.parentNode););if(H=window,z=new it,e){G=e,V=e.documentElement,X=e.body;var n=e.createElement("div"),r=e.createElement("div");X.appendChild(n),n.appendChild(r),n.style.position="static",n.style[K]="translate3d(0,0,1px)",q=r.offsetParent!==n,X.removeChild(n)}return e},J=[],Q=[],tt=function(t){return t.ownerSVGElement||("svg"===(t.tagName+"").toLowerCase()?t:null)},et=function t(e,n){if(e.parentNode&&(G||$(e))){var r=tt(e),i=r?r.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",o=r?n?"rect":"g":"div",a=2!==n?0:100,s=3===n?100:0,u="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",c=G.createElementNS?G.createElementNS(i.replace(/^https/,"http"),o):G.createElement(o);return n&&(r?(Y||(Y=t(e)),c.setAttribute("width",.01),c.setAttribute("height",.01),c.setAttribute("transform","translate("+a+","+s+")"),Y.appendChild(c)):(W||((W=t(e)).style.cssText=u),c.style.cssText=u+"width:0.1px;height:0.1px;top:"+s+"px;left:"+a+"px",W.appendChild(c))),c}throw"Need document and parent."},nt=function(t,e){var n,r,i,o,a,s,u=tt(t),c=t===u,l=u?J:Q,h=t.parentNode;if(t===H)return t;if(l.length||l.push(et(t,1),et(t,2),et(t,3)),n=u?Y:W,u)i=c?{x:0,y:0}:t.getBBox(),(r=t.transform?t.transform.baseVal:{}).numberOfItems?(o=(r=r.numberOfItems>1?function(t){for(var e=new it,n=0;n<t.numberOfItems;n++)e.multiply(t.getItem(n).matrix);return e}(r):r.getItem(0).matrix).a*i.x+r.c*i.y,a=r.b*i.x+r.d*i.y):(r=z,o=i.x,a=i.y),e&&"g"===t.tagName.toLowerCase()&&(o=a=0),(c?u:h).appendChild(n),n.setAttribute("transform","matrix("+r.a+","+r.b+","+r.c+","+r.d+","+(r.e+o)+","+(r.f+a)+")");else{if(o=a=0,q)for(r=t.offsetParent,i=t;i&&(i=i.parentNode)&&i!==r&&i.parentNode;)(H.getComputedStyle(i)[K]+"").length>4&&(o=i.offsetLeft,a=i.offsetTop,i=0);if("absolute"!==(s=H.getComputedStyle(t)).position)for(r=t.offsetParent;h&&h!==r;)o+=h.scrollLeft||0,a+=h.scrollTop||0,h=h.parentNode;(i=n.style).top=t.offsetTop-a+"px",i.left=t.offsetLeft-o+"px",i[K]=s[K],i[Z]=s[Z],i.position="fixed"===s.position?"fixed":"absolute",t.parentNode.appendChild(n)}return n},rt=function(t,e,n,r,i,o,a){return t.a=e,t.b=n,t.c=r,t.d=i,t.e=o,t.f=a,t},it=function(){function t(t,e,n,r,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),rt(this,t,e,n,r,i,o)}var e=t.prototype;return e.inverse=function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.e,o=this.f,a=t*r-e*n||1e-10;return rt(this,r/a,-e/a,-n/a,t/a,(n*o-r*i)/a,-(t*o-e*i)/a)},e.multiply=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,o=this.e,a=this.f,s=t.a,u=t.c,c=t.b,l=t.d,h=t.e,f=t.f;return rt(this,s*e+c*r,s*n+c*i,u*e+l*r,u*n+l*i,o+h*e+f*r,a+h*n+f*i)},e.clone=function(){return new t(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,o=this.e,a=this.f;return e===t.a&&n===t.b&&r===t.c&&i===t.d&&o===t.e&&a===t.f},e.apply=function(t,e){void 0===e&&(e={});var n=t.x,r=t.y,i=this.a,o=this.b,a=this.c,s=this.d,u=this.e,c=this.f;return e.x=n*i+r*a+u||0,e.y=n*o+r*s+c||0,e},t}();function ot(t,e,n,r){if(!t||!t.parentNode||(G||$(t)).documentElement===t)return new it;var i=function(t){for(var e,n;t&&t!==X;)(n=t._gsap)&&n.uncache&&n.get(t,"x"),n&&!n.scaleX&&!n.scaleY&&n.renderTransform&&(n.scaleX=n.scaleY=1e-4,n.renderTransform(1,n),e?e.push(n):e=[n]),t=t.parentNode;return e}(t),o=tt(t)?J:Q,a=nt(t,n),s=o[0].getBoundingClientRect(),u=o[1].getBoundingClientRect(),c=o[2].getBoundingClientRect(),l=a.parentNode,h=!r&&function t(e){return"fixed"===H.getComputedStyle(e).position||((e=e.parentNode)&&1===e.nodeType?t(e):void 0)}(t),f=new it((u.left-s.left)/100,(u.top-s.top)/100,(c.left-s.left)/100,(c.top-s.top)/100,s.left+(h?0:H.pageXOffset||G.scrollLeft||V.scrollLeft||X.scrollLeft||0),s.top+(h?0:H.pageYOffset||G.scrollTop||V.scrollTop||X.scrollTop||0));if(l.removeChild(a),i)for(s=i.length;s--;)(u=i[s]).scaleX=u.scaleY=0,u.renderTransform(1,u);return e?f.inverse():f}
/*!
 * MotionPathPlugin 3.6.1
 * https://greensock.com
 *
 * @license Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var at,st,ut,ct,lt="x,translateX,left,marginLeft,xPercent".split(","),ht="y,translateY,top,marginTop,yPercent".split(","),ft=Math.PI/180,pt=function(t,e,n,r){for(var i=e.length,o=2===r?0:r,a=0;a<i;a++)t[o]=parseFloat(e[a][n]),2===r&&(t[o+1]=0),o+=2;return t},dt=function(t,e,n){return parseFloat(t._gsap.get(t,e,n||"px"))||0},yt=function(t){var e,n=t[0],r=t[1];for(e=2;e<t.length;e+=2)n=t[e]+=n,r=t[e+1]+=r},mt=function(t,e,n,r,i,o,a,s,u){"cubic"===a.type?e=[e]:(e.unshift(dt(n,r,s),i?dt(n,i,u):0),a.relative&&yt(e),e=[(i?F:B)(e,a.curviness)]);return e=o(Et(e,n,a)),Tt(t,n,r,e,"x",s),i&&Tt(t,n,i,e,"y",u),C(e,a.resolution||(0===a.curviness?20:12))},vt=function(t){return t},_t=/[-+\.]*\d+[\.e\-\+]*\d*[e\-\+]*\d*/g,gt=function(t,e,n){var r,i,o,a=ot(t);return"svg"===(t.tagName+"").toLowerCase()?(i=(r=t.viewBox.baseVal).x,o=r.y,r.width||(r={width:+t.getAttribute("width"),height:+t.getAttribute("height")})):(r=e&&t.getBBox&&t.getBBox(),i=o=0),e&&"auto"!==e&&(i+=e.push?e[0]*(r?r.width:t.offsetWidth||0):e.x,o+=e.push?e[1]*(r?r.height:t.offsetHeight||0):e.y),n.apply(i||o?a.apply({x:i,y:o}):{x:a.e,y:a.f})},bt=function(t,e,n,r){var i,o=ot(t.parentNode,!0,!0),a=o.clone().multiply(ot(e)),s=gt(t,n,o),u=gt(e,r,o),c=u.x,l=u.y;return a.e=a.f=0,"auto"===r&&e.getTotalLength&&"path"===e.tagName.toLowerCase()&&(i=e.getAttribute("d").match(_t)||[],c+=(i=a.apply({x:+i[0],y:+i[1]})).x,l+=i.y),(i||e.getBBox&&t.getBBox&&e.ownerSVGElement===t.ownerSVGElement)&&(c-=(i=a.apply(e.getBBox())).x,l-=i.y),a.e=c-s.x,a.f=l-s.y,a},Et=function(t,e,n){var r,i,o,a=n.align,s=n.matrix,u=n.offsetX,c=n.offsetY,l=n.alignOrigin,h=t[0][0],f=t[0][1],p=dt(e,"x"),d=dt(e,"y");return t&&t.length?(a&&("self"===a||(r=ct(a)[0]||e)===e?j(t,1,0,0,1,p-h,d-f):(l&&!1!==l[2]?at.set(e,{transformOrigin:100*l[0]+"% "+100*l[1]+"%"}):l=[dt(e,"xPercent")/-100,dt(e,"yPercent")/-100],o=(i=bt(e,r,l,"auto")).apply({x:h,y:f}),j(t,i.a,i.b,i.c,i.d,p+i.e-(o.x-i.e),d+i.f-(o.y-i.f)))),s?j(t,s.a,s.b,s.c,s.d,s.e,s.f):(u||c)&&j(t,1,0,0,1,u||0,c||0),t):x("M0,0L0,0")},Tt=function(t,e,n,r,i,o){var a=e._gsap,s=a.harness,u=s&&s.aliases&&s.aliases[n],c=u&&u.indexOf(",")<0?u:n,l=t._pt=new st(t._pt,e,c,0,0,vt,0,a.set(e,c,t));l.u=ut(a.get(e,c,o))||0,l.path=r,l.pp=i,t._props.push(c)},wt={version:"3.6.1",name:"motionPath",register:function(t,e,n){ut=(at=t).utils.getUnit,ct=at.utils.toArray,st=n},init:function(t,e){if(!at)return console.warn("Please gsap.registerPlugin(MotionPathPlugin)"),!1;"object"==typeof e&&!e.style&&e.path||(e={path:e});var n,r,i,o,a=[],s=e,u=s.path,c=s.autoRotate,l=s.unitX,h=s.unitY,f=s.x,p=s.y,d=u[0],y=(i=e.start,o="end"in e?e.end:1,function(t){return i||1!==o?A(t,i,o):t});if(this.rawPaths=a,this.target=t,(this.rotate=c||0===c)&&(this.rOffset=parseFloat(c)||0,this.radians=!!e.useRadians,this.rProp=e.rotation||"rotation",this.rSet=t._gsap.set(t,this.rProp,this),this.ru=ut(t._gsap.get(t,this.rProp))||0),Array.isArray(u)&&!("closed"in u)&&"number"!=typeof d){for(r in d)!f&&~lt.indexOf(r)?f=r:!p&&~ht.indexOf(r)&&(p=r);for(r in f&&p?a.push(mt(this,pt(pt([],u,f,0),u,p,1),t,f,p,y,e,l||ut(u[0][f]),h||ut(u[0][p]))):f=p=0,d)r!==f&&r!==p&&a.push(mt(this,pt([],u,r,2),t,r,0,y,e,ut(u[0][r])))}else C(n=y(Et(x(e.path),t,e)),e.resolution),a.push(n),Tt(this,t,e.x||"x",n,"x",e.unitX||"px"),Tt(this,t,e.y||"y",n,"y",e.unitY||"px")},render:function(t,e){var n=e.rawPaths,r=n.length,i=e._pt;for(t>1?t=1:t<0&&(t=0);r--;)M(n[r],t,!r&&e.rotate,n[r]);for(;i;)i.set(i.t,i.p,i.path[i.pp]+i.u,i.d,t),i=i._next;e.rotate&&e.rSet(e.target,e.rProp,n[0].angle*(e.radians?ft:1)+e.rOffset+e.ru,e,t)},getLength:function(t){return C(x(t)).totalLength},sliceRawPath:A,getRawPath:x,pointsToSegment:F,stringToRawPath:L,rawPathToString:U,transformRawPath:j,getGlobalMatrix:ot,getPositionOnPath:M,cacheRawPathMeasurements:C,convertToPath:function(t,e){return ct(t).map((function(t){return P(t,!1!==e)}))},convertCoordinates:function(t,e,n){var r=ot(e,!0,!0).multiply(ot(t));return n?r.apply(n):r},getAlignMatrix:bt,getRelativePosition:function(t,e,n,r){var i=bt(t,e,n,r);return{x:i.e,y:i.f}},arrayToRawPath:function(t,e){var n=pt(pt([],t,(e=e||{}).x||"x",0),t,e.y||"y",1);return e.relative&&yt(n),["cubic"===e.type?n:F(n,e.curviness)]}};(at||"undefined"!=typeof window&&(at=window.gsap)&&at.registerPlugin&&at)&&at.registerPlugin(wt)},"./node_modules/@games/gsap/PixiPlugin.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return H}));
/*!
 * PixiPlugin 3.6.1
 * https://greensock.com
 *
 * @license Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/
var r,i,o,a,s,u,c,l,h=function(){return"undefined"!=typeof window},f=function(){return r||h()&&(r=window.gsap)&&r.registerPlugin&&r},p=function(t){return"function"==typeof t},d=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],y=.212671,m=.71516,v=.072169,_=function(t,e){var n,r,i=[],o=0,a=0;for(n=0;n<4;n++){for(r=0;r<5;r++)a=4===r?t[o+4]:0,i[o+r]=t[o]*e[r]+t[o+1]*e[r+5]+t[o+2]*e[r+10]+t[o+3]*e[r+15]+a;o+=5}return i},g=function(t,e){var n=1-e,r=n*y,i=n*m,o=n*v;return _([r+e,i,o,0,0,r,i+e,o,0,0,r,i,o+e,0,0,0,0,0,1,0],t)},b=function(t,e,n){var r=o(e),i=r[0]/255,a=r[1]/255,s=r[2]/255,u=1-n;return _([u+n*i*y,n*i*m,n*i*v,0,0,n*a*y,u+n*a*m,n*a*v,0,0,n*s*y,n*s*m,u+n*s*v,0,0,0,0,0,1,0],t)},E=function(t,e){e*=Math.PI/180;var n=Math.cos(e),r=Math.sin(e);return _([y+n*(1-y)+r*-y,m+n*-m+r*-m,v+n*-v+r*(1-v),0,0,y+n*-y+.143*r,m+n*(1-m)+.14*r,v+n*-v+-.283*r,0,0,y+n*-y+r*-(1-y),m+n*-m+r*m,v+n*(1-v)+r*v,0,0,0,0,0,1,0,0,0,0,0,1],t)},T=function(t,e){return _([e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0],t)},w=function(t,e){var n,r,i=a.filters[e],o=t.filters||[],s=o.length;for(i||(r=e+" not found. PixiPlugin.registerPIXI(PIXI)",console.warn(r));--s>-1;)if(o[s]instanceof i)return o[s];return n=new i,"BlurFilter"===e&&(n.blur=0),o.push(n),t.filters=o,n},x=function(t,e,n,r){e.add(n,t,n[t],r[t]),e._props.push(t)},S=function(t,e){var n=new a.filters.ColorMatrixFilter;return n.matrix=e,n.brightness(t,!0),n.matrix},O={contrast:1,saturation:1,colorizeAmount:0,colorize:"rgb(255,255,255)",hue:0,brightness:1},P=function(t,e,n){var r,i,o,a=w(t,"ColorMatrixFilter"),s=t._gsColorMatrixFilter=t._gsColorMatrixFilter||function(t){var e,n={};for(e in t)n[e]=t[e];return n}(O),u=e.combineCMF&&!("colorMatrixFilter"in e&&!e.colorMatrixFilter);o=a.matrix,e.resolution&&(a.resolution=e.resolution),e.matrix&&e.matrix.length===o.length?(i=e.matrix,1!==s.contrast&&x("contrast",n,s,O),s.hue&&x("hue",n,s,O),1!==s.brightness&&x("brightness",n,s,O),s.colorizeAmount&&(x("colorize",n,s,O),x("colorizeAmount",n,s,O)),1!==s.saturation&&x("saturation",n,s,O)):(i=d.slice(),null!=e.contrast?(i=T(i,+e.contrast),x("contrast",n,s,e)):1!==s.contrast&&(u?i=T(i,s.contrast):x("contrast",n,s,O)),null!=e.hue?(i=E(i,+e.hue),x("hue",n,s,e)):s.hue&&(u?i=E(i,s.hue):x("hue",n,s,O)),null!=e.brightness?(i=S(+e.brightness,i),x("brightness",n,s,e)):1!==s.brightness&&(u?i=S(s.brightness,i):x("brightness",n,s,O)),null!=e.colorize?(e.colorizeAmount="colorizeAmount"in e?+e.colorizeAmount:1,i=b(i,e.colorize,e.colorizeAmount),x("colorize",n,s,e),x("colorizeAmount",n,s,e)):s.colorizeAmount&&(u?i=b(i,s.colorize,s.colorizeAmount):(x("colorize",n,s,O),x("colorizeAmount",n,s,O))),null!=e.saturation?(i=g(i,+e.saturation),x("saturation",n,s,e)):1!==s.saturation&&(u?i=g(i,s.saturation):x("saturation",n,s,O))),r=i.length;for(;--r>-1;)i[r]!==o[r]&&n.add(o,r,o[r],i[r],"colorMatrixFilter");n._props.push("colorMatrixFilter")},R=function(t,e){var n=e.t,r=e.p,i=e.color;(0,e.set)(n,r,i[0]<<16|i[1]<<8|i[2])},A=function(t,e){var n=e.g;n&&(n.dirty++,n.clearDirty++)},I=function(t,e){e.t.visible=!!e.t.alpha},C=function(t,e,n,r){var i=t[e],a=o(p(i)?t[e.indexOf("set")||!p(t["get"+e.substr(3)])?e:"get"+e.substr(3)]():i),c=o(n);r._pt=new s(r._pt,t,e,0,0,R,{t:t,p:e,color:a,set:u(t,e)}),r.add(a,0,a[0],c[0]),r.add(a,1,a[1],c[1]),r.add(a,2,a[2],c[2])},k={tint:1,lineColor:1,fillColor:1},N="position,scale,skew,pivot,anchor,tilePosition,tileScale".split(","),M={x:"position",y:"position",tileX:"tilePosition",tileY:"tilePosition"},j={colorMatrixFilter:1,saturation:1,contrast:1,hue:1,colorize:1,colorizeAmount:1,brightness:1,combineCMF:1},D=Math.PI/180,L=function(t){return"string"==typeof t},B=function(t){return L(t)&&"="===t.charAt(1)?t.substr(0,2)+parseFloat(t.substr(2))*D:t*D},F=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e5*(e.s+e.c*t))/1e5,e)},U=function(t,e,n,r,i,o){var a,u,c=360*(o?D:1),l=L(i),h=l&&"="===i.charAt(1)?+(i.charAt(0)+"1"):0,f=parseFloat(h?i.substr(2):i)*(o?D:1),p=h?f*h:f-r,d=r+p;return l&&("short"===(a=i.split("_")[1])&&(p%=c)!==p%(c/2)&&(p+=p<0?c:-c),"cw"===a&&p<0?p=(p+1e10*c)%c-~~(p/c)*c:"ccw"===a&&p>0&&(p=(p-1e10*c)%c-~~(p/c)*c)),t._pt=u=new s(t._pt,e,n,r,p,F),u.e=d,u},G=function(){h()&&(i=window,r=f(),a=a||i.PIXI,o=function(t){return r.utils.splitColor("0x"===(t+"").substr(0,2)?"#"+t.substr(2):t)})};for(c=0;c<N.length;c++)l=N[c],M[l+"X"]=l,M[l+"Y"]=l;var H={version:"3.6.1",name:"pixi",register:function(t,e,n){r=t,s=n,u=e.getSetter,G()},registerPIXI:function(t){a=t},init:function(t,e,n,r,i){if(a||G(),!t instanceof a.DisplayObject)return!1;var o,u,c,l,h,f,p,d,y,m="4"===a.VERSION.charAt(0);for(f in e){if(o=M[f],c=e[f],o)u=~f.charAt(f.length-1).toLowerCase().indexOf("x")?"x":"y",this.add(t[o],u,t[o][u],"skew"===o?B(c):c);else if("scale"===f||"anchor"===f||"pivot"===f||"tileScale"===f)this.add(t[f],"x",t[f].x,c),this.add(t[f],"y",t[f].y,c);else if("rotation"===f||"angle"===f)U(this,t,f,t[f],c,"rotation"===f);else if(j[f])l||(P(t,e.colorMatrixFilter||e,this),l=!0);else if("blur"===f||"blurX"===f||"blurY"===f||"blurPadding"===f){if(h=w(t,"BlurFilter"),this.add(h,f,h[f],c),0!==e.blurPadding)for(p=e.blurPadding||2*Math.max(h[f],c),d=t.filters.length;--d>-1;)t.filters[d].padding=Math.max(t.filters[d].padding,p)}else if(k[f])if(("lineColor"===f||"fillColor"===f)&&t instanceof a.Graphics)for(y=(t.geometry||t).graphicsData,this._pt=new s(this._pt,t,f,0,0,A,{g:t.geometry||t}),d=y.length;--d>-1;)C(m?y[d]:y[d][f.substr(0,4)+"Style"],m?f:"color",c,this);else C(t,f,c,this);else"autoAlpha"===f?(this._pt=new s(this._pt,t,"visible",0,0,I),this.add(t,"alpha",t.alpha,c),this._props.push("alpha","visible")):"resolution"!==f&&this.add(t,f,"get",c);this._props.push(f)}}};f()&&r.registerPlugin(H)},"./node_modules/@games/gsap/all.js":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return o}));var r=n("./node_modules/@games/gsap/gsap-core.js"),i=n("./node_modules/@games/gsap/CSSPlugin.js"),o=r.y.registerPlugin(i.b)||r.y;o.core.Tween},"./node_modules/@games/gsap/gsap-core.js":function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}
/*!
 * GSAP 3.6.1
 * https://greensock.com
 *
 * @license Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/n.d(e,"a",(function(){return Ue})),n.d(e,"d",(function(){return fn})),n.d(e,"A",(function(){return mn})),n.d(e,"c",(function(){return vn})),n.d(e,"b",(function(){return _n})),n.d(e,"y",(function(){return mn})),n.d(e,"z",(function(){return ne})),n.d(e,"k",(function(){return Tt})),n.d(e,"p",(function(){return Q})),n.d(e,"q",(function(){return tt})),n.d(e,"m",(function(){return H})),n.d(e,"n",(function(){return W})),n.d(e,"t",(function(){return an})),n.d(e,"s",(function(){return nt})),n.d(e,"i",(function(){return wt})),n.d(e,"w",(function(){return hn})),n.d(e,"g",(function(){return Oe})),n.d(e,"u",(function(){return pe})),n.d(e,"e",(function(){return Ye})),n.d(e,"r",(function(){return yt})),n.d(e,"x",(function(){return Pe})),n.d(e,"h",(function(){return N})),n.d(e,"v",(function(){return xt})),n.d(e,"o",(function(){return ut})),n.d(e,"l",(function(){return nn})),n.d(e,"j",(function(){return Et})),n.d(e,"f",(function(){return xe}));var o,a,s,u,c,l,h,f,p,d,y,m,v,_,g,b,E,T,w,x,S,O,P,R,A,I,C,k,N={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},M={duration:.5,overwrite:!1,delay:0},j=1e8,D=2*Math.PI,L=D/4,B=0,F=Math.sqrt,U=Math.cos,G=Math.sin,H=function(t){return"string"==typeof t},V=function(t){return"function"==typeof t},X=function(t){return"number"==typeof t},W=function(t){return void 0===t},Y=function(t){return"object"==typeof t},z=function(t){return!1!==t},q=function(){return"undefined"!=typeof window},K=function(t){return V(t)||H(t)},Z="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},$=Array.isArray,J=/(?:-?\.?\d|\.)+/gi,Q=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,tt=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,et=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,nt=/[+-]=-?[.\d]+/,rt=/[#\-+.]*\b[a-z\d-=+%.]+/gi,it=/[\d.+\-=]+(?:e[-+]\d*)*/i,ot={},at={},st=function(t){return(at=Nt(t,ot))&&mn},ut=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},ct=function(t,e){return!e&&console.warn(t)},lt=function(t,e){return t&&(ot[t]=e)&&at&&(at[t]=e)||ot},ht=function(){return 0},ft={},pt=[],dt={},yt={},mt={},vt=30,_t=[],gt="",bt=function(t){var e,n,r=t[0];if(Y(r)||V(r)||(t=[t]),!(e=(r._gsap||{}).harness)){for(n=_t.length;n--&&!_t[n].targetTest(r););e=_t[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new Ue(t[n],e)))||t.splice(n,1);return t},Et=function(t){return t._gsap||bt(ae(t))[0]._gsap},Tt=function(t,e,n){return(n=t[e])&&V(n)?t[e]():W(n)&&t.getAttribute&&t.getAttribute(e)||n},wt=function(t,e){return(t=t.split(",")).forEach(e)||t},xt=function(t){return Math.round(1e5*t)/1e5||0},St=function(t,e){for(var n=e.length,r=0;t.indexOf(e[r])<0&&++r<n;);return r<n},Ot=function(t,e,n){var r,i=X(t[1]),o=(i?2:1)+(e<2?0:1),a=t[o];if(i&&(a.duration=t[1]),a.parent=n,e){for(r=a;n&&!("immediateRender"in r);)r=n.vars.defaults||{},n=z(n.vars.inherit)&&n.parent;a.immediateRender=z(r.immediateRender),e<2?a.runBackwards=1:a.startAt=t[o-1]}return a},Pt=function(){var t,e,n=pt.length,r=pt.slice(0);for(dt={},pt.length=0,t=0;t<n;t++)(e=r[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},Rt=function(t,e,n,r){pt.length&&Pt(),t.render(e,n,r),pt.length&&Pt()},At=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(rt).length<2?e:H(t)?t.trim():t},It=function(t){return t},Ct=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},kt=function(t,e){for(var n in e)n in t||"duration"===n||"ease"===n||(t[n]=e[n])},Nt=function(t,e){for(var n in e)t[n]=e[n];return t},Mt=function t(e,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(e[r]=Y(n[r])?t(e[r]||(e[r]={}),n[r]):n[r]);return e},jt=function(t,e){var n,r={};for(n in t)n in e||(r[n]=t[n]);return r},Dt=function(t){var e=t.parent||a,n=t.keyframes?kt:Ct;if(z(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},Lt=function(t,e,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=e._prev,o=e._next;i?i._next=o:t[n]===e&&(t[n]=o),o?o._prev=i:t[r]===e&&(t[r]=i),e._next=e._prev=e.parent=null},Bt=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},Ft=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},Ut=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Gt=function(t){return t._repeat?Ht(t._tTime,t=t.duration()+t._rDelay)*t:0},Ht=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},Vt=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Xt=function(t){return t._end=xt(t._start+(t._tDur/Math.abs(t._ts||t._rts||1e-8)||0))},Wt=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=xt(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Xt(t),n._dirty||Ft(n,t)),t},Yt=function(t,e){var n;if((e._time||e._initted&&!e._dur)&&(n=Vt(t.rawTime(),e),(!e._dur||ee(0,e.totalDuration(),n)-e._tTime>1e-8)&&e.render(n,!0)),Ft(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-1e-8}},zt=function(t,e,n,r){return e.parent&&Bt(e),e._start=xt(n+e._delay),e._end=xt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var o,a=t[r];if(i)for(o=e[i];a&&a[i]>o;)a=a._prev;a?(e._next=a._next,a._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[r]=e,e._prev=a,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),t._recent=e,r||Yt(t,e),t},qt=function(t,e){return(ot.ScrollTrigger||ut("scrollTrigger",e))&&ot.ScrollTrigger.create(e,t)},Kt=function(t,e,n,r){return ze(t,e),t._initted?!n&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&h!==Pe.frame?(pt.push(t),t._lazy=[e,r],1):void 0:1},Zt=function(t,e,n,r){var i=t._repeat,o=xt(e)||0,a=t._tTime/t._tDur;return a&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=i?i<0?1e10:xt(o*(i+1)+t._rDelay*i):o,a&&!r?Wt(t,t._tTime=t._tDur*a):t.parent&&Xt(t),n||Ft(t.parent,t),t},$t=function(t){return t instanceof He?Ft(t):Zt(t,t._dur)},Jt={_start:0,endTime:ht},Qt=function t(e,n){var r,i,o=e.labels,a=e._recent||Jt,s=e.duration()>=j?a.endTime(!1):e._dur;return H(n)&&(isNaN(n)||n in o)?"<"===(r=n.charAt(0))||">"===r?("<"===r?a._start:a.endTime(a._repeat>=0))+(parseFloat(n.substr(1))||0):(r=n.indexOf("="))<0?(n in o||(o[n]=s),o[n]):(i=+(n.charAt(r-1)+n.substr(r+1)),r>1?t(e,n.substr(0,r-1))+i:s+i):null==n?s:+n},te=function(t,e){return t||0===t?e(t):e},ee=function(t,e,n){return n<t?t:n>e?e:n},ne=function(t){if("string"!=typeof t)return"";var e=it.exec(t);return e?t.substr(e.index+e[0].length):""},re=[].slice,ie=function(t,e){return t&&Y(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&Y(t[0]))&&!t.nodeType&&t!==s},oe=function(t,e,n){return void 0===n&&(n=[]),t.forEach((function(t){var r;return H(t)&&!e||ie(t,1)?(r=n).push.apply(r,ae(t)):n.push(t)}))||n},ae=function(t,e){return!H(t)||e||!u&&Re()?$(t)?oe(t,e):ie(t)?re.call(t,0):t?[t]:[]:re.call(c.querySelectorAll(t),0)},se=function(t){return t.sort((function(){return.5-Math.random()}))},ue=function(t){if(V(t))return t;var e=Y(t)?t:{each:t},n=je(e.ease),r=e.from||0,i=parseFloat(e.base)||0,o={},a=r>0&&r<1,s=isNaN(r)||a,u=e.axis,c=r,l=r;return H(r)?c=l={center:.5,edges:.5,end:1}[r]||0:!a&&s&&(c=r[0],l=r[1]),function(t,a,h){var f,p,d,y,m,v,_,g,b,E=(h||e).length,T=o[E];if(!T){if(!(b="auto"===e.grid?0:(e.grid||[1,j])[1])){for(_=-j;_<(_=h[b++].getBoundingClientRect().left)&&b<E;);b--}for(T=o[E]=[],f=s?Math.min(b,E)*c-.5:r%b,p=s?E*l/b-.5:r/b|0,_=0,g=j,v=0;v<E;v++)d=v%b-f,y=p-(v/b|0),T[v]=m=u?Math.abs("y"===u?y:d):F(d*d+y*y),m>_&&(_=m),m<g&&(g=m);"random"===r&&se(T),T.max=_-g,T.min=g,T.v=E=(parseFloat(e.amount)||parseFloat(e.each)*(b>E?E-1:u?"y"===u?E/b:b:Math.max(b,E/b))||0)*("edges"===r?-1:1),T.b=E<0?i-E:i,T.u=ne(e.amount||e.each)||0,n=n&&E<0?Ne(n):n}return E=(T[t]-T.min)/T.max||0,xt(T.b+(n?n(E):E)*T.v)+T.u}},ce=function(t){var e=t<1?Math.pow(10,(t+"").length-2):1;return function(n){var r=Math.round(parseFloat(n)/t)*t*e;return(r-r%1)/e+(X(n)?0:ne(n))}},le=function(t,e){var n,r,i=$(t);return!i&&Y(t)&&(n=i=t.radius||j,t.values?(t=ae(t.values),(r=!X(t[0]))&&(n*=n)):t=ce(t.increment)),te(e,i?V(t)?function(e){return r=t(e),Math.abs(r-e)<=n?r:e}:function(e){for(var i,o,a=parseFloat(r?e.x:e),s=parseFloat(r?e.y:0),u=j,c=0,l=t.length;l--;)(i=r?(i=t[l].x-a)*i+(o=t[l].y-s)*o:Math.abs(t[l]-a))<u&&(u=i,c=l);return c=!n||u<=n?t[c]:e,r||c===e||X(e)?c:c+ne(e)}:ce(t))},he=function(t,e,n,r){return te($(t)?!e:!0===n?!!(n=0):!r,(function(){return $(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+.99*n))/n)*n*r)/r}))},fe=function(t,e,n){return te(n,(function(n){return t[~~e(n)]}))},pe=function(t){for(var e,n,r,i,o=0,a="";~(e=t.indexOf("random(",o));)r=t.indexOf(")",e),i="["===t.charAt(e+7),n=t.substr(e+7,r-e-7).match(i?rt:J),a+=t.substr(o,e-o)+he(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),o=r+1;return a+t.substr(o,t.length-o)},de=function(t,e,n,r,i){var o=e-t,a=r-n;return te(i,(function(e){return n+((e-t)/o*a||0)}))},ye=function(t,e,n){var r,i,o,a=t.labels,s=j;for(r in a)(i=a[r]-e)<0==!!n&&i&&s>(i=Math.abs(i))&&(o=r,s=i);return o},me=function(t,e,n){var r,i,o=t.vars,a=o[e];if(a)return r=o[e+"Params"],i=o.callbackScope||t,n&&pt.length&&Pt(),r?a.apply(i,r):a.call(i)},ve=function(t){return Bt(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&me(t,"onInterrupt"),t},_e=function(t){var e=(t=!t.name&&t.default||t).name,n=V(t),r=e&&!n&&t.init?function(){this._props=[]}:t,i={init:ht,render:sn,add:We,kill:cn,modifier:un,rawVars:0},o={targetTest:0,get:0,getSetter:nn,aliases:{},register:0};if(Re(),t!==r){if(yt[e])return;Ct(r,Ct(jt(t,i),o)),Nt(r.prototype,Nt(i,jt(t,o))),yt[r.prop=e]=r,t.targetTest&&(_t.push(r),ft[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}lt(e,r),t.register&&t.register(mn,r,fn)},ge={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},be=function(t,e,n){return 255*(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)+.5|0},Ee=function(t,e,n){var r,i,o,a,s,u,c,l,h,f,p=t?X(t)?[t>>16,t>>8&255,255&t]:0:ge.black;if(!p){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),ge[t])p=ge[t];else if("#"===t.charAt(0)){if(t.length<6&&(r=t.charAt(1),i=t.charAt(2),o=t.charAt(3),t="#"+r+r+i+i+o+o+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(p=parseInt(t.substr(1,6),16))>>16,p>>8&255,255&p,parseInt(t.substr(7),16)/255];p=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]}else if("hsl"===t.substr(0,3))if(p=f=t.match(J),e){if(~t.indexOf("="))return p=t.match(Q),n&&p.length<4&&(p[3]=1),p}else a=+p[0]%360/360,s=+p[1]/100,r=2*(u=+p[2]/100)-(i=u<=.5?u*(s+1):u+s-u*s),p.length>3&&(p[3]*=1),p[0]=be(a+1/3,r,i),p[1]=be(a,r,i),p[2]=be(a-1/3,r,i);else p=t.match(J)||ge.transparent;p=p.map(Number)}return e&&!f&&(r=p[0]/255,i=p[1]/255,o=p[2]/255,u=((c=Math.max(r,i,o))+(l=Math.min(r,i,o)))/2,c===l?a=s=0:(h=c-l,s=u>.5?h/(2-c-l):h/(c+l),a=c===r?(i-o)/h+(i<o?6:0):c===i?(o-r)/h+2:(r-i)/h+4,a*=60),p[0]=~~(a+.5),p[1]=~~(100*s+.5),p[2]=~~(100*u+.5)),n&&p.length<4&&(p[3]=1),p},Te=function(t){var e=[],n=[],r=-1;return t.split(xe).forEach((function(t){var i=t.match(tt)||[];e.push.apply(e,i),n.push(r+=i.length+1)})),e.c=n,e},we=function(t,e,n){var r,i,o,a,s="",u=(t+s).match(xe),c=e?"hsla(":"rgba(",l=0;if(!u)return t;if(u=u.map((function(t){return(t=Ee(t,e,1))&&c+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),n&&(o=Te(t),(r=n.c).join(s)!==o.c.join(s)))for(a=(i=t.replace(xe,"1").split(tt)).length-1;l<a;l++)s+=i[l]+(~r.indexOf(l)?u.shift()||c+"0,0,0,0)":(o.length?o:u.length?u:n).shift());if(!i)for(a=(i=t.split(xe)).length-1;l<a;l++)s+=i[l]+u[l];return s+i[a]},xe=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in ge)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Se=/hsl[a]?\(/,Oe=function(t){var e,n=t.join(" ");if(xe.lastIndex=0,xe.test(n))return e=Se.test(n),t[1]=we(t[1],e),t[0]=we(t[0],e,Te(t[1])),!0},Pe=(b=Date.now,E=500,T=33,w=b(),x=w,O=S=1e3/240,R=function t(e){var n,r,i,o,a=b()-x,s=!0===e;if(a>E&&(w+=a-T),((n=(i=(x+=a)-w)-O)>0||s)&&(o=++v.frame,_=i-1e3*v.time,v.time=i/=1e3,O+=n+(n>=S?4:S-n),r=1),s||(d=y(t)),r)for(g=0;g<P.length;g++)P[g](i,_,o,e)},v={time:0,frame:0,tick:function(){R(!0)},deltaRatio:function(t){return _/(1e3/(t||60))},wake:function(){l&&(!u&&q()&&(s=u=window,c=s.document||{},ot.gsap=mn,(s.gsapVersions||(s.gsapVersions=[])).push(mn.version),st(at||s.GreenSockGlobals||!s.gsap&&s||{}),m=s.requestAnimationFrame),d&&v.sleep(),y=m||function(t){return setTimeout(t,O-1e3*v.time+1|0)},p=1,R(2))},sleep:function(){(m?s.cancelAnimationFrame:clearTimeout)(d),p=0,y=ht},lagSmoothing:function(t,e){E=t||1/1e-8,T=Math.min(e,E,0)},fps:function(t){S=1e3/(t||240),O=1e3*v.time+S},add:function(t){P.indexOf(t)<0&&P.push(t),Re()},remove:function(t){var e;~(e=P.indexOf(t))&&P.splice(e,1)&&g>=e&&g--},_listeners:P=[]}),Re=function(){return!p&&Pe.wake()},Ae={},Ie=/^[\d.\-M][\d.\-,\s]/,Ce=/["']/g,ke=function(t){for(var e,n,r,i={},o=t.substr(1,t.length-3).split(":"),a=o[0],s=1,u=o.length;s<u;s++)n=o[s],e=s!==u-1?n.lastIndexOf(","):n.length,r=n.substr(0,e),i[a]=isNaN(r)?r.replace(Ce,"").trim():+r,a=n.substr(e+1).trim();return i},Ne=function(t){return function(e){return 1-t(1-e)}},Me=function t(e,n){for(var r,i=e._first;i;)i instanceof He?t(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?t(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},je=function(t,e){return t&&(V(t)?t:Ae[t]||function(t){var e,n,r,i,o=(t+"").split("("),a=Ae[o[0]];return a&&o.length>1&&a.config?a.config.apply(null,~t.indexOf("{")?[ke(o[1])]:(e=t,n=e.indexOf("(")+1,r=e.indexOf(")"),i=e.indexOf("(",n),e.substring(n,~i&&i<r?e.indexOf(")",r+1):r)).split(",").map(At)):Ae._CE&&Ie.test(t)?Ae._CE("",t):a}(t))||e},De=function(t,e,n,r){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===r&&(r=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var i,o={easeIn:e,easeOut:n,easeInOut:r};return wt(t,(function(t){for(var e in Ae[t]=ot[t]=o,Ae[i=t.toLowerCase()]=n,o)Ae[i+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Ae[t+"."+e]=o[e]})),o},Le=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Be=function t(e,n,r){var i=n>=1?n:1,o=(r||(e?.3:.45))/(n<1?n:1),a=o/D*(Math.asin(1/i)||0),s=function(t){return 1===t?1:i*Math.pow(2,-10*t)*G((t-a)*o)+1},u="out"===e?s:"in"===e?function(t){return 1-s(1-t)}:Le(s);return o=D/o,u.config=function(n,r){return t(e,n,r)},u},Fe=function t(e,n){void 0===n&&(n=1.70158);var r=function(t){return t?--t*t*((n+1)*t+n)+1:0},i="out"===e?r:"in"===e?function(t){return 1-r(1-t)}:Le(r);return i.config=function(n){return t(e,n)},i};wt("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var n=e<5?e+1:e;De(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},(function(t){return 1-Math.pow(1-t,n)}),(function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2}))})),Ae.Linear.easeNone=Ae.none=Ae.Linear.easeIn,De("Elastic",Be("in"),Be("out"),Be()),A=7.5625,C=1/(I=2.75),De("Bounce",(function(t){return 1-k(1-t)}),k=function(t){return t<C?A*t*t:t<.7272727272727273?A*Math.pow(t-1.5/I,2)+.75:t<.9090909090909092?A*(t-=2.25/I)*t+.9375:A*Math.pow(t-2.625/I,2)+.984375}),De("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),De("Circ",(function(t){return-(F(1-t*t)-1)})),De("Sine",(function(t){return 1===t?1:1-U(t*L)})),De("Back",Fe("in"),Fe("out"),Fe()),Ae.SteppedEase=Ae.steps=ot.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,r=t+(e?0:1),i=e?1:0;return function(t){return((r*ee(0,1-1e-8,t)|0)+i)*n}}},M.ease=Ae["quad.out"],wt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return gt+=t+","+t+"Params,"}));var Ue=function(t,e){this.id=B++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Tt,this.set=e?e.getSetter:nn},Ge=function(){function t(t,e){var n=t.parent||a;this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Zt(this,+t.duration,1,1),this.data=t.data,p||Pe.wake(),n&&zt(n,this,e||0===e?e:n._time,1),t.reversed&&this.reverse(),t.paused&&this.paused(!0)}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Zt(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Re(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Wt(this,t),!n._dp||n.parent||Yt(n,this);n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&zt(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&1e-8===Math.abs(this._zTime)||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),Rt(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+Gt(this))%this._dur||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+Gt(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?Ht(this._tTime,n)+1:1},e.timeScale=function(t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?Vt(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,Ut(this.totalTime(ee(-this._delay,this._tDur,e),!0))},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Re(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=1e-8)&&1e-8!==Math.abs(this._zTime)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&zt(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(z(t)?this.totalDuration():this.duration())/Math.abs(this._ts)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Vt(e.rawTime(t),this):this._tTime:this._tTime},e.globalTime=function(t){for(var e=this,n=arguments.length?t:e.rawTime();e;)n=e._start+n/(e._ts||1),e=e._dp;return n},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,$t(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){return arguments.length?(this._rDelay=t,$t(this)):this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(Qt(this,t),z(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,z(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,n=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<this.endTime(!0)-1e-8))},e.eventCallback=function(t,e,n){var r=this.vars;return arguments.length>1?(e?(r[t]=e,n&&(r[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete r[t],this):r[t]},e.then=function(t){var e=this;return new Promise((function(n){var r=V(t)?t:It,i=function(){var t=e.then;e.then=null,V(r)&&(r=r(e))&&(r.then||r===e)&&(e.then=t),n(r),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?i():e._prom=i}))},e.kill=function(){ve(this)},t}();Ct(Ge.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var He=function(t){function e(e,n){var i;return void 0===e&&(e={}),(i=t.call(this,e,n)||this).labels={},i.smoothChildTiming=!!e.smoothChildTiming,i.autoRemoveChildren=!!e.autoRemoveChildren,i._sort=z(e.sortChildren),i.parent&&Yt(i.parent,r(i)),e.scrollTrigger&&qt(r(i),e.scrollTrigger),i}i(e,t);var n=e.prototype;return n.to=function(t,e,n){return new $e(t,Ot(arguments,0,this),Qt(this,X(e)?arguments[3]:n)),this},n.from=function(t,e,n){return new $e(t,Ot(arguments,1,this),Qt(this,X(e)?arguments[3]:n)),this},n.fromTo=function(t,e,n,r){return new $e(t,Ot(arguments,2,this),Qt(this,X(e)?arguments[4]:r)),this},n.set=function(t,e,n){return e.duration=0,e.parent=this,Dt(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new $e(t,e,Qt(this,n),1),this},n.call=function(t,e,n){return zt(this,$e.delayedCall(0,t,e),Qt(this,n))},n.staggerTo=function(t,e,n,r,i,o,a){return n.duration=e,n.stagger=n.stagger||r,n.onComplete=o,n.onCompleteParams=a,n.parent=this,new $e(t,n,Qt(this,i)),this},n.staggerFrom=function(t,e,n,r,i,o,a){return n.runBackwards=1,Dt(n).immediateRender=z(n.immediateRender),this.staggerTo(t,e,n,r,i,o,a)},n.staggerFromTo=function(t,e,n,r,i,o,a,s){return r.startAt=n,Dt(r).immediateRender=z(r.immediateRender),this.staggerTo(t,e,r,i,o,a,s)},n.render=function(t,e,n){var r,i,o,s,u,c,l,h,f,p,d,y,m=this._time,v=this._dirty?this.totalDuration():this._tDur,_=this._dur,g=this!==a&&t>v-1e-8&&t>=0?v:t<1e-8?0:t,b=this._zTime<0!=t<0&&(this._initted||!_);if(g!==this._tTime||n||b){if(m!==this._time&&_&&(g+=this._time-m,t+=this._time-m),r=g,f=this._start,c=!(h=this._ts),b&&(_||(m=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(d=this._yoyo,u=_+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*u+t,e,n);if(r=xt(g%u),g===v?(s=this._repeat,r=_):((s=~~(g/u))&&s===g/u&&(r=_,s--),r>_&&(r=_)),p=Ht(this._tTime,u),!m&&this._tTime&&p!==s&&(p=s),d&&1&s&&(r=_-r,y=1),s!==p&&!this._lock){var E=d&&1&p,T=E===(d&&1&s);if(s<p&&(E=!E),m=E?0:_,this._lock=1,this.render(m||(y?0:xt(s*u)),e,!_)._lock=0,!e&&this.parent&&me(this,"onRepeat"),this.vars.repeatRefresh&&!y&&(this.invalidate()._lock=1),m&&m!==this._time||c!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(_=this._dur,v=this._tDur,T&&(this._lock=2,m=E?_:-1e-4,this.render(m,!0)),this._lock=0,!this._ts&&!c)return this;Me(this,y)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(l=function(t,e,n){var r;if(n>e)for(r=t._first;r&&r._start<=n;){if(!r._dur&&"isPause"===r.data&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=n;){if(!r._dur&&"isPause"===r.data&&r._start<e)return r;r=r._prev}}(this,xt(m),xt(r)))&&(g-=r-(r=l._start)),this._tTime=g,this._time=r,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,m=0),!m&&r&&!e&&me(this,"onStart"),r>=m&&t>=0)for(i=this._first;i;){if(o=i._next,(i._act||r>=i._start)&&i._ts&&l!==i){if(i.parent!==this)return this.render(t,e,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,e,n),r!==this._time||!this._ts&&!c){l=0,o&&(g+=this._zTime=-1e-8);break}}i=o}else{i=this._last;for(var w=t<0?t:r;i;){if(o=i._prev,(i._act||w<=i._end)&&i._ts&&l!==i){if(i.parent!==this)return this.render(t,e,n);if(i.render(i._ts>0?(w-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(w-i._start)*i._ts,e,n),r!==this._time||!this._ts&&!c){l=0,o&&(g+=this._zTime=w?-1e-8:1e-8);break}}i=o}}if(l&&!e&&(this.pause(),l.render(r>=m?0:-1e-8)._zTime=r>=m?1:-1,this._ts))return this._start=f,Xt(this),this.render(t,e,n);this._onUpdate&&!e&&me(this,"onUpdate",!0),(g===v&&v>=this.totalDuration()||!g&&m)&&(f!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||((t||!_)&&(g===v&&this._ts>0||!g&&this._ts<0)&&Bt(this,1),e||t<0&&!m||!g&&!m||(me(this,g===v?"onComplete":"onReverseComplete",!0),this._prom&&!(g<v&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(t,e){var n=this;if(X(e)||(e=Qt(this,e)),!(t instanceof Ge)){if($(t))return t.forEach((function(t){return n.add(t,e)})),this;if(H(t))return this.addLabel(t,e);if(!V(t))return this;t=$e.delayedCall(0,t)}return this!==t?zt(this,t,e):this},n.getChildren=function(t,e,n,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===r&&(r=-j);for(var i=[],o=this._first;o;)o._start>=r&&(o instanceof $e?e&&i.push(o):(n&&i.push(o),t&&i.push.apply(i,o.getChildren(!0,e,n)))),o=o._next;return i},n.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},n.remove=function(t){return H(t)?this.removeLabel(t):V(t)?this.killTweensOf(t):(Lt(this,t),t===this._recent&&(this._recent=this._last),Ft(this))},n.totalTime=function(e,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=xt(Pe.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},n.addLabel=function(t,e){return this.labels[t]=Qt(this,e),this},n.removeLabel=function(t){return delete this.labels[t],this},n.addPause=function(t,e,n){var r=$e.delayedCall(0,e||ht,n);return r.data="isPause",this._hasPause=1,zt(this,r,Qt(this,t))},n.removePause=function(t){var e=this._first;for(t=Qt(this,t);e;)e._start===t&&"isPause"===e.data&&Bt(e),e=e._next},n.killTweensOf=function(t,e,n){for(var r=this.getTweensOf(t,n),i=r.length;i--;)Ve!==r[i]&&r[i].kill(t,e);return this},n.getTweensOf=function(t,e){for(var n,r=[],i=ae(t),o=this._first,a=X(e);o;)o instanceof $e?St(o._targets,i)&&(a?(!Ve||o._initted&&o._ts)&&o.globalTime(0)<=e&&o.globalTime(o.totalDuration())>e:!e||o.isActive())&&r.push(o):(n=o.getTweensOf(i,e)).length&&r.push.apply(r,n),o=o._next;return r},n.tweenTo=function(t,e){e=e||{};var n=this,r=Qt(n,t),i=e,o=i.startAt,a=i.onStart,s=i.onStartParams,u=i.immediateRender,c=$e.to(n,Ct({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:e.duration||Math.abs((r-(o&&"time"in o?o.time:n._time))/n.timeScale())||1e-8,onStart:function(){n.pause();var t=e.duration||Math.abs((r-n._time)/n.timeScale());c._dur!==t&&Zt(c,t,0,1).render(c._time,!0,!0),a&&a.apply(c,s||[])}},e));return u?c.render(0):c},n.tweenFromTo=function(t,e,n){return this.tweenTo(e,Ct({startAt:{time:Qt(this,t)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(t){return void 0===t&&(t=this._time),ye(this,Qt(this,t))},n.previousLabel=function(t){return void 0===t&&(t=this._time),ye(this,Qt(this,t),1)},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+1e-8)},n.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var r,i=this._first,o=this.labels;i;)i._start>=n&&(i._start+=t,i._end+=t),i=i._next;if(e)for(r in o)o[r]>=n&&(o[r]+=t);return Ft(this)},n.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},n.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Ft(this)},n.totalDuration=function(t){var e,n,r,i=0,o=this,s=o._last,u=j;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-t:t));if(o._dirty){for(r=o.parent;s;)e=s._prev,s._dirty&&s.totalDuration(),(n=s._start)>u&&o._sort&&s._ts&&!o._lock?(o._lock=1,zt(o,s,n-s._delay,1)._lock=0):u=n,n<0&&s._ts&&(i-=n,(!r&&!o._dp||r&&r.smoothChildTiming)&&(o._start+=n/o._ts,o._time-=n,o._tTime-=n),o.shiftChildren(-n,!1,-Infinity),u=0),s._end>i&&s._ts&&(i=s._end),s=e;Zt(o,o===a&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(t){if(a._ts&&(Rt(a,Vt(t,a)),h=Pe.frame),Pe.frame>=vt){vt+=N.autoSleep||120;var e=a._first;if((!e||!e._ts)&&N.autoSleep&&Pe._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Pe.sleep()}}},e}(Ge);Ct(He.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ve,Xe=function(t,e,n,r,i,o,a){var s,u,c,l,h,f,p,d,y=new fn(this._pt,t,e,0,1,an,null,i),m=0,v=0;for(y.b=n,y.e=r,n+="",(p=~(r+="").indexOf("random("))&&(r=pe(r)),o&&(o(d=[n,r],t,e),n=d[0],r=d[1]),u=n.match(et)||[];s=et.exec(r);)l=s[0],h=r.substring(m,s.index),c?c=(c+1)%5:"rgba("===h.substr(-5)&&(c=1),l!==u[v++]&&(f=parseFloat(u[v-1])||0,y._pt={_next:y._pt,p:h||1===v?h:",",s:f,c:"="===l.charAt(1)?parseFloat(l.substr(2))*("-"===l.charAt(0)?-1:1):parseFloat(l)-f,m:c&&c<4?Math.round:0},m=et.lastIndex);return y.c=m<r.length?r.substring(m,r.length):"",y.fp=a,(nt.test(r)||p)&&(y.e=0),this._pt=y,y},We=function(t,e,n,r,i,o,a,s,u){V(r)&&(r=r(i||0,t,o));var c,l=t[e],h="get"!==n?n:V(l)?u?t[e.indexOf("set")||!V(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():l,f=V(l)?u?tn:Qe:Je;if(H(r)&&(~r.indexOf("random(")&&(r=pe(r)),"="===r.charAt(1)&&(r=parseFloat(h)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(ne(h)||0))),h!==r)return isNaN(h*r)?(!l&&!(e in t)&&ut(e,r),Xe.call(this,t,e,h,r,f,s||N.stringFilter,u)):(c=new fn(this._pt,t,e,+h||0,r-(h||0),"boolean"==typeof l?on:rn,0,f),u&&(c.fp=u),a&&c.modifier(a,this,t),this._pt=c)},Ye=function(t,e,n,r,i,o){var a,s,u,c;if(yt[t]&&!1!==(a=new yt[t]).init(i,a.rawVars?e[t]:function(t,e,n,r,i){if(V(t)&&(t=qe(t,i,e,n,r)),!Y(t)||t.style&&t.nodeType||$(t)||Z(t))return H(t)?qe(t,i,e,n,r):t;var o,a={};for(o in t)a[o]=qe(t[o],i,e,n,r);return a}(e[t],r,i,o,n),n,r,o)&&(n._pt=s=new fn(n._pt,i,t,0,1,a.render,a,0,a.priority),n!==f))for(u=n._ptLookup[n._targets.indexOf(i)],c=a._props.length;c--;)u[a._props[c]]=s;return a},ze=function t(e,n){var r,i,s,u,c,l,h,f,p,d,y,m,v,_=e.vars,g=_.ease,b=_.startAt,E=_.immediateRender,T=_.lazy,w=_.onUpdate,x=_.onUpdateParams,S=_.callbackScope,O=_.runBackwards,P=_.yoyoEase,R=_.keyframes,A=_.autoRevert,I=e._dur,C=e._startAt,k=e._targets,N=e.parent,j=N&&"nested"===N.data?N.parent._targets:k,D="auto"===e._overwrite&&!o,L=e.timeline;if(L&&(!R||!g)&&(g="none"),e._ease=je(g,M.ease),e._yEase=P?Ne(je(!0===P?g:P,M.ease)):0,P&&e._yoyo&&!e._repeat&&(P=e._yEase,e._yEase=e._ease,e._ease=P),!L){if(m=(f=k[0]?Et(k[0]).harness:0)&&_[f.prop],r=jt(_,ft),C&&C.render(-1,!0).kill(),b)if(Bt(e._startAt=$e.set(k,Ct({data:"isStart",overwrite:!1,parent:N,immediateRender:!0,lazy:z(T),startAt:null,delay:0,onUpdate:w,onUpdateParams:x,callbackScope:S,stagger:0},b))),E){if(n>0)A||(e._startAt=0);else if(I&&!(n<0&&C))return void(n&&(e._zTime=n))}else!1===A&&(e._startAt=0);else if(O&&I)if(C)!A&&(e._startAt=0);else if(n&&(E=!1),s=Ct({overwrite:!1,data:"isFromStart",lazy:E&&z(T),immediateRender:E,stagger:0,parent:N},r),m&&(s[f.prop]=m),Bt(e._startAt=$e.set(k,s)),E){if(!n)return}else t(e._startAt,1e-8);for(e._pt=0,T=I&&z(T)||T&&!I,i=0;i<k.length;i++){if(h=(c=k[i])._gsap||bt(k)[i]._gsap,e._ptLookup[i]=d={},dt[h.id]&&pt.length&&Pt(),y=j===k?i:j.indexOf(c),f&&!1!==(p=new f).init(c,m||r,e,y,j)&&(e._pt=u=new fn(e._pt,c,p.name,0,1,p.render,p,0,p.priority),p._props.forEach((function(t){d[t]=u})),p.priority&&(l=1)),!f||m)for(s in r)yt[s]&&(p=Ye(s,r,e,y,c,j))?p.priority&&(l=1):d[s]=u=We.call(e,c,s,"get",r[s],y,j,0,_.stringFilter);e._op&&e._op[i]&&e.kill(c,e._op[i]),D&&e._pt&&(Ve=e,a.killTweensOf(c,d,e.globalTime(0)),v=!e.parent,Ve=0),e._pt&&T&&(dt[h.id]=1)}l&&hn(e),e._onInit&&e._onInit(e)}e._from=!L&&!!_.runBackwards,e._onUpdate=w,e._initted=(!e._op||e._pt)&&!v},qe=function(t,e,n,r,i){return V(t)?t.call(e,n,r,i):H(t)&&~t.indexOf("random(")?pe(t):t},Ke=gt+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Ze=(Ke+",id,stagger,delay,duration,paused,scrollTrigger").split(","),$e=function(t){function e(e,n,i,s){var u;"number"==typeof n&&(i.duration=n,n=i,i=null);var c,l,h,f,p,d,y,m,v=(u=t.call(this,s?n:Dt(n),i)||this).vars,_=v.duration,g=v.delay,b=v.immediateRender,E=v.stagger,T=v.overwrite,w=v.keyframes,x=v.defaults,S=v.scrollTrigger,O=v.yoyoEase,P=u.parent,R=($(e)||Z(e)?X(e[0]):"length"in n)?[e]:ae(e);if(u._targets=R.length?bt(R):ct("GSAP target "+e+" not found. https://greensock.com",!N.nullTargetWarn)||[],u._ptLookup=[],u._overwrite=T,w||E||K(_)||K(g)){if(n=u.vars,(c=u.timeline=new He({data:"nested",defaults:x||{}})).kill(),c.parent=c._dp=r(u),c._start=0,w)Ct(c.vars.defaults,{ease:"none"}),w.forEach((function(t){return c.to(R,t,">")}));else{if(f=R.length,y=E?ue(E):ht,Y(E))for(p in E)~Ke.indexOf(p)&&(m||(m={}),m[p]=E[p]);for(l=0;l<f;l++){for(p in h={},n)Ze.indexOf(p)<0&&(h[p]=n[p]);h.stagger=0,O&&(h.yoyoEase=O),m&&Nt(h,m),d=R[l],h.duration=+qe(_,r(u),l,d,R),h.delay=(+qe(g,r(u),l,d,R)||0)-u._delay,!E&&1===f&&h.delay&&(u._delay=g=h.delay,u._start+=g,h.delay=0),c.to(d,h,y(l,d,R))}c.duration()?_=g=0:u.timeline=0}_||u.duration(_=c.duration())}else u.timeline=0;return!0!==T||o||(Ve=r(u),a.killTweensOf(R),Ve=0),P&&Yt(P,r(u)),(b||!_&&!w&&u._start===xt(P._time)&&z(b)&&function t(e){return!e||e._ts&&t(e.parent)}(r(u))&&"nested"!==P.data)&&(u._tTime=-1e-8,u.render(Math.max(0,-g))),S&&qt(r(u),S),u}i(e,t);var n=e.prototype;return n.render=function(t,e,n){var r,i,o,a,s,u,c,l,h,f=this._time,p=this._tDur,d=this._dur,y=t>p-1e-8&&t>=0?p:t<1e-8?0:t;if(d){if(y!==this._tTime||!t||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=t<0){if(r=y,l=this.timeline,this._repeat){if(a=d+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*a+t,e,n);if(r=xt(y%a),y===p?(o=this._repeat,r=d):((o=~~(y/a))&&o===y/a&&(r=d,o--),r>d&&(r=d)),(u=this._yoyo&&1&o)&&(h=this._yEase,r=d-r),s=Ht(this._tTime,a),r===f&&!n&&this._initted)return this;o!==s&&(l&&this._yEase&&Me(l,u),!this.vars.repeatRefresh||u||this._lock||(this._lock=n=1,this.render(xt(a*o),!0).invalidate()._lock=0))}if(!this._initted){if(Kt(this,t<0?t:r,n,e))return this._tTime=0,this;if(d!==this._dur)return this.render(t,e,n)}for(this._tTime=y,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(h||this._ease)(r/d),this._from&&(this.ratio=c=1-c),r&&!f&&!e&&me(this,"onStart"),i=this._pt;i;)i.r(c,i.d),i=i._next;l&&l.render(t<0?t:!r&&u?-1e-8:l._dur*c,e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,n),me(this,"onUpdate")),this._repeat&&o!==s&&this.vars.onRepeat&&!e&&this.parent&&me(this,"onRepeat"),y!==this._tDur&&y||this._tTime!==y||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),(t||!d)&&(y===this._tDur&&this._ts>0||!y&&this._ts<0)&&Bt(this,1),e||t<0&&!f||!y&&!f||(me(this,y===p?"onComplete":"onReverseComplete",!0),this._prom&&!(y<p&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,n,r){var i,o,a,s=t.ratio,u=e<0||!e&&(!t._start&&function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))}(t)||(t._ts<0||t._dp._ts<0)&&"isFromStart"!==t.data&&"isStart"!==t.data)?0:1,c=t._rDelay,l=0;if(c&&t._repeat&&(l=ee(0,t._tDur,e),o=Ht(l,c),a=Ht(t._tTime,c),t._yoyo&&1&o&&(u=1-u),o!==a&&(s=1-u,t.vars.repeatRefresh&&t._initted&&t.invalidate())),u!==s||r||1e-8===t._zTime||!e&&t._zTime){if(!t._initted&&Kt(t,e,r,n))return;for(a=t._zTime,t._zTime=e||(n?1e-8:0),n||(n=e&&!a),t.ratio=u,t._from&&(u=1-u),t._time=0,t._tTime=l,i=t._pt;i;)i.r(u,i.d),i=i._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!n&&me(t,"onUpdate"),l&&t._repeat&&!n&&t.parent&&me(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===u&&(u&&Bt(t,1),n||(me(t,u?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},n.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?ve(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,Ve&&!0!==Ve.vars.overwrite)._first||ve(this),this.parent&&n!==this.timeline.totalDuration()&&Zt(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,o,a,s,u,c,l=this._targets,h=t?ae(t):l,f=this._ptLookup,p=this._pt;if((!e||"all"===e)&&function(t,e){for(var n=t.length,r=n===e.length;r&&n--&&t[n]===e[n];);return n<0}(l,h))return"all"===e&&(this._pt=0),ve(this);for(r=this._op=this._op||[],"all"!==e&&(H(e)&&(s={},wt(e,(function(t){return s[t]=1})),e=s),e=function(t,e){var n,r,i,o,a=t[0]?Et(t[0]).harness:0,s=a&&a.aliases;if(!s)return e;for(r in n=Nt({},e),s)if(r in n)for(i=(o=s[r].split(",")).length;i--;)n[o[i]]=n[r];return n}(l,e)),c=l.length;c--;)if(~h.indexOf(l[c]))for(s in i=f[c],"all"===e?(r[c]=e,a=i,o={}):(o=r[c]=r[c]||{},a=e),a)(u=i&&i[s])&&("kill"in u.d&&!0!==u.d.kill(s)||Lt(this,u,"_pt"),delete i[s]),"all"!==o&&(o[s]=1);return this._initted&&!this._pt&&p&&ve(this),this},e.to=function(t,n){return new e(t,n,arguments[2])},e.from=function(t,n){return new e(t,Ot(arguments,1))},e.delayedCall=function(t,n,r,i){return new e(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},e.fromTo=function(t,n,r){return new e(t,Ot(arguments,2))},e.set=function(t,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new e(t,n)},e.killTweensOf=function(t,e,n){return a.killTweensOf(t,e,n)},e}(Ge);Ct($e.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),wt("staggerTo,staggerFrom,staggerFromTo",(function(t){$e[t]=function(){var e=new He,n=re.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}}));var Je=function(t,e,n){return t[e]=n},Qe=function(t,e,n){return t[e](n)},tn=function(t,e,n,r){return t[e](r.fp,n)},en=function(t,e,n){return t.setAttribute(e,n)},nn=function(t,e){return V(t[e])?Qe:W(t[e])&&t.setAttribute?en:Je},rn=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4,e)},on=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},an=function(t,e){var n=e._pt,r="";if(!t&&e.b)r=e.b;else if(1===t&&e.e)r=e.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+r,n=n._next;r+=e.c}e.set(e.t,e.p,r,e)},sn=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},un=function(t,e,n,r){for(var i,o=this._pt;o;)i=o._next,o.p===r&&o.modifier(t,e,n),o=i},cn=function(t){for(var e,n,r=this._pt;r;)n=r._next,r.p===t&&!r.op||r.op===t?Lt(this,r,"_pt"):r.dep||(e=1),r=n;return!e},ln=function(t,e,n,r){r.mSet(t,e,r.m.call(r.tween,n,r.mt),r)},hn=function(t){for(var e,n,r,i,o=t._pt;o;){for(e=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:i)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:i=o,o=e}t._pt=r},fn=function(){function t(t,e,n,r,i,o,a,s,u){this.t=e,this.s=r,this.c=i,this.p=n,this.r=o||rn,this.d=a||this,this.set=s||Je,this.pr=u||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=ln,this.m=t,this.mt=n,this.tween=e},t}();wt(gt+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return ft[t]=1})),ot.TweenMax=ot.TweenLite=$e,ot.TimelineLite=ot.TimelineMax=He,a=new He({sortChildren:!1,defaults:M,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),N.stringFilter=Oe;var pn={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){return _e(t)}))},timeline:function(t){return new He(t)},getTweensOf:function(t,e){return a.getTweensOf(t,e)},getProperty:function(t,e,n,r){H(t)&&(t=ae(t)[0]);var i=Et(t||{}).get,o=n?It:At;return"native"===n&&(n=""),t?e?o((yt[e]&&yt[e].get||i)(t,e,n,r)):function(e,n,r){return o((yt[e]&&yt[e].get||i)(t,e,n,r))}:t},quickSetter:function(t,e,n){if((t=ae(t)).length>1){var r=t.map((function(t){return mn.quickSetter(t,e,n)})),i=r.length;return function(t){for(var e=i;e--;)r[e](t)}}t=t[0]||{};var o=yt[e],a=Et(t),s=a.harness&&(a.harness.aliases||{})[e]||e,u=o?function(e){var r=new o;f._pt=0,r.init(t,n?e+n:e,f,0,[t]),r.render(1,r),f._pt&&sn(1,f)}:a.set(t,s);return o?u:function(e){return u(t,s,n?e+n:e,a,1)}},isTweening:function(t){return a.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=je(t.ease,M.ease)),Mt(M,t||{})},config:function(t){return Mt(N,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,r=t.plugins,i=t.defaults,o=t.extendTimeline;(r||"").split(",").forEach((function(t){return t&&!yt[t]&&!ot[t]&&ct(e+" effect requires "+t+" plugin.")})),mt[e]=function(t,e,r){return n(ae(t),Ct(e||{},i),r)},o&&(He.prototype[e]=function(t,n,r){return this.add(mt[e](t,Y(n)?n:(r=n)&&{},this),r)})},registerEase:function(t,e){Ae[t]=je(e)},parseEase:function(t,e){return arguments.length?je(t,e):Ae},getById:function(t){return a.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,r,i=new He(t);for(i.smoothChildTiming=z(t.smoothChildTiming),a.remove(i),i._dp=0,i._time=i._tTime=a._time,n=a._first;n;)r=n._next,!e&&!n._dur&&n instanceof $e&&n.vars.onComplete===n._targets[0]||zt(i,n,n._start-n._delay),n=r;return zt(a,i,0),i},utils:{wrap:function t(e,n,r){var i=n-e;return $(e)?fe(e,t(0,e.length),n):te(r,(function(t){return(i+(t-e)%i)%i+e}))},wrapYoyo:function t(e,n,r){var i=n-e,o=2*i;return $(e)?fe(e,t(0,e.length-1),n):te(r,(function(t){return e+((t=(o+(t-e)%o)%o||0)>i?o-t:t)}))},distribute:ue,random:he,snap:le,normalize:function(t,e,n){return de(t,e,0,1,n)},getUnit:ne,clamp:function(t,e,n){return te(n,(function(n){return ee(t,e,n)}))},splitColor:Ee,toArray:ae,mapRange:de,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||ne(n))}},interpolate:function t(e,n,r,i){var o=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!o){var a,s,u,c,l,h=H(e),f={};if(!0===r&&(i=1)&&(r=null),h)e={p:e},n={p:n};else if($(e)&&!$(n)){for(u=[],c=e.length,l=c-2,s=1;s<c;s++)u.push(t(e[s-1],e[s]));c--,o=function(t){t*=c;var e=Math.min(l,~~t);return u[e](t-e)},r=n}else i||(e=Nt($(e)?[]:{},e));if(!u){for(a in n)We.call(f,e,a,"get",n[a]);o=function(t){return sn(t,f)||(h?e.p:e)}}}return te(r,o)},shuffle:se},install:st,effects:mt,ticker:Pe,updateRoot:He.updateRoot,plugins:yt,globalTimeline:a,core:{PropTween:fn,globals:lt,Tween:$e,Timeline:He,Animation:Ge,getCache:Et,_removeLinkedListItem:Lt,suppressOverwrites:function(t){return o=t}}};wt("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return pn[t]=$e[t]})),Pe.add(He.updateRoot),f=pn.to({},{duration:0});var dn=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},yn=function(t,e){return{name:t,rawVars:1,init:function(t,n,r){r._onInit=function(t){var r,i;if(H(n)&&(r={},wt(n,(function(t){return r[t]=1})),n=r),e){for(i in r={},n)r[i]=e(n[i]);n=r}!function(t,e){var n,r,i,o=t._targets;for(n in e)for(r=o.length;r--;)(i=t._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=dn(i,n)),i&&i.modifier&&i.modifier(e[n],t,o[r],n))}(t,n)}}}},mn=pn.registerPlugin({name:"attr",init:function(t,e,n,r,i){var o,a;for(o in e)(a=this.add(t,"setAttribute",(t.getAttribute(o)||0)+"",e[o],r,i,0,0,o))&&(a.op=o),this._props.push(o)}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n])}},yn("roundProps",ce),yn("modifiers"),yn("snap",le))||pn;$e.version=He.version=mn.version="3.6.1",l=1,q()&&Re();Ae.Power0;var vn=Ae.Power1,_n=(Ae.Power2,Ae.Power3,Ae.Power4,Ae.Linear);Ae.Quad,Ae.Cubic,Ae.Quart,Ae.Quint,Ae.Strong,Ae.Elastic,Ae.Back,Ae.SteppedEase,Ae.Bounce,Ae.Sine,Ae.Expo,Ae.Circ},"./node_modules/@games/gsap/index.js":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return o}));var r=n("./node_modules/@games/gsap/gsap-core.js"),i=n("./node_modules/@games/gsap/CSSPlugin.js"),o=r.A.registerPlugin(i.a)||r.A;o.core.Tween},"./node_modules/@games/pixi-animate/lib/animate/Animator.js":function(t,e,n){"use strict";var r,i=(r=n("./node_modules/@games/pixi-animate/lib/animate/AnimatorTimeline.js"))&&r.__esModule?r:{default:r};function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=[],s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"play",value:function(t,e,n){var r,i,o=!1,a="function"==typeof e;if(void 0===e||a)r=0,i=t.totalFrames-1,a&&(n=e);else{if(r=t.labelsMap[e],void 0===(i=t.labelsMap[e+this.STOP_LABEL])&&(i=t.labelsMap[e+this.LOOP_LABEL],o=!0),void 0===r)throw new Error("No start label matching '"+e+"'");if(void 0===i)throw new Error("No end label matching '"+e+"'")}return this.fromTo(t,r,i,o,n)}},{key:"to",value:function(t,e,n){return this.fromTo(t,t.currentFrame,e,!1,n)}},{key:"fromTo",value:function(t,e,n,r,o){if("string"==typeof e){var a=e;if(void 0===(e=t.labelsMap[a]))throw new Error("No start label matching '"+a+"'")}if("string"==typeof n){var s=n;if(void 0===(n=t.labelsMap[s]))throw new Error("No end label matching '"+s+"'")}if(e<0)throw new Error("Start frame is out of bounds");if(n>=t.totalFrames)throw new Error("End frame is out of bounds");if(e>=n)throw new Error("End frame is before start frame");this.stop(t),r=!!r;var u=i.default.create(t,e,n,r,o);return this._timelines.push(u),t.currentFrame!==e?t.gotoAndPlay(e):t.play(),u}},{key:"stop",value:function(t){for(var e=0,n=this._timelines.length;e<n;e++){var r=this._timelines[e];if(r.instance===t){this._internalStop(r);break}}}},{key:"stopAll",value:function(){for(var t=this._timelines.length-1;t>=0;t--)this._internalStop(this._timelines[t])}},{key:"_internalStop",value:function(t){this._timelines.splice(this._timelines.indexOf(t),1),t.instance.stop(),t.destroy()}},{key:"_timelines",get:function(){return a}},{key:"STOP_LABEL",get:function(){return"_stop"}},{key:"LOOP_LABEL",get:function(){return"_loop"}}],(n=null)&&o(e.prototype,n),r&&o(e,r),t}();t.exports=s},"./node_modules/@games/pixi-animate/lib/animate/AnimatorTimeline.js":function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=[],o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._update=this.update.bind(this),this.init(null,0,0,!1,null)}var e,n,o;return e=t,o=[{key:"create",value:function(e,n,r,i,o){var a;return(a=this._pool.length?this._pool.pop():new t).init(e,n,r,i,o),a}},{key:"_pool",get:function(){return i}}],(n=[{key:"init",value:function(t,e,n,r,i){this.instance=t,this.loop=r,this.start=e,this.end=n,this.callback=i,t&&(t.loop=!1,t.gotoAndStop(e),t._beforeUpdate=this._update)}},{key:"destroy",value:function(){this.instance._beforeUpdate=null,this.init(null,0,0,!1,null),t._pool.push(this)}},{key:"update",value:function(t){var e;return t.currentFrame>=this.end&&(t.currentFrame=this.end,this.loop?(t._updateTimeline(),t.gotoAndPlay(this.start)):(t.stop(),this.callback&&(e=this.callback),this.stop())),e}},{key:"progress",get:function(){var t=(this.instance.currentFrame-this.start)/(this.end-this.start);return Math.max(0,Math.min(1,t))}}])&&r(e.prototype,n),o&&r(e,o),t}();t.exports=o},"./node_modules/@games/pixi-animate/lib/animate/Ease.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=Math.PI,i=2*r;function o(t){return function(e){return Math.pow(e,t)}}function a(t){return function(e){return 1-Math.pow(1-e,t)}}function s(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}}var u={quadIn:o(2),quadOut:a(2),quadInOut:s(2),cubicIn:o(3),cubicOut:a(3),cubicInOut:s(3),quartIn:o(4),quartOut:a(4),quartInOut:s(4),quintIn:o(5),quintOut:a(5),quintInOut:s(5),sineIn:function(t){return 1-Math.cos(t*r/2)},sineOut:function(t){return Math.sin(t*r/2)},sineInOut:function(t){return-.5*(Math.cos(r*t)-1)},backIn:function(t){return t*t*(2.7*t-1.7)},backOut:function(t){return--t*t*(2.7*t+1.7)+1},backInOut:function(t){return(t*=2)<1?t*t*(3.5925*t-2.5925)*.5:.5*((t-=2)*t*(3.5925*t+2.5925)+2)},circIn:function(t){return-(Math.sqrt(1-t*t)-1)},circOut:function(t){return Math.sqrt(1- --t*t)},circInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},bounceIn:function(t){return 1-u.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*u.bounceIn(2*t):.5*u.bounceOut(2*t-1)+.5},elasticIn:function(t){if(0===t||1===t)return t;var e=.3/i*Math.asin(1);return-1*Math.pow(2,10*(t-=1))*Math.sin((t-e)*i/.3)},elasticOut:function(t){if(0===t||1===t)return t;var e=.3/i*Math.asin(1);return 1*Math.pow(2,-10*t)*Math.sin((t-e)*i/.3)+1},elasticInOut:function(t){var e=.3*1.5/i*Math.asin(1);return(t*=2)<1?1*Math.pow(2,10*(t-=1))*Math.sin((t-e)*i/(.3*1.5))*-.5:1*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*i/(.3*1.5))*.5+1}},c=u;e.default=c},"./node_modules/@games/pixi-animate/lib/animate/MovieClip.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=u(n("./node_modules/@games/pixi-animate/lib/animate/Timeline.js")),i=u(n("./node_modules/@games/pixi-animate/lib/animate/utils.js")),o=n("./node_modules/@games/pixi-animate/lib/animate/Tween.js"),a=n("./node_modules/pixi.js/dist/esm/pixi.js"),s=u(n("./node_modules/@games/pixi-animate/lib/animate/sound.js"));function u(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){l(o,r,i,a,s,"next",t)}function s(t){l(o,r,i,a,s,"throw",t)}a(void 0)}))}}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function m(t,e,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _(t,e){return(_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var g=null,b=function(t){function e(t,n,r,i,o){var a;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a=function(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?y(t):e}(this,v(e).call(this)),t="number"==typeof(t=void 0===t?{}:t)?{mode:t||e.INDEPENDENT,duration:n||0,loop:void 0===r||r,labels:o||{},framerate:i||0,startPosition:0,frameSkip:!1}:Object.assign({mode:e.INDEPENDENT,startPosition:0,loop:!0,labels:{},duration:0,framerate:0,frameSkip:!1},t),a.mode=t.mode,a.startPosition=t.startPosition,a.loop=!!t.loop,a.currentFrame=0,a._labels=[],a._labelDict=t.labels,t.labels){for(var s in t.labels){var u={label:s,position:t.labels[s]};a._labels.push(u)}a._labels.sort((function(t,e){return t.position-e.position}))}return a.selfAdvance=!0,a.paused=!1,a.actionsEnabled=!0,a.autoReset=!0,a._synchOffset=0,a._prevPos=-1,a._t=0,a._framerate=t.framerate,a._duration=0,a._totalFrames=t.duration,a._frameSkip=t.frameSkip,a._timelines=[],a._timedChildTimelines=[],a._depthSorted=[],a._actions=[],a._beforeUpdate=null,a.parentStartPosition=0,a._listenerRemoved=!0,a.mode===e.INDEPENDENT&&(a._tickListener=a._tickListener.bind(y(a)),a._onAdded=a._onAdded.bind(y(a)),a._onRemoved=a._onRemoved.bind(y(a)),a.on("added",a._onAdded),a.on("removed",a._onRemoved)),t.framerate&&(a.framerate=t.framerate),a.advance=a.advance,a._updateTimeline=a._updateTimeline,a._setTimelinePosition=a._setTimelinePosition,a._goto=a._goto,a}var n,u,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(e,t),n=e,l=[{key:"upload",value:function(t,e,n){g||(g=t.plugins.prepare).register(this.addMovieClips),g.upload(e,n)}},{key:"addMovieClips",value:function(t){return t instanceof e&&(t._timedChildTimelines.forEach((function(e){-1===t.children.indexOf(e.target)&&g.add(e.target)})),!0)}}],(u=[{key:"stopTick",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._onRemoved(),t&&(this.children.forEach((function(t){return t.stopTick&&t.stopTick(!0)})),this._timedChildTimelines.forEach((function(t){var e=t.target;return e.stopTick&&e.stopTick(!0)})))}},{key:"startTick",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._onAdded(),t&&(this.children.forEach((function(t){return t.startTick&&t.startTick(!0)})),this._timedChildTimelines.forEach((function(t){var e=t.target;return e.startTick&&e.startTick(!0)})))}},{key:"_onAdded",value:function(){this._listenerRemoved&&(this._framerate||(this.framerate=this.parentFramerate),e.Ticker.add(this._tickListener),this._listenerRemoved=!1)}},{key:"_tickListener",value:function(t){if(!this.paused&&this.selfAdvance){var n=t/e.Ticker.speed/a.settings.TARGET_FPMS/1e3;this.advance(n)}else this._prevPos<0&&this._goto(this.currentFrame)}},{key:"_onRemoved",value:function(){e.Ticker.remove(this._tickListener),this._listenerRemoved=!0}},{key:"_autoExtend",value:function(t){this._totalFrames<t&&(this._totalFrames=t)}},{key:"_parseProperties",value:function(t){"string"==typeof t.t?t.t=i.default.hexToUint(t.t):"number"==typeof t.v&&(t.v=!!t.v)}},{key:"_getChildTimeline",value:function(t){for(var e=this._timelines.length-1;e>=0;--e)if(this._timelines[e].target===t)return this._timelines[e];var n=new r.default(t);return this._timelines.push(n),n}},{key:"addTimedMask",value:function(t,e){for(var n in e)this.addKeyframe(t,{m:e[n]},parseInt(n,10));return this._setTimelinePosition(this.currentFrame,this.currentFrame,!0),this}},{key:"am",value:function(t,e){return this.addTimedMask(t,e)}},{key:"addTween",value:function(t,e,n,r,i){var o=this._getChildTimeline(t);return this._parseProperties(e),o.addTween(e,n,r,i),this._autoExtend(n+r),this}},{key:"addKeyframe",value:function(t,e,n){var r=this._getChildTimeline(t),i=e.tw;return delete e.tw,this._parseProperties(e),r.addKeyframe(e,n),this._autoExtend(n),i&&(this.addTween(t,i.p,n,i.d,(0,o.getEaseFromConfig)(i.e)),r.addKeyframe(i.p,n+i.d)),this}},{key:"at",value:function(t,e,n,r){return this.addTimedChild(t,e,n,r)}},{key:"addTimedChild",value:function(t,n,r,o){var a,s;for(void 0===n&&(n=0),(void 0===r||r<1)&&(r=this._totalFrames||1),t.mode===e.SYNCHED&&(t.parentStartPosition=n),s=this._timedChildTimelines.length-1;s>=0;--s)if(this._timedChildTimelines[s].target===t){a=this._timedChildTimelines[s];break}if(a||((a=[]).target=t,this._timedChildTimelines.push(a)),i.default.fillFrames(a,n,r),this._totalFrames<n+r&&(this._totalFrames=n+r),o){for(var u in"string"==typeof o&&(o=i.default.deserializeKeyframes(o)),o)this.addKeyframe(t,o[u],parseInt(u,10));this._getChildTimeline(t).extendLastFrame(n+r-1)}return this._setTimelinePosition(n,this.currentFrame,!0),this}},{key:"aa",value:function(t,e){return this.addAction(t,e)}},{key:"addAction",value:function(t,e){if("string"==typeof e){var n=this._labelDict[e];if(void 0===n)throw"The label '".concat(e,"' does not exist on this timeline");e=n}var r=this._actions;return r.length<=e&&(r.length=e+1),this._totalFrames<e&&(this._totalFrames=e),r[e]?r[e].push(t):r[e]=[t],this}},{key:"ps",value:function(t,e){return this.playSound(t,e)}},{key:"playSound",value:function(t,e){return s.default.emit("play",t,!!e,this),this}},{key:"play",value:function(){this.startTick(!0),this.paused=!1}},{key:"stop",value:function(){this.stopTick(),this.paused=!0}},{key:"gotoAndPlay",value:function(t){this.startTick(!0),this.paused=!1,this._goto(t)}},{key:"gotoAndStop",value:function(t){this.stopTick(),this.paused=!0,this._goto(t)}},{key:"advance",value:function(t){var n,r=t?t*e.TIME_SCALE:null,i=this.currentFrame,o=this._getNextActionFrame(),a=this.loop&&(this._frameSkip||i>=this._getNextActionFrame()),s=Math.floor(this._t*this._framerate+1e-8);this._framerate||(this.framerate=this.parentFramerate),r&&(this._t+=r),this._t>this._duration&&(this._t=a?this._t%this._duration:this._duration),this._frameSkip?this.currentFrame=s:this.currentFrame=o>=0?Math.min(s,o):s,this.currentFrame>=this._totalFrames&&(this.currentFrame=this._totalFrames-1),this.currentFrame<i&&!a&&(this.currentFrame=i),this._beforeUpdate&&(n=this._beforeUpdate(this)),this._updateTimeline(),n&&n()}},{key:"_getNextActionFrame",value:function(){if(!this.currentFrame)return this._actions.length-1;for(var t=this.currentFrame+1;t<this._actions.length;t++)if(this._actions[t])return t;return this._actions.length-1}},{key:"_goto",value:function(t){var e="string"==typeof t?this._labelDict[t]:t;void 0!==e&&(this._prevPos=NaN,this.currentFrame=e,this._framerate||(this.framerate=this.parentFramerate),this._framerate>0?this._t=e/this._framerate:this._t=0,this._updateTimeline())}},{key:"_reset",value:function(){this._prevPos=-1,this._t=0,this.currentFrame=0}},{key:"_updateTimeline",value:function(){var t=this.mode!==e.INDEPENDENT;t&&(this.currentFrame=this.startPosition+(this.mode===e.SINGLE_FRAME?0:this._synchOffset),this.currentFrame>=this._totalFrames&&(this.currentFrame%=this._totalFrames)),this._prevPos!==this.currentFrame&&(this._setTimelinePosition(this._prevPos,this.currentFrame,!t&&this.actionsEnabled),this._prevPos=this.currentFrame)}},{key:"_setTimelinePosition",value:function(t,n,r){if(t!==n&&r){var i=isNaN(t)?n:t>=this._totalFrames-1?0:t+1,o=[];if(n<i){for(var a=i;a<this._actions.length;++a)this._actions[a]&&o.push(a);for(var s=0;s<=n;++s)this._actions[s]&&o.push(s)}else for(var u=i;u<=n;++u)this._actions[u]&&o.push(u);if(o.length)for(var c=this.currentFrame,l=0;l<o.length;++l){var h=o[l];if(this._setTimelinePosition(h,h,!0),this.currentFrame!==c||h===n)return;if(this.paused)return void(this.currentFrame=h)}}var f,p,d,y=this._timelines;for(f=y.length-1;f>=0;--f){var m=y[f];for(p=0,d=m.length;p<d;++p){var v=m[p];if(n>=v.startFrame&&n<=v.endFrame){v.setPosition(n);break}}}var _=this._timedChildTimelines,g=this._depthSorted;for(f=0,d=_.length;f<d;++f){var b=_[f].target,E=_[f][n];E?(g.push(b),b.parent!==this&&(this.addChild(b),b.mode===e.INDEPENDENT&&b.autoReset&&b._reset())):E||b.parent!==this||this.removeChild(b)}for(f=0,d=g.length;f<d;f++){var T=g[f];this.children.indexOf(T)!==f&&this.addChildAt(T,f)}g.length=0;var w,x=this.children;for(f=0,d=x.length;f<d;++f)(w=x[f]).mode===e.SYNCHED&&(w._synchOffset=n-w.parentStartPosition,w._updateTimeline());if(r&&this._actions&&this._actions[n])for(var S=this._actions[n],O=0;O<S.length;++O)S[O].call(this)}},{key:"destroy",value:function(t){this._tickListener&&(e.Ticker.remove(this._tickListener),this._tickListener=null);var n=[],r=this._timelines;if(r)for(var i=0;i<r.length;i++){var o=r[i];n.push(o.target),o._currentProps=null,o.length=0}if(r=this._timedChildTimelines)for(var a=0;a<r.length;a++){var s=r[a];n.indexOf(s.target)<0&&n.push(s.target),s._currentProps=null,s.length=0}for(var u=0;u<n.length;u++)this.children.indexOf(n[u])<0&&n[u].destroy(t);n.length=0,this._actions=null,this._timelines=null,this._depthSorted=null,this._timedChildTimelines=null,this._beforeUpdate=null,this._labels=null,this._labelDict=null,m(v(e.prototype),"destroy",this).call(this,t)}},{key:"promises",get:function(){var t=this;return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(n,!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},m(v(e.prototype),"promises",this),{play:function(){return new Promise((function(e){t.promises.stop(),t.play(),t.once("label_end",(function(){t.stop(),e()}))}))},gotoAndPlay:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{repeat:0};return new Promise(function(){var r=h(regeneratorRuntime.mark((function r(i){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.promises.stop(),t.gotoAndPlay(e),!(n.repeat<0)){r.next=8;break}t._repeatCallback=function(){return t.gotoAndPlay(e)},t.on("label_end",t._repeatCallback),i(),r.next=21;break;case 8:if(!(n.repeat>0)){r.next=20;break}o=n.repeat;case 10:if(!(o>0)){r.next=16;break}return o--,r.next=14,t.promises.gotoAndPlay(e);case 14:r.next=10;break;case 16:t.stop(),i(),r.next=21;break;case 20:t.once("label_end",(function(){t.stop(),i()}));case 21:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}())},stop:function(){return t.stop(),"function"==typeof t._repeatCallback&&t.off("label_end",t._repeatCallback),Promise.resolve()},gotoAndStop:function(e){return t.gotoAndStop(e),Promise.resolve()},finish:function(){return new Promise((function(e){return t.once("label_end",(function(){t.stop(),e()}))}))}})}},{key:"labels",get:function(){return this._labels}},{key:"labelsMap",get:function(){return this._labelDict}},{key:"currentLabel",get:function(){for(var t=this._labels,e=null,n=0,r=t.length;n<r&&t[n].position<=this.currentFrame;++n)e=t[n].label;return e}},{key:"elapsedTime",get:function(){return this._t},set:function(t){this._t=t}},{key:"framerate",get:function(){return this._framerate},set:function(t){t>0?(this._framerate?this._t*=this._framerate/t:this._t=this.currentFrame/t,this._framerate=t,this._duration=t?this._totalFrames/t:0):this._t=this._framerate=this._duration=0}},{key:"totalFrames",get:function(){return this._totalFrames}},{key:"parentFramerate",get:function(){for(var t=this,n=t._framerate;(t=t.parent)&&!n;)t.mode===e.INDEPENDENT&&(n=t._framerate);return n||e.DEFAULT_FRAMERATE}}])&&d(n.prototype,u),l&&d(n,l),e}(a.Container);b.INDEPENDENT=0,b.SINGLE_FRAME=1,b.SYNCHED=2,b.DEFAULT_FRAMERATE=60,b.TIME_SCALE=1,b.extend=b.e=function(t){return t.prototype=Object.create(b.prototype),t.prototype.__parent=b.prototype,t.prototype.constructor=t,t},b.Ticker=null;var E=b;e.default=E},"./node_modules/@games/pixi-animate/lib/animate/Scene.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n("./node_modules/@games/pixi-animate/lib/animate/load.js")),i=o(n("./node_modules/@games/pixi-animate/lib/animate/sound.js"));function o(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(t,n,r,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=u(this,l(e).call(this,t,n,r,o))).sound=i.default,a.instance=null,a}var n,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,t),n=e,(o=[{key:"load",value:function(t,e,n){var i=this;return(0,r.default)(t,this.stage,(function(t){i.instance=t,e&&e(t)}),n)}},{key:"destroy",value:function(t){this.instance&&(this.instance.destroy(!0),this.instance=null),c(l(e.prototype),"destroy",this).call(this,t)}}])&&s(n.prototype,o),a&&s(n,a),e}(n("./node_modules/pixi.js/dist/esm/pixi.js").Application);e.default=f},"./node_modules/@games/pixi-animate/lib/animate/ShapesCache.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n("./node_modules/@games/pixi-animate/lib/animate/utils.js"))&&r.__esModule?r:{default:r};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a={};Object.defineProperty(a,"add",{enumerable:!1,value:function(t,e){"string"==typeof e&&(e=i.default.deserializeShapes(e));for(var n=0;n<e.length;n++)for(var r=e[n],o=0;o<r.length;o++){var s=r[o];"string"==typeof s&&"#"===s[0]&&(r[o]=i.default.hexToUint(s))}a[t]=e}}),Object.defineProperty(a,"fromCache",{enumerable:!1,value:function(t){return a[t]||null}}),Object.defineProperty(a,"remove",{enumerable:!1,value:function(t){if("object"!==o(t))a[t]&&(a[t].length=0,delete a[t]);else for(var e in t)a.remove(e)}}),Object.defineProperty(a,"removeAll",{enumerable:!1,value:function(){for(var t in a)a.remove(t)}});var s=a;e.default=s},"./node_modules/@games/pixi-animate/lib/animate/SymbolLoader.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n("./node_modules/@games/pixi-animate/lib/animate/ShapesCache.js"))&&r.__esModule?r:{default:r};var o=function(){return function(t,e){var n=t.url,r=t.data;r?n.search(/\.shapes\.(json|txt)$/i)>-1&&i.default.add(t.name,r):e(),e(t.error)}};n("./node_modules/pixi.js/dist/esm/pixi.js").Loader._plugins.push({use:o()});var a=o;e.default=a},"./node_modules/@games/pixi-animate/lib/animate/Timeline.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n("./node_modules/@games/pixi-animate/lib/animate/Tween.js"))&&r.__esModule?r:{default:r};var o=function(t){Array.call(this),this.target=t,this._currentProps={}},a=o.prototype=Object.create(Array.prototype);a.addTween=function(t,e,n,r){this.extendLastFrame(e-1);var o=Object.assign({},this._currentProps);for(var a in t){var s=a;if(!Object.hasOwnProperty.call(this._currentProps,a))for(var u=o[s]=this.getPropFromShorthand(s),c=this.length-1;c>=0;--c)this[c].startProps[s]=u,this[c].endProps[s]=u}var l=new i.default(this.target,o,t,e,n,r);e===this[this.length-1].startFrame?this[this.length-1]=l:this.push(l),Object.assign(this._currentProps,l.endProps)},a.addKeyframe=function(t,e){if(this.length&&this[this.length-1].startFrame>=e){for(var n=this.length-1;n>=0;--n){var r=this[n];if(r.startFrame===e){Object.assign(r.startProps,t),r.endProps=Object.assign({},r.startProps,r.endProps);for(var o=n+1;o<this.length;++o){var a=this[o];a.startProps=Object.assign({},t,a.startProps),a.endProps=Object.assign({},a.startProps,a.endProps)}break}if(r.startFrame<e&&r.endFrame>e&&r.isTweenlessFrame){r.endFrame=e-1;var s=Object.assign({},r.endProps,t),u=new i.default(this.target,s,null,e,0);this.splice(n,0,u);for(var c=n+1;c<this.length;++c){var l=this[c];l.startProps=Object.assign({},t,l.startProps),l.endProps=Object.assign({},l.startProps,l.endProps)}break}if(r.endFrame<e){var h=Object.assign({},r.endProps,t),f=new i.default(this.target,h,null,e,0);this.splice(n,0,f);for(var p=n+1;p<this.length;++p){var d=this[p];d.startProps=Object.assign({},t,d.startProps),d.endProps=Object.assign({},d.startProps,d.endProps)}break}if(e<r.endFrame&&r.isTweenlessFrame){r.endFrame=e-1;var y=Object.assign({},r.endProps,t),m=new i.default(this.target,y,null,e,0);this.splice(n,0,m);for(var v=n+1;v<this.length;++v){var _=this[v];_.startProps=Object.assign({},t,_.startProps),_.endProps=Object.assign({},_.startProps,_.endProps)}break}}Object.assign(this._currentProps,t,this._currentProps)}else{this.extendLastFrame(e-1);var g=Object.assign({},this._currentProps,t),b=new i.default(this.target,g,null,e,0);this.push(b),Object.assign(this._currentProps,b.endProps)}},a.extendLastFrame=function(t){if(this.length){var e=this[this.length-1];e.endFrame<t&&(e.isTweenlessFrame?e.endFrame=t:this.addKeyframe(this._currentProps,e.endFrame+1))}},a.getPropFromShorthand=function(t){var e=this.target;switch(t){case"x":return e.position.x;case"y":return e.position.y;case"sx":return e.scale.x;case"sy":return e.scale.y;case"kx":return e.skew.x;case"ky":return e.skew.y;case"r":return e.rotation;case"a":return e.alpha;case"v":return e.visible;case"m":return e.mask}return null};var s=o;e.default=s},"./node_modules/@games/pixi-animate/lib/animate/Tween.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEaseFromConfig=d,e.default=void 0;var r,i=(r=n("./node_modules/@games/pixi-animate/lib/animate/Ease.js"))&&r.__esModule?r:{default:r};function o(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(e,n,r,i,o,a){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.target=e,this.startProps=n,this.endProps={},this.duration=o,this.startFrame=i,this.endFrame=i+o,this.ease={},this.isTweenlessFrame=!r,r)for(var s in r)"e"!==s&&(this.endProps[s]=r[s],r.e&&r.e[s]?this.ease[s]=d(r.e[s]):this.ease[s]=a);for(var u in n)this.endProps.hasOwnProperty(u)||(this.endProps[u]=n[u])}var e,n,r;return e=t,(n=[{key:"setPosition",value:function(t){if(t>=this.endFrame)this.setToEnd();else if(this.isTweenlessFrame)this.setToEnd();else{var e=(t-this.startFrame)/this.duration,n=this.target,r=this.startProps,i=this.endProps;for(var o in i){var a=o,s=c[a],u=e;this.ease[o]&&(u=this.ease[o](e)),p(n,a,s?s(r[a],i[a],u):r[a])}}}},{key:"setToEnd",value:function(){var t=this.endProps,e=this.target;for(var n in t)p(e,n,t[n])}}])&&a(e.prototype,n),r&&a(e,r),t}();function u(t,e,n){return t+(e-t)*n}var c={x:u,y:u,sx:u,sy:u,kx:u,ky:u,r:function(t,e,n){Math.abs(e-t)>h&&(e>t?t+=f:e+=h+f);return t+(e-t)*n},a:u,t:function(t,e,n){var r=t>>16&255,i=t>>8&255,o=255&t,a=r+((e>>16&255)-r)*n;a<0?a=0:a>255&&(a=255);var s=i+((e>>8&255)-i)*n;s<0?s=0:s>255&&(s=255);var u=o+((255&e)-o)*n;u<0?u=0:u>255&&(u=255);return a<<16|s<<8|u},v:null,c:function(t,e,n){return l[0]=t[0]+(e[0]-t[0])*n,l[1]=t[1]+(e[1]-t[1])*n,l[2]=t[2]+(e[2]-t[2])*n,l[3]=t[3]+(e[3]-t[3])*n,l[4]=t[4]+(e[4]-t[4])*n,l[5]=t[5]+(e[5]-t[5])*n,l},m:null,g:null};var l=[];var h=Math.PI,f=2*h;function p(t,e,n){switch(e){case"x":t.transform.position.x=n;break;case"y":t.transform.position.y=n;break;case"sx":t.transform.scale.x=n;break;case"sy":t.transform.scale.y=n;break;case"kx":t.transform.skew.x=n;break;case"ky":t.transform.skew.y=n;break;case"r":t.transform.rotation=n;break;case"a":t.alpha=n;break;case"t":t.i(n);break;case"c":t.setColorTransform.apply(t,o(n));break;case"v":t.visible=n;break;case"m":t.ma(n)}}function d(t){if(!t)return null;if("function"==typeof t)return t;if("classic"===t.n){var e=t.s/100;return function(t){return(e+1)*t+-e*t*t}}return i.default[t.n]}var y=s;e.default=y},"./node_modules/@games/pixi-animate/lib/animate/index.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"load",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"sound",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"utils",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"MovieClip",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"Scene",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"ShapesCache",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"SymbolLoader",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"Timeline",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"Tween",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"Animator",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"AnimatorTimeline",{enumerable:!0,get:function(){return p.default}}),e.Ease=e.VERSION=void 0;var r=m(n("./node_modules/@games/pixi-animate/lib/animate/load.js")),i=m(n("./node_modules/@games/pixi-animate/lib/animate/sound.js")),o=m(n("./node_modules/@games/pixi-animate/lib/animate/utils.js")),a=m(n("./node_modules/@games/pixi-animate/lib/animate/MovieClip.js")),s=m(n("./node_modules/@games/pixi-animate/lib/animate/Scene.js")),u=m(n("./node_modules/@games/pixi-animate/lib/animate/ShapesCache.js")),c=m(n("./node_modules/@games/pixi-animate/lib/animate/SymbolLoader.js")),l=m(n("./node_modules/@games/pixi-animate/lib/animate/Timeline.js")),h=m(n("./node_modules/@games/pixi-animate/lib/animate/Tween.js")),f=m(n("./node_modules/@games/pixi-animate/lib/animate/Animator.js")),p=m(n("./node_modules/@games/pixi-animate/lib/animate/AnimatorTimeline.js")),d=function(t){if(t&&t.__esModule)return t;var e=y();if(e&&e.has(t))return e.get(t);var n={};if(null!=t){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=r?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=t[i]}}n.default=t,e&&e.set(t,n);return n}(n("./node_modules/@games/pixi-animate/lib/animate/Ease.js"));function y(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return y=function(){return t},t}function m(t){return t&&t.__esModule?t:{default:t}}e.Ease=d;e.VERSION="1.5.0"},"./node_modules/@games/pixi-animate/lib/animate/load.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("./node_modules/pixi.js/dist/esm/pixi.js"),i=function(t,e,n,i,o,a){function s(){var e=t.createInstance&&"function"==typeof t.stage?new t.stage:null;t.parent&&t.parent.addChild(e),t.complete&&t.complete(e,o)}"function"==typeof e?(i=n,n=e,e=null):"string"==typeof n&&(i=n,n=null),"function"==typeof t&&(t={stage:t,parent:e,basePath:i||"",complete:n}),t=Object.assign({stage:null,parent:null,basePath:"",complete:null,createInstance:!0},t||{}),o=o||new r.Loader;var u=t.stage.assets||{};if(u&&Object.keys(u).length){var c=t.basePath;for(var l in c&&(c+="/"),u){var h=null;a&&(a[l]?h=a[l]:a.default&&(h=a.default)),o.add(l,c+u[l],h)}o.once("complete",s).load()}else s();return o};e.default=i},"./node_modules/@games/pixi-animate/lib/animate/sound.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=new(n("./node_modules/pixi.js/dist/esm/pixi.js").utils.EventEmitter);e.default=r},"./node_modules/@games/pixi-animate/lib/animate/utils.js":function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"hexToUint",value:function(t){return 3===(t=t.substr(1)).length&&(t=t.replace(/([a-f0-9])/g,"$1$1")),parseInt(t,16)}},{key:"fillFrames",value:function(t,e,n){var r=t.length;if(r<e+n&&(t.length=e+n,r<e))if(t.fill)t.fill(!1,r,e);else for(var i=r;i<e;++i)t[i]=!1;if(t.fill)t.fill(!0,e,e+n);else for(var o=t.length,a=e;a<o;++a)t[a]=!0}},{key:"deserializeKeyframes",value:function(t){for(var e,n,r={},i=0,o={X:"x",Y:"y",A:"sx",B:"sy",C:"kx",D:"ky",R:"r",L:"a",T:"t",F:"c",V:"v"},a="",s=!1,u={};i<=t.length;)o[e=t[i]]?(s||(s=!0,r[a]=u),n&&(u[n]=this.parseValue(n,a)),n=o[e],a="",i++):e&&" "!==e?(a+=e,i++):(i++,u[n]=this.parseValue(n,a),a="",n=null,u={},s=!1);return r}},{key:"deserializeShapes",value:function(t){for(var e=[],n=t.split("\n"),r=/^[a-z]{1,2}$/,i=0;i<n.length;i++){for(var o=n[i].split(" "),a=0;a<o.length;a++){var s=o[a];"#"===s[0]||r.test(s)||(o[a]=parseFloat(s))}e.push(o)}return e}},{key:"parseValue",value:function(t,e){switch(t){case"c":return(e=e.split(",")).forEach((function(t,e,n){n[e]=parseFloat(t)})),e;case"t":return e;case"v":return!!parseInt(e);default:return parseFloat(e)}}}],(n=null)&&r(e.prototype,n),i&&r(e,i),t}();e.default=i},"./node_modules/@games/pixi-animate/lib/index.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("./node_modules/@games/pixi-animate/lib/animate/index.js");Object.keys(r).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}));var i=n("./node_modules/@games/pixi-animate/lib/mixins/index.js");Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})}))},"./node_modules/@games/pixi-animate/lib/mixins/Container.js":function(t,e,n){"use strict";var r=n("./node_modules/pixi.js/dist/esm/pixi.js"),i=r.Container.prototype;i.ac=i.addChild,i.stopTick=function(){this.children.forEach((function(t){return t.stopTick&&t.stopTick(!0)}))},i.startTick=function(){this.children.forEach((function(t){return t.startTick&&t.startTick(!0)}))},r.Container.extend=r.Container.e=function(t){return t.prototype=Object.create(i),t.prototype.__parent=i,t.prototype.constructor=t,t}},"./node_modules/@games/pixi-animate/lib/mixins/DisplayObject.js":function(t,e,n){"use strict";var r,i=(r=n("./node_modules/@games/pixi-animate/lib/animate/utils.js"))&&r.__esModule?r:{default:r},o=n("./node_modules/pixi.js/dist/esm/pixi.js");var a=o.filters.ColorMatrixFilter,s=o.DisplayObject.prototype;s.setRenderable=s.re=function(t){return this.renderable=!!t,this},s.t=s.setTransform,s.setMask=s.ma=function(t){return t&&!(t instanceof o.Graphics||t instanceof o.Sprite)?("undefined"!=typeof console&&console.warn&&console.warn("Warning: Masks can only be PIXI.Graphics or PIXI.Sprite objects."),this):(this.mask=t,this)},s.setAlpha=s.a=function(t){return this.alpha=t,this},s.setTint=s.i=function(t){"string"==typeof t&&(t=i.default.hexToUint(t));var e=t>>16&255,n=t>>8&255,r=255&t;return this.c(e/255,0,n/255,0,r/255,0)},s.setColorTransform=s.c=function(t,e,n,r,i,o){var a=this.colorTransformFilter;return a.matrix[0]=t,a.matrix[4]=e,a.matrix[6]=n,a.matrix[9]=r,a.matrix[12]=i,a.matrix[14]=o,this.filters=[a],this},s.hasOwnProperty("colorTransformFilter")||Object.defineProperty(s,"colorTransformFilter",{set:function(t){this._colorTransformFilter=t},get:function(){return this._colorTransformFilter||new a}}),o.DisplayObject.extend=o.DisplayObject.e=function(t){return t.prototype=Object.create(s),t.prototype.__parent=s,t.prototype.constructor=t,t}},"./node_modules/@games/pixi-animate/lib/mixins/Graphics.js":function(t,e,n){"use strict";var r=n("./node_modules/pixi.js/dist/esm/pixi.js").Graphics.prototype;r.drawCommands=r.d=function(t){for(var e,n=[],r=0;r<=t.length;){var i=t[r++];void 0===i||this[i]?(e&&(this[e].apply(this,n),n.length=0),e=i):n.push(i)}return this.finishPoly(),this},r.c=r.closePath,r.h=r.addHole,r.m=r.moveTo,r.l=r.lineTo,r.q=r.quadraticCurveTo,r.b=r.bezierCurveTo,r.f=r.beginFill,r.s=r.lineStyle,r.dr=r.drawRect,r.rr=r.drawRoundedRect,r.rc=r.drawRoundedRect,r.dc=r.drawCircle,r.ar=r.arc,r.at=r.arcTo,r.de=r.drawEllipse,r.lf=function(t){return console.warn("Linear gradient fills are not supported"),this.f(t[0])},r.rf=function(t){return console.warn("Radial gradient fills are not supported"),this.f(t[0])},r.bf=function(){return console.warn("Bitmap fills are not supported"),this.f(0)},r.sd=function(){return console.warn("Dashed strokes are not supported"),this},r.bs=function(){return console.warn("Bitmap strokes are not supported"),this},r.ls=function(){return console.warn("Linear gradient strokes are not supported"),this},r.rs=function(){return console.warn("Radial gradient strokes are not supported"),this}},"./node_modules/@games/pixi-animate/lib/mixins/Sprite.js":function(t,e,n){"use strict";var r=n("./node_modules/pixi.js/dist/esm/pixi.js"),i=r.Sprite.prototype;r.Sprite.extend=r.Sprite.e=function(t){return t.prototype=Object.create(i),t.prototype.__parent=i,t.prototype.constructor=t,t}},"./node_modules/@games/pixi-animate/lib/mixins/Text.js":function(t,e,n){"use strict";var r=n("./node_modules/pixi.js/dist/esm/pixi.js").Text.prototype,i=["center","right"];r.setAlign=r.g=function(t){return"string"==typeof t&&(t=i.indexOf(t)),this.style.align=i[t]||"left",this.anchor.x=(t+1)/2,this};var o={o:"font",z:"fontSize",f:"fontFamily",y:"fontStyle",g:"fontWeight",i:"fill",a:"align",s:"stroke",t:"strokeThickness",w:"wordWrap",d:"wordWrapWidth",l:"lineHeight",h:"dropShadow",c:"dropShadowColor",n:"dropShadowAngle",b:"dropShadowBlur",p:"padding",x:"textBaseline",j:"lineJoin",m:"miterLimit",e:"letterSpacing"};r.setStyle=r.ss=function(t){for(var e in o)void 0!==t[e]&&(t[o[e]]=t[e],delete t[e]);return this.style=t,this},r.setShadow=r.sh=function(t,e,n){var r=this.style;return r.dropShadow=!0,void 0!==t&&(t="#"+t.toString(16)),r.dropShadowColor=a(t,r.dropShadowColor),r.dropShadowAngle=a(e,r.dropShadowAngle),r.dropShadowDistance=a(n,r.dropShadowDistance),this};var a=function(t,e){return void 0===t?e:t}},"./node_modules/@games/pixi-animate/lib/mixins/index.js":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"DisplayObject",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return s.default}});var r=u(n("./node_modules/@games/pixi-animate/lib/mixins/Container.js")),i=u(n("./node_modules/@games/pixi-animate/lib/mixins/DisplayObject.js")),o=u(n("./node_modules/@games/pixi-animate/lib/mixins/Sprite.js")),a=u(n("./node_modules/@games/pixi-animate/lib/mixins/Graphics.js")),s=u(n("./node_modules/@games/pixi-animate/lib/mixins/Text.js"));function u(t){return t&&t.__esModule?t:{default:t}}},"./node_modules/@games/quark/dist/quark.js":function(t,e){(()=>{"use strict";var e={940:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(e,n,i){void 0===n&&(n=!1),r(this,t),this._fn=e,this._once=n,this._thisArg=i,this._next=this._prev=this._owner=null}return n(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function o(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var a=function(){function t(){r(this,t),this._head=this._tail=void 0}return n(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var n=[];e;)n.push(e),e=e._next;return n}},{key:"has",value:function(t){if(!(t instanceof i))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return o(this,new i(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return o(this,new i(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof i))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=i,e.default=a,t.exports=e.default}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={exports:{}};return e[t](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};(()=>{r.r(i),r.d(i,{Alpha:()=>G,Attraction:()=>H,CircleZone:()=>R,Collision:()=>V,Color:()=>J,CrossZone:()=>O,EMITTER_ADDED:()=>d,EMITTER_REMOVED:()=>y,EULER:()=>a,Emitter:()=>at,Force:()=>X,Gravity:()=>W,GravityWell:()=>Y,ImageZone:()=>A,Life:()=>D,LineZone:()=>I,MEASURE:()=>o,Mass:()=>L,PARTICLE_CREATED:()=>l,PARTICLE_DEAD:()=>p,PARTICLE_SLEEP:()=>f,PARTICLE_UPDATE:()=>h,POOL_MAX:()=>t,PointZone:()=>C,Position:()=>F,RK2:()=>s,RK4:()=>u,Radius:()=>B,RandomDrift:()=>z,Rate:()=>et,RectZone:()=>k,Repulsion:()=>q,Rotate:()=>K,Scale:()=>Z,Span:()=>E,TIME_STEP:()=>e,USE_CLOCK:()=>n,VERLET:()=>c,Vector2D:()=>m,Velocity:()=>j,addBehaviors:()=>ct,addInitializers:()=>ut,getSpan:()=>st});const t=1e3,e=60,n=!1,o=100,a="euler",s="runge-kutta2",u="runge-kutta4",c="verlet",l="partilcleCreated",h="partilcleUpdate",f="particleSleep",p="partilcleDead",d="emitterAdded",y="emitterRemoved";class m{constructor(t,e){this.x=t||0,this.y=e||0}set(t,e){return this.x=t,this.y=e,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}}getGradient(){return 0!=this.x?Math.atan2(this.y,this.x):this.y>0?Math.PI/2:this.y<0?-Math.PI/2:void 0}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)}addXY(t,e){return this.x+=t,this.y+=e,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScalar(t){return this.x+=t,this.y+=t,this}sub(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divideScalar(t){return 0!==t?(this.x/=t,this.y/=t):this.set(0,0),this}min(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this}max(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this}clamp(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this}negate(){return this.multiplyScalar(-1)}dot(t){return this.x*t.x+this.y*t.y}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){return this.divideScalar(this.length())}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}rotate(t){const e=this.x,n=this.y;return this.x=e*Math.cos(t)+n*Math.sin(t),this.y=-e*Math.sin(t)+n*Math.cos(t),this}distanceToSquared(t){let e=this.x-t.x,n=this.y-t.y;return e*e+n*n}setLength(t){const e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}equals(t){return t.x===this.x&&t.y===this.y}toArray(){return[this.x,this.y]}clear(){return this.x=0,this.y=0,this}clone(){return new m(this.x,this.y)}}class v{constructor(t=255,e=255,n=255){this.r=t,this.g=e,this.b=n}reset(){this.r=255,this.g=255,this.b=255}}let _=0;class g{constructor(){this.id=_++,this.reset(!0),this.sprite=null,this.update=this.update,this.destroy=this.destroy}getDirection(){return Math.atan2(this.v.x,-this.v.y)*(180/Math.PI)}reset(t){return this.life=1/0,this.age=0,this.energy=1,this.dead=!1,this.sleep=!1,this.target=null,this.parent=null,this.mass=1,this.radius=10,this.alpha=1,this.scale=1,this.rotation=0,this.color=null,this.easing=t=>t,this.transform={},this.rgb=new v,this.data={},t?(this.p=new m,this.v=new m,this.a=new m,this.old={p:new m,v:new m,a:new m},this.behaviors=[]):(this.p.set(0,0),this.v.set(0,0),this.a.set(0,0),this.old.p.set(0,0),this.old.v.set(0,0),this.old.a.set(0,0),this.removeAllBehaviors()),this}update(t,e){const n=this.age+e;if(n>=this.life)return this.destroy(),!1;this.age=n;const r=this.behaviors.length;let i;for(i=0;i<r;i++)this.behaviors[i]&&this.behaviors[i].applyBehavior(this,e,t);if(this.dead)return this.destroy(),!1;const o=this.easing(this.age/this.life);return this.energy=Math.max(1-o,0),!0}addBehavior(t){this.behaviors.push(t),t.hasOwnProperty("parents")&&t.parents.push(this),t.initialize(this)}addBehaviors(t){let e,n=t.length;for(e=0;e<n;e++)this.addBehavior(t[e])}removeBehavior(t){const e=this.behaviors.indexOf(t);e>-1&&((t=this.behaviors.splice(e,1)).parents=null)}removeAllBehaviors(){this.behaviors.length=0}destroy(){this.removeAllBehaviors(),this.energy=0,this.dead=!0,this.parent=null}}function b(t,e,n){return n?Math.floor(Math.random()*(e-t))+t:t+Math.random()*(e-t)}class E{constructor(t,e,n=!1){Array.isArray(t)?(this.isArray=!0,this.a=t):(this.a=t,this.b=e||this.a,this.center=n)}getValue(t){return this.isArray?this.a[Math.floor(this.a.length*Math.random())]:this.center?function(t,e,n){return b(t-e,t+e,n)}(this.a,this.b,t):b(this.a,this.b,t)}}const T={easeLinear:t=>t,easeInQuad:t=>Math.pow(t,2),easeOutQuad:t=>-(Math.pow(t-1,2)-1),easeInOutQuad:t=>(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2),easeInCubic:t=>Math.pow(t,3),easeOutCubic:t=>Math.pow(t-1,3)+1,easeInOutCubic:t=>(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2),easeInQuart:t=>Math.pow(t,4),easeOutQuart:t=>-(Math.pow(t-1,4)-1),easeInOutQuart:t=>(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2),easeInSine:t=>1-Math.cos(t*(Math.PI/2)),easeOutSine:t=>Math.sin(t*(Math.PI/2)),easeInOutSine:t=>-.5*(Math.cos(Math.PI*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t)),easeInCirc:t=>-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)}};function w(t){return T[t]}let x=0;class S{constructor(t,e="easeLinear"){this.id=1048575+x++,this.life=t||1/0,this.easing=w(e),this.age=0,this.energy=1,this.dead=!1,this.parents=[],this.name="Behavior",this.applyBehavior=this.applyBehavior}reset(t,e){this.life=t||1/0,this.easing=e||w("easeLinear")}normalizeForce(t){return t.multiplyScalar(o)}normalizeValue(t){return t*o}initialize(t){}applyBehavior(t,e,n){if(this.age+=e,this.age>=this.life||this.dead)this.energy=0,this.dead=!0,this.destroy();else{const e=this.easing(t.age/t.life);this.energy=Math.max(1-e,0)}}destroy(){let t;const e=this.parents.length;for(t=0;t<e;t++)this.parents[t].removeBehavior(this);this.parents=[]}}class O extends S{constructor(t,e,n,r){super(n,r),this.reset(t,e),this.name="CrossZone",this.applyBehavior=this.applyBehavior}reset(t,e,n,r){this.zone=t,this.zone.crossType=Q.initValue(e,O.CROSS_TYPES.DEAD),n&&super.reset(n,r)}applyBehavior(t,e,n){super.applyBehavior(t,e,n),this.zone.crossing(t)}}O.CROSS_TYPES={CROSS:1,DEAD:4,BOUND:8};class P{constructor(){this.vector=new m(0,0),this.random=0,this.crossType=O.CROSS_TYPES.DEAD,this.alert=!0}getPosition(){}crossing(t){}}class R extends P{constructor(t,e,n){super(),this.x=t,this.y=e,this.radius=n,this.angle=0,this.center={x:this.x,y:this.y}}getPosition(){return this.random=Math.random(),this.angle=2*Math.PI*Math.random(),this.vector.x=this.x+this.random*this.radius*Math.cos(this.angle),this.vector.y=this.y+this.random*this.radius*Math.sin(this.angle),this.vector}setCenter(t,e){this.center.x=t,this.center.y=e}crossing(t){const e=t.p.distanceTo(this.center);this.crossType==O.CROSS_TYPES.DEAD?e-t.radius>this.radius&&(t.dead=!0):this.crossType==O.CROSS_TYPES.BOUND?e+t.radius>=this.radius&&this.getSymmetric(t):this.crossType==O.CROSS_TYPES.CROSS&&this.alert&&(console.error("Sorry CircleZone does not support cross method"),this.alert=!1)}getSymmetric(t){const e=t.v.getGradient(),n=2*(this.getGradient(t)-e),r=t.v.x,i=t.v.y;t.v.x=r*Math.cos(n)-i*Math.sin(n),t.v.y=r*Math.sin(n)+i*Math.cos(n)}getGradient(t){return-Math.PI/2+Math.atan2(t.p.y-this.center.y,t.p.x-this.center.x)}}class A extends P{constructor(t,e,n,r){super(),this.reset(t,e,n,r)}reset(t,e,n,r){this.imageData=t,this.x=e,this.y=n,this.d=r||2,this.vectors=[],this.setVectors()}setVectors(){let t,e;const n=this.imageData.width,r=this.imageData.height;for(t=0;t<n;t+=this.d)for(e=0;e<r;e+=this.d){const r=4*((e>>0)*n+(t>>0));this.imageData.data[r+3]>0&&this.vectors.push({x:t+this.x,y:e+this.y})}return this.vector}getBound(t,e){const n=4*((e>>0)*this.imageData.width+(t>>0));return this.imageData.data[n+3]>0}getPosition(){return this.vector.copy(this.vectors[Math.floor(Math.random()*this.vectors.length)])}getColor(t,e){t-=this.x;const n=4*(((e-=this.y)>>0)*this.imageData.width+(t>>0));return{r:this.imageData.data[n],g:this.imageData.data[n+1],b:this.imageData.data[n+2],a:this.imageData.data[n+3]}}crossing(t){"dead"==this.crossType?this.getBound(t.p.x-this.x,t.p.y-this.y)?t.dead=!0:t.dead=!1:"bound"==this.crossType&&(this.getBound(t.p.x-this.x,t.p.y-this.y)||t.v.negate())}}class I extends P{constructor(t,e,n,r,i){super(),n-t>=0?(this.x1=t,this.y1=e,this.x2=n,this.y2=r):(this.x1=n,this.y1=r,this.x2=t,this.y2=e),this.dx=this.x2-this.x1,this.dy=this.y2-this.y1,this.minx=Math.min(this.x1,this.x2),this.miny=Math.min(this.y1,this.y2),this.maxx=Math.max(this.x1,this.x2),this.maxy=Math.max(this.y1,this.y2),this.dot=this.x2*this.y1-this.x1*this.y2,this.xxyy=this.dx*this.dx+this.dy*this.dy,this.gradient=this.getGradient(),this.length=this.getLength(),this.direction=i||1}getPosition(){return this.random=Math.random(),this.vector.x=this.x1+this.random*this.length*Math.cos(this.gradient),this.vector.y=this.y1+this.random*this.length*Math.sin(this.gradient),this.vector}crossing(t){const e=this;this.crossType==O.CROSS_TYPES.DEAD?1==this.direction?this.getRange(t,(function(){e.getDirection(t.p.x,t.p.y)&&(t.dead=!0)})):this.getRange(t,(function(){e.getDirection(t.p.x,t.p.y)||(t.dead=!0)})):this.crossType==O.CROSS_TYPES.BOUND?this.getRange(t,(function(){e.getDistance(t.p.x,t.p.y)<=t.radius&&(0==e.dx?t.v.x*=-1:0==e.dy?t.v.y*=-1:e.getSymmetric(t.v))})):this.crossType==O.CROSS_TYPES.CROSS&&this.alert&&(console.error("Sorry lineZone does not support cross method"),this.alert=!1)}getDirection(t,e){const n=this.dy,r=-this.dx;return(n*t+r*e+this.dot)*(0==r?1:r)>0}getDistance(t,e){return(this.dy*t+-this.dx*e+this.dot)/Math.sqrt(this.xxyy)}getSymmetric(t){const e=t.getGradient(),n=2*(this.getGradient()-e),r=t.x,i=t.y;return t.x=r*Math.cos(n)-i*Math.sin(n),t.y=r*Math.sin(n)+i*Math.cos(n),t}getGradient(){return Math.atan2(this.dy,this.dx)}getRange(t,e){Math.abs(this.getGradient())<=Math.PI/4?t.p.x<this.maxx&&t.p.x>this.minx&&e():t.p.y<this.maxy&&t.p.y>this.miny&&e()}getLength(){return Math.sqrt(this.dx*this.dx+this.dy*this.dy)}}class C extends P{constructor(t,e){super(),this.x=t,this.y=e}getPosition(){return this.vector.x=this.x,this.vector.y=this.y,this.vector}crossing(t){this.alert&&(console.error("Sorry PointZone does not support crossing method"),this.alert=!1)}}class k extends P{constructor(t,e,n,r){super(),this.x=t,this.y=e,this.width=n,this.height=r}getPosition(){return this.vector.x=this.x+Math.random()*this.width,this.vector.y=this.y+Math.random()*this.height,this.vector}crossing(t){this.crossType==O.CROSS_TYPES.DEAD?function(t,e){return t.p.x+t.radius>=e.x&&t.p.x-t.radius<=e.x+e.width&&t.p.y+t.radius>=e.y&&t.p.y-t.radius<=e.y+e.height}(t,this)&&(t.dead=!0):this.crossType==O.CROSS_TYPES.BOUND?(t.p.x-t.radius<this.x?(t.p.x=this.x+t.radius,t.v.x*=-1):t.p.x+t.radius>this.x+this.width&&(t.p.x=this.x+this.width-t.radius,t.v.x*=-1),t.p.y-t.radius<this.y?(t.p.y=this.y+t.radius,t.v.y*=-1):t.p.y+t.radius>this.y+this.height&&(t.p.y=this.y+this.height-t.radius,t.v.y*=-1)):this.crossType==O.CROSS_TYPES.CROSS&&(t.p.x+t.radius<this.x&&t.v.x<=0?t.p.x=this.x+this.width+t.radius:t.p.x-t.radius>this.x+this.width&&t.v.x>=0&&(t.p.x=this.x-t.radius),t.p.y+t.radius<this.y&&t.v.y<=0?t.p.y=this.y+this.height+t.radius:t.p.y-t.radius>this.y+this.height&&t.v.y>=0&&(t.p.y=this.y-t.radius))}}class N{constructor(){}reset(){}init(t,e){e?this.initialize(e):this.initialize(t)}initialize(){}}class M{constructor(t,e){this.r=Math.abs(t)||0,this.tha=e||0}set(t,e){return this.r=t,this.tha=e,this}setR(t){return this.r=t,this}setTha(t){return this.tha=t,this}copy(t){return this.r=t.r,this.tha=t.tha,this}toVector(){return new m(this.getX(),this.getY())}getX(){return this.r*Math.sin(this.tha)}getY(){return-this.r*Math.cos(this.tha)}normalize(){return this.r=1,this}equals(t){return t.r===this.r&&t.tha===this.tha}toArray(){return[this.r,this.tha]}clear(){return this.r=0,this.tha=0,this}clone(){return new M(this.r,this.tha)}}class j extends N{constructor(t,e,n){super(),this.speed=new E(...t),this.angle=new E(...e),this.type=Q.initValue(n,"vector"),this.POLAR="polar",this.P="p",this.speedVal=this.speed.getValue(),this.normalizedPI=Math.PI/180}reset(t,e,n){this.speed=Q.setSpanValue(t),this.angle=Q.setSpanValue(e),this.type=Q.initValue(n,"vector")}normalizeVelocity(t){return t*o}initialize(t){if(this.type==this.P||this.type==this.P||this.type==this.POLAR){const e=b(this.angle.a,this.angle.b)*this.normalizedPI,n=new M(this.normalizeVelocity(this.speed.getValue()),e);t.v.x=n.getX(),t.v.y=n.getY()}else t.v.x=this.normalizeVelocity(this.speed.getValue()),t.v.y=this.normalizeVelocity(this.angle.getValue())}}class D extends N{constructor(t,e,n){super(),this.lifePan=Q.setSpanValue(t,e,n)}initialize(t){this.lifePan.a==1/0?t.life=1/0:t.life=this.lifePan.getValue()}}class L extends N{constructor(t,e,n){super(),this.massPan=Q.setSpanValue(t,e,n)}initialize(t){t.mass=this.massPan.getValue()}}class B extends N{constructor(t,e,n){super(),this.radius=Q.setSpanValue(t,e,n)}reset(t,e,n){this.radius=Q.setSpanValue(t,e,n)}initialize(t){t.radius=this.radius.getValue(),t.transform.oldRadius=t.radius}}class F extends N{constructor(t){super(),this.zone=t||new C}reset(t){this.zone=t||new C}initialize(t){this.zone.getPosition(),t.p.x=this.zone.vector.x,t.p.y=this.zone.vector.y}}class U extends S{constructor(t,e,n,r){super(n,r),this.skipUpdate=!1,this.reset(t,e,n,r)}reset(t,e,n,r){null==e&&(this.skipUpdate=!0),n&&super.reset(n,r)}}class G extends U{constructor(t,e,n,r){super(t,e,n,r),this.name="Alpha",this.applyBehavior=this.applyBehavior}reset(t,e,n,r){super.reset(t,e,n,r),this.a=Q.setSpanValue(t||1),this.skipUpdate||(this.b=Q.setSpanValue(e))}initialize(t){t.transform.alphaA=this.a.getValue(),this.skipUpdate?(t.transform.alphaB=t.transform.alphaA,t.alpha=t.transform.alphaA):t.transform.alphaB=this.b.getValue()}applyBehavior(t,e,n){this.skipUpdate||(super.applyBehavior(t,e,n),t.alpha=t.transform.alphaB+(t.transform.alphaA-t.transform.alphaB)*this.energy,t.alpha<.001&&(t.alpha=0))}}class H extends S{constructor(t,e,n,r,i){super(r,i),this.targetPosition=t||new m,this.radius=n||1e3,this.force=this.normalizeValue(e)||100,this.radiusSq=this.radius*this.radius,this.attractionForce=new m,this.lengthSq=0,this.name="Attraction",this.applyBehavior=this.applyBehavior}reset(t,e,n,r,i){this.targetPosition=t||new m,this.radius=n||1e3,this.force=this.normalizeValue(e)||100,this.radiusSq=this.radius*this.radius,this.attractionForce=new m,this.lengthSq=0,r&&super.reset(r,i)}applyBehavior(t,e,n){super.applyBehavior(t,e,n),this.attractionForce.copy(this.targetPosition),this.attractionForce.sub(t.p),this.lengthSq=this.attractionForce.lengthSq(),this.lengthSq>4e-6&&this.lengthSq<this.radiusSq&&(this.attractionForce.normalize(),this.attractionForce.multiplyScalar(1-this.lengthSq/this.radiusSq),this.attractionForce.multiplyScalar(this.force),t.a.add(this.attractionForce))}}class V extends S{constructor(t,e,n,r,i){super(r,i),this.reset(t,e,n),this.name="Collision",this.applyBehavior=this.applyBehavior}reset(t,e,n,r,i){this.emitter=t||null,this.mass=e||!0,this.callback=n||null,this.collisionPool=[],this.delta=new m,r&&super.reset(r,i)}applyBehavior(t,e,n){const r=this.emitter.particles.slice(n);let i,o,a,s,u;const c=r.length;for(let e=0;e<c;e++)if(i=r[e],i&&i!==t){this.delta.copy(i.p),this.delta.sub(t.p),o=this.delta.lengthSq();const e=t.radius+i.radius;if(o<=e*e){a=e-Math.sqrt(o),a+=.5;const n=t.mass+i.mass;s=this.mass?i.mass/n:.5,u=this.mass?t.mass/n:.5,t.p.add(this.delta.clone().normalize().multiplyScalar(a*-s)),i.p.add(this.delta.normalize().multiplyScalar(a*u)),this.callback&&this.callback(t,i)}}}}class X extends S{constructor(t,e,n,r){super(n,r),this.force=this.normalizeForce(new m(t,e)),this.name="Force",this.applyBehavior=this.applyBehavior}reset(t,e,n,r){this.force=this.normalizeForce(new m(t,e)),n&&super.reset(n,r)}applyBehavior(t,e,n){super.applyBehavior(t,e,n),t.a.add(this.force)}}class W extends X{constructor(t,e,n){super(0,t,e,n),this.name="Gravity",this.applyBehavior=this.applyBehavior}reset(t,e,n){super.reset(0,t,e,n)}}class Y extends S{constructor(t,e,n,r){super(n,r),this.distanceVec=new m,this.centerPoint=Q.initValue(t,new m),this.force=Q.initValue(this.normalizeValue(e),100),this.name="GravityWell",this.applyBehavior=this.applyBehavior}reset(t,e,n,r){this.distanceVec=new m,this.centerPoint=Q.initValue(t,new m),this.force=Q.initValue(this.normalizeValue(e),100),n&&super.reset(n,r)}initialize(t){}applyBehavior(t,e,n){this.distanceVec.set(this.centerPoint.x-t.p.x,this.centerPoint.y-t.p.y);const r=this.distanceVec.lengthSq();if(0!=r){const n=this.distanceVec.length(),i=this.force*e/(r*n);t.v.x+=i*this.distanceVec.x,t.v.y+=i*this.distanceVec.y}}}class z extends S{constructor(t,e,n,r,i){super(r,i),this.reset(t,e,n),this.time=0,this.name="RandomDrift",this.applyBehavior=this.applyBehavior}reset(t,e,n,r,i){this.panFoce=new m(t,e),this.panFoce=this.normalizeForce(this.panFoce),this.delay=n,r&&z._super_.prototype.reset.call(this,r,i)}applyBehavior(t,e,n){super.applyBehavior(t,e,n),this.time+=e,this.time>=this.delay&&(t.a.addXY(b(-this.panFoce.x,this.panFoce.x),b(-this.panFoce.y,this.panFoce.y)),this.time=0)}}class q extends H{constructor(t,e,n,r,i){super(t,e,n,r,i),this.force*=-1,this.name="Repulsion",this.applyBehavior=this.applyBehavior}reset(t,e,n,r,i){super.reset(t,e,n,r,i),this.force*=-1}}class K extends U{constructor(t,e,n,r,i){super(t,e,r,i),this.name="Rotate",this.applyBehavior=this.applyBehavior}reset(t,e,n,r,i){super.reset(t,e,r,i),this.a=Q.setSpanValue(t||K.TYPE.VELOCITY),this.skipUpdate||(this.b=Q.setSpanValue(e||0)),this.style=n||K.STYLES.TO}initialize(t){t.rotation=this.a.getValue(),t.transform.rotationA=this.a.getValue(),this.skipUpdate||(t.transform.rotationB=this.b.getValue())}applyBehavior(t,e,n){this.skipUpdate?this.a.a==K.TYPE.VELOCITY&&(t.rotation=t.getDirection()):(super.applyBehavior(t,e,n),this.style==K.STYLES.TO?t.rotation=t.transform.rotationB+(t.transform.rotationA-t.transform.rotationB)*this.energy:t.rotation+=t.transform.rotationB)}}K.STYLES={TO:1,FROM:2},K.TYPE={VELOCITY:1};class Z extends U{constructor(t,e,n,r){super(t,e,n,r),this.name="Scale",this.applyBehavior=this.applyBehavior}reset(t,e,n,r){super.reset(t,e,n,r),this.a=Q.setSpanValue(Q.initValue(t,1)),this.skipUpdate||(this.b=Q.setSpanValue(e))}initialize(t){t.transform.scaleA=this.a.getValue(),t.transform.oldRadius=t.radius,this.skipUpdate?(t.transform.scaleB=t.transform.scaleA,t.scale=t.transform.scaleA,t.radius=t.transform.oldRadius*t.transform.scaleA):t.transform.scaleB=this.b.getValue()}applyBehavior(t,e,n){this.skipUpdate||(super.applyBehavior(t,e,n),t.scale=t.transform.scaleB+(t.transform.scaleA-t.transform.scaleB)*this.energy,t.scale<1e-4&&(t.scale=0),t.radius=t.transform.oldRadius*t.scale)}}const $={hexToRgb(t){const e="#"===t.charAt(0)?t.substring(1,7):t;return{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16)}},rgbToHex:t=>`rgb(${t.r}, ${t.g}, ${t.b})`,getHex16FromParticle:t=>65536*Number(t.rgb.r)+256*Number(t.rgb.g)+Number(t.rgb.b)};class J extends U{constructor(t,e,n,r){super(t,e,n,r),this.name="Color"}reset(t,e,n,r){super.reset(t,e,n,r),this.a=Q.setSpanValue(t),this.skipUpdate||(this.b=Q.setSpanValue(e))}initialize(t){t.color=this.a.getValue(),t.data.colorA=$.hexToRgb(t.color),this.skipUpdate||(t.data.colorB=$.hexToRgb(this.b.getValue()))}applyBehavior(t,e,n){super.applyBehavior(t,e,n),this.skipUpdate?(t.rgb.r=t.data.colorA.r,t.rgb.g=t.data.colorA.g,t.rgb.b=t.data.colorA.b):(t.rgb.r=t.data.colorB.r+(t.data.colorA.r-t.data.colorB.r)*this.energy,t.rgb.g=t.data.colorB.g+(t.data.colorA.g-t.data.colorB.g)*this.energy,t.rgb.b=t.data.colorB.b+(t.data.colorA.b-t.data.colorB.b)*this.energy,t.rgb.r=~~t.rgb.r,t.rgb.g=~~t.rgb.g,t.rgb.b=~~t.rgb.b)}}const Q={initValue:(t,e)=>null!=t&&null!=t?t:e,getVector2D:(t,e)=>"object"==typeof t?t:new m(t,e),judgeVector2D(t){let e="";return(t.hasOwnProperty("x")||t.hasOwnProperty("y")||t.hasOwnProperty("p")||t.hasOwnProperty("position"))&&(e+="p"),(t.hasOwnProperty("vx")||t.hasOwnProperty("vx")||t.hasOwnProperty("v")||t.hasOwnProperty("velocity"))&&(e+="v"),(t.hasOwnProperty("ax")||t.hasOwnProperty("ax")||t.hasOwnProperty("a")||t.hasOwnProperty("accelerate"))&&(e+="a"),e},setVector2DByObject(t,e){e.x&&(t.p.x=e.x),e.y&&(t.p.y=e.y),e.vx&&(t.v.x=e.vx),e.vy&&(t.v.y=e.vy),e.ax&&(t.a.x=e.ax),e.ay&&(t.a.y=e.ay)},setSpanValue:(t,e,n)=>t.constructor===E?t:e?n?new E(t,e,n):new E(t,e):new E(t),getSpanValue:t=>t.constructor===E?t.getValue():t,addInitializers(t,{initializers:e,emitterGuide:n,emitterGuideType:r}){if(!e)return;const{life:i,mass:o,radius:a,velocity:s}=e;if(n){const{width:e,height:i}=n;let o;switch(r){case"circle":o=new R(0,0,e/2);break;case"rect":case"rectangle":o=new k(0,0,e,i)}o&&t.addInitialize(new F(o))}i&&t.addInitialize(new D(...i)),o&&t.addInitialize(new L(...o)),a&&t.addInitialize(new B(...a)),s&&(s.speed=[].concat(s.speed),t.addInitialize(new j(s.speed,s.angle,"polar")))},addBehaviors(t,{behaviors:e}){if(!e)return;const{zone:n,boundingZone:r,deadZone:i,alpha:o,attraction:a,collision:s,gravity:u,gravityWell:c,randomDrift:l,repulsion:h,rotation:f,scale:p,color:d}=e;r&&t.addBehavior(tt(["bounding",...r])),i&&t.addBehavior(tt(["dead",...i])),n&&t.addBehavior(tt(n)),o&&t.addBehavior(new G(o.from,o.to)),a&&t.addBehavior(new H(new m(...a.center),a.force,a.radius)),u&&t.addBehavior(new W(...u)),c&&t.addBehavior(new Y(new m(...c.center),c.force)),l&&t.addBehavior(new z(l.x,l.y,l.delay)),h&&t.addBehavior(new q(new m(...h.center),h.force,h.radius)),f&&t.addBehavior(new K(f.from,f.to)),p&&t.addBehavior(new Z(p.from,p.to)),d&&t.addBehavior(new J(d.from,d.to))}};function tt(t){let e,n,[r,i,o,a,s,u]=t;if(t.guide){const e=t.guide.getBounds();r=t.type,i="rect",o=e.x,a=e.y,s=e.width,u=e.height,t.guide.visible=!1}switch(r){case"bounding":n=O.CROSS_TYPES.BOUND;break;case"dead":n=O.CROSS_TYPES.DEAD}switch(i){case"circle":e=new R(o,a,s/2);break;case"rect":e=new k(o,a,s,u)}return new O(e,n)}class et{constructor(t,e){this.amount=new E(...t),this.interval=new E(...e),this.startTime=0,this.nextTime=0,this.init()}init(){this.startTime=0,this.nextTime=this.interval.getValue()}getValue(t,e=!1){return this.startTime+=t,this.startTime>=this.nextTime||e?(this.startTime=0,this.nextTime=this.interval.getValue(),1==this.amount.b?this.amount.getValue(!1)>.5?1:0:this.amount.getValue(!0)):0}}class nt{constructor(t){this.type=t||a,this.integrate=this.integrate,this.eulerIntegrate=this.eulerIntegrate}integrate(t,e,n){this.eulerIntegrate(t,e,n)}eulerIntegrate(t,e,n){t.sleep||(t.old.p.copy(t.p),t.old.v.copy(t.v),t.a.multiplyScalar(1/t.mass),t.v.add(t.a.multiplyScalar(e)),t.p.add(t.old.v.multiplyScalar(e)),n&&t.v.multiplyScalar(n),t.a.clear())}}function rt(t,e,n){Q.setVector2DByObject(e,n)}var it=r(940),ot=r.n(it);class at extends g{constructor(t){super(),this._isFirstEmit=!0,this.initializes=[],this.behaviors=[],this.emitTime=0,this.emitTotalTimes=-1,this.isEmitting=!0,this.damping=.006,this.bindEmitter=!0,this.rate=null,this.config=t,this.integrator=new nt,this.maxParticles=t.maxParticles||5e4,this.particles=[],this.particleCreated=new(ot()),this.particleUpdate=new(ot()),this.particleDead=new(ot()),this.update=this.update,this.emitting=this.emitting,this.createParticle=this.createParticle,this.integrate=this.integrate,this.updateParticle=this.updateParticle}set config(t){t.rate&&(this.rate=new et(t.rate.amount,t.rate.interval)),t.initializers&&(this.removeInitializers(),Q.addInitializers(this,t)),t.behaviors&&(this.removeAllBehaviors(),Q.addBehaviors(this,t))}createParticle(t){const e=this.particles.length;if(e===this.maxParticles)return;const n=new g;this.particles.push(n),n.reset(),function(t,e,n){const r=n.length;for(let i=0;i<r;i++){const r=n[i];r instanceof N?r.init(t,e):rt(0,e,r)}!function(t,e){t.bindEmitter&&(e.p.add(t.p),e.v.add(t.v),e.a.add(t.a),e.v.rotate(t.rotation*Math.PI/180))}(t,e)}(this,n,this.initializes),n.addBehaviors(this.behaviors),n.update(e,t),this.particleCreated.dispatch(n)}updateParticle(t,e,n,r){const i=t.update(e,n);return this.integrator.integrate(t,n,r),i?this.particleUpdate.dispatch(t):this.particleDead.dispatch(t),i}integrate(t){const e=1-this.damping;this.integrator.integrate(this,t,e);for(let n=this.particles.length-1;n>=0;n--)this.updateParticle(this.particles[n],n,t,e)||this.particles.splice(n,1)}emitting(t){if(this.emitTime+=t,this.emitTime<this.emitTotalTimes){const e=this.rate.getValue(t,this._isFirstEmit);this._isFirstEmit&&(this._isFirstEmit=!1);for(let n=0;n<e;n++)this.createParticle(t)}}emit(t,e){this.isEmitting=!0,this.emitTime=0,this.emitTotalTimes=t||1/0,isNaN(e)||(this.life=e),this.rate.init()}stopEmit(){this.isEmitting=!1,this.emitTotalTimes=-1,this.emitTime=0}removeAllParticles(){for(let t=this.particles.length-1;t>=0;t--)this.particles[t].dead=!0}addSelfInitialize(t){t.init?t.init(this):this.initAll()}addInitialize(){const t=arguments.length;for(let e=0;e<t;e++)this.initializes.push(arguments[e])}removeInitialize(t){const e=this.initializes.indexOf(t);e>-1&&this.initializes.splice(e,1)}removeInitializers(){this.initializes.length=0}addBehavior(){const t=arguments.length;for(let e=0;e<t;e++)this.behaviors.push(arguments[e]),arguments[e].hasOwnProperty("parents")&&arguments[e].parents.push(this)}removeBehavior(t){const e=this.behaviors.indexOf(t);e>-1&&this.behaviors.splice(e,1)}removeAllBehaviors(){this.behaviors.length=0}update(t){this.age+=t,(this.dead||this.age>=this.life)&&this.destroy(),this.emitting(t),this.integrate(t)}destroy(){this.isEmitting=!1,this.dead=!0,this.emitTotalTimes=-1,this.removeInitializers(),this.removeAllBehaviors(),this.parent&&this.parent.removeEmitter(this)}}function st(t,e,n){return new E(t,e,n)}const ut=Q.addInitializers,ct=Q.addBehaviors})(),t.exports=i})()},"./node_modules/@pixi/canvas-mesh/dist/esm/canvas-mesh.js":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return Dn}));var r=n("./node_modules/@pixi/settings/dist/esm/settings.js"),i=n("./node_modules/@pixi/constants/dist/esm/constants.js"),o=n("./node_modules/@pixi/canvas-renderer/dist/esm/canvas-renderer.js"),a=n("./node_modules/@pixi/mesh/dist/esm/mesh.js"),s=n("./node_modules/@pixi/mesh-extras/dist/esm/mesh-extras.js"),u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function c(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}var l=c((function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||t,a),u=n?n+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},s.prototype.emit=function(t,e,r,i,o,a){var s=arguments,u=n?n+t:t;if(!this._events[u])return!1;var c,l,h=this._events[u],f=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),f){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,r),!0;case 4:return h.fn.call(h.context,e,r,i),!0;case 5:return h.fn.call(h.context,e,r,i,o),!0;case 6:return h.fn.call(h.context,e,r,i,o,a),!0}for(l=1,c=new Array(f-1);l<f;l++)c[l-1]=s[l];h.fn.apply(h.context,c)}else{var p,d=h.length;for(l=0;l<d;l++)switch(h[l].once&&this.removeListener(t,h[l].fn,void 0,!0),f){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,e);break;case 3:h[l].fn.call(h[l].context,e,r);break;case 4:h[l].fn.call(h[l].context,e,r,i);break;default:if(!c)for(p=1,c=new Array(f-1);p<f;p++)c[p-1]=s[p];h[l].fn.apply(h[l].context,c)}}return!0},s.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==e||i&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})),h=c((function(t,e){!function(n){var r=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,o="object"==typeof u&&u;o.global!==o&&o.window!==o&&o.self!==o||(n=o);var a,s,c=2147483647,l=/^xn--/,h=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,y=String.fromCharCode;function m(t){throw RangeError(p[t])}function v(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function _(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+v((t=t.replace(f,".")).split("."),e).join(".")}function g(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function b(t){return v(t,(function(t){var e="";return t>65535&&(e+=y((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=y(t)})).join("")}function E(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function T(t,e,n){var r=0;for(t=n?d(t/700):t>>1,t+=d(t/e);t>455;r+=36)t=d(t/35);return d(r+36*t/(t+38))}function w(t){var e,n,r,i,o,a,s,u,l,h,f,p=[],y=t.length,v=0,_=128,g=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&m("not-basic"),p.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<y;){for(o=v,a=1,s=36;i>=y&&m("invalid-input"),((u=(f=t.charCodeAt(i++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:36)>=36||u>d((c-v)/a))&&m("overflow"),v+=u*a,!(u<(l=s<=g?1:s>=g+26?26:s-g));s+=36)a>d(c/(h=36-l))&&m("overflow"),a*=h;g=T(v-o,e=p.length+1,0==o),d(v/e)>c-_&&m("overflow"),_+=d(v/e),v%=e,p.splice(v++,0,_)}return b(p)}function x(t){var e,n,r,i,o,a,s,u,l,h,f,p,v,_,b,w=[];for(p=(t=g(t)).length,e=128,n=0,o=72,a=0;a<p;++a)(f=t[a])<128&&w.push(y(f));for(r=i=w.length,i&&w.push("-");r<p;){for(s=c,a=0;a<p;++a)(f=t[a])>=e&&f<s&&(s=f);for(s-e>d((c-n)/(v=r+1))&&m("overflow"),n+=(s-e)*v,e=s,a=0;a<p;++a)if((f=t[a])<e&&++n>c&&m("overflow"),f==e){for(u=n,l=36;!(u<(h=l<=o?1:l>=o+26?26:l-o));l+=36)b=u-h,_=36-h,w.push(y(E(h+b%_,0))),u=d(b/_);w.push(y(E(u,0))),o=T(n,v,r==i),n=0,++r}++n,++e}return w.join("")}if(a={version:"1.3.2",ucs2:{decode:g,encode:b},decode:w,encode:x,toASCII:function(t){return _(t,(function(t){return h.test(t)?"xn--"+x(t):t}))},toUnicode:function(t){return _(t,(function(t){return l.test(t)?w(t.slice(4).toLowerCase()):t}))}},r&&i)if(t.exports==r)i.exports=a;else for(s in a)a.hasOwnProperty(s)&&(r[s]=a[s]);else n.punycode=a}(u)})),f=function(t){return"string"==typeof t},p=function(t){return"object"==typeof t&&null!==t},d=function(t){return null===t},y=function(t){return null==t};function m(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var v=function(t,e,n,r){e=e||"&",n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var s=t.length;a>0&&s>a&&(s=a);for(var u=0;u<s;++u){var c,l,h,f,p=t[u].replace(o,"%20"),d=p.indexOf(n);d>=0?(c=p.substr(0,d),l=p.substr(d+1)):(c=p,l=""),h=decodeURIComponent(c),f=decodeURIComponent(l),m(i,h)?Array.isArray(i[h])?i[h].push(f):i[h]=[i[h],f]:i[h]=f}return i},_=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},g=function(t,e,n,r){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(r){var i=encodeURIComponent(_(r))+n;return Array.isArray(t[r])?t[r].map((function(t){return i+encodeURIComponent(_(t))})).join(e):i+encodeURIComponent(_(t[r]))})).join(e):r?encodeURIComponent(_(r))+n+encodeURIComponent(_(t)):""},b=c((function(t,e){e.decode=e.parse=v,e.encode=e.stringify=g})),E=L,T=function(t,e){return L(t,!1,!0).resolve(e)},w=function(t){f(t)&&(t=L(t));if(!(t instanceof x))return x.prototype.format.call(t);return t.format()};function x(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var S=/^([a-z0-9.+-]+:)/i,O=/:[0-9]*$/,P=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,R=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),A=["'"].concat(R),I=["%","/","?",";","#"].concat(A),C=["/","?","#"],k=/^[+a-z0-9A-Z_-]{0,63}$/,N=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,M={javascript:!0,"javascript:":!0},j={javascript:!0,"javascript:":!0},D={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function L(t,e,n){if(t&&p(t)&&t instanceof x)return t;var r=new x;return r.parse(t,e,n),r}x.prototype.parse=function(t,e,n){if(!f(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=-1!==r&&r<t.indexOf("#")?"?":"#",o=t.split(i);o[0]=o[0].replace(/\\/g,"/");var a=t=o.join(i);if(a=a.trim(),!n&&1===t.split("#").length){var s=P.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=e?b.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=S.exec(a);if(u){var c=(u=u[0]).toLowerCase();this.protocol=c,a=a.substr(u.length)}if(n||u||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===a.substr(0,2);!l||u&&j[u]||(a=a.substr(2),this.slashes=!0)}if(!j[u]&&(l||u&&!D[u])){for(var p,d,y=-1,m=0;m<C.length;m++){-1!==(v=a.indexOf(C[m]))&&(-1===y||v<y)&&(y=v)}-1!==(d=-1===y?a.lastIndexOf("@"):a.lastIndexOf("@",y))&&(p=a.slice(0,d),a=a.slice(d+1),this.auth=decodeURIComponent(p)),y=-1;for(m=0;m<I.length;m++){var v;-1!==(v=a.indexOf(I[m]))&&(-1===y||v<y)&&(y=v)}-1===y&&(y=a.length),this.host=a.slice(0,y),a=a.slice(y),this.parseHost(),this.hostname=this.hostname||"";var _="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!_)for(var g=this.hostname.split(/\./),E=(m=0,g.length);m<E;m++){var T=g[m];if(T&&!T.match(k)){for(var w="",x=0,O=T.length;x<O;x++)T.charCodeAt(x)>127?w+="x":w+=T[x];if(!w.match(k)){var R=g.slice(0,m),L=g.slice(m+1),B=T.match(N);B&&(R.push(B[1]),L.unshift(B[2])),L.length&&(a="/"+L.join(".")+a),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),_||(this.hostname=h.toASCII(this.hostname));var F=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+F,this.href+=this.host,_&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!M[c])for(m=0,E=A.length;m<E;m++){var G=A[m];if(-1!==a.indexOf(G)){var H=encodeURIComponent(G);H===G&&(H=escape(G)),a=a.split(G).join(H)}}var V=a.indexOf("#");-1!==V&&(this.hash=a.substr(V),a=a.slice(0,V));var X=a.indexOf("?");if(-1!==X?(this.search=a.substr(X),this.query=a.substr(X+1),e&&(this.query=b.parse(this.query)),a=a.slice(0,X)):e&&(this.search="",this.query={}),a&&(this.pathname=a),D[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var W=this.search||"";this.path=F+W}return this.href=this.format(),this},x.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&p(this.query)&&Object.keys(this.query).length&&(o=b.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||D[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+i+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},x.prototype.resolve=function(t){return this.resolveObject(L(t,!1,!0)).format()},x.prototype.resolveObject=function(t){if(f(t)){var e=new x;e.parse(t,!1,!0),t=e}for(var n=new x,r=Object.keys(this),i=0;i<r.length;i++){var o=r[i];n[o]=this[o]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),s=0;s<a.length;s++){var u=a[s];"protocol"!==u&&(n[u]=t[u])}return D[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!D[t.protocol]){for(var c=Object.keys(t),l=0;l<c.length;l++){var h=c[l];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||j[t.protocol])n.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var m=n.pathname||"",v=n.search||"";n.path=m+v}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var _=n.pathname&&"/"===n.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=g||_||n.host&&t.pathname,E=b,T=n.pathname&&n.pathname.split("/")||[],w=(p=t.pathname&&t.pathname.split("/")||[],n.protocol&&!D[n.protocol]);if(w&&(n.hostname="",n.port=null,n.host&&(""===T[0]?T[0]=n.host:T.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),b=b&&(""===p[0]||""===T[0])),g)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,T=p;else if(p.length)T||(T=[]),T.pop(),T=T.concat(p),n.search=t.search,n.query=t.query;else if(!y(t.search)){if(w)n.hostname=n.host=T.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift());return n.search=t.search,n.query=t.query,d(n.pathname)&&d(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!T.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=T.slice(-1)[0],O=(n.host||t.host||T.length>1)&&("."===S||".."===S)||""===S,P=0,R=T.length;R>=0;R--)"."===(S=T[R])?T.splice(R,1):".."===S?(T.splice(R,1),P++):P&&(T.splice(R,1),P--);if(!b&&!E)for(;P--;P)T.unshift("..");!b||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),O&&"/"!==T.join("/").substr(-1)&&T.push("");var A,I=""===T[0]||T[0]&&"/"===T[0].charAt(0);w&&(n.hostname=n.host=I?"":T.length?T.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift()));return(b=b||n.host&&T.length)&&!I&&T.unshift(""),T.length?n.pathname=T.join("/"):(n.pathname=null,n.path=null),d(n.pathname)&&d(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},x.prototype.parseHost=function(){var t=this.host,e=O.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};
/*!
 * @pixi/utils - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var B={parse:E,format:w,resolve:T};r.b.RETINA_PREFIX=/@([0-9\.]+)x/,r.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var F,U=!1;var G=function(){for(var t=[],e=[],n=0;n<32;n++)t[n]=n,e[n]=n;t[i.b.NORMAL_NPM]=i.b.NORMAL,t[i.b.ADD_NPM]=i.b.ADD,t[i.b.SCREEN_NPM]=i.b.SCREEN,e[i.b.NORMAL]=i.b.NORMAL_NPM,e[i.b.ADD]=i.b.ADD_NPM,e[i.b.SCREEN]=i.b.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();function H(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}function V(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function X(t){return!(t&t-1||!t)}function W(t){var e=(t>65535?1:0)<<4,n=((t>>>=e)>255?1:0)<<3;return e|=n,e|=n=((t>>>=n)>15?1:0)<<2,(e|=n=((t>>>=n)>3?1:0)<<1)|(t>>>=n)>>1}var Y=0;function z(){return++Y}var q={};function K(t,e,n){if(void 0===n&&(n=3),!q[e]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),q[e]=!0}}var Z,$={},J=Object.create(null),Q=Object.create(null);!function(){function t(t,e,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||r.b.RESOLUTION,this.resize(t,e)}t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0})}();function tt(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,Z||(Z=document.createElement("a")),Z.href=t;var n=B.parse(Z.href),r=!n.port&&""===e.port||n.port===e.port;return n.hostname===e.hostname&&r&&n.protocol===e.protocol?"":"anonymous"}function et(t,e){var n=r.b.RETINA_PREFIX.exec(t);return n?parseFloat(n[1]):void 0!==e?e:1}
/*!
 * @pixi/runner - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */var nt,rt=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,n,r,i,o,a,s){if(arguments.length>8)throw new Error("max arguments reached");var u=this,c=u.name,l=u.items;this._aliasCount++;for(var h=0,f=l.length;h<f;h++)l[h][c](t,e,n,r,i,o,a,s);return l===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(rt.prototype,{dispatch:{value:rt.prototype.emit},run:{value:rt.prototype.emit}}),
/*!
 * @pixi/ticker - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
r.b.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(nt||(nt={}));var it,ot=function(){function t(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=0),void 0===r&&(r=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=n,this.once=r}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),at=function(){function t(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ot(null,null,1/0),this.deltaMS=1/r.b.TARGET_FPMS,this.elapsedMS=1/r.b.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,n){return void 0===n&&(n=nt.NORMAL),this._addListener(new ot(t,e,n))},t.prototype.addOnce=function(t,e,n){return void 0===n&&(n=nt.NORMAL),this._addListener(new ot(t,e,n,!0))},t.prototype._addListener=function(t){var e=this._head.next,n=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}else t.connect(n);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var n=this._head.next;n;)n=n.match(t,e)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*r.b.TARGET_FPMS;for(var i=this._head,o=i.next;o;)o=o.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,e)/1e3,r.b.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),st=2*Math.PI;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(it||(it={}));var ut=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=Number(t),this.y=Number(e),this.width=Number(n),this.height=Number(r),this.type=it.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(n-e,0),this.y=r,this.height=Math.max(i-r,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var n=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=n-this.x,this.height=r-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=n-e,this.y=r,this.height=i-r,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),ct=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),lt=function(){function t(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this._x=n,this._y=r,this.cb=t,this.scope=e}return t.prototype.clone=function(e,n){return void 0===e&&(e=this.cb),void 0===n&&(n=this.scope),new t(e,n,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),ht=function(){function t(t,e,n,r,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,n,r,i,o){return this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},t.prototype.apply=function(t,e){e=e||new ct;var n=t.x,r=t.y;return e.x=this.a*n+this.c*r+this.tx,e.y=this.b*n+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new ct;var n=1/(this.a*this.d+this.c*-this.b),r=t.x,i=t.y;return e.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this.a,i=this.c,o=this.tx;return this.a=r*e-this.b*n,this.b=r*n+this.b*e,this.c=i*e-this.d*n,this.d=i*n+this.d*e,this.tx=o*e-this.ty*n,this.ty=o*n+this.ty*e,this},t.prototype.append=function(t){var e=this.a,n=this.b,r=this.c,i=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*n+t.b*i,this.c=t.c*e+t.d*r,this.d=t.c*n+t.d*i,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*i+this.ty,this},t.prototype.setTransform=function(t,e,n,r,i,o,a,s,u){return this.a=Math.cos(a+u)*i,this.b=Math.sin(a+u)*i,this.c=-Math.sin(a-s)*o,this.d=Math.cos(a-s)*o,this.tx=t-(n*this.a+r*this.c),this.ty=e-(n*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,r=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,o=t.pivot,a=-Math.atan2(-r,i),s=Math.atan2(n,e),u=Math.abs(a+s);return u<1e-5||Math.abs(st-u)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=s),t.scale.x=Math.sqrt(e*e+n*n),t.scale.y=Math.sqrt(r*r+i*i),t.position.x=this.tx+(o.x*e+o.y*r),t.position.y=this.ty+(o.x*n+o.y*i),t},t.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.tx,o=t*r-e*n;return this.a=r/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(t*this.ty-e*i)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),ft=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],pt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],dt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],yt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],mt=[],vt=[],_t=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];mt.push(e);for(var n=0;n<16;n++)for(var r=_t(ft[t]*ft[n]+dt[t]*pt[n]),i=_t(pt[t]*ft[n]+yt[t]*pt[n]),o=_t(ft[t]*dt[n]+dt[t]*yt[n]),a=_t(pt[t]*dt[n]+yt[t]*yt[n]),s=0;s<16;s++)if(ft[s]===r&&pt[s]===i&&dt[s]===o&&yt[s]===a){e.push(s);break}}for(t=0;t<16;t++){var u=new ht;u.set(ft[t],pt[t],dt[t],yt[t],0,0),vt.push(u)}}();var gt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return ft[t]},uY:function(t){return pt[t]},vX:function(t){return dt[t]},vY:function(t){return yt[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return mt[t][e]},sub:function(t,e){return mt[t][gt.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?gt.S:gt.N:2*Math.abs(e)<=Math.abs(t)?t>0?gt.E:gt.W:e>0?t>0?gt.SE:gt.SW:t>0?gt.NE:gt.NW},matrixAppendRotationInv:function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=vt[gt.inv(e)];i.tx=n,i.ty=r,t.append(i)}};!function(){function t(){this.worldTransform=new ht,this.localTransform=new ht,this.position=new lt(this.onChange,this,0,0),this.scale=new lt(this.onChange,this,1,1),this.pivot=new lt(this.onChange,this,0,0),this.skew=new lt(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t}();
/*!
 * @pixi/core - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
r.b.PREFER_ENV=r.a.any?i.g.WEBGL:i.g.WEBGL2,r.b.STRICT_TEXTURE_CACHE=!1;var bt=[];function Et(t,e){if(!t)return null;var n="";if("string"==typeof t){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(n=r[1].toLowerCase())}for(var i=bt.length-1;i>=0;--i){var o=bt[i];if(o.test&&o.test(t,n))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Tt=function(t,e){return(Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function wt(t,e){function n(){this.constructor=t}Tt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var xt=function(){return(xt=Object.assign||function(t){for(var e,n=arguments,r=1,i=arguments.length;r<i;r++)for(var o in e=n[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var St=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new rt("setRealSize"),this.onUpdate=new rt("update"),this.onError=new rt("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,n){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),Ot=function(t){function e(e,n){var r=this,i=n||{},o=i.width,a=i.height;if(!o||!a)throw new Error("BufferResource width or height invalid");return(r=t.call(this,o,a)||this).data=e,r}return wt(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.a.UNPACK);var o=e.realWidth,a=e.realHeight;return n.width===o&&n.height===a?r.texSubImage2D(e.target,0,0,0,o,a,e.format,n.type,this.data):(n.width=o,n.height=a,r.texImage2D(e.target,0,n.internalFormat,o,a,0,e.format,n.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(St),Pt={scaleMode:i.p.NEAREST,format:i.h.RGBA,alphaMode:i.a.NPM},Rt=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var o=t.call(this)||this,a=(n=n||{}).alphaMode,s=n.mipmap,u=n.anisotropicLevel,c=n.scaleMode,l=n.width,h=n.height,f=n.wrapMode,p=n.format,d=n.type,y=n.target,m=n.resolution,v=n.resourceOptions;return!e||e instanceof St||((e=Et(e,v)).internal=!0),o.resolution=m||r.b.RESOLUTION,o.width=Math.round((l||0)*o.resolution)/o.resolution,o.height=Math.round((h||0)*o.resolution)/o.resolution,o._mipmap=void 0!==s?s:r.b.MIPMAP_TEXTURES,o.anisotropicLevel=void 0!==u?u:r.b.ANISOTROPIC_LEVEL,o._wrapMode=f||r.b.WRAP_MODE,o._scaleMode=void 0!==c?c:r.b.SCALE_MODE,o.format=p||i.h.RGBA,o.type=d||i.r.UNSIGNED_BYTE,o.target=y||i.q.TEXTURE_2D,o.alphaMode=void 0!==a?a:i.a.UNPACK,o.uid=z(),o.touched=0,o.isPowerOfTwo=!1,o._refreshPOT(),o._glTextures={},o.dirtyId=0,o.dirtyStyleId=0,o.cacheId=null,o.valid=l>0&&h>0,o.textureCacheIds=[],o.destroyed=!1,o.resource=null,o._batchEnabled=0,o._batchLocation=0,o.parentTextureArray=null,o.setResource(e),o}return wt(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var n;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,n){return n=n||this.resolution,this.setRealSize(t*n,e*n,n)},e.prototype.setRealSize=function(t,e,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=X(this.realWidth)&&X(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Q[this.cacheId],delete J[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,n,i){void 0===i&&(i=r.b.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;if(o)a=t;else{if(!t._pixiId){var s=n&&n.pixiIdPrefix||"pixiid";t._pixiId=s+"_"+z()}a=t._pixiId}var u=Q[a];if(o&&i&&!u)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return u||((u=new e(t,n)).cacheId=a,e.addToCache(u,a)),u},e.fromBuffer=function(t,n,r,o){t=t||new Float32Array(n*r*4);var a=new Ot(t,{width:n,height:r}),s=t instanceof Float32Array?i.r.FLOAT:i.r.UNSIGNED_BYTE;return new e(a,Object.assign(Pt,o||{width:n,height:r,type:s}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),Q[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),Q[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=Q[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete Q[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete Q[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(l),At=function(t){function e(e,n){var r=this,i=n||{},o=i.width,a=i.height;(r=t.call(this,o,a)||this).items=[],r.itemDirtyIds=[];for(var s=0;s<e;s++){var u=new Rt;r.items.push(u),r.itemDirtyIds.push(-2)}return r.length=e,r._load=null,r.baseTexture=null,r}return wt(e,t),e.prototype.initFromArray=function(t,e){for(var n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof St?this.addResourceAt(t[n],n):this.addResourceAt(Et(t[n],e),n))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],n=e.realWidth,r=e.realHeight;return t.resize(n,r),Promise.resolve(t)})),this._load},e}(St),It=function(t){function e(e,n){var r,i,o=this,a=n||{},s=a.width,u=a.height;return Array.isArray(e)?(r=e,i=e.length):i=e,o=t.call(this,i,{width:s,height:u})||this,r&&o.initFromArray(r,n),o}return wt(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=i.q.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,n){var r=this.length,i=this.itemDirtyIds,o=this.items,a=t.gl;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,r,0,e.format,n.type,null);for(var s=0;s<r;s++){var u=o[s];i[s]<u.dirtyId&&(i[s]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,s,u.resource.width,u.resource.height,1,e.format,n.type,u.resource.source))}return!0},e}(At),Ct=function(t){function e(e){var n=this,r=e,i=r.naturalWidth||r.videoWidth||r.width,o=r.naturalHeight||r.videoHeight||r.height;return(n=t.call(this,i,o)||this).source=e,n.noSubImage=!1,n}return wt(e,t),e.crossOrigin=function(t,e,n){void 0===n&&0!==e.indexOf("data:")?t.crossOrigin=tt(e):!1!==n&&(t.crossOrigin="string"==typeof n?n:"anonymous")},e.prototype.upload=function(t,e,n,r){var o=t.gl,a=e.realWidth,s=e.realHeight;return r=r||this.source,o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.a.UNPACK),this.noSubImage||e.target!==o.TEXTURE_2D||n.width!==a||n.height!==s?(n.width=a,n.height=s,o.texImage2D(e.target,0,n.internalFormat,e.format,n.type,r)):o.texSubImage2D(o.TEXTURE_2D,0,0,0,e.format,n.type,r),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,n=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(n,r),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(St),kt=function(t){function e(e){return t.call(this,e)||this}return wt(e,t),e.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(Ct),Nt=function(t){function e(n,r){var o=this,a=r||{},s=a.width,u=a.height,c=a.autoLoad,l=a.linkBaseTexture;if(n&&n.length!==e.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");o=t.call(this,6,{width:s,height:u})||this;for(var h=0;h<e.SIDES;h++)o.items[h].target=i.q.TEXTURE_CUBE_MAP_POSITIVE_X+h;return o.linkBaseTexture=!1!==l,n&&o.initFromArray(n,r),!1!==c&&o.load(),o}return wt(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=i.q.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,n){if(void 0===n&&(n=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=i.q.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,n,r){for(var i=this.itemDirtyIds,o=0;o<e.SIDES;o++){var a=this.items[o];i[o]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(t,a,r),i[o]=a.dirtyId):i[o]<-1&&(t.gl.texImage2D(a.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),i[o]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(At),Mt=function(t){function e(e,n){var i=this;if(n=n||{},!(e instanceof HTMLImageElement)){var o=new Image;Ct.crossOrigin(o,e,n.crossorigin),o.src=e,e=o}return i=t.call(this,e)||this,!e.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=e.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==n.createBitmap?n.createBitmap:r.b.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,i.bitmap=null,i._load=null,!1!==n.autoLoad&&i.load(),i}return wt(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,n){var r=e.source;e.url=r.src;var i=function(){e.destroyed||(r.onload=null,r.onerror=null,e.resize(r.width,r.height),e._load=null,e.createBitmap?t(e.process()):t(e))};r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){n(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!self.createImageBitmap)return Promise.resolve(this);var n=self.createImageBitmap,r=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then((function(t){return t.blob()})).then((function(r){return n(r,0,0,e.width,e.height,{premultiplyAlpha:t.alphaMode===i.a.UNPACK?"premultiply":"none"})})).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process},e.prototype.upload=function(e,n,r){if("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,n,r,this.bitmap),!this.preserveBitmap){var i=!0,o=n._glTextures;for(var a in o){var s=o[a];if(s!==r&&s.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(Ct),jt=function(t){function e(e,n){var r=this;return n=n||{},(r=t.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=e,r.scale=n.scale||1,r._overrideWidth=n.width,r._overrideHeight=n.height,r._resolve=null,r._crossorigin=n.crossorigin,r._load=null,!1!==n.autoLoad&&r.load(),r}return wt(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(n){if(t._resolve=function(){t.resize(t.source.width,t.source.height),n(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;Ct.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(n){t._resolve&&(e.onerror=null,t.onError.emit(n))},e.onload=function(){if(t._resolve){var n=e.width,r=e.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=n*t.scale,o=r*t.scale;(t._overrideWidth||t._overrideHeight)&&(i=t._overrideWidth||t._overrideHeight/r*n,o=t._overrideHeight||t._overrideWidth/n*r),i=Math.round(i),o=Math.round(o);var a=t.source;a.width=i,a.height=o,a._pixiId="canvas_"+z(),a.getContext("2d").drawImage(e,0,0,n,r,0,0,i,o),t._resolve(),t._resolve=null}}},e.getSize=function(t){var n=e.SVG_SIZE.exec(t),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,n){return"svg"===n||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(Ct),Dt=function(t){function e(n,r){var i=this;if(r=r||{},!(n instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof n&&(n=[n]);var a=n[0].src||n[0];Ct.crossOrigin(o,a,r.crossorigin);for(var s=0;s<n.length;++s){var u=document.createElement("source"),c=n[s],l=c.src,h=c.mime,f=(l=l||n[s]).split("?").shift().toLowerCase(),p=f.substr(f.lastIndexOf(".")+1);h=h||e.MIME_TYPES[p]||"video/"+p,u.src=l,u.type=h,o.appendChild(u)}n=o}return(i=t.call(this,n)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==r.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==r.autoLoad&&i.load(),i}return wt(e,t),e.prototype.update=function(e){if(!this.destroyed){var n=at.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(n){t.valid?n(t):(t._resolve=n,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(at.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(at.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(at.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(at.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(at.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,n){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(n)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(Ct),Lt=function(t){function e(e){return t.call(this,e)||this}return wt(e,t),e.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},e}(Ct);bt.push(Mt,Lt,kt,Dt,jt,Ot,Nt,It);var Bt={__proto__:null,Resource:St,BaseImageResource:Ct,INSTALLED:bt,autoDetectResource:Et,AbstractMultiResource:At,ArrayResource:It,BufferResource:Ot,CanvasResource:kt,CubeResource:Nt,ImageResource:Mt,SVGResource:jt,VideoResource:Dt,ImageBitmapResource:Lt},Ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wt(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.a.UNPACK);var o=e.realWidth,a=e.realHeight;return n.width===o&&n.height===a?r.texSubImage2D(e.target,0,0,0,o,a,e.format,n.type,this.data):(n.width=o,n.height=a,r.texImage2D(e.target,0,n.internalFormat,o,a,0,e.format,n.type,this.data)),!0},e}(Ot),Ut=function(){function t(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new rt("disposeFramebuffer"),this.multisample=i.l.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new Rt(null,{scaleMode:i.p.NEAREST,resolution:1,mipmap:i.k.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Rt(new Ft(null,{width:this.width,height:this.height}),{scaleMode:i.p.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:i.k.OFF,format:i.h.DEPTH_COMPONENT,type:i.r.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var r=this.colorTextures[n],i=r.resolution;r.setSize(t/i,e/i)}if(this.depthTexture){i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,e/i)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),Gt=function(t){function e(e){var n=this;if("number"==typeof e){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];e={width:r,height:o,scaleMode:a,resolution:s}}return e.width=e.width||100,e.height=e.height||100,e.multisample=void 0!==e.multisample?e.multisample:i.l.NONE,(n=t.call(this,null,e)||this).mipmap=i.k.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new Ut(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=e.multisample,n.maskStack=[],n.filterStack=[{}],n}return wt(e,t),e.prototype.resize=function(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(Rt),Ht=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,n){var r=e.width,i=e.height;if(n){var o=t.width/2/r,a=t.height/2/i,s=t.x/r+o,u=t.y/i+a;n=gt.add(n,gt.NW),this.x0=s+o*gt.uX(n),this.y0=u+a*gt.uY(n),n=gt.add(n,2),this.x1=s+o*gt.uX(n),this.y1=u+a*gt.uY(n),n=gt.add(n,2),this.x2=s+o*gt.uX(n),this.y2=u+a*gt.uY(n),n=gt.add(n,2),this.x3=s+o*gt.uX(n),this.y3=u+a*gt.uY(n)}else this.x0=t.x/r,this.y0=t.y/i,this.x1=(t.x+t.width)/r,this.y1=t.y/i,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/i,this.x3=t.x/r,this.y3=(t.y+t.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},t}(),Vt=new Ht,Xt=function(t){function e(n,r,i,o,a,s){var u=t.call(this)||this;if(u.noFrame=!1,r||(u.noFrame=!0,r=new ut(0,0,1,1)),n instanceof e&&(n=n.baseTexture),u.baseTexture=n,u._frame=r,u.trim=o,u.valid=!1,u._uvs=Vt,u.uvMatrix=null,u.orig=i||r,u._rotate=Number(a||0),!0===a)u._rotate=2;else if(u._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return u.defaultAnchor=s?new ct(s.x,s.y):new ct(0,0),u._updateID=0,u.textureCacheIds=[],n.valid?u.noFrame?n.valid&&u.onBaseTextureUpdated(n):u.frame=r:n.once("loaded",u.onBaseTextureUpdated,u),u.noFrame&&n.on("update",u.onBaseTextureUpdated,u),u}return wt(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var n=this.baseTexture.resource;n&&n.url&&J[n.url]&&e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),n=this._frame===this.orig?t:this.orig.clone(),r=new e(this.baseTexture,!this.noFrame&&t,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=t),r},e.prototype.updateUvs=function(){this._uvs===Vt&&(this._uvs=new Ht),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,n,i){void 0===n&&(n={}),void 0===i&&(i=r.b.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;if(o)a=t;else if(t instanceof Rt){if(!t.cacheId){var s=n&&n.pixiIdPrefix||"pixiid";t.cacheId=s+"-"+z(),Rt.addToCache(t,t.cacheId)}a=t.cacheId}else{if(!t._pixiId){s=n&&n.pixiIdPrefix||"pixiid";t._pixiId=s+"_"+z()}a=t._pixiId}var u=J[a];if(o&&i&&!u)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return u||t instanceof Rt?!u&&t instanceof Rt&&(u=new e(t),e.addToCache(u,a)):(n.resolution||(n.resolution=et(t)),(u=new e(new Rt(t,n))).baseTexture.cacheId=a,Rt.addToCache(u.baseTexture,a),e.addToCache(u,a)),u},e.fromURL=function(t,n){var r=Object.assign({autoLoad:!1},null==n?void 0:n.resourceOptions),i=e.from(t,Object.assign({resourceOptions:r},n),!1),o=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):o.load().then((function(){return Promise.resolve(i)}))},e.fromBuffer=function(t,n,r,i){return new e(Rt.fromBuffer(t,n,r,i))},e.fromLoader=function(t,n,i,o){var a=new Rt(t,Object.assign({scaleMode:r.b.SCALE_MODE,resolution:et(n)},o)),s=a.resource;s instanceof Mt&&(s.url=n);var u=new e(a);return i||(i=n),Rt.addToCache(u.baseTexture,i),e.addToCache(u,i),i!==n&&(Rt.addToCache(u.baseTexture,n),e.addToCache(u,n)),u.baseTexture.valid?Promise.resolve(u):new Promise((function(t){u.baseTexture.once("loaded",(function(){return t(u)}))}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),J[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),J[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=J[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete J[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)J[t.textureCacheIds[r]]===t&&delete J[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,n=t.y,r=t.width,i=t.height,o=e+r>this.baseTexture.width,a=n+i>this.baseTexture.height;if(o||a){var s=o&&a?"and":"or",u="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,c="Y: "+n+" + "+i+" = "+(n+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+s+" "+c)}this.valid=r&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e}(l);function Wt(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}Xt.EMPTY=new Xt(new Rt),Wt(Xt.EMPTY),Wt(Xt.EMPTY.baseTexture),Xt.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new Xt(new Rt(new kt(t)))}(),Wt(Xt.WHITE),Wt(Xt.WHITE.baseTexture);var Yt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return wt(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,n){void 0===n&&(n=!0);var r=this.baseTexture.resolution,i=Math.round(t*r)/r,o=Math.round(e*r)/r;this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(i,o),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){for(var n=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=n[i];return"number"==typeof t&&(K("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new e(new Gt(t))},e}(Xt),zt=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e,n){void 0===n&&(n=i.l.NONE);var r=new Gt(Object.assign({width:t,height:e,resolution:1,multisample:n},this.textureOptions));return new Yt(r)},t.prototype.getOptimalTexture=function(t,e,n,r){var o;void 0===n&&(n=1),void 0===r&&(r=i.l.NONE),t=Math.ceil(t*n),e=Math.ceil(e*n),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?o=r>1?-r:-1:(o=((65535&(t=V(t)))<<16|65535&(e=V(e)))>>>0,r>1&&(o+=4294967296*r)),this.texturePool[o]||(this.texturePool[o]=[]);var a=this.texturePool[o].pop();return a||(a=this.createTexture(t,e,r)),a.filterPoolKey=o,a.setResolution(n),a},t.prototype.getFilterTexture=function(t,e,n){var r=this.getOptimalTexture(t.width,t.height,e||t.resolution,n||i.l.NONE);return r.filterFrame=t.filterFrame,r},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var n=this.texturePool[e];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){for(var e in this.enableFullScreen=t.width>0&&t.height>0,this.texturePool)if(Number(e)<0){var n=this.texturePool[e];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},t.SCREEN_KEY=-1,t}(),qt=function(){function t(t,e,n,r,o,a,s){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=i.r.FLOAT),this.buffer=t,this.size=e,this.normalized=n,this.type=r,this.stride=o,this.start=a,this.instance=s}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,n,r,i,o){return new t(e,n,r,i,o)},t}(),Kt=0,Zt=function(){function t(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=e,this.id=Kt++,this.disposeRunner=new rt("disposeBuffer")}return t.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===i.d.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?i.d.ELEMENT_ARRAY_BUFFER:i.d.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),$t={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var Jt={5126:4,5123:2,5121:1},Qt=0,te={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},ee=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Qt++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new rt("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,n,r,i,o,a,s){if(void 0===n&&(n=0),void 0===r&&(r=!1),void 0===s&&(s=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof Zt||(e instanceof Array&&(e=new Float32Array(e)),e=new Zt(e));var u=t.split("|");if(u.length>1){for(var c=0;c<u.length;c++)this.addAttribute(u[c],e,n,r,i);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new qt(l,n,r,i,o,a,s),this.instanced=this.instanced||s,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof Zt||(t instanceof Array&&(t=new Uint16Array(t)),t=new Zt(t)),t.type=i.d.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],n=[],r=new Zt;for(t in this.attributes){var i=this.attributes[t],o=this.buffers[i.buffer];e.push(o.data),n.push(i.size*Jt[i.type]/4),i.buffer=0}for(r.data=function(t,e){for(var n=0,r=0,i={},o=0;o<t.length;o++)r+=e[o],n+=t[o].length;var a=new ArrayBuffer(4*n),s=null,u=0;for(o=0;o<t.length;o++){var c=e[o],l=t[o],h=H(l);i[h]||(i[h]=new $t[h](a)),s=i[h];for(var f=0;f<l.length;f++){s[(f/c|0)*r+u+f%c]=l[f]}u+=c}return new Float32Array(a)}(e,n),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,n=0;n<this.buffers.length;n++)e.buffers[n]=new Zt(this.buffers[n].data.slice(0));for(var n in this.attributes){var r=this.attributes[n];e.attributes[n]=new qt(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=i.d.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var n,r=new t,o=[],a=[],s=[],u=0;u<e.length;u++){n=e[u];for(var c=0;c<n.buffers.length;c++)a[c]=a[c]||0,a[c]+=n.buffers[c].data.length,s[c]=0}for(u=0;u<n.buffers.length;u++)o[u]=new(te[H(n.buffers[u].data)])(a[u]),r.buffers[u]=new Zt(o[u]);for(u=0;u<e.length;u++){n=e[u];for(c=0;c<n.buffers.length;c++)o[c].set(n.buffers[c].data,s[c]),s[c]+=n.buffers[c].data.length}if(r.attributes=n.attributes,n.indexBuffer){r.indexBuffer=r.buffers[n.buffers.indexOf(n.indexBuffer)],r.indexBuffer.type=i.d.ELEMENT_ARRAY_BUFFER;var l=0,h=0,f=0,p=0;for(u=0;u<n.buffers.length;u++)if(n.buffers[u]!==n.indexBuffer){p=u;break}for(var u in n.attributes){var d=n.attributes[u];(0|d.buffer)===p&&(h+=d.size*Jt[d.type]/4)}for(u=0;u<e.length;u++){var y=e[u].indexBuffer.data;for(c=0;c<y.length;c++)r.indexBuffer.data[c+f]+=l;l+=e[u].buffers[p].data.length/h,f+=y.length}}return r},t}(),ne=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return wt(e,t),e}(ee),re=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Zt(e.vertices),e.uvBuffer=new Zt(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return wt(e,t),e.prototype.map=function(t,e){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+e.width/t.width,this.uvs[3]=r,this.uvs[4]=n+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=n,this.uvs[7]=r+e.height/t.height,n=e.x,r=e.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+e.width,this.vertices[3]=r,this.vertices[4]=n+e.width,this.vertices[5]=r+e.height,this.vertices[6]=n,this.vertices[7]=r+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(ee),ie=0,oe=function(){function t(t,e,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=ie++,this.static=!!e,this.ubo=!!n,t instanceof Zt?(this.buffer=t,this.buffer.type=i.d.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Zt(new Float32Array(1)),this.buffer.type=i.d.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,n,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new t(n,r)},t.from=function(e,n,r){return new t(e,n,r)},t.uboFrom=function(e,n){return new t(e,null==n||n,!0)},t}(),ae=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=i.l.NONE,this.sourceFrame=new ut,this.destinationFrame=new ut,this.bindingSourceFrame=new ut,this.bindingDestinationFrame=new ut,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),se=[new ct,new ct,new ct,new ct],ue=new ht,ce=function(){function t(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new zt,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new ne,this.quadUv=new re,this.tempRect=new ut,this.activeState={},this.globalUniforms=new oe({outputFrame:new ut,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(t,e){for(var n=this.renderer,r=this.defaultFilterStack,i=this.statePool.pop()||new ae,o=this.renderer.renderTexture,a=e[0].resolution,s=e[0].multisample,u=e[0].padding,c=e[0].autoFit,l=e[0].legacy,h=1;h<e.length;h++){var f=e[h];a=Math.min(a,f.resolution),s=Math.min(s,f.multisample),u=this.useMaxPadding?Math.max(u,f.padding):u+f.padding,c=c&&f.autoFit,l=l||f.legacy}if(1===r.length&&(this.defaultFilterStack[0].renderTexture=o.current),r.push(i),i.resolution=a,i.multisample=s,i.legacy=l,i.target=t,i.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),i.sourceFrame.pad(u),c){var p=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(ue.copyFrom(n.projection.transform).invert(),p),i.sourceFrame.fit(p)}this.roundFrame(i.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,a,s),i.filters=e,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=i.sourceFrame.width,d.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,i.bindingSourceFrame.copyFrom(o.sourceFrame),i.bindingDestinationFrame.copyFrom(o.destinationFrame),i.transform=n.projection.transform,n.projection.transform=null,o.bind(i.renderTexture,i.sourceFrame,d),n.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),n=e.filters;this.activeState=e;var r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;var o=r.inputSize,a=r.inputPixel,s=r.inputClamp;if(o[0]=e.destinationFrame.width,o[1]=e.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],a[0]=Math.round(o[0]*e.resolution),a[1]=Math.round(o[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],s[0]=.5*a[2],s[1]=.5*a[3],s[2]=e.sourceFrame.width*o[2]-.5*a[2],s[3]=e.sourceFrame.height*o[3]-.5*a[3],e.legacy){var u=r.filterArea;u[0]=e.destinationFrame.width,u[1]=e.destinationFrame.height,u[2]=e.sourceFrame.x,u[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var c=t[t.length-1];if(this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,e.renderTexture,c.renderTexture,i.e.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,h=this.getOptimalFilterTexture(l.width,l.height,e.resolution);h.filterFrame=l.filterFrame;var f=0;for(f=0;f<n.length-1;++f){1===f&&e.multisample>1&&((h=this.getOptimalFilterTexture(l.width,l.height,e.resolution)).filterFrame=l.filterFrame),n[f].apply(this,l,h,i.e.CLEAR,e);var p=l;l=h,h=p}n[f].apply(this,l,c.renderTexture,i.e.BLEND,e),f>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(h)}e.clear(),this.statePool.push(e)},t.prototype.bindAndClear=function(t,e){void 0===e&&(e=i.e.CLEAR);var n=this.renderer,r=n.renderTexture,o=n.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,r.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var s=1&o.stateId||this.forceClear;(e===i.e.CLEAR||e===i.e.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(t,e,n,r){var o=this.renderer;o.state.set(t.state),this.bindAndClear(n,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(i.f.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(i.f.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(t,e){var n=this.activeState,r=n.sourceFrame,i=n.destinationFrame,o=e._texture.orig,a=t.set(i.width,0,0,i.height,r.x,r.y),s=e.worldTransform.copyTo(ht.TEMP_MATRIX);return s.invert(),a.prepend(s),a.scale(1/o.width,1/o.height),a.translate(e.anchor.x,e.anchor.y),a},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(t,e,n,r){return void 0===n&&(n=1),void 0===r&&(r=i.l.NONE),this.texturePool.getOptimalTexture(t,e,n,r)},t.prototype.getFilterTexture=function(t,e,n){if("number"==typeof t){var r=t;t=e,e=r}t=t||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,n||i.l.NONE);return o.filterFrame=t.filterFrame,o},t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(t,e){var n=se[0],r=se[1],i=se[2],o=se[3];n.set(e.left,e.top),r.set(e.left,e.bottom),i.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(n,n),t.apply(r,r),t.apply(i,i),t.apply(o,o);var a=Math.min(n.x,r.x,i.x,o.x),s=Math.min(n.y,r.y,i.y,o.y),u=Math.max(n.x,r.x,i.x,o.x),c=Math.max(n.y,r.y,i.y,o.y);e.x=a,e.y=s,e.width=u-a,e.height=c-s},t.prototype.roundFrame=function(t,e,n,r,i){if(i){var o=i.a,a=i.b,s=i.c,u=i.d;if((Math.abs(a)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}(i=i?ue.copyFrom(i):ue.identity()).translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.transformAABB(i,t),t.ceil(e),this.transformAABB(i.invert(),t)},t}(),le=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),he=function(){function t(t){this.renderer=t,this.emptyRenderer=new le(t),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(t,e){for(var n=this.renderer.texture.boundTextures,r=e-1;r>=0;--r)t[r]=n[r]||null,t[r]&&(t[r]._batchLocation=r)},t.prototype.boundArray=function(t,e,n,r){for(var i=t.elements,o=t.ids,a=t.count,s=0,u=0;u<a;u++){var c=i[u],l=c._batchLocation;if(l>=0&&l<r&&e[l]===c)o[u]=l;else for(;s<r;){var h=e[s];if(!h||h._batchEnabled!==n||h._batchLocation!==s){o[u]=s,c._batchLocation=s,e[s]=c;break}s++}}},t.prototype.destroy=function(){this.renderer=null},t}(),fe=0,pe=function(){function t(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=fe++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=fe++,this.renderer.runners.contextChange.emit(t)},t.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},t.prototype.createContext=function(t,e){var n;if(r.b.PREFER_ENV>=i.g.WEBGL2&&(n=t.getContext("webgl2",e)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(t){t.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(t){var e=t.getContextAttributes(),n="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;n&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),de=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=i.l.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},ye=new ut,me=function(){function t(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Ut(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ut,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;r.b.PREFER_ENV===i.g.WEBGL_LEGACY&&(e=null,n=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},t.prototype.bind=function(t,e,n){void 0===n&&(n=0);var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,i.mipLevel=n),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,i.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var o=0;o<t.colorTextures.length;o++){var a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var s=e.width>>n,u=e.height>>n,c=s/e.width;this.setViewport(e.x*c,e.y*c,s,u)}else{s=t.width>>n,u=t.height>>n;this.setViewport(0,0,s,u)}}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(t,e,n,r){var i=this.viewport;t=Math.round(t),e=Math.round(e),n=Math.round(n),r=Math.round(r),i.width===n&&i.height===r&&i.x===t&&i.y===e||(i.x=t,i.y=e,i.width=n,i.height=r,this.gl.viewport(t,e,n,r))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(t,e,n,r,o){void 0===o&&(o=i.c.COLOR|i.c.DEPTH);var a=this.gl;a.clearColor(t,e,n,r),a.clear(o)},t.prototype.initFramebuffer=function(t){var e=this.gl,n=new de(e.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},t.prototype.resizeFramebuffer=function(t){var e=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,n.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.RGBA8,t.width,t.height)),n.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),n.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var r=t.colorTextures,i=r.length;e.drawBuffers||(i=Math.min(i,1));for(var o=0;o<i;o++){var a=r[o],s=a.parentTextureArray||a;this.renderer.texture.bind(s,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},t.prototype.updateFramebuffer=function(t,e){var n=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures,o=i.length;n.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(t)?(r.msaaBuffer=r.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.RGBA8,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,r.msaaBuffer)):r.msaaBuffer&&(n.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var a=[],s=0;s<o;s++){var u=i[s],c=u.parentTextureArray||u;this.renderer.texture.bind(c,0),0===s&&r.msaaBuffer||(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+s,u.target,c._glTextures[this.CONTEXT_UID].texture,e),a.push(n.COLOR_ATTACHMENT0+s))}if((a.length>1&&n.drawBuffers(a),t.depthTexture)&&this.writeDepthTexture){var l=t.depthTexture;this.renderer.texture.bind(l,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,e)}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?r.stencil&&(n.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r.stencil))},t.prototype.canMultisampleFramebuffer=function(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture},t.prototype.detectSamples=function(t){var e=this.msaaSamples,n=i.l.NONE;if(t<=1||null===e)return n;for(var r=0;r<e.length;r++)if(e[r]<=t){n=e[r];break}return 1===n&&(n=i.l.NONE),n},t.prototype.blit=function(t,e,n){var r=this.current,i=this.renderer,o=this.gl,a=this.CONTEXT_UID;if(2===i.context.webGLVersion&&r){var s=r.glFramebuffers[a];if(s){if(!t){if(!s.msaaBuffer)return;var u=r.colorTextures[0];if(!u)return;s.blitFramebuffer||(s.blitFramebuffer=new Ut(r.width,r.height),s.blitFramebuffer.addColorTexture(0,u)),(t=s.blitFramebuffer).colorTextures[0]!==u&&(t.colorTextures[0]=u,t.dirtyId++,t.dirtyFormat++),t.width===r.width&&t.height===r.height||(t.width=r.width,t.height=r.height,t.dirtyId++,t.dirtySize++)}e||((e=ye).width=r.width,e.height=r.height),n||(n=e);var c=e.width===n.width&&e.height===n.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,s.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,n.x,n.y,n.width,n.height,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR)}}},t.prototype.disposeFramebuffer=function(t,e){var n=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(n){delete t.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(t);i>=0&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&r.deleteRenderbuffer(n.msaaBuffer),n.stencil&&r.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<e.length;n++)this.disposeFramebuffer(e[n],t)},t.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.stencil=!0;var n=t.width,r=t.height,i=this.gl,o=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o),e.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,e.multisample,i.DEPTH24_STENCIL8,n,r):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,n,r),e.stencil=o,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new ut},t.prototype.destroy=function(){this.renderer=null},t}(),ve={5126:4,5123:2,5121:1},_e=function(){function t(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;r.b.PREFER_ENV===i.g.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(t){return n.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return n.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var o=t.getExtension("ANGLE_instanced_arrays");o?(t.vertexAttribDivisor=function(t,e){return o.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,n,r,i){return o.drawElementsInstancedANGLE(t,e,n,r,i)},t.drawArraysInstanced=function(t,e,n,r){return o.drawArraysInstancedANGLE(t,e,n,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var n=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID],i=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},i=!0);var o=r[e.program.id]||this.initGeometryVao(t,e,i);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,n=0;n<t.buffers.length;n++){var r=t.buffers[n];e.update(r)}},t.prototype.checkCompatibility=function(t,e){var n=t.attributes,r=e.attributeData;for(var i in r)if(!n[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},t.prototype.getSignature=function(t,e){var n=t.attributes,r=e.attributeData,i=["g",t.id];for(var o in n)r[o]&&i.push(o);return i.join("-")},t.prototype.initGeometryVao=function(t,e,n){void 0===n&&(n=!0);var r=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,a=e.program;a.glPrograms[i]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);var s=this.getSignature(t,a),u=t.glVertexArrayObjects[this.CONTEXT_UID],c=u[s];if(c)return u[a.id]=c,c;var l=t.buffers,h=t.attributes,f={},p={};for(var d in l)f[d]=0,p[d]=0;for(var d in h)!h[d].size&&a.attributeData[d]?h[d].size=a.attributeData[d].size:h[d].size||console.warn("PIXI Geometry attribute '"+d+"' size cannot be determined (likely the bound shader does not have the attribute)"),f[h[d].buffer]+=h[d].size*ve[h[d].type];for(var d in h){var y=h[d],m=y.size;void 0===y.stride&&(f[y.buffer]===m*ve[y.type]?y.stride=0:y.stride=f[y.buffer]),void 0===y.start&&(y.start=p[y.buffer],p[y.buffer]+=m*ve[y.type])}c=r.createVertexArray(),r.bindVertexArray(c);for(var v=0;v<l.length;v++){var _=l[v];o.bind(_),n&&_._glBuffers[i].refCount++}return this.activateVao(t,a),this._activeVao=c,u[a.id]=c,u[s]=c,c},t.prototype.disposeGeometry=function(t,e){var n;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,o=t.buffers,a=null===(n=this.renderer)||void 0===n?void 0:n.buffer;if(t.disposeRunner.remove(this),r){if(a)for(var s=0;s<o.length;s++){var u=o[s]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,0!==u.refCount||e||a.dispose(o[s],e))}if(!e)for(var c in r)if("g"===c[0]){var l=r[c];this._activeVao===l&&this.unbind(),i.deleteVertexArray(l)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),n=0;n<e.length;n++)this.disposeGeometry(this.managedGeometries[e[n]],t)},t.prototype.activateVao=function(t,e){var n=this.gl,r=this.CONTEXT_UID,i=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&i.bind(t.indexBuffer);var s=null;for(var u in a){var c=a[u],l=o[c.buffer],h=l._glBuffers[r];if(e.attributeData[u]){s!==h&&(i.bind(l),s=h);var f=e.attributeData[u].location;if(n.enableVertexAttribArray(f),n.vertexAttribPointer(f,c.size,c.type||n.FLOAT,c.normalized,c.stride,c.start),c.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(f,1)}}}},t.prototype.draw=function(t,e,n,r){var i=this.gl,o=this._activeGeometry;if(o.indexBuffer){var a=o.indexBuffer.data.BYTES_PER_ELEMENT,s=2===a?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(t,e||o.indexBuffer.data.length,s,(n||0)*a,r||1):i.drawElements(t,e||o.indexBuffer.data.length,s,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(t,n,e||o.getSize(),r||1):i.drawArrays(t,n,e||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),ge=function(){function t(t){void 0===t&&(t=null),this.type=i.j.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=r.b.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=i.j.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function be(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}function Ee(t,e){var n=t.getShaderSource(e).split("\n").map((function(t,e){return e+": "+t})),r=t.getShaderInfoLog(e),i=r.split("\n"),o={},a=i.map((function(t){return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(t){return!(!t||o[t])&&(o[t]=!0,!0)})),s=[""];a.forEach((function(t){n[t-1]="%c"+n[t-1]+"%c",s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var u=n.join("\n");s[0]=u,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,s),console.groupEnd()}function Te(t){for(var e=new Array(t),n=0;n<e.length;n++)e[n]=!1;return e}function we(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Te(2*e);case"bvec3":return Te(3*e);case"bvec4":return Te(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var xe,Se={},Oe=Se;function Pe(){if(!xe){xe=i.m.MEDIUM;var t=function(){if(Oe===Se||Oe&&Oe.isContextLost()){var t=document.createElement("canvas"),e=void 0;r.b.PREFER_ENV>=i.g.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),Oe=e}return Oe}();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);xe=e.precision?i.m.HIGH:i.m.MEDIUM}}return xe}function Re(t,e,n){if("precision"!==t.substring(0,9)){var r=e;return e===i.m.HIGH&&n!==i.m.HIGH&&(r=i.m.MEDIUM),"precision "+r+" float;\n"+t}return n!==i.m.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var Ae={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Ie(t){return Ae[t]}var Ce=null,ke={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Ne(t,e){if(!Ce){var n=Object.keys(ke);Ce={};for(var r=0;r<n.length;++r){var i=n[r];Ce[t[i]]=ke[i]}}return Ce[e]}var Me=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '},codeUbo:function(t){return"\n                var "+t+"_matrix = uv."+t+".toArray(true);\n\n                data[offset] = "+t+"_matrix[0];\n                data[offset+1] = "+t+"_matrix[1];\n                data[offset+2] = "+t+"_matrix[2];\n        \n                data[offset + 4] = "+t+"_matrix[3];\n                data[offset + 5] = "+t+"_matrix[4];\n                data[offset + 6] = "+t+"_matrix[5];\n        \n                data[offset + 8] = "+t+"_matrix[6];\n                data[offset + 9] = "+t+"_matrix[7];\n                data[offset + 10] = "+t+"_matrix[8];\n            "}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'},codeUbo:function(t){return"\n                v = uv."+t+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(t){return"\n                    v = uv."+t+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],je={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},De={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Le,Be=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Fe(t){for(var e="",n=0;n<t;++n)n>0&&(e+="\nelse "),n<t-1&&(e+="if(test == "+n+".0){}");return e}var Ue=0,Ge={},He=function(){function t(e,n,o){void 0===o&&(o="pixi-shader"),this.id=Ue++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=n||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(o=o.replace(/\s+/g,"-"),Ge[o]?(Ge[o]++,o+="-"+Ge[o]):Ge[o]=1,this.vertexSrc="#define SHADER_NAME "+o+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+o+"\n"+this.fragmentSrc,this.vertexSrc=Re(this.vertexSrc,r.b.PRECISION_VERTEX,i.m.HIGH),this.fragmentSrc=Re(this.fragmentSrc,r.b.PRECISION_FRAGMENT,Pe())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,n,r){var i=e+n,o=$[i];return o||($[i]=o=new t(e,n,r)),o},t}(),Ve=function(){function t(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof oe?e:new oe(e):new oe({})}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var n in e.uniforms){var r=e.uniforms[n];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,n,r){return new t(He.from(e,n),r)},t}(),Xe=function(){function t(){this.data=0,this.blendMode=i.b.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==i.b.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),We=function(t){function e(n,i,o){var a=this,s=He.from(n||e.defaultVertexSrc,i||e.defaultFragmentSrc);return(a=t.call(this,s,o)||this).padding=0,a.resolution=r.b.FILTER_RESOLUTION,a.multisample=r.b.FILTER_MULTISAMPLE,a.enabled=!0,a.autoFit=!0,a.state=new Xe,a}return wt(e,t),e.prototype.apply=function(t,e,n,r,i){t.applyFilter(this,e,n,r)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(Ve),Ye=new ht,ze=function(){function t(t,e){this._texture=t,this.mapCoord=new ht,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var n=this.mapCoord,r=0;r<t.length;r+=2){var i=t[r],o=t[r+1];e[r]=i*n.a+o*n.c+n.tx,e[r+1]=i*n.b+o*n.d+n.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var n=e._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=e.orig,i=e.trim;i&&(Ye.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(Ye));var o=e.baseTexture,a=this.uClampFrame,s=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(e._frame.x+s+u)/o.width,a[1]=(e._frame.y+s+u)/o.height,a[2]=(e._frame.x+e._frame.width-s+u)/o.width,a[3]=(e._frame.y+e._frame.height-s+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},t}(),qe=function(t){function e(e,n,r){var i=this,o=null;return"string"!=typeof e&&void 0===n&&void 0===r&&(o=e,e=void 0,n=void 0,r=void 0),(i=t.call(this,e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",n||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r)||this).maskSprite=o,i.maskMatrix=new ht,i}return wt(e,t),Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,e,n,r){var i=this._maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new ze(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,n,r))},e}(We),Ke=function(){function t(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},t.prototype.push=function(t,e){var n=e;if(!n.isMaskData){var r=this.maskDataPool.pop()||new ge;r.pooled=!0,r.maskObject=e,n=r}var o=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(o),n.autoDetect&&this.detect(n),n._target=t,n.type!==i.j.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case i.j.SCISSOR:this.renderer.scissor.push(n);break;case i.j.STENCIL:this.renderer.stencil.push(n);break;case i.j.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n)}n.type===i.j.SPRITE&&this.maskStack.push(n)},t.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case i.j.SCISSOR:this.renderer.scissor.pop();break;case i.j.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case i.j.SPRITE:this.popSpriteMask(e)}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){var n=this.maskStack[this.maskStack.length-1];n.type===i.j.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},t.prototype.detect=function(t){t.maskObject.isSprite?t.type=i.j.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=i.j.SCISSOR:t.type=i.j.STENCIL},t.prototype.pushSpriteMask=function(t){var e,n,r=t.maskObject,i=t._target,o=t._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex])||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new qe]);var a,s,u=this.renderer,c=u.renderTexture;if(c.current){var l=c.current;a=t.resolution||l.resolution,s=null!==(e=t.multisample)&&void 0!==e?e:l.multisample}else a=t.resolution||u.resolution,s=null!==(n=t.multisample)&&void 0!==n?n:u.multisample;o[0].resolution=a,o[0].multisample=s,o[0].maskSprite=r;var h=i.filterArea;i.filterArea=r.getBounds(!0),u.filter.push(i,o),i.filterArea=h,t._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.destroy=function(){this.renderer=null},t}(),Ze=function(){function t(t){this.renderer=t,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(t){var e=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var r=this.getStackLength();r!==n&&(0===r?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),$e=new ht,Je=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return wt(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){if(!t._scissorRectLocal){var e=t._scissorRect,n=t.maskObject,r=this.renderer,i=r.renderTexture;n.renderable=!0;var o=n.getBounds();this.roundFrameToPixels(o,i.current?i.current.resolution:r.resolution,i.sourceFrame,i.destinationFrame,r.projection.transform),n.renderable=!1,e&&o.fit(e),t._scissorRectLocal=o}},e.isMatrixRotated=function(t){if(!t)return!1;var e=t.a,n=t.b,r=t.c,i=t.d;return(Math.abs(n)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)},e.prototype.testScissor=function(t){var n=t.maskObject;if(!n.isFastRect||!n.isFastRect())return!1;if(e.isMatrixRotated(n.worldTransform))return!1;if(e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var r=t._scissorRectLocal;return r.width>0&&r.height>0},e.prototype.roundFrameToPixels=function(t,n,r,i,o){e.isMatrixRotated(o)||((o=o?$e.copyFrom(o):$e.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(o,t),t.fit(i),t.x=Math.round(t.x*n),t.y=Math.round(t.y*n),t.width=Math.round(t.width*n),t.height=Math.round(t.height*n))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var e=this.renderer.gl;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t,e=this.maskStack[this.maskStack.length-1]._scissorRect;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)},e}(Ze),Qe=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return wt(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,n=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),t._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,r,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clearStencil(0),e.clear(e.STENCIL_BUFFER_BIT)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(Ze),tn=function(){function t(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ht,this.transform=null}return t.prototype.update=function(t,e,n,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(t,e,n,r){var i=this.projectionMatrix,o=r?-1:1;i.identity(),i.a=1/e.width*2,i.d=o*(1/e.height*2),i.tx=-1-e.x*i.a,i.ty=-o-e.y*i.d},t.prototype.setTransform=function(t){},t.prototype.destroy=function(){this.renderer=null},t}(),en=new ut,nn=new ut,rn=function(){function t(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ut,this.destinationFrame=new ut,this.viewportFrame=new ut}return t.prototype.bind=function(t,e,n){void 0===t&&(t=null);var r,i,o,a=this.renderer;this.current=t,t?(o=(r=t.baseTexture).resolution,e||(en.width=t.frame.width,en.height=t.frame.height,e=en),n||(nn.x=t.frame.x,nn.y=t.frame.y,nn.width=e.width,nn.height=e.height,n=nn),i=r.framebuffer):(o=a.resolution,e||(en.width=a.screen.width,en.height=a.screen.height,e=en),n||((n=en).width=e.width,n.height=e.height));var s=this.viewportFrame;s.x=n.x*o,s.y=n.y*o,s.width=n.width*o,s.height=n.height*o,t||(s.y=a.view.height-(s.y+s.height)),s.ceil(),this.renderer.framebuffer.bind(i,s),this.renderer.projection.update(n,e,o,!i),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(n)},t.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var n=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer.screen,i=n.width!==r.width||n.height!==r.height;if(i){var o=this.viewportFrame,a=o.x,s=o.y,u=o.width,c=o.height;a=Math.round(a),s=Math.round(s),u=Math.round(u),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,s,u,c)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),i&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function on(t,e,n,r,i){n.buffer.update(i)}var an={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},sn={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function un(t,e){if(!t.autoManage)return{size:0,syncFunc:on};for(var n=function(t){for(var e=t.map((function(t){return{data:t,offset:0,dataLen:0,dirty:0}})),n=0,r=0,i=0,o=0;o<e.length;o++){var a=e[o];if(n=sn[a.data.type],a.data.size>1&&(n=Math.max(n,16)*a.data.size),a.dataLen=n,r%n!=0&&r<16){var s=r%n%16;r+=s,i+=s}r+n>16?(i=16*Math.ceil(i/16),a.offset=i,i+=n,r=n):(a.offset=i,r+=n,i+=n)}return{uboElements:e,size:i=16*Math.ceil(i/16)}}(function(t,e){var n=[];for(var r in t)e[r]&&n.push(e[r]);return n.sort((function(t,e){return t.index-e.index})),n}(t.uniforms,e)),r=n.uboElements,i=n.size,o=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],a=0;a<r.length;a++){for(var s=r[a],u=t.uniforms[s.data.name],c=s.data.name,l=!1,h=0;h<Me.length;h++){var f=Me[h];if(f.codeUbo&&f.test(s.data,u)){o.push("offset = "+s.offset/4+";",Me[h].codeUbo(s.data.name,u)),l=!0;break}}if(!l)if(s.data.size>1){var p=Ie(s.data.type),d=Math.max(sn[s.data.type]/16,1),y=p/d,m=(4-y%4)%4;o.push("\n                cv = ud."+c+".value;\n                v = uv."+c+";\n                offset = "+s.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+s.data.size*d+"; i++)\n                {\n                    for(var j = 0; j < "+y+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+m+";\n                }\n\n                ")}else{var v=an[s.data.type];o.push("\n                cv = ud."+c+".value;\n                v = uv."+c+";\n                offset = "+s.offset/4+";\n                "+v+";\n                ")}}return o.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join("\n"))}}var cn=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();function ln(t,e){var n=be(t,t.VERTEX_SHADER,e.vertexSrc),r=be(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();if(t.attachShader(i,n),t.attachShader(i,r),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||function(t,e,n,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||Ee(t,n),t.getShaderParameter(r,t.COMPILE_STATUS)||Ee(t,r),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,i,n,r),e.attributeData=function(t,e){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=e.getActiveAttrib(t,i);if(0!==o.name.indexOf("gl_")){var a=Ne(e,o.type),s={type:a,name:o.name,size:Ie(a),location:e.getAttribLocation(t,o.name)};n[o.name]=s}}return n}(i,t),e.uniformData=function(t,e){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;i++){var o=e.getActiveUniform(t,i),a=o.name.replace(/\[.*?\]$/,""),s=!!o.name.match(/\[.*?\]$/),u=Ne(e,o.type);n[a]={name:a,index:i,type:u,size:o.size,isArray:s,value:we(u,o.size)}}return n}(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var o=Object.keys(e.attributeData);o.sort((function(t,e){return t>e?1:-1}));for(var a=0;a<o.length;a++)e.attributeData[o[a]].location=a,t.bindAttribLocation(i,a,o[a]);t.linkProgram(i)}t.deleteShader(n),t.deleteShader(r);var s={};for(var a in e.uniformData){var u=e.uniformData[a];s[a]={location:t.getUniformLocation(i,a),value:we(u.type,u.size)}}return new cn(i,s)}var hn=0,fn={textureCount:0,uboCount:0},pn=function(){function t(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=hn++}return t.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Le)return Le;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Le=!0===t({a:"b"},"a","b")}catch(t){Le=!1}return Le}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(t){this.gl=t,this.reset()},t.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),e||(fn.textureCount=0,fn.uboCount=0,this.syncUniformGroup(t.uniformGroup,fn)),r},t.prototype.setUniforms=function(t){var e=this.shader.program,n=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(n.uniformData,t,this.renderer)},t.prototype.syncUniformGroup=function(t,e){var n=this.getGlProgram();t.static&&t.dirtyId===n.uniformDirtyGroups[t.id]||(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,e))},t.prototype.syncUniforms=function(t,e,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,n)},t.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){var n,r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var i in t.uniforms){var o=e[i];if(o){for(var a=t.uniforms[i],s=!1,u=0;u<Me.length;u++)if(Me[u].test(o,a)){r.push(Me[u].code(i,a)),s=!0;break}if(!s){var c=(1===o.size?je:De)[o.type].replace("location",'ud["'+i+'"].location');r.push('\n            cu = ud["'+i+'"];\n            cv = cu.value;\n            v = uv["'+i+'"];\n            '+c+";")}}else(null===(n=t.uniforms[i])||void 0===n?void 0:n.group)&&(t.uniforms[i].ubo?r.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+i+", '"+i+"');\n                    "):r.push("\n                        renderer.shader.syncUniformGroup(uv."+i+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(t,e){var n=this.getGlProgram();if(!t.static||0!==t.dirtyId||!n.uniformGroups[t.id]){t.dirtyId=0;var r=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,e);t.buffer.update(),r(n.uniformData,t.uniforms,this.renderer,fn,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[e])},t.prototype.createSyncBufferGroup=function(t,e,n){var r=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var i=this.gl.getUniformBlockIndex(e.program,n);e.uniformBufferBindings[n]=this.shader.uniformBindCount,r.uniformBlockBinding(e.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(t,this.shader.program.uniformData,"ubo"),a=this._uboCache[o];if(a||(a=this._uboCache[o]=un(t,this.shader.program.uniformData)),t.autoManage){var s=new Float32Array(a.size/4);t.buffer.update(s)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]},t.prototype.getSignature=function(t,e,n){var r=t.uniforms,i=[n+"-"];for(var o in r)i.push(o),e[o]&&i.push(e[o].type);return i.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(t){var e=this.gl,n=t.program,r=ln(e,n);return n.glPrograms[this.renderer.CONTEXT_UID]=r,r},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}();var dn=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=i.b.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Xe,this.defaultState.blend=!0}return t.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[i.b.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.ADD]=[t.ONE,t.ONE],e[i.b.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.NONE]=[0,0],e[i.b.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[i.b.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[i.b.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[i.b.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[i.b.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[i.b.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[i.b.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[i.b.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[i.b.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[i.b.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},t.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,n=0;e;)1&e&&this.map[n].call(this,!!(t.data&1<<n)),e>>=1,n++;this.stateId=t.data}for(n=0;n<this.checks.length;n++)this.checks[n](this,t)},t.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(t){this.gl.depthMask(t)},t.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},t.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],n=this.gl;2===e.length?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},t.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(t,e){var n=this.checks.indexOf(t);e&&-1===n?this.checks.push(t):e||-1===n||this.checks.splice(n,1)},t.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},t.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),yn=function(){function t(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=r.b.GC_MAX_IDLE,this.checkCountMax=r.b.GC_MAX_CHECK_COUNT,this.mode=r.b.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==i.i.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,n=!1,r=0;r<e.length;r++){var i=e[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[r]=null,n=!0)}if(n){var o=0;for(r=0;r<e.length;r++)null!==e[r]&&(e[o++]=e[r]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&e.destroyTexture(n);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t.prototype.destroy=function(){this.renderer=null},t}();var mn=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=i.r.UNSIGNED_BYTE,this.internalFormat=i.h.RGBA,this.samplerType=0},vn=function(){function t(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Rt,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(t){var e,n,r,o,a,s,u,c,l,h,f,p,d,y,m,v,_,g,b,E,T,w,x;return"WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext?((e={})[i.r.UNSIGNED_BYTE]=((n={})[i.h.RGBA]=t.RGBA8,n[i.h.RGB]=t.RGB8,n[i.h.RG]=t.RG8,n[i.h.RED]=t.R8,n[i.h.RGBA_INTEGER]=t.RGBA8UI,n[i.h.RGB_INTEGER]=t.RGB8UI,n[i.h.RG_INTEGER]=t.RG8UI,n[i.h.RED_INTEGER]=t.R8UI,n[i.h.ALPHA]=t.ALPHA,n[i.h.LUMINANCE]=t.LUMINANCE,n[i.h.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,n),e[i.r.BYTE]=((r={})[i.h.RGBA]=t.RGBA8_SNORM,r[i.h.RGB]=t.RGB8_SNORM,r[i.h.RG]=t.RG8_SNORM,r[i.h.RED]=t.R8_SNORM,r[i.h.RGBA_INTEGER]=t.RGBA8I,r[i.h.RGB_INTEGER]=t.RGB8I,r[i.h.RG_INTEGER]=t.RG8I,r[i.h.RED_INTEGER]=t.R8I,r),e[i.r.UNSIGNED_SHORT]=((o={})[i.h.RGBA_INTEGER]=t.RGBA16UI,o[i.h.RGB_INTEGER]=t.RGB16UI,o[i.h.RG_INTEGER]=t.RG16UI,o[i.h.RED_INTEGER]=t.R16UI,o[i.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,o),e[i.r.SHORT]=((a={})[i.h.RGBA_INTEGER]=t.RGBA16I,a[i.h.RGB_INTEGER]=t.RGB16I,a[i.h.RG_INTEGER]=t.RG16I,a[i.h.RED_INTEGER]=t.R16I,a),e[i.r.UNSIGNED_INT]=((s={})[i.h.RGBA_INTEGER]=t.RGBA32UI,s[i.h.RGB_INTEGER]=t.RGB32UI,s[i.h.RG_INTEGER]=t.RG32UI,s[i.h.RED_INTEGER]=t.R32UI,s[i.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,s),e[i.r.INT]=((u={})[i.h.RGBA_INTEGER]=t.RGBA32I,u[i.h.RGB_INTEGER]=t.RGB32I,u[i.h.RG_INTEGER]=t.RG32I,u[i.h.RED_INTEGER]=t.R32I,u),e[i.r.FLOAT]=((c={})[i.h.RGBA]=t.RGBA32F,c[i.h.RGB]=t.RGB32F,c[i.h.RG]=t.RG32F,c[i.h.RED]=t.R32F,c[i.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,c),e[i.r.HALF_FLOAT]=((l={})[i.h.RGBA]=t.RGBA16F,l[i.h.RGB]=t.RGB16F,l[i.h.RG]=t.RG16F,l[i.h.RED]=t.R16F,l),e[i.r.UNSIGNED_SHORT_5_6_5]=((h={})[i.h.RGB]=t.RGB565,h),e[i.r.UNSIGNED_SHORT_4_4_4_4]=((f={})[i.h.RGBA]=t.RGBA4,f),e[i.r.UNSIGNED_SHORT_5_5_5_1]=((p={})[i.h.RGBA]=t.RGB5_A1,p),e[i.r.UNSIGNED_INT_2_10_10_10_REV]=((d={})[i.h.RGBA]=t.RGB10_A2,d[i.h.RGBA_INTEGER]=t.RGB10_A2UI,d),e[i.r.UNSIGNED_INT_10F_11F_11F_REV]=((y={})[i.h.RGB]=t.R11F_G11F_B10F,y),e[i.r.UNSIGNED_INT_5_9_9_9_REV]=((m={})[i.h.RGB]=t.RGB9_E5,m),e[i.r.UNSIGNED_INT_24_8]=((v={})[i.h.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,v),e[i.r.FLOAT_32_UNSIGNED_INT_24_8_REV]=((_={})[i.h.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,_),x=e):((g={})[i.r.UNSIGNED_BYTE]=((b={})[i.h.RGBA]=t.RGBA,b[i.h.RGB]=t.RGB,b[i.h.ALPHA]=t.ALPHA,b[i.h.LUMINANCE]=t.LUMINANCE,b[i.h.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,b),g[i.r.UNSIGNED_SHORT_5_6_5]=((E={})[i.h.RGB]=t.RGB,E),g[i.r.UNSIGNED_SHORT_4_4_4_4]=((T={})[i.h.RGBA]=t.RGBA,T),g[i.r.UNSIGNED_SHORT_5_5_5_1]=((w={})[i.h.RGBA]=t.RGBA,w),x=g),x}(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};var r=new mn(t.createTexture());t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new mn(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(n=0;n<this.boundTextures.length;n++)this.bind(null,n)},t.prototype.bind=function(t,e){void 0===e&&(e=0);var n=this.gl;if((t=null==t?void 0:t.castToBaseTexture())&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[e]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},t.prototype.unbind=function(t){var e=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<n.length;r++)n[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),n[r]=null)},t.prototype.ensureSamplerType=function(t){var e=this.boundTextures,n=this.hasIntegerTextures,r=this.CONTEXT_UID;if(n)for(var o=t-1;o>=0;--o){var a=e[o];if(a)a._glTextures[r].samplerType!==i.o.FLOAT&&this.renderer.texture.unbind(a)}},t.prototype.initTexture=function(t){var e=new mn(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},t.prototype.initTextureType=function(t,e){var n,r;e.internalFormat=null!==(r=null===(n=this.internalFormats[t.type])||void 0===n?void 0:n[t.format])&&void 0!==r?r:t.format,2===this.webGLVersion&&t.type===i.r.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},t.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var n=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(n,t,e))e.samplerType!==i.o.FLOAT&&(this.hasIntegerTextures=!0);else{var r=t.realWidth,o=t.realHeight,a=n.gl;(e.width!==r||e.height!==o||e.dirtyId<0)&&(e.width=r,e.height=o,a.texImage2D(t.target,0,e.internalFormat,r,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},t.prototype.destroyTexture=function(t,e){var n=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var r=this.managedTextures.indexOf(t);-1!==r&&function(t,e,n){var r,i=t.length;if(!(e>=i||0===n)){var o=i-(n=e+n>i?i-e:n);for(r=e;r<o;++r)t[r]=t[r+n];t.length=o}}(this.managedTextures,r,1)}},t.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==i.k.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=i.s.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},t.prototype.setStyle=function(t,e){var n=this.gl;if(e.mipmap&&t.mipmap!==i.k.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===i.p.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===i.p.LINEAR){var o=Math.min(t.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===i.p.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===i.p.LINEAR?n.LINEAR:n.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),_n={__proto__:null,FilterSystem:ce,BatchSystem:he,ContextSystem:pe,FramebufferSystem:me,GeometrySystem:_e,MaskSystem:Ke,ScissorSystem:Je,StencilSystem:Qe,ProjectionSystem:tn,RenderTextureSystem:rn,ShaderSystem:pn,StateSystem:dn,TextureGCSystem:yn,TextureSystem:vn},gn=new ht,bn=function(t){function e(e,n){void 0===e&&(e=i.n.UNKNOWN);var o=t.call(this)||this;return n=Object.assign({},r.b.RENDER_OPTIONS,n),o.options=n,o.type=e,o.screen=new ut(0,0,n.width,n.height),o.view=n.view||document.createElement("canvas"),o.resolution=n.resolution||r.b.RESOLUTION,o.useContextAlpha=n.useContextAlpha,o.autoDensity=!!n.autoDensity,o.preserveDrawingBuffer=n.preserveDrawingBuffer,o.clearBeforeRender=n.clearBeforeRender,o._backgroundColor=0,o._backgroundColorRgba=[0,0,0,1],o._backgroundColorString="#000000",o.backgroundColor=n.backgroundColor||o._backgroundColor,o.backgroundAlpha=n.backgroundAlpha,void 0!==n.transparent&&(K("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),o.useContextAlpha=n.transparent,o.backgroundAlpha=n.transparent?0:1),o._lastObjectRendered=null,o.plugins={},o}return wt(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(e*this.resolution);var n=this.view.width/this.resolution,r=this.view.height/this.resolution;this.screen.width=n,this.screen.height=r,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=r+"px"),this.emit("resize",n,r)},e.prototype.generateTexture=function(t,e,n,r){void 0===e&&(e={}),"number"==typeof e&&(K("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),e={scaleMode:e,resolution:n,region:r});var i=e.region,o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}(e,["region"]);0===(r=i||t.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var a=Yt.create(xt({width:r.width,height:r.height},o));return gn.tx=-r.x,gn.ty=-r.y,this.render(t,{renderTexture:a,clear:!1,transform:gn,skipUpdateTransform:!!t.parent}),a},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=i.n.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){var e;this._backgroundColor=t,this._backgroundColorString=(e=t.toString(16),"#"+(e="000000".substr(0,6-e.length)+e)),function(t,e){void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255}(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(l),En=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},Tn=function(){function t(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(t){var e=this.gl,n=this.CONTEXT_UID,r=t._glBuffers[n]||this.createGLBuffer(t);e.bindBuffer(t.type,r.buffer)},t.prototype.bindBufferBase=function(t,e){var n=this.gl,r=this.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var i=t._glBuffers[r]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,i.buffer)}},t.prototype.bindBufferRange=function(t,e,n){var r=this.gl,i=this.CONTEXT_UID;n=n||0;var o=t._glBuffers[i]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,e||0,o.buffer,256*n,256)},t.prototype.update=function(t){var e=this.gl,n=this.CONTEXT_UID,r=t._glBuffers[n];if(t._updateID!==r.updateID)if(r.updateID=t._updateID,e.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{var i=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,i)}},t.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),n&&(e||r.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),n=0;n<e.length;n++)this.dispose(this.managedBuffers[e[n]],t)},t.prototype.createGLBuffer=function(t){var e=this.CONTEXT_UID,n=this.gl;return t._glBuffers[e]=new En(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]},t}(),wn=(function(t){function e(n){var r=t.call(this,i.n.WEBGL,n)||this;return n=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new rt("destroy"),contextChange:new rt("contextChange"),reset:new rt("reset"),update:new rt("update"),postrender:new rt("postrender"),prerender:new rt("prerender"),resize:new rt("resize")},r.runners.contextChange.add(r),r.globalUniforms=new oe({projectionMatrix:new ht},!0),r.addSystem(Ke,"mask").addSystem(pe,"context").addSystem(dn,"state").addSystem(pn,"shader").addSystem(vn,"texture").addSystem(Tn,"buffer").addSystem(_e,"geometry").addSystem(me,"framebuffer").addSystem(Je,"scissor").addSystem(Qe,"stencil").addSystem(tn,"projection").addSystem(yn,"textureGC").addSystem(ce,"filter").addSystem(rn,"renderTexture").addSystem(he,"batch"),r.initPlugins(e.__plugins),r.multisample=void 0,n.context?r.context.initFromContext(n.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:n.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,function(t){var e;if(!U){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var n=["\n %c %c %c PixiJS 6.2.0 -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=self.console).log.apply(e,n)}else self.console&&self.console.log("PixiJS 6.2.0 - "+t+" - http://www.pixijs.com/");U=!0}}(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}wt(e,t),e.create=function(t){if(void 0===F&&(F=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:r.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i=!(!n||!n.getContextAttributes().stencil);if(n){var o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,i}catch(t){return!1}}()),F)return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t,e=this.gl;if(1===this.context.webGLVersion){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}t>=i.l.HIGH?this.multisample=i.l.HIGH:t>=i.l.MEDIUM?this.multisample=i.l.MEDIUM:t>=i.l.LOW?this.multisample=i.l.LOW:this.multisample=i.l.NONE},e.prototype.addSystem=function(t,e){var n=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var r in this[e]=n,this.runners)this.runners[r].add(n);return this},e.prototype.render=function(t,e){var n,r,i,o;if(e&&(e instanceof Yt?(K("6.0.0","Renderer#render arguments changed, use options instead."),n=e,r=arguments[2],i=arguments[3],o=arguments[4]):(n=e.renderTexture,r=e.clear,i=e.transform,o=e.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=i,!this.context.isLost){if(n||(this._lastObjectRendered=t),!o){var a=t.enableTempParent();t.updateTransform(),t.disableTempParent(a)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(e,n,r,i){void 0===n&&(n={});var o=t.prototype.generateTexture.call(this,e,n,r,i);return this.framebuffer.blit(),o},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var n in this.runners.destroy.emit(),this.runners)this.runners[n].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return K("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,n){e.__plugins=e.__plugins||{},e.__plugins[t]=n}}(bn),function(){this.texArray=null,this.blend=0,this.type=i.f.TRIANGLES,this.start=0,this.size=0,this.data=null}),xn=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),Sn=function(){function t(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),On=function(t){function e(e){var n=t.call(this,e)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=Xe.for2d(),n.size=4*r.b.SPRITE_BATCH_SIZE,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),e.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return wt(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;r.b.PREFER_ENV===i.g.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),r.b.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=e.createShader(e.FRAGMENT_SHADER);;){var r=Be.replace(/%forloop%/gi,Fe(t));if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,n=e._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new wn);for(;n.length<i;)n.push(new xn);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,n=this.MAX_TEXTURES,r=e._textureArrayPool,i=this.renderer.batch,o=this._tempBoundTextures,a=this.renderer.textureGC.count,s=++Rt._globalBatch,u=0,c=r[0],l=0;i.copyBoundTextures(o,n);for(var h=0;h<this._bufferSize;++h){var f=t[h];t[h]=null,f._batchEnabled!==s&&(c.count>=n&&(i.boundArray(c,o,s,n),this.buildDrawCalls(c,l,h),l=h,c=r[++u],++s),f._batchEnabled=s,f.touched=a,c.elements[c.count++]=f)}c.count>0&&(i.boundArray(c,o,s,n),this.buildDrawCalls(c,l,this._bufferSize),++u,++s);for(h=0;h<o.length;h++)o[h]=null;Rt._globalBatch=s},e.prototype.buildDrawCalls=function(t,n,r){var i=this._bufferedElements,o=this._attributeBuffer,a=this._indexBuffer,s=this.vertexSize,u=e._drawCallPool,c=this._dcIndex,l=this._aIndex,h=this._iIndex,f=u[c];f.start=this._iIndex,f.texArray=t;for(var p=n;p<r;++p){var d=i[p],y=d._texture.baseTexture,m=G[y.alphaMode?1:0][d.blendMode];i[p]=null,n<p&&f.blend!==m&&(f.size=h-f.start,n=p,(f=u[++c]).texArray=t,f.start=h),this.packInterleavedGeometry(d,o,a,l,h),l+=d.vertexData.length/2*s,h+=d.indices.length,f.blend=m}n<r&&(f.size=h-f.start,++c),this._dcIndex=c,this._aIndex=l,this._iIndex=h},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,n=this._indexBuffer;r.b.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,n=this.renderer,r=n.gl,i=n.state,o=e._drawCallPool,a=null,s=0;s<t;s++){var u=o[s],c=u.texArray,l=u.type,h=u.size,f=u.start,p=u.blend;a!==c&&(a=c,this.bindAndClearTexArray(c)),this.state.blendMode=p,i.set(this.state),r.drawElements(l,h,r.UNSIGNED_SHORT,2*f)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),r.b.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=V(Math.ceil(t/8)),n=W(e),r=8*e;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new Sn(r*this.vertexSize*4)),i},e.prototype.getIndexBuffer=function(t){var e=V(Math.ceil(t/12)),n=W(e),r=12*e;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i},e.prototype.packInterleavedGeometry=function(t,e,n,r,i){for(var o=e.uint32View,a=e.float32View,s=r/this.vertexSize,u=t.uvs,c=t.indices,l=t.vertexData,h=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),p=f<1&&t._texture.baseTexture.alphaMode?function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var n=t>>16&255,r=t>>8&255,i=255&t;return(255*e<<24)+((n=n*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(i=i*e+.5|0)}(t._tintRGB,f):t._tintRGB+(255*f<<24),d=0;d<l.length;d+=2)a[r++]=l[d],a[r++]=l[d+1],a[r++]=u[d],a[r++]=u[d+1],o[r++]=p,a[r++]=h;for(d=0;d<c.length;d++)n[i++]=s+c[d]},e._drawCallPool=[],e._textureArrayPool=[],e}(le),Pn=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),n=0;n<t;n++)e[n]=n;this.defaultGroupCache[t]=oe.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new He(this.vertexSrc,r)}var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new ht,default:this.defaultGroupCache[t]};return new Ve(this.programCache[t],i)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var n=0;n<t;n++)n>0&&(e+="\nelse "),n<t-1&&(e+="if(vTextureId < "+n+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},t}(),Rn=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n._buffer=new Zt(null,e,!1),n._indexBuffer=new Zt(null,e,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,i.r.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,i.r.FLOAT).addAttribute("aColor",n._buffer,4,!0,i.r.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,i.r.FLOAT).addIndex(n._indexBuffer),n}return wt(e,t),e}(ee),An="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",In="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",Cn=(function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:An,fragment:In,geometryClass:Rn,vertexSize:6},t),n=e.vertex,r=e.fragment,i=e.vertexSize,o=e.geometryClass;return function(t){function e(e){var a=t.call(this,e)||this;return a.shaderGenerator=new Pn(n,r),a.geometryClass=o,a.vertexSize=i,a}return wt(e,t),e}(On)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return An},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return In},enumerable:!1,configurable:!0}),t}().create(),{}),kn=function(t){Object.defineProperty(Cn,t,{get:function(){return K("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),Bt[t]}})};for(var Nn in Bt)kn(Nn);var Mn={},jn=function(t){Object.defineProperty(Mn,t,{get:function(){return K("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),_n[t]}})};for(var Nn in _n)jn(Nn);var Dn=function(){function t(t){this.renderer=t}return t.prototype.render=function(t){var e=this.renderer,n=t.worldTransform;e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),e.setContextTransform(n,t.roundPixels),t.drawMode!==i.f.TRIANGLES?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.geometry.buffers[0].data.length,n=0;n<e-2;n++){var r=2*n;this._renderDrawTriangle(t,r,r+2,r+4)}},t.prototype._renderTriangles=function(t){for(var e=t.geometry.getIndex().data,n=e.length,r=0;r<n;r+=3){var i=2*e[r],o=2*e[r+1],a=2*e[r+2];this._renderDrawTriangle(t,i,o,a)}},t.prototype._renderDrawTriangle=function(t,e,n,r){var i=this.renderer.context,a=t.geometry.buffers[0].data,s=t.uvs,u=t.texture;if(u.valid){var c=16777215!==t.tint,l=u.baseTexture,h=l.width,f=l.height;c&&t._cachedTint!==t.tint&&(t._cachedTint=t.tint,t._cachedTexture=t._cachedTexture||new Xt(l),t._tintedCanvas=o.b.getTintedCanvas({texture:t._cachedTexture},t.tint));var p=c?t._tintedCanvas:l.getDrawableSource(),d=s[e]*l.width,y=s[n]*l.width,m=s[r]*l.width,v=s[e+1]*l.height,_=s[n+1]*l.height,g=s[r+1]*l.height,b=a[e],E=a[n],T=a[r],w=a[e+1],x=a[n+1],S=a[r+1],O=t.canvasPadding/this.renderer.resolution;if(O>0){var P=t.worldTransform,R=P.a,A=P.b,I=P.c,C=P.d,k=(b+E+T)/3,N=(w+x+S)/3,M=b-k,j=w-N,D=R*M+I*j,L=A*M+C*j,B=Math.sqrt(D*D+L*L),F=1+O/B;b=k+M*F,w=N+j*F,D=R*(M=E-k)+I*(j=x-N),L=A*M+C*j,E=k+M*(F=1+O/(B=Math.sqrt(D*D+L*L))),x=N+j*F,D=R*(M=T-k)+I*(j=S-N),L=A*M+C*j,T=k+M*(F=1+O/(B=Math.sqrt(D*D+L*L))),S=N+j*F}i.save(),i.beginPath(),i.moveTo(b,w),i.lineTo(E,x),i.lineTo(T,S),i.closePath(),i.clip();var U=d*_+v*m+y*g-_*m-v*y-d*g,G=b*_+v*T+E*g-_*T-v*E-b*g,H=d*E+b*m+y*T-E*m-b*y-d*T,V=d*_*T+v*E*m+b*y*g-b*_*m-v*y*T-d*E*g,X=w*_+v*S+x*g-_*S-v*x-w*g,W=d*x+w*m+y*S-x*m-w*y-d*S,Y=d*_*S+v*x*m+w*y*g-w*_*m-v*y*S-d*x*g;i.transform(G/U,X/U,H/U,W/U,V/U,Y/U),i.drawImage(p,0,0,h*l.resolution,f*l.resolution,0,0,h,f),i.restore(),this.renderer.invalidateBlendMode()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,n=t.geometry.getBuffer("aVertexPosition").data,r=n.length/2;e.beginPath();for(var i=1;i<r-2;++i){var o=2*i,a=n[o],s=n[o+1],u=n[o+2],c=n[o+3],l=n[o+4],h=n[o+5];e.moveTo(a,s),e.lineTo(u,c),e.lineTo(l,h)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();r.b.MESH_CANVAS_PADDING=0,a.d.prototype._renderCanvas=function(t,e){t.plugins.mesh.render(e)},s.a.prototype._cachedTint=16777215,s.a.prototype._tintedCanvas=null,s.a.prototype._canvasUvs=null,s.a.prototype._renderCanvas=function(t){var e=t.context,n=this.worldTransform,r=16777215!==this.tint,i=this.texture;if(i.valid){r&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedCanvas=o.b.getTintedCanvas(this,this.tint));var a=r?this._tintedCanvas:i.baseTexture.getDrawableSource();this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);var s=this.vertices,u=this._canvasUvs,c=r?0:i.frame.x,l=r?0:i.frame.y,h=c+i.frame.width,f=l+i.frame.height;u[0]=c,u[1]=c+this._leftWidth,u[2]=h-this._rightWidth,u[3]=h,u[4]=l,u[5]=l+this._topHeight,u[6]=f-this._bottomHeight,u[7]=f;for(var p=0;p<8;p++)u[p]*=i.baseTexture.resolution;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),t.setContextTransform(n,this.roundPixels);for(var d=0;d<3;d++)for(var y=0;y<3;y++){var m=2*y+8*d,v=Math.max(1,u[y+1]-u[y]),_=Math.max(1,u[d+5]-u[d+4]),g=Math.max(1,s[m+10]-s[m]),b=Math.max(1,s[m+11]-s[m+1]);e.drawImage(a,u[y],u[d+4],v,_,s[m],s[m+1],g,b)}}};var Ln=!1;a.a.prototype._cachedTint=16777215,a.a.prototype._tintedCanvas=null,a.a.prototype._cachedTexture=null,a.a.prototype._renderCanvas=function(t){this.shader.uvMatrix&&(this.shader.uvMatrix.update(),this.calculateUvs()),this.material._renderCanvas?this.material._renderCanvas(t,this):Ln||(Ln=!0,self.console&&console.warn("Mesh with custom shaders are not supported in CanvasRenderer."))},a.a.prototype._canvasPadding=null,Object.defineProperty(a.a.prototype,"canvasPadding",{get:function(){return null!==this._canvasPadding?this._canvasPadding:r.b.MESH_CANVAS_PADDING},set:function(t){this._canvasPadding=t}}),s.d.prototype._renderCanvas=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),this.shader.update&&this.shader.update(),this.calculateUvs(),this.material._renderCanvas(t,this)},s.f.prototype._renderCanvas=function(t){(this.autoUpdate||this.geometry._width!==this.shader.texture.height)&&(this.geometry._width=this.shader.texture.height,this.geometry.update()),this.shader.update&&this.shader.update(),this.calculateUvs(),this.material._renderCanvas(t,this)}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/@pixi/canvas-renderer/dist/esm/canvas-renderer.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return d}));var r=n("./node_modules/@pixi/core/dist/esm/core.js"),i=n("./node_modules/@pixi/utils/dist/esm/utils.js"),o=n("./node_modules/@pixi/math/dist/esm/math.js"),a=n("./node_modules/@pixi/constants/dist/esm/constants.js"),s=n("./node_modules/@pixi/settings/dist/esm/settings.js"),u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var c=function(){function t(t){this._foundShapes=[],this.renderer=t}return t.prototype.pushMask=function(t){var e=this.renderer,n=t.maskObject||t;e.context.save();var r=this._foundShapes;if(this.recursiveFindShapes(n,r),r.length>0){var i=e.context;i.beginPath();for(var o=0;o<r.length;o++){var a=r[o],s=a.transform.worldTransform;this.renderer.setContextTransform(s),this.renderGraphicsShape(a)}r.length=0,i.clip()}},t.prototype.recursiveFindShapes=function(t,e){t.geometry&&t.geometry.graphicsData&&e.push(t);var n=t.children;if(n)for(var r=0;r<n.length;r++)this.recursiveFindShapes(n[r],e)},t.prototype.renderGraphicsShape=function(t){t.finishPoly();var e=this.renderer.context,n=t.geometry.graphicsData,r=n.length;if(0!==r)for(var i=0;i<r;i++){var a=n[i],s=a.shape;if(s.type===o.l.POLY){var u=s.points,c=a.holes,l=void 0,h=void 0,f=void 0,p=void 0;e.moveTo(u[0],u[1]);for(var d=1;d<u.length/2;d++)e.lineTo(u[2*d],u[2*d+1]);if(c.length>0){l=0,f=u[0],p=u[1];for(d=2;d+2<u.length;d+=2)l+=(u[d]-f)*(u[d+3]-p)-(u[d+2]-f)*(u[d+1]-p);for(var y=0;y<c.length;y++)if(u=c[y].shape.points){h=0,f=u[0],p=u[1];for(d=2;d+2<u.length;d+=2)h+=(u[d]-f)*(u[d+3]-p)-(u[d+2]-f)*(u[d+1]-p);if(h*l<0){e.moveTo(u[0],u[1]);for(d=2;d<u.length;d+=2)e.lineTo(u[d],u[d+1])}else{e.moveTo(u[u.length-2],u[u.length-1]);for(d=u.length-4;d>=0;d-=2)e.lineTo(u[d],u[d+1])}c[y].shape.closeStroke&&e.closePath()}}u[0]===u[u.length-2]&&u[1]===u[u.length-1]&&e.closePath()}else if(s.type===o.l.RECT)e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(s.type===o.l.CIRC)e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(s.type===o.l.ELIP){var m=2*s.width,v=2*s.height,_=s.x-m/2,g=s.y-v/2,b=m/2*.5522848,E=v/2*.5522848,T=_+m,w=g+v,x=_+m/2,S=g+v/2;e.moveTo(_,S),e.bezierCurveTo(_,S-E,x-b,g,x,g),e.bezierCurveTo(x+b,g,T,S-E,T,S),e.bezierCurveTo(T,S+E,x+b,w,x,w),e.bezierCurveTo(x-b,w,_,S+E,_,S),e.closePath()}else if(s.type===o.l.RREC){var O=s.x,P=s.y,R=s.width,A=s.height,I=s.radius,C=Math.min(R,A)/2;I=I>C?C:I,e.moveTo(O,P+I),e.lineTo(O,P+A-I),e.quadraticCurveTo(O,P+A,O+I,P+A),e.lineTo(O+R-I,P+A),e.quadraticCurveTo(O+R,P+A,O+R,P+A-I),e.lineTo(O+R,P+I),e.quadraticCurveTo(O+R,P,O+R-I,P),e.lineTo(O+I,P),e.quadraticCurveTo(O,P,O,P+I),e.closePath()}}},t.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},t.prototype.destroy=function(){},t}();function l(t){var e=document.createElement("canvas");e.width=6,e.height=1;var n=e.getContext("2d");return n.fillStyle=t,n.fillRect(0,0,6,1),e}function h(){if("undefined"==typeof document)return!1;var t=l("#ff00ff"),e=l("#ffff00"),n=document.createElement("canvas");n.width=6,n.height=1;var r=n.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(t,0,0),r.drawImage(e,2,0);var i=r.getImageData(2,0,1,1);if(!i)return!1;var o=i.data;return 255===o[0]&&0===o[1]&&0===o[2]}var f=new o.d,p=function(t){function e(n){var r,o=t.call(this,a.n.CANVAS,n)||this;if(o.refresh=!0,o.maskManager=new c(o),o.smoothProperty="imageSmoothingEnabled",o.blendModes=(void 0===r&&(r=[]),h()?(r[a.b.NORMAL]="source-over",r[a.b.ADD]="lighter",r[a.b.MULTIPLY]="multiply",r[a.b.SCREEN]="screen",r[a.b.OVERLAY]="overlay",r[a.b.DARKEN]="darken",r[a.b.LIGHTEN]="lighten",r[a.b.COLOR_DODGE]="color-dodge",r[a.b.COLOR_BURN]="color-burn",r[a.b.HARD_LIGHT]="hard-light",r[a.b.SOFT_LIGHT]="soft-light",r[a.b.DIFFERENCE]="difference",r[a.b.EXCLUSION]="exclusion",r[a.b.HUE]="hue",r[a.b.SATURATION]="saturate",r[a.b.COLOR]="color",r[a.b.LUMINOSITY]="luminosity"):(r[a.b.NORMAL]="source-over",r[a.b.ADD]="lighter",r[a.b.MULTIPLY]="source-over",r[a.b.SCREEN]="source-over",r[a.b.OVERLAY]="source-over",r[a.b.DARKEN]="source-over",r[a.b.LIGHTEN]="source-over",r[a.b.COLOR_DODGE]="source-over",r[a.b.COLOR_BURN]="source-over",r[a.b.HARD_LIGHT]="source-over",r[a.b.SOFT_LIGHT]="source-over",r[a.b.DIFFERENCE]="source-over",r[a.b.EXCLUSION]="source-over",r[a.b.HUE]="source-over",r[a.b.SATURATION]="source-over",r[a.b.COLOR]="source-over",r[a.b.LUMINOSITY]="source-over"),r[a.b.NORMAL_NPM]=r[a.b.NORMAL],r[a.b.ADD_NPM]=r[a.b.ADD],r[a.b.SCREEN_NPM]=r[a.b.SCREEN],r[a.b.SRC_IN]="source-in",r[a.b.SRC_OUT]="source-out",r[a.b.SRC_ATOP]="source-atop",r[a.b.DST_OVER]="destination-over",r[a.b.DST_IN]="destination-in",r[a.b.DST_OUT]="destination-out",r[a.b.DST_ATOP]="destination-atop",r[a.b.XOR]="xor",r[a.b.SUBTRACT]="source-over",r),o.renderingToScreen=!1,o._activeBlendMode=null,o._projTransform=null,o._outerBlend=!1,o.rootContext=o.view.getContext("2d",{alpha:o.useContextAlpha}),o.context=o.rootContext,!o.rootContext.imageSmoothingEnabled){var s=o.rootContext;s.webkitImageSmoothingEnabled?o.smoothProperty="webkitImageSmoothingEnabled":s.mozImageSmoothingEnabled?o.smoothProperty="mozImageSmoothingEnabled":s.oImageSmoothingEnabled?o.smoothProperty="oImageSmoothingEnabled":s.msImageSmoothingEnabled&&(o.smoothProperty="msImageSmoothingEnabled")}return o.initPlugins(e.__plugins),Object(i.sayHello)("Canvas"),o.resize(o.options.width,o.options.height),o}return function(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.render=function(t,e){if(this.view){var n,o,s,u;e&&(e instanceof r.P||e instanceof r.g?(Object(i.deprecation)("6.0.0","CanvasRenderer#render arguments changed, use options instead."),n=e,o=arguments[2],s=arguments[3],u=arguments[4]):(n=e.renderTexture,o=e.clear,s=e.transform,u=e.skipUpdateTransform)),this.renderingToScreen=!n,this.emit("prerender");var c=this.resolution;n?((n=n.castToBaseTexture())._canvasRenderTarget||(n._canvasRenderTarget=new i.CanvasRenderTarget(n.width,n.height,n.resolution),n.resource=new r.r(n._canvasRenderTarget.canvas),n.valid=!0),this.context=n._canvasRenderTarget.context,this.resolution=n._canvasRenderTarget.resolution):this.context=this.rootContext;var l=this.context;if(this._projTransform=s||null,n||(this._lastObjectRendered=t),!u){var h=t.enableTempParent();t.updateTransform(),t.disableTempParent(h)}if(l.save(),l.setTransform(1,0,0,1,0,0),l.globalAlpha=1,this._activeBlendMode=a.b.NORMAL,this._outerBlend=!1,l.globalCompositeOperation=this.blendModes[a.b.NORMAL],void 0!==o?o:this.clearBeforeRender)if(this.renderingToScreen)l.clearRect(0,0,this.width,this.height),this.backgroundAlpha>0&&(l.globalAlpha=this.useContextAlpha?this.backgroundAlpha:1,l.fillStyle=this._backgroundColorString,l.fillRect(0,0,this.width,this.height),l.globalAlpha=1);else{(n=n)._canvasRenderTarget.clear();var f=n.clearColor;f[3]>0&&(l.globalAlpha=this.useContextAlpha?f[3]:1,l.fillStyle=Object(i.hex2string)(Object(i.rgb2hex)(f)),l.fillRect(0,0,n.realWidth,n.realHeight),l.globalAlpha=1)}var p=this.context;this.context=l,t.renderCanvas(this),this.context=p,l.restore(),this.resolution=c,this._projTransform=null,this.emit("postrender")}},e.prototype.setContextTransform=function(t,e,n){var r=t,i=this._projTransform,o=this.resolution;n=n||o,i&&((r=f).copyFrom(t),r.prepend(i)),e?this.context.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*o|0,r.ty*o|0):this.context.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*o,r.ty*o)},e.prototype.clear=function(t,e){void 0===t&&(t=this._backgroundColorString),void 0===e&&(e=this.backgroundAlpha);var n=this.context;n.clearRect(0,0,this.width,this.height),t&&(n.globalAlpha=this.useContextAlpha?e:1,n.fillStyle=t,n.fillRect(0,0,this.width,this.height),n.globalAlpha=1)},e.prototype.setBlendMode=function(t,e){var n=t===a.b.SRC_IN||t===a.b.SRC_OUT||t===a.b.DST_IN||t===a.b.DST_ATOP;!e&&n&&(t=a.b.NORMAL),this._activeBlendMode!==t&&(this._activeBlendMode=t,this._outerBlend=n,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.smoothProperty&&(this.rootContext[this.smoothProperty]=s.b.SCALE_MODE===a.p.LINEAR)},e.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},e.registerPlugin=function(t,n){e.__plugins=e.__plugins||{},e.__plugins[t]=n},e}(r.c),d={canvas:null,getTintedCanvas:function(t,e){var n=t.texture,r="#"+("00000"+(0|(e=d.roundColor(e))).toString(16)).substr(-6);n.tintCache=n.tintCache||{};var i,o=n.tintCache[r];if(o){if(o.tintId===n._updateID)return n.tintCache[r];i=n.tintCache[r]}else i=document.createElement("canvas");if(d.tintMethod(n,e,i),i.tintId=n._updateID,d.convertTintToImage){var a=new Image;a.src=i.toDataURL(),n.tintCache[r]=a}else n.tintCache[r]=i;return i},getTintedPattern:function(t,e){var n="#"+("00000"+(0|(e=d.roundColor(e))).toString(16)).substr(-6);t.patternCache=t.patternCache||{};var r=t.patternCache[n];return r&&r.tintId===t._updateID||(d.canvas||(d.canvas=document.createElement("canvas")),d.tintMethod(t,e,d.canvas),(r=d.canvas.getContext("2d").createPattern(d.canvas,"repeat")).tintId=t._updateID,t.patternCache[n]=r),r},tintWithMultiply:function(t,e,n){var r=n.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="multiply";var a=t.baseTexture.getDrawableSource();r.drawImage(a,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(a,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithOverlay:function(t,e,n){var r=n.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.getDrawableSource(),i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithPerPixel:function(t,e,n){var r=n.getContext("2d"),o=t._frame.clone(),a=t.baseTexture.resolution;o.x*=a,o.y*=a,o.width*=a,o.height*=a,n.width=Math.ceil(o.width),n.height=Math.ceil(o.height),r.save(),r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.getDrawableSource(),o.x,o.y,o.width,o.height,0,0,o.width,o.height),r.restore();for(var s=Object(i.hex2rgb)(e),u=s[0],c=s[1],l=s[2],h=r.getImageData(0,0,o.width,o.height),f=h.data,p=0;p<f.length;p+=4)f[p+0]*=u,f[p+1]*=c,f[p+2]*=l;r.putImageData(h,0,0)},roundColor:function(t){var e=d.cacheStepsPerColorChannel,n=Object(i.hex2rgb)(t);return n[0]=Math.min(255,n[0]/e*e),n[1]=Math.min(255,n[1]/e*e),n[2]=Math.min(255,n[2]/e*e),Object(i.rgb2hex)(n)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:h(),tintMethod:null};d.tintMethod=d.canUseMultiply?d.tintWithMultiply:d.tintWithPerPixel;var y=r.S.create;r.S.create=function(t){if(!(t&&t.forceCanvas))try{return y(t)}catch(t){}return new p(t)},r.h.prototype.getDrawableSource=function(){var t=this.resource;return t?t.bitmap||t.source:null},r.g.prototype._canvasRenderTarget=null,r.db.prototype.patternCache=null,r.db.prototype.tintCache=null},"./node_modules/@pixi/constants/dist/esm/constants.js":function(t,e,n){"use strict";
/*!
 * @pixi/constants - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var r,i,o,a,s,u,c,l,h,f,p,d,y,m,v,_,g,b,E;n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return E})),n.d(e,"e",(function(){return m})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return r})),n.d(e,"h",(function(){return u})),n.d(e,"i",(function(){return v})),n.d(e,"j",(function(){return g})),n.d(e,"k",(function(){return d})),n.d(e,"l",(function(){return b})),n.d(e,"m",(function(){return _})),n.d(e,"n",(function(){return i})),n.d(e,"o",(function(){return h})),n.d(e,"p",(function(){return f})),n.d(e,"q",(function(){return c})),n.d(e,"r",(function(){return l})),n.d(e,"s",(function(){return p})),function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(r||(r={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(i||(i={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(o||(o={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(a||(a={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(s||(s={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(u||(u={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(c||(c={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(l||(l={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(h||(h={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(f||(f={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(p||(p={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(d||(d={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(y||(y={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(m||(m={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(v||(v={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(_||(_={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(g||(g={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(b||(b={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(E||(E={}))},"./node_modules/@pixi/core/dist/esm/core.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return we})),n.d(e,"b",(function(){return _})),n.d(e,"c",(function(){return fe})),n.d(e,"d",(function(){return g})),n.d(e,"e",(function(){return L})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return I})),n.d(e,"h",(function(){return v})),n.d(e,"i",(function(){return be})),n.d(e,"j",(function(){return Se})),n.d(e,"k",(function(){return Re})),n.d(e,"l",(function(){return Ae})),n.d(e,"m",(function(){return xe})),n.d(e,"n",(function(){return tt})),n.d(e,"o",(function(){return Ee})),n.d(e,"p",(function(){return F})),n.d(e,"q",(function(){return y})),n.d(e,"r",(function(){return E})),n.d(e,"s",(function(){return nt})),n.d(e,"t",(function(){return T})),n.d(e,"u",(function(){return jt})),n.d(e,"v",(function(){return K})),n.d(e,"w",(function(){return J})),n.d(e,"x",(function(){return A})),n.d(e,"y",(function(){return ot})),n.d(e,"z",(function(){return rt})),n.d(e,"A",(function(){return ee})),n.d(e,"B",(function(){return ue})),n.d(e,"C",(function(){return X})),n.d(e,"D",(function(){return st})),n.d(e,"E",(function(){return te})),n.d(e,"F",(function(){return c})),n.d(e,"G",(function(){return O})),n.d(e,"H",(function(){return w})),n.d(e,"I",(function(){return ut})),n.d(e,"J",(function(){return Ft})),n.d(e,"K",(function(){return Q})),n.d(e,"L",(function(){return kt})),n.d(e,"M",(function(){return Xt})),n.d(e,"N",(function(){return W})),n.d(e,"O",(function(){return Y})),n.d(e,"P",(function(){return j})),n.d(e,"Q",(function(){return D})),n.d(e,"R",(function(){return zt})),n.d(e,"S",(function(){return ye})),n.d(e,"T",(function(){return d})),n.d(e,"U",(function(){return x})),n.d(e,"V",(function(){return Ht})),n.d(e,"W",(function(){return Nt})),n.d(e,"X",(function(){return oe})),n.d(e,"Y",(function(){return Bt})),n.d(e,"Z",(function(){return Mt})),n.d(e,"ab",(function(){return ae})),n.d(e,"bb",(function(){return Vt})),n.d(e,"cb",(function(){return ge})),n.d(e,"db",(function(){return N})),n.d(e,"eb",(function(){return se})),n.d(e,"fb",(function(){return Lt})),n.d(e,"gb",(function(){return ce})),n.d(e,"hb",(function(){return C})),n.d(e,"ib",(function(){return q})),n.d(e,"jb",(function(){return S})),n.d(e,"kb",(function(){return Te})),n.d(e,"lb",(function(){return me})),n.d(e,"mb",(function(){return l})),n.d(e,"nb",(function(){return At})),n.d(e,"ob",(function(){return $t})),n.d(e,"pb",(function(){return _e})),n.d(e,"qb",(function(){return ve})),n.d(e,"rb",(function(){return ne})),n.d(e,"sb",(function(){return Qt})),n.d(e,"tb",(function(){return mt})),n.d(e,"ub",(function(){return Jt})),n.d(e,"vb",(function(){return Ie})),n.d(e,"wb",(function(){return Ne})),n.d(e,"xb",(function(){return wt}));var r=n("./node_modules/@pixi/settings/dist/esm/settings.js"),i=n("./node_modules/@pixi/constants/dist/esm/constants.js"),o=n("./node_modules/@pixi/utils/dist/esm/utils.js"),a=n("./node_modules/@pixi/runner/dist/esm/runner.js"),s=n("./node_modules/@pixi/ticker/dist/esm/ticker.js"),u=n("./node_modules/@pixi/math/dist/esm/math.js");
/*!
 * @pixi/core - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
r.b.PREFER_ENV=o.isMobile.any?i.g.WEBGL:i.g.WEBGL2,r.b.STRICT_TEXTURE_CACHE=!1;var c=[];function l(t,e){if(!t)return null;var n="";if("string"==typeof t){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(n=r[1].toLowerCase())}for(var i=c.length-1;i>=0;--i){var o=c[i];if(o.test&&o.test(t,n))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function f(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var p=function(){return(p=Object.assign||function(t){for(var e,n=arguments,r=1,i=arguments.length;r<i;r++)for(var o in e=n[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var d=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new a.a("setRealSize"),this.onUpdate=new a.a("update"),this.onError=new a.a("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,n){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),y=function(t){function e(e,n){var r=this,i=n||{},o=i.width,a=i.height;if(!o||!a)throw new Error("BufferResource width or height invalid");return(r=t.call(this,o,a)||this).data=e,r}return f(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.a.UNPACK);var o=e.realWidth,a=e.realHeight;return n.width===o&&n.height===a?r.texSubImage2D(e.target,0,0,0,o,a,e.format,n.type,this.data):(n.width=o,n.height=a,r.texImage2D(e.target,0,n.internalFormat,o,a,0,e.format,n.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(d),m={scaleMode:i.p.NEAREST,format:i.h.RGBA,alphaMode:i.a.NPM},v=function(t){function e(e,n){void 0===e&&(e=null),void 0===n&&(n=null);var a=t.call(this)||this,s=(n=n||{}).alphaMode,u=n.mipmap,c=n.anisotropicLevel,h=n.scaleMode,f=n.width,p=n.height,y=n.wrapMode,m=n.format,v=n.type,_=n.target,g=n.resolution,b=n.resourceOptions;return!e||e instanceof d||((e=l(e,b)).internal=!0),a.resolution=g||r.b.RESOLUTION,a.width=Math.round((f||0)*a.resolution)/a.resolution,a.height=Math.round((p||0)*a.resolution)/a.resolution,a._mipmap=void 0!==u?u:r.b.MIPMAP_TEXTURES,a.anisotropicLevel=void 0!==c?c:r.b.ANISOTROPIC_LEVEL,a._wrapMode=y||r.b.WRAP_MODE,a._scaleMode=void 0!==h?h:r.b.SCALE_MODE,a.format=m||i.h.RGBA,a.type=v||i.r.UNSIGNED_BYTE,a.target=_||i.q.TEXTURE_2D,a.alphaMode=void 0!==s?s:i.a.UNPACK,a.uid=Object(o.uid)(),a.touched=0,a.isPowerOfTwo=!1,a._refreshPOT(),a._glTextures={},a.dirtyId=0,a.dirtyStyleId=0,a.cacheId=null,a.valid=f>0&&p>0,a.textureCacheIds=[],a.destroyed=!1,a.resource=null,a._batchEnabled=0,a._batchLocation=0,a.parentTextureArray=null,a.setResource(e),a}return f(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var n;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,n){return n=n||this.resolution,this.setRealSize(t*n,e*n,n)},e.prototype.setRealSize=function(t,e,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Object(o.isPow2)(this.realWidth)&&Object(o.isPow2)(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete o.BaseTextureCache[this.cacheId],delete o.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,n,i){void 0===i&&(i=r.b.STRICT_TEXTURE_CACHE);var a="string"==typeof t,s=null;if(a)s=t;else{if(!t._pixiId){var u=n&&n.pixiIdPrefix||"pixiid";t._pixiId=u+"_"+Object(o.uid)()}s=t._pixiId}var c=o.BaseTextureCache[s];if(a&&i&&!c)throw new Error('The cacheId "'+s+'" does not exist in BaseTextureCache.');return c||((c=new e(t,n)).cacheId=s,e.addToCache(c,s)),c},e.fromBuffer=function(t,n,r,o){t=t||new Float32Array(n*r*4);var a=new y(t,{width:n,height:r}),s=t instanceof Float32Array?i.r.FLOAT:i.r.UNSIGNED_BYTE;return new e(a,Object.assign(m,o||{width:n,height:r,type:s}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),o.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),o.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=o.BaseTextureCache[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete o.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete o.BaseTextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(o.EventEmitter),_=function(t){function e(e,n){var r=this,i=n||{},o=i.width,a=i.height;(r=t.call(this,o,a)||this).items=[],r.itemDirtyIds=[];for(var s=0;s<e;s++){var u=new v;r.items.push(u),r.itemDirtyIds.push(-2)}return r.length=e,r._load=null,r.baseTexture=null,r}return f(e,t),e.prototype.initFromArray=function(t,e){for(var n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof d?this.addResourceAt(t[n],n):this.addResourceAt(l(t[n],e),n))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],n=e.realWidth,r=e.realHeight;return t.resize(n,r),Promise.resolve(t)})),this._load},e}(d),g=function(t){function e(e,n){var r,i,o=this,a=n||{},s=a.width,u=a.height;return Array.isArray(e)?(r=e,i=e.length):i=e,o=t.call(this,i,{width:s,height:u})||this,r&&o.initFromArray(r,n),o}return f(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=i.q.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,n){var r=this.length,i=this.itemDirtyIds,o=this.items,a=t.gl;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,r,0,e.format,n.type,null);for(var s=0;s<r;s++){var u=o[s];i[s]<u.dirtyId&&(i[s]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,s,u.resource.width,u.resource.height,1,e.format,n.type,u.resource.source))}return!0},e}(_),b=function(t){function e(e){var n=this,r=e,i=r.naturalWidth||r.videoWidth||r.width,o=r.naturalHeight||r.videoHeight||r.height;return(n=t.call(this,i,o)||this).source=e,n.noSubImage=!1,n}return f(e,t),e.crossOrigin=function(t,e,n){void 0===n&&0!==e.indexOf("data:")?t.crossOrigin=Object(o.determineCrossOrigin)(e):!1!==n&&(t.crossOrigin="string"==typeof n?n:"anonymous")},e.prototype.upload=function(t,e,n,r){var o=t.gl,a=e.realWidth,s=e.realHeight;return r=r||this.source,o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.a.UNPACK),this.noSubImage||e.target!==o.TEXTURE_2D||n.width!==a||n.height!==s?(n.width=a,n.height=s,o.texImage2D(e.target,0,n.internalFormat,e.format,n.type,r)):o.texSubImage2D(o.TEXTURE_2D,0,0,0,e.format,n.type,r),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,n=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(n,r),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(d),E=function(t){function e(e){return t.call(this,e)||this}return f(e,t),e.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(b),T=function(t){function e(n,r){var o=this,a=r||{},s=a.width,u=a.height,c=a.autoLoad,l=a.linkBaseTexture;if(n&&n.length!==e.SIDES)throw new Error("Invalid length. Got "+n.length+", expected 6");o=t.call(this,6,{width:s,height:u})||this;for(var h=0;h<e.SIDES;h++)o.items[h].target=i.q.TEXTURE_CUBE_MAP_POSITIVE_X+h;return o.linkBaseTexture=!1!==l,n&&o.initFromArray(n,r),!1!==c&&o.load(),o}return f(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=i.q.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,n){if(void 0===n&&(n=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=i.q.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,n,r){for(var i=this.itemDirtyIds,o=0;o<e.SIDES;o++){var a=this.items[o];i[o]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(t,a,r),i[o]=a.dirtyId):i[o]<-1&&(t.gl.texImage2D(a.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),i[o]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(_),w=function(t){function e(e,n){var i=this;if(n=n||{},!(e instanceof HTMLImageElement)){var o=new Image;b.crossOrigin(o,e,n.crossorigin),o.src=e,e=o}return i=t.call(this,e)||this,!e.complete&&i._width&&i._height&&(i._width=0,i._height=0),i.url=e.src,i._process=null,i.preserveBitmap=!1,i.createBitmap=(void 0!==n.createBitmap?n.createBitmap:r.b.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,i.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,i.bitmap=null,i._load=null,!1!==n.autoLoad&&i.load(),i}return f(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,n){var r=e.source;e.url=r.src;var i=function(){e.destroyed||(r.onload=null,r.onerror=null,e.resize(r.width,r.height),e._load=null,e.createBitmap?t(e.process()):t(e))};r.complete&&r.src?i():(r.onload=i,r.onerror=function(t){n(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!self.createImageBitmap)return Promise.resolve(this);var n=self.createImageBitmap,r=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then((function(t){return t.blob()})).then((function(r){return n(r,0,0,e.width,e.height,{premultiplyAlpha:t.alphaMode===i.a.UNPACK?"premultiply":"none"})})).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process},e.prototype.upload=function(e,n,r){if("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,n,r,this.bitmap),!this.preserveBitmap){var i=!0,o=n._glTextures;for(var a in o){var s=o[a];if(s!==r&&s.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(b),x=function(t){function e(e,n){var r=this;return n=n||{},(r=t.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=e,r.scale=n.scale||1,r._overrideWidth=n.width,r._overrideHeight=n.height,r._resolve=null,r._crossorigin=n.crossorigin,r._load=null,!1!==n.autoLoad&&r.load(),r}return f(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(n){if(t._resolve=function(){t.resize(t.source.width,t.source.height),n(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;b.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(n){t._resolve&&(e.onerror=null,t.onError.emit(n))},e.onload=function(){if(t._resolve){var n=e.width,r=e.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=n*t.scale,a=r*t.scale;(t._overrideWidth||t._overrideHeight)&&(i=t._overrideWidth||t._overrideHeight/r*n,a=t._overrideHeight||t._overrideWidth/n*r),i=Math.round(i),a=Math.round(a);var s=t.source;s.width=i,s.height=a,s._pixiId="canvas_"+Object(o.uid)(),s.getContext("2d").drawImage(e,0,0,n,r,0,0,i,a),t._resolve(),t._resolve=null}}},e.getSize=function(t){var n=e.SVG_SIZE.exec(t),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,n){return"svg"===n||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(b),S=function(t){function e(n,r){var i=this;if(r=r||{},!(n instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"==typeof n&&(n=[n]);var a=n[0].src||n[0];b.crossOrigin(o,a,r.crossorigin);for(var s=0;s<n.length;++s){var u=document.createElement("source"),c=n[s],l=c.src,h=c.mime,f=(l=l||n[s]).split("?").shift().toLowerCase(),p=f.substr(f.lastIndexOf(".")+1);h=h||e.MIME_TYPES[p]||"video/"+p,u.src=l,u.type=h,o.appendChild(u)}n=o}return(i=t.call(this,n)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==r.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==r.autoLoad&&i.load(),i}return f(e,t),e.prototype.update=function(e){if(!this.destroyed){var n=s.a.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(n){t.valid?n(t):(t._resolve=n,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(s.a.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(s.a.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(s.a.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(s.a.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(s.a.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,n){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(n)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(b),O=function(t){function e(e){return t.call(this,e)||this}return f(e,t),e.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},e}(b);c.push(w,O,E,S,x,y,T,g);var P={__proto__:null,Resource:d,BaseImageResource:b,INSTALLED:c,autoDetectResource:l,AbstractMultiResource:_,ArrayResource:g,BufferResource:y,CanvasResource:E,CubeResource:T,ImageResource:w,SVGResource:x,VideoResource:S,ImageBitmapResource:O},R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===i.a.UNPACK);var o=e.realWidth,a=e.realHeight;return n.width===o&&n.height===a?r.texSubImage2D(e.target,0,0,0,o,a,e.format,n.type,this.data):(n.width=o,n.height=a,r.texImage2D(e.target,0,n.internalFormat,o,a,0,e.format,n.type,this.data)),!0},e}(y),A=function(){function t(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new a.a("disposeFramebuffer"),this.multisample=i.l.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new v(null,{scaleMode:i.p.NEAREST,resolution:1,mipmap:i.k.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new v(new R(null,{width:this.width,height:this.height}),{scaleMode:i.p.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:i.k.OFF,format:i.h.DEPTH_COMPONENT,type:i.r.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var r=this.colorTextures[n],i=r.resolution;r.setSize(t/i,e/i)}if(this.depthTexture){i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,e/i)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),I=function(t){function e(e){var n=this;if("number"==typeof e){var r=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3];e={width:r,height:o,scaleMode:a,resolution:s}}return e.width=e.width||100,e.height=e.height||100,e.multisample=void 0!==e.multisample?e.multisample:i.l.NONE,(n=t.call(this,null,e)||this).mipmap=i.k.OFF,n.valid=!0,n.clearColor=[0,0,0,0],n.framebuffer=new A(n.realWidth,n.realHeight).addColorTexture(0,n),n.framebuffer.multisample=e.multisample,n.maskStack=[],n.filterStack=[{}],n}return f(e,t),e.prototype.resize=function(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(v),C=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,n){var r=e.width,i=e.height;if(n){var o=t.width/2/r,a=t.height/2/i,s=t.x/r+o,c=t.y/i+a;n=u.n.add(n,u.n.NW),this.x0=s+o*u.n.uX(n),this.y0=c+a*u.n.uY(n),n=u.n.add(n,2),this.x1=s+o*u.n.uX(n),this.y1=c+a*u.n.uY(n),n=u.n.add(n,2),this.x2=s+o*u.n.uX(n),this.y2=c+a*u.n.uY(n),n=u.n.add(n,2),this.x3=s+o*u.n.uX(n),this.y3=c+a*u.n.uY(n)}else this.x0=t.x/r,this.y0=t.y/i,this.x1=(t.x+t.width)/r,this.y1=t.y/i,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/i,this.x3=t.x/r,this.y3=(t.y+t.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},t}(),k=new C,N=function(t){function e(n,r,i,o,a,s){var c=t.call(this)||this;if(c.noFrame=!1,r||(c.noFrame=!0,r=new u.j(0,0,1,1)),n instanceof e&&(n=n.baseTexture),c.baseTexture=n,c._frame=r,c.trim=o,c.valid=!1,c._uvs=k,c.uvMatrix=null,c.orig=i||r,c._rotate=Number(a||0),!0===a)c._rotate=2;else if(c._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return c.defaultAnchor=s?new u.g(s.x,s.y):new u.g(0,0),c._updateID=0,c.textureCacheIds=[],n.valid?c.noFrame?n.valid&&c.onBaseTextureUpdated(n):c.frame=r:n.once("loaded",c.onBaseTextureUpdated,c),c.noFrame&&n.on("update",c.onBaseTextureUpdated,c),c}return f(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var n=this.baseTexture.resource;n&&n.url&&o.TextureCache[n.url]&&e.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),n=this._frame===this.orig?t:this.orig.clone(),r=new e(this.baseTexture,!this.noFrame&&t,n,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=t),r},e.prototype.updateUvs=function(){this._uvs===k&&(this._uvs=new C),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,n,i){void 0===n&&(n={}),void 0===i&&(i=r.b.STRICT_TEXTURE_CACHE);var a="string"==typeof t,s=null;if(a)s=t;else if(t instanceof v){if(!t.cacheId){var u=n&&n.pixiIdPrefix||"pixiid";t.cacheId=u+"-"+Object(o.uid)(),v.addToCache(t,t.cacheId)}s=t.cacheId}else{if(!t._pixiId){u=n&&n.pixiIdPrefix||"pixiid";t._pixiId=u+"_"+Object(o.uid)()}s=t._pixiId}var c=o.TextureCache[s];if(a&&i&&!c)throw new Error('The cacheId "'+s+'" does not exist in TextureCache.');return c||t instanceof v?!c&&t instanceof v&&(c=new e(t),e.addToCache(c,s)):(n.resolution||(n.resolution=Object(o.getResolutionOfUrl)(t)),(c=new e(new v(t,n))).baseTexture.cacheId=s,v.addToCache(c.baseTexture,s),e.addToCache(c,s)),c},e.fromURL=function(t,n){var r=Object.assign({autoLoad:!1},null==n?void 0:n.resourceOptions),i=e.from(t,Object.assign({resourceOptions:r},n),!1),o=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):o.load().then((function(){return Promise.resolve(i)}))},e.fromBuffer=function(t,n,r,i){return new e(v.fromBuffer(t,n,r,i))},e.fromLoader=function(t,n,i,a){var s=new v(t,Object.assign({scaleMode:r.b.SCALE_MODE,resolution:Object(o.getResolutionOfUrl)(n)},a)),u=s.resource;u instanceof w&&(u.url=n);var c=new e(s);return i||(i=n),v.addToCache(c.baseTexture,i),e.addToCache(c,i),i!==n&&(v.addToCache(c.baseTexture,n),e.addToCache(c,n)),c.baseTexture.valid?Promise.resolve(c):new Promise((function(t){c.baseTexture.once("loaded",(function(){return t(c)}))}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),o.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),o.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=o.TextureCache[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete o.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)o.TextureCache[t.textureCacheIds[r]]===t&&delete o.TextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,n=t.y,r=t.width,i=t.height,o=e+r>this.baseTexture.width,a=n+i>this.baseTexture.height;if(o||a){var s=o&&a?"and":"or",u="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,c="Y: "+n+" + "+i+" = "+(n+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+s+" "+c)}this.valid=r&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e}(o.EventEmitter);function M(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}N.EMPTY=new N(new v),M(N.EMPTY),M(N.EMPTY.baseTexture),N.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new N(new v(new E(t)))}(),M(N.WHITE),M(N.WHITE.baseTexture);var j=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return f(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,n){void 0===n&&(n=!0);var r=this.baseTexture.resolution,i=Math.round(t*r)/r,o=Math.round(e*r)/r;this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(i,o),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){for(var n=arguments,r=[],i=1;i<arguments.length;i++)r[i-1]=n[i];return"number"==typeof t&&(Object(o.deprecation)("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new e(new I(t))},e}(N),D=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e,n){void 0===n&&(n=i.l.NONE);var r=new I(Object.assign({width:t,height:e,resolution:1,multisample:n},this.textureOptions));return new j(r)},t.prototype.getOptimalTexture=function(t,e,n,r){var a;void 0===n&&(n=1),void 0===r&&(r=i.l.NONE),t=Math.ceil(t*n),e=Math.ceil(e*n),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?a=r>1?-r:-1:(a=((65535&(t=Object(o.nextPow2)(t)))<<16|65535&(e=Object(o.nextPow2)(e)))>>>0,r>1&&(a+=4294967296*r)),this.texturePool[a]||(this.texturePool[a]=[]);var s=this.texturePool[a].pop();return s||(s=this.createTexture(t,e,r)),s.filterPoolKey=a,s.setResolution(n),s},t.prototype.getFilterTexture=function(t,e,n){var r=this.getOptimalTexture(t.width,t.height,e||t.resolution,n||i.l.NONE);return r.filterFrame=t.filterFrame,r},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var n=this.texturePool[e];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){for(var e in this.enableFullScreen=t.width>0&&t.height>0,this.texturePool)if(Number(e)<0){var n=this.texturePool[e];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},t.SCREEN_KEY=-1,t}(),L=function(){function t(t,e,n,r,o,a,s){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=i.r.FLOAT),this.buffer=t,this.size=e,this.normalized=n,this.type=r,this.stride=o,this.start=a,this.instance=s}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,n,r,i,o){return new t(e,n,r,i,o)},t}(),B=0,F=function(){function t(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=e,this.id=B++,this.disposeRunner=new a.a("disposeBuffer")}return t.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===i.d.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?i.d.ELEMENT_ARRAY_BUFFER:i.d.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),U={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var G={5126:4,5123:2,5121:1},H=0,V={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},X=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=H++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new a.a("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,n,r,i,o,a,s){if(void 0===n&&(n=0),void 0===r&&(r=!1),void 0===s&&(s=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof F||(e instanceof Array&&(e=new Float32Array(e)),e=new F(e));var u=t.split("|");if(u.length>1){for(var c=0;c<u.length;c++)this.addAttribute(u[c],e,n,r,i);return this}var l=this.buffers.indexOf(e);return-1===l&&(this.buffers.push(e),l=this.buffers.length-1),this.attributes[t]=new L(l,n,r,i,o,a,s),this.instanced=this.instanced||s,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof F||(t instanceof Array&&(t=new Uint16Array(t)),t=new F(t)),t.type=i.d.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],n=[],r=new F;for(t in this.attributes){var i=this.attributes[t],a=this.buffers[i.buffer];e.push(a.data),n.push(i.size*G[i.type]/4),i.buffer=0}for(r.data=function(t,e){for(var n=0,r=0,i={},a=0;a<t.length;a++)r+=e[a],n+=t[a].length;var s=new ArrayBuffer(4*n),u=null,c=0;for(a=0;a<t.length;a++){var l=e[a],h=t[a],f=Object(o.getBufferType)(h);i[f]||(i[f]=new U[f](s)),u=i[f];for(var p=0;p<h.length;p++){u[(p/l|0)*r+c+p%l]=h[p]}c+=l}return new Float32Array(s)}(e,n),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,n=0;n<this.buffers.length;n++)e.buffers[n]=new F(this.buffers[n].data.slice(0));for(var n in this.attributes){var r=this.attributes[n];e.attributes[n]=new L(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=i.d.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var n,r=new t,a=[],s=[],u=[],c=0;c<e.length;c++){n=e[c];for(var l=0;l<n.buffers.length;l++)s[l]=s[l]||0,s[l]+=n.buffers[l].data.length,u[l]=0}for(c=0;c<n.buffers.length;c++)a[c]=new(V[Object(o.getBufferType)(n.buffers[c].data)])(s[c]),r.buffers[c]=new F(a[c]);for(c=0;c<e.length;c++){n=e[c];for(l=0;l<n.buffers.length;l++)a[l].set(n.buffers[l].data,u[l]),u[l]+=n.buffers[l].data.length}if(r.attributes=n.attributes,n.indexBuffer){r.indexBuffer=r.buffers[n.buffers.indexOf(n.indexBuffer)],r.indexBuffer.type=i.d.ELEMENT_ARRAY_BUFFER;var h=0,f=0,p=0,d=0;for(c=0;c<n.buffers.length;c++)if(n.buffers[c]!==n.indexBuffer){d=c;break}for(var c in n.attributes){var y=n.attributes[c];(0|y.buffer)===d&&(f+=y.size*G[y.type]/4)}for(c=0;c<e.length;c++){var m=e[c].indexBuffer.data;for(l=0;l<m.length;l++)r.indexBuffer.data[l+p]+=h;h+=e[c].buffers[d].data.length/f,p+=m.length}}return r},t}(),W=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return f(e,t),e}(X),Y=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new F(e.vertices),e.uvBuffer=new F(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return f(e,t),e.prototype.map=function(t,e){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+e.width/t.width,this.uvs[3]=r,this.uvs[4]=n+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=n,this.uvs[7]=r+e.height/t.height,n=e.x,r=e.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+e.width,this.vertices[3]=r,this.vertices[4]=n+e.width,this.vertices[5]=r+e.height,this.vertices[6]=n,this.vertices[7]=r+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(X),z=0,q=function(){function t(t,e,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=z++,this.static=!!e,this.ubo=!!n,t instanceof F?(this.buffer=t,this.buffer.type=i.d.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new F(new Float32Array(1)),this.buffer.type=i.d.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,n,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new t(n,r)},t.from=function(e,n,r){return new t(e,n,r)},t.uboFrom=function(e,n){return new t(e,null==n||n,!0)},t}(),K=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=i.l.NONE,this.sourceFrame=new u.j,this.destinationFrame=new u.j,this.bindingSourceFrame=new u.j,this.bindingDestinationFrame=new u.j,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),Z=[new u.g,new u.g,new u.g,new u.g],$=new u.d,J=function(){function t(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new D,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new W,this.quadUv=new Y,this.tempRect=new u.j,this.activeState={},this.globalUniforms=new q({outputFrame:new u.j,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(t,e){for(var n=this.renderer,r=this.defaultFilterStack,i=this.statePool.pop()||new K,o=this.renderer.renderTexture,a=e[0].resolution,s=e[0].multisample,u=e[0].padding,c=e[0].autoFit,l=e[0].legacy,h=1;h<e.length;h++){var f=e[h];a=Math.min(a,f.resolution),s=Math.min(s,f.multisample),u=this.useMaxPadding?Math.max(u,f.padding):u+f.padding,c=c&&f.autoFit,l=l||f.legacy}if(1===r.length&&(this.defaultFilterStack[0].renderTexture=o.current),r.push(i),i.resolution=a,i.multisample=s,i.legacy=l,i.target=t,i.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),i.sourceFrame.pad(u),c){var p=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB($.copyFrom(n.projection.transform).invert(),p),i.sourceFrame.fit(p)}this.roundFrame(i.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),i.renderTexture=this.getOptimalFilterTexture(i.sourceFrame.width,i.sourceFrame.height,a,s),i.filters=e,i.destinationFrame.width=i.renderTexture.width,i.destinationFrame.height=i.renderTexture.height;var d=this.tempRect;d.x=0,d.y=0,d.width=i.sourceFrame.width,d.height=i.sourceFrame.height,i.renderTexture.filterFrame=i.sourceFrame,i.bindingSourceFrame.copyFrom(o.sourceFrame),i.bindingDestinationFrame.copyFrom(o.destinationFrame),i.transform=n.projection.transform,n.projection.transform=null,o.bind(i.renderTexture,i.sourceFrame,d),n.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),n=e.filters;this.activeState=e;var r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;var o=r.inputSize,a=r.inputPixel,s=r.inputClamp;if(o[0]=e.destinationFrame.width,o[1]=e.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],a[0]=Math.round(o[0]*e.resolution),a[1]=Math.round(o[1]*e.resolution),a[2]=1/a[0],a[3]=1/a[1],s[0]=.5*a[2],s[1]=.5*a[3],s[2]=e.sourceFrame.width*o[2]-.5*a[2],s[3]=e.sourceFrame.height*o[3]-.5*a[3],e.legacy){var u=r.filterArea;u[0]=e.destinationFrame.width,u[1]=e.destinationFrame.height,u[2]=e.sourceFrame.x,u[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var c=t[t.length-1];if(this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,e.renderTexture,c.renderTexture,i.e.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var l=e.renderTexture,h=this.getOptimalFilterTexture(l.width,l.height,e.resolution);h.filterFrame=l.filterFrame;var f=0;for(f=0;f<n.length-1;++f){1===f&&e.multisample>1&&((h=this.getOptimalFilterTexture(l.width,l.height,e.resolution)).filterFrame=l.filterFrame),n[f].apply(this,l,h,i.e.CLEAR,e);var p=l;l=h,h=p}n[f].apply(this,l,c.renderTexture,i.e.BLEND,e),f>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(l),this.returnFilterTexture(h)}e.clear(),this.statePool.push(e)},t.prototype.bindAndClear=function(t,e){void 0===e&&(e=i.e.CLEAR);var n=this.renderer,r=n.renderTexture,o=n.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=t.filterFrame.width,a.height=t.filterFrame.height,r.bind(t,t.filterFrame,a)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var s=1&o.stateId||this.forceClear;(e===i.e.CLEAR||e===i.e.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(t,e,n,r){var o=this.renderer;o.state.set(t.state),this.bindAndClear(n,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(i.f.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(i.f.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(t,e){var n=this.activeState,r=n.sourceFrame,i=n.destinationFrame,o=e._texture.orig,a=t.set(i.width,0,0,i.height,r.x,r.y),s=e.worldTransform.copyTo(u.d.TEMP_MATRIX);return s.invert(),a.prepend(s),a.scale(1/o.width,1/o.height),a.translate(e.anchor.x,e.anchor.y),a},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(t,e,n,r){return void 0===n&&(n=1),void 0===r&&(r=i.l.NONE),this.texturePool.getOptimalTexture(t,e,n,r)},t.prototype.getFilterTexture=function(t,e,n){if("number"==typeof t){var r=t;t=e,e=r}t=t||this.activeState.renderTexture;var o=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,n||i.l.NONE);return o.filterFrame=t.filterFrame,o},t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(t,e){var n=Z[0],r=Z[1],i=Z[2],o=Z[3];n.set(e.left,e.top),r.set(e.left,e.bottom),i.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(n,n),t.apply(r,r),t.apply(i,i),t.apply(o,o);var a=Math.min(n.x,r.x,i.x,o.x),s=Math.min(n.y,r.y,i.y,o.y),u=Math.max(n.x,r.x,i.x,o.x),c=Math.max(n.y,r.y,i.y,o.y);e.x=a,e.y=s,e.width=u-a,e.height=c-s},t.prototype.roundFrame=function(t,e,n,r,i){if(i){var o=i.a,a=i.b,s=i.c,u=i.d;if((Math.abs(a)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}(i=i?$.copyFrom(i):$.identity()).translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.transformAABB(i,t),t.ceil(e),this.transformAABB(i.invert(),t)},t}(),Q=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),tt=function(){function t(t){this.renderer=t,this.emptyRenderer=new Q(t),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(t,e){for(var n=this.renderer.texture.boundTextures,r=e-1;r>=0;--r)t[r]=n[r]||null,t[r]&&(t[r]._batchLocation=r)},t.prototype.boundArray=function(t,e,n,r){for(var i=t.elements,o=t.ids,a=t.count,s=0,u=0;u<a;u++){var c=i[u],l=c._batchLocation;if(l>=0&&l<r&&e[l]===c)o[u]=l;else for(;s<r;){var h=e[s];if(!h||h._batchEnabled!==n||h._batchLocation!==s){o[u]=s,c._batchLocation=s,e[s]=c;break}s++}}},t.prototype.destroy=function(){this.renderer=null},t}(),et=0,nt=function(){function t(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=et++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=et++,this.renderer.runners.contextChange.emit(t)},t.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},t.prototype.createContext=function(t,e){var n;if(r.b.PREFER_ENV>=i.g.WEBGL2&&(n=t.getContext("webgl2",e)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(t){t.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(t){var e=t.getContextAttributes(),n="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;n&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),rt=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=i.l.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},it=new u.j,ot=function(){function t(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new A(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new u.j,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;r.b.PREFER_ENV===i.g.WEBGL_LEGACY&&(e=null,n=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},t.prototype.bind=function(t,e,n){void 0===n&&(n=0);var r=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,i.mipLevel=n),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,i.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var o=0;o<t.colorTextures.length;o++){var a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var s=e.width>>n,u=e.height>>n,c=s/e.width;this.setViewport(e.x*c,e.y*c,s,u)}else{s=t.width>>n,u=t.height>>n;this.setViewport(0,0,s,u)}}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(t,e,n,r){var i=this.viewport;t=Math.round(t),e=Math.round(e),n=Math.round(n),r=Math.round(r),i.width===n&&i.height===r&&i.x===t&&i.y===e||(i.x=t,i.y=e,i.width=n,i.height=r,this.gl.viewport(t,e,n,r))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(t,e,n,r,o){void 0===o&&(o=i.c.COLOR|i.c.DEPTH);var a=this.gl;a.clearColor(t,e,n,r),a.clear(o)},t.prototype.initFramebuffer=function(t){var e=this.gl,n=new rt(e.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n},t.prototype.resizeFramebuffer=function(t){var e=this.gl,n=t.glFramebuffers[this.CONTEXT_UID];n.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,n.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.RGBA8,t.width,t.height)),n.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,n.stencil),n.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,n.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var r=t.colorTextures,i=r.length;e.drawBuffers||(i=Math.min(i,1));for(var o=0;o<i;o++){var a=r[o],s=a.parentTextureArray||a;this.renderer.texture.bind(s,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},t.prototype.updateFramebuffer=function(t,e){var n=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures,o=i.length;n.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(t)?(r.msaaBuffer=r.msaaBuffer||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.RGBA8,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,r.msaaBuffer)):r.msaaBuffer&&(n.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var a=[],s=0;s<o;s++){var u=i[s],c=u.parentTextureArray||u;this.renderer.texture.bind(c,0),0===s&&r.msaaBuffer||(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+s,u.target,c._glTextures[this.CONTEXT_UID].texture,e),a.push(n.COLOR_ATTACHMENT0+s))}if((a.length>1&&n.drawBuffers(a),t.depthTexture)&&this.writeDepthTexture){var l=t.depthTexture;this.renderer.texture.bind(l,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,e)}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?r.stencil&&(n.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r.stencil))},t.prototype.canMultisampleFramebuffer=function(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture},t.prototype.detectSamples=function(t){var e=this.msaaSamples,n=i.l.NONE;if(t<=1||null===e)return n;for(var r=0;r<e.length;r++)if(e[r]<=t){n=e[r];break}return 1===n&&(n=i.l.NONE),n},t.prototype.blit=function(t,e,n){var r=this.current,i=this.renderer,o=this.gl,a=this.CONTEXT_UID;if(2===i.context.webGLVersion&&r){var s=r.glFramebuffers[a];if(s){if(!t){if(!s.msaaBuffer)return;var u=r.colorTextures[0];if(!u)return;s.blitFramebuffer||(s.blitFramebuffer=new A(r.width,r.height),s.blitFramebuffer.addColorTexture(0,u)),(t=s.blitFramebuffer).colorTextures[0]!==u&&(t.colorTextures[0]=u,t.dirtyId++,t.dirtyFormat++),t.width===r.width&&t.height===r.height||(t.width=r.width,t.height=r.height,t.dirtyId++,t.dirtySize++)}e||((e=it).width=r.width,e.height=r.height),n||(n=e);var c=e.width===n.width&&e.height===n.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,s.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,n.x,n.y,n.width,n.height,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR)}}},t.prototype.disposeFramebuffer=function(t,e){var n=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(n){delete t.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(t);i>=0&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&r.deleteRenderbuffer(n.msaaBuffer),n.stencil&&r.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<e.length;n++)this.disposeFramebuffer(e[n],t)},t.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.stencil=!0;var n=t.width,r=t.height,i=this.gl,o=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o),e.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,e.multisample,i.DEPTH24_STENCIL8,n,r):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,n,r),e.stencil=o,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new u.j},t.prototype.destroy=function(){this.renderer=null},t}(),at={5126:4,5123:2,5121:1},st=function(){function t(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;r.b.PREFER_ENV===i.g.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=function(){return n.createVertexArrayOES()},t.bindVertexArray=function(t){return n.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return n.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var o=t.getExtension("ANGLE_instanced_arrays");o?(t.vertexAttribDivisor=function(t,e){return o.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,n,r,i){return o.drawElementsInstancedANGLE(t,e,n,r,i)},t.drawArraysInstanced=function(t,e,n,r){return o.drawArraysInstancedANGLE(t,e,n,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var n=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID],i=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},i=!0);var o=r[e.program.id]||this.initGeometryVao(t,e,i);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,n=0;n<t.buffers.length;n++){var r=t.buffers[n];e.update(r)}},t.prototype.checkCompatibility=function(t,e){var n=t.attributes,r=e.attributeData;for(var i in r)if(!n[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},t.prototype.getSignature=function(t,e){var n=t.attributes,r=e.attributeData,i=["g",t.id];for(var o in n)r[o]&&i.push(o);return i.join("-")},t.prototype.initGeometryVao=function(t,e,n){void 0===n&&(n=!0);var r=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,a=e.program;a.glPrograms[i]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);var s=this.getSignature(t,a),u=t.glVertexArrayObjects[this.CONTEXT_UID],c=u[s];if(c)return u[a.id]=c,c;var l=t.buffers,h=t.attributes,f={},p={};for(var d in l)f[d]=0,p[d]=0;for(var d in h)!h[d].size&&a.attributeData[d]?h[d].size=a.attributeData[d].size:h[d].size||console.warn("PIXI Geometry attribute '"+d+"' size cannot be determined (likely the bound shader does not have the attribute)"),f[h[d].buffer]+=h[d].size*at[h[d].type];for(var d in h){var y=h[d],m=y.size;void 0===y.stride&&(f[y.buffer]===m*at[y.type]?y.stride=0:y.stride=f[y.buffer]),void 0===y.start&&(y.start=p[y.buffer],p[y.buffer]+=m*at[y.type])}c=r.createVertexArray(),r.bindVertexArray(c);for(var v=0;v<l.length;v++){var _=l[v];o.bind(_),n&&_._glBuffers[i].refCount++}return this.activateVao(t,a),this._activeVao=c,u[a.id]=c,u[s]=c,c},t.prototype.disposeGeometry=function(t,e){var n;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,o=t.buffers,a=null===(n=this.renderer)||void 0===n?void 0:n.buffer;if(t.disposeRunner.remove(this),r){if(a)for(var s=0;s<o.length;s++){var u=o[s]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,0!==u.refCount||e||a.dispose(o[s],e))}if(!e)for(var c in r)if("g"===c[0]){var l=r[c];this._activeVao===l&&this.unbind(),i.deleteVertexArray(l)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),n=0;n<e.length;n++)this.disposeGeometry(this.managedGeometries[e[n]],t)},t.prototype.activateVao=function(t,e){var n=this.gl,r=this.CONTEXT_UID,i=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&i.bind(t.indexBuffer);var s=null;for(var u in a){var c=a[u],l=o[c.buffer],h=l._glBuffers[r];if(e.attributeData[u]){s!==h&&(i.bind(l),s=h);var f=e.attributeData[u].location;if(n.enableVertexAttribArray(f),n.vertexAttribPointer(f,c.size,c.type||n.FLOAT,c.normalized,c.stride,c.start),c.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(f,1)}}}},t.prototype.draw=function(t,e,n,r){var i=this.gl,o=this._activeGeometry;if(o.indexBuffer){var a=o.indexBuffer.data.BYTES_PER_ELEMENT,s=2===a?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(t,e||o.indexBuffer.data.length,s,(n||0)*a,r||1):i.drawElements(t,e||o.indexBuffer.data.length,s,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(t,n,e||o.getSize(),r||1):i.drawArrays(t,n,e||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),ut=function(){function t(t){void 0===t&&(t=null),this.type=i.j.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=r.b.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=i.j.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function ct(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}function lt(t,e){var n=t.getShaderSource(e).split("\n").map((function(t,e){return e+": "+t})),r=t.getShaderInfoLog(e),i=r.split("\n"),o={},a=i.map((function(t){return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(t){return!(!t||o[t])&&(o[t]=!0,!0)})),s=[""];a.forEach((function(t){n[t-1]="%c"+n[t-1]+"%c",s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var u=n.join("\n");s[0]=u,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,s),console.groupEnd()}function ht(t){for(var e=new Array(t),n=0;n<e.length;n++)e[n]=!1;return e}function ft(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return ht(2*e);case"bvec3":return ht(3*e);case"bvec4":return ht(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var pt,dt={},yt=dt;function mt(){if(yt===dt||yt&&yt.isContextLost()){var t=document.createElement("canvas"),e=void 0;r.b.PREFER_ENV>=i.g.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),yt=e}return yt}function vt(t,e,n){if("precision"!==t.substring(0,9)){var r=e;return e===i.m.HIGH&&n!==i.m.HIGH&&(r=i.m.MEDIUM),"precision "+r+" float;\n"+t}return n!==i.m.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var _t={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function gt(t){return _t[t]}var bt=null,Et={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Tt(t,e){if(!bt){var n=Object.keys(Et);bt={};for(var r=0;r<n.length;++r){var i=n[r];bt[t[i]]=Et[i]}}return bt[e]}var wt=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '},codeUbo:function(t){return"\n                var "+t+"_matrix = uv."+t+".toArray(true);\n\n                data[offset] = "+t+"_matrix[0];\n                data[offset+1] = "+t+"_matrix[1];\n                data[offset+2] = "+t+"_matrix[2];\n        \n                data[offset + 4] = "+t+"_matrix[3];\n                data[offset + 5] = "+t+"_matrix[4];\n                data[offset + 6] = "+t+"_matrix[5];\n        \n                data[offset + 8] = "+t+"_matrix[6];\n                data[offset + 9] = "+t+"_matrix[7];\n                data[offset + 10] = "+t+"_matrix[8];\n            "}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'},codeUbo:function(t){return"\n                v = uv."+t+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(t){return"\n                    v = uv."+t+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],xt={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},St={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var Ot,Pt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Rt(t){for(var e="",n=0;n<t;++n)n>0&&(e+="\nelse "),n<t-1&&(e+="if(test == "+n+".0){}");return e}function At(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=e.createShader(e.FRAGMENT_SHADER);;){var r=Pt.replace(/%forloop%/gi,Rt(t));if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}return t}var It=0,Ct={},kt=function(){function t(e,n,o){void 0===o&&(o="pixi-shader"),this.id=It++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=n||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(o=o.replace(/\s+/g,"-"),Ct[o]?(Ct[o]++,o+="-"+Ct[o]):Ct[o]=1,this.vertexSrc="#define SHADER_NAME "+o+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+o+"\n"+this.fragmentSrc,this.vertexSrc=vt(this.vertexSrc,r.b.PRECISION_VERTEX,i.m.HIGH),this.fragmentSrc=vt(this.fragmentSrc,r.b.PRECISION_FRAGMENT,function(){if(!pt){pt=i.m.MEDIUM;var t=mt();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);pt=e.precision?i.m.HIGH:i.m.MEDIUM}}return pt}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,n,r){var i=e+n,a=o.ProgramCache[i];return a||(o.ProgramCache[i]=a=new t(e,n,r)),a},t}(),Nt=function(){function t(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof q?e:new q(e):new q({})}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var n in e.uniforms){var r=e.uniforms[n];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,n,r){return new t(kt.from(e,n),r)},t}(),Mt=function(){function t(){this.data=0,this.blendMode=i.b.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==i.b.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),jt=function(t){function e(n,i,o){var a=this,s=kt.from(n||e.defaultVertexSrc,i||e.defaultFragmentSrc);return(a=t.call(this,s,o)||this).padding=0,a.resolution=r.b.FILTER_RESOLUTION,a.multisample=r.b.FILTER_MULTISAMPLE,a.enabled=!0,a.autoFit=!0,a.state=new Mt,a}return f(e,t),e.prototype.apply=function(t,e,n,r,i){t.applyFilter(this,e,n,r)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(Nt),Dt=new u.d,Lt=function(){function t(t,e){this._texture=t,this.mapCoord=new u.d,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var n=this.mapCoord,r=0;r<t.length;r+=2){var i=t[r],o=t[r+1];e[r]=i*n.a+o*n.c+n.tx,e[r+1]=i*n.b+o*n.d+n.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var n=e._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=e.orig,i=e.trim;i&&(Dt.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(Dt));var o=e.baseTexture,a=this.uClampFrame,s=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(e._frame.x+s+u)/o.width,a[1]=(e._frame.y+s+u)/o.height,a[2]=(e._frame.x+e._frame.width-s+u)/o.width,a[3]=(e._frame.y+e._frame.height-s+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},t}(),Bt=function(t){function e(e,n,r){var i=this,o=null;return"string"!=typeof e&&void 0===n&&void 0===r&&(o=e,e=void 0,n=void 0,r=void 0),(i=t.call(this,e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",n||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r)||this).maskSprite=o,i.maskMatrix=new u.d,i}return f(e,t),Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,e,n,r){var i=this._maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new Lt(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,n,r))},e}(jt),Ft=function(){function t(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},t.prototype.push=function(t,e){var n=e;if(!n.isMaskData){var r=this.maskDataPool.pop()||new ut;r.pooled=!0,r.maskObject=e,n=r}var o=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(o),n.autoDetect&&this.detect(n),n._target=t,n.type!==i.j.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case i.j.SCISSOR:this.renderer.scissor.push(n);break;case i.j.STENCIL:this.renderer.stencil.push(n);break;case i.j.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n)}n.type===i.j.SPRITE&&this.maskStack.push(n)},t.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case i.j.SCISSOR:this.renderer.scissor.pop();break;case i.j.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case i.j.SPRITE:this.popSpriteMask(e)}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){var n=this.maskStack[this.maskStack.length-1];n.type===i.j.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}},t.prototype.detect=function(t){t.maskObject.isSprite?t.type=i.j.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=i.j.SCISSOR:t.type=i.j.STENCIL},t.prototype.pushSpriteMask=function(t){var e,n,r=t.maskObject,i=t._target,o=t._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex])||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new Bt]);var a,s,u=this.renderer,c=u.renderTexture;if(c.current){var l=c.current;a=t.resolution||l.resolution,s=null!==(e=t.multisample)&&void 0!==e?e:l.multisample}else a=t.resolution||u.resolution,s=null!==(n=t.multisample)&&void 0!==n?n:u.multisample;o[0].resolution=a,o[0].multisample=s,o[0].maskSprite=r;var h=i.filterArea;i.filterArea=r.getBounds(!0),u.filter.push(i,o),i.filterArea=h,t._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.destroy=function(){this.renderer=null},t}(),Ut=function(){function t(t){this.renderer=t,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(t){var e=this.renderer.gl,n=this.getStackLength();this.maskStack=t;var r=this.getStackLength();r!==n&&(0===r?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),Gt=new u.d,Ht=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.SCISSOR_TEST,n}return f(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){if(!t._scissorRectLocal){var e=t._scissorRect,n=t.maskObject,r=this.renderer,i=r.renderTexture;n.renderable=!0;var o=n.getBounds();this.roundFrameToPixels(o,i.current?i.current.resolution:r.resolution,i.sourceFrame,i.destinationFrame,r.projection.transform),n.renderable=!1,e&&o.fit(e),t._scissorRectLocal=o}},e.isMatrixRotated=function(t){if(!t)return!1;var e=t.a,n=t.b,r=t.c,i=t.d;return(Math.abs(n)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)},e.prototype.testScissor=function(t){var n=t.maskObject;if(!n.isFastRect||!n.isFastRect())return!1;if(e.isMatrixRotated(n.worldTransform))return!1;if(e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var r=t._scissorRectLocal;return r.width>0&&r.height>0},e.prototype.roundFrameToPixels=function(t,n,r,i,o){e.isMatrixRotated(o)||((o=o?Gt.copyFrom(o):Gt.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(o,t),t.fit(i),t.x=Math.round(t.x*n),t.y=Math.round(t.y*n),t.width=Math.round(t.width*n),t.height=Math.round(t.height*n))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var e=this.renderer.gl;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t,e=this.maskStack[this.maskStack.length-1]._scissorRect;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)},e}(Ut),Vt=function(t){function e(e){var n=t.call(this,e)||this;return n.glConst=WebGLRenderingContext.STENCIL_TEST,n}return f(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,n=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),n.enable(n.STENCIL_TEST)),t._stencilCounter++,n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.EQUAL,r,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?(e.disable(e.STENCIL_TEST),e.clearStencil(0),e.clear(e.STENCIL_BUFFER_BIT)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(Ut),Xt=function(){function t(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new u.d,this.transform=null}return t.prototype.update=function(t,e,n,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(t,e,n,r){var i=this.projectionMatrix,o=r?-1:1;i.identity(),i.a=1/e.width*2,i.d=o*(1/e.height*2),i.tx=-1-e.x*i.a,i.ty=-o-e.y*i.d},t.prototype.setTransform=function(t){},t.prototype.destroy=function(){this.renderer=null},t}(),Wt=new u.j,Yt=new u.j,zt=function(){function t(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new u.j,this.destinationFrame=new u.j,this.viewportFrame=new u.j}return t.prototype.bind=function(t,e,n){void 0===t&&(t=null);var r,i,o,a=this.renderer;this.current=t,t?(o=(r=t.baseTexture).resolution,e||(Wt.width=t.frame.width,Wt.height=t.frame.height,e=Wt),n||(Yt.x=t.frame.x,Yt.y=t.frame.y,Yt.width=e.width,Yt.height=e.height,n=Yt),i=r.framebuffer):(o=a.resolution,e||(Wt.width=a.screen.width,Wt.height=a.screen.height,e=Wt),n||((n=Wt).width=e.width,n.height=e.height));var s=this.viewportFrame;s.x=n.x*o,s.y=n.y*o,s.width=n.width*o,s.height=n.height*o,t||(s.y=a.view.height-(s.y+s.height)),s.ceil(),this.renderer.framebuffer.bind(i,s),this.renderer.projection.update(n,e,o,!i),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(n)},t.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var n=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer.screen,i=n.width!==r.width||n.height!==r.height;if(i){var o=this.viewportFrame,a=o.x,s=o.y,u=o.width,c=o.height;a=Math.round(a),s=Math.round(s),u=Math.round(u),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,s,u,c)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),i&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function qt(t,e,n,r,i){n.buffer.update(i)}var Kt={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},Zt={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function $t(t){for(var e=t.map((function(t){return{data:t,offset:0,dataLen:0,dirty:0}})),n=0,r=0,i=0,o=0;o<e.length;o++){var a=e[o];if(n=Zt[a.data.type],a.data.size>1&&(n=Math.max(n,16)*a.data.size),a.dataLen=n,r%n!=0&&r<16){var s=r%n%16;r+=s,i+=s}r+n>16?(i=16*Math.ceil(i/16),a.offset=i,i+=n,r=n):(a.offset=i,r+=n,i+=n)}return{uboElements:e,size:i=16*Math.ceil(i/16)}}function Jt(t,e){var n=[];for(var r in t)e[r]&&n.push(e[r]);return n.sort((function(t,e){return t.index-e.index})),n}function Qt(t,e){if(!t.autoManage)return{size:0,syncFunc:qt};for(var n=$t(Jt(t.uniforms,e)),r=n.uboElements,i=n.size,o=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],a=0;a<r.length;a++){for(var s=r[a],u=t.uniforms[s.data.name],c=s.data.name,l=!1,h=0;h<wt.length;h++){var f=wt[h];if(f.codeUbo&&f.test(s.data,u)){o.push("offset = "+s.offset/4+";",wt[h].codeUbo(s.data.name,u)),l=!0;break}}if(!l)if(s.data.size>1){var p=gt(s.data.type),d=Math.max(Zt[s.data.type]/16,1),y=p/d,m=(4-y%4)%4;o.push("\n                cv = ud."+c+".value;\n                v = uv."+c+";\n                offset = "+s.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+s.data.size*d+"; i++)\n                {\n                    for(var j = 0; j < "+y+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+m+";\n                }\n\n                ")}else{var v=Kt[s.data.type];o.push("\n                cv = ud."+c+".value;\n                v = uv."+c+";\n                offset = "+s.offset/4+";\n                "+v+";\n                ")}}return o.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join("\n"))}}var te=function(){},ee=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();function ne(t,e){var n=ct(t,t.VERTEX_SHADER,e.vertexSrc),r=ct(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();if(t.attachShader(i,n),t.attachShader(i,r),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||function(t,e,n,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||lt(t,n),t.getShaderParameter(r,t.COMPILE_STATUS)||lt(t,r),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,i,n,r),e.attributeData=function(t,e){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=e.getActiveAttrib(t,i);if(0!==o.name.indexOf("gl_")){var a=Tt(e,o.type),s={type:a,name:o.name,size:gt(a),location:e.getAttribLocation(t,o.name)};n[o.name]=s}}return n}(i,t),e.uniformData=function(t,e){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;i++){var o=e.getActiveUniform(t,i),a=o.name.replace(/\[.*?\]$/,""),s=!!o.name.match(/\[.*?\]$/),u=Tt(e,o.type);n[a]={name:a,index:i,type:u,size:o.size,isArray:s,value:ft(u,o.size)}}return n}(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var o=Object.keys(e.attributeData);o.sort((function(t,e){return t>e?1:-1}));for(var a=0;a<o.length;a++)e.attributeData[o[a]].location=a,t.bindAttribLocation(i,a,o[a]);t.linkProgram(i)}t.deleteShader(n),t.deleteShader(r);var s={};for(var a in e.uniformData){var u=e.uniformData[a];s[a]={location:t.getUniformLocation(i,a),value:ft(u.type,u.size)}}return new ee(i,s)}var re=0,ie={textureCount:0,uboCount:0},oe=function(){function t(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=re++}return t.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof Ot)return Ot;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");Ot=!0===t({a:"b"},"a","b")}catch(t){Ot=!1}return Ot}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(t){this.gl=t,this.reset()},t.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var n=t.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),e||(ie.textureCount=0,ie.uboCount=0,this.syncUniformGroup(t.uniformGroup,ie)),r},t.prototype.setUniforms=function(t){var e=this.shader.program,n=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(n.uniformData,t,this.renderer)},t.prototype.syncUniformGroup=function(t,e){var n=this.getGlProgram();t.static&&t.dirtyId===n.uniformDirtyGroups[t.id]||(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,e))},t.prototype.syncUniforms=function(t,e,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,n)},t.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){var n,r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var i in t.uniforms){var o=e[i];if(o){for(var a=t.uniforms[i],s=!1,u=0;u<wt.length;u++)if(wt[u].test(o,a)){r.push(wt[u].code(i,a)),s=!0;break}if(!s){var c=(1===o.size?xt:St)[o.type].replace("location",'ud["'+i+'"].location');r.push('\n            cu = ud["'+i+'"];\n            cv = cu.value;\n            v = uv["'+i+'"];\n            '+c+";")}}else(null===(n=t.uniforms[i])||void 0===n?void 0:n.group)&&(t.uniforms[i].ubo?r.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+i+", '"+i+"');\n                    "):r.push("\n                        renderer.shader.syncUniformGroup(uv."+i+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(t,e){var n=this.getGlProgram();if(!t.static||0!==t.dirtyId||!n.uniformGroups[t.id]){t.dirtyId=0;var r=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,e);t.buffer.update(),r(n.uniformData,t.uniforms,this.renderer,ie,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[e])},t.prototype.createSyncBufferGroup=function(t,e,n){var r=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var i=this.gl.getUniformBlockIndex(e.program,n);e.uniformBufferBindings[n]=this.shader.uniformBindCount,r.uniformBlockBinding(e.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(t,this.shader.program.uniformData,"ubo"),a=this._uboCache[o];if(a||(a=this._uboCache[o]=Qt(t,this.shader.program.uniformData)),t.autoManage){var s=new Float32Array(a.size/4);t.buffer.update(s)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]},t.prototype.getSignature=function(t,e,n){var r=t.uniforms,i=[n+"-"];for(var o in r)i.push(o),e[o]&&i.push(e[o].type);return i.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(t){var e=this.gl,n=t.program,r=ne(e,n);return n.glPrograms[this.renderer.CONTEXT_UID]=r,r},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}();var ae=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=i.b.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Mt,this.defaultState.blend=!0}return t.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[i.b.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.ADD]=[t.ONE,t.ONE],e[i.b.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.NONE]=[0,0],e[i.b.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[i.b.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.b.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[i.b.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[i.b.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[i.b.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[i.b.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[i.b.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[i.b.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[i.b.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[i.b.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},t.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,n=0;e;)1&e&&this.map[n].call(this,!!(t.data&1<<n)),e>>=1,n++;this.stateId=t.data}for(n=0;n<this.checks.length;n++)this.checks[n](this,t)},t.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(t){this.gl.depthMask(t)},t.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},t.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],n=this.gl;2===e.length?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}},t.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(t,e){var n=this.checks.indexOf(t);e&&-1===n?this.checks.push(t):e||-1===n||this.checks.splice(n,1)},t.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},t.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),se=function(){function t(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=r.b.GC_MAX_IDLE,this.checkCountMax=r.b.GC_MAX_CHECK_COUNT,this.mode=r.b.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==i.i.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,n=!1,r=0;r<e.length;r++){var i=e[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[r]=null,n=!0)}if(n){var o=0;for(r=0;r<e.length;r++)null!==e[r]&&(e[o++]=e[r]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&e.destroyTexture(n);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t.prototype.destroy=function(){this.renderer=null},t}();var ue=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=i.r.UNSIGNED_BYTE,this.internalFormat=i.h.RGBA,this.samplerType=0},ce=function(){function t(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new v,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(t){var e,n,r,o,a,s,u,c,l,h,f,p,d,y,m,v,_,g,b,E,T,w,x;return"WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext?((e={})[i.r.UNSIGNED_BYTE]=((n={})[i.h.RGBA]=t.RGBA8,n[i.h.RGB]=t.RGB8,n[i.h.RG]=t.RG8,n[i.h.RED]=t.R8,n[i.h.RGBA_INTEGER]=t.RGBA8UI,n[i.h.RGB_INTEGER]=t.RGB8UI,n[i.h.RG_INTEGER]=t.RG8UI,n[i.h.RED_INTEGER]=t.R8UI,n[i.h.ALPHA]=t.ALPHA,n[i.h.LUMINANCE]=t.LUMINANCE,n[i.h.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,n),e[i.r.BYTE]=((r={})[i.h.RGBA]=t.RGBA8_SNORM,r[i.h.RGB]=t.RGB8_SNORM,r[i.h.RG]=t.RG8_SNORM,r[i.h.RED]=t.R8_SNORM,r[i.h.RGBA_INTEGER]=t.RGBA8I,r[i.h.RGB_INTEGER]=t.RGB8I,r[i.h.RG_INTEGER]=t.RG8I,r[i.h.RED_INTEGER]=t.R8I,r),e[i.r.UNSIGNED_SHORT]=((o={})[i.h.RGBA_INTEGER]=t.RGBA16UI,o[i.h.RGB_INTEGER]=t.RGB16UI,o[i.h.RG_INTEGER]=t.RG16UI,o[i.h.RED_INTEGER]=t.R16UI,o[i.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,o),e[i.r.SHORT]=((a={})[i.h.RGBA_INTEGER]=t.RGBA16I,a[i.h.RGB_INTEGER]=t.RGB16I,a[i.h.RG_INTEGER]=t.RG16I,a[i.h.RED_INTEGER]=t.R16I,a),e[i.r.UNSIGNED_INT]=((s={})[i.h.RGBA_INTEGER]=t.RGBA32UI,s[i.h.RGB_INTEGER]=t.RGB32UI,s[i.h.RG_INTEGER]=t.RG32UI,s[i.h.RED_INTEGER]=t.R32UI,s[i.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,s),e[i.r.INT]=((u={})[i.h.RGBA_INTEGER]=t.RGBA32I,u[i.h.RGB_INTEGER]=t.RGB32I,u[i.h.RG_INTEGER]=t.RG32I,u[i.h.RED_INTEGER]=t.R32I,u),e[i.r.FLOAT]=((c={})[i.h.RGBA]=t.RGBA32F,c[i.h.RGB]=t.RGB32F,c[i.h.RG]=t.RG32F,c[i.h.RED]=t.R32F,c[i.h.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,c),e[i.r.HALF_FLOAT]=((l={})[i.h.RGBA]=t.RGBA16F,l[i.h.RGB]=t.RGB16F,l[i.h.RG]=t.RG16F,l[i.h.RED]=t.R16F,l),e[i.r.UNSIGNED_SHORT_5_6_5]=((h={})[i.h.RGB]=t.RGB565,h),e[i.r.UNSIGNED_SHORT_4_4_4_4]=((f={})[i.h.RGBA]=t.RGBA4,f),e[i.r.UNSIGNED_SHORT_5_5_5_1]=((p={})[i.h.RGBA]=t.RGB5_A1,p),e[i.r.UNSIGNED_INT_2_10_10_10_REV]=((d={})[i.h.RGBA]=t.RGB10_A2,d[i.h.RGBA_INTEGER]=t.RGB10_A2UI,d),e[i.r.UNSIGNED_INT_10F_11F_11F_REV]=((y={})[i.h.RGB]=t.R11F_G11F_B10F,y),e[i.r.UNSIGNED_INT_5_9_9_9_REV]=((m={})[i.h.RGB]=t.RGB9_E5,m),e[i.r.UNSIGNED_INT_24_8]=((v={})[i.h.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,v),e[i.r.FLOAT_32_UNSIGNED_INT_24_8_REV]=((_={})[i.h.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,_),x=e):((g={})[i.r.UNSIGNED_BYTE]=((b={})[i.h.RGBA]=t.RGBA,b[i.h.RGB]=t.RGB,b[i.h.ALPHA]=t.ALPHA,b[i.h.LUMINANCE]=t.LUMINANCE,b[i.h.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,b),g[i.r.UNSIGNED_SHORT_5_6_5]=((E={})[i.h.RGB]=t.RGB,E),g[i.r.UNSIGNED_SHORT_4_4_4_4]=((T={})[i.h.RGBA]=t.RGBA,T),g[i.r.UNSIGNED_SHORT_5_5_5_1]=((w={})[i.h.RGBA]=t.RGBA,w),x=g),x}(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var n=0;n<e;n++)this.boundTextures[n]=null;this.emptyTextures={};var r=new ue(t.createTexture());t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new ue(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(n=0;n<this.boundTextures.length;n++)this.bind(null,n)},t.prototype.bind=function(t,e){void 0===e&&(e=0);var n=this.gl;if((t=null==t?void 0:t.castToBaseTexture())&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,n.activeTexture(n.TEXTURE0+e)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[e]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},t.prototype.unbind=function(t){var e=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<n.length;r++)n[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),n[r]=null)},t.prototype.ensureSamplerType=function(t){var e=this.boundTextures,n=this.hasIntegerTextures,r=this.CONTEXT_UID;if(n)for(var o=t-1;o>=0;--o){var a=e[o];if(a)a._glTextures[r].samplerType!==i.o.FLOAT&&this.renderer.texture.unbind(a)}},t.prototype.initTexture=function(t){var e=new ue(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},t.prototype.initTextureType=function(t,e){var n,r;e.internalFormat=null!==(r=null===(n=this.internalFormats[t.type])||void 0===n?void 0:n[t.format])&&void 0!==r?r:t.format,2===this.webGLVersion&&t.type===i.r.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},t.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var n=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(n,t,e))e.samplerType!==i.o.FLOAT&&(this.hasIntegerTextures=!0);else{var r=t.realWidth,o=t.realHeight,a=n.gl;(e.width!==r||e.height!==o||e.dirtyId<0)&&(e.width=r,e.height=o,a.texImage2D(t.target,0,e.internalFormat,r,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},t.prototype.destroyTexture=function(t,e){var n=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var r=this.managedTextures.indexOf(t);-1!==r&&Object(o.removeItems)(this.managedTextures,r,1)}},t.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==i.k.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=i.s.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},t.prototype.setStyle=function(t,e){var n=this.gl;if(e.mipmap&&t.mipmap!==i.k.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,e.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===i.p.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===i.p.LINEAR){var o=Math.min(t.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===i.p.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===i.p.LINEAR?n.LINEAR:n.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),le={__proto__:null,FilterSystem:J,BatchSystem:tt,ContextSystem:nt,FramebufferSystem:ot,GeometrySystem:st,MaskSystem:Ft,ScissorSystem:Ht,StencilSystem:Vt,ProjectionSystem:Xt,RenderTextureSystem:zt,ShaderSystem:oe,StateSystem:ae,TextureGCSystem:se,TextureSystem:ce},he=new u.d,fe=function(t){function e(e,n){void 0===e&&(e=i.n.UNKNOWN);var a=t.call(this)||this;return n=Object.assign({},r.b.RENDER_OPTIONS,n),a.options=n,a.type=e,a.screen=new u.j(0,0,n.width,n.height),a.view=n.view||document.createElement("canvas"),a.resolution=n.resolution||r.b.RESOLUTION,a.useContextAlpha=n.useContextAlpha,a.autoDensity=!!n.autoDensity,a.preserveDrawingBuffer=n.preserveDrawingBuffer,a.clearBeforeRender=n.clearBeforeRender,a._backgroundColor=0,a._backgroundColorRgba=[0,0,0,1],a._backgroundColorString="#000000",a.backgroundColor=n.backgroundColor||a._backgroundColor,a.backgroundAlpha=n.backgroundAlpha,void 0!==n.transparent&&(Object(o.deprecation)("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),a.useContextAlpha=n.transparent,a.backgroundAlpha=n.transparent?0:1),a._lastObjectRendered=null,a.plugins={},a}return f(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(e*this.resolution);var n=this.view.width/this.resolution,r=this.view.height/this.resolution;this.screen.width=n,this.screen.height=r,this.autoDensity&&(this.view.style.width=n+"px",this.view.style.height=r+"px"),this.emit("resize",n,r)},e.prototype.generateTexture=function(t,e,n,r){void 0===e&&(e={}),"number"==typeof e&&(Object(o.deprecation)("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),e={scaleMode:e,resolution:n,region:r});var i=e.region,a=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}(e,["region"]);0===(r=i||t.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var s=j.create(p({width:r.width,height:r.height},a));return he.tx=-r.x,he.ty=-r.y,this.render(t,{renderTexture:s,clear:!1,transform:he,skipUpdateTransform:!!t.parent}),s},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);this.plugins=null,this.type=i.n.UNKNOWN,this.view=null,this.screen=null,this._tempDisplayObjectParent=null,this.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=Object(o.hex2string)(t),Object(o.hex2rgb)(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(o.EventEmitter),pe=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},de=function(){function t(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(t){var e=this.gl,n=this.CONTEXT_UID,r=t._glBuffers[n]||this.createGLBuffer(t);e.bindBuffer(t.type,r.buffer)},t.prototype.bindBufferBase=function(t,e){var n=this.gl,r=this.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var i=t._glBuffers[r]||this.createGLBuffer(t);this.boundBufferBases[e]=t,n.bindBufferBase(n.UNIFORM_BUFFER,e,i.buffer)}},t.prototype.bindBufferRange=function(t,e,n){var r=this.gl,i=this.CONTEXT_UID;n=n||0;var o=t._glBuffers[i]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,e||0,o.buffer,256*n,256)},t.prototype.update=function(t){var e=this.gl,n=this.CONTEXT_UID,r=t._glBuffers[n];if(t._updateID!==r.updateID)if(r.updateID=t._updateID,e.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{var i=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,i)}},t.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var n=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),n&&(e||r.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),n=0;n<e.length;n++)this.dispose(this.managedBuffers[e[n]],t)},t.prototype.createGLBuffer=function(t){var e=this.CONTEXT_UID,n=this.gl;return t._glBuffers[e]=new pe(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]},t}(),ye=function(t){function e(n){var r=t.call(this,i.n.WEBGL,n)||this;return n=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new a.a("destroy"),contextChange:new a.a("contextChange"),reset:new a.a("reset"),update:new a.a("update"),postrender:new a.a("postrender"),prerender:new a.a("prerender"),resize:new a.a("resize")},r.runners.contextChange.add(r),r.globalUniforms=new q({projectionMatrix:new u.d},!0),r.addSystem(Ft,"mask").addSystem(nt,"context").addSystem(ae,"state").addSystem(oe,"shader").addSystem(ce,"texture").addSystem(de,"buffer").addSystem(st,"geometry").addSystem(ot,"framebuffer").addSystem(Ht,"scissor").addSystem(Vt,"stencil").addSystem(Xt,"projection").addSystem(se,"textureGC").addSystem(J,"filter").addSystem(zt,"renderTexture").addSystem(tt,"batch"),r.initPlugins(e.__plugins),r.multisample=void 0,n.context?r.context.initFromContext(n.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:n.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:n.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,Object(o.sayHello)(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return f(e,t),e.create=function(t){if(Object(o.isWebGLSupported)())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t,e=this.gl;if(1===this.context.webGLVersion){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}t>=i.l.HIGH?this.multisample=i.l.HIGH:t>=i.l.MEDIUM?this.multisample=i.l.MEDIUM:t>=i.l.LOW?this.multisample=i.l.LOW:this.multisample=i.l.NONE},e.prototype.addSystem=function(t,e){var n=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var r in this[e]=n,this.runners)this.runners[r].add(n);return this},e.prototype.render=function(t,e){var n,r,i,a;if(e&&(e instanceof j?(Object(o.deprecation)("6.0.0","Renderer#render arguments changed, use options instead."),n=e,r=arguments[2],i=arguments[3],a=arguments[4]):(n=e.renderTexture,r=e.clear,i=e.transform,a=e.skipUpdateTransform)),this.renderingToScreen=!n,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=i,!this.context.isLost){if(n||(this._lastObjectRendered=t),!a){var s=t.enableTempParent();t.updateTransform(),t.disableTempParent(s)}this.renderTexture.bind(n),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),n&&n.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(e,n,r,i){void 0===n&&(n={});var o=t.prototype.generateTexture.call(this,e,n,r,i);return this.framebuffer.blit(),o},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var n in this.runners.destroy.emit(),this.runners)this.runners[n].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return Object(o.deprecation)("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,n){e.__plugins=e.__plugins||{},e.__plugins[t]=n},e}(fe);function me(t){return ye.create(t)}var ve="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",_e="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",ge=function(){function t(t){Object(o.deprecation)("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=t}return t.prototype.destroy=function(){this.renderer=null},t}(),be=function(){this.texArray=null,this.blend=0,this.type=i.f.TRIANGLES,this.start=0,this.size=0,this.data=null},Ee=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),Te=function(){function t(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),we=function(t){function e(e){var n=t.call(this,e)||this;return n.shaderGenerator=null,n.geometryClass=null,n.vertexSize=null,n.state=Mt.for2d(),n.size=4*r.b.SPRITE_BATCH_SIZE,n._vertexCount=0,n._indexCount=0,n._bufferedElements=[],n._bufferedTextures=[],n._bufferSize=0,n._shader=null,n._packedGeometries=[],n._packedGeometryPoolSize=2,n._flushId=0,n._aBuffers={},n._iBuffers={},n.MAX_TEXTURES=1,n.renderer.on("prerender",n.onPrerender,n),e.runners.contextChange.add(n),n._dcIndex=0,n._aIndex=0,n._iIndex=0,n._attributeBuffer=null,n._indexBuffer=null,n._tempBoundTextures=[],n}return f(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;r.b.PREFER_ENV===i.g.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),r.b.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=At(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,n=e._textureArrayPool,r=this.size/4,i=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new be);for(;n.length<i;)n.push(new Ee);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,n=this.MAX_TEXTURES,r=e._textureArrayPool,i=this.renderer.batch,o=this._tempBoundTextures,a=this.renderer.textureGC.count,s=++v._globalBatch,u=0,c=r[0],l=0;i.copyBoundTextures(o,n);for(var h=0;h<this._bufferSize;++h){var f=t[h];t[h]=null,f._batchEnabled!==s&&(c.count>=n&&(i.boundArray(c,o,s,n),this.buildDrawCalls(c,l,h),l=h,c=r[++u],++s),f._batchEnabled=s,f.touched=a,c.elements[c.count++]=f)}c.count>0&&(i.boundArray(c,o,s,n),this.buildDrawCalls(c,l,this._bufferSize),++u,++s);for(h=0;h<o.length;h++)o[h]=null;v._globalBatch=s},e.prototype.buildDrawCalls=function(t,n,r){var i=this._bufferedElements,a=this._attributeBuffer,s=this._indexBuffer,u=this.vertexSize,c=e._drawCallPool,l=this._dcIndex,h=this._aIndex,f=this._iIndex,p=c[l];p.start=this._iIndex,p.texArray=t;for(var d=n;d<r;++d){var y=i[d],m=y._texture.baseTexture,v=o.premultiplyBlendMode[m.alphaMode?1:0][y.blendMode];i[d]=null,n<d&&p.blend!==v&&(p.size=f-p.start,n=d,(p=c[++l]).texArray=t,p.start=f),this.packInterleavedGeometry(y,a,s,h,f),h+=y.vertexData.length/2*u,f+=y.indices.length,p.blend=v}n<r&&(p.size=f-p.start,++l),this._dcIndex=l,this._aIndex=h,this._iIndex=f},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this._packedGeometries,e=this._attributeBuffer,n=this._indexBuffer;r.b.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,n=this.renderer,r=n.gl,i=n.state,o=e._drawCallPool,a=null,s=0;s<t;s++){var u=o[s],c=u.texArray,l=u.type,h=u.size,f=u.start,p=u.blend;a!==c&&(a=c,this.bindAndClearTexArray(c)),this.state.blendMode=p,i.set(this.state),r.drawElements(l,h,r.UNSIGNED_SHORT,2*f)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),r.b.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=Object(o.nextPow2)(Math.ceil(t/8)),n=Object(o.log2)(e),r=8*e;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new Te(r*this.vertexSize*4)),i},e.prototype.getIndexBuffer=function(t){var e=Object(o.nextPow2)(Math.ceil(t/12)),n=Object(o.log2)(e),r=12*e;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i},e.prototype.packInterleavedGeometry=function(t,e,n,r,i){for(var a=e.uint32View,s=e.float32View,u=r/this.vertexSize,c=t.uvs,l=t.indices,h=t.vertexData,f=t._texture.baseTexture._batchLocation,p=Math.min(t.worldAlpha,1),d=p<1&&t._texture.baseTexture.alphaMode?Object(o.premultiplyTint)(t._tintRGB,p):t._tintRGB+(255*p<<24),y=0;y<h.length;y+=2)s[r++]=h[y],s[r++]=h[y+1],s[r++]=c[y],s[r++]=c[y+1],a[r++]=d,s[r++]=f;for(y=0;y<l.length;y++)n[i++]=u+l[y]},e._drawCallPool=[],e._textureArrayPool=[],e}(Q),xe=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),n=0;n<t;n++)e[n]=n;this.defaultGroupCache[t]=q.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new kt(this.vertexSrc,r)}var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new u.d,default:this.defaultGroupCache[t]};return new Nt(this.programCache[t],i)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var n=0;n<t;n++)n>0&&(e+="\nelse "),n<t-1&&(e+="if(vTextureId < "+n+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+n+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},t}(),Se=function(t){function e(e){void 0===e&&(e=!1);var n=t.call(this)||this;return n._buffer=new F(null,e,!1),n._indexBuffer=new F(null,e,!0),n.addAttribute("aVertexPosition",n._buffer,2,!1,i.r.FLOAT).addAttribute("aTextureCoord",n._buffer,2,!1,i.r.FLOAT).addAttribute("aColor",n._buffer,4,!0,i.r.UNSIGNED_BYTE).addAttribute("aTextureId",n._buffer,1,!0,i.r.FLOAT).addIndex(n._indexBuffer),n}return f(e,t),e}(X),Oe="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Pe="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",Re=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:Oe,fragment:Pe,geometryClass:Se,vertexSize:6},t),n=e.vertex,r=e.fragment,i=e.vertexSize,o=e.geometryClass;return function(t){function e(e){var a=t.call(this,e)||this;return a.shaderGenerator=new xe(n,r),a.geometryClass=o,a.vertexSize=i,a}return f(e,t),e}(we)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return Oe},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return Pe},enumerable:!1,configurable:!0}),t}(),Ae=Re.create(),Ie={},Ce=function(t){Object.defineProperty(Ie,t,{get:function(){return Object(o.deprecation)("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),P[t]}})};for(var ke in P)Ce(ke);var Ne={},Me=function(t){Object.defineProperty(Ne,t,{get:function(){return Object(o.deprecation)("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),le[t]}})};for(var ke in le)Me(ke)},"./node_modules/@pixi/display/dist/esm/display.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return C})),n.d(e,"c",(function(){return R})),n.d(e,"d",(function(){return A}));var r=n("./node_modules/@pixi/settings/dist/esm/settings.js"),i=n("./node_modules/@pixi/math/dist/esm/math.js"),o=n("./node_modules/@pixi/utils/dist/esm/utils.js");
/*!
 * @pixi/display - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
r.b.SORTABLE_CHILDREN=!1;var a=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?i.j.EMPTY:((t=t||new i.j(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addPointMatrix=function(t,e){var n=t.a,r=t.b,i=t.c,o=t.d,a=t.tx,s=t.ty,u=n*e.x+i*e.y+a,c=r*e.x+o*e.y+s;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)},t.prototype.addQuad=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=t[0],a=t[1];e=o<e?o:e,n=a<n?a:n,r=o>r?o:r,i=a>i?a:i,e=(o=t[2])<e?o:e,n=(a=t[3])<n?a:n,r=o>r?o:r,i=a>i?a:i,e=(o=t[4])<e?o:e,n=(a=t[5])<n?a:n,r=o>r?o:r,i=a>i?a:i,e=(o=t[6])<e?o:e,n=(a=t[7])<n?a:n,r=o>r?o:r,i=a>i?a:i,this.minX=e,this.minY=n,this.maxX=r,this.maxY=i},t.prototype.addFrame=function(t,e,n,r,i){this.addFrameMatrix(t.worldTransform,e,n,r,i)},t.prototype.addFrameMatrix=function(t,e,n,r,i){var o=t.a,a=t.b,s=t.c,u=t.d,c=t.tx,l=t.ty,h=this.minX,f=this.minY,p=this.maxX,d=this.maxY,y=o*e+s*n+c,m=a*e+u*n+l;h=y<h?y:h,f=m<f?m:f,p=y>p?y:p,d=m>d?m:d,h=(y=o*r+s*n+c)<h?y:h,f=(m=a*r+u*n+l)<f?m:f,p=y>p?y:p,d=m>d?m:d,h=(y=o*e+s*i+c)<h?y:h,f=(m=a*e+u*i+l)<f?m:f,p=y>p?y:p,d=m>d?m:d,h=(y=o*r+s*i+c)<h?y:h,f=(m=a*r+u*i+l)<f?m:f,p=y>p?y:p,d=m>d?m:d,this.minX=h,this.minY=f,this.maxX=p,this.maxY=d},t.prototype.addVertexData=function(t,e,n){for(var r=this.minX,i=this.minY,o=this.maxX,a=this.maxY,s=e;s<n;s+=2){var u=t[s],c=t[s+1];r=u<r?u:r,i=c<i?c:i,o=u>o?u:o,a=c>a?c:a}this.minX=r,this.minY=i,this.maxX=o,this.maxY=a},t.prototype.addVertices=function(t,e,n,r){this.addVerticesMatrix(t.worldTransform,e,n,r)},t.prototype.addVerticesMatrix=function(t,e,n,r,i,o){void 0===i&&(i=0),void 0===o&&(o=i);for(var a=t.a,s=t.b,u=t.c,c=t.d,l=t.tx,h=t.ty,f=this.minX,p=this.minY,d=this.maxX,y=this.maxY,m=n;m<r;m+=2){var v=e[m],_=e[m+1],g=a*v+u*_+l,b=c*_+s*v+h;f=Math.min(f,g-i),d=Math.max(d,g+i),p=Math.min(p,b-o),y=Math.max(y,b+o)}this.minX=f,this.minY=p,this.maxX=d,this.maxY=y},t.prototype.addBounds=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>i?t.maxY:i},t.prototype.addBoundsMask=function(t,e){var n=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(n<=i&&r<=o){var a=this.minX,s=this.minY,u=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>u?i:u,this.maxY=o>c?o:c}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var n=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(n<=i&&r<=o){var a=this.minX,s=this.minY,u=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>u?i:u,this.maxY=o>c?o:c}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,n,r,i,o){t-=i,e-=o,n+=i,r+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r},t}(),s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function u(t,e){function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var c,l,h,f,p,d,y,m,v,_,g,b,E,T,w,x,S,O,P,R=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new i.m,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new a,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return u(e,t),e.mixin=function(t){for(var n=Object.keys(t),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(e.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new i.j),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new i.j),t=this._localBoundsRect),this._localBounds||(this._localBounds=new a);var e=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,o=this._boundsID;this._bounds=this._localBounds;var s=this.getBounds(!1,t);return this.parent=n,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-o,s},e.prototype.toGlobal=function(t,e,n){return void 0===n&&(n=!1),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,n,r){return e&&(t=e.toGlobal(t,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,n,r,i,o,a,s,u){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=0),this.position.x=t,this.position.y=e,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=u,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new A),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*i.i},set:function(t){this.transform.rotation=t*i.b},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){if(this._mask!==t){var e;if(this._mask)(e=this._mask.maskObject||this._mask)._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1);if(this._mask=t,this._mask)0===(e=this._mask.maskObject||this._mask)._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++}},enumerable:!1,configurable:!0}),e}(o.EventEmitter),A=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return u(e,t),e}(R);function I(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}R.prototype.displayObjectUpdateTransform=R.prototype.updateTransform,function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(c||(c={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(l||(l={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(h||(h={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(f||(f={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(p||(p={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(d||(d={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(y||(y={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(m||(m={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(v||(v={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(_||(_={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(g||(g={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(b||(b={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(E||(E={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(T||(T={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(w||(w={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(x||(x={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(S||(S={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(O||(O={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(P||(P={}));var C=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=r.b.SORTABLE_CHILDREN,e.sortDirty=!1,e}return u(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var r=0;r<e.length;r++)this.addChild(e[r]);else{var i=e[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),r=this.getChildIndex(e);this.children[n]=e,this.children[r]=t,this.onChildrenChange(n<r?n:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);Object(o.removeItems)(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];if(e.length>1)for(var r=0;r<e.length;r++)this.removeChild(e[r]);else{var i=e[0],a=this.children.indexOf(i);if(-1===a)return null;i.parent=null,i.transform._parentID=-1,Object(o.removeItems)(this.children,a,1),this._boundsID++,this.onChildrenChange(a),i.emit("removed",this),this.emit("childRemoved",i,this,a)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,Object(o.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var n,r=t,i=e-r;if(i>0&&i<=e){n=this.children.splice(r,i);for(var o=0;o<n.length;++o)n[o].parent=null,n[o].transform&&(n[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(o=0;o<n.length;++o)n[o].emit("removed",this),this.emit("childRemoved",n[o],this,o);return n}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,n=this.children.length;e<n;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(I),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var n=this.children[t];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var n=e._mask.maskObject||e._mask;n.calculateBounds(),this._bounds.addBoundsMask(e._bounds,n._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,n){void 0===n&&(n=!1);var r=t.prototype.getLocalBounds.call(this,e);if(!n)for(var i=0,o=this.children.length;i<o;++i){var a=this.children[i];a.visible&&a.updateTransform()}return r},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){var e=this.filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r])}var i=e&&this._enabledFilters&&this._enabledFilters.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==S.NONE));i&&t.batch.flush(),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),n&&t.mask.push(this,this._mask),this._render(t);r=0;for(var o=this.children.length;r<o;r++)this.children[r].render(t);i&&t.batch.flush(),n&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var n="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(n)for(var i=0;i<r.length;++i)r[i].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(R);C.prototype.containerUpdateTransform=C.prototype.updateTransform},"./node_modules/@pixi/graphics/dist/esm/graphics.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return F})),n.d(e,"d",(function(){return k})),n.d(e,"e",(function(){return j})),n.d(e,"f",(function(){return i})),n.d(e,"g",(function(){return r})),n.d(e,"h",(function(){return D})),n.d(e,"i",(function(){return U}));var r,i,o=n("./node_modules/@pixi/core/dist/esm/core.js"),a=n("./node_modules/@pixi/math/dist/esm/math.js"),s=n("./node_modules/@pixi/utils/dist/esm/utils.js"),u=n("./node_modules/@pixi/constants/dist/esm/constants.js"),c=n("./node_modules/@pixi/display/dist/esm/display.js");!function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"}(r||(r={})),function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}(i||(i={}));var l={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},h=function(){function t(){this.color=16777215,this.alpha=1,this.texture=o.db.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=o.db.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function p(t,e){function n(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var d={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var n=t.points,r=t.holes,i=e.points,o=e.indices;if(n.length>=6){for(var a=[],u=0;u<r.length;u++){var c=r[u];a.push(n.length/2),n=n.concat(c.points)}var l=Object(s.earcut)(n,a,2);if(!l)return;var h=i.length/2;for(u=0;u<l.length;u+=3)o.push(l[u]+h),o.push(l[u+1]+h),o.push(l[u+2]+h);for(u=0;u<n.length;u++)i.push(n[u])}}},y={build:function(t){var e,n,r=t.shape,i=t.points,o=r.x,s=r.y;if(i.length=0,t.type===a.l.CIRC)e=r.radius,n=r.radius;else{var u=t.shape;e=u.width,n=u.height}if(0!==e&&0!==n){var c=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(e+n));c/=2.3;for(var l=2*Math.PI/c,h=0;h<c-.5;h++)i.push(o+Math.sin(-l*h)*e,s+Math.cos(-l*h)*n);i.push(i[0],i[1])}},triangulate:function(t,e){var n=t.points,r=e.points,i=e.indices,o=r.length/2,a=o,s=t.shape,u=t.matrix,c=s.x,l=s.y;r.push(t.matrix?u.a*c+u.c*l+u.tx:c,t.matrix?u.b*c+u.d*l+u.ty:l);for(var h=0;h<n.length;h+=2)r.push(n[h],n[h+1]),i.push(o++,a,o)}},m={build:function(t){var e=t.shape,n=e.x,r=e.y,i=e.width,o=e.height,a=t.points;a.length=0,a.push(n,r,n+i,r,n+i,r+o,n,r+o)},triangulate:function(t,e){var n=t.points,r=e.points,i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function v(t,e,n){return t+(e-t)*n}function _(t,e,n,r,i,o,a){void 0===a&&(a=[]);for(var s=a,u=0,c=0,l=0,h=0,f=0,p=0,d=0,y=0;d<=20;++d)u=v(t,n,y=d/20),c=v(e,r,y),l=v(n,i,y),h=v(r,o,y),f=v(u,l,y),p=v(c,h,y),0===d&&s[s.length-2]===f&&s[s.length-1]===p||s.push(f,p);return s}var g={build:function(t){var e=t.shape,n=t.points,r=e.x,i=e.y,o=e.width,a=e.height,s=Math.max(0,Math.min(e.radius,Math.min(o,a)/2));n.length=0,s?(_(r,i+s,r,i,r+s,i,n),_(r+o-s,i,r+o,i,r+o,i+s,n),_(r+o,i+a-s,r+o,i+a,r+o-s,i+a,n),_(r+s,i+a,r,i+a,r,i+a-s,n)):n.push(r,i,r+o,i,r+o,i+a,r,i+a)},triangulate:function(t,e){for(var n=t.points,r=e.points,i=e.indices,o=r.length/2,a=Object(s.earcut)(n,null,2),u=0,c=a.length;u<c;u+=3)i.push(a[u]+o),i.push(a[u+1]+o),i.push(a[u+2]+o);for(u=0,c=n.length;u<c;u++)r.push(n[u],n[++u])}};function b(t,e,n,r,i,o,a,s){var u,c;a?(u=r,c=-n):(u=-r,c=n);var l=t-n*i+u,h=e-r*i+c,f=t+n*o+u,p=e+r*o+c;return s.push(l,h),s.push(f,p),2}function E(t,e,n,r,i,o,a,s){var u=n-t,c=r-e,l=Math.atan2(u,c),h=Math.atan2(i-t,o-e);s&&l<h?l+=2*Math.PI:!s&&l>h&&(h+=2*Math.PI);var f=l,p=h-l,d=Math.abs(p),y=Math.sqrt(u*u+c*c),m=1+(15*d*Math.sqrt(y)/Math.PI>>0),v=p/m;if(f+=v,s){a.push(t,e),a.push(n,r);for(var _=1,g=f;_<m;_++,g+=v)a.push(t,e),a.push(t+Math.sin(g)*y,e+Math.cos(g)*y);a.push(t,e),a.push(i,o)}else{a.push(n,r),a.push(t,e);for(_=1,g=f;_<m;_++,g+=v)a.push(t+Math.sin(g)*y,e+Math.cos(g)*y),a.push(t,e);a.push(i,o),a.push(t,e)}return 2*m}function T(t,e){t.lineStyle.native?function(t,e){var n=0,r=t.shape,i=t.points||r.points,o=r.type!==a.l.POLY||r.closeStroke;if(0!==i.length){var s=e.points,u=e.indices,c=i.length/2,l=s.length/2,h=l;for(s.push(i[0],i[1]),n=1;n<c;n++)s.push(i[2*n],i[2*n+1]),u.push(h,h+1),h++;o&&u.push(h,l)}}(t,e):function(t,e){var n=t.shape,o=t.points||n.points.slice(),s=e.closePointEps;if(0!==o.length){var u=t.lineStyle,c=new a.g(o[0],o[1]),h=new a.g(o[o.length-2],o[o.length-1]),f=n.type!==a.l.POLY||n.closeStroke,p=Math.abs(c.x-h.x)<s&&Math.abs(c.y-h.y)<s;if(f){o=o.slice(),p&&(o.pop(),o.pop(),h.set(o[o.length-2],o[o.length-1]));var d=.5*(c.x+h.x),y=.5*(h.y+c.y);o.unshift(d,y),o.push(d,y)}var m=e.points,v=o.length/2,_=o.length,g=m.length/2,T=u.width/2,w=T*T,x=u.miterLimit*u.miterLimit,S=o[0],O=o[1],P=o[2],R=o[3],A=0,I=0,C=-(O-R),k=S-P,N=0,M=0,j=Math.sqrt(C*C+k*k);C/=j,k/=j,C*=T,k*=T;var D=u.alignment,L=2*(1-D),B=2*D;f||(u.cap===i.ROUND?_+=E(S-C*(L-B)*.5,O-k*(L-B)*.5,S-C*L,O-k*L,S+C*B,O+k*B,m,!0)+2:u.cap===i.SQUARE&&(_+=b(S,O,C,k,L,B,!0,m))),m.push(S-C*L,O-k*L),m.push(S+C*B,O+k*B);for(var F=1;F<v-1;++F){S=o[2*(F-1)],O=o[2*(F-1)+1],P=o[2*F],R=o[2*F+1],A=o[2*(F+1)],I=o[2*(F+1)+1],C=-(O-R),k=S-P,C/=j=Math.sqrt(C*C+k*k),k/=j,C*=T,k*=T,N=-(R-I),M=P-A,N/=j=Math.sqrt(N*N+M*M),M/=j,N*=T,M*=T;var U=P-S,G=O-R,H=P-A,V=I-R,X=G*H-V*U,W=X<0;if(Math.abs(X)<.1)m.push(P-C*L,R-k*L),m.push(P+C*B,R+k*B);else{var Y=(-C+S)*(-k+R)-(-C+P)*(-k+O),z=(-N+A)*(-M+R)-(-N+P)*(-M+I),q=(U*z-H*Y)/X,K=(V*Y-G*z)/X,Z=(q-P)*(q-P)+(K-R)*(K-R),$=P+(q-P)*L,J=R+(K-R)*L,Q=P-(q-P)*B,tt=R-(K-R)*B,et=W?L:B;Z<=Math.min(U*U+G*G,H*H+V*V)+et*et*w?u.join===r.BEVEL||Z/w>x?(W?(m.push($,J),m.push(P+C*B,R+k*B),m.push($,J),m.push(P+N*B,R+M*B)):(m.push(P-C*L,R-k*L),m.push(Q,tt),m.push(P-N*L,R-M*L),m.push(Q,tt)),_+=2):u.join===r.ROUND?W?(m.push($,J),m.push(P+C*B,R+k*B),_+=E(P,R,P+C*B,R+k*B,P+N*B,R+M*B,m,!0)+4,m.push($,J),m.push(P+N*B,R+M*B)):(m.push(P-C*L,R-k*L),m.push(Q,tt),_+=E(P,R,P-C*L,R-k*L,P-N*L,R-M*L,m,!1)+4,m.push(P-N*L,R-M*L),m.push(Q,tt)):(m.push($,J),m.push(Q,tt)):(m.push(P-C*L,R-k*L),m.push(P+C*B,R+k*B),u.join===r.BEVEL||Z/w>x||(u.join===r.ROUND?_+=W?E(P,R,P+C*B,R+k*B,P+N*B,R+M*B,m,!0)+2:E(P,R,P-C*L,R-k*L,P-N*L,R-M*L,m,!1)+2:(W?(m.push(Q,tt),m.push(Q,tt)):(m.push($,J),m.push($,J)),_+=2)),m.push(P-N*L,R-M*L),m.push(P+N*B,R+M*B),_+=2)}}S=o[2*(v-2)],O=o[2*(v-2)+1],P=o[2*(v-1)],C=-(O-(R=o[2*(v-1)+1])),k=S-P,C/=j=Math.sqrt(C*C+k*k),k/=j,C*=T,k*=T,m.push(P-C*L,R-k*L),m.push(P+C*B,R+k*B),f||(u.cap===i.ROUND?_+=E(P-C*(L-B)*.5,R-k*(L-B)*.5,P-C*L,R-k*L,P+C*B,R+k*B,m,!1)+2:u.cap===i.SQUARE&&(_+=b(P,R,C,k,L,B,!1,m)));var nt=e.indices,rt=l.epsilon*l.epsilon;for(F=g;F<_+g-2;++F)S=m[2*F],O=m[2*F+1],P=m[2*(F+1)],R=m[2*(F+1)+1],A=m[2*(F+2)],I=m[2*(F+2)+1],Math.abs(S*(R-I)+P*(I-O)+A*(O-R))<rt||nt.push(F,F+1,F+2)}}(t,e)}var w,x=function(){function t(){}return t.curveTo=function(t,e,n,r,i,o){var a=o[o.length-2],s=o[o.length-1]-e,u=a-t,c=r-e,l=n-t,h=Math.abs(s*l-u*c);if(h<1e-8||0===i)return o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e),null;var f=s*s+u*u,p=c*c+l*l,d=s*c+u*l,y=i*Math.sqrt(f)/h,m=i*Math.sqrt(p)/h,v=y*d/f,_=m*d/p,g=y*l+m*u,b=y*c+m*s,E=u*(m+v),T=s*(m+v),w=l*(y+_),x=c*(y+_);return{cx:g+t,cy:b+e,radius:i,startAngle:Math.atan2(T-b,E-g),endAngle:Math.atan2(x-b,w-g),anticlockwise:u*c>l*s}},t.arc=function(t,e,n,r,i,o,s,u,c){for(var h=s-o,f=l._segmentsCount(Math.abs(h)*i,40*Math.ceil(Math.abs(h)/a.f)),p=h/(2*f),d=2*p,y=Math.cos(p),m=Math.sin(p),v=f-1,_=v%1/v,g=0;g<=v;++g){var b=p+o+d*(g+_*g),E=Math.cos(b),T=-Math.sin(b);c.push((y*E+m*T)*i+n,(y*-T+m*E)*i+r)}},t}(),S=function(){function t(){}return t.curveLength=function(t,e,n,r,i,o,a,s){for(var u=0,c=0,l=0,h=0,f=0,p=0,d=0,y=0,m=0,v=0,_=0,g=t,b=e,E=1;E<=10;++E)v=g-(y=(d=(p=(f=1-(c=E/10))*f)*f)*t+3*p*c*n+3*f*(l=c*c)*i+(h=l*c)*a),_=b-(m=d*e+3*p*c*r+3*f*l*o+h*s),g=y,b=m,u+=Math.sqrt(v*v+_*_);return u},t.curveTo=function(e,n,r,i,o,a,s){var u=s[s.length-2],c=s[s.length-1];s.length-=2;var h=l._segmentsCount(t.curveLength(u,c,e,n,r,i,o,a)),f=0,p=0,d=0,y=0,m=0;s.push(u,c);for(var v=1,_=0;v<=h;++v)d=(p=(f=1-(_=v/h))*f)*f,m=(y=_*_)*_,s.push(d*u+3*p*_*e+3*f*y*r+m*o,d*c+3*p*_*n+3*f*y*i+m*a)},t}(),O=function(){function t(){}return t.curveLength=function(t,e,n,r,i,o){var a=t-2*n+i,s=e-2*r+o,u=2*n-2*t,c=2*r-2*e,l=4*(a*a+s*s),h=4*(a*u+s*c),f=u*u+c*c,p=2*Math.sqrt(l+h+f),d=Math.sqrt(l),y=2*l*d,m=2*Math.sqrt(f),v=h/d;return(y*p+d*h*(p-m)+(4*f*l-h*h)*Math.log((2*d+v+p)/(v+m)))/(4*y)},t.curveTo=function(e,n,r,i,o){for(var a=o[o.length-2],s=o[o.length-1],u=l._segmentsCount(t.curveLength(a,s,e,n,r,i)),c=0,h=0,f=1;f<=u;++f){var p=f/u;c=a+(e-a)*p,h=s+(n-s)*p,o.push(c+(e+(r-e)*p-c)*p,h+(n+(i-n)*p-h)*p)}},t}(),P=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,n){this.reset(),this.style=t,this.start=e,this.attribStart=n},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),R=((w={})[a.l.POLY]=d,w[a.l.CIRC]=y,w[a.l.ELIP]=y,w[a.l.RECT]=m,w[a.l.RREC]=g,w),A=[],I=[];function C(t){for(var e=t.points,n=0,r=0;r<e.length-2;r+=2)n+=(e[r+2]-e[r])*(e[r+3]+e[r+1]);return n>0}var k=function(){function t(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=n,this.fillStyle=e,this.matrix=r,this.type=t.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),N=new a.g,M=new c.a,j=function(t){function e(){var e=t.call(this)||this;return e.closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new c.a,e.boundsDirty=-1,e}return p(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),I.push(this.drawCalls[t]);this.drawCalls.length=0;for(t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),A.push(e)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null);var i=new k(t,e,n,r);return this.graphicsData.push(i),this.dirty++,this},e.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var n=new k(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=r.lineStyle,r.holes.push(n),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,n=0;n<e.length;++n){var r=e[n];if(r.fillStyle.visible&&(r.shape&&(r.matrix?r.matrix.applyInverse(t,N):N.copyFrom(t),r.shape.contains(N.x,N.y)))){var i=!1;if(r.holes)for(var o=0;o<r.holes.length;o++){if(r.holes[o].shape.contains(N.x,N.y)){i=!0;break}}if(!i)return!0}}return!1},e.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,n=this.graphicsData,r=null,i=null;this.batches.length>0&&(i=(r=this.batches[this.batches.length-1]).style);for(var o=this.shapeIndex;o<n.length;o++){this.shapeIndex++;var a=n[o],s=a.fillStyle,c=a.lineStyle;R[a.type].build(a),a.matrix&&this.transformPoints(a.points,a.matrix);for(var l=0;l<2;l++){var h=0===l?s:c;if(h.visible){var f=h.texture.baseTexture,p=this.indices.length,d=this.points.length/2;f.wrapMode=u.s.REPEAT,0===l?this.processFill(a):this.processLine(a);var y=this.points.length/2-d;0!==y&&(r&&!this._compareStyles(i,h)&&(r.end(p,d),r=null),r||((r=A.pop()||new P).begin(h,p,d),this.batches.push(r),i=h),this.addUvs(this.points,e,h.texture,d,y,h.matrix))}}}var m=this.indices.length,v=this.points.length/2;if(r&&r.end(m,v),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var _=v>65535&&t;this.indicesUint16=_?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native))},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var n=this.graphicsData[t],r=n.fillStyle,i=n.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(i&&!i.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,n=t.length;e<n;e++)for(var r=t[e],i=0;i<r.size;i++){var o=r.start+i;this.indicesUint16[o]=this.indicesUint16[o]-r.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,n=0;n<t.length;n++)if(t[n].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++o.h._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),I.push(this.drawCalls[e]);this.drawCalls.length=0;var n=this.colors,r=this.textureIds,i=I.pop();i||((i=new o.i).texArray=new o.o),i.texArray.count=0,i.start=0,i.size=0,i.type=u.f.TRIANGLES;var a=0,s=null,c=0,l=!1,h=u.f.TRIANGLES,f=0;this.drawCalls.push(i);for(e=0;e<this.batches.length;e++){var p=this.batches[e],d=p.style,y=d.texture.baseTexture;l!==!!d.native&&(h=(l=!!d.native)?u.f.LINES:u.f.TRIANGLES,s=null,a=8,t++),s!==y&&(s=y,y._batchEnabled!==t&&(8===a&&(t++,a=0,i.size>0&&((i=I.pop())||((i=new o.i).texArray=new o.o),this.drawCalls.push(i)),i.start=f,i.size=0,i.texArray.count=0,i.type=h),y.touched=1,y._batchEnabled=t,y._batchLocation=a,y.wrapMode=u.s.REPEAT,i.texArray.elements[i.texArray.count++]=y,a++)),i.size+=p.size,f+=p.size,c=y._batchLocation,this.addColors(n,d.color,d.alpha,p.attribSize,p.attribStart),this.addTextureIds(r,c,p.attribSize,p.attribStart)}o.h._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,n=this.colors,r=this.textureIds,i=new ArrayBuffer(3*t.length*4),o=new Float32Array(i),a=new Uint32Array(i),s=0,u=0;u<t.length/2;u++)o[s++]=t[2*u],o[s++]=t[2*u+1],o[s++]=e[2*u],o[s++]=e[2*u+1],a[s++]=n[u],o[s++]=r[u];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),d.triangulate(t,this)):R[t.type].triangulate(t,this)},e.prototype.processLine=function(t){T(t,this);for(var e=0;e<t.holes.length;e++)T(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var n=t[e];R[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=M,n=a.d.IDENTITY;this._bounds.clear(),e.clear();for(var r=0;r<this.graphicsData.length;r++){var i=this.graphicsData[r],o=i.shape,s=i.type,u=i.lineStyle,c=i.matrix||a.d.IDENTITY,l=0;if(u&&u.visible){var h=u.alignment;l=u.width,s===a.l.POLY?C(o)?l*=1-h:l*=h:l*=Math.max(0,h)}if(n!==c&&(e.isEmpty()||(t.addBoundsMatrix(e,n),e.clear()),n=c),s===a.l.RECT||s===a.l.RREC){var f=o;e.addFramePad(f.x,f.y,f.x+f.width,f.y+f.height,l,l)}else if(s===a.l.CIRC){var p=o;e.addFramePad(p.x,p.y,p.x,p.y,p.radius+l,p.radius+l)}else if(s===a.l.ELIP){var d=o;e.addFramePad(d.x,d.y,d.x,d.y,d.width+l,d.height+l)}else{var y=o;t.addVerticesMatrix(n,y.points,0,y.points.length,l,l)}}e.isEmpty()||t.addBoundsMatrix(e,n),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var n=0;n<t.length/2;n++){var r=t[2*n],i=t[2*n+1];t[2*n]=e.a*r+e.c*i+e.tx,t[2*n+1]=e.b*r+e.d*i+e.ty}},e.prototype.addColors=function(t,e,n,r,i){void 0===i&&(i=0);var o=(e>>16)+(65280&e)+((255&e)<<16),a=Object(s.premultiplyTint)(o,n);t.length=Math.max(t.length,i+r);for(var u=0;u<r;u++)t[i+u]=a},e.prototype.addTextureIds=function(t,e,n,r){void 0===r&&(r=0),t.length=Math.max(t.length,r+n);for(var i=0;i<n;i++)t[r+i]=e},e.prototype.addUvs=function(t,e,n,r,i,o){void 0===o&&(o=null);for(var a=0,s=e.length,u=n.frame;a<i;){var c=t[2*(r+a)],l=t[2*(r+a)+1];if(o){var h=o.a*c+o.c*l+o.tx;l=o.b*c+o.d*l+o.ty,c=h}a++,e.push(c/u.width,l/u.height)}var f=n.baseTexture;(u.width<f.width||u.height<f.height)&&this.adjustUvs(e,n,s,i)},e.prototype.adjustUvs=function(t,e,n,r){for(var i=e.baseTexture,o=1e-6,a=n+2*r,s=e.frame,u=s.width/i.width,c=s.height/i.height,l=s.x/s.width,h=s.y/s.height,f=Math.floor(t[n]+o),p=Math.floor(t[n+1]+o),d=n+2;d<a;d+=2)f=Math.min(f,Math.floor(t[d]+o)),p=Math.min(p,Math.floor(t[d+1]+o));l-=f,h-=p;for(d=n;d<a;d+=2)t[d]=(t[d]+l)*u,t[d+1]=(t[d+1]+h)*c},e.BATCHABLE_SIZE=100,e}(o.j),D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=i.BUTT,e.join=r.MITER,e.miterLimit=10,e}return p(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(h),L=new Float32Array(3),B={},F=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n.shader=null,n.pluginName="batch",n.currentPath=null,n.batches=[],n.batchTint=-1,n.batchDirty=-1,n.vertexData=null,n._fillStyle=new h,n._lineStyle=new D,n._matrix=null,n._holeMode=!1,n.state=o.Z.for2d(),n._geometry=e||new j,n._geometry.refCount++,n._transformID=-1,n.tint=16777215,n.blendMode=u.b.NORMAL,n}return p(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,e,n,r,i){return void 0===t&&(t=null),void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=.5),void 0===i&&(i=!1),"number"==typeof t&&(t={width:t,color:e,alpha:n,alignment:r,native:i}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:o.db.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:i.BUTT,join:r.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new a.h,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new a.h,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,r=n[n.length-2],i=n[n.length-1];return r===t&&i===e||n.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,n,r){this._initCurve();var i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),O.curveTo(t,e,n,r,i),this},e.prototype.bezierCurveTo=function(t,e,n,r,i,o){return this._initCurve(),S.curveTo(t,e,n,r,i,o,this.currentPath.points),this},e.prototype.arcTo=function(t,e,n,r,i){this._initCurve(t,e);var o=this.currentPath.points,a=x.curveTo(t,e,n,r,i,o);if(a){var s=a.cx,u=a.cy,c=a.radius,l=a.startAngle,h=a.endAngle,f=a.anticlockwise;this.arc(s,u,c,l,h,f)}return this},e.prototype.arc=function(t,e,n,r,i,o){if(void 0===o&&(o=!1),r===i)return this;if(!o&&i<=r?i+=a.f:o&&r<=i&&(r+=a.f),0===i-r)return this;var s=t+Math.cos(r)*n,u=e+Math.sin(r)*n,c=this._geometry.closePointEps,l=this.currentPath?this.currentPath.points:null;if(l){var h=Math.abs(l[l.length-2]-s),f=Math.abs(l[l.length-1]-u);h<c&&f<c||l.push(s,u)}else this.moveTo(s,u),l=this.currentPath.points;return x.arc(s,u,t,e,n,r,i,o,l),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:o.db.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:o.db.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,n,r){return this.drawShape(new a.j(t,e,n,r))},e.prototype.drawRoundedRect=function(t,e,n,r,i){return this.drawShape(new a.k(t,e,n,r,i))},e.prototype.drawCircle=function(t,e,n){return this.drawShape(new a.a(t,e,n))},e.prototype.drawEllipse=function(t,e,n,r){return this.drawShape(new a.c(t,e,n,r))},e.prototype.drawPolygon=function(){for(var t,e=arguments,n=[],r=0;r<arguments.length;r++)n[r]=e[r];var i=!0,o=n[0];o.points?(i=o.closeStroke,t=o.points):t=Array.isArray(n[0])?n[0]:n;var s=new a.h(t);return s.closeStroke=i,this.drawShape(s),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==a.l.RECT||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var e=this._geometry,n=t.context.supports.uint32Indices;e.updateBatches(n),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(var r=0;r<n;r++){var i=t.batches[r],o=i.style.color,a=new Float32Array(this.vertexData.buffer,4*i.attribStart*2,2*i.attribSize),u=new Float32Array(t.uvsFloat32.buffer,4*i.attribStart*2,2*i.attribSize),c={vertexData:a,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*i.start,i.size),uvs:u,_batchRGB:Object(s.hex2rgb)(o),_tintRGB:o,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[r]=c}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,n=this.batches.length;e<n;e++){var r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),n=this._geometry,r=this.tint,i=this.worldAlpha,o=e.uniforms,a=n.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(r>>16&255)/255*i,o.tint[1]=(r>>8&255)/255*i,o.tint[2]=(255&r)/255*i,o.tint[3]=i,t.shader.bind(e),t.geometry.bind(n,e),t.state.set(this.state);for(var s=0,u=a.length;s<u;s++)this._renderDrawCallDirect(t,n.drawCalls[s])},e.prototype._renderDrawCallDirect=function(t,e){for(var n=e.texArray,r=e.type,i=e.size,o=e.start,a=n.count,s=0;s<a;s++)t.texture.bind(n.elements[s],s);t.geometry.draw(r,i,o)},e.prototype._resolveDirectShader=function(t){var e=this.shader,n=this.pluginName;if(!e){if(!B[n]){for(var r=t.plugins.batch.MAX_TEXTURES,i=new Int32Array(r),s=0;s<r;s++)i[s]=s;var u={tint:new Float32Array([1,1,1,1]),translationMatrix:new a.d,default:o.ib.from({uSamplers:i},!0)},c=t.plugins[n]._shader.program;B[n]=new o.W(c,u)}e=B[n]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,n=e.minX,r=e.minY,i=e.maxX,o=e.maxY;this._bounds.addFrame(this.transform,n,r,i,o)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Object(s.hex2rgb)(this.tint,L),e=0;e<this.batches.length;e++){var n=this.batches[e],r=n._batchRGB,i=(t[0]*r[0]*255<<16)+(t[1]*r[1]*255<<8)+(0|t[2]*r[2]*255);n._tintRGB=(i>>16)+(65280&i)+((255&i)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,n=e.a,r=e.b,i=e.c,o=e.d,a=e.tx,s=e.ty,u=this._geometry.points,c=this.vertexData,l=0,h=0;h<u.length;h+=2){var f=u[h],p=u[h+1];c[l++]=n*f+i*p+a,c[l++]=o*p+r*f+s}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},e._TEMP_POINT=new a.g,e}(c.b),U={buildPoly:d,buildCircle:y,buildRectangle:m,buildRoundedRectangle:g,buildLine:T,ArcUtils:x,BezierUtils:S,QuadraticUtils:O,BatchPart:P,FILL_COMMANDS:R,BATCH_POOL:A,DRAW_CALL_POOL:I}},"./node_modules/@pixi/loaders/dist/esm/loaders.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return b})),n.d(e,"b",(function(){return g})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return E}));var r=n("./node_modules/@pixi/core/dist/esm/core.js"),i=function(){function t(t,e,n){void 0===e&&(e=!1),this._fn=t,this._once=e,this._thisArg=n,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},t}();
/*!
 * @pixi/loaders - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */function o(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var a=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(t){void 0===t&&(t=!1);var e=this._head;if(t)return!!e;for(var n=[];e;)n.push(e),e=e._next;return n},t.prototype.has=function(t){if(!(t instanceof i))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},t.prototype.dispatch=function(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];var r=this._head;if(!r)return!1;for(;r;)r._once&&this.detach(r),r._fn.apply(r._thisArg,e),r=r._next;return!0},t.prototype.add=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return o(this,new i(t,!1,e))},t.prototype.once=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return o(this,new i(t,!0,e))},t.prototype.detach=function(t){if(!(t instanceof i))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this},t.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},t}();function s(t,e){e=e||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[e.strictMode?"strict":"loose"].exec(t),i={},o=14;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,(function(t,e,r){e&&(i[n.q.name][e]=r)})),i}var u=!(!self.XDomainRequest||"withCredentials"in new XMLHttpRequest),c=null;function l(){}function h(t,e,n){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=n)}function f(t){return t.toString().replace("object ","")}var p=function(){function t(e,n,r){if(this._dequeue=l,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof e||"string"!=typeof n)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=e,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=l,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new a,this.onProgress=new a,this.onComplete=new a,this.onAfterMiddleware=new a}return t.setExtensionLoadType=function(e,n){h(t._loadTypeMap,e,n)},t.setExtensionXhrType=function(e,n){h(t._xhrTypeMap,e,n)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var n=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(n)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:u&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t.prototype._hasFlag=function(t){return 0!=(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==self.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==self.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(e)?e[n]:e));else{e=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(e)?e[0]:e))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new self.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},t.prototype._createSource=function(t,e,n){n||(n=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=n,r},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(f(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(f(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(f(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,n="",r=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(n=e.responseText),0===r&&(n.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2===(r/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(self.DOMParser){var i=new DOMParser;this.data=i.parseFromString(n,"text/xml")}else{var o=document.createElement("div");o.innerHTML=n,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||n;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(self.origin!==self.location.origin)return"anonymous";e=e||self.location,c||(c=document.createElement("a")),c.href=t;var n=s(c.href,{strictMode:!0}),r=!n.port&&""===e.port||n.port===e.port,i=n.protocol?n.protocol+":":"";return n.host===e.hostname&&r&&i===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(t){void 0===t&&(t=this.url);var e="";if(this.isDataUrl){var n=t.indexOf("/");e=t.substring(n+1,t.indexOf(";",n))}else{var r=t.indexOf("?"),i=t.indexOf("#"),o=Math.min(r>-1?r:t.length,i>-1?i:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}();function d(){}function y(t){return function(){for(var e=arguments,n=[],r=0;r<arguments.length;r++)n[r]=e[r];if(null===t)throw new Error("Callback was already called.");var i=t;t=null,i.apply(this,n)}}!function(t){!function(t){t[t.NONE=0]="NONE",t[t.DATA_URL=1]="DATA_URL",t[t.COMPLETE=2]="COMPLETE",t[t.LOADING=4]="LOADING"}(t.STATUS_FLAGS||(t.STATUS_FLAGS={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JSON=1]="JSON",t[t.XML=2]="XML",t[t.IMAGE=3]="IMAGE",t[t.AUDIO=4]="AUDIO",t[t.VIDEO=5]="VIDEO",t[t.TEXT=6]="TEXT"}(t.TYPE||(t.TYPE={})),function(t){t[t.XHR=1]="XHR",t[t.IMAGE=2]="IMAGE",t[t.AUDIO=3]="AUDIO",t[t.VIDEO=4]="VIDEO"}(t.LOAD_TYPE||(t.LOAD_TYPE={})),function(t){t.DEFAULT="text",t.BUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.TEXT="text"}(t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})),t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}(p||(p={}));var m=function(t,e){this.data=t,this.callback=e},v=function(){function t(t,e){var n=this;if(void 0===e&&(e=1),this.workers=0,this.saturated=d,this.unsaturated=d,this.empty=d,this.drain=d,this.error=d,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(t,e,r){if(r&&"function"!=typeof r)throw new Error("task callback must be a function");if(n.started=!0,null==t&&n.idle())setTimeout((function(){return n.drain()}),1);else{var i=new m(t,"function"==typeof r?r:d);e?n._tasks.unshift(i):n._tasks.push(i),setTimeout(n.process,1)}},this.process=function(){for(;!n.paused&&n.workers<n.concurrency&&n._tasks.length;){var t=n._tasks.shift();0===n._tasks.length&&n.empty(),n.workers+=1,n.workers===n.concurrency&&n.saturated(),n._worker(t.data,y(n._next(t)))}},this._worker=t,0===e)throw new Error("Concurrency must not be zero");this.concurrency=e,this.buffer=e/4}return t.prototype._next=function(t){var e=this;return function(){for(var n=arguments,r=[],i=0;i<arguments.length;i++)r[i]=n[i];e.workers-=1,t.callback.apply(t,r),null!=r[0]&&e.error(r[0],t.data),e.workers<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}},t.prototype.push=function(t,e){this._insert(t,!1,e)},t.prototype.kill=function(){this.workers=0,this.drain=d,this.started=!1,this._tasks=[]},t.prototype.unshift=function(t,e){this._insert(t,!0,e)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},t.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},t.eachSeries=function(t,e,n,r){var i=0,o=t.length;!function a(s){s||i===o?n&&n(s):r?setTimeout((function(){e(t[i++],a)}),1):e(t[i++],a)}()},t.queue=function(e,n){return new t(e,n)},t}(),_=/(#[\w-]+)?$/,g=function(){function t(e,n){var r=this;void 0===e&&(e=""),void 0===n&&(n=10),this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this.resources={},this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=v.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new a,this.onError=new a,this.onLoad=new a,this.onStart=new a,this.onComplete=new a;for(var i=0;i<t._plugins.length;++i){var o=t._plugins[i],s=o.pre,u=o.use;s&&this.pre(s),u&&this.use(u)}this._protected=!1}return t.prototype._add=function(t,e,n,r){if(this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new p(t,e,n),"function"==typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var i=n.parentResource,o=[],a=0;a<i.children.length;++a)i.children[a].isComplete||o.push(i.children[a]);var s=i.progressChunk*(o.length+1)/(o.length+2);i.children.push(this.resources[t]),i.progressChunk=s;for(a=0;a<o.length;++a)o[a].progressChunk=s;this.resources[t].progressChunk=s}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort("loader reset")}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,n=0;n<this._queue._tasks.length;++n)this._queue._tasks[n].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(t){var e,n=s(t,{strictMode:!0});if(e=n.protocol||!n.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=_.exec(e)[0];-1!==(e=e.substr(0,e.length-r.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=r}return e},t.prototype._loadResource=function(t,e){var n=this;t._dequeue=e,v.eachSeries(this._beforeMiddleware,(function(e,r){e.call(n,t,(function(){r(t.isComplete?{}:null)}))}),(function(){t.isComplete?n._onLoad(t):(t._onLoadBinding=t.onComplete.once(n._onLoad,n),t.load())}),!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),v.eachSeries(this._afterMiddleware,(function(n,r){n.call(e,t,r)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||((e=new t)._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return t._plugins.push(e),e.add&&e.add(),t},t._plugins=[],t}();g.prototype.add=function(t,e,n,r){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"==typeof t&&(n=t,r=e||n.callback||n.onComplete,e=n.url,t=n.name||n.key||n.url),"string"!=typeof e&&(r=n,n=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");return"function"==typeof n&&(r=n,n=null),this._add(t,e,n,r)};var b=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?g.shared:new g},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t}(),E=function(){function t(){}return t.add=function(){p.setExtensionLoadType("svg",p.LOAD_TYPE.XHR),p.setExtensionXhrType("svg",p.XHR_RESPONSE_TYPE.TEXT)},t.use=function(t,e){if(!t.data||t.type!==p.TYPE.IMAGE&&"svg"!==t.extension)e();else{var n=t.data,i=t.url,o=t.name,a=t.metadata;r.db.fromLoader(n,i,o,a).then((function(n){t.texture=n,e()})).catch(e)}},t}();var T=self.URL||self.webkitURL;g.registerPlugin({use:function(t,e){if(t.data){if(t.xhr&&t.xhrType===p.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var n=T.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=n,t.type=p.TYPE.IMAGE,void(t.data.onload=function(){T.revokeObjectURL(n),t.data.onload=null,e()})}}else{var r=t.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return t.data=new Image,t.data.src="data:"+r+";base64,"+function(t){for(var e="",n=0;n<t.length;){for(var r=[0,0,0],i=[0,0,0,0],o=0;o<r.length;++o)n<t.length?r[o]=255&t.charCodeAt(n++):r[o]=0;switch(i[0]=r[0]>>2,i[1]=(3&r[0])<<4|r[1]>>4,i[2]=(15&r[1])<<2|r[2]>>6,i[3]=63&r[2],n-(t.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(o=0;o<i.length;++o)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i[o])}return e}(t.xhr.responseText),t.type=p.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}}),g.registerPlugin(E)},"./node_modules/@pixi/math/dist/esm/math.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return p})),n.d(e,"f",(function(){return i})),n.d(e,"g",(function(){return f})),n.d(e,"h",(function(){return l})),n.d(e,"i",(function(){return o})),n.d(e,"j",(function(){return s})),n.d(e,"k",(function(){return h})),n.d(e,"l",(function(){return r})),n.d(e,"m",(function(){return w})),n.d(e,"n",(function(){return T}));
/*!
 * @pixi/math - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var r,i=2*Math.PI,o=180/Math.PI,a=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(r||(r={}));var s=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=Number(t),this.y=Number(e),this.width=Number(n),this.height=Number(i),this.type=r.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(n-e,0),this.y=r,this.height=Math.max(i-r,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var n=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=n-this.x,this.height=r-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=n-e,this.y=r,this.height=i-r,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),u=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.radius=n,this.type=r.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var n=this.radius*this.radius,r=this.x-t,i=this.y-e;return(r*=r)+(i*=i)<=n},t.prototype.getBounds=function(){return new s(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),c=function(){function t(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=e,this.width=n,this.height=i,this.type=r.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,r=(e-this.y)/this.height;return(n*=n)+(r*=r)<=1},t.prototype.getBounds=function(){return new s(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),l=function(){function t(){for(var t=arguments,e=[],n=0;n<arguments.length;n++)e[n]=t[n];var i=Array.isArray(e[0])?e[0]:e;if("number"!=typeof i[0]){for(var o=[],a=0,s=i.length;a<s;a++)o.push(i[a].x,i[a].y);i=o}this.points=i,this.type=r.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var n=!1,r=this.points.length/2,i=0,o=r-1;i<r;o=i++){var a=this.points[2*i],s=this.points[2*i+1],u=this.points[2*o],c=this.points[2*o+1];s>e!=c>e&&t<(e-s)/(c-s)*(u-a)+a&&(n=!n)}return n},t.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce((function(t,e){return t+", "+e}),"")+"]"},t}(),h=function(){function t(t,e,n,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===o&&(o=20),this.x=t,this.y=e,this.width=n,this.height=i,this.radius=o,this.type=r.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var n=t-(this.x+this.radius),r=e-(this.y+this.radius),i=this.radius*this.radius;if(n*n+r*r<=i)return!0;if((n=t-(this.x+this.width-this.radius))*n+r*r<=i)return!0;if(n*n+(r=e-(this.y+this.height-this.radius))*r<=i)return!0;if((n=t-(this.x+this.radius))*n+r*r<=i)return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},t}(),f=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),p=function(){function t(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this._x=n,this._y=r,this.cb=t,this.scope=e}return t.prototype.clone=function(e,n){return void 0===e&&(e=this.cb),void 0===n&&(n=this.scope),new t(e,n,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),d=function(){function t(t,e,n,r,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,n,r,i,o){return this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},t.prototype.apply=function(t,e){e=e||new f;var n=t.x,r=t.y;return e.x=this.a*n+this.c*r+this.tx,e.y=this.b*n+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new f;var n=1/(this.a*this.d+this.c*-this.b),r=t.x,i=t.y;return e.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this.a,i=this.c,o=this.tx;return this.a=r*e-this.b*n,this.b=r*n+this.b*e,this.c=i*e-this.d*n,this.d=i*n+this.d*e,this.tx=o*e-this.ty*n,this.ty=o*n+this.ty*e,this},t.prototype.append=function(t){var e=this.a,n=this.b,r=this.c,i=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*n+t.b*i,this.c=t.c*e+t.d*r,this.d=t.c*n+t.d*i,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*i+this.ty,this},t.prototype.setTransform=function(t,e,n,r,i,o,a,s,u){return this.a=Math.cos(a+u)*i,this.b=Math.sin(a+u)*i,this.c=-Math.sin(a-s)*o,this.d=Math.cos(a-s)*o,this.tx=t-(n*this.a+r*this.c),this.ty=e-(n*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,r=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,n=this.b,r=this.c,o=this.d,a=t.pivot,s=-Math.atan2(-r,o),u=Math.atan2(n,e),c=Math.abs(s+u);return c<1e-5||Math.abs(i-c)<1e-5?(t.rotation=u,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=u),t.scale.x=Math.sqrt(e*e+n*n),t.scale.y=Math.sqrt(r*r+o*o),t.position.x=this.tx+(a.x*e+a.y*r),t.position.y=this.ty+(a.x*n+a.y*o),t},t.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.tx,o=t*r-e*n;return this.a=r/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(t*this.ty-e*i)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),y=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],m=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],v=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],_=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],g=[],b=[],E=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];g.push(e);for(var n=0;n<16;n++)for(var r=E(y[t]*y[n]+v[t]*m[n]),i=E(m[t]*y[n]+_[t]*m[n]),o=E(y[t]*v[n]+v[t]*_[n]),a=E(m[t]*v[n]+_[t]*_[n]),s=0;s<16;s++)if(y[s]===r&&m[s]===i&&v[s]===o&&_[s]===a){e.push(s);break}}for(t=0;t<16;t++){var u=new d;u.set(y[t],m[t],v[t],_[t],0,0),b.push(u)}}();var T={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return y[t]},uY:function(t){return m[t]},vX:function(t){return v[t]},vY:function(t){return _[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return g[t][e]},sub:function(t,e){return g[t][T.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?T.S:T.N:2*Math.abs(e)<=Math.abs(t)?t>0?T.E:T.W:e>0?t>0?T.SE:T.SW:t>0?T.NE:T.NW},matrixAppendRotationInv:function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=b[T.inv(e)];i.tx=n,i.ty=r,t.append(i)}},w=function(){function t(){this.worldTransform=new d,this.localTransform=new d,this.position=new p(this.onChange,this,0,0),this.scale=new p(this.onChange,this,1,1),this.pivot=new p(this.onChange,this,0,0),this.skew=new p(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}()},"./node_modules/@pixi/mesh-extras/dist/esm/mesh-extras.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return h})),n.d(e,"f",(function(){return l}));var r=n("./node_modules/@pixi/mesh/dist/esm/mesh.js"),i=n("./node_modules/@pixi/constants/dist/esm/constants.js"),o=n("./node_modules/@pixi/core/dist/esm/core.js"),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function s(t,e){function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u=function(t){function e(e,n,r,i){void 0===e&&(e=100),void 0===n&&(n=100),void 0===r&&(r=10),void 0===i&&(i=10);var o=t.call(this)||this;return o.segWidth=r,o.segHeight=i,o.width=e,o.height=n,o.build(),o}return s(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],n=[],r=[],i=this.segWidth-1,o=this.segHeight-1,a=this.width/i,s=this.height/o,u=0;u<t;u++){var c=u%this.segWidth,l=u/this.segWidth|0;e.push(c*a,l*s),n.push(c/i,l/o)}var h=i*o;for(u=0;u<h;u++){var f=u%i,p=u/i|0,d=p*this.segWidth+f,y=p*this.segWidth+f+1,m=(p+1)*this.segWidth+f,v=(p+1)*this.segWidth+f+1;r.push(d,y,m,y,v,m)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(r.c),c=function(t){function e(e,n,r){void 0===e&&(e=200),void 0===r&&(r=0);var i=t.call(this,new Float32Array(4*n.length),new Float32Array(4*n.length),new Uint16Array(6*(n.length-1)))||this;return i.points=n,i._width=e,i.textureScale=r,i.build(),i}return s(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),n.data=new Float32Array(4*t.length),r.data=new Uint16Array(6*(t.length-1)));var i=n.data,o=r.data;i[0]=0,i[1]=0,i[2]=0,i[3]=1;for(var a=0,s=t[0],u=this._width*this.textureScale,c=t.length,l=0;l<c;l++){var h=4*l;if(this.textureScale>0){var f=s.x-t[l].x,p=s.y-t[l].y,d=Math.sqrt(f*f+p*p);s=t[l],a+=d/u}else a=l/(c-1);i[h]=a,i[h+1]=0,i[h+2]=a,i[h+3]=1}var y=0;for(l=0;l<c-1;l++){h=2*l;o[y++]=h,o[y++]=h+1,o[y++]=h+2,o[y++]=h+2,o[y++]=h+1,o[y++]=h+3}n.update(),r.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,n=t[0],r=0,i=0,o=this.buffers[0].data,a=t.length,s=0;s<a;s++){var u=t[s],c=4*s;i=-((e=s<t.length-1?t[s+1]:u).x-n.x),r=e.y-n.y;var l=Math.sqrt(r*r+i*i),h=this.textureScale>0?this.textureScale*this._width/2:this._width/2;r/=l,i/=l,r*=h,i*=h,o[c]=u.x+r,o[c+1]=u.y+i,o[c+2]=u.x-r,o[c+3]=u.y-i,n=u}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(r.c),l=function(t){function e(e,n,o){void 0===o&&(o=0);var a=this,s=new c(e.height,n,o),u=new r.d(e);return o>0&&(e.baseTexture.wrapMode=i.s.REPEAT),(a=t.call(this,s,u)||this).autoUpdate=!0,a}return s(e,t),e.prototype._render=function(e){var n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),t.prototype._render.call(this,e)},e}(r.a),h=function(t){function e(e,n,i){var a=this,s=new u(e.width,e.height,n,i),c=new r.d(o.db.WHITE);return(a=t.call(this,s,c)||this).texture=e,a.autoResize=!0,a}return s(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,e=this.shader.texture,n=e.width,r=e.height;!this.autoResize||t.width===n&&t.height===r||(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}(r.a),f=function(t){function e(e,n,i,a,s){void 0===e&&(e=o.db.EMPTY);var u=this,c=new r.c(n,i,a);c.getBuffer("aVertexPosition").static=!1;var l=new r.d(e);return(u=t.call(this,c,l,null,s)||this).autoUpdate=!0,u}return s(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},e}(r.a),p=function(t){function e(e,n,r,i,a){void 0===n&&(n=10),void 0===r&&(r=10),void 0===i&&(i=10),void 0===a&&(a=10);var s=t.call(this,o.db.WHITE,4,4)||this;return s._origWidth=e.orig.width,s._origHeight=e.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=n,s._rightWidth=i,s._topHeight=r,s._bottomHeight=a,s.texture=e,s}return s(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,n=this._topHeight+this._bottomHeight,r=this._height>n?1:this._height/n;return Math.min(e,r)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var n=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(h)},"./node_modules/@pixi/mesh/dist/esm/mesh.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return m})),n.d(e,"d",(function(){return y}));var r=n("./node_modules/@pixi/core/dist/esm/core.js"),i=n("./node_modules/@pixi/math/dist/esm/math.js"),o=n("./node_modules/@pixi/constants/dist/esm/constants.js"),a=n("./node_modules/@pixi/display/dist/esm/display.js"),s=n("./node_modules/@pixi/settings/dist/esm/settings.js"),u=n("./node_modules/@pixi/utils/dist/esm/utils.js"),c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function l(t,e){function n(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var h=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),f=new i.g,p=new i.h,d=function(t){function e(e,n,i,a){void 0===a&&(a=o.f.TRIANGLES);var u=t.call(this)||this;return u.geometry=e,u.shader=n,u.state=i||r.Z.for2d(),u.drawMode=a,u.start=0,u.size=0,u.uvs=null,u.indices=null,u.vertexData=new Float32Array(1),u.vertexDirty=-1,u._transformID=-1,u._roundPixels=s.b.ROUND_PIXELS,u.batchUvs=null,u}return l(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===o.f.TRIANGLES&&n.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;var r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry.buffers[0],e=t.data,n=t._updateID;if(n!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var r=this.transform.worldTransform,i=r.a,o=r.b,a=r.c,u=r.d,c=r.tx,l=r.ty,h=this.vertexData,f=0;f<h.length/2;f++){var p=e[2*f],d=e[2*f+1];h[2*f]=i*p+a*d+c,h[2*f+1]=o*p+u*d+l}if(this._roundPixels){var y=s.b.RESOLUTION;for(f=0;f<h.length;++f)h[f]=Math.round((h[f]*y|0)/y)}this.vertexDirty=n}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new h(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,f);for(var e=this.geometry.getBuffer("aVertexPosition").data,n=p.points,r=this.geometry.getIndex().data,i=r.length,o=4===this.drawMode?3:1,a=0;a+2<i;a+=o){var s=2*r[a],u=2*r[a+1],c=2*r[a+2];if(n[0]=e[s],n[1]=e[s+1],n[2]=e[u],n[3]=e[u+1],n[4]=e[c],n[5]=e[c+1],p.contains(f.x,f.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(a.b),y=function(t){function e(e,n){var o=this,a={uSampler:e,alpha:1,uTextureMatrix:i.d.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n)).uniforms&&Object.assign(a,n.uniforms),(o=t.call(this,n.program||r.L.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),a)||this)._colorDirty=!1,o.uvMatrix=new r.fb(e),o.batchable=void 0===n.program,o.pluginName=n.pluginName,o.tint=n.tint,o.alpha=n.alpha,o}return l(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Object(u.premultiplyTintToRgba)(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(r.W),m=function(t){function e(e,n,i){var a=t.call(this)||this,s=new r.p(e),u=new r.p(n,!0),c=new r.p(i,!0,!0);return a.addAttribute("aVertexPosition",s,2,!1,o.r.FLOAT).addAttribute("aTextureCoord",u,2,!1,o.r.FLOAT).addIndex(c),a._updateId=-1,a}return l(e,t),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(r.C)},"./node_modules/@pixi/particle-container/dist/esm/particle-container.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return f}));var r=n("./node_modules/@pixi/constants/dist/esm/constants.js"),i=n("./node_modules/@pixi/display/dist/esm/display.js"),o=n("./node_modules/@pixi/utils/dist/esm/utils.js"),a=n("./node_modules/@pixi/core/dist/esm/core.js"),s=n("./node_modules/@pixi/math/dist/esm/math.js"),u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function c(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var l=function(t){function e(e,n,i,o){void 0===e&&(e=1500),void 0===i&&(i=16384),void 0===o&&(o=!1);var a=t.call(this)||this;return i>16384&&(i=16384),a._properties=[!1,!0,!1,!1,!1],a._maxSize=e,a._batchSize=i,a._buffers=null,a._bufferUpdateIDs=[],a._updateID=0,a.interactiveChildren=!1,a.blendMode=r.b.NORMAL,a.autoResize=o,a.roundPixels=!0,a.baseTexture=null,a.setProperties(n),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return c(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,Object(o.hex2rgb)(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(i.b),h=function(){function t(t,e,n){this.geometry=new a.C,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;++i){var o=t[i];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||r.r.FLOAT,offset:o.offset},e[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new a.p(Object(o.createIndicesForQuads)(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){(c=this.dynamicProperties[n]).offset=e,e+=c.size,this.dynamicStride+=c.size}var i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new a.p(this.dynamicData,!1,!1);var s=0;this.staticStride=0;for(n=0;n<this.staticProperties.length;++n){(c=this.staticProperties[n]).offset=s,s+=c.size,this.staticStride+=c.size}var u=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(u),this.staticDataUint32=new Uint32Array(u),this.staticBuffer=new a.p(this.staticData,!0,!1);for(n=0;n<this.dynamicProperties.length;++n){var c=this.dynamicProperties[n];t.addAttribute(c.attributeName,this.dynamicBuffer,0,c.type===r.r.UNSIGNED_BYTE,c.type,4*this.dynamicStride,4*c.offset)}for(n=0;n<this.staticProperties.length;++n){c=this.staticProperties[n];t.addAttribute(c.attributeName,this.staticBuffer,0,c.type===r.r.UNSIGNED_BYTE,c.type,4*this.staticStride,4*c.offset)}},t.prototype.uploadDynamic=function(t,e,n){for(var i=0;i<this.dynamicProperties.length;i++){var o=this.dynamicProperties[i];o.uploadFunction(t,e,n,o.type===r.r.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,n){for(var i=0;i<this.staticProperties.length;i++){var o=this.staticProperties[i];o.uploadFunction(t,e,n,o.type===r.r.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),f=function(t){function e(e){var n=t.call(this,e)||this;return n.shader=null,n.properties=null,n.tempMatrix=new s.d,n.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:n.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:n.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:n.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:n.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:r.r.UNSIGNED_BYTE,uploadFunction:n.uploadTint,offset:0}],n.shader=a.W.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),n.state=a.Z.for2d(),n}return c(e,t),e.prototype.render=function(t){var e=t.children,n=t._maxSize,r=t._batchSize,i=this.renderer,a=e.length;if(0!==a){a>n&&!t.autoResize&&(a=n);var s=t._buffers;s||(s=t._buffers=this.generateBuffers(t));var u=e[0]._texture.baseTexture;this.state.blendMode=Object(o.correctBlendMode)(t.blendMode,u.alphaMode),i.state.set(this.state);var c=i.gl,l=t.worldTransform.copyTo(this.tempMatrix);l.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=l.toArray(!0),this.shader.uniforms.uColor=Object(o.premultiplyRgba)(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,u.alphaMode),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);for(var h=!1,f=0,p=0;f<a;f+=r,p+=1){var d=a-f;d>r&&(d=r),p>=s.length&&s.push(this._generateOneMoreBuffer(t));var y=s[p];y.uploadDynamic(e,f,d);var m=t._bufferUpdateIDs[p]||0;(h=h||y._updateID<m)&&(y._updateID=t._updateID,y.uploadStatic(e,f,d)),i.geometry.bind(y.geometry),c.drawElements(c.TRIANGLES,6*d,c.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],n=t._maxSize,r=t._batchSize,i=t._properties,o=0;o<n;o+=r)e.push(new h(this.properties,i,r));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,n=t._properties;return new h(this.properties,n,e)},e.prototype.uploadVertices=function(t,e,n,r,i,o){for(var a=0,s=0,u=0,c=0,l=0;l<n;++l){var h=t[e+l],f=h._texture,p=h.scale.x,d=h.scale.y,y=f.trim,m=f.orig;y?(a=(s=y.x-h.anchor.x*m.width)+y.width,u=(c=y.y-h.anchor.y*m.height)+y.height):(a=m.width*(1-h.anchor.x),s=m.width*-h.anchor.x,u=m.height*(1-h.anchor.y),c=m.height*-h.anchor.y),r[o]=s*p,r[o+1]=c*d,r[o+i]=a*p,r[o+i+1]=c*d,r[o+2*i]=a*p,r[o+2*i+1]=u*d,r[o+3*i]=s*p,r[o+3*i+1]=u*d,o+=4*i}},e.prototype.uploadPosition=function(t,e,n,r,i,o){for(var a=0;a<n;a++){var s=t[e+a].position;r[o]=s.x,r[o+1]=s.y,r[o+i]=s.x,r[o+i+1]=s.y,r[o+2*i]=s.x,r[o+2*i+1]=s.y,r[o+3*i]=s.x,r[o+3*i+1]=s.y,o+=4*i}},e.prototype.uploadRotation=function(t,e,n,r,i,o){for(var a=0;a<n;a++){var s=t[e+a].rotation;r[o]=s,r[o+i]=s,r[o+2*i]=s,r[o+3*i]=s,o+=4*i}},e.prototype.uploadUvs=function(t,e,n,r,i,o){for(var a=0;a<n;++a){var s=t[e+a]._texture._uvs;s?(r[o]=s.x0,r[o+1]=s.y0,r[o+i]=s.x1,r[o+i+1]=s.y1,r[o+2*i]=s.x2,r[o+2*i+1]=s.y2,r[o+3*i]=s.x3,r[o+3*i+1]=s.y3,o+=4*i):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+2*i]=0,r[o+2*i+1]=0,r[o+3*i]=0,r[o+3*i+1]=0,o+=4*i)}},e.prototype.uploadTint=function(t,e,n,r,i,a){for(var s=0;s<n;++s){var u=t[e+s],c=u._texture.baseTexture.alphaMode>0,l=u.alpha,h=l<1&&c?Object(o.premultiplyTint)(u._tintRGB,l):u._tintRGB+(255*l<<24);r[a]=h,r[a+i]=h,r[a+2*i]=h,r[a+3*i]=h,a+=4*i}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(a.K)},"./node_modules/@pixi/prepare/dist/esm/prepare.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return _})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return T})),n.d(e,"d",(function(){return w}));var r=n("./node_modules/@pixi/settings/dist/esm/settings.js"),i=n("./node_modules/@pixi/core/dist/esm/core.js"),o=n("./node_modules/@pixi/graphics/dist/esm/graphics.js"),a=n("./node_modules/@pixi/ticker/dist/esm/ticker.js"),s=n("./node_modules/@pixi/display/dist/esm/display.js"),u=n("./node_modules/@pixi/text/dist/esm/text.js");
/*!
 * @pixi/prepare - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
r.b.UPLOADS_PER_FRAME=4;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var l=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function h(t,e){var n=!1;if(t&&t._textures&&t._textures.length)for(var r=0;r<t._textures.length;r++)if(t._textures[r]instanceof i.db){var o=t._textures[r].baseTexture;-1===e.indexOf(o)&&(e.push(o),n=!0)}return n}function f(t,e){if(t.baseTexture instanceof i.h){var n=t.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function p(t,e){if(t._texture&&t._texture instanceof i.db){var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function d(t,e){return e instanceof u.b&&(e.updateText(!0),!0)}function y(t,e){if(e instanceof u.d){var n=e.toFontString();return u.c.measureFont(n),!0}return!1}function m(t,e){if(t instanceof u.b){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function v(t,e){return t instanceof u.d&&(-1===e.indexOf(t)&&e.push(t),!0)}var _=function(){function t(t){var e=this;this.limiter=new l(r.b.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(m),this.registerFindHook(v),this.registerFindHook(h),this.registerFindHook(f),this.registerFindHook(p),this.registerUploadHook(d),this.registerUploadHook(y)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,a.a.system.addOnce(this.tick,this,a.c.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)a.a.system.addOnce(this.tick,this,a.c.UTILITY);else{this.ticking=!1;var i=this.completes.slice(0);this.completes.length=0;for(n=0,r=i.length;n<r;n++)i[n]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,n=this.addHooks.length;e<n&&!this.addHooks[e](t,this.queue);e++);if(t instanceof s.b)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},t.prototype.destroy=function(){this.ticking&&a.a.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function g(t,e){return e instanceof i.h&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function b(t,e){if(!(e instanceof o.c))return!1;var n=e.geometry;e.finishPoly(),n.updateBatches();for(var r=n.batches,i=0;i<r.length;i++){var a=r[i].style.texture;a&&g(t,a.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function E(t,e){return t instanceof o.c&&(e.push(t),!0)}var T=function(t){function e(e){var n=t.call(this,e)||this;return n.uploadHookHelper=n.renderer,n.registerFindHook(E),n.registerUploadHook(g),n.registerUploadHook(b),n}return function(t,e){function n(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(_),w=function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}()},"./node_modules/@pixi/runner/dist/esm/runner.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));
/*!
 * @pixi/runner - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var r=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,n,r,i,o,a,s){if(arguments.length>8)throw new Error("max arguments reached");var u=this,c=u.name,l=u.items;this._aliasCount++;for(var h=0,f=l.length;h<f;h++)l[h][c](t,e,n,r,i,o,a,s);return l===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(r.prototype,{dispatch:{value:r.prototype.emit},run:{value:r.prototype.emit}})},"./node_modules/@pixi/settings/dist/esm/settings.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return B})),n.d(e,"b",(function(){return F}));var r=/iPhone/i,i=/iPod/i,o=/iPad/i,a=/\biOS-universal(?:.+)Mac\b/i,s=/\bAndroid(?:.+)Mobile\b/i,u=/Android/i,c=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,l=/Silk/i,h=/Windows Phone/i,f=/\bWindows(?:.+)ARM\b/i,p=/BlackBerry/i,d=/BB10/i,y=/Opera Mini/i,m=/\b(CriOS|Chrome)(?:.+)Mobile/i,v=/Mobile(?:.+)Firefox\b/i,_=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};
/*!
 * @pixi/settings - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var g,b,E,T,w,x,S,O,P,R,A,I,C,k,N,M,j,D,L,B=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=e.userAgent,g=n.split("[FBAN");void 0!==g[1]&&(n=g[0]),void 0!==(g=n.split("Twitter"))[1]&&(n=g[0]);var b=function(t){return function(e){return e.test(t)}}(n),E={apple:{phone:b(r)&&!b(h),ipod:b(i),tablet:!b(r)&&(b(o)||_(e))&&!b(h),universal:b(a),device:(b(r)||b(i)||b(o)||b(a)||_(e))&&!b(h)},amazon:{phone:b(c),tablet:!b(c)&&b(l),device:b(c)||b(l)},android:{phone:!b(h)&&b(c)||!b(h)&&b(s),tablet:!b(h)&&!b(c)&&!b(s)&&(b(l)||b(u)),device:!b(h)&&(b(c)||b(l)||b(s)||b(u))||b(/\bokhttp\b/i)},windows:{phone:b(h),tablet:b(f),device:b(h)||b(f)},other:{blackberry:b(p),blackberry10:b(d),opera:b(y),firefox:b(v),chrome:b(m),device:b(p)||b(d)||b(y)||b(v)||b(m)},any:!1,phone:!1,tablet:!1};return E.any=E.apple.device||E.android.device||E.windows.device||E.other.device,E.phone=E.apple.phone||E.android.phone||E.windows.phone,E.tablet=E.apple.tablet||E.android.tablet||E.windows.tablet,E}(self.navigator);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(g||(g={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(b||(b={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(E||(E={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(T||(T={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(w||(w={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(x||(x={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(S||(S={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(O||(O={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(P||(P={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(R||(R={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(A||(A={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(I||(I={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(C||(C={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(k||(k={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(N||(N={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(M||(M={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(j||(j={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(D||(D={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(L||(L={}));var F={MIPMAP_TEXTURES:I.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:D.NONE,SPRITE_MAX_TEXTURES:function(t){var e=!0;if(B.tablet||B.phone){var n;if(B.apple.device)if(n=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(n[1],10)<11&&(e=!1);if(B.android.device)if(n=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(n[1],10)<7&&(e=!1)}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:N.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:A.CLAMP,SCALE_MODE:R.LINEAR,PRECISION_VERTEX:M.HIGH,PRECISION_FRAGMENT:B.apple.device?M.HIGH:M.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!B.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}},"./node_modules/@pixi/sprite-tiling/dist/esm/sprite-tiling.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return d}));var r=n("./node_modules/@pixi/core/dist/esm/core.js"),i=n("./node_modules/@pixi/math/dist/esm/math.js"),o=n("./node_modules/@pixi/sprite/dist/esm/sprite.js"),a=n("./node_modules/@pixi/constants/dist/esm/constants.js"),s=n("./node_modules/@pixi/utils/dist/esm/utils.js"),u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function c(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var l=new i.g,h=function(t){function e(e,n,o){void 0===n&&(n=100),void 0===o&&(o=100);var a=t.call(this,e)||this;return a.tileTransform=new i.m,a._width=n,a._height=o,a.uvMatrix=a.texture.uvMatrix||new r.fb(e),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return c(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,n,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new i.j),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,l);var e=this._width,n=this._height,r=-e*this.anchor._x;if(l.x>=r&&l.x<r+e){var i=-n*this.anchor._y;if(l.y>=i&&l.y<i+n)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,n){return new e(t instanceof r.db?t:r.db.from(t,n),n.width,n.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(o.a),f="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",p=new i.d,d=function(t){function e(e){var n=t.call(this,e)||this;return e.runners.contextChange.add(n),n.quad=new r.O,n.state=r.Z.for2d(),n}return c(e,t),e.prototype.contextChange=function(){var t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=r.W.from(f,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",e),this.shader=t.context.webGLVersion>1?r.W.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",e):r.W.from(f,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",e)},e.prototype.render=function(t){var e=this.renderer,n=this.quad,r=n.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y);var i=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;(r=n.uvs)[0]=r[6]=-i,r[1]=r[3]=-o,r[2]=r[4]=1-i,r[5]=r[7]=1-o,n.invalidate();var u=t._texture,c=u.baseTexture,l=t.tileTransform.localTransform,h=t.uvMatrix,f=c.isPowerOfTwo&&u.frame.width===c.width&&u.frame.height===c.height;f&&(c._glTextures[e.CONTEXT_UID]?f=c.wrapMode!==a.s.CLAMP:c.wrapMode===a.s.CLAMP&&(c.wrapMode=a.s.REPEAT));var d=f?this.simpleShader:this.shader,y=u.width,m=u.height,v=t._width,_=t._height;p.set(l.a*y/v,l.b*y/_,l.c*m/v,l.d*m/_,l.tx/v,l.ty/_),p.invert(),f?p.prepend(h.mapCoord):(d.uniforms.uMapCoord=h.mapCoord.toArray(!0),d.uniforms.uClampFrame=h.uClampFrame,d.uniforms.uClampOffset=h.uClampOffset),d.uniforms.uTransform=p.toArray(!0),d.uniforms.uColor=Object(s.premultiplyTintToRgba)(t.tint,t.worldAlpha,d.uniforms.uColor,c.alphaMode),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=u,e.shader.bind(d),e.geometry.bind(n),this.state.blendMode=Object(s.correctBlendMode)(t.blendMode,c.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(r.K)},"./node_modules/@pixi/sprite/dist/esm/sprite.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("./node_modules/@pixi/constants/dist/esm/constants.js"),i=n("./node_modules/@pixi/core/dist/esm/core.js"),o=n("./node_modules/@pixi/display/dist/esm/display.js"),a=n("./node_modules/@pixi/math/dist/esm/math.js"),s=n("./node_modules/@pixi/settings/dist/esm/settings.js"),u=n("./node_modules/@pixi/utils/dist/esm/utils.js"),c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var l=new a.g,h=new Uint16Array([0,1,2,0,2,3]),f=function(t){function e(e){var n=t.call(this)||this;return n._anchor=new a.e(n._onAnchorUpdate,n,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=r.b.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=e||i.db.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=h,n.pluginName="batch",n.isSprite=!0,n._roundPixels=s.b.ROUND_PIXELS,n}return function(t,e){function n(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Object(u.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Object(u.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,n=e.a,r=e.b,i=e.c,o=e.d,a=e.tx,u=e.ty,c=this.vertexData,l=t.trim,h=t.orig,f=this._anchor,p=0,d=0,y=0,m=0;if(l?(p=(d=l.x-f._x*h.width)+l.width,y=(m=l.y-f._y*h.height)+l.height):(p=(d=-f._x*h.width)+h.width,y=(m=-f._y*h.height)+h.height),c[0]=n*d+i*m+a,c[1]=o*m+r*d+u,c[2]=n*p+i*m+a,c[3]=o*m+r*p+u,c[4]=n*p+i*y+a,c[5]=o*y+r*p+u,c[6]=n*d+i*y+a,c[7]=o*y+r*d+u,this._roundPixels)for(var v=s.b.RESOLUTION,_=0;_<c.length;++_)c[_]=Math.round((c[_]*v|0)/v)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,n=t.orig,r=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,c=i.tx,l=i.ty,h=-r._x*n.width,f=h+n.width,p=-r._y*n.height,d=p+n.height;e[0]=o*h+s*p+c,e[1]=u*p+a*h+l,e[2]=o*f+s*p+c,e[3]=u*p+a*f+l,e[4]=o*f+s*d+c,e[5]=u*d+a*f+l,e[6]=o*h+s*d+c,e[7]=u*d+a*h+l},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new a.j),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,l);var e=this._texture.orig.width,n=this._texture.orig.height,r=-e*this.anchor.x,i=0;return l.x>=r&&l.x<r+e&&(i=-n*this.anchor.y,l.y>=i&&l.y<i+n)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var n="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null},e.from=function(t,n){return new e(t instanceof i.db?t:i.db.from(t,n))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=Object(u.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=Object(u.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||i.db.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(o.b)},"./node_modules/@pixi/spritesheet/dist/esm/spritesheet.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u}));var r=n("./node_modules/@pixi/math/dist/esm/math.js"),i=n("./node_modules/@pixi/core/dist/esm/core.js"),o=n("./node_modules/@pixi/utils/dist/esm/utils.js"),a=n("./node_modules/@pixi/loaders/dist/esm/loaders.js"),s=function(){function t(t,e,n){void 0===n&&(n=null),this._texture=t instanceof i.db?t:null,this.baseTexture=t instanceof i.h?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var r=this.baseTexture.resource;this.resolution=this._updateResolution(n||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,n=Object(o.getResolutionOfUrl)(t,null);return null===n&&(n=void 0!==e?parseFloat(e):1),1!==n&&this.baseTexture.setResolution(n),n},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var n=e,o=t.BATCH_SIZE;n-e<o&&n<this._frameKeys.length;){var a=this._frameKeys[n],s=this._frames[a],u=s.frame;if(u){var c=null,l=null,h=!1!==s.trimmed&&s.sourceSize?s.sourceSize:s.frame,f=new r.j(0,0,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution);c=s.rotated?new r.j(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.h)/this.resolution,Math.floor(u.w)/this.resolution):new r.j(Math.floor(u.x)/this.resolution,Math.floor(u.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution),!1!==s.trimmed&&s.spriteSourceSize&&(l=new r.j(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution)),this.textures[a]=new i.db(this.baseTexture,c,f,l,s.rotated?2:0,s.anchor),i.db.addToCache(this.textures[a],a)}n++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var n=0;n<t[e].length;n++){var r=t[e][n];this.animations[e].push(this.textures[r])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(t){var e;for(var n in void 0===t&&(t=!1),this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},t.BATCH_SIZE=1e3,t}(),u=function(){function t(){}return t.use=function(e,n){var r,i,u=this,c=e.name+"_image";if(e.data&&e.type===a.c.TYPE.JSON&&e.data.frames&&!u.resources[c]){var l=null===(i=null===(r=e.data)||void 0===r?void 0:r.meta)||void 0===i?void 0:i.related_multi_packs;if(Array.isArray(l))for(var h=function(t){if("string"!=typeof t)return"continue";var n=t.replace(".json",""),r=o.url.resolve(e.url.replace(u.baseUrl,""),t);if(u.resources[n]||Object.values(u.resources).some((function(t){return o.url.format(o.url.parse(t.url))===r})))return"continue";var i={crossOrigin:e.crossOrigin,loadType:a.c.LOAD_TYPE.XHR,xhrType:a.c.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};u.add(n,r,i)},f=0,p=l;f<p.length;f++){h(p[f])}var d={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},y=t.getResourcePath(e,u.baseUrl);u.add(c,y,d,(function(t){if(t.error)n(t.error);else{var r=new s(t.texture,e.data,e.url);r.parse((function(){e.spritesheet=r,e.textures=r.textures,n()}))}}))}else n()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:o.url.resolve(t.url.replace(e,""),t.data.meta.image)},t}()},"./node_modules/@pixi/text-bitmap/dist/esm/text-bitmap.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return T})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return P})),n.d(e,"d",(function(){return O}));var r=n("./node_modules/@pixi/math/dist/esm/math.js"),i=n("./node_modules/@pixi/settings/dist/esm/settings.js"),o=n("./node_modules/@pixi/mesh/dist/esm/mesh.js"),a=n("./node_modules/@pixi/utils/dist/esm/utils.js"),s=n("./node_modules/@pixi/core/dist/esm/core.js"),u=n("./node_modules/@pixi/text/dist/esm/text.js"),c=n("./node_modules/@pixi/constants/dist/esm/constants.js"),l=n("./node_modules/@pixi/display/dist/esm/display.js"),h=n("./node_modules/@pixi/loaders/dist/esm/loaders.js"),f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var p=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},d=function(){function t(){}return t.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var r in e){var i=e[r].match(/^[a-z]+/gm)[0],o=e[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var s in o){var u=o[s].split("="),c=u[0],l=u[1].replace(/"/gm,""),h=parseFloat(l),f=isNaN(h)?l:h;a[c]=f}n[i].push(a)}var d=new p;return n.info.forEach((function(t){return d.info.push({face:t.face,size:parseInt(t.size,10)})})),n.common.forEach((function(t){return d.common.push({lineHeight:parseInt(t.lineHeight,10)})})),n.page.forEach((function(t){return d.page.push({id:parseInt(t.id,10),file:t.file})})),n.char.forEach((function(t){return d.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),n.kerning.forEach((function(t){return d.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),n.distanceField.forEach((function(t){return d.distanceField.push({distanceRange:parseInt(t.distanceRange,10),fieldType:t.fieldType})})),d},t}(),y=function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new p,n=t.getElementsByTagName("info"),r=t.getElementsByTagName("common"),i=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),s=t.getElementsByTagName("distanceField"),u=0;u<n.length;u++)e.info.push({face:n[u].getAttribute("face"),size:parseInt(n[u].getAttribute("size"),10)});for(u=0;u<r.length;u++)e.common.push({lineHeight:parseInt(r[u].getAttribute("lineHeight"),10)});for(u=0;u<i.length;u++)e.page.push({id:parseInt(i[u].getAttribute("id"),10)||0,file:i[u].getAttribute("file")});for(u=0;u<o.length;u++){var c=o[u];e.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(u=0;u<a.length;u++)e.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(u=0;u<s.length;u++)e.distanceField.push({fieldType:s[u].getAttribute("fieldType"),distanceRange:parseInt(s[u].getAttribute("distanceRange"),10)});return e},t}(),m=function(){function t(){}return t.test=function(t){if("string"==typeof t&&t.indexOf("<font>")>-1){var e=(new self.DOMParser).parseFromString(t,"text/xml");return y.test(e)}return!1},t.parse=function(t){var e=(new self.DOMParser).parseFromString(t,"text/xml");return y.parse(e)},t}(),v=[d,y,m];function _(t){for(var e=0;e<v.length;e++)if(v[e].test(t))return v[e];return null}function g(t,e,n,r,i,o,s){var c=n.text,l=n.fontProperties;e.translate(r,i),e.scale(o,o);var h=s.strokeThickness/2,f=-s.strokeThickness/2;e.font=s.toFontString(),e.lineWidth=s.strokeThickness,e.textBaseline=s.textBaseline,e.lineJoin=s.lineJoin,e.miterLimit=s.miterLimit,e.fillStyle=function(t,e,n,r,i,o){var a,s=n.fill;if(!Array.isArray(s))return s;if(1===s.length)return s[0];var c=n.dropShadow?n.dropShadowDistance:0,l=n.padding||0,h=t.width/r-c-2*l,f=t.height/r-c-2*l,p=s.slice(),d=n.fillGradientStops.slice();if(!d.length)for(var y=p.length+1,m=1;m<y;++m)d.push(m/y);if(p.unshift(s[0]),d.unshift(0),p.push(s[s.length-1]),d.push(1),n.fillGradientType===u.a.LINEAR_VERTICAL){a=e.createLinearGradient(h/2,l,h/2,f+l);var v=0,_=(o.fontProperties.fontSize+n.strokeThickness)/f;for(m=0;m<i.length;m++)for(var g=o.lineHeight*m,b=0;b<p.length;b++){var E=g/f+("number"==typeof d[b]?d[b]:b/p.length)*_,T=Math.max(v,E);T=Math.min(T,1),a.addColorStop(T,p[b]),v=T}}else{a=e.createLinearGradient(l,f/2,h+l,f/2);var w=p.length+1,x=1;for(m=0;m<p.length;m++){var S=void 0;S="number"==typeof d[m]?d[m]:x/w,a.addColorStop(S,p[m]),x++}}return a}(t,e,s,o,[c],n),e.strokeStyle=s.stroke;var p=s.dropShadowColor,d=Object(a.hex2rgb)("number"==typeof p?p:Object(a.string2hex)(p));s.dropShadow?(e.shadowColor="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+s.dropShadowAlpha+")",e.shadowBlur=s.dropShadowBlur,e.shadowOffsetX=Math.cos(s.dropShadowAngle)*s.dropShadowDistance,e.shadowOffsetY=Math.sin(s.dropShadowAngle)*s.dropShadowDistance):(e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),s.stroke&&s.strokeThickness&&e.strokeText(c,h,f+n.lineHeight-l.descent),s.fill&&e.fillText(c,h,f+n.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function b(t){return Array.from?Array.from(t):t.split("")}function E(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var T=function(){function t(t,e,n){var i,o,u=t.info[0],l=t.common[0],h=t.page[0],f=t.distanceField[0],p=Object(a.getResolutionOfUrl)(h.file),d={};this._ownsTextures=n,this.font=u.face,this.size=u.size,this.lineHeight=l.lineHeight/p,this.chars={},this.pageTextures=d;for(var y=0;y<t.page.length;y++){var m=t.page[y],v=m.id,_=m.file;d[v]=e instanceof Array?e[y]:e[_],(null==f?void 0:f.fieldType)&&"none"!==f.fieldType&&(d[v].baseTexture.alphaMode=c.a.NO_PREMULTIPLIED_ALPHA)}for(y=0;y<t.char.length;y++){var g=t.char[y],b=(v=g.id,g.page),E=t.char[y],T=E.x,w=E.y,x=E.width,S=E.height,O=E.xoffset,P=E.yoffset,R=E.xadvance;T/=p,w/=p,x/=p,S/=p,O/=p,P/=p,R/=p;var A=new r.j(T+d[b].frame.x/p,w+d[b].frame.y/p,x,S);this.chars[v]={xOffset:O,yOffset:P,xAdvance:R,kerning:{},texture:new s.db(d[b].baseTexture,A),page:b}}for(y=0;y<t.kerning.length;y++){var I=t.kerning[y],C=I.first,k=I.second,N=I.amount;C/=p,k/=p,N/=p,this.chars[k]&&(this.chars[k].kerning[C]=N)}this.distanceFieldRange=null==f?void 0:f.distanceRange,this.distanceFieldType=null!==(o=null===(i=null==f?void 0:f.fieldType)||void 0===i?void 0:i.toLowerCase())&&void 0!==o?o:"none"}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,n,r){var i;if(e instanceof p)i=e;else{var o=_(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}n instanceof s.db&&(n=[n]);var a=new t(i,n,r);return t.available[a.font]=a,a},t.uninstall=function(e){var n=t.available[e];if(!n)throw new Error("No font found named '"+e+"'");n.destroy(),delete t.available[e]},t.from=function(e,n,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},t.defaultOptions,r),o=i.chars,a=i.padding,c=i.resolution,l=i.textureWidth,h=i.textureHeight,f=function(t){"string"==typeof t&&(t=[t]);for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(Array.isArray(i)){if(2!==i.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var o=i[0].charCodeAt(0),a=i[1].charCodeAt(0);if(a<o)throw new Error("[BitmapFont]: Invalid character range.");for(var s=o,u=a;s<=u;s++)e.push(String.fromCharCode(s))}else e.push.apply(e,b(i))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(o),d=n instanceof u.d?n:new u.d(n),y=l,m=new p;m.info[0]={face:d.fontFamily,size:d.fontSize},m.common[0]={lineHeight:d.fontSize};for(var v,_,T,w=0,x=0,S=0,O=[],P=0;P<f.length;P++){v||((v=document.createElement("canvas")).width=l,v.height=h,_=v.getContext("2d"),T=new s.h(v,{resolution:c}),O.push(new s.db(T)),m.page.push({id:O.length-1,file:""}));var R=u.c.measureText(f[P],d,!1,v),A=R.width,I=Math.ceil(R.height),C=Math.ceil(("italic"===d.fontStyle?2:1)*A);if(x>=h-I*c){if(0===x)throw new Error("[BitmapFont] textureHeight "+h+"px is too small for "+d.fontSize+"px fonts");--P,v=null,_=null,T=null,x=0,w=0,S=0}else if(S=Math.max(I+R.fontProperties.descent,S),C*c+w>=y)--P,x+=S*c,x=Math.ceil(x),w=0,S=0;else{g(v,_,R,w,x,c,d);var k=E(R.text);m.char.push({id:k,page:O.length-1,x:w/c,y:x/c,width:C,height:I,xoffset:0,yoffset:0,xadvance:Math.ceil(A-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0))}),w+=(C+2*a)*c,w=Math.ceil(w)}}P=0;for(var N=f.length;P<N;P++)for(var M=f[P],j=0;j<N;j++){var D=f[j],L=_.measureText(M).width,B=_.measureText(D).width,F=_.measureText(M+D).width-(L+B);F&&m.kerning.push({first:E(M),second:E(D),amount:F})}var U=new t(m,O,!0);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=U,U},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),w=[],x=[],S=[],O=function(t){function e(n,o){void 0===o&&(o={});var a=t.call(this)||this;a._tint=16777215;var s=Object.assign({},e.styleDefaults,o),u=s.align,c=s.tint,l=s.maxWidth,h=s.letterSpacing,f=s.fontName,p=s.fontSize;if(!T.available[f])throw new Error('Missing BitmapFont "'+f+'"');return a._activePagesMeshData=[],a._textWidth=0,a._textHeight=0,a._align=u,a._tint=c,a._fontName=f,a._fontSize=p||T.available[f].size,a._text=n,a._maxWidth=l,a._maxLineHeight=0,a._letterSpacing=h,a._anchor=new r.e((function(){a.dirty=!0}),a,0,0),a._roundPixels=i.b.ROUND_PIXELS,a.dirty=!0,a._textureCache={},a}return function(t,e){function n(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.updateText=function(){for(var t,e=T.available[this._fontName],n=this._fontSize/e.size,i=new r.g,u=[],l=[],h=[],f=b(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),p=this._maxWidth*e.size/this._fontSize,d="none"===e.distanceFieldType?w:x,y=null,m=0,v=0,_=0,g=-1,O=0,P=0,R=0,A=0,I=0;I<f.length;I++){var C=E($=f[I]);if(/(?:\s)/.test($)&&(g=I,O=m,A++),"\r"!==$&&"\n"!==$){var k=e.chars[C];if(k){y&&k.kerning[y]&&(i.x+=k.kerning[y]);var N=S.pop()||{texture:s.db.EMPTY,line:0,charCode:0,prevSpaces:0,position:new r.g};N.texture=k.texture,N.line=_,N.charCode=C,N.position.x=i.x+k.xOffset+this._letterSpacing/2,N.position.y=i.y+k.yOffset,N.prevSpaces=A,u.push(N),m=N.position.x+k.texture.orig.width,i.x+=k.xAdvance+this._letterSpacing,R=Math.max(R,k.yOffset+k.texture.height),y=C,-1!==g&&p>0&&i.x>p&&(++P,Object(a.removeItems)(u,1+g-P,1+I-g),I=g,g=-1,l.push(O),h.push(u.length>0?u[u.length-1].prevSpaces:0),v=Math.max(v,O),_++,i.x=0,i.y+=e.lineHeight,y=null,A=0)}}else l.push(m),h.push(-1),v=Math.max(v,m),++_,++P,i.x=0,i.y+=e.lineHeight,y=null,A=0}var M=f[f.length-1];"\r"!==M&&"\n"!==M&&(/(?:\s)/.test(M)&&(m=O),l.push(m),v=Math.max(v,m),h.push(-1));var j=[];for(I=0;I<=_;I++){var D=0;"right"===this._align?D=v-l[I]:"center"===this._align?D=(v-l[I])/2:"justify"===this._align&&(D=h[I]<0?0:(v-l[I])/h[I]),j.push(D)}var L=u.length,B={},F=[],U=this._activePagesMeshData;for(I=0;I<U.length;I++)d.push(U[I]);for(I=0;I<L;I++){var G=(Q=u[I].texture).baseTexture.uid;if(!B[G]){if(!(at=d.pop())){var H=new o.c,V=void 0,X=void 0;"none"===e.distanceFieldType?(V=new o.d(s.db.EMPTY),X=c.b.NORMAL):(V=new o.d(s.db.EMPTY,{program:s.L.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),X=c.b.NORMAL_NPM);var W=new o.a(H,V);W.blendMode=X,at={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:W,vertices:null,uvs:null,indices:null}}at.index=0,at.indexCount=0,at.vertexCount=0,at.uvsCount=0,at.total=0;var Y=this._textureCache;Y[G]=Y[G]||new s.db(Q.baseTexture),at.mesh.texture=Y[G],at.mesh.tint=this._tint,F.push(at),B[G]=at}B[G].total++}for(I=0;I<U.length;I++)-1===F.indexOf(U[I])&&this.removeChild(U[I].mesh);for(I=0;I<F.length;I++)F[I].mesh.parent!==this&&this.addChild(F[I].mesh);for(var I in this._activePagesMeshData=F,B){var z=(at=B[I]).total;if(!((null===(t=at.indices)||void 0===t?void 0:t.length)>6*z)||at.vertices.length<2*o.a.BATCHABLE_SIZE)at.vertices=new Float32Array(8*z),at.uvs=new Float32Array(8*z),at.indices=new Uint16Array(6*z);else for(var q=at.total,K=at.vertices,Z=4*q*2;Z<K.length;Z++)K[Z]=0;at.mesh.size=6*z}for(I=0;I<L;I++){var $,J=($=u[I]).position.x+j[$.line]*("justify"===this._align?$.prevSpaces:1);this._roundPixels&&(J=Math.round(J));var Q,tt=J*n,et=$.position.y*n,nt=B[(Q=$.texture).baseTexture.uid],rt=Q.frame,it=Q._uvs,ot=nt.index++;nt.indices[6*ot+0]=0+4*ot,nt.indices[6*ot+1]=1+4*ot,nt.indices[6*ot+2]=2+4*ot,nt.indices[6*ot+3]=0+4*ot,nt.indices[6*ot+4]=2+4*ot,nt.indices[6*ot+5]=3+4*ot,nt.vertices[8*ot+0]=tt,nt.vertices[8*ot+1]=et,nt.vertices[8*ot+2]=tt+rt.width*n,nt.vertices[8*ot+3]=et,nt.vertices[8*ot+4]=tt+rt.width*n,nt.vertices[8*ot+5]=et+rt.height*n,nt.vertices[8*ot+6]=tt,nt.vertices[8*ot+7]=et+rt.height*n,nt.uvs[8*ot+0]=it.x0,nt.uvs[8*ot+1]=it.y0,nt.uvs[8*ot+2]=it.x1,nt.uvs[8*ot+3]=it.y1,nt.uvs[8*ot+4]=it.x2,nt.uvs[8*ot+5]=it.y2,nt.uvs[8*ot+6]=it.x3,nt.uvs[8*ot+7]=it.y3}for(var I in this._textWidth=v*n,this._textHeight=(i.y+e.lineHeight)*n,B){var at=B[I];if(0!==this.anchor.x||0!==this.anchor.y)for(var st=0,ut=this._textWidth*this.anchor.x,ct=this._textHeight*this.anchor.y,lt=0;lt<at.total;lt++)at.vertices[st++]-=ut,at.vertices[st++]-=ct,at.vertices[st++]-=ut,at.vertices[st++]-=ct,at.vertices[st++]-=ut,at.vertices[st++]-=ct,at.vertices[st++]-=ut,at.vertices[st++]-=ct;this._maxLineHeight=R*n;var ht=at.mesh.geometry.getBuffer("aVertexPosition"),ft=at.mesh.geometry.getBuffer("aTextureCoord"),pt=at.mesh.geometry.getIndex();ht.data=at.vertices,ft.data=at.uvs,pt.data=at.indices,ht.update(),ft.update(),pt.update()}for(I=0;I<u.length;I++)S.push(u[I])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(e){var n=T.available[this._fontName],r=n.distanceFieldRange,i=n.distanceFieldType,o=n.size;if("none"!==i)for(var a=this.worldTransform,s=a.a,u=a.b,c=a.c,l=a.d,h=Math.sqrt(s*s+u*u),f=Math.sqrt(c*c+l*l),p=(Math.abs(h)+Math.abs(f))/2,d=this._fontSize/o,y=0,m=this._activePagesMeshData;y<m.length;y++){m[y].mesh.shader.uniforms.uFWidth=p*r*d*e.resolution}t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!T.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),e.prototype.destroy=function(e){var n=this._textureCache;for(var r in n){n[r].destroy(),delete n[r]}this._textureCache=null,t.prototype.destroy.call(this,e)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(l.b),P=function(){function t(){}return t.add=function(){h.c.setExtensionXhrType("fnt",h.c.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,n){var r=_(e.data);if(r)for(var i=t.getBaseUrl(this,e),o=r.parse(e.data),a={},s=function(t){a[t.metadata.pageFile]=t.texture,Object.keys(a).length===o.page.length&&(e.bitmapFont=T.install(o,a,!0),n())},u=0;u<o.page.length;++u){var c=o.page[u].file,l=i+c,f=!1;for(var p in this.resources){var d=this.resources[p];if(d.url===l){d.metadata.pageFile=c,d.texture?s(d):d.onAfterMiddleware.add(s),f=!0;break}}if(!f){var y={crossOrigin:e.crossOrigin,loadType:h.c.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:c},e.metadata.imageMetadata),parentResource:e};this.add(l,y,s)}}else n()},t.getBaseUrl=function(e,n){var r=n.isDataUrl?"":t.dirname(n.url);return n.isDataUrl&&("."===r&&(r=""),e.baseUrl&&r&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(r+="/")),(r=r.replace(e.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t}()},"./node_modules/@pixi/text/dist/esm/text.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return m})),n.d(e,"d",(function(){return f}));var r,i=n("./node_modules/@pixi/sprite/dist/esm/sprite.js"),o=n("./node_modules/@pixi/core/dist/esm/core.js"),a=n("./node_modules/@pixi/settings/dist/esm/settings.js"),s=n("./node_modules/@pixi/math/dist/esm/math.js"),u=n("./node_modules/@pixi/utils/dist/esm/utils.js"),c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};!function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(r||(r={}));var l={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:r.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},h=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],f=function(){function t(t){this.styleID=0,this.reset(),y(this,t,t)}return t.prototype.clone=function(){var e={};return y(e,this,l),new t(e)},t.prototype.reset=function(){y(this,l,l)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=d(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=d(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=d(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var n=e.length-1;n>=0;n--){var r=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&h.indexOf(r)<0&&(r='"'+r+'"'),e[n]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function p(t){return"number"==typeof t?Object(u.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function d(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=p(t[e]);return t}return p(t)}function y(t,e,n){for(var r in n)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}var m=function(){function t(t,e,n,r,i,o,a,s,u){this.text=t,this.style=e,this.width=n,this.height=r,this.lines=i,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=s,this.fontProperties=u}return t.measureText=function(e,n,r,i){void 0===i&&(i=t._canvas),r=null==r?n.wordWrap:r;var o=n.toFontString(),a=t.measureFont(o);0===a.fontSize&&(a.fontSize=n.fontSize,a.ascent=n.fontSize);var s=i.getContext("2d");s.font=o;for(var u=(r?t.wordWrap(e,n,i):e).split(/(?:\r\n|\r|\n)/),c=new Array(u.length),l=0,h=0;h<u.length;h++){var f=s.measureText(u[h]).width+(u[h].length-1)*n.letterSpacing;c[h]=f,l=Math.max(l,f)}var p=l+n.strokeThickness;n.dropShadow&&(p+=n.dropShadowDistance);var d=n.lineHeight||a.fontSize+n.strokeThickness,y=Math.max(d,a.fontSize+n.strokeThickness)+(u.length-1)*(d+n.leading);return n.dropShadow&&(y+=n.dropShadowDistance),new t(e,n,p,y,u,c,d+n.leading,l,a)},t.wordWrap=function(e,n,r){void 0===r&&(r=t._canvas);for(var i=r.getContext("2d"),o=0,a="",s="",u=Object.create(null),c=n.letterSpacing,l=n.whiteSpace,h=t.collapseSpaces(l),f=t.collapseNewlines(l),p=!h,d=n.wordWrapWidth+c,y=t.tokenize(e),m=0;m<y.length;m++){var v=y[m];if(t.isNewline(v)){if(!f){s+=t.addLine(a),p=!h,a="",o=0;continue}v=" "}if(h){var _=t.isBreakingSpace(v),g=t.isBreakingSpace(a[a.length-1]);if(_&&g)continue}var b=t.getFromCache(v,c,u,i);if(b>d)if(""!==a&&(s+=t.addLine(a),a="",o=0),t.canBreakWords(v,n.breakWords))for(var E=t.wordWrapSplit(v),T=0;T<E.length;T++){for(var w=E[T],x=1;E[T+x];){var S=E[T+x],O=w[w.length-1];if(t.canBreakChars(O,S,v,T,n.breakWords))break;w+=S,x++}T+=w.length-1;var P=t.getFromCache(w,c,u,i);P+o>d&&(s+=t.addLine(a),p=!1,a="",o=0),a+=w,o+=P}else{a.length>0&&(s+=t.addLine(a),a="",o=0);var R=m===y.length-1;s+=t.addLine(v,!R),p=!1,a="",o=0}else b+o>d&&(p=!1,s+=t.addLine(a),a="",o=0),(a.length>0||!t.isBreakingSpace(v)||p)&&(a+=v,o+=b)}return s+=t.addLine(a,!1)},t.addLine=function(e,n){return void 0===n&&(n=!0),e=t.trimRight(e),e=n?e+"\n":e},t.getFromCache=function(t,e,n,r){var i=n[t];if("number"!=typeof i){var o=t.length*e;i=r.measureText(t).width+o,n[t]=i}return i},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var n=e.length-1;n>=0;n--){var r=e[n];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,n){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var n=[],r="";if("string"!=typeof e)return n;for(var i=0;i<e.length;i++){var o=e[i],a=e[i+1];t.isBreakingSpace(o,a)||t.isNewline(o)?(""!==r&&(n.push(r),r=""),n.push(o)):r+=o}return""!==r&&n.push(r),n},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,n,r,i){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var n={ascent:0,descent:0,fontSize:0},r=t._canvas,i=t._context;i.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,a=Math.ceil(i.measureText(o).width),s=Math.ceil(i.measureText(t.BASELINE_SYMBOL).width),u=Math.ceil(t.HEIGHT_MULTIPLIER*s);s=s*t.BASELINE_MULTIPLIER|0,r.width=a,r.height=u,i.fillStyle="#f00",i.fillRect(0,0,a,u),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,s);var c=i.getImageData(0,0,a,u).data,l=c.length,h=4*a,f=0,p=0,d=!1;for(f=0;f<s;++f){for(var y=0;y<h;y+=4)if(255!==c[p+y]){d=!0;break}if(d)break;p+=h}for(n.ascent=s-f,p=l-h,d=!1,f=u;f>s;--f){for(y=0;y<h;y+=4)if(255!==c[p+y]){d=!0;break}if(d)break;p-=h}return n.descent=f-s,n.fontSize=n.ascent+n.descent,t._fonts[e]=n,n},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},t}(),v=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.measureText?t:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();v.width=v.height=10,m._canvas=v,m._context=v.getContext("2d"),m._fonts={},m.METRICS_STRING="|q",m.BASELINE_SYMBOL="M",m.BASELINE_MULTIPLIER=1.4,m.HEIGHT_MULTIPLIER=2,m._newlines=[10,13],m._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var _={texture:!0,children:!1,baseTexture:!0},g="letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype,b=function(t){function e(e,n,r){var i=this,u=!1;r||(r=document.createElement("canvas"),u=!0),r.width=3,r.height=3;var c=o.db.from(r);return c.orig=new s.j,c.trim=new s.j,(i=t.call(this,c)||this)._ownCanvas=u,i.canvas=r,i.context=i.canvas.getContext("2d"),i._resolution=a.b.RESOLUTION,i._autoResolution=!0,i._text=null,i._style=null,i._styleListener=null,i._font="",i.text=e,i.style=n,i.localStyleID=-1,i}return function(t,e){function n(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.updateText=function(t){var n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),this.dirty||!t){this._font=this._style.toFontString();var r,i,o=this.context,a=m.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=a.width,c=a.height,l=a.lines,h=a.lineHeight,f=a.lineWidths,p=a.maxLineWidth,d=a.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+2*n.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,c)+2*n.padding)*this._resolution),o.scale(this._resolution,this._resolution),o.clearRect(0,0,this.canvas.width,this.canvas.height),o.font=this._font,o.lineWidth=n.strokeThickness,o.textBaseline=n.textBaseline,o.lineJoin=n.lineJoin,o.miterLimit=n.miterLimit;for(var y=n.dropShadow?2:1,v=0;v<y;++v){var _=n.dropShadow&&0===v,g=_?Math.ceil(Math.max(1,c)+2*n.padding):0,b=g*this._resolution;if(_){o.fillStyle="black",o.strokeStyle="black";var E=n.dropShadowColor,T=Object(u.hex2rgb)("number"==typeof E?E:Object(u.string2hex)(E));o.shadowColor="rgba("+255*T[0]+","+255*T[1]+","+255*T[2]+","+n.dropShadowAlpha+")",o.shadowBlur=n.dropShadowBlur,o.shadowOffsetX=Math.cos(n.dropShadowAngle)*n.dropShadowDistance,o.shadowOffsetY=Math.sin(n.dropShadowAngle)*n.dropShadowDistance+b}else o.fillStyle=this._generateFillStyle(n,l,a),o.strokeStyle=n.stroke,o.shadowColor="black",o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0;var w=(h-d.fontSize)/2;(!e.nextLineHeightBehavior||h-d.fontSize<0)&&(w=0);for(var x=0;x<l.length;x++)r=n.strokeThickness/2,i=n.strokeThickness/2+x*h+d.ascent+w,"right"===n.align?r+=p-f[x]:"center"===n.align&&(r+=(p-f[x])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(l[x],r+n.padding,i+n.padding-g,!0),n.fill&&this.drawLetterSpacing(l[x],r+n.padding,i+n.padding-g)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,n,r){void 0===r&&(r=!1);var i=this._style.letterSpacing;if(0===i||g)return g&&(this.context.letterSpacing=i,this.context.textLetterSpacing=i),void(r?this.context.strokeText(t,e,n):this.context.fillText(t,e,n));for(var o=e,a=Array.from?Array.from(t):t.split(""),s=this.context.measureText(t).width,u=0,c=0;c<a.length;++c){var l=a[c];r?this.context.strokeText(l,o,n):this.context.fillText(l,o,n),o+=s-(u=this.context.measureText(t.substring(c+1)).width)+i,s=u}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=Object(u.trimCanvas)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var n=this._texture,r=this._style,i=r.trim?0:r.padding,o=n.baseTexture;n.trim.width=n._frame.width=t.width/this._resolution,n.trim.height=n._frame.height=t.height/this._resolution,n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-2*i,n.orig.height=n._frame.height-2*i,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),n.updateUvs(),this._recursivePostUpdateTransform(),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,e,n){var i,o=t.fill;if(!Array.isArray(o))return o;if(1===o.length)return o[0];var a=t.dropShadow?t.dropShadowDistance:0,s=t.padding||0,u=this.canvas.width/this._resolution-a-2*s,c=this.canvas.height/this._resolution-a-2*s,l=o.slice(),h=t.fillGradientStops.slice();if(!h.length)for(var f=l.length+1,p=1;p<f;++p)h.push(p/f);if(l.unshift(o[0]),h.unshift(0),l.push(o[o.length-1]),h.push(1),t.fillGradientType===r.LINEAR_VERTICAL){i=this.context.createLinearGradient(u/2,s,u/2,c+s);var d=n.fontProperties.fontSize+t.strokeThickness;for(p=0;p<e.length;p++){var y=n.lineHeight*(p-1)+d,m=n.lineHeight*p,v=m;p>0&&y>m&&(v=(m+y)/2);var _=m+d,g=n.lineHeight*(p+1),b=_;p+1<e.length&&g<_&&(b=(_+g)/2);for(var E=(b-v)/c,T=0;T<l.length;T++){var w=0;w="number"==typeof h[T]?h[T]:T/l.length;var x=Math.min(1,Math.max(0,v/c+w*E));x=Number(x.toFixed(5)),i.addColorStop(x,l[T])}}}else{i=this.context.createLinearGradient(s,c/2,u+s,c/2);var S=l.length+1,O=1;for(p=0;p<l.length;p++){var P=void 0;P="number"==typeof h[p]?h[p]:O/S,i.addColorStop(P,l[p]),O++}}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},_,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=Object(u.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=Object(u.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof f?t:new f(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e}(i.a)},"./node_modules/@pixi/ticker/dist/esm/ticker.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return r}));var r,i=n("./node_modules/@pixi/settings/dist/esm/settings.js");
/*!
 * @pixi/ticker - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */i.b.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(r||(r={}));var o=function(){function t(t,e,n,r){void 0===e&&(e=null),void 0===n&&(n=0),void 0===r&&(r=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=n,this.once=r}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),a=function(){function t(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new o(null,null,1/0),this.deltaMS=1/i.b.TARGET_FPMS,this.elapsedMS=1/i.b.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,n){return void 0===n&&(n=r.NORMAL),this._addListener(new o(t,e,n))},t.prototype.addOnce=function(t,e,n){return void 0===n&&(n=r.NORMAL),this._addListener(new o(t,e,n,!0))},t.prototype._addListener=function(t){var e=this._head.next,n=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}else t.connect(n);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var n=this._head.next;n;)n=n.match(t,e)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*i.b.TARGET_FPMS;for(var r=this._head,o=r.next;o;)o=o.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,e)/1e3,i.b.TARGET_FPMS);this._maxElapsedMS=1/n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),s=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,r.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?a.shared:new a,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}()},"./node_modules/@pixi/utils/dist/esm/utils.js":function(t,e,n){"use strict";n.r(e),n.d(e,"BaseTextureCache",(function(){return G})),n.d(e,"CanvasRenderTarget",(function(){return X})),n.d(e,"DATA_URI",(function(){return z})),n.d(e,"ProgramCache",(function(){return F})),n.d(e,"TextureCache",(function(){return U})),n.d(e,"clearTextureCache",(function(){return V})),n.d(e,"correctBlendMode",(function(){return T})),n.d(e,"createIndicesForQuads",(function(){return O})),n.d(e,"decomposeDataUri",(function(){return q})),n.d(e,"deprecation",(function(){return B})),n.d(e,"destroyTextureCache",(function(){return H})),n.d(e,"determineCrossOrigin",(function(){return K})),n.d(e,"getBufferType",(function(){return P})),n.d(e,"getResolutionOfUrl",(function(){return Z})),n.d(e,"hex2rgb",(function(){return v})),n.d(e,"hex2string",(function(){return _})),n.d(e,"interleaveTypedArrays",(function(){return A})),n.d(e,"isPow2",(function(){return C})),n.d(e,"isWebGLSupported",(function(){return y})),n.d(e,"log2",(function(){return k})),n.d(e,"nextPow2",(function(){return I})),n.d(e,"premultiplyBlendMode",(function(){return E})),n.d(e,"premultiplyRgba",(function(){return w})),n.d(e,"premultiplyTint",(function(){return x})),n.d(e,"premultiplyTintToRgba",(function(){return S})),n.d(e,"removeItems",(function(){return N})),n.d(e,"rgb2hex",(function(){return b})),n.d(e,"sayHello",(function(){return d})),n.d(e,"sign",(function(){return M})),n.d(e,"skipHello",(function(){return p})),n.d(e,"string2hex",(function(){return g})),n.d(e,"trimCanvas",(function(){return W})),n.d(e,"uid",(function(){return D})),n.d(e,"url",(function(){return l}));var r=n("./node_modules/@pixi/settings/dist/esm/settings.js");n.d(e,"isMobile",(function(){return r.a}));var i=n("./node_modules/eventemitter3/index.js"),o=n.n(i);n.d(e,"EventEmitter",(function(){return o.a}));var a=n("./node_modules/earcut/src/earcut.js"),s=n.n(a);n.d(e,"earcut",(function(){return s.a}));var u=n("./node_modules/url/url.js"),c=n("./node_modules/@pixi/constants/dist/esm/constants.js"),l={parse:u.parse,format:u.format,resolve:u.resolve};r.b.RETINA_PREFIX=/@([0-9\.]+)x/,r.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var h,f=!1;function p(){f=!0}function d(t){var e;if(!f){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var n=["\n %c %c %c PixiJS 6.2.0 -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=self.console).log.apply(e,n)}else self.console&&self.console.log("PixiJS 6.2.0 - "+t+" - http://www.pixijs.com/");f=!0}}function y(){return void 0===h&&(h=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:r.b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i=!(!n||!n.getContextAttributes().stencil);if(n){var o=n.getExtension("WEBGL_lose_context");o&&o.loseContext()}return n=null,i}catch(t){return!1}}()),h}var m={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function v(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function _(t){var e=t.toString(16);return"#"+(e="000000".substr(0,6-e.length)+e)}function g(t){return"string"==typeof t&&"#"===(t=m[t.toLowerCase()]||t)[0]&&(t=t.substr(1)),parseInt(t,16)}function b(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var E=function(){for(var t=[],e=[],n=0;n<32;n++)t[n]=n,e[n]=n;t[c.b.NORMAL_NPM]=c.b.NORMAL,t[c.b.ADD_NPM]=c.b.ADD,t[c.b.SCREEN_NPM]=c.b.SCREEN,e[c.b.NORMAL]=c.b.NORMAL_NPM,e[c.b.ADD]=c.b.ADD_NPM,e[c.b.SCREEN]=c.b.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();function T(t,e){return E[e?1:0][t]}function w(t,e,n,r){return n=n||new Float32Array(4),r||void 0===r?(n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e):(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=e,n}function x(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var n=t>>16&255,r=t>>8&255,i=255&t;return(255*e<<24)+((n=n*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(i=i*e+.5|0)}function S(t,e,n,r){return(n=n||new Float32Array(4))[0]=(t>>16&255)/255,n[1]=(t>>8&255)/255,n[2]=(255&t)/255,(r||void 0===r)&&(n[0]*=e,n[1]*=e,n[2]*=e),n[3]=e,n}function O(t,e){void 0===e&&(e=null);var n=6*t;if((e=e||new Uint16Array(n)).length!==n)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+n);for(var r=0,i=0;r<n;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}function P(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var R={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function A(t,e){for(var n=0,r=0,i={},o=0;o<t.length;o++)r+=e[o],n+=t[o].length;var a=new ArrayBuffer(4*n),s=null,u=0;for(o=0;o<t.length;o++){var c=e[o],l=t[o],h=P(l);i[h]||(i[h]=new R[h](a)),s=i[h];for(var f=0;f<l.length;f++){s[(f/c|0)*r+u+f%c]=l[f]}u+=c}return new Float32Array(a)}function I(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function C(t){return!(t&t-1||!t)}function k(t){var e=(t>65535?1:0)<<4,n=((t>>>=e)>255?1:0)<<3;return e|=n,e|=n=((t>>>=n)>15?1:0)<<2,(e|=n=((t>>>=n)>3?1:0)<<1)|(t>>>=n)>>1}function N(t,e,n){var r,i=t.length;if(!(e>=i||0===n)){var o=i-(n=e+n>i?i-e:n);for(r=e;r<o;++r)t[r]=t[r+n];t.length=o}}function M(t){return 0===t?0:t<0?-1:1}var j=0;function D(){return++j}var L={};function B(t,e,n){if(void 0===n&&(n=3),!L[e]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),L[e]=!0}}var F={},U=Object.create(null),G=Object.create(null);function H(){var t;for(t in U)U[t].destroy();for(t in G)G[t].destroy()}function V(){var t;for(t in U)delete U[t];for(t in G)delete G[t]}var X=function(){function t(t,e,n){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||r.b.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),t}();function W(t){var e,n,r,i=t.width,o=t.height,a=t.getContext("2d"),s=a.getImageData(0,0,i,o).data,u=s.length,c={top:null,left:null,right:null,bottom:null},l=null;for(e=0;e<u;e+=4)0!==s[e+3]&&(n=e/4%i,r=~~(e/4/i),null===c.top&&(c.top=r),(null===c.left||n<c.left)&&(c.left=n),(null===c.right||c.right<n)&&(c.right=n+1),(null===c.bottom||c.bottom<r)&&(c.bottom=r));return null!==c.top&&(i=c.right-c.left,o=c.bottom-c.top+1,l=a.getImageData(c.left,c.top,i,o)),{height:o,width:i,data:l}}var Y,z=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function q(t){var e=z.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function K(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,Y||(Y=document.createElement("a")),Y.href=t;var n=l.parse(Y.href),r=!n.port&&""===e.port||n.port===e.port;return n.hostname===e.hostname&&r&&n.protocol===e.protocol?"":"anonymous"}function Z(t,e){var n=r.b.RETINA_PREFIX.exec(t);return n?parseFloat(n[1]):void 0!==e?e:1}},"./node_modules/browser-detect/dist/browser-detect.es5.js":function(t,e,n){"use strict";(function(t){
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r=[["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["edge",/Edge\/([0-9\._]+)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["safari",/Version\/([0-9\._]+).*Safari/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/]],i=["Windows Phone","Android","CentOS",{name:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],o={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},a=new RegExp(["(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|","compal|elaine|fennec|hiptop|iemobile|ip(hone|od|ad)|iris|kindle|lge |maemo|","midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)","\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|","wap|windows ce|xda|xiino"].join(""),"i"),s=new RegExp(["1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|","ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|","avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|","cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|","ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|","g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|","hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|","i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|","kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])","|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|","mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|","n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|","op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|","po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|","raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|","se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|k\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|","so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|","tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|","veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|","w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-"].join(""),"i"),u=function(){function t(t,e,n){this.navigator=e,this.process=n,this.userAgent=t||(this.navigator?e.userAgent||e.vendor:"")}return t.prototype.detect=function(){if(this.process&&!this.userAgent){var t=this.process.version.slice(1).split(".").slice(0,3),e=Array.prototype.slice.call(t,1).join("")||"0";return{name:"node",version:t.join("."),versionNumber:parseFloat(t[0]+"."+e),mobile:!1,os:this.process.platform}}return this.userAgent||this.handleMissingError(),n({},this.checkBrowser(),this.checkMobile(),this.checkOs())},t.prototype.checkBrowser=function(){var t=this;return r.filter((function(e){return e[1].test(t.userAgent)})).map((function(e){var n=e[1].exec(t.userAgent),r=n&&n[1].split(/[._]/).slice(0,3),i=Array.prototype.slice.call(r,1).join("")||"0";return r&&r.length<3&&Array.prototype.push.apply(r,1===r.length?[0,0]:[0]),{name:String(e[0]),version:r.join("."),versionNumber:Number(r[0]+"."+i)}})).shift()},t.prototype.checkMobile=function(){var t=this.userAgent.substr(0,4);return{mobile:a.test(this.userAgent)||s.test(t)}},t.prototype.checkOs=function(){var t=this;return i.map((function(e){var n=e.name||e,r=t.getOsPattern(e);return{name:n,pattern:r,value:RegExp("\\b"+r.replace(/([ -])(?!$)/g,"$1?")+"(?:x?[\\d._]+|[ \\w.]*)","i").exec(t.userAgent)}})).filter((function(t){return t.value})).map((function(t){var e,n=t.value[0]||"";return t.pattern&&t.name&&/^Win/i.test(n)&&!/^Windows Phone /i.test(n)&&(e=o[n.replace(/[^\d.]/g,"")])&&(n="Windows "+e),t.pattern&&t.name&&(n=n.replace(RegExp(t.pattern,"i"),t.name)),n=n.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0].trim(),{os:n=/^(?:webOS|i(?:OS|P))/.test(n)?n:n.charAt(0).toUpperCase()+n.slice(1)}})).shift()},t.prototype.getOsPattern=function(t){var e=t;return("string"==typeof t?t:void 0)||e.pattern||e.name},t.prototype.handleMissingError=function(){throw new Error("Please give user-agent.\n> browser(navigator.userAgent or res.headers['user-agent']).")},t}();function c(t,e){return t(e={exports:{}},e.exports),e.exports}var l=c((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),h=c((function(t){var e=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=e)})),f=(h.version,function(t){return"object"==typeof t?null!==t:"function"==typeof t}),p=function(t){if(!f(t))throw TypeError(t+" is not an object!");return t},d=function(t){try{return!!t()}catch(t){return!0}},y=!d((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),m=l.document,v=f(m)&&f(m.createElement),_=!y&&!d((function(){return 7!=Object.defineProperty((t="div",v?m.createElement(t):{}),"a",{get:function(){return 7}}).a;var t})),g=Object.defineProperty,b={f:y?Object.defineProperty:function(t,e,n){if(p(t),e=function(t,e){if(!f(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!f(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!f(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!f(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}(e,!0),p(n),_)try{return g(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},E=y?function(t,e,n){return b.f(t,e,function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}(1,n))}:function(t,e,n){return t[e]=n,t},T={}.hasOwnProperty,w=function(t,e){return T.call(t,e)},x=0,S=Math.random(),O=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++x+S).toString(36))},P=c((function(t){var e=O("src"),n=Function.toString,r=(""+n).split("toString");h.inspectSource=function(t){return n.call(t)},(t.exports=function(t,n,i,o){var a="function"==typeof i;a&&(w(i,"name")||E(i,"name",n)),t[n]!==i&&(a&&(w(i,e)||E(i,e,t[n]?""+t[n]:r.join(String(n)))),t===l?t[n]=i:o?t[n]?t[n]=i:E(t,n,i):(delete t[n],E(t,n,i)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[e]||n.call(this)}))})),R=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},A=function(t,e,n){var r,i,o,a,s=t&A.F,u=t&A.G,c=t&A.S,f=t&A.P,p=t&A.B,d=u?l:c?l[e]||(l[e]={}):(l[e]||{}).prototype,y=u?h:h[e]||(h[e]={}),m=y.prototype||(y.prototype={});for(r in u&&(n=e),n)o=((i=!s&&d&&void 0!==d[r])?d:n)[r],a=p&&i?R(o,l):f&&"function"==typeof o?R(Function.call,o):o,d&&P(d,r,o,t&A.U),y[r]!=o&&E(y,r,a),f&&m[r]!=o&&(m[r]=o)};l.core=h,A.F=1,A.G=2,A.S=4,A.P=8,A.B=16,A.W=32,A.U=64,A.R=128;var I=A,C={}.toString,k=function(t){return C.call(t).slice(8,-1)},N=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==k(t)?t.split(""):Object(t)},M=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},j=Math.ceil,D=Math.floor,L=Math.min,B=function(t){return t>0?L(function(t){return isNaN(t=+t)?0:(t>0?D:j)(t)}(t),9007199254740991):0},F=Array.isArray||function(t){return"Array"==k(t)},U=c((function(t){var e=l["__core-js_shared__"]||(l["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:h.version,mode:"global",copyright:" 2018 Denis Pushkarev (zloirock.ru)"})})),G=c((function(t){var e=U("wks"),n=l.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:O)("Symbol."+t))}).store=e}))("species"),H=function(t,e){return new(function(t){var e;return F(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!F(e.prototype)||(e=void 0),f(e)&&null===(e=e[G])&&(e=void 0)),void 0===e?Array:e}(t))(e)},V=function(t,e){var n=1==t,r=2==t,i=3==t,o=4==t,a=6==t,s=5==t||a,u=e||H;return function(e,c,l){for(var h,f,p=Object(M(e)),d=N(p),y=R(c,l,3),m=B(d.length),v=0,_=n?u(e,m):r?u(e,0):void 0;m>v;v++)if((s||v in d)&&(f=y(h=d[v],v,p),t))if(n)_[v]=f;else if(f)switch(t){case 3:return!0;case 5:return h;case 6:return v;case 2:_.push(h)}else if(o)return!1;return a?-1:i||o?o:_}},X=function(t,e){return!!t&&d((function(){e?t.call(null,(function(){}),1):t.call(null)}))},W=V(2);I(I.P+I.F*!X([].filter,!0),"Array",{filter:function(t){return W(this,t,arguments[1])}});h.Array.filter;var Y=V(1);I(I.P+I.F*!X([].map,!0),"Array",{map:function(t){return Y(this,t,arguments[1])}});h.Array.map;var z="\t\n\v\f\r \u2028\u2029\ufeff",q="["+z+"]",K=RegExp("^"+q+q+"*"),Z=RegExp(q+q+"*$"),$=function(t,e,n){var r={},i=d((function(){return!!z[t]()||""!=""[t]()})),o=r[t]=i?e(J):z[t];n&&(r[n]=o),I(I.P+I.F*i,"String",r)},J=$.trim=function(t,e){return t=String(M(t)),1&e&&(t=t.replace(K,"")),2&e&&(t=t.replace(Z,"")),t};$("trim",(function(t){return function(){return t(this,3)}}));h.String.trim;var Q="undefined"!=typeof window?window.navigator:void 0,tt=void 0!==t?t:void 0;e.a=function(t){return new u(t,Q,tt).detect()}}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/earcut/src/earcut.js":function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r,s,u,c,l,p,d,m=e&&e.length,v=m?e[0]*n:t.length,_=i(t,0,v,n,!0),g=[];if(!_||_.next===_.prev)return g;if(m&&(_=function(t,e,n,r){var a,s,u,c,l,p=[];for(a=0,s=e.length;a<s;a++)u=e[a]*r,c=a<s-1?e[a+1]*r:t.length,(l=i(t,u,c,r,!1))===l.next&&(l.steiner=!0),p.push(y(l));for(p.sort(h),a=0;a<p.length;a++)n=o(n=f(p[a],n),n.next);return n}(t,e,_,n)),t.length>80*n){r=u=t[0],s=c=t[1];for(var b=n;b<v;b+=n)(l=t[b])<r&&(r=l),(p=t[b+1])<s&&(s=p),l>u&&(u=l),p>c&&(c=p);d=0!==(d=Math.max(u-r,c-s))?1/d:0}return a(_,g,n,r,s,d),g}function i(t,e,n,r,i){var o,a;if(i===R(t,e,n,r)>0)for(o=e;o<n;o+=r)a=S(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=S(o,t[o],t[o+1],a);return a&&g(a,a.next)&&(O(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!g(r,r.next)&&0!==_(r.prev,r,r.next))r=r.next;else{if(O(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function a(t,e,n,r,i,h,f){if(t){!f&&h&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=d(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(t,r,i,h);for(var p,y,m=t;t.prev!==t.next;)if(p=t.prev,y=t.next,h?u(t,r,i,h):s(t))e.push(p.i/n),e.push(t.i/n),e.push(y.i/n),O(t),t=y.next,m=y.next;else if((t=y)===m){f?1===f?a(t=c(o(t),e,n),e,n,r,i,h,2):2===f&&l(t,e,n,r,i,h):a(o(t),e,n,r,i,h,1);break}}}function s(t){var e=t.prev,n=t,r=t.next;if(_(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(m(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&_(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,a=t.next;if(_(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=d(s,u,e,n,r),f=d(c,l,e,n,r),p=t.prevZ,y=t.nextZ;p&&p.z>=h&&y&&y.z<=f;){if(p!==t.prev&&p!==t.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&_(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,y!==t.prev&&y!==t.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,y.x,y.y)&&_(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&_(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;y&&y.z<=f;){if(y!==t.prev&&y!==t.next&&m(i.x,i.y,o.x,o.y,a.x,a.y,y.x,y.y)&&_(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function c(t,e,n){var r=t;do{var i=r.prev,a=r.next.next;!g(i,a)&&b(i,r,r.next,a)&&w(i,a)&&w(a,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(a.i/n),O(r),O(r.next),r=t=a),r=r.next}while(r!==t);return o(r)}function l(t,e,n,r,i,s){var u=t;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&v(u,c)){var l=x(u,c);return u=o(u,u.next),l=o(l,l.next),a(u,e,n,r,i,s),void a(l,e,n,r,i,s)}c=c.next}u=u.next}while(u!==t)}function h(t,e){return t.x-e.x}function f(t,e){var n=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var u,c=n,l=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&m(o<h?i:a,o,l,h,o<h?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),w(r,t)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&p(n,r)))&&(n=r,f=u)),r=r.next}while(r!==c);return n}(t,e);if(!n)return e;var r=x(n,t),i=o(n,n.next);return o(r,r.next),e===n?i:e}function p(t,e){return _(t.prev,t,e.prev)<0&&_(e.next,t,t.next)<0}function d(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function y(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function m(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&b(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(w(t,e)&&w(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(_(t.prev,t,e.prev)||_(t,e.prev,e))||g(t,e)&&_(t.prev,t,t.next)>0&&_(e.prev,e,e.next)>0)}function _(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function g(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,n,r){var i=T(_(t,e,n)),o=T(_(t,e,r)),a=T(_(n,r,t)),s=T(_(n,r,e));return i!==o&&a!==s||(!(0!==i||!E(t,n,e))||(!(0!==o||!E(t,r,e))||(!(0!==a||!E(n,t,r))||!(0!==s||!E(n,e,r)))))}function E(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function T(t){return t>0?1:t<0?-1:0}function w(t,e){return _(t.prev,t,t.next)<0?_(t,e,t.next)>=0&&_(t,t.prev,e)>=0:_(t,e,t.prev)<0||_(t,t.next,e)<0}function x(t,e){var n=new P(t.i,t.x,t.y),r=new P(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function S(t,e,n,r){var i=new P(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function O(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function R(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=r,t.exports.default=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(R(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var c=e[s]*n,l=s<u-1?e[s+1]*n:t.length;a-=Math.abs(R(t,c,l,n))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;h+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},"./node_modules/eventemitter3/index.js":function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function a(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new a(n,r||t,o),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function u(t,e){0==--t._eventsCount?t._events=new o:delete t._events[e]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,a=new Array(o);r<o;r++)a[r]=n[r].fn;return a},c.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,o,a){var s=i?i+t:t;if(!this._events[s])return!1;var u,c,l=this._events[s],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,o),!0;case 6:return l.fn.call(l.context,e,n,r,o,a),!0}for(c=1,u=new Array(h-1);c<h;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var f,p=l.length;for(c=0;c<p;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;case 4:l[c].fn.call(l[c].context,e,n,r);break;default:if(!u)for(f=1,u=new Array(h-1);f<h;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u)}}return!0},c.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return u(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||r&&!a.once||n&&a.context!==n||u(this,o);else{for(var s=0,c=[],l=a.length;s<l;s++)(a[s].fn!==e||r&&!a[s].once||n&&a[s].context!==n)&&c.push(a[s]);c.length?this._events[o]=1===c.length?c[0]:c:u(this,o)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&u(this,e)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,t.exports=c},"./node_modules/howler/dist/howler.js":function(t,e,n){(function(n){var r;
/*!
 *  howler.js v2.1.3
 *  howlerjs.com
 *
 *  (c) 2013-2019, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */!function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var t=this||o;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||o;if(t=parseFloat(t),e.ctx||p(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,o.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=e._howls[n]._soundById(r[i]);a&&a._node&&(a._node.volume=a._volume*t)}return e}return e._volume},mute:function(t){var e=this||o;e.ctx||p(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,o.ctx.currentTime);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var r=e._howls[n]._getSoundIds(),i=0;i<r.length;i++){var a=e._howls[n]._soundById(r[i]);a&&a._node&&(a._node.muted=!!t||a._muted)}return e},unload:function(){for(var t=this||o,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,p()),t},codecs:function(t){return(this||o)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||o;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||o,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var n=e.canPlayType("audio/mpeg;").replace(/^no$/,""),r=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),i=r&&parseInt(r[0].split("/")[1],10)<33;return t._codecs={mp3:!(i||!n&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||o;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(n){for(var r=0;r<t.html5PoolSize;r++)try{var i=new Audio;i._unlocked=!0,t._releaseHtml5Audio(i)}catch(n){t.noAudio=!0}for(r=0;r<t._howls.length;r++)if(!t._howls[r]._webAudio)for(var o=t._howls[r]._getSoundIds(),a=0;a<o.length;a++){var s=t._howls[r]._soundById(o[a]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}t._autoResume();var u=t.ctx.createBufferSource();u.buffer=t._scratchBuffer,u.connect(t.ctx.destination),void 0===u.start?u.noteOn(0):u.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),u.onended=function(){u.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0);for(var n=0;n<t._howls.length;n++)t._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),t}},_obtainHtml5Audio:function(){var t=this||o;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(t){var e=this||o;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&o.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var n=0;n<t._howls[e]._sounds.length;n++)if(!t._howls[e]._sounds[n]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",t.ctx.suspend().then((function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())})))}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&o.usingWebAudio)return"running"===t.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var o=new i,a=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};a.prototype={init:function(t){var e=this;return o.ctx||p(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhrWithCredentials=t.xhrWithCredentials||!1,e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=o.usingWebAudio&&!e._html5,void 0!==o.ctx&&o.ctx&&o.autoUnlock&&o._unlockAudio(),o._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&e.load(),e},load:function(){var t=null;if(o.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var e=0;e<this._src.length;e++){var n,r;if(this._format&&this._format[e])n=this._format[e];else{if("string"!=typeof(r=this._src[e])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(r))||(n=/\.([^.]+)$/.exec(r.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&o.codecs(n)){t=this._src[e];break}}if(t)return this._src=t,this._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new s(this),this._webAudio&&c(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var n=this,r=null;if("number"==typeof t)r=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if(void 0===t&&(t="__default",!n._playLock)){for(var i=0,a=0;a<n._sounds.length;a++)n._sounds[a]._paused&&!n._sounds[a]._ended&&(i++,r=n._sounds[a]._id);1===i?t=null:r=null}}var s=r?n._soundById(r):n._inactiveSound();if(!s)return null;if(r&&!t&&(t=s._sprite||"__default"),"loaded"!==n._state){s._sprite=t,s._ended=!1;var u=s._id;return n._queue.push({event:"play",action:function(){n.play(u)}}),u}if(r&&!s._paused)return e||n._loadQueue("play"),s._id;n._webAudio&&o._autoResume();var c=Math.max(0,s._seek>0?s._seek:n._sprite[t][0]/1e3),l=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-c),h=1e3*l/Math.abs(s._rate),f=n._sprite[t][0]/1e3,p=(n._sprite[t][0]+n._sprite[t][1])/1e3;s._sprite=t,s._ended=!1;var d=function(){s._paused=!1,s._seek=c,s._start=f,s._stop=p,s._loop=!(!s._loop&&!n._sprite[t][2])};if(!(c>=p)){var y=s._node;if(n._webAudio){var m=function(){n._playLock=!1,d(),n._refreshBuffer(s);var t=s._muted||n._muted?0:s._volume;y.gain.setValueAtTime(t,o.ctx.currentTime),s._playStart=o.ctx.currentTime,void 0===y.bufferSource.start?s._loop?y.bufferSource.noteGrainOn(0,c,86400):y.bufferSource.noteGrainOn(0,c,l):s._loop?y.bufferSource.start(0,c,86400):y.bufferSource.start(0,c,l),h!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),h)),e||setTimeout((function(){n._emit("play",s._id),n._loadQueue()}),0)};"running"===o.state?m():(n._playLock=!0,n.once("resume",m),n._clearTimer(s._id))}else{var v=function(){y.currentTime=c,y.muted=s._muted||n._muted||o._muted||y.muted,y.volume=s._volume*o.volume(),y.playbackRate=s._rate;try{var r=y.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(n._playLock=!0,d(),r.then((function(){n._playLock=!1,y._unlocked=!0,e||(n._emit("play",s._id),n._loadQueue())})).catch((function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):e||(n._playLock=!1,d(),n._emit("play",s._id),n._loadQueue()),y.playbackRate=s._rate,y.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),h):(n._endTimers[s._id]=function(){n._ended(s),y.removeEventListener("ended",n._endTimers[s._id],!1)},y.addEventListener("ended",n._endTimers[s._id],!1))}catch(t){n._emit("playerror",s._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===y.src&&(y.src=n._src,y.load());var _=window&&window.ejecta||!y.readyState&&o._navigator.isCocoonJS;if(y.readyState>=3||_)v();else{n._playLock=!0;var g=function(){v(),y.removeEventListener(o._canPlayEvent,g,!1)};y.addEventListener(o._canPlayEvent,g,!1),n._clearTimer(s._id)}}return s._id}n._ended(s)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var n=e._getSoundIds(t),r=0;r<n.length;r++){e._clearTimer(n[r]);var i=e._soundById(n[r]);if(i&&!i._paused&&(i._seek=e.seek(n[r]),i._rateSeek=0,i._paused=!0,e._stopFade(n[r]),i._node))if(e._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),e._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||e._emit("pause",i?i._id:null)}return e},stop:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(t)}}),n;for(var r=n._getSoundIds(t),i=0;i<r.length;i++){n._clearTimer(r[i]);var o=n._soundById(r[i]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,n._stopFade(r[i]),o._node&&(n._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),n._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause(),o._node.duration===1/0&&n._clearSound(o._node))),e||n._emit("stop",o._id))}return n},mute:function(t,e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(t,e)}}),n;if(void 0===e){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var r=n._getSoundIds(e),i=0;i<r.length;i++){var a=n._soundById(r[i]);a&&(a._muted=t,a._interval&&n._stopFade(a._id),n._webAudio&&a._node?a._node.gain.setValueAtTime(t?0:a._volume,o.ctx.currentTime):a._node&&(a._node.muted=!!o._muted||t),n._emit("mute",a._id))}return n},volume:function(){var t,e,n,r=this,i=arguments;if(0===i.length)return r._volume;if(1===i.length||2===i.length&&void 0===i[1]){var a=r._getSoundIds(),s=a.indexOf(i[0]);s>=0?e=parseInt(i[0],10):t=parseFloat(i[0])}else i.length>=2&&(t=parseFloat(i[0]),e=parseInt(i[1],10));if(!(void 0!==t&&t>=0&&t<=1))return(n=e?r._soundById(e):r._sounds[0])?n._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,i)}}),r;void 0===e&&(r._volume=t),e=r._getSoundIds(e);for(var u=0;u<e.length;u++)(n=r._soundById(e[u]))&&(n._volume=t,i[2]||r._stopFade(e[u]),r._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(t,o.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=t*o.volume()),r._emit("volume",n._id));return r},fade:function(t,e,n,r){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(t,e,n,r)}}),i;t=parseFloat(t),e=parseFloat(e),n=parseFloat(n),i.volume(t,r);for(var a=i._getSoundIds(r),s=0;s<a.length;s++){var u=i._soundById(a[s]);if(u){if(r||i._stopFade(a[s]),i._webAudio&&!u._muted){var c=o.ctx.currentTime,l=c+n/1e3;u._volume=t,u._node.gain.setValueAtTime(t,c),u._node.gain.linearRampToValueAtTime(e,l)}i._startFadeInterval(u,t,e,n,a[s],void 0===r)}}return i},_startFadeInterval:function(t,e,n,r,i,o){var a=this,s=e,u=n-e,c=Math.abs(u/.01),l=Math.max(4,c>0?r/c:r),h=Date.now();t._fadeTo=n,t._interval=setInterval((function(){var i=(Date.now()-h)/r;h=Date.now(),s+=u*i,s=Math.max(0,s),s=Math.min(1,s),s=Math.round(100*s)/100,a._webAudio?t._volume=s:a.volume(s,t._id,!0),o&&(a._volume=s),(n<e&&s<=n||n>e&&s>=n)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,a.volume(n,t._id),a._emit("fade",t._id))}),l)},_stopFade:function(t){var e=this._soundById(t);return e&&e._interval&&(this._webAudio&&e._node.gain.cancelScheduledValues(o.ctx.currentTime),clearInterval(e._interval),e._interval=null,this.volume(e._fadeTo,t),e._fadeTo=null,this._emit("fade",t)),this},loop:function(){var t,e,n,r=this,i=arguments;if(0===i.length)return r._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(n=r._soundById(parseInt(i[0],10)))&&n._loop;t=i[0],r._loop=t}else 2===i.length&&(t=i[0],e=parseInt(i[1],10));for(var o=r._getSoundIds(e),a=0;a<o.length;a++)(n=r._soundById(o[a]))&&(n._loop=t,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t,t&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return r},rate:function(){var t,e,n,r=this,i=arguments;if(0===i.length)e=r._sounds[0]._id;else if(1===i.length){var a=r._getSoundIds(),s=a.indexOf(i[0]);s>=0?e=parseInt(i[0],10):t=parseFloat(i[0])}else 2===i.length&&(t=parseFloat(i[0]),e=parseInt(i[1],10));if("number"!=typeof t)return(n=r._soundById(e))?n._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,i)}}),r;void 0===e&&(r._rate=t),e=r._getSoundIds(e);for(var u=0;u<e.length;u++)if(n=r._soundById(e[u])){r.playing(e[u])&&(n._rateSeek=r.seek(e[u]),n._playStart=r._webAudio?o.ctx.currentTime:n._playStart),n._rate=t,r._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(t,o.ctx.currentTime):n._node&&(n._node.playbackRate=t);var c=r.seek(e[u]),l=(r._sprite[n._sprite][0]+r._sprite[n._sprite][1])/1e3-c,h=1e3*l/Math.abs(n._rate);!r._endTimers[e[u]]&&n._paused||(r._clearTimer(e[u]),r._endTimers[e[u]]=setTimeout(r._ended.bind(r,n),h)),r._emit("rate",n._id)}return r},seek:function(){var t,e,n=this,r=arguments;if(0===r.length)e=n._sounds[0]._id;else if(1===r.length){var i=n._getSoundIds(),a=i.indexOf(r[0]);a>=0?e=parseInt(r[0],10):n._sounds.length&&(e=n._sounds[0]._id,t=parseFloat(r[0]))}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if(void 0===e)return n;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,r)}}),n;var s=n._soundById(e);if(s){if(!("number"==typeof t&&t>=0)){if(n._webAudio){var u=n.playing(e)?o.ctx.currentTime-s._playStart:0,c=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(c+u*Math.abs(s._rate))}return s._node.currentTime}var l=n.playing(e);l&&n.pause(e,!0),s._seek=t,s._ended=!1,n._clearTimer(e),n._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=t);var h=function(){n._emit("seek",e),l&&n.play(e,!0)};if(l&&!n._webAudio){var f=function(){n._playLock?setTimeout(f,0):h()};setTimeout(f,0)}else h()}return n},playing:function(t){if("number"==typeof t){var e=this._soundById(t);return!!e&&!e._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(t){var e=this._duration,n=this._soundById(t);return n&&(e=this._sprite[n._sprite][1]/1e3),e},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,n=0;n<e.length;n++)e[n]._paused||t.stop(e[n]._id),t._webAudio||(t._clearSound(e[n]._node),e[n]._node.removeEventListener("error",e[n]._errorFn,!1),e[n]._node.removeEventListener(o._canPlayEvent,e[n]._loadFn,!1),o._releaseHtml5Audio(e[n]._node)),delete e[n]._node,t._clearTimer(e[n]._id);var r=o._howls.indexOf(t);r>=0&&o._howls.splice(r,1);var i=!0;for(n=0;n<o._howls.length;n++)if(o._howls[n]._src===t._src||t._src.indexOf(o._howls[n]._src)>=0){i=!1;break}return u&&i&&delete u[t._src],o.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,n,r){var i=this["_on"+t];return"function"==typeof e&&i.push(r?{id:n,fn:e,once:r}:{id:n,fn:e}),this},off:function(t,e,n){var r=this["_on"+t],i=0;if("number"==typeof e&&(n=e,e=null),e||n)for(i=0;i<r.length;i++){var o=n===r[i].id;if(e===r[i].fn&&o||!e&&o){r.splice(i,1);break}}else if(t)this["_on"+t]=[];else{var a=Object.keys(this);for(i=0;i<a.length;i++)0===a[i].indexOf("_on")&&Array.isArray(this[a[i]])&&(this[a[i]]=[])}return this},once:function(t,e,n){return this.on(t,e,n,1),this},_emit:function(t,e,n){for(var r=this["_on"+t],i=r.length-1;i>=0;i--)r[i].id&&r[i].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,n)}.bind(this,r[i].fn),0),r[i].once&&this.off(t,r[i].fn,r[i].id));return this._loadQueue(t),this},_loadQueue:function(t){if(this._queue.length>0){var e=this._queue[0];e.event===t&&(this._queue.shift(),this._loadQueue()),t||e.action()}return this},_ended:function(t){var e=t._sprite;if(!this._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(this._ended.bind(this,t),100),this;var n=!(!t._loop&&!this._sprite[e][2]);if(this._emit("end",t._id),!this._webAudio&&n&&this.stop(t._id,!0).play(t._id),this._webAudio&&n){this._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=o.ctx.currentTime;var r=1e3*(t._stop-t._start)/Math.abs(t._rate);this._endTimers[t._id]=setTimeout(this._ended.bind(this,t),r)}return this._webAudio&&!n&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,this._clearTimer(t._id),this._cleanBuffer(t._node),o._autoSuspend()),this._webAudio||n||this.stop(t._id,!0),this},_clearTimer:function(t){if(this._endTimers[t]){if("function"!=typeof this._endTimers[t])clearTimeout(this._endTimers[t]);else{var e=this._soundById(t);e&&e._node&&e._node.removeEventListener("ended",this._endTimers[t],!1)}delete this._endTimers[t]}return this},_soundById:function(t){for(var e=0;e<this._sounds.length;e++)if(t===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){this._drain();for(var t=0;t<this._sounds.length;t++)if(this._sounds[t]._ended)return this._sounds[t].reset();return new s(this)},_drain:function(){var t=this._pool,e=0,n=0;if(!(this._sounds.length<t)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&e++;for(n=this._sounds.length-1;n>=0;n--){if(e<=t)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),e--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],n=0;n<this._sounds.length;n++)e.push(this._sounds[n]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=o.ctx.createBufferSource(),t._node.bufferSource.buffer=u[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,o.ctx.currentTime),this},_cleanBuffer:function(t){var e=o._navigator&&o._navigator.vendor.indexOf("Apple")>=0;if(o._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=o._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(o._navigator&&o._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(t){this._parent=t,this.init()};s.prototype={init:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,t._sounds.push(this),this.create(),this},create:function(){var t=this._parent,e=o._muted||this._muted||this._parent._muted?0:this._volume;return t._webAudio?(this._node=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),this._node.gain.setValueAtTime(e,o.ctx.currentTime),this._node.paused=!0,this._node.connect(o.masterGain)):o.noAudio||(this._node=o._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(o._canPlayEvent,this._loadFn,!1),this._node.src=t._src,this._node.preload="auto",this._node.volume=e*o.volume(),this._node.load()),this},reset:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++o._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(o._canPlayEvent,this._loadFn,!1)}};var u={},c=function(t){var e=t._src;if(u[e])return t._duration=u[e].duration,void f(t);if(/^data:[^;]+;base64,/.test(e)){for(var n=atob(e.split(",")[1]),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);h(r.buffer,t)}else{var o=new XMLHttpRequest;o.open("GET",e,!0),o.withCredentials=t._xhrWithCredentials,o.responseType="arraybuffer",o.onload=function(){var e=(o.status+"")[0];"0"===e||"2"===e||"3"===e?h(o.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete u[e],t.load())},l(o)}},l=function(t){try{t.send()}catch(e){t.onerror()}},h=function(t,e){var n=function(){e._emit("loaderror",null,"Decoding audio data failed.")},r=function(t){t&&e._sounds.length>0?(u[e._src]=t,f(e,t)):n()};"undefined"!=typeof Promise&&1===o.ctx.decodeAudioData.length?o.ctx.decodeAudioData(t).then(r).catch(n):o.ctx.decodeAudioData(t,r,n)},f=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},p=function(){if(o.usingWebAudio){try{"undefined"!=typeof AudioContext?o.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?o.ctx=new webkitAudioContext:o.usingWebAudio=!1}catch(t){o.usingWebAudio=!1}o.ctx||(o.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(o._navigator&&o._navigator.platform),e=o._navigator&&o._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=e?parseInt(e[1],10):null;if(t&&n&&n<9){var r=/safari/.test(o._navigator&&o._navigator.userAgent.toLowerCase());(o._navigator&&o._navigator.standalone&&!r||o._navigator&&!o._navigator.standalone&&!r)&&(o.usingWebAudio=!1)}o.usingWebAudio&&(o.masterGain=void 0===o.ctx.createGain?o.ctx.createGainNode():o.ctx.createGain(),o.masterGain.gain.setValueAtTime(o._muted?0:o._volume,o.ctx.currentTime),o.masterGain.connect(o.ctx.destination)),o._setup()}};void 0===(r=function(){return{Howler:o,Howl:a}}.apply(e,[]))||(t.exports=r),e.Howler=o,e.Howl=a,"undefined"!=typeof window?(window.HowlerGlobal=i,window.Howler=o,window.Howl=a,window.Sound=s):void 0!==n&&(n.HowlerGlobal=i,n.Howler=o,n.Howl=a,n.Sound=s)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.1.3
 *  howlerjs.com
 *
 *  (c) 2013-2019, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){if(!this.ctx||!this.ctx.listener)return this;for(var e=this._howls.length-1;e>=0;e--)this._howls[e].stereo(t);return this},HowlerGlobal.prototype.pos=function(t,e,n){return this.ctx&&this.ctx.listener?(e="number"!=typeof e?this._pos[1]:e,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof t?this._pos:(this._pos=[t,e,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(t,e,n,r,i,o){if(!this.ctx||!this.ctx.listener)return this;var a=this._orientation;return e="number"!=typeof e?a[1]:e,n="number"!=typeof n?a[2]:n,r="number"!=typeof r?a[3]:r,i="number"!=typeof i?a[4]:i,o="number"!=typeof o?a[5]:o,"number"!=typeof t?a:(this._orientation=[t,e,n,r,i,o],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(o,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(t,e,n,r,i,o),this)},Howl.prototype.init=(t=Howl.prototype.init,function(e){return this._orientation=e.orientation||[1,0,0],this._stereo=e.stereo||null,this._pos=e.pos||null,this._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},this._onstereo=e.onstereo?[{fn:e.onstereo}]:[],this._onpos=e.onpos?[{fn:e.onpos}]:[],this._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var o=r._getSoundIds(n),a=0;a<o.length;a++){var s=r._soundById(o[a]);if(s){if("number"!=typeof t)return s._stereo;s._stereo=t,s._pos=[t,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||e(s,i),"spatial"===i?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(t,0,0):s._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",s._id)}}return r},Howl.prototype.pos=function(t,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"pos",action:function(){o.pos(t,n,r,i)}}),o;if(n="number"!=typeof n?0:n,r="number"!=typeof r?-.5:r,void 0===i){if("number"!=typeof t)return o._pos;o._pos=[t,n,r]}for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var u=o._soundById(a[s]);if(u){if("number"!=typeof t)return u._pos;u._pos=[t,n,r],u._node&&(u._panner&&!u._panner.pan||e(u,"spatial"),void 0!==u._panner.positionX?(u._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setPosition(t,n,r)),o._emit("pos",u._id)}}return o},Howl.prototype.orientation=function(t,n,r,i){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"orientation",action:function(){o.orientation(t,n,r,i)}}),o;if(n="number"!=typeof n?o._orientation[1]:n,r="number"!=typeof r?o._orientation[2]:r,void 0===i){if("number"!=typeof t)return o._orientation;o._orientation=[t,n,r]}for(var a=o._getSoundIds(i),s=0;s<a.length;s++){var u=o._soundById(a[s]);if(u){if("number"!=typeof t)return u._orientation;u._orientation=[t,n,r],u._node&&(u._panner||(u._pos||(u._pos=o._pos||[0,0,-.5]),e(u,"spatial")),void 0!==u._panner.orientationX?(u._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),u._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),u._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):u._panner.setOrientation(t,n,r)),o._emit("orientation",u._id)}}return o},Howl.prototype.pannerAttr=function(){var t,n,r,i=this,o=arguments;if(!i._webAudio)return i;if(0===o.length)return i._pannerAttr;if(1===o.length){if("object"!=typeof o[0])return(r=i._soundById(parseInt(o[0],10)))?r._pannerAttr:i._pannerAttr;t=o[0],void 0===n&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),i._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:i._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:i._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:i._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:i._panningModel})}else 2===o.length&&(t=o[0],n=parseInt(o[1],10));for(var a=i._getSoundIds(n),s=0;s<a.length;s++)if(r=i._soundById(a[s])){var u=r._pannerAttr;u={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:u.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:u.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:u.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:u.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:u.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:u.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:u.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:u.panningModel};var c=r._panner;c?(c.coneInnerAngle=u.coneInnerAngle,c.coneOuterAngle=u.coneOuterAngle,c.coneOuterGain=u.coneOuterGain,c.distanceModel=u.distanceModel,c.maxDistance=u.maxDistance,c.refDistance=u.refDistance,c.rolloffFactor=u.rolloffFactor,c.panningModel=u.panningModel):(r._pos||(r._pos=i._pos||[0,0,-.5]),e(r,"spatial"))}return i},Sound.prototype.init=function(t){return function(){var e=this._parent;this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,t.call(this),this._stereo?e.stereo(this._stereo):this._pos&&e.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this._parent;return this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,this._stereo?e.stereo(this._stereo):this._pos?e.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,e._refreshBuffer(this)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/node-libs-browser/node_modules/timers-browserify/main.js":function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n("./node_modules/setimmediate/setImmediate.js"),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/object-assign/index.js":function(t,e,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,u=a(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},"./node_modules/pixi-heaven/lib/pixi-heaven.es.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return pt}));var r=n("./node_modules/@pixi/spritesheet/dist/esm/spritesheet.js"),i=n("./node_modules/@pixi/math/dist/esm/math.js"),o=n("./node_modules/@pixi/core/dist/esm/core.js"),a=(n("./node_modules/@pixi/ticker/dist/esm/ticker.js"),n("./node_modules/@pixi/utils/dist/esm/utils.js")),s=n("./node_modules/@pixi/constants/dist/esm/constants.js"),u=n("./node_modules/@pixi/mesh/dist/esm/mesh.js"),c=n("./node_modules/@pixi/display/dist/esm/display.js"),l=n("./node_modules/@pixi/sprite/dist/esm/sprite.js"),h=n("./node_modules/@pixi/text-bitmap/dist/esm/text-bitmap.js");n("./node_modules/@pixi/graphics/dist/esm/graphics.js");
/*!
 * pixi-heaven - v0.3.1
 * Compiled Tue, 27 Jul 2021 11:04:46 UTC
 *
 * pixi-heaven is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 * 
 * Copyright 2019-2020, Ivan Popelyshev, All Rights Reserved
 */
class f{constructor(t,e,n){this.vertices=t,this.uvs=e,this.indices=n}}class p{__init(){this.programCache={}}__init2(){this.defaultGroupCache={}}constructor(t,e,n){if(this.vertexSrc=t,this.fragTemplate=e,this.loops=n,p.prototype.__init.call(this),p.prototype.__init2.call(this),e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');for(let t=0;t<n.length;t++)if(e.indexOf(n[t].loopLabel)<0)throw new Error(`Fragment template must contain "${n[t].loopLabel}".`)}generateShader(t){if(!this.programCache[t]){const e=new Int32Array(t),{loops:n}=this;for(let n=0;n<t;n++)e[n]=n;this.defaultGroupCache[t]=new o.ib({uSamplers:e},!0);let r=this.fragTemplate;for(let e=0;e<n.length;e++)r=r.replace(/%count%/gi,""+t),r=r.replace(new RegExp(n[e].loopLabel,"gi"),this.generateSampleSrc(t,n[e]));this.programCache[t]=new o.L(this.vertexSrc,r)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new i.d,default:this.defaultGroupCache[t]};return new o.W(this.programCache[t],e)}generateSampleSrc(t,e){let n="";n+="\n",n+="\n";for(let r=0;r<t;r++)r>0&&(n+="\nelse "),r<t-1&&(n+=`if(${e.inTex} < ${r}.5)`),n+="\n{",n+=`\n\t${e.outColor} = texture2D(uSamplers[${r}], ${e.inCoord});`,n+="\n}";return n+="\n",n+="\n",n}}const d=o.db.WHITE.baseTexture,y=new Float32Array([0,0,0,0]);class m extends o.C{constructor(t=!1){super(),this._buffer=new o.p(null,t,!1),this._indexBuffer=new o.p(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,s.r.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,s.r.FLOAT).addAttribute("aLight",this._buffer,4,!0,s.r.UNSIGNED_BYTE).addAttribute("aDark",this._buffer,4,!0,s.r.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,s.r.FLOAT).addAttribute("aMaskCoord",this._buffer,2,!1,s.r.FLOAT).addAttribute("aMaskClamp",this._buffer,4,!1,s.r.FLOAT).addIndex(this._indexBuffer)}}const v=[null,null];class _{static __initStatic(){this.MAX_TEXTURES=8}static create(t){const{vertex:e,fragment:n,vertexSize:r,geometryClass:i}=Object.assign({vertex:"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aLight, aDark;\nattribute float aTextureId;\nattribute vec2 aMaskCoord;\nattribute vec4 aMaskClamp;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vLight, vDark;\nvarying float vTextureId;\nvarying vec2 vMaskCoord;\nvarying vec4 vMaskClamp;\n\nvoid main(void){\ngl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\nvTextureCoord = aTextureCoord;\nvTextureId = aTextureId;\nvLight = aLight * tint;\nvDark = vec4(aDark.rgb * tint.rgb, aDark.a);\nvMaskCoord = aMaskCoord;\nvMaskClamp = aMaskClamp;\n}\n",fragment:"\nvarying vec2 vTextureCoord;\nvarying vec2 vMaskCoord;\nvarying vec4 vMaskClamp;\nvarying vec4 vLight, vDark;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void) {\nvec4 texColor, maskColor, fragColor;\n\nfloat maskBits = floor((vTextureId + 0.5) / 64.0);\nfloat textureId = floor(0.5 + vTextureId - maskBits * 64.0);\nfloat maskId = floor((maskBits + 0.5) / 16.0);\nmaskBits = maskBits - maskId * 16.0;\n\nfloat clipEnable = step(0.5, maskBits);\n\nfloat clip = step(3.5,\n    step(vMaskClamp.x, vMaskCoord.x) +\n    step(vMaskClamp.y, vMaskCoord.y) +\n    step(vMaskCoord.x, vMaskClamp.z) +\n    step(vMaskCoord.y, vMaskClamp.w));\n%loopTex%\n%loopMask%\nfragColor.a = texColor.a * vLight.a;\nfragColor.rgb = ((texColor.a - 1.0) * vDark.a + 1.0 - texColor.rgb) * vDark.rgb + texColor.rgb * vLight.rgb;\ngl_FragColor = fragColor * maskColor.r * (clipEnable * clip + 1.0 - clipEnable);\n}",geometryClass:m,vertexSize:13},t);return class extends o.a{constructor(t){super(t),this.shaderGenerator=new p(e,n,[{loopLabel:"%loopTex%",inCoord:"vTextureCoord",outColor:"texColor",inTex:"textureId"},{loopLabel:"%loopMask%",inCoord:"vMaskCoord",outColor:"maskColor",inTex:"maskId"}]),this.geometryClass=i,this.vertexSize=r}contextChange(){const t=this,e=2*t.renderer.plugins.batch.MAX_TEXTURES;t.MAX_TEXTURES=Math.max(2,Math.min(_.MAX_TEXTURES,e)),this._shader=t.shaderGenerator.generateShader(this.MAX_TEXTURES);for(let e=0;e<t._packedGeometryPoolSize;e++)t._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}buildTexturesAndDrawCalls(){const t=this._bufferedTextures,e=this._bufferedElements,n=this._bufferSize,{MAX_TEXTURES:r}=this,i=o.a._textureArrayPool,a=this.renderer.batch,s=this._tempBoundTextures,u=this.renderer.textureGC.count;let c=++o.h._globalBatch,l=0,h=i[0],f=0;a.copyBoundTextures(s,r);for(let o=0;o<n;++o){const n=e[o].maskSprite?e[o].maskSprite.texture.baseTexture:null;v[0]=n&&n.valid?n:d,v[1]=t[o],t[o]=null;const p=(v[0]._batchEnabled!==c?1:0)+(v[1]._batchEnabled!==c?1:0);h.count+p>r&&(a.boundArray(h,s,c,r),this.buildDrawCalls(h,f,o),f=o,h=i[++l],++c);for(let t=0;t<2;t++){const e=v[t];e._batchEnabled!==c&&(e._batchEnabled=c,e.touched=u,h.elements[h.count++]=e)}}h.count>0&&(a.boundArray(h,s,c,r),this.buildDrawCalls(h,f,n),++l,++c);for(let t=0;t<s.length;t++)s[t]=null;o.h._globalBatch=c}packInterleavedGeometry(t,e,n,r,i){const{uint32View:o,float32View:s}=e;let u=-1,c=0;if(t.color)u=t.color.lightRgba,c=t.color.darkRgba;else{const e=Math.min(t.worldAlpha,1);u=e<1&&t._texture.baseTexture.premultiplyAlpha?Object(a.premultiplyTint)(t._tintRGB,e):t._tintRGB+(255*e<<24)}const l=r/this.vertexSize,h=t.uvs,f=t.indices,p=t.vertexData,m=t._texture.baseTexture._batchLocation;let v=d;const _=t.maskSprite;let g=y,b=y,E=0;_&&(t.calculateMaskVertices(),g=_._texture.uvMatrix.uClampFrame,b=t.maskVertexData,_.texture.valid&&(v=_.texture.baseTexture,E=1));for(let t=0;t<p.length;t+=2)s[r++]=p[t],s[r++]=p[t+1],s[r++]=h[t],s[r++]=h[t+1],o[r++]=u,o[r++]=c,s[r++]=64*(16*v._batchLocation+E)+m,s[r++]=b[t],s[r++]=b[t+1],s[r++]=g[0],s[r++]=g[1],s[r++]=g[2],s[r++]=g[3];for(let t=0;t<f.length;t++)n[i++]=l+f[t]}}}}_.__initStatic();const g=[1,1,1,1],b=[0,0,0,1];class E{constructor(){E.prototype.__init.call(this),E.prototype.__init2.call(this),E.prototype.__init3.call(this),E.prototype.__init4.call(this),E.prototype.__init5.call(this),E.prototype.__init6.call(this),E.prototype.__init7.call(this)}__init(){this.dark=new Float32Array(b)}__init2(){this.light=new Float32Array(g)}__init3(){this._updateID=0}__init4(){this._currentUpdateID=-1}__init5(){this.darkRgba=0}__init6(){this.lightRgba=-1}__init7(){this.hasNoTint=!0}get darkR(){return this.dark[0]}set darkR(t){this.dark[0]!==t&&(this.dark[0]=t,this._updateID++)}get darkG(){return this.dark[1]}set darkG(t){this.dark[1]!==t&&(this.dark[1]=t,this._updateID++)}get darkB(){return this.dark[2]}set darkB(t){this.dark[2]!==t&&(this.dark[2]=t,this._updateID++)}get lightR(){return this.light[0]}set lightR(t){this.light[0]!==t&&(this.light[0]=t,this._updateID++)}get lightG(){return this.light[1]}set lightG(t){this.light[1]!==t&&(this.light[1]=t,this._updateID++)}get lightB(){return this.light[2]}set lightB(t){this.light[2]!==t&&(this.light[2]=t,this._updateID++)}get alpha(){return this.light[3]}set alpha(t){this.light[3]!==t&&(this.light[3]=t,this._updateID++)}get pma(){return 0!==this.dark[3]}set pma(t){0!==this.dark[3]===t&&(this.dark[3]=t?1:0,this._updateID++)}get tintBGR(){const t=this.light;return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}set tintBGR(t){this.setLight((t>>16&255)/255,(t>>8&255)/255,(255&t)/255)}setLight(t,e,n){const r=this.light;r[0]===t&&r[1]===e&&r[2]===n||(r[0]=t,r[1]=e,r[2]=n,this._updateID++)}setDark(t,e,n){const r=this.dark;r[0]===t&&r[1]===e&&r[2]===n||(r[0]=t,r[1]=e,r[2]=n,this._updateID++)}clear(){this.dark[0]=0,this.dark[1]=0,this.dark[2]=0,this.light[0]=1,this.light[1]=1,this.light[2]=1}invalidate(){this._updateID++}updateTransformLocal(){const t=this.dark,e=this.light,n=255*(1+(e[3]-1)*t[3]);this.hasNoTint=0===t[0]&&0===t[1]&&0===t[2]&&1===e[0]&&1===e[1]&&1===e[2],this.darkRgba=(t[0]*n|0)+(t[1]*n<<8)+(t[2]*n<<16)+(255*t[3]<<24),this.lightRgba=(e[0]*n|0)+(e[1]*n<<8)+(e[2]*n<<16)+(255*e[3]<<24),this._currentUpdateID=this._updateID}updateTransform(){this._currentUpdateID!==this._updateID&&this.updateTransformLocal()}}var T;!function(t){t[t.NEVER=0]="NEVER";t[t.AUTO=1]="AUTO";t[t.ALWAYS=2]="ALWAYS"}(T||(T={}));T.AUTO;const w=!1;o.W;u.a;var x=/iPhone/i,S=/iPod/i,O=/iPad/i,P=/\biOS-universal(?:.+)Mac\b/i,R=/\bAndroid(?:.+)Mobile\b/i,A=/Android/i,I=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,C=/Silk/i,k=/Windows Phone/i,N=/\bWindows(?:.+)ARM\b/i,M=/BlackBerry/i,j=/BB10/i,D=/Opera Mini/i,L=/\b(CriOS|Chrome)(?:.+)Mobile/i,B=/Mobile(?:.+)Firefox\b/i,F=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};
/*!
 * @pixi/settings - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var U,G,H,V,X,W,Y,z,q,K,Z,$,J,Q,tt,et,nt,rt,it=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=e.userAgent,r=n.split("[FBAN");void 0!==r[1]&&(n=r[0]),void 0!==(r=n.split("Twitter"))[1]&&(n=r[0]);var i=function(t){return function(e){return e.test(t)}}(n),o={apple:{phone:i(x)&&!i(k),ipod:i(S),tablet:!i(x)&&(i(O)||F(e))&&!i(k),universal:i(P),device:(i(x)||i(S)||i(O)||i(P)||F(e))&&!i(k)},amazon:{phone:i(I),tablet:!i(I)&&i(C),device:i(I)||i(C)},android:{phone:!i(k)&&i(I)||!i(k)&&i(R),tablet:!i(k)&&!i(I)&&!i(R)&&(i(C)||i(A)),device:!i(k)&&(i(I)||i(C)||i(R)||i(A))||i(/\bokhttp\b/i)},windows:{phone:i(k),tablet:i(N),device:i(k)||i(N)},other:{blackberry:i(M),blackberry10:i(j),opera:i(D),firefox:i(B),chrome:i(L),device:i(M)||i(j)||i(D)||i(B)||i(L)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(self.navigator);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(U||(U={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(G||(G={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(H||(H={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(V||(V={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(X||(X={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(W||(W={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Y||(Y={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.FLOAT=5126]="FLOAT",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(z||(z={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(q||(q={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(K||(K={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Z||(Z={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}($||($={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(J||(J={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Q||(Q={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(tt||(tt={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(et||(et={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(nt||(nt={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(rt||(rt={}));$.POW2;
/*!
 * @pixi/sprite - v6.0.4
 * Compiled Tue, 11 May 2021 18:00:23 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ot=1,at=(function(t){var e=!0;if(it.tablet||it.phone){var n;if(it.apple.device)if(n=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(n[1],10)<11&&(e=!1);if(it.android.device)if(n=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(n[1],10)<7&&(e=!1)}}(32),tt.AUTO,Z.CLAMP,K.LINEAR,et.HIGH,it.apple.device?et.HIGH:et.MEDIUM,it.apple.device,!1),st=function(t,e){return(st=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var ut=new i.g,ct=new Uint16Array([0,1,2,0,2,3]),lt=function(t){function e(e){var n=t.call(this)||this;return n._anchor=new i.e(n._onAnchorUpdate,n,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=s.b.NORMAL,n._cachedTint=16777215,n.uvs=null,n.texture=e||o.db.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.indices=ct,n.pluginName="batch",n.isSprite=!0,n._roundPixels=at,n}return function(t,e){function n(){this.constructor=t}st(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Object(a.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Object(a.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,n=e.a,r=e.b,i=e.c,o=e.d,a=e.tx,s=e.ty,u=this.vertexData,c=t.trim,l=t.orig,h=this._anchor,f=0,p=0,d=0,y=0;if(c?(f=(p=c.x-h._x*l.width)+c.width,d=(y=c.y-h._y*l.height)+c.height):(f=(p=-h._x*l.width)+l.width,d=(y=-h._y*l.height)+l.height),u[0]=n*p+i*y+a,u[1]=o*y+r*p+s,u[2]=n*f+i*y+a,u[3]=o*y+r*f+s,u[4]=n*f+i*d+a,u[5]=o*d+r*f+s,u[6]=n*p+i*d+a,u[7]=o*d+r*p+s,this._roundPixels)for(var m=ot,v=0;v<u.length;++v)u[v]=Math.round((u[v]*m|0)/m)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,n=t.orig,r=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,c=i.tx,l=i.ty,h=-r._x*n.width,f=h+n.width,p=-r._y*n.height,d=p+n.height;e[0]=o*h+s*p+c,e[1]=u*p+a*h+l,e[2]=o*f+s*p+c,e[3]=u*p+a*f+l,e[4]=o*f+s*d+c,e[5]=u*d+a*f+l,e[6]=o*h+s*d+c,e[7]=u*d+a*h+l},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new i.j),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,ut);var e=this._texture.orig.width,n=this._texture.orig.height,r=-e*this.anchor.x,i=0;return ut.x>=r&&ut.x<r+e&&(i=-n*this.anchor.y,ut.y>=i&&ut.y<i+n)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var n="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!n)}this._texture=null},e.from=function(t,n){return new e(t instanceof o.db?t:o.db.from(t,n))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=Object(a.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=Object(a.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||o.db.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(c.b);const ht=new i.d,ft=new Uint16Array([0,1,2,0,2,3]);class pt extends lt{__init(){this.color=new E}__init2(){this.maskSprite=null}__init3(){this.maskVertexData=null}__init4(){this.uvs=null}__init5(){this.indices=ft}__init6(){this.animState=null}__init7(){this.blendAddUnity=!1}constructor(t){super(t),pt.prototype.__init.call(this),pt.prototype.__init2.call(this),pt.prototype.__init3.call(this),pt.prototype.__init4.call(this),pt.prototype.__init5.call(this),pt.prototype.__init6.call(this),pt.prototype.__init7.call(this),this.pluginName="batchHeaven",this.texture.valid&&this._onTextureUpdate()}get _tintRGB(){return this.color.updateTransform(),16777215&this.color.lightRgba}set _tintRGB(t){}get tint(){return this.color?this.color.tintBGR:16777215}set tint(t){this.color&&(this.color.tintBGR=t)}_onTextureUpdate(){const t=this;t._textureID=-1,t._textureTrimmedID=-1;const e=t._texture;e.polygon?(this.uvs=e.polygon.uvs,this.indices=e.polygon.indices):(this.uvs=e._uvs.uvsFloat32,this.indices=ft),this._cachedTint=16777215,this.color&&(this.color.pma=t._texture.baseTexture.premultipliedAlpha),t._width&&(this.scale.x=Object(a.sign)(this.scale.x)*t._width/t._texture.orig.width),t._height&&(this.scale.y=Object(a.sign)(this.scale.y)*t._height/t._texture.orig.height)}_render(t){this.color.alpha=this.worldAlpha,this.color.updateTransform(),super._render(t)}_calculateBounds(){const t=this,e=t.polygon,n=t.trim,r=t.orig;e||n&&(n.width!==r.width||n.height!==r.height)?(this.calculateTrimmedVertices(),this._bounds.addQuad(t.vertexTrimmedData)):(this.calculateVertices(),this._bounds.addQuad(t.vertexData))}calculateVertices(){const t=this,e=this.transform,n=t._texture;if(t._transformID===e._worldID&&t._textureID===n._updateID)return;t._transformID=e._worldID,t._textureID=n._updateID;const r=this.transform.worldTransform,i=r.a,o=r.b,a=r.c,s=r.d,u=r.tx,c=r.ty,l=t._anchor,h=n.orig;if(n.polygon){const e=n.polygon.vertices,r=e.length;t.vertexData.length!==r&&(t.vertexData=new Float32Array(r));const f=t.vertexData,p=-l._x*h.width,d=-l._y*h.height;for(let t=0;t<r;t+=2){const n=e[t]+p,r=e[t+1]+d;f[t]=n*i+r*a+u,f[t+1]=n*o+r*s+c}}else{const e=t.vertexData,r=n.trim;let f=0,p=0,d=0,y=0;r?(p=r.x-l._x*h.width,f=p+r.width,y=r.y-l._y*h.height,d=y+r.height):(p=-l._x*h.width,f=p+h.width,y=-l._y*h.height,d=y+h.height),e[0]=i*p+a*y+u,e[1]=s*y+o*p+c,e[2]=i*f+a*y+u,e[3]=s*y+o*f+c,e[4]=i*f+a*d+u,e[5]=s*d+o*f+c,e[6]=i*p+a*d+u,e[7]=s*d+o*p+c}}calculateMaskVertices(){const t=this.maskSprite,e=t.texture,n=e.orig,r=t.anchor;if(!e.valid)return;e.uvMatrix||(e.uvMatrix=new o.fb(e,0)),e.uvMatrix.update(),t.transform.worldTransform.copyTo(ht),ht.invert(),ht.scale(1/n.width,1/n.height),ht.translate(r.x,r.y),ht.prepend(e.uvMatrix.mapCoord);const i=this.vertexData,a=i.length;this.maskVertexData&&this.maskVertexData.length===a||(this.maskVertexData=new Float32Array(a));const s=this.maskVertexData;for(let t=0;t<a;t+=2)s[t]=i[t]*ht.a+i[t+1]*ht.c+ht.tx,s[t+1]=i[t]*ht.b+i[t+1]*ht.d+ht.ty}destroy(t){this.animState&&(this.animState.stop(),this.animState=null),super.destroy(t)}}class dt extends o.C{constructor(t=!1){super(),this._buffer=new o.p(null,t,!1),this._indexBuffer=new o.p(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,s.r.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,s.r.FLOAT).addAttribute("aLight",this._buffer,4,!0,s.r.UNSIGNED_BYTE).addAttribute("aDark",this._buffer,4,!0,s.r.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,s.r.FLOAT).addIndex(this._indexBuffer)}}h.d;o.S.registerPlugin("batchHeaven",class{static create(t){const{vertex:e,fragment:n,vertexSize:r,geometryClass:i}=Object.assign({vertex:"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aLight, aDark;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vLight, vDark;\nvarying float vTextureId;\n\nvoid main(void){\ngl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\nvTextureCoord = aTextureCoord;\nvTextureId = aTextureId;\nvLight = aLight * tint;\nvDark = vec4(aDark.rgb * tint.rgb, aDark.a);\n}\n",fragment:"\nvarying vec2 vTextureCoord;\nvarying vec4 vLight, vDark;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void) {\nvec4 color;\nfloat textureId = floor(vTextureId+0.5);\n%forloop%\ngl_FragColor.a = color.a * vLight.a;\ngl_FragColor.rgb = ((color.a - 1.0) * vDark.a + 1.0 - color.rgb) * vDark.rgb + color.rgb * vLight.rgb;\n}",geometryClass:dt,vertexSize:7},t);return class extends o.a{constructor(t){super(t),this.shaderGenerator=new o.m(e,n),this.geometryClass=i,this.vertexSize=r}packInterleavedGeometry(t,e,n,r,i){const{uint32View:o,float32View:s}=e;let u=-1,c=0;if(t.color)u=t.color.lightRgba,c=t.color.darkRgba;else{const e=Math.min(t.worldAlpha,1);u=e<1&&t._texture.baseTexture.premultiplyAlpha?Object(a.premultiplyTint)(t._tintRGB,e):t._tintRGB+(255*e<<24)}w&&t.blendAddUnity&&(u&=16777215);const l=r/this.vertexSize,h=t.uvs,f=t.indices,p=t.vertexData,d=t._texture.baseTexture._batchLocation;for(let t=0;t<p.length;t+=2)s[r++]=p[t],s[r++]=p[t+1],s[r++]=h[t],s[r++]=h[t+1],o[r++]=u,o[r++]=c,s[r++]=d;for(let t=0;t<f.length;t++)n[i++]=l+f[t]}buildDrawCalls(t,e,n){const{_bufferedElements:r,_attributeBuffer:i,_indexBuffer:u,vertexSize:c}=this,l=o.a._drawCallPool;let h=this._dcIndex,f=this._aIndex,p=this._iIndex,d=l[h];d.start=this._iIndex,d.texArray=t;for(let o=e;o<n;++o){const n=r[o],y=n._texture.baseTexture;let m=a.premultiplyBlendMode[y.alphaMode?1:0][n.blendMode];w&&(n.blendAddUnity=m===s.b.ADD&&y.alphaMode,n.blendAddUnity&&(m=s.b.NORMAL)),r[o]=null,e<o&&d.blend!==m&&(d.size=p-d.start,e=o,d=l[++h],d.texArray=t,d.start=p),this.packInterleavedGeometry(n,i,u,f,p),f+=n.vertexData.length/2*c,p+=n.indices.length,d.blend=m}e<n&&(d.size=p-d.start,++h),this._dcIndex=h,this._aIndex=f,this._iIndex=p}}}}.create({})),o.S.registerPlugin("batchMasked",_.create({})),function(){function t(){return this.color.tintBGR}function e(t){this.color.tintBGR=t}function n(){return this.color.updateTransform(),16777215&this.color.lightRgba}c.b.prototype.convertToHeaven=function(){};const r=pt.prototype;l.a.prototype.convertToHeaven=function(){if(!this.color)return Object.defineProperty(this,"tint",{get:t,set:e,enumerable:!0,configurable:!0}),Object.defineProperty(this,"_tintRGB",{get:n,enumerable:!0,configurable:!0}),this._onTextureUpdate=r._onTextureUpdate,this._render=r._render,this._calculateBounds=r._calculateBounds,this.calculateVertices=r.calculateVertices,this._onTextureUpdate=r._onTextureUpdate,this.calculateMaskVertices=r.calculateMaskVertices,this.destroy=pt.prototype.destroy,this.color=new E,this.pluginName="batchHeaven",this._texture.valid?this._onTextureUpdate():(this._texture.off("update",this._onTextureUpdate),this._texture.on("update",this._onTextureUpdate,this)),this},c.b.prototype.convertSubtreeToHeaven=function(){this.convertToHeaven&&this.convertToHeaven();for(let t=0;t<this.children.length;t++)this.children[t].convertSubtreeToHeaven()}}();r.a.prototype._processFrames=function(t){const e=this.data.meta;let n=t;const a=r.a.BATCH_SIZE;for(;n-t<a&&n<this._frameKeys.length;){const t=this._frameKeys[n],r=this._frames[t],a=r.frame;if(a){let n=null,s=null;const u=!1!==r.trimmed&&r.sourceSize?r.sourceSize:r.frame,c=new i.j(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);if(n=r.rotated?new i.j(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):new i.j(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),!1!==r.trimmed&&r.spriteSourceSize&&(s=new i.j(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[t]=new o.db(this.baseTexture,n,c,s,r.rotated?2:0,r.anchor),r.vertices){const n=new Float32Array(2*r.vertices.length);for(let t=0;t<r.vertices.length;t++)n[2*t]=Math.floor(r.vertices[t][0])/this.resolution,n[2*t+1]=Math.floor(r.vertices[t][1])/this.resolution;const i=new Float32Array(2*r.verticesUV.length);for(let t=0;t<r.verticesUV.length;t++)i[2*t]=r.verticesUV[t][0]/e.size.w,i[2*t+1]=r.verticesUV[t][1]/e.size.h;const o=new Uint16Array(3*r.triangles.length);for(let t=0;t<r.triangles.length;t++)o[3*t]=r.triangles[t][0],o[3*t+1]=r.triangles[t][1],o[3*t+2]=r.triangles[t][2];this.textures[t].polygon=new f(n,i,o)}o.db.addToCache(this.textures[t],t)}n++}}},"./node_modules/pixi-spine/lib/all.es.js":function(t,e,n){"use strict";n.d(e,"d",(function(){return Gi})),n.d(e,"a",(function(){return Bt})),n.d(e,"b",(function(){return st})),n.d(e,"c",(function(){return lt})),n.d(e,"e",(function(){return I}));var r={};n.r(r),n.d(r,"Animation",(function(){return pt})),n.d(r,"AnimationState",(function(){return kt})),n.d(r,"AnimationStateAdapter",(function(){return Dt})),n.d(r,"AnimationStateData",(function(){return Lt})),n.d(r,"AtlasAttachmentLoader",(function(){return Bt})),n.d(r,"Attachment",(function(){return rt})),n.d(r,"AttachmentTimeline",(function(){return Tt})),n.d(r,"Bone",(function(){return Ft})),n.d(r,"BoneData",(function(){return Ut})),n.d(r,"BoundingBoxAttachment",(function(){return ot})),n.d(r,"ClippingAttachment",(function(){return at})),n.d(r,"ColorTimeline",(function(){return bt})),n.d(r,"ConstraintData",(function(){return Gt})),n.d(r,"CurveTimeline",(function(){return yt})),n.d(r,"DeformTimeline",(function(){return xt})),n.d(r,"DrawOrderTimeline",(function(){return Ot})),n.d(r,"Event",(function(){return Ht})),n.d(r,"EventData",(function(){return Vt})),n.d(r,"EventQueue",(function(){return Mt})),n.d(r,"EventTimeline",(function(){return St})),n.d(r,"EventType",(function(){return dt})),n.d(r,"IkConstraint",(function(){return Xt})),n.d(r,"IkConstraintData",(function(){return Wt})),n.d(r,"IkConstraintTimeline",(function(){return Pt})),n.d(r,"JitterEffect",(function(){return ht})),n.d(r,"MeshAttachment",(function(){return st})),n.d(r,"PathAttachment",(function(){return ut})),n.d(r,"PathConstraint",(function(){return zt})),n.d(r,"PathConstraintData",(function(){return Yt})),n.d(r,"PathConstraintMixTimeline",(function(){return Ct})),n.d(r,"PathConstraintPositionTimeline",(function(){return At})),n.d(r,"PathConstraintSpacingTimeline",(function(){return It})),n.d(r,"PointAttachment",(function(){return ct})),n.d(r,"RegionAttachment",(function(){return lt})),n.d(r,"RotateTimeline",(function(){return mt})),n.d(r,"ScaleTimeline",(function(){return _t})),n.d(r,"ShearTimeline",(function(){return gt})),n.d(r,"Skeleton",(function(){return Zt})),n.d(r,"SkeletonBinary",(function(){return ne})),n.d(r,"SkeletonBounds",(function(){return oe})),n.d(r,"SkeletonData",(function(){return $t})),n.d(r,"SkeletonJson",(function(){return ae})),n.d(r,"Skin",(function(){return ee})),n.d(r,"SkinEntry",(function(){return te})),n.d(r,"Slot",(function(){return qt})),n.d(r,"SlotData",(function(){return Jt})),n.d(r,"SpacingMode",(function(){return jt})),n.d(r,"Spine",(function(){return ue})),n.d(r,"SwirlEffect",(function(){return ft})),n.d(r,"TimelineType",(function(){return nt})),n.d(r,"TrackEntry",(function(){return Nt})),n.d(r,"TransformConstraint",(function(){return Kt})),n.d(r,"TransformConstraintData",(function(){return Qt})),n.d(r,"TransformConstraintTimeline",(function(){return Rt})),n.d(r,"TranslateTimeline",(function(){return vt})),n.d(r,"TwoColorTimeline",(function(){return Et})),n.d(r,"VertexAttachment",(function(){return it}));var i={};n.r(i),n.d(i,"Animation",(function(){return Te})),n.d(i,"AnimationState",(function(){return Ge})),n.d(i,"AnimationStateAdapter2",(function(){return We})),n.d(i,"AnimationStateData",(function(){return Ye})),n.d(i,"AtlasAttachmentLoader",(function(){return ze})),n.d(i,"Attachment",(function(){return fe})),n.d(i,"AttachmentTimeline",(function(){return Ce})),n.d(i,"Bone",(function(){return qe})),n.d(i,"BoneData",(function(){return Ke})),n.d(i,"BoundingBoxAttachment",(function(){return de})),n.d(i,"ClippingAttachment",(function(){return ye})),n.d(i,"ColorTimeline",(function(){return Ae})),n.d(i,"CurveTimeline",(function(){return xe})),n.d(i,"DeformTimeline",(function(){return Ne})),n.d(i,"DrawOrderTimeline",(function(){return je})),n.d(i,"Event",(function(){return Ze})),n.d(i,"EventData",(function(){return $e})),n.d(i,"EventQueue",(function(){return Ve})),n.d(i,"EventTimeline",(function(){return Me})),n.d(i,"EventType",(function(){return we})),n.d(i,"IkConstraint",(function(){return Je})),n.d(i,"IkConstraintData",(function(){return Qe})),n.d(i,"IkConstraintTimeline",(function(){return De})),n.d(i,"JitterEffect",(function(){return be})),n.d(i,"MeshAttachment",(function(){return me})),n.d(i,"PathAttachment",(function(){return ve})),n.d(i,"PathConstraint",(function(){return en})),n.d(i,"PathConstraintData",(function(){return tn})),n.d(i,"PathConstraintMixTimeline",(function(){return Ue})),n.d(i,"PathConstraintPositionTimeline",(function(){return Be})),n.d(i,"PathConstraintSpacingTimeline",(function(){return Fe})),n.d(i,"PointAttachment",(function(){return _e})),n.d(i,"RegionAttachment",(function(){return ge})),n.d(i,"RotateTimeline",(function(){return Se})),n.d(i,"ScaleTimeline",(function(){return Pe})),n.d(i,"ShearTimeline",(function(){return Re})),n.d(i,"Skeleton",(function(){return on})),n.d(i,"SkeletonBounds",(function(){return an})),n.d(i,"SkeletonData",(function(){return sn})),n.d(i,"SkeletonJson",(function(){return hn})),n.d(i,"Skin",(function(){return ln})),n.d(i,"Slot",(function(){return nn})),n.d(i,"SlotData",(function(){return un})),n.d(i,"SpacingMode",(function(){return Xe})),n.d(i,"Spine",(function(){return pn})),n.d(i,"SwirlEffect",(function(){return Ee})),n.d(i,"TimelineType",(function(){return he})),n.d(i,"TrackEntry",(function(){return He})),n.d(i,"TransformConstraint",(function(){return rn})),n.d(i,"TransformConstraintData",(function(){return cn})),n.d(i,"TransformConstraintTimeline",(function(){return Le})),n.d(i,"TranslateTimeline",(function(){return Oe})),n.d(i,"TwoColorTimeline",(function(){return Ie})),n.d(i,"VertexAttachment",(function(){return pe}));var o={};n.r(o),n.d(o,"AlphaTimeline",(function(){return cr})),n.d(o,"Animation",(function(){return Pn})),n.d(o,"AnimationState",(function(){return Er})),n.d(o,"AnimationStateAdapter",(function(){return Sr})),n.d(o,"AnimationStateData",(function(){return Mr})),n.d(o,"AtlasAttachmentLoader",(function(){return jr})),n.d(o,"Attachment",(function(){return vn})),n.d(o,"AttachmentTimeline",(function(){return fr})),n.d(o,"Bone",(function(){return Dr})),n.d(o,"BoneData",(function(){return Lr})),n.d(o,"BoundingBoxAttachment",(function(){return gn})),n.d(o,"ClippingAttachment",(function(){return bn})),n.d(o,"ConstraintData",(function(){return Br})),n.d(o,"CurveTimeline",(function(){return qn})),n.d(o,"CurveTimeline1",(function(){return Kn})),n.d(o,"CurveTimeline2",(function(){return Zn})),n.d(o,"DeformTimeline",(function(){return pr})),n.d(o,"DrawOrderTimeline",(function(){return yr})),n.d(o,"Event",(function(){return Fr})),n.d(o,"EventData",(function(){return Ur})),n.d(o,"EventQueue",(function(){return wr})),n.d(o,"EventTimeline",(function(){return dr})),n.d(o,"EventType",(function(){return mn})),n.d(o,"IkConstraint",(function(){return Gr})),n.d(o,"IkConstraintData",(function(){return Hr})),n.d(o,"IkConstraintTimeline",(function(){return mr})),n.d(o,"JitterEffect",(function(){return Sn})),n.d(o,"MeshAttachment",(function(){return En})),n.d(o,"PathAttachment",(function(){return Tn})),n.d(o,"PathConstraint",(function(){return Xr})),n.d(o,"PathConstraintData",(function(){return Vr})),n.d(o,"PathConstraintMixTimeline",(function(){return br})),n.d(o,"PathConstraintPositionTimeline",(function(){return _r})),n.d(o,"PathConstraintSpacingTimeline",(function(){return gr})),n.d(o,"PointAttachment",(function(){return wn})),n.d(o,"RGB2Timeline",(function(){return hr})),n.d(o,"RGBA2Timeline",(function(){return lr})),n.d(o,"RGBATimeline",(function(){return sr})),n.d(o,"RGBTimeline",(function(){return ur})),n.d(o,"RegionAttachment",(function(){return xn})),n.d(o,"RotateTimeline",(function(){return $n})),n.d(o,"ScaleTimeline",(function(){return er})),n.d(o,"ScaleXTimeline",(function(){return nr})),n.d(o,"ScaleYTimeline",(function(){return rr})),n.d(o,"ShearTimeline",(function(){return ir})),n.d(o,"ShearXTimeline",(function(){return or})),n.d(o,"ShearYTimeline",(function(){return ar})),n.d(o,"Skeleton",(function(){return zr})),n.d(o,"SkeletonBinary",(function(){return Qr})),n.d(o,"SkeletonBounds",(function(){return Oi})),n.d(o,"SkeletonData",(function(){return qr})),n.d(o,"SkeletonJson",(function(){return Pi})),n.d(o,"Skin",(function(){return Jr})),n.d(o,"SkinEntry",(function(){return $r})),n.d(o,"Slot",(function(){return Wr})),n.d(o,"SlotData",(function(){return Kr})),n.d(o,"SpacingMode",(function(){return xr})),n.d(o,"Spine",(function(){return Mi})),n.d(o,"SwirlEffect",(function(){return On})),n.d(o,"Timeline",(function(){return zn})),n.d(o,"TrackEntry",(function(){return Tr})),n.d(o,"TransformConstraint",(function(){return Yr})),n.d(o,"TransformConstraintData",(function(){return Zr})),n.d(o,"TransformConstraintTimeline",(function(){return vr})),n.d(o,"TranslateTimeline",(function(){return Jn})),n.d(o,"TranslateXTimeline",(function(){return Qn})),n.d(o,"TranslateYTimeline",(function(){return tr})),n.d(o,"VertexAttachment",(function(){return _n}));var a,s=n("./node_modules/@pixi/loaders/dist/esm/loaders.js"),u=n("./node_modules/@pixi/core/dist/esm/core.js"),c=n("./node_modules/@pixi/constants/dist/esm/constants.js"),l=n("./node_modules/@pixi/math/dist/esm/math.js"),h=n("./node_modules/@pixi/display/dist/esm/display.js"),f=n("./node_modules/@pixi/sprite/dist/esm/sprite.js"),p=n("./node_modules/@pixi/mesh-extras/dist/esm/mesh-extras.js"),d=n("./node_modules/@pixi/graphics/dist/esm/graphics.js"),y=n("./node_modules/@pixi/utils/dist/esm/utils.js");!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"}(a||(a={}));var m,v,_,g,b,E=function(){function t(t,e,n,r){void 0===e&&(e=new Array),void 0===n&&(n=0),void 0===r&&(r=new DataView(t.buffer)),this.strings=e,this.index=n,this.buffer=r}return t.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},t.prototype.readUnsignedByte=function(){return this.buffer.getUint8(this.index++)},t.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},t.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},t.prototype.readInt=function(t){var e=this.readByte(),n=127&e;return 0!=(128&e)&&(n|=(127&(e=this.readByte()))<<7,0!=(128&e)&&(n|=(127&(e=this.readByte()))<<14,0!=(128&e)&&(n|=(127&(e=this.readByte()))<<21,0!=(128&e)&&(n|=(127&(e=this.readByte()))<<28)))),t?n:n>>>1^-(1&n)},t.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},t.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",n=0;n<t;){var r=this.readByte();switch(r>>4){case 12:case 13:e+=String.fromCharCode((31&r)<<6|63&this.readByte()),n+=2;break;case 14:e+=String.fromCharCode((15&r)<<12|(63&this.readByte())<<6|63&this.readByte()),n+=3;break;default:e+=String.fromCharCode(r),n++}}return e},t.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},t.prototype.readBoolean=function(){return 0!=this.readByte()},t}();!function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(m||(m={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(v||(v={})),function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(_||(_={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(g||(g={})),function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(b||(b={}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var T,w,x=function(t,e){return(x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function S(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}x(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function O(t){switch(t.toLowerCase()){case"nearest":return T.Nearest;case"linear":return T.Linear;case"mipmap":return T.MipMap;case"mipmapnearestnearest":return T.MipMapNearestNearest;case"mipmaplinearnearest":return T.MipMapLinearNearest;case"mipmapnearestlinear":return T.MipMapNearestLinear;case"mipmaplinearlinear":return T.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}}!function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(T||(T={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(w||(w={}));var P,R=function(){function t(){this.size=null,this.names=null,this.values=null}return Object.defineProperty(t.prototype,"width",{get:function(){var t=this.texture;return t.trim?t.trim.width:t.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t=this.texture;return t.trim?t.trim.height:t.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this.spineOffsetY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalWidth",{get:function(){return this.texture.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalHeight",{get:function(){return this.texture.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"degrees",{get:function(){return(360-45*this.texture.rotate)%360},enumerable:!1,configurable:!0}),t}(),A=function(){this.x=0,this.y=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.rotate=0,this.index=0},I=function(){function t(t,e,n){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,n)}return t.prototype.addTexture=function(t,e){for(var n=this.pages,r=null,i=0;i<n.length;i++)if(n[i].baseTexture===e.baseTexture){r=n[i];break}if(null===r){(r=new k).name="texturePage";var o=e.baseTexture;r.width=o.realWidth,r.height=o.realHeight,r.baseTexture=o,r.minFilter=r.magFilter=T.Nearest,r.uWrap=w.ClampToEdge,r.vWrap=w.ClampToEdge,n.push(r)}var a=new N;return a.name=t,a.page=r,a.texture=e,a.index=-1,this.regions.push(a),a},t.prototype.addTextureHash=function(t,e){for(var n in t)t.hasOwnProperty(n)&&this.addTexture(e&&-1!==n.indexOf(".")?n.substr(0,n.lastIndexOf(".")):n,t[n])},t.prototype.addSpineAtlas=function(t,e,n){return this.load(t,e,n)},t.prototype.load=function(t,e,n){var r=this;if(null==e)throw new Error("textureLoader cannot be null.");var i=new C(t),o=new Array(4),a=null,s={},h=null;s.size=function(){a.width=parseInt(o[1]),a.height=parseInt(o[2])},s.format=function(){},s.filter=function(){a.minFilter=O(o[1]),a.magFilter=O(o[2])},s.repeat=function(){-1!=o[1].indexOf("x")&&(a.uWrap=w.Repeat),-1!=o[1].indexOf("y")&&(a.vWrap=w.Repeat)},s.pma=function(){a.pma="true"==o[1]};for(var f={xy:function(){h.x=parseInt(o[1]),h.y=parseInt(o[2])},size:function(){h.width=parseInt(o[1]),h.height=parseInt(o[2])},bounds:function(){h.x=parseInt(o[1]),h.y=parseInt(o[2]),h.width=parseInt(o[3]),h.height=parseInt(o[4])},offset:function(){h.offsetX=parseInt(o[1]),h.offsetY=parseInt(o[2])},orig:function(){h.originalWidth=parseInt(o[1]),h.originalHeight=parseInt(o[2])},offsets:function(){h.offsetX=parseInt(o[1]),h.offsetY=parseInt(o[2]),h.originalWidth=parseInt(o[3]),h.originalHeight=parseInt(o[4])},rotate:function(){var t=o[1],e=0;e="true"==t.toLocaleLowerCase()?6:"false"==t.toLocaleLowerCase()?0:(720-parseFloat(t))%360/45,h.rotate=e},index:function(){h.index=parseInt(o[1])}},p=i.readLine();null!=p&&0==p.trim().length;)p=i.readLine();for(;null!=p&&0!=p.trim().length&&0!=i.readEntry(o,p);)p=i.readLine();var d=function(){for(;;){if(null==p)return n&&n(r);if(0==p.trim().length)a=null,p=i.readLine();else{if(null===a){for((a=new k).name=p.trim();0!=i.readEntry(o,p=i.readLine());){(v=s[o[0]])&&v()}r.pages.push(a),e(a.name,(function(t){if(null===t)return r.pages.splice(r.pages.indexOf(a),1),n&&n(null);a.baseTexture=t,a.pma&&(t.alphaMode=c.a.PMA),t.valid||t.setSize(a.width,a.height),r.pages.push(a),a.setFilters(),a.width&&a.height||(a.width=t.realWidth,a.height=t.realHeight,a.width&&a.height||console.log("ERROR spine atlas page "+a.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),d()})),r.pages.push(a);break}h=new A;var t=new N;t.name=p,t.page=a;for(var y=null,m=null;;){var v,_=i.readEntry(o,p=i.readLine());if(0==_)break;if(v=f[o[0]])v();else{null==y&&(y=[],m=[]),y.push(o[0]);for(var g=[],b=0;b<_;b++)g.push(parseInt(o[b+1]));m.push(g)}}0==h.originalWidth&&0==h.originalHeight&&(h.originalWidth=h.width,h.originalHeight=h.height);var E=a.baseTexture.resolution;h.x/=E,h.y/=E,h.width/=E,h.height/=E,h.originalWidth/=E,h.originalHeight/=E,h.offsetX/=E,h.offsetY/=E;var T=h.rotate%4!=0,w=new l.j(h.x,h.y,T?h.height:h.width,T?h.width:h.height),x=new l.j(0,0,h.originalWidth,h.originalHeight),S=new l.j(h.offsetX,h.originalHeight-h.height-h.offsetY,h.width,h.height);t.texture=new u.db(t.page.baseTexture,w,x,S,h.rotate),t.index=h.index,t.texture.updateUvs(),r.regions.push(t)}}};d()},t.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},t.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},t}(),C=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readEntry=function(t,e){if(null==e)return 0;if(0==(e=e.trim()).length)return 0;var n=e.indexOf(":");if(-1==n)return 0;t[0]=e.substr(0,n).trim();for(var r=1,i=n+1;;r++){var o=e.indexOf(",",i);if(-1==o)return t[r]=e.substr(i).trim(),r;if(t[r]=e.substr(i,o-i).trim(),i=o+1,4==r)return 4}},t}(),k=function(){function t(){this.minFilter=T.Nearest,this.magFilter=T.Nearest,this.uWrap=w.ClampToEdge,this.vWrap=w.ClampToEdge}return t.prototype.setFilters=function(){var t=this.baseTexture,e=this.minFilter;e==T.Linear?t.scaleMode=c.p.LINEAR:this.minFilter==T.Nearest?t.scaleMode=c.p.NEAREST:(t.mipmap=c.k.POW2,e==T.MipMapNearestNearest?t.scaleMode=c.p.NEAREST:t.scaleMode=c.p.LINEAR)},t}(),N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return S(e,t),e}(R),M=(P=new Float32Array(1),function(t){return P[0]=t,P[0]}),j=Math.fround||M,D=function(){function t(){this.array=new Array}return t.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},t.prototype.contains=function(t){return null!=this.array[0|t]},t.prototype.remove=function(t){this.array[0|t]=void 0},t.prototype.clear=function(){this.array.length=0},t}(),L=function(){function t(){this.entries={},this.size=0}return t.prototype.add=function(t){var e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)},t.prototype.addAll=function(t){for(var e=this.size,n=0,r=t.length;n<r;n++)this.add(t[n]);return e!=this.size},t.prototype.contains=function(t){return this.entries[t]},t.prototype.clear=function(){this.entries={},this.size=0},t}(),B=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.r=t,this.g=e,this.b=n,this.a=r}return t.prototype.set=function(t,e,n,r){return this.r=t,this.g=e,this.b=n,this.a=r,this.clamp()},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this},t.prototype.add=function(t,e,n,r){return this.r+=t,this.g+=e,this.b+=n,this.a+=r,this.clamp()},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t.rgba8888ToColor=function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255},t.rgb888ToColor=function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255},t.fromString=function(e){return(new t).setFromString(e)},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}(),F=function(){function t(){}return t.clamp=function(t,e,n){return t<e?e:t>n?n:t},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(t){return t>0?1:t<0?-1:0},t.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},t.randomTriangular=function(e,n){return t.randomTriangularWith(e,n,.5*(e+n))},t.randomTriangularWith=function(t,e,n){var r=Math.random(),i=e-t;return r<=(n-t)/i?t+Math.sqrt(r*i*(n-t)):e-Math.sqrt((1-r)*i*(e-n))},t.PI=3.1415927,t.PI2=2*t.PI,t.radiansToDegrees=180/t.PI,t.radDeg=t.radiansToDegrees,t.degreesToRadians=t.PI/180,t.degRad=t.degreesToRadians,t}(),U=function(t){function e(e){return t.call(this,e)||this}return S(e,t),e.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},e}(function(t){function e(e){var n=t.call(this)||this;return n.power=2,n.power=e,n}return S(e,t),e.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},e}(function(){function t(){}return t.prototype.apply=function(t,e,n){return t+(e-t)*this.applyInternal(n)},t}())),G=function(){function t(){}return t.arrayCopy=function(t,e,n,r,i){for(var o=e,a=r;o<e+i;o++,a++)n[a]=t[o]},t.arrayFill=function(t,e,n,r){for(var i=e;i<n;i++)t[i]=r},t.setArraySize=function(t,e,n){void 0===n&&(n=0);var r=t.length;if(r==e)return t;if(t.length=e,r<e)for(var i=r;i<e;i++)t[i]=n;return t},t.ensureArrayCapacity=function(e,n,r){return void 0===r&&(r=0),e.length>=n?e:t.setArraySize(e,n,r)},t.newArray=function(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var n=new Array(e),r=0;r<n.length;r++)n[r]=0;return n},t.newShortArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var n=new Array(e),r=0;r<n.length;r++)n[r]=0;return n},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t.toSinglePrecision=function(e){return t.SUPPORTS_TYPED_ARRAYS?j(e):e},t.webkit602BugfixHelper=function(t,e){},t.contains=function(t,e,n){for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1},t.enumValue=function(t,e){return t[e[0].toUpperCase()+e.slice(1)]},t.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t}(),H=(function(){function t(){}t.logBones=function(t){for(var e=0;e<t.bones.length;e++){var n=t.bones[e],r=n.matrix;console.log(n.data.name+", "+r.a+", "+r.b+", "+r.c+", "+r.d+", "+r.tx+", "+r.ty)}}}(),function(){function t(t){this.items=new Array,this.instantiator=t}return t.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},t.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)this.free(t[e])},t.prototype.clear=function(){this.items.length=0},t}()),V=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}(),X=(function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)}}(),function(){function t(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}t.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},t.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},t.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0}}(),!0),W=!1,Y=!0,z=0,q=[0,0,0],K=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.region=null,e.attachment=null,e}return S(e,t),e}(f.a),Z=function(t){function e(e,n,r,i,o){var a=t.call(this,e,n,r,i,o)||this;return a.region=null,a.attachment=null,a}return S(e,t),e}(p.d),$=function(t){function e(e){var n=t.call(this)||this;if(!e)throw new Error("The spineData param is required.");if("string"==typeof e)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');n.spineData=e,n.createSkeleton(e),n.slotContainers=[],n.tempClipContainers=[];for(var r=0,i=n.skeleton.slots.length;r<i;r++){var o=n.skeleton.slots[r],s=o.getAttachment(),u=n.newContainer();if(n.slotContainers.push(u),n.addChild(u),n.tempClipContainers.push(null),s)if(s.type===a.Region){var c=s.region.name,l=n.createSprite(o,s,c);o.currentSprite=l,o.currentSpriteName=c,u.addChild(l)}else if(s.type===a.Mesh){var h=n.createMesh(o,s);o.currentMesh=h,o.currentMeshId=s.id,o.currentMeshName=s.name,u.addChild(h)}else s.type===a.Clipping&&(n.createGraphics(o,s),u.addChild(o.clippingContainer),u.addChild(o.currentGraphics))}return n.tintRgb=new Float32Array([1,1,1]),n.autoUpdate=!0,n.visible=!0,n}return S(e,t),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,this.updateTransform=t?e.prototype.autoUpdateTransform:h.b.prototype.updateTransform)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return Object(y.rgb2hex)(this.tintRgb)},set:function(t){this.tintRgb=Object(y.hex2rgb)(t,this.tintRgb)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"delayLimit",{get:function(){return(void 0!==this.localDelayLimit?this.localDelayLimit:z)||Number.MAX_VALUE},enumerable:!1,configurable:!0}),e.prototype.update=function(t){var e=this.delayLimit;if(t>e&&(t=e),this.state.update(t),this.state.apply(this.skeleton),this.skeleton){this.skeleton.updateWorldTransform();var n=this.skeleton.slots,r=this.color,i=null,o=null;r?(i=r.light,o=r.dark):i=this.tintRgb;for(var s=0,u=n.length;s<u;s++){var c=(A=n[s]).getAttachment(),h=this.slotContainers[s];if(c){var f=null,p=c.color;switch(c.type){case a.Region:var d=c.region;if(d){A.currentMesh&&(A.currentMesh.visible=!1,A.currentMesh=null,A.currentMeshId=void 0,A.currentMeshName=void 0);var m=d;if(A.currentSpriteName&&A.currentSpriteName===m.name)A.currentSpriteName!==m.name||A.hackRegion||this.setSpriteRegion(c,A.currentSprite,d);else{var v=m.name;if(A.currentSprite&&(A.currentSprite.visible=!1),A.sprites=A.sprites||{},void 0!==A.sprites[v])A.sprites[v].visible=!0;else{var _=this.createSprite(A,c,v);h.addChild(_)}A.currentSprite=A.sprites[v],A.currentSpriteName=v}}h.transform.setFromMatrix(A.bone.matrix),A.currentSprite.color?f=A.currentSprite.color:(q[0]=i[0]*A.color.r*p.r,q[1]=i[1]*A.color.g*p.g,q[2]=i[2]*A.color.b*p.b,A.currentSprite.tint=Object(y.rgb2hex)(q)),A.currentSprite.blendMode=A.blendMode;break;case a.Mesh:if(A.currentSprite){A.currentSprite.visible=!1,A.currentSprite=null,A.currentSpriteName=void 0;var g=new l.m;g._parentID=-1,g._worldID=h.transform._worldID,h.transform=g}var b=c.id;if(!A.currentMeshId||A.currentMeshId!==b){var E=b;if(A.currentMesh&&(A.currentMesh.visible=!1),A.meshes=A.meshes||{},void 0!==A.meshes[E])A.meshes[E].visible=!0;else{var T=this.createMesh(A,c);h.addChild(T)}A.currentMesh=A.meshes[E],A.currentMeshName=c.name,A.currentMeshId=E}c.computeWorldVerticesOld(A,A.currentMesh.vertices),A.currentMesh.color?f=A.currentMesh.color:(q[0]=i[0]*A.color.r*p.r,q[1]=i[1]*A.color.g*p.g,q[2]=i[2]*A.color.b*p.b,A.currentMesh.tint=Object(y.rgb2hex)(q)),A.currentMesh.blendMode=A.blendMode;break;case a.Clipping:A.currentGraphics||(this.createGraphics(A,c),h.addChild(A.clippingContainer),h.addChild(A.currentGraphics)),this.updateGraphics(A,c),h.alpha=1,h.visible=!0;continue;default:h.visible=!1;continue}if(h.visible=!0,f){var w=A.color.r*p.r,x=A.color.g*p.g,S=A.color.b*p.b;f.setLight(i[0]*w+o[0]*(1-w),i[1]*x+o[1]*(1-x),i[2]*S+o[2]*(1-S)),A.darkColor?(w=A.darkColor.r,x=A.darkColor.g,S=A.darkColor.b):(w=0,x=0,S=0),f.setDark(i[0]*w+o[0]*(1-w),i[1]*x+o[1]*(1-x),i[2]*S+o[2]*(1-S))}h.alpha=A.color.a}else h.visible=!1}var O=this.skeleton.drawOrder,P=null,R=null;for(s=0,u=O.length;s<u;s++){var A=n[O[s].data.index];h=this.slotContainers[O[s].data.index];if(R||null!==h.parent&&h.parent!==this&&(h.parent.removeChild(h),h.parent=this),A.currentGraphics&&A.getAttachment())R=A.clippingContainer,P=A.getAttachment(),R.children.length=0,this.children[s]=h,P.endSlot===A.data&&(P.endSlot=null);else if(R){var I=this.tempClipContainers[s];I||((I=this.tempClipContainers[s]=this.newContainer()).visible=!1),this.children[s]=I,h.parent=null,R.addChild(h),P.endSlot==A.data&&(R.renderable=!0,R=null,P=null)}else this.children[s]=h}}},e.prototype.setSpriteRegion=function(t,e,n){e.attachment===t&&e.region===n||(e.region=n,e.attachment=t,e.texture=n.texture,e.rotation=t.rotation*F.degRad,e.position.x=t.x,e.position.y=t.y,e.alpha=t.color.a,n.size?(e.scale.x=n.size.width/n.originalWidth,e.scale.y=-n.size.height/n.originalHeight):(e.scale.x=t.scaleX*t.width/n.originalWidth,e.scale.y=-t.scaleY*t.height/n.originalHeight))},e.prototype.setMeshRegion=function(t,e,n){e.attachment===t&&e.region===n||(e.region=n,e.attachment=t,e.texture=n.texture,n.texture.updateUvs(),e.uvBuffer.update(t.regionUVs))},e.prototype.autoUpdateTransform=function(){if(Y){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t)}else this.lastTime=0;h.b.prototype.updateTransform.call(this)},e.prototype.createSprite=function(t,e,n){var r=e.region;t.hackAttachment===e&&(r=t.hackRegion);var i=r.texture,o=this.newSprite(i);return o.anchor.set(.5),this.setSpriteRegion(e,o,e.region),t.sprites=t.sprites||{},t.sprites[n]=o,o},e.prototype.createMesh=function(t,e){var n=e.region;t.hackAttachment===e&&(n=t.hackRegion,t.hackAttachment=null,t.hackRegion=null);var r=this.newMesh(n.texture,new Float32Array(e.regionUVs.length),e.regionUVs,new Uint16Array(e.triangles),c.f.TRIANGLES);return void 0!==r._canvasPadding&&(r._canvasPadding=1.5),r.alpha=e.color.a,r.region=e.region,this.setMeshRegion(e,r,n),t.meshes=t.meshes||{},t.meshes[e.id]=r,r},e.prototype.createGraphics=function(t,e){var n=this.newGraphics(),r=new l.h([]);return n.clear(),n.beginFill(16777215,1),n.drawPolygon(r),n.renderable=!1,t.currentGraphics=n,t.clippingContainer=this.newContainer(),t.clippingContainer.mask=t.currentGraphics,n},e.prototype.updateGraphics=function(t,e){var n=t.currentGraphics.geometry,r=n.graphicsData[0].shape.points,i=e.worldVerticesLength;r.length=i,e.computeWorldVertices(t,0,i,r,0,2),n.invalidate()},e.prototype.hackTextureBySlotIndex=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var r=this.skeleton.slots[t];if(!r)return!1;var i=r.getAttachment(),o=i.region;return e?((o=new R).texture=e,o.size=n,r.hackRegion=o,r.hackAttachment=i):(r.hackRegion=null,r.hackAttachment=null),r.currentSprite&&r.currentSprite.region!=o?(this.setSpriteRegion(i,r.currentSprite,o),r.currentSprite.region=o):r.currentMesh&&r.currentMesh.region!=o&&this.setMeshRegion(i,r.currentMesh,o),!0},e.prototype.hackTextureBySlotName=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var r=this.skeleton.findSlotIndex(t);return-1!=r&&this.hackTextureBySlotIndex(r,e,n)},e.prototype.hackTextureAttachment=function(t,e,n,r){void 0===r&&(r=null);var i=this.skeleton.findSlotIndex(t),o=this.skeleton.getAttachmentByName(t,e);o.region.texture=n;var a=this.skeleton.slots[i];if(!a)return!1;var s=a.getAttachment();if(e===s.name){var u=o.region;return n?((u=new R).texture=n,u.size=r,a.hackRegion=u,a.hackAttachment=s):(a.hackRegion=null,a.hackAttachment=null),a.currentSprite&&a.currentSprite.region!=u?(this.setSpriteRegion(s,a.currentSprite,u),a.currentSprite.region=u):a.currentMesh&&a.currentMesh.region!=u&&this.setMeshRegion(s,a.currentMesh,u),!0}return!1},e.prototype.newContainer=function(){return new h.b},e.prototype.newSprite=function(t){return new K(t)},e.prototype.newGraphics=function(){return new d.c},e.prototype.newMesh=function(t,e,n,r,i){return new Z(t,e,n,r,i)},e.prototype.transformHack=function(){return 1},e.prototype.hackAttachmentGroups=function(t,e,n){if(t){for(var r=[],i=[],o=0,a=this.skeleton.slots.length;o<a;o++){var s=this.skeleton.slots[o],u=s.currentSpriteName||s.currentMeshName||"",c=s.currentSprite||s.currentMesh;u.endsWith(t)?(c.parentGroup=e,i.push(c)):n&&c&&(c.parentGroup=n,r.push(c))}return[r,i]}},e.prototype.destroy=function(e){for(var n=0,r=this.skeleton.slots.length;n<r;n++){var i=this.skeleton.slots[n];for(var o in i.meshes)i.meshes[o].destroy(e);for(var a in i.meshes=null,i.sprites)i.sprites[a].destroy(e);i.sprites=null}for(n=0,r=this.slotContainers.length;n<r;n++)this.slotContainers[n].destroy(e);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,t.prototype.destroy.call(this,e)},e.clippingPolygon=[],e}(h.b);Object.defineProperty($.prototype,"visible",{get:function(){return this._visible},set:function(t){t!==this._visible&&(this._visible=t,t&&(this.lastTime=0))}}),s.c.setExtensionXhrType("skel",s.c.XHR_RESPONSE_TYPE.BUFFER);var J=function(){function t(){}return t.prototype.genMiddleware=function(){var t=this;return{use:function(e,n){if(!e.data)return n();var r=
/*!
 * @pixi-spine/loader-base - v3.0.13
 * Compiled Mon, 13 Sep 2021 16:46:34 UTC
 *
 * @pixi-spine/loader-base is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 * 
 * Copyright 2019-2020, Ivan Igorevich Popelyshev <ivan.popelyshev@gmail.com>, All Rights Reserved
 */
function(t){return t.type===s.c.TYPE.JSON}(e)&&e.data.bones,i=function(t){return t.xhrType===s.c.XHR_RESPONSE_TYPE.BUFFER}(e)&&("skel"===e.extension||e.metadata&&e.metadata.spineMetadata);if(!r&&!i)return n();var o=null,a=e.data;r?o=t.createJsonParser():(o=t.createBinaryParser(),e.data instanceof ArrayBuffer&&(a=new Uint8Array(e.data)));var u=e.metadata||{},l=u?u.spineSkeletonScale:null;l&&(o.scale=l);var h=u.spineAtlas;if(!1===h)return n();if(h&&h.pages)return t.parseData(e,o,h,a),n();var f=u.spineAtlasSuffix||".atlas",p=e.url,d=p.indexOf("?");d>0&&(p=p.substr(0,d)),p=p.substr(0,p.lastIndexOf("."))+f,u.spineAtlasFile&&(p=u.spineAtlasFile),p=p.replace(this.baseUrl,"");var y={crossOrigin:e.crossOrigin,xhrType:s.c.XHR_RESPONSE_TYPE.TEXT,metadata:u.spineMetadata||null,parentResource:e},m={crossOrigin:e.crossOrigin,metadata:u.imageMetadata||null,parentResource:e},v=e.url.substr(0,e.url.lastIndexOf("/")+1);v=v.replace(this.baseUrl,"");var _=u.imageNamePrefix||e.name+"_atlas_page_",g=u.images?Q(u.images):u.image?Q({default:u.image}):u.imageLoader?u.imageLoader(this,_,v,m):function(t,e,n,r){n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");return function(i,o){var a=e+i,s=n+i,u=t.resources[a];if(u){var l=function(){o(u.texture.baseTexture)};u.texture?l():u.onAfterMiddleware.add(l)}else t.add(a,s,r,(function(t){t.error?o(null):(i.indexOf("-pma.")>=0&&(t.texture.baseTexture.alphaMode=c.a.PMA),o(t.texture.baseTexture))}))}}(this,_,v,m);function b(r){new I(r,g,(function(r){r&&t.parseData(e,o,r,a),n()}))}u.atlasRawData?b(u.atlasRawData):this.add(e.name+"_atlas",p,y,(function(t){t.error?n():b(t.data)}))}}},t}();function Q(t){return function(e,n){var r=t[e]||t.default;r&&r.baseTexture?n(r.baseTexture):n(r)}}
/*!
 * @pixi-spine/runtime-3.8 - v3.0.13
 * Compiled Mon, 13 Sep 2021 16:46:34 UTC
 *
 * @pixi-spine/runtime-3.8 is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 * 
 * Copyright 2019-2020, Ivan Igorevich Popelyshev <ivan.popelyshev@gmail.com>, All Rights Reserved
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var tt=function(t,e){return(tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function et(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}tt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var nt,rt=function(t){if(null==t)throw new Error("name cannot be null.");this.name=t},it=function(t){function e(n){var r=t.call(this,n)||this;return r.id=(65535&e.nextID++)<<11,r.worldVerticesLength=0,r.deformAttachment=r,r}return et(e,t),e.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},e.prototype.computeWorldVertices=function(t,e,n,r,i,o){n=i+(n>>1)*o;var a=t.bone.skeleton,s=t.deform,u=this.vertices,c=this.bones;if(null!=c){for(var l=0,h=0,f=0;f<e;f+=2){l+=(m=c[l])+1,h+=m}var p=a.bones;if(0==s.length)for(R=i,x=3*h;R<n;R+=o){var d=0,y=0,m=c[l++];for(m+=l;l<m;l++,x+=3){b=p[c[l]].matrix,A=u[x],I=u[x+1];var v=u[x+2];d+=(A*b.a+I*b.c+b.tx)*v,y+=(A*b.b+I*b.d+b.ty)*v}r[R]=d,r[R+1]=y}else for(var _=s,g=(R=i,x=3*h,h<<1);R<n;R+=o){d=0,y=0,m=c[l++];for(m+=l;l<m;l++,x+=3,g+=2){b=p[c[l]].matrix,A=u[x]+_[g],I=u[x+1]+_[g+1],v=u[x+2];d+=(A*b.a+I*b.c+b.tx)*v,y+=(A*b.b+I*b.d+b.ty)*v}r[R]=d,r[R+1]=y}}else{s.length>0&&(u=s);for(var b,E=(b=t.bone.matrix).tx,T=b.ty,w=b.a,x=b.c,S=b.b,O=b.d,P=e,R=i;R<n;P+=2,R+=o){var A=u[P],I=u[P+1];r[R]=A*w+I*x+E,r[R+1]=A*S+I*O+T}}},e.prototype.copyTo=function(t){null!=this.bones?(t.bones=new Array(this.bones.length),G.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,null!=this.vertices?(t.vertices=G.newFloatArray(this.vertices.length),G.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment},e.nextID=0,e}(rt),ot=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.BoundingBox,n.color=new B(1,1,1,1),n}return et(e,t),e.prototype.copy=function(){var t=new e(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t},e}(it),at=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.Clipping,n.color=new B(.2275,.2275,.8078,1),n}return et(e,t),e.prototype.copy=function(){var t=new e(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},e}(it),st=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.Mesh,n.color=new B(1,1,1,1),n.tempColor=new B(0,0,0,0),n}return et(e,t),e.prototype.getParentMesh=function(){return this.parentMesh},e.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},e.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var t=new e(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Float32Array(this.regionUVs.length),G.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.triangles=new Array(this.triangles.length),G.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,null!=this.edges&&(t.edges=new Array(this.edges.length),G.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t},e.prototype.newLinkedMesh=function(){var t=new e(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t},e}(it),ut=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.Path,n.closed=!1,n.constantSpeed=!1,n.color=new B(1,1,1,1),n}return et(e,t),e.prototype.copy=function(){var t=new e(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),G.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t},e}(it),ct=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.Point,n.color=new B(.38,.94,0,1),n}return et(e,t),e.prototype.computeWorldPosition=function(t,e){var n=t.matrix;return e.x=this.x*n.a+this.y*n.c+t.worldX,e.y=this.x*n.b+this.y*n.d+t.worldY,e},e.prototype.computeWorldRotation=function(t){var e=t.matrix,n=F.cosDeg(this.rotation),r=F.sinDeg(this.rotation),i=n*e.a+r*e.c,o=n*e.b+r*e.d;return Math.atan2(o,i)*F.radDeg},e.prototype.copy=function(){var t=new e(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},e}(it),lt=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.Region,n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new B(1,1,1,1),n.offset=G.newFloatArray(8),n.uvs=G.newFloatArray(8),n.tempColor=new B(1,1,1,1),n}return et(e,t),e.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,n=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*t,i=-this.height/2*this.scaleY+this.region.offsetY*n,o=r+this.region.width*t,a=i+this.region.height*n,s=this.rotation*Math.PI/180,u=Math.cos(s),c=Math.sin(s),l=r*u+this.x,h=r*c,f=i*u+this.y,p=i*c,d=o*u+this.x,y=o*c,m=a*u+this.y,v=a*c,_=this.offset;_[e.OX1]=l-p,_[e.OY1]=f+h,_[e.OX2]=l-v,_[e.OY2]=m+h,_[e.OX3]=d-v,_[e.OY3]=m+y,_[e.OX4]=d-p,_[e.OY4]=f+y},e.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},e.prototype.computeWorldVertices=function(t,n,r,i){var o=this.offset,a=t.matrix,s=a.tx,u=a.ty,c=a.a,l=a.c,h=a.b,f=a.d,p=0,d=0;p=o[e.OX1],d=o[e.OY1],n[r]=p*c+d*l+s,n[r+1]=p*h+d*f+u,r+=i,p=o[e.OX2],d=o[e.OY2],n[r]=p*c+d*l+s,n[r+1]=p*h+d*f+u,r+=i,p=o[e.OX3],d=o[e.OY3],n[r]=p*c+d*l+s,n[r+1]=p*h+d*f+u,r+=i,p=o[e.OX4],d=o[e.OY4],n[r]=p*c+d*l+s,n[r+1]=p*h+d*f+u},e.prototype.copy=function(){var t=new e(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,G.arrayCopy(this.uvs,0,t.uvs,0,8),G.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t},e.OX1=0,e.OY1=1,e.OX2=2,e.OY2=3,e.OX3=4,e.OY3=5,e.OX4=6,e.OY4=7,e.X1=0,e.Y1=1,e.C1R=2,e.C1G=3,e.C1B=4,e.C1A=5,e.U1=6,e.V1=7,e.X2=8,e.Y2=9,e.C2R=10,e.C2G=11,e.C2B=12,e.C2A=13,e.U2=14,e.V2=15,e.X3=16,e.Y3=17,e.C3R=18,e.C3G=19,e.C3B=20,e.C3A=21,e.U3=22,e.V3=23,e.X4=24,e.Y4=25,e.C4R=26,e.C4G=27,e.C4B=28,e.C4A=29,e.U4=30,e.V4=31,e}(rt),ht=function(){function t(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return t.prototype.begin=function(t){},t.prototype.transform=function(t,e,n,r){t.x+=F.randomTriangular(-this.jitterX,this.jitterY),t.y+=F.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},t}(),ft=function(){function t(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return t.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},t.prototype.transform=function(e,n,r,i){var o=this.angle*F.degreesToRadians,a=e.x-this.worldX,s=e.y-this.worldY,u=Math.sqrt(a*a+s*s);if(u<this.radius){var c=t.interpolation.apply(0,o,(this.radius-u)/this.radius),l=Math.cos(c),h=Math.sin(c);e.x=l*a-h*s+this.worldX,e.y=h*a+l*s+this.worldY}},t.prototype.end=function(){},t.interpolation=new U(2),t}(),pt=function(){function t(t,e,n){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(var r=0;r<e.length;r++)this.timelineIds[e[r].getPropertyId()]=!0;this.duration=n}return t.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},t.prototype.apply=function(t,e,n,r,i,o,a,s){if(null==t)throw new Error("skeleton cannot be null.");r&&0!=this.duration&&(n%=this.duration,e>0&&(e%=this.duration));for(var u=this.timelines,c=0,l=u.length;c<l;c++)u[c].apply(t,e,n,i,o,a,s)},t.binarySearch=function(t,e,n){void 0===n&&(n=1);var r=0,i=t.length/n-2;if(0==i)return n;for(var o=i>>>1;;){if(t[(o+1)*n]<=e?r=o+1:i=o,r==i)return(r+1)*n;o=r+i>>>1}},t.linearSearch=function(t,e,n){for(var r=0,i=t.length-n;r<=i;r+=n)if(t[r]>e)return r;return-1},t}();!function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"}(nt||(nt={}));var dt,yt=function(){function t(e){if(e<=0)throw new Error("frameCount must be > 0: "+e);this.curves=G.newFloatArray((e-1)*t.BEZIER_SIZE)}return t.prototype.getFrameCount=function(){return this.curves.length/t.BEZIER_SIZE+1},t.prototype.setLinear=function(e){this.curves[e*t.BEZIER_SIZE]=t.LINEAR},t.prototype.setStepped=function(e){this.curves[e*t.BEZIER_SIZE]=t.STEPPED},t.prototype.getCurveType=function(e){var n=e*t.BEZIER_SIZE;if(n==this.curves.length)return t.LINEAR;var r=this.curves[n];return r==t.LINEAR?t.LINEAR:r==t.STEPPED?t.STEPPED:t.BEZIER},t.prototype.setCurve=function(e,n,r,i,o){var a=.03*(2*-n+i),s=.03*(2*-r+o),u=.006*(3*(n-i)+1),c=.006*(3*(r-o)+1),l=2*a+u,h=2*s+c,f=.3*n+a+.16666667*u,p=.3*r+s+.16666667*c,d=e*t.BEZIER_SIZE,y=this.curves;y[d++]=t.BEZIER;for(var m=f,v=p,_=d+t.BEZIER_SIZE-1;d<_;d+=2)y[d]=m,y[d+1]=v,f+=l,p+=h,l+=u,h+=c,m+=f,v+=p},t.prototype.getCurvePercent=function(e,n){n=F.clamp(n,0,1);var r=this.curves,i=e*t.BEZIER_SIZE,o=r[i];if(o==t.LINEAR)return n;if(o==t.STEPPED)return 0;for(var a=0,s=++i,u=i+t.BEZIER_SIZE-1;i<u;i+=2)if((a=r[i])>=n){var c=void 0,l=void 0;return i==s?(c=0,l=0):(c=r[i-2],l=r[i-1]),l+(r[i+1]-l)*(n-c)/(a-c)}var h=r[i-1];return h+(1-h)*(n-a)/(1-a)},t.LINEAR=0,t.STEPPED=1,t.BEZIER=2,t.BEZIER_SIZE=19,t}(),mt=function(t){function e(e){var n=t.call(this,e)||this;return n.frames=G.newFloatArray(e<<1),n}return et(e,t),e.prototype.getPropertyId=function(){return(nt.rotate<<24)+this.boneIndex},e.prototype.setFrame=function(t,n,r){t<<=1,this.frames[t]=n,this.frames[t+e.ROTATION]=r},e.prototype.apply=function(t,n,r,i,o,a,s){var u=this.frames,c=t.bones[this.boneIndex];if(c.active)if(r<u[0])switch(a){case m.setup:return void(c.rotation=c.data.rotation);case m.first:var l=c.data.rotation-c.rotation;c.rotation+=(l-360*(16384-(16384.499999999996-l/360|0)))*o}else if(r>=u[u.length-e.ENTRIES]){var h=u[u.length+e.PREV_ROTATION];switch(a){case m.setup:c.rotation=c.data.rotation+h*o;break;case m.first:case m.replace:h+=c.data.rotation-c.rotation,h-=360*(16384-(16384.499999999996-h/360|0));case m.add:c.rotation+=h*o}}else{var f=pt.binarySearch(u,r,e.ENTRIES),p=u[f+e.PREV_ROTATION],d=u[f],y=this.getCurvePercent((f>>1)-1,1-(r-d)/(u[f+e.PREV_TIME]-d)),v=u[f+e.ROTATION]-p;switch(v=p+(v-360*(16384-(16384.499999999996-v/360|0)))*y,a){case m.setup:c.rotation=c.data.rotation+(v-360*(16384-(16384.499999999996-v/360|0)))*o;break;case m.first:case m.replace:v+=c.data.rotation-c.rotation;case m.add:c.rotation+=(v-360*(16384-(16384.499999999996-v/360|0)))*o}}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_ROTATION=-1,e.ROTATION=1,e}(yt),vt=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=G.newFloatArray(n*e.ENTRIES),r}return et(e,t),e.prototype.getPropertyId=function(){return(nt.translate<<24)+this.boneIndex},e.prototype.setFrame=function(t,n,r,i){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.X]=r,this.frames[t+e.Y]=i},e.prototype.apply=function(t,n,r,i,o,a,s){var u=this.frames,c=t.bones[this.boneIndex];if(c.active)if(r<u[0])switch(a){case m.setup:return c.x=c.data.x,void(c.y=c.data.y);case m.first:c.x+=(c.data.x-c.x)*o,c.y+=(c.data.y-c.y)*o}else{var l=0,h=0;if(r>=u[u.length-e.ENTRIES])l=u[u.length+e.PREV_X],h=u[u.length+e.PREV_Y];else{var f=pt.binarySearch(u,r,e.ENTRIES);l=u[f+e.PREV_X],h=u[f+e.PREV_Y];var p=u[f],d=this.getCurvePercent(f/e.ENTRIES-1,1-(r-p)/(u[f+e.PREV_TIME]-p));l+=(u[f+e.X]-l)*d,h+=(u[f+e.Y]-h)*d}switch(a){case m.setup:c.x=c.data.x+l*o,c.y=c.data.y+h*o;break;case m.first:case m.replace:c.x+=(c.data.x+l-c.x)*o,c.y+=(c.data.y+h-c.y)*o;break;case m.add:c.x+=l*o,c.y+=h*o}}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_X=-2,e.PREV_Y=-1,e.X=1,e.Y=2,e}(yt),_t=function(t){function e(e){return t.call(this,e)||this}return et(e,t),e.prototype.getPropertyId=function(){return(nt.scale<<24)+this.boneIndex},e.prototype.apply=function(t,n,r,i,o,a,s){var u=this.frames,c=t.bones[this.boneIndex];if(c.active)if(r<u[0])switch(a){case m.setup:return c.scaleX=c.data.scaleX,void(c.scaleY=c.data.scaleY);case m.first:c.scaleX+=(c.data.scaleX-c.scaleX)*o,c.scaleY+=(c.data.scaleY-c.scaleY)*o}else{var l=0,h=0;if(r>=u[u.length-e.ENTRIES])l=u[u.length+e.PREV_X]*c.data.scaleX,h=u[u.length+e.PREV_Y]*c.data.scaleY;else{var f=pt.binarySearch(u,r,e.ENTRIES);l=u[f+e.PREV_X],h=u[f+e.PREV_Y];var p=u[f],d=this.getCurvePercent(f/e.ENTRIES-1,1-(r-p)/(u[f+e.PREV_TIME]-p));l=(l+(u[f+e.X]-l)*d)*c.data.scaleX,h=(h+(u[f+e.Y]-h)*d)*c.data.scaleY}if(1==o)a==m.add?(c.scaleX+=l-c.data.scaleX,c.scaleY+=h-c.data.scaleY):(c.scaleX=l,c.scaleY=h);else{var y=0,_=0;if(s==v.mixOut)switch(a){case m.setup:y=c.data.scaleX,_=c.data.scaleY,c.scaleX=y+(Math.abs(l)*F.signum(y)-y)*o,c.scaleY=_+(Math.abs(h)*F.signum(_)-_)*o;break;case m.first:case m.replace:y=c.scaleX,_=c.scaleY,c.scaleX=y+(Math.abs(l)*F.signum(y)-y)*o,c.scaleY=_+(Math.abs(h)*F.signum(_)-_)*o;break;case m.add:y=c.scaleX,_=c.scaleY,c.scaleX=y+(Math.abs(l)*F.signum(y)-c.data.scaleX)*o,c.scaleY=_+(Math.abs(h)*F.signum(_)-c.data.scaleY)*o}else switch(a){case m.setup:y=Math.abs(c.data.scaleX)*F.signum(l),_=Math.abs(c.data.scaleY)*F.signum(h),c.scaleX=y+(l-y)*o,c.scaleY=_+(h-_)*o;break;case m.first:case m.replace:y=Math.abs(c.scaleX)*F.signum(l),_=Math.abs(c.scaleY)*F.signum(h),c.scaleX=y+(l-y)*o,c.scaleY=_+(h-_)*o;break;case m.add:y=F.signum(l),_=F.signum(h),c.scaleX=Math.abs(c.scaleX)*y+(l-Math.abs(c.data.scaleX)*y)*o,c.scaleY=Math.abs(c.scaleY)*_+(h-Math.abs(c.data.scaleY)*_)*o}}}},e}(vt),gt=function(t){function e(e){return t.call(this,e)||this}return et(e,t),e.prototype.getPropertyId=function(){return(nt.shear<<24)+this.boneIndex},e.prototype.apply=function(t,n,r,i,o,a,s){var u=this.frames,c=t.bones[this.boneIndex];if(c.active)if(r<u[0])switch(a){case m.setup:return c.shearX=c.data.shearX,void(c.shearY=c.data.shearY);case m.first:c.shearX+=(c.data.shearX-c.shearX)*o,c.shearY+=(c.data.shearY-c.shearY)*o}else{var l=0,h=0;if(r>=u[u.length-e.ENTRIES])l=u[u.length+e.PREV_X],h=u[u.length+e.PREV_Y];else{var f=pt.binarySearch(u,r,e.ENTRIES);l=u[f+e.PREV_X],h=u[f+e.PREV_Y];var p=u[f],d=this.getCurvePercent(f/e.ENTRIES-1,1-(r-p)/(u[f+e.PREV_TIME]-p));l+=(u[f+e.X]-l)*d,h+=(u[f+e.Y]-h)*d}switch(a){case m.setup:c.shearX=c.data.shearX+l*o,c.shearY=c.data.shearY+h*o;break;case m.first:case m.replace:c.shearX+=(c.data.shearX+l-c.shearX)*o,c.shearY+=(c.data.shearY+h-c.shearY)*o;break;case m.add:c.shearX+=l*o,c.shearY+=h*o}}},e}(vt),bt=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=G.newFloatArray(n*e.ENTRIES),r}return et(e,t),e.prototype.getPropertyId=function(){return(nt.color<<24)+this.slotIndex},e.prototype.setFrame=function(t,n,r,i,o,a){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.R]=r,this.frames[t+e.G]=i,this.frames[t+e.B]=o,this.frames[t+e.A]=a},e.prototype.apply=function(t,n,r,i,o,a,s){var u=t.slots[this.slotIndex];if(u.bone.active){var c=this.frames;if(r<c[0])switch(a){case m.setup:return void u.color.setFromColor(u.data.color);case m.first:var l=u.color,h=u.data.color;l.add((h.r-l.r)*o,(h.g-l.g)*o,(h.b-l.b)*o,(h.a-l.a)*o)}else{var f=0,p=0,d=0,y=0;if(r>=c[c.length-e.ENTRIES]){var v=c.length;f=c[v+e.PREV_R],p=c[v+e.PREV_G],d=c[v+e.PREV_B],y=c[v+e.PREV_A]}else{var _=pt.binarySearch(c,r,e.ENTRIES);f=c[_+e.PREV_R],p=c[_+e.PREV_G],d=c[_+e.PREV_B],y=c[_+e.PREV_A];var g=c[_],b=this.getCurvePercent(_/e.ENTRIES-1,1-(r-g)/(c[_+e.PREV_TIME]-g));f+=(c[_+e.R]-f)*b,p+=(c[_+e.G]-p)*b,d+=(c[_+e.B]-d)*b,y+=(c[_+e.A]-y)*b}if(1==o)u.color.set(f,p,d,y);else{l=u.color;a==m.setup&&l.setFromColor(u.data.color),l.add((f-l.r)*o,(p-l.g)*o,(d-l.b)*o,(y-l.a)*o)}}}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_R=-4,e.PREV_G=-3,e.PREV_B=-2,e.PREV_A=-1,e.R=1,e.G=2,e.B=3,e.A=4,e}(yt),Et=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=G.newFloatArray(n*e.ENTRIES),r}return et(e,t),e.prototype.getPropertyId=function(){return(nt.twoColor<<24)+this.slotIndex},e.prototype.setFrame=function(t,n,r,i,o,a,s,u,c){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.R]=r,this.frames[t+e.G]=i,this.frames[t+e.B]=o,this.frames[t+e.A]=a,this.frames[t+e.R2]=s,this.frames[t+e.G2]=u,this.frames[t+e.B2]=c},e.prototype.apply=function(t,n,r,i,o,a,s){var u=t.slots[this.slotIndex];if(u.bone.active){var c=this.frames;if(r<c[0])switch(a){case m.setup:return u.color.setFromColor(u.data.color),void u.darkColor.setFromColor(u.data.darkColor);case m.first:var l=u.color,h=u.darkColor,f=u.data.color,p=u.data.darkColor;l.add((f.r-l.r)*o,(f.g-l.g)*o,(f.b-l.b)*o,(f.a-l.a)*o),h.add((p.r-h.r)*o,(p.g-h.g)*o,(p.b-h.b)*o,0)}else{var d=0,y=0,v=0,_=0,g=0,b=0,E=0;if(r>=c[c.length-e.ENTRIES]){var T=c.length;d=c[T+e.PREV_R],y=c[T+e.PREV_G],v=c[T+e.PREV_B],_=c[T+e.PREV_A],g=c[T+e.PREV_R2],b=c[T+e.PREV_G2],E=c[T+e.PREV_B2]}else{var w=pt.binarySearch(c,r,e.ENTRIES);d=c[w+e.PREV_R],y=c[w+e.PREV_G],v=c[w+e.PREV_B],_=c[w+e.PREV_A],g=c[w+e.PREV_R2],b=c[w+e.PREV_G2],E=c[w+e.PREV_B2];var x=c[w],S=this.getCurvePercent(w/e.ENTRIES-1,1-(r-x)/(c[w+e.PREV_TIME]-x));d+=(c[w+e.R]-d)*S,y+=(c[w+e.G]-y)*S,v+=(c[w+e.B]-v)*S,_+=(c[w+e.A]-_)*S,g+=(c[w+e.R2]-g)*S,b+=(c[w+e.G2]-b)*S,E+=(c[w+e.B2]-E)*S}if(1==o)u.color.set(d,y,v,_),u.darkColor.set(g,b,E,1);else{l=u.color,h=u.darkColor;a==m.setup&&(l.setFromColor(u.data.color),h.setFromColor(u.data.darkColor)),l.add((d-l.r)*o,(y-l.g)*o,(v-l.b)*o,(_-l.a)*o),h.add((g-h.r)*o,(b-h.g)*o,(E-h.b)*o,0)}}}},e.ENTRIES=8,e.PREV_TIME=-8,e.PREV_R=-7,e.PREV_G=-6,e.PREV_B=-5,e.PREV_A=-4,e.PREV_R2=-3,e.PREV_G2=-2,e.PREV_B2=-1,e.R=1,e.G=2,e.B=3,e.A=4,e.R2=5,e.G2=6,e.B2=7,e}(yt),Tt=function(){function t(t){this.frames=G.newFloatArray(t),this.attachmentNames=new Array(t)}return t.prototype.getPropertyId=function(){return(nt.attachment<<24)+this.slotIndex},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},t.prototype.apply=function(t,e,n,r,i,o,a){var s=t.slots[this.slotIndex];if(s.bone.active)if(a!=v.mixOut){var u=this.frames;if(n<u[0])o!=m.setup&&o!=m.first||this.setAttachment(t,s,s.data.attachmentName);else{var c=0;c=n>=u[u.length-1]?u.length-1:pt.binarySearch(u,n,1)-1;var l=this.attachmentNames[c];t.slots[this.slotIndex].setAttachment(null==l?null:t.getAttachment(this.slotIndex,l))}}else o==m.setup&&this.setAttachment(t,s,s.data.attachmentName)},t.prototype.setAttachment=function(t,e,n){e.setAttachment(null==n?null:t.getAttachment(this.slotIndex,n))},t}(),wt=null,xt=function(t){function e(e){var n=t.call(this,e)||this;return n.frames=G.newFloatArray(e),n.frameVertices=new Array(e),null==wt&&(wt=G.newFloatArray(64)),n}return et(e,t),e.prototype.getPropertyId=function(){return(nt.deform<<27)+ +this.attachment.id+this.slotIndex},e.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.frameVertices[t]=n},e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.slots[this.slotIndex];if(s.bone.active){var u=s.getAttachment();if(u instanceof it&&u.deformAttachment==this.attachment){var c=s.deform;0==c.length&&(o=m.setup);var l=this.frameVertices,h=l[0].length,f=this.frames;if(n<f[0]){var p=u;switch(o){case m.setup:return void(c.length=0);case m.first:if(1==i){c.length=0;break}var d=G.setArraySize(c,h);if(null==p.bones)for(var y=p.vertices,v=0;v<h;v++)d[v]+=(y[v]-d[v])*i;else{i=1-i;for(v=0;v<h;v++)d[v]*=i}}}else{var _=G.setArraySize(c,h);if(n>=f[f.length-1]){var g=l[f.length-1];if(1==i)if(o==m.add)if(null==(p=u).bones){y=p.vertices;for(var b=0;b<h;b++)_[b]+=g[b]-y[b]}else for(var E=0;E<h;E++)_[E]+=g[E];else G.arrayCopy(g,0,_,0,h);else switch(o){case m.setup:var T=u;if(null==T.bones){y=T.vertices;for(var w=0;w<h;w++){var x=y[w];_[w]=x+(g[w]-x)*i}}else for(var S=0;S<h;S++)_[S]=g[S]*i;break;case m.first:case m.replace:for(var O=0;O<h;O++)_[O]+=(g[O]-_[O])*i;break;case m.add:if(null==(p=u).bones){y=p.vertices;for(var P=0;P<h;P++)_[P]+=(g[P]-y[P])*i}else for(var R=0;R<h;R++)_[R]+=g[R]*i}}else{var A=pt.binarySearch(f,n),I=l[A-1],C=l[A],k=f[A],N=this.getCurvePercent(A-1,1-(n-k)/(f[A-1]-k));if(1==i)if(o==m.add)if(null==(p=u).bones){y=p.vertices;for(var M=0;M<h;M++){var j=I[M];_[M]+=j+(C[M]-j)*N-y[M]}}else for(var D=0;D<h;D++){j=I[D];_[D]+=j+(C[D]-j)*N}else for(var L=0;L<h;L++){j=I[L];_[L]=j+(C[L]-j)*N}else switch(o){case m.setup:var B=u;if(null==B.bones){y=B.vertices;for(var F=0;F<h;F++){j=I[F],x=y[F];_[F]=x+(j+(C[F]-j)*N-x)*i}}else for(var U=0;U<h;U++){j=I[U];_[U]=(j+(C[U]-j)*N)*i}break;case m.first:case m.replace:for(var H=0;H<h;H++){j=I[H];_[H]+=(j+(C[H]-j)*N-_[H])*i}break;case m.add:if(null==(p=u).bones){y=p.vertices;for(var V=0;V<h;V++){j=I[V];_[V]+=(j+(C[V]-j)*N-y[V])*i}}else for(var X=0;X<h;X++){j=I[X];_[X]+=(j+(C[X]-j)*N)*i}}}}}}},e}(yt),St=function(){function t(t){this.frames=G.newFloatArray(t),this.events=new Array(t)}return t.prototype.getPropertyId=function(){return nt.event<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},t.prototype.apply=function(t,e,n,r,i,o,a){if(null!=r){var s=this.frames,u=this.frames.length;if(e>n)this.apply(t,e,Number.MAX_VALUE,r,i,o,a),e=-1;else if(e>=s[u-1])return;if(!(n<s[0])){var c=0;if(e<s[0])c=0;else for(var l=s[c=pt.binarySearch(s,e)];c>0&&s[c-1]==l;)c--;for(;c<u&&n>=s[c];c++)r.push(this.events[c])}}},t}(),Ot=function(){function t(t){this.frames=G.newFloatArray(t),this.drawOrders=new Array(t)}return t.prototype.getPropertyId=function(){return nt.drawOrder<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},t.prototype.apply=function(t,e,n,r,i,o,a){var s=t.drawOrder,u=t.slots;if(a!=v.mixOut||o!=m.setup){var c=this.frames;if(n<c[0])o!=m.setup&&o!=m.first||G.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var l=0;l=n>=c[c.length-1]?c.length-1:pt.binarySearch(c,n)-1;var h=this.drawOrders[l];if(null==h)G.arrayCopy(u,0,s,0,u.length);else for(var f=0,p=h.length;f<p;f++)s[f]=u[h[f]]}}else G.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)},t}(),Pt=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=G.newFloatArray(n*e.ENTRIES),r}return et(e,t),e.prototype.getPropertyId=function(){return(nt.ikConstraint<<24)+this.ikConstraintIndex},e.prototype.setFrame=function(t,n,r,i,o,a,s){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.MIX]=r,this.frames[t+e.SOFTNESS]=i,this.frames[t+e.BEND_DIRECTION]=o,this.frames[t+e.COMPRESS]=a?1:0,this.frames[t+e.STRETCH]=s?1:0},e.prototype.apply=function(t,n,r,i,o,a,s){var u=this.frames,c=t.ikConstraints[this.ikConstraintIndex];if(c.active)if(r<u[0])switch(a){case m.setup:return c.mix=c.data.mix,c.softness=c.data.softness,c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,void(c.stretch=c.data.stretch);case m.first:c.mix+=(c.data.mix-c.mix)*o,c.softness+=(c.data.softness-c.softness)*o,c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch}else if(r>=u[u.length-e.ENTRIES])a==m.setup?(c.mix=c.data.mix+(u[u.length+e.PREV_MIX]-c.data.mix)*o,c.softness=c.data.softness+(u[u.length+e.PREV_SOFTNESS]-c.data.softness)*o,s==v.mixOut?(c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch):(c.bendDirection=u[u.length+e.PREV_BEND_DIRECTION],c.compress=0!=u[u.length+e.PREV_COMPRESS],c.stretch=0!=u[u.length+e.PREV_STRETCH])):(c.mix+=(u[u.length+e.PREV_MIX]-c.mix)*o,c.softness+=(u[u.length+e.PREV_SOFTNESS]-c.softness)*o,s==v.mixIn&&(c.bendDirection=u[u.length+e.PREV_BEND_DIRECTION],c.compress=0!=u[u.length+e.PREV_COMPRESS],c.stretch=0!=u[u.length+e.PREV_STRETCH]));else{var l=pt.binarySearch(u,r,e.ENTRIES),h=u[l+e.PREV_MIX],f=u[l+e.PREV_SOFTNESS],p=u[l],d=this.getCurvePercent(l/e.ENTRIES-1,1-(r-p)/(u[l+e.PREV_TIME]-p));a==m.setup?(c.mix=c.data.mix+(h+(u[l+e.MIX]-h)*d-c.data.mix)*o,c.softness=c.data.softness+(f+(u[l+e.SOFTNESS]-f)*d-c.data.softness)*o,s==v.mixOut?(c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch):(c.bendDirection=u[l+e.PREV_BEND_DIRECTION],c.compress=0!=u[l+e.PREV_COMPRESS],c.stretch=0!=u[l+e.PREV_STRETCH])):(c.mix+=(h+(u[l+e.MIX]-h)*d-c.mix)*o,c.softness+=(f+(u[l+e.SOFTNESS]-f)*d-c.softness)*o,s==v.mixIn&&(c.bendDirection=u[l+e.PREV_BEND_DIRECTION],c.compress=0!=u[l+e.PREV_COMPRESS],c.stretch=0!=u[l+e.PREV_STRETCH]))}},e.ENTRIES=6,e.PREV_TIME=-6,e.PREV_MIX=-5,e.PREV_SOFTNESS=-4,e.PREV_BEND_DIRECTION=-3,e.PREV_COMPRESS=-2,e.PREV_STRETCH=-1,e.MIX=1,e.SOFTNESS=2,e.BEND_DIRECTION=3,e.COMPRESS=4,e.STRETCH=5,e}(yt),Rt=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=G.newFloatArray(n*e.ENTRIES),r}return et(e,t),e.prototype.getPropertyId=function(){return(nt.transformConstraint<<24)+this.transformConstraintIndex},e.prototype.setFrame=function(t,n,r,i,o,a){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.ROTATE]=r,this.frames[t+e.TRANSLATE]=i,this.frames[t+e.SCALE]=o,this.frames[t+e.SHEAR]=a},e.prototype.apply=function(t,n,r,i,o,a,s){var u=this.frames,c=t.transformConstraints[this.transformConstraintIndex];if(c.active)if(r<u[0]){var l=c.data;switch(a){case m.setup:return c.rotateMix=l.rotateMix,c.translateMix=l.translateMix,c.scaleMix=l.scaleMix,void(c.shearMix=l.shearMix);case m.first:c.rotateMix+=(l.rotateMix-c.rotateMix)*o,c.translateMix+=(l.translateMix-c.translateMix)*o,c.scaleMix+=(l.scaleMix-c.scaleMix)*o,c.shearMix+=(l.shearMix-c.shearMix)*o}}else{var h=0,f=0,p=0,d=0;if(r>=u[u.length-e.ENTRIES]){var y=u.length;h=u[y+e.PREV_ROTATE],f=u[y+e.PREV_TRANSLATE],p=u[y+e.PREV_SCALE],d=u[y+e.PREV_SHEAR]}else{var v=pt.binarySearch(u,r,e.ENTRIES);h=u[v+e.PREV_ROTATE],f=u[v+e.PREV_TRANSLATE],p=u[v+e.PREV_SCALE],d=u[v+e.PREV_SHEAR];var _=u[v],g=this.getCurvePercent(v/e.ENTRIES-1,1-(r-_)/(u[v+e.PREV_TIME]-_));h+=(u[v+e.ROTATE]-h)*g,f+=(u[v+e.TRANSLATE]-f)*g,p+=(u[v+e.SCALE]-p)*g,d+=(u[v+e.SHEAR]-d)*g}if(a==m.setup){l=c.data;c.rotateMix=l.rotateMix+(h-l.rotateMix)*o,c.translateMix=l.translateMix+(f-l.translateMix)*o,c.scaleMix=l.scaleMix+(p-l.scaleMix)*o,c.shearMix=l.shearMix+(d-l.shearMix)*o}else c.rotateMix+=(h-c.rotateMix)*o,c.translateMix+=(f-c.translateMix)*o,c.scaleMix+=(p-c.scaleMix)*o,c.shearMix+=(d-c.shearMix)*o}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_ROTATE=-4,e.PREV_TRANSLATE=-3,e.PREV_SCALE=-2,e.PREV_SHEAR=-1,e.ROTATE=1,e.TRANSLATE=2,e.SCALE=3,e.SHEAR=4,e}(yt),At=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=G.newFloatArray(n*e.ENTRIES),r}return et(e,t),e.prototype.getPropertyId=function(){return(nt.pathConstraintPosition<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(t,n,r){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.VALUE]=r},e.prototype.apply=function(t,n,r,i,o,a,s){var u=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(r<u[0])switch(a){case m.setup:return void(c.position=c.data.position);case m.first:c.position+=(c.data.position-c.position)*o}else{var l=0;if(r>=u[u.length-e.ENTRIES])l=u[u.length+e.PREV_VALUE];else{var h=pt.binarySearch(u,r,e.ENTRIES);l=u[h+e.PREV_VALUE];var f=u[h],p=this.getCurvePercent(h/e.ENTRIES-1,1-(r-f)/(u[h+e.PREV_TIME]-f));l+=(u[h+e.VALUE]-l)*p}a==m.setup?c.position=c.data.position+(l-c.data.position)*o:c.position+=(l-c.position)*o}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_VALUE=-1,e.VALUE=1,e}(yt),It=function(t){function e(e){return t.call(this,e)||this}return et(e,t),e.prototype.getPropertyId=function(){return(nt.pathConstraintSpacing<<24)+this.pathConstraintIndex},e.prototype.apply=function(t,n,r,i,o,a,s){var u=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(r<u[0])switch(a){case m.setup:return void(c.spacing=c.data.spacing);case m.first:c.spacing+=(c.data.spacing-c.spacing)*o}else{var l=0;if(r>=u[u.length-e.ENTRIES])l=u[u.length+e.PREV_VALUE];else{var h=pt.binarySearch(u,r,e.ENTRIES);l=u[h+e.PREV_VALUE];var f=u[h],p=this.getCurvePercent(h/e.ENTRIES-1,1-(r-f)/(u[h+e.PREV_TIME]-f));l+=(u[h+e.VALUE]-l)*p}a==m.setup?c.spacing=c.data.spacing+(l-c.data.spacing)*o:c.spacing+=(l-c.spacing)*o}},e}(At),Ct=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=G.newFloatArray(n*e.ENTRIES),r}return et(e,t),e.prototype.getPropertyId=function(){return(nt.pathConstraintMix<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(t,n,r,i){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.ROTATE]=r,this.frames[t+e.TRANSLATE]=i},e.prototype.apply=function(t,n,r,i,o,a,s){var u=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(r<u[0])switch(a){case m.setup:return c.rotateMix=c.data.rotateMix,void(c.translateMix=c.data.translateMix);case m.first:c.rotateMix+=(c.data.rotateMix-c.rotateMix)*o,c.translateMix+=(c.data.translateMix-c.translateMix)*o}else{var l=0,h=0;if(r>=u[u.length-e.ENTRIES])l=u[u.length+e.PREV_ROTATE],h=u[u.length+e.PREV_TRANSLATE];else{var f=pt.binarySearch(u,r,e.ENTRIES);l=u[f+e.PREV_ROTATE],h=u[f+e.PREV_TRANSLATE];var p=u[f],d=this.getCurvePercent(f/e.ENTRIES-1,1-(r-p)/(u[f+e.PREV_TIME]-p));l+=(u[f+e.ROTATE]-l)*d,h+=(u[f+e.TRANSLATE]-h)*d}a==m.setup?(c.rotateMix=c.data.rotateMix+(l-c.data.rotateMix)*o,c.translateMix=c.data.translateMix+(h-c.data.translateMix)*o):(c.rotateMix+=(l-c.rotateMix)*o,c.translateMix+=(h-c.translateMix)*o)}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_ROTATE=-2,e.PREV_TRANSLATE=-1,e.ROTATE=1,e.TRANSLATE=2,e}(yt),kt=function(){function t(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new Mt(this),this.propertyIDs=new D,this.animationsChanged=!1,this.trackEntryPool=new H((function(){return new Nt})),this.data=t}return t.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,n=0,r=e.length;n<r;n++){var i=e[n];if(null!=i){i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast;var o=t*i.timeScale;if(i.delay>0){if(i.delay-=o,i.delay>0)continue;o=-i.delay,i.delay=0}var a=i.next;if(null!=a){var s=i.trackLast-a.delay;if(s>=0){for(a.delay=0,a.trackTime+=0==i.timeScale?0:(s/i.timeScale+t)*a.timeScale,i.trackTime+=o,this.setCurrent(n,a,!0);null!=a.mixingFrom;)a.mixTime+=t,a=a.mixingFrom;continue}}else if(i.trackLast>=i.trackEnd&&null==i.mixingFrom){e[n]=null,this.queue.end(i),this.disposeNext(i);continue}if(null!=i.mixingFrom&&this.updateMixingFrom(i,t)){var u=i.mixingFrom;for(i.mixingFrom=null,null!=u&&(u.mixingTo=null);null!=u;)this.queue.end(u),u=u.mixingFrom}i.trackTime+=o}}this.queue.drain()},t.prototype.updateMixingFrom=function(t,e){var n=t.mixingFrom;if(null==n)return!0;var r=this.updateMixingFrom(n,e);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=n.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=n.mixingFrom,null!=n.mixingFrom&&(n.mixingFrom.mixingTo=t),t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),r):(n.trackTime+=e*n.timeScale,t.mixTime+=e,!1)},t.prototype.apply=function(e){if(null==e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var n=this.events,r=this.tracks,i=!1,o=0,a=r.length;o<a;o++){var s=r[o];if(!(null==s||s.delay>0)){i=!0;var u=0==o?m.first:s.mixBlend,c=s.alpha;null!=s.mixingFrom?c*=this.applyMixingFrom(s,e,u):s.trackTime>=s.trackEnd&&null==s.next&&(c=0);var l=s.animationLast,h=s.getAnimationTime(),f=s.animation.timelines.length,p=s.animation.timelines;if(0==o&&1==c||u==m.add)for(var d=0;d<f;d++){G.webkit602BugfixHelper(c,u);var y=p[d];y instanceof Tt?this.applyAttachmentTimeline(y,e,h,u,!0):y.apply(e,l,h,n,c,u,v.mixIn)}else{var _=s.timelineMode,g=0==s.timelinesRotation.length;g&&G.setArraySize(s.timelinesRotation,f<<1,null);var b=s.timelinesRotation;for(d=0;d<f;d++){var E=p[d],T=_[d]==t.SUBSEQUENT?u:m.setup;E instanceof mt?this.applyRotateTimeline(E,e,h,c,T,b,d<<1,g):E instanceof Tt?this.applyAttachmentTimeline(E,e,h,u,!0):(G.webkit602BugfixHelper(c,u),E.apply(e,l,h,n,c,T,v.mixIn))}}this.queueEvents(s,h),n.length=0,s.nextAnimationLast=h,s.nextTrackLast=s.trackTime}}for(var w=this.unkeyedState+t.SETUP,x=e.slots,S=0,O=e.slots.length;S<O;S++){var P=x[S];if(P.attachmentState==w){var R=P.data.attachmentName;P.setAttachment(null==R?null:e.getAttachment(P.data.index,R))}}return this.unkeyedState+=2,this.queue.drain(),i},t.prototype.applyMixingFrom=function(e,n,r){var i=e.mixingFrom;null!=i.mixingFrom&&this.applyMixingFrom(i,n,r);var o=0;0==e.mixDuration?(o=1,r==m.first&&(r=m.setup)):((o=e.mixTime/e.mixDuration)>1&&(o=1),r!=m.first&&(r=i.mixBlend));var a=o<i.eventThreshold?this.events:null,s=o<i.attachmentThreshold,u=o<i.drawOrderThreshold,c=i.animationLast,l=i.getAnimationTime(),h=i.animation.timelines.length,f=i.animation.timelines,p=i.alpha*e.interruptAlpha,d=p*(1-o);if(r==m.add)for(var y=0;y<h;y++)f[y].apply(n,c,l,a,d,r,v.mixOut);else{var _=i.timelineMode,g=i.timelineHoldMix,b=0==i.timelinesRotation.length;b&&G.setArraySize(i.timelinesRotation,h<<1,null);var E=i.timelinesRotation;i.totalAlpha=0;for(y=0;y<h;y++){var T=f[y],w=v.mixOut,x=void 0,S=0;switch(_[y]){case t.SUBSEQUENT:if(!u&&T instanceof Ot)continue;x=r,S=d;break;case t.FIRST:x=m.setup,S=d;break;case t.HOLD_SUBSEQUENT:x=r,S=p;break;case t.HOLD_FIRST:x=m.setup,S=p;break;default:x=m.setup;var O=g[y];S=p*Math.max(0,1-O.mixTime/O.mixDuration)}i.totalAlpha+=S,T instanceof mt?this.applyRotateTimeline(T,n,l,S,x,E,y<<1,b):T instanceof Tt?this.applyAttachmentTimeline(T,n,l,x,s):(G.webkit602BugfixHelper(S,r),u&&T instanceof Ot&&x==m.setup&&(w=v.mixIn),T.apply(n,c,l,a,S,x,w))}}return e.mixDuration>0&&this.queueEvents(i,l),this.events.length=0,i.nextAnimationLast=l,i.nextTrackLast=i.trackTime,o},t.prototype.applyAttachmentTimeline=function(e,n,r,i,o){var a=n.slots[e.slotIndex];if(a.bone.active){var s,u=e.frames;if(r<u[0])i!=m.setup&&i!=m.first||this.setAttachment(n,a,a.data.attachmentName,o);else s=r>=u[u.length-1]?u.length-1:pt.binarySearch(u,r)-1,this.setAttachment(n,a,e.attachmentNames[s],o);a.attachmentState<=this.unkeyedState&&(a.attachmentState=this.unkeyedState+t.SETUP)}},t.prototype.setAttachment=function(e,n,r,i){n.setAttachment(null==r?null:e.getAttachment(n.data.index,r)),i&&(n.attachmentState=this.unkeyedState+t.CURRENT)},t.prototype.applyRotateTimeline=function(t,e,n,r,i,o,a,s){if(s&&(o[a]=0),1!=r){var u=t,c=u.frames,l=e.bones[u.boneIndex];if(l.active){var h=0,f=0;if(n<c[0])switch(i){case m.setup:l.rotation=l.data.rotation;default:return;case m.first:h=l.rotation,f=l.data.rotation}else if(h=i==m.setup?l.data.rotation:l.rotation,n>=c[c.length-mt.ENTRIES])f=l.data.rotation+c[c.length+mt.PREV_ROTATION];else{var p=pt.binarySearch(c,n,mt.ENTRIES),d=c[p+mt.PREV_ROTATION],y=c[p],_=u.getCurvePercent((p>>1)-1,1-(n-y)/(c[p+mt.PREV_TIME]-y));f=c[p+mt.ROTATION]-d,f=d+(f-=360*(16384-(16384.499999999996-f/360|0)))*_+l.data.rotation,f-=360*(16384-(16384.499999999996-f/360|0))}var g=0,b=f-h;if(0==(b-=360*(16384-(16384.499999999996-b/360|0))))g=o[a];else{var E=0,T=0;s?(E=0,T=b):(E=o[a],T=o[a+1]);var w=b>0,x=E>=0;F.signum(T)!=F.signum(b)&&Math.abs(T)<=90&&(Math.abs(E)>180&&(E+=360*F.signum(E)),x=w),g=b+E-E%360,x!=w&&(g+=360*F.signum(E)),o[a]=g}o[a+1]=b,h+=g*r,l.rotation=h-360*(16384-(16384.499999999996-h/360|0))}}else t.apply(e,0,n,null,1,i,v.mixIn)},t.prototype.queueEvents=function(t,e){for(var n=t.animationStart,r=t.animationEnd,i=r-n,o=t.trackLast%i,a=this.events,s=0,u=a.length;s<u;s++){var c=a[s];if(c.time<o)break;c.time>r||this.queue.event(t,c)}for((t.loop?0==i||o>t.trackTime%i:e>=r&&t.animationLast<r)&&this.queue.complete(t);s<u;s++){a[s].time<n||this.queue.event(t,a[s])}},t.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,n=this.tracks.length;e<n;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},t.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var n=e;;){var r=n.mixingFrom;if(null==r)break;this.queue.end(r),n.mixingFrom=null,n.mixingTo=null,n=r}this.tracks[e.trackIndex]=null,this.queue.drain()}}},t.prototype.setCurrent=function(t,e,n){var r=this.expandToIndex(t);this.tracks[t]=e,null!=r&&(n&&this.queue.interrupt(r),e.mixingFrom=r,r.mixingTo=e,e.mixTime=0,null!=r.mixingFrom&&r.mixDuration>0&&(e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(e)},t.prototype.setAnimation=function(t,e,n){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,r,n)},t.prototype.setAnimationWith=function(t,e,n){if(null==e)throw new Error("animation cannot be null.");var r=!0,i=this.expandToIndex(t);null!=i&&(-1==i.nextTrackLast?(this.tracks[t]=i.mixingFrom,this.queue.interrupt(i),this.queue.end(i),this.disposeNext(i),i=i.mixingFrom,r=!1):this.disposeNext(i));var o=this.trackEntry(t,e,n,i);return this.setCurrent(t,o,r),this.queue.drain(),o},t.prototype.addAnimation=function(t,e,n,r){var i=this.data.skeletonData.findAnimation(e);if(null==i)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,i,n,r)},t.prototype.addAnimationWith=function(t,e,n,r){if(null==e)throw new Error("animation cannot be null.");var i=this.expandToIndex(t);if(null!=i)for(;null!=i.next;)i=i.next;var o=this.trackEntry(t,e,n,i);if(null==i)this.setCurrent(t,o,!0),this.queue.drain();else if(i.next=o,r<=0){var a=i.animationEnd-i.animationStart;0!=a?(i.loop?r+=a*(1+(i.trackTime/a|0)):r+=Math.max(a,i.trackTime),r-=this.data.getMix(i.animation,e)):r=i.trackTime}return o.delay=r,o},t.prototype.setEmptyAnimation=function(e,n){var r=this.setAnimationWith(e,t.emptyAnimation,!1);return r.mixDuration=n,r.trackEnd=n,r},t.prototype.addEmptyAnimation=function(e,n,r){r<=0&&(r-=n);var i=this.addAnimationWith(e,t.emptyAnimation,!1,r);return i.mixDuration=n,i.trackEnd=n,i},t.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,r=this.tracks.length;n<r;n++){var i=this.tracks[n];null!=i&&this.setEmptyAnimation(i.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},t.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(G.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)},t.prototype.trackEntry=function(t,e,n,r){var i=this.trackEntryPool.obtain();return i.trackIndex=t,i.animation=e,i.loop=n,i.holdPrevious=!1,i.eventThreshold=0,i.attachmentThreshold=0,i.drawOrderThreshold=0,i.animationStart=0,i.animationEnd=e.duration,i.animationLast=-1,i.nextAnimationLast=-1,i.delay=0,i.trackTime=0,i.trackLast=-1,i.nextTrackLast=-1,i.trackEnd=Number.MAX_VALUE,i.timeScale=1,i.alpha=1,i.interruptAlpha=1,i.mixTime=0,i.mixDuration=null==r?0:this.data.getMix(r.animation,e),i.mixBlend=m.replace,i},t.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},t.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=0,e=this.tracks.length;t<e;t++){var n=this.tracks[t];if(null!=n){for(;null!=n.mixingFrom;)n=n.mixingFrom;do{null!=n.mixingFrom&&n.mixBlend==m.add||this.computeHold(n),n=n.mixingTo}while(null!=n)}}},t.prototype.computeHold=function(e){var n=e.mixingTo,r=e.animation.timelines,i=e.animation.timelines.length,o=G.setArraySize(e.timelineMode,i);e.timelineHoldMix.length=0;var a=G.setArraySize(e.timelineHoldMix,i),s=this.propertyIDs;if(null!=n&&n.holdPrevious)for(var u=0;u<i;u++)o[u]=s.add(r[u].getPropertyId())?t.HOLD_FIRST:t.HOLD_SUBSEQUENT;else t:for(u=0;u<i;u++){var c=r[u],l=c.getPropertyId();if(s.add(l))if(null==n||c instanceof Tt||c instanceof Ot||c instanceof St||!n.animation.hasTimeline(l))o[u]=t.FIRST;else{for(var h=n.mixingTo;null!=h;h=h.mixingTo)if(!h.animation.hasTimeline(l)){if(e.mixDuration>0){o[u]=t.HOLD_MIX,a[u]=h;continue t}break}o[u]=t.HOLD_FIRST}else o[u]=t.SUBSEQUENT}},t.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},t.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},t.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},t.prototype.clearListeners=function(){this.listeners.length=0},t.prototype.clearListenerNotifications=function(){this.queue.clear()},t.prototype.setAnimationByName=function(e,n,r){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(e,n,r)},t.prototype.addAnimationByName=function(e,n,r,i){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(e,n,r,i)},t.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},t.prototype.hasAnimationByName=function(e){return t.deprecatedWarning3||(t.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(e)},t.emptyAnimation=new pt("<empty>",[],0),t.SUBSEQUENT=0,t.FIRST=1,t.HOLD_SUBSEQUENT=2,t.HOLD_FIRST=3,t.HOLD_MIX=4,t.SETUP=1,t.CURRENT=2,t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t.deprecatedWarning3=!1,t}(),Nt=function(){function t(){this.mixBlend=m.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},t.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(t.prototype,"time",{get:function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(e){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),t.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t}(),Mt=function(){function t(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return t.prototype.start=function(t){this.objects.push(dt.start),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.interrupt=function(t){this.objects.push(dt.interrupt),this.objects.push(t)},t.prototype.end=function(t){this.objects.push(dt.end),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.dispose=function(t){this.objects.push(dt.dispose),this.objects.push(t)},t.prototype.complete=function(t){this.objects.push(dt.complete),this.objects.push(t)},t.prototype.event=function(t,e){this.objects.push(dt.event),this.objects.push(t),this.objects.push(e)},t.prototype.deprecateStuff=function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];switch(r){case dt.start:null!=i.listener&&i.listener.start&&i.listener.start(i);for(var o=0;o<e.length;o++)e[o].start&&e[o].start(i);i.onStart&&this.deprecateStuff()&&i.onStart(i.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(i.trackIndex);break;case dt.interrupt:null!=i.listener&&i.listener.interrupt&&i.listener.interrupt(i);for(o=0;o<e.length;o++)e[o].interrupt&&e[o].interrupt(i);break;case dt.end:null!=i.listener&&i.listener.end&&i.listener.end(i);for(o=0;o<e.length;o++)e[o].end&&e[o].end(i);i.onEnd&&this.deprecateStuff()&&i.onEnd(i.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(i.trackIndex);case dt.dispose:null!=i.listener&&i.listener.dispose&&i.listener.dispose(i);for(o=0;o<e.length;o++)e[o].dispose&&e[o].dispose(i);this.animState.trackEntryPool.free(i);break;case dt.complete:null!=i.listener&&i.listener.complete&&i.listener.complete(i);for(o=0;o<e.length;o++)e[o].complete&&e[o].complete(i);var a=F.toInt(i.loopsCount());i.onComplete&&this.deprecateStuff()&&i.onComplete(i.trackIndex,a),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(i.trackIndex,a);break;case dt.event:var s=t[2+n++];null!=i.listener&&i.listener.event&&i.listener.event(i,s);for(o=0;o<e.length;o++)e[o].event&&e[o].event(i,s);i.onEvent&&this.deprecateStuff()&&i.onEvent(i.trackIndex,s),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(i.trackIndex,s)}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t.deprecatedWarning1=!1,t}();!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(dt||(dt={}));var jt,Dt=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}(),Lt=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,n){var r=this.skeletonData.findAnimation(t);if(null==r)throw new Error("Animation not found: "+t);var i=this.skeletonData.findAnimation(e);if(null==i)throw new Error("Animation not found: "+e);this.setMixWith(r,i,n)},t.prototype.setMixByName=function(e,n,r){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,n,r)},t.prototype.setMixWith=function(t,e,n){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var r=t.name+"."+e.name;this.animationToMixTime[r]=n},t.prototype.getMix=function(t,e){var n=t.name+"."+e.name,r=this.animationToMixTime[n];return void 0===r?this.defaultMix:r},t.deprecatedWarning1=!1,t}(),Bt=function(){function t(t){this.atlas=t}return t.prototype.newRegionAttachment=function(t,e,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (region attachment: "+e+")");var i=new lt(e);return i.region=r,i},t.prototype.newMeshAttachment=function(t,e,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+e+")");var i=new st(e);return i.region=r,i},t.prototype.newBoundingBoxAttachment=function(t,e){return new ot(e)},t.prototype.newPathAttachment=function(t,e){return new ut(e)},t.prototype.newPointAttachment=function(t,e){return new ct(e)},t.prototype.newClippingAttachment=function(t,e){return new at(e)},t}(),Ft=function(){function t(t,e,n){if(this.matrix=new l.d,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()}return Object.defineProperty(t.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),t.prototype.isActive=function(){return this.active},t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(t,e,n,r,i,o,a){this.ax=t,this.ay=e,this.arotation=n,this.ascaleX=r,this.ascaleY=i,this.ashearX=o,this.ashearY=a,this.appliedValid=!0;var s=this.parent,u=this.matrix,c=this.skeleton.scaleX,l=X?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==s){var h=this.skeleton,f=n+90+a;return u.a=F.cosDeg(n+o)*r*c,u.c=F.cosDeg(f)*i*c,u.b=F.sinDeg(n+o)*r*l,u.d=F.sinDeg(f)*i*l,u.tx=t*c+h.x,void(u.ty=e*l+h.y)}var p=s.matrix.a,d=s.matrix.c,y=s.matrix.b,m=s.matrix.d;switch(u.tx=p*t+d*e+s.matrix.tx,u.ty=y*t+m*e+s.matrix.ty,this.data.transformMode){case b.Normal:f=n+90+a;var v=F.cosDeg(n+o)*r,_=F.cosDeg(f)*i,g=F.sinDeg(n+o)*r,E=F.sinDeg(f)*i;return u.a=p*v+d*g,u.c=p*_+d*E,u.b=y*v+m*g,void(u.d=y*_+m*E);case b.OnlyTranslation:f=n+90+a;u.a=F.cosDeg(n+o)*r,u.c=F.cosDeg(f)*i,u.b=F.sinDeg(n+o)*r,u.d=F.sinDeg(f)*i;break;case b.NoRotationOrReflection:var T=0;(S=p*p+y*y)>1e-4?(S=Math.abs(p*m-d*y)/S,p/=this.skeleton.scaleX,d=(y/=this.skeleton.scaleY)*S,m=p*S,T=Math.atan2(y,p)*F.radDeg):(p=0,y=0,T=90-Math.atan2(m,d)*F.radDeg);var w=n+o-T,x=n+a-T+90;v=F.cosDeg(w)*r,_=F.cosDeg(x)*i,g=F.sinDeg(w)*r,E=F.sinDeg(x)*i;u.a=p*v-d*g,u.c=p*_-d*E,u.b=y*v+m*g,u.d=y*_+m*E;break;case b.NoScale:case b.NoScaleOrReflection:var S,O=F.cosDeg(n),P=F.sinDeg(n),R=(p*O+d*P)/c,A=(y*O+m*P)/l;(S=Math.sqrt(R*R+A*A))>1e-5&&(S=1/S),R*=S,A*=S,S=Math.sqrt(R*R+A*A),this.data.transformMode==b.NoScale&&p*m-d*y<0!=(X?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(S=-S);var I=Math.PI/2+Math.atan2(A,R),C=Math.cos(I)*S,k=Math.sin(I)*S;v=F.cosDeg(o)*r,_=F.cosDeg(90+a)*i,g=F.sinDeg(o)*r,E=F.sinDeg(90+a)*i;u.a=R*v+C*g,u.c=R*_+C*E,u.b=A*v+k*g,u.d=A*_+k*E}u.a*=c,u.c*=c,u.b*=l,u.d*=l},t.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*F.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*F.radDeg},t.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},t.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},t.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent,e=this.matrix;if(null==t)return this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*F.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,void(this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*F.radDeg);var n=t.matrix,r=1/(n.a*n.d-n.b*n.c),i=e.tx-n.tx,o=e.ty-n.ty;this.ax=i*n.d*r-o*n.c*r,this.ay=o*n.a*r-i*n.b*r;var a=r*n.d,s=r*n.a,u=r*n.c,c=r*n.b,l=a*e.a-u*e.b,h=a*e.c-u*e.d,f=s*e.b-c*e.a,p=s*e.d-c*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(l*l+f*f),this.ascaleX>1e-4){var d=l*p-h*f;this.ascaleY=d/this.ascaleX,this.ashearY=Math.atan2(l*h+f*p,d)*F.radDeg,this.arotation=Math.atan2(f,l)*F.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(h*h+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,h)*F.radDeg},t.prototype.worldToLocal=function(t){var e=this.matrix,n=e.a,r=e.c,i=e.b,o=e.d,a=1/(n*o-r*i),s=t.x-e.tx,u=t.y-e.ty;return t.x=s*o*a-u*r*a,t.y=u*n*a-s*i*a,t},t.prototype.localToWorld=function(t){var e=this.matrix,n=t.x,r=t.y;return t.x=n*e.a+r*e.c+e.tx,t.y=n*e.b+r*e.d+e.ty,t},t.prototype.worldToLocalRotation=function(t){var e=F.sinDeg(t),n=F.cosDeg(t),r=this.matrix;return Math.atan2(r.a*e-r.b*n,r.d*n-r.c*e)*F.radDeg},t.prototype.localToWorldRotation=function(t){var e=F.sinDeg(t),n=F.cosDeg(t),r=this.matrix;return Math.atan2(n*r.b+e*r.d,n*r.a+e*r.c)*F.radDeg},t.prototype.rotateWorld=function(t){var e=this.matrix,n=e.a,r=e.c,i=e.b,o=e.d,a=F.cosDeg(t),s=F.sinDeg(t);e.a=a*n-s*i,e.c=a*r-s*o,e.b=s*n+a*i,e.d=s*r+a*o,this.appliedValid=!1},t}(),Ut=function(t,e,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=b.Normal,this.skinRequired=!1,this.color=new B,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=n},Gt=function(t,e,n){this.name=t,this.order=e,this.skinRequired=n},Ht=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e},Vt=function(t){this.name=t},Xt=function(){function t(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},t.prototype.apply1=function(t,e,n,r,i,o,a){t.appliedValid||t.updateAppliedTransform();var s=t.parent.matrix,u=s.a,c=s.c,l=s.b,h=s.d,f=-t.ashearX-t.arotation,p=0,d=0;switch(t.data.transformMode){case b.OnlyTranslation:p=e-t.worldX,d=n-t.worldY;break;case b.NoRotationOrReflection:var y=Math.abs(u*h-c*l)/(u*u+l*l),m=u/t.skeleton.scaleX,v=l/t.skeleton.scaleY;c=-v*y*t.skeleton.scaleX,h=m*y*t.skeleton.scaleY,f+=Math.atan2(v,m)*F.radDeg;default:var _=e-s.tx,g=n-s.ty,E=u*h-c*l;p=(_*h-g*c)/E-t.ax,d=(g*u-_*l)/E-t.ay}f+=Math.atan2(d,p)*F.radDeg,t.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);var T=t.ascaleX,w=t.ascaleY;if(r||i){switch(t.data.transformMode){case b.NoScale:case b.NoScaleOrReflection:p=e-t.worldX,d=n-t.worldY}var x=t.data.length*T,S=Math.sqrt(p*p+d*d);if(r&&S<x||i&&S>x&&x>1e-4)T*=y=(S/x-1)*a+1,o&&(w*=y)}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+f*a,T,w,t.ashearX,t.ashearY)},t.prototype.apply2=function(t,e,n,r,i,o,a,s){if(0!=s){t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();var u=t.ax,c=t.ay,l=t.ascaleX,h=l,f=t.ascaleY,p=e.ascaleX,d=t.matrix,y=0,m=0,v=0;l<0?(l=-l,y=180,v=-1):(y=0,v=1),f<0&&(f=-f,v=-v),p<0?(p=-p,m=180):m=0;var _=e.ax,g=0,b=0,E=0,T=d.a,w=d.c,x=d.b,S=d.d,O=Math.abs(l-f)<=1e-4;O?(b=T*_+w*(g=e.ay)+d.tx,E=x*_+S*g+d.ty):(g=0,b=T*_+d.tx,E=x*_+d.ty);var P=t.parent.matrix;T=P.a,w=P.c,x=P.b;var R,A,I=1/(T*(S=P.d)-w*x),C=b-P.tx,k=E-P.ty,N=(C*S-k*w)*I-u,M=(k*T-C*x)*I-c,j=Math.sqrt(N*N+M*M),D=e.data.length*p;if(j<1e-4)return this.apply1(t,n,r,!1,o,!1,s),void e.updateWorldTransformWith(_,g,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);var L=((C=n-P.tx)*S-(k=r-P.ty)*w)*I-u,B=(k*T-C*x)*I-c,U=L*L+B*B;if(0!=a){a*=l*(p+1)/2;var G=Math.sqrt(U),H=G-j-D*l+a;if(H>0){var V=Math.min(1,H/(2*a))-1;U=(L-=(V=(H-a*(1-V*V))/G)*L)*L+(B-=V*B)*B}}t:if(O){var X=(U-j*j-(D*=l)*D)/(2*j*D);X<-1?X=-1:X>1&&(X=1,o&&(h*=(Math.sqrt(U)/(j+D)-1)*s+1)),A=Math.acos(X)*i,T=j+D*X,w=D*Math.sin(A),R=Math.atan2(B*T-L*w,L*T+B*w)}else{var W=(T=l*D)*T,Y=(w=f*D)*w,z=Math.atan2(B,L),q=-2*Y*j,K=Y-W;if((S=q*q-4*K*(x=Y*j*j+W*U-W*Y))>=0){var Z=Math.sqrt(S);q<0&&(Z=-Z);var $=(Z=-(q+Z)/2)/K,J=x/Z,Q=Math.abs($)<Math.abs(J)?$:J;if(Q*Q<=U){k=Math.sqrt(U-Q*Q)*i,R=z-Math.atan2(k,Q),A=Math.atan2(k/f,(Q-j)/l);break t}}var tt=F.PI,et=j-T,nt=et*et,rt=0,it=0,ot=j+T,at=ot*ot,st=0;(x=-T*j/(W-Y))>=-1&&x<=1&&(x=Math.acos(x),(S=(C=T*Math.cos(x)+j)*C+(k=w*Math.sin(x))*k)<nt&&(tt=x,nt=S,et=C,rt=k),S>at&&(it=x,at=S,ot=C,st=k)),U<=(nt+at)/2?(R=z-Math.atan2(rt*i,et),A=tt*i):(R=z-Math.atan2(st*i,ot),A=it*i)}var ut=Math.atan2(g,_)*v,ct=t.arotation;(R=(R-ut)*F.radDeg+y-ct)>180?R-=360:R<-180&&(R+=360),t.updateWorldTransformWith(u,c,ct+R*s,h,t.ascaleY,0,0),ct=e.arotation,(A=((A+ut)*F.radDeg-e.ashearX)*v+m-ct)>180?A-=360:A<-180&&(A+=360),e.updateWorldTransformWith(_,g,ct+A*s,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}else e.updateWorldTransform()},t}(),Wt=function(t){function e(e){var n=t.call(this,e,0,!1)||this;return n.bones=new Array,n.bendDirection=1,n.compress=!1,n.stretch=!1,n.uniform=!1,n.mix=1,n.softness=0,n}return et(e,t),e}(Gt),Yt=function(t){function e(e){var n=t.call(this,e,0,!1)||this;return n.bones=new Array,n}return et(e,t),e}(Gt);!function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"}(jt||(jt={}));var zt=function(){function t(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,r=t.bones.length;n<r;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var e=this.target.getAttachment();if(e instanceof ut){var n=this.rotateMix,r=this.translateMix,i=n>0;if(r>0||i){var o=this.data,a=o.spacingMode,s=a==jt.Length,u=o.rotateMode,c=u==g.Tangent,l=u==g.ChainScale,h=this.bones.length,f=c?h:h+1,p=this.bones,d=G.setArraySize(this.spaces,f),y=null,m=this.spacing;if(l||s){l&&(y=G.setArraySize(this.lengths,h));for(var v=0,b=f-1;v<b;){var E=(C=p[v]).data.length;if(E<t.epsilon)l&&(y[v]=0),d[++v]=0;else{var T=E*C.matrix.a,w=E*C.matrix.b,x=Math.sqrt(T*T+w*w);l&&(y[v]=x),d[++v]=(s?E+m:m)*x/E}}}else for(v=1;v<f;v++)d[v]=m;var S=this.computeWorldPositions(e,f,c,o.positionMode==_.Percent,a==jt.Percent),O=S[0],P=S[1],R=o.offsetRotation,A=!1;if(0==R)A=u==g.Chain;else A=!1,R*=(I=this.target.bone.matrix).a*I.d-I.b*I.c>0?F.degRad:-F.degRad;v=0;for(var I=3;v<h;v++,I+=3){var C,k=(C=p[v]).matrix;k.tx+=(O-k.tx)*r,k.ty+=(P-k.ty)*r;var N=(T=S[I])-O,M=(w=S[I+1])-P;if(l){var j=y[v];if(0!=j){var D=(Math.sqrt(N*N+M*M)/j-1)*n+1;k.a*=D,k.b*=D}}if(O=T,P=w,i){var L=k.a,B=k.c,U=k.b,H=k.d,V=0,X=0,W=0;if(V=c?S[I-1]:0==d[v+1]?S[I+2]:Math.atan2(M,N),V-=Math.atan2(U,L),A){X=Math.cos(V),W=Math.sin(V);var Y=C.data.length;O+=(Y*(X*L-W*U)-N)*n,P+=(Y*(W*L+X*U)-M)*n}else V+=R;V>F.PI?V-=F.PI2:V<-F.PI&&(V+=F.PI2),V*=n,X=Math.cos(V),W=Math.sin(V),k.a=X*L-W*U,k.c=X*B-W*H,k.b=W*L+X*U,k.d=W*B+X*H}C.appliedValid=!1}}}},t.prototype.computeWorldPositions=function(e,n,r,i,o){var a=this.target,s=this.position,u=this.spaces,c=G.setArraySize(this.positions,3*n+2),l=null,h=e.closed,f=e.worldVerticesLength,p=f/6,d=t.NONE;if(!e.constantSpeed){var y=e.lengths,m=y[p-=h?1:2];if(i&&(s*=m),o)for(var v=0;v<n;v++)u[v]*=m;l=G.setArraySize(this.world,8);v=0;for(var _=0,g=0;v<n;v++,_+=3){var b=s+=W=u[v];if(h)(b%=m)<0&&(b+=m),g=0;else{if(b<0){d!=t.BEFORE&&(d=t.BEFORE,e.computeWorldVertices(a,2,4,l,0,2)),this.addBeforePosition(b,l,0,c,_);continue}if(b>m){d!=t.AFTER&&(d=t.AFTER,e.computeWorldVertices(a,f-6,4,l,0,2)),this.addAfterPosition(b-m,l,0,c,_);continue}}for(;;g++){var E=y[g];if(!(b>E)){if(0==g)b/=E;else b=(b-(K=y[g-1]))/(E-K);break}}g!=d&&(d=g,h&&g==p?(e.computeWorldVertices(a,f-4,4,l,0,2),e.computeWorldVertices(a,0,4,l,4,2)):e.computeWorldVertices(a,6*g+2,8,l,0,2)),this.addCurvePosition(b,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],c,_,r||v>0&&0==W)}return c}h?(f+=2,l=G.setArraySize(this.world,f),e.computeWorldVertices(a,2,f-4,l,0,2),e.computeWorldVertices(a,0,2,l,f-4,2),l[f-2]=l[0],l[f-1]=l[1]):(p--,f-=4,l=G.setArraySize(this.world,f),e.computeWorldVertices(a,2,f,l,0,2));for(var T=G.setArraySize(this.curves,p),w=0,x=l[0],S=l[1],O=0,P=0,R=0,A=0,I=0,C=0,k=0,N=0,M=0,j=0,D=0,L=0,B=0,F=0,U=(v=0,2);v<p;v++,U+=6)O=l[U],P=l[U+1],R=l[U+2],A=l[U+3],D=2*(k=.1875*(x-2*O+R))+(M=.09375*(3*(O-R)-x+(I=l[U+4]))),L=2*(N=.1875*(S-2*P+A))+(j=.09375*(3*(P-A)-S+(C=l[U+5]))),B=.75*(O-x)+k+.16666667*M,F=.75*(P-S)+N+.16666667*j,w+=Math.sqrt(B*B+F*F),B+=D,F+=L,D+=M,L+=j,w+=Math.sqrt(B*B+F*F),B+=D,F+=L,w+=Math.sqrt(B*B+F*F),B+=D+M,F+=L+j,w+=Math.sqrt(B*B+F*F),T[v]=w,x=I,S=C;if(i&&(s*=w),o)for(v=0;v<n;v++)u[v]*=w;for(var H=this.segments,V=0,X=(v=0,_=0,g=0,0);v<n;v++,_+=3){var W;b=s+=W=u[v];if(h)(b%=w)<0&&(b+=w),g=0;else{if(b<0){this.addBeforePosition(b,l,0,c,_);continue}if(b>w){this.addAfterPosition(b-w,l,f-4,c,_);continue}}for(;;g++){var Y=T[g];if(!(b>Y)){if(0==g)b/=Y;else b=(b-(K=T[g-1]))/(Y-K);break}}if(g!=d){d=g;var z=6*g;for(x=l[z],S=l[z+1],O=l[z+2],P=l[z+3],R=l[z+4],A=l[z+5],D=2*(k=.03*(x-2*O+R))+(M=.006*(3*(O-R)-x+(I=l[z+6]))),L=2*(N=.03*(S-2*P+A))+(j=.006*(3*(P-A)-S+(C=l[z+7]))),B=.3*(O-x)+k+.16666667*M,F=.3*(P-S)+N+.16666667*j,V=Math.sqrt(B*B+F*F),H[0]=V,z=1;z<8;z++)B+=D,F+=L,D+=M,L+=j,V+=Math.sqrt(B*B+F*F),H[z]=V;B+=D,F+=L,V+=Math.sqrt(B*B+F*F),H[8]=V,B+=D+M,F+=L+j,V+=Math.sqrt(B*B+F*F),H[9]=V,X=0}for(b*=V;;X++){var q=H[X];if(!(b>q)){var K;if(0==X)b/=q;else b=X+(b-(K=H[X-1]))/(q-K);break}}this.addCurvePosition(.1*b,x,S,O,P,R,A,I,C,c,_,r||v>0&&0==W)}return c},t.prototype.addBeforePosition=function(t,e,n,r,i){var o=e[n],a=e[n+1],s=e[n+2]-o,u=e[n+3]-a,c=Math.atan2(u,s);r[i]=o+t*Math.cos(c),r[i+1]=a+t*Math.sin(c),r[i+2]=c},t.prototype.addAfterPosition=function(t,e,n,r,i){var o=e[n+2],a=e[n+3],s=o-e[n],u=a-e[n+1],c=Math.atan2(u,s);r[i]=o+t*Math.cos(c),r[i+1]=a+t*Math.sin(c),r[i+2]=c},t.prototype.addCurvePosition=function(t,e,n,r,i,o,a,s,u,c,l,h){(0==t||isNaN(t))&&(t=1e-4);var f=t*t,p=f*t,d=1-t,y=d*d,m=y*d,v=d*t,_=3*v,g=d*_,b=_*t,E=e*m+r*g+o*b+s*p,T=n*m+i*g+a*b+u*p;c[l]=E,c[l+1]=T,h&&(c[l+2]=Math.atan2(T-(n*y+i*v*2+a*f),E-(e*y+r*v*2+o*f)))},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,t.epsilon=1e-5,t}(),qt=function(){function t(t,e){if(this.deform=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new B,this.darkColor=null==t.darkColor?null:new B,this.setToSetupPose(),this.blendMode=this.data.blendMode}return t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},t.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}(),Kt=function(){function t(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new V,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},t.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target,o=i.matrix,a=o.a,s=o.c,u=o.b,c=o.d,l=a*c-s*u>0?F.degRad:-F.degRad,h=this.data.offsetRotation*l,f=this.data.offsetShearY*l,p=this.bones,d=0,y=p.length;d<y;d++){var m=p[d],v=!1,_=m.matrix;if(0!=t){var g=_.a,b=_.c,E=_.b,T=_.d;(R=Math.atan2(u,a)-Math.atan2(E,g)+h)>F.PI?R-=F.PI2:R<-F.PI&&(R+=F.PI2),R*=t;var w=Math.cos(R),x=Math.sin(R);_.a=w*g-x*E,_.c=w*b-x*T,_.b=x*g+w*E,_.d=x*b+w*T,v=!0}if(0!=e){var S=this.temp;i.localToWorld(S.set(this.data.offsetX,this.data.offsetY)),_.tx+=(S.x-_.tx)*e,_.ty+=(S.y-_.ty)*e,v=!0}if(n>0){var O=Math.sqrt(_.a*_.a+_.b*_.b),P=Math.sqrt(a*a+u*u);O>1e-5&&(O=(O+(P-O+this.data.offsetScaleX)*n)/O),_.a*=O,_.b*=O,O=Math.sqrt(_.c*_.c+_.d*_.d),P=Math.sqrt(s*s+c*c),O>1e-5&&(O=(O+(P-O+this.data.offsetScaleY)*n)/O),_.c*=O,_.d*=O,v=!0}if(r>0){b=_.c,T=_.d;var R,A=Math.atan2(T,b);(R=Math.atan2(c,s)-Math.atan2(u,a)-(A-Math.atan2(_.b,_.a)))>F.PI?R-=F.PI2:R<-F.PI&&(R+=F.PI2),R=A+(R+f)*r;O=Math.sqrt(b*b+T*T);_.c=Math.cos(R)*O,_.d=Math.sin(R)*O,v=!0}v&&(m.appliedValid=!1)}},t.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target,o=i.matrix,a=o.a,s=o.c,u=o.b,c=o.d,l=a*c-s*u>0?F.degRad:-F.degRad,h=this.data.offsetRotation*l,f=this.data.offsetShearY*l,p=this.bones,d=0,y=p.length;d<y;d++){var m=p[d],v=!1,_=m.matrix;if(0!=t){var g=_.a,b=_.c,E=_.b,T=_.d;(P=Math.atan2(u,a)+h)>F.PI?P-=F.PI2:P<-F.PI&&(P+=F.PI2),P*=t;var w=Math.cos(P),x=Math.sin(P);_.a=w*g-x*E,_.c=w*b-x*T,_.b=x*g+w*E,_.d=x*b+w*T,v=!0}if(0!=e){var S=this.temp;i.localToWorld(S.set(this.data.offsetX,this.data.offsetY)),_.tx+=S.x*e,_.ty+=S.y*e,v=!0}if(n>0){var O=(Math.sqrt(a*a+u*u)-1+this.data.offsetScaleX)*n+1;_.a*=O,_.b*=O,O=(Math.sqrt(s*s+c*c)-1+this.data.offsetScaleY)*n+1,_.c*=O,_.d*=O,v=!0}if(r>0){var P;(P=Math.atan2(c,s)-Math.atan2(u,a))>F.PI?P-=F.PI2:P<-F.PI&&(P+=F.PI2);b=_.c,T=_.d;P=Math.atan2(T,b)+(P-F.PI/2+f)*r;O=Math.sqrt(b*b+T*T);_.c=Math.cos(P)*O,_.d=Math.sin(P)*O,v=!0}v&&(m.appliedValid=!1)}},t.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();for(var o=this.bones,a=0,s=o.length;a<s;a++){var u=o[a];u.appliedValid||u.updateAppliedTransform();var c=u.arotation;if(0!=t){var l=i.arotation-c+this.data.offsetRotation;c+=(l-=360*(16384-(16384.499999999996-l/360|0)))*t}var h=u.ax,f=u.ay;0!=e&&(h+=(i.ax-h+this.data.offsetX)*e,f+=(i.ay-f+this.data.offsetY)*e);var p=u.ascaleX,d=u.ascaleY;n>0&&(p>1e-5&&(p=(p+(i.ascaleX-p+this.data.offsetScaleX)*n)/p),d>1e-5&&(d=(d+(i.ascaleY-d+this.data.offsetScaleY)*n)/d));var y=u.ashearY;if(r>0){l=i.ashearY-y+this.data.offsetShearY;l-=360*(16384-(16384.499999999996-l/360|0)),u.shearY+=l*r}u.updateWorldTransformWith(h,f,c,p,d,u.ashearX,y)}},t.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();for(var o=this.bones,a=0,s=o.length;a<s;a++){var u=o[a];u.appliedValid||u.updateAppliedTransform();var c=u.arotation;0!=t&&(c+=(i.arotation+this.data.offsetRotation)*t);var l=u.ax,h=u.ay;0!=e&&(l+=(i.ax+this.data.offsetX)*e,h+=(i.ay+this.data.offsetY)*e);var f=u.ascaleX,p=u.ascaleY;n>0&&(f>1e-5&&(f*=(i.ascaleX-1+this.data.offsetScaleX)*n+1),p>1e-5&&(p*=(i.ascaleY-1+this.data.offsetScaleY)*n+1));var d=u.ashearY;r>0&&(d+=(i.ashearY+this.data.offsetShearY)*r),u.updateWorldTransformWith(l,h,c,f,p,u.ashearX,d)}},t}(),Zt=function(){function t(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var n=t.bones[e],r=void 0;if(null==n.parent)r=new Ft(n,this,null);else{var i=this.bones[n.parent.index];r=new Ft(n,this,i),i.children.push(r)}this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(e=0;e<t.slots.length;e++){var o=t.slots[e],a=(r=this.bones[o.boneData.index],new qt(o,r));this.slots.push(a),this.drawOrder.push(a)}this.ikConstraints=new Array;for(e=0;e<t.ikConstraints.length;e++){var s=t.ikConstraints[e];this.ikConstraints.push(new Xt(s,this))}this.transformConstraints=new Array;for(e=0;e<t.transformConstraints.length;e++){var u=t.transformConstraints[e];this.transformConstraints.push(new Kt(u,this))}this.pathConstraints=new Array;for(e=0;e<t.pathConstraints.length;e++){var c=t.pathConstraints[e];this.pathConstraints.push(new zt(c,this))}this.color=new B(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,n=t.length;e<n;e++){(i=t[e]).sorted=i.data.skinRequired,i.active=!i.sorted}if(null!=this.skin){var r=this.skin.bones;for(e=0,n=this.skin.bones.length;e<n;e++){var i=this.bones[r[e].index];do{i.sorted=!1,i.active=!0,i=i.parent}while(null!=i)}}var o=this.ikConstraints,a=this.transformConstraints,s=this.pathConstraints,u=o.length,c=a.length,l=s.length,h=u+c+l;t:for(e=0;e<h;e++){for(var f=0;f<u;f++){if((p=o[f]).data.order==e){this.sortIkConstraint(p);continue t}}for(f=0;f<c;f++){if((p=a[f]).data.order==e){this.sortTransformConstraint(p);continue t}}for(f=0;f<l;f++){var p;if((p=s[f]).data.order==e){this.sortPathConstraint(p);continue t}}}for(e=0,n=t.length;e<n;e++)this.sortBone(t[e])},t.prototype.sortIkConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&G.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target;this.sortBone(e);var n=t.bones,r=n[0];if(this.sortBone(r),n.length>1){var i=n[n.length-1];this._updateCache.indexOf(i)>-1||this.updateCacheReset.push(i)}this._updateCache.push(t),this.sortReset(r.children),n[n.length-1].sorted=!0}},t.prototype.sortPathConstraint=function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||null!=this.skin&&G.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target,n=e.data.index,r=e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,r),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,r);for(var i=0,o=this.data.skins.length;i<o;i++)this.sortPathConstraintAttachment(this.data.skins[i],n,r);var a=e.getAttachment();a instanceof ut&&this.sortPathConstraintAttachmentWith(a,r);var s=t.bones,u=s.length;for(i=0;i<u;i++)this.sortBone(s[i]);this._updateCache.push(t);for(i=0;i<u;i++)this.sortReset(s[i].children);for(i=0;i<u;i++)s[i].sorted=!0}},t.prototype.sortTransformConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&G.contains(this.skin.constraints,t.data,!0)),t.active){this.sortBone(t.target);var e=t.bones,n=e.length;if(t.data.local)for(var r=0;r<n;r++){var i=e[r];this.sortBone(i.parent),this._updateCache.indexOf(i)>-1||this.updateCacheReset.push(i)}else for(r=0;r<n;r++)this.sortBone(e[r]);this._updateCache.push(t);for(var o=0;o<n;o++)this.sortReset(e[o].children);for(o=0;o<n;o++)e[o].sorted=!0}},t.prototype.sortPathConstraintAttachment=function(t,e,n){var r=t.attachments[e];if(r)for(var i in r)this.sortPathConstraintAttachmentWith(r[i],n)},t.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof ut){var n=t.bones;if(null==n)this.sortBone(e);else for(var r=this.bones,i=0;i<n.length;)for(var o=n[i++],a=i+o;i<a;i++){var s=n[i];this.sortBone(r[s])}}},t.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},t.prototype.sortReset=function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];r.active&&(r.sorted&&this.sortReset(r.children),r.sorted=!1)}},t.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,n=t.length;e<n;e++){var r=t[e];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY,r.appliedValid=!0}var i=this._updateCache;for(e=0,n=i.length;e<n;e++)i[e].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].setToSetupPose();var r=this.ikConstraints;for(e=0,n=r.length;e<n;e++){(s=r[e]).mix=s.data.mix,s.softness=s.data.softness,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch}var i=this.transformConstraints;for(e=0,n=i.length;e<n;e++){var o=(s=i[e]).data;s.rotateMix=o.rotateMix,s.translateMix=o.translateMix,s.scaleMix=o.scaleMix,s.shearMix=o.shearMix}var a=this.pathConstraints;for(e=0,n=a.length;e<n;e++){var s;o=(s=a[e]).data;s.position=o.position,s.spacing=o.spacing,s.rotateMix=o.rotateMix,s.translateMix=o.translateMix}},t.prototype.setSlotsToSetupPose=function(){var t=this.slots;G.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,n=t.length;e<n;e++)t[e].setToSetupPose()},t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++)if(e[n].data.name==t)return n;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++)if(e[n].data.name==t)return n;return-1},t.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},t.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n],o=i.data.attachmentName;if(null!=o){var a=t.getAttachment(n,o);null!=a&&i.setAttachment(a)}}this.skin=t,this.updateCache()}},t.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},t.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var n=this.skin.getAttachment(t,e);if(null!=n)return n}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},t.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var n=this.slots,r=0,i=n.length;r<i;r++){var o=n[r];if(o.data.name==t){var a=null;if(null!=e&&null==(a=this.getAttachment(r,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void o.setAttachment(a)}}throw new Error("Slot not found: "+t)},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.getBounds=function(t,e,n){if(void 0===n&&(n=new Array(2)),null==t)throw new Error("offset cannot be null.");if(null==e)throw new Error("size cannot be null.");for(var r=this.drawOrder,i=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,u=0,c=r.length;u<c;u++){var l=r[u];if(l.bone.active){var h=0,f=null,p=l.getAttachment();if(p instanceof lt)h=8,f=G.setArraySize(n,h,0),p.computeWorldVertices(l.bone,f,0,2);else if(p instanceof st){var d=p;h=d.worldVerticesLength,f=G.setArraySize(n,h,0),d.computeWorldVertices(l,0,h,f,0,2)}if(null!=f)for(var y=0,m=f.length;y<m;y+=2){var v=f[y],_=f[y+1];i=Math.min(i,v),o=Math.min(o,_),a=Math.max(a,v),s=Math.max(s,_)}}}t.set(i,o),e.set(a-i,s-o)},t.prototype.update=function(t){this.time+=t},Object.defineProperty(t.prototype,"flipX",{get:function(){return-1==this.scaleX},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=e?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flipY",{get:function(){return-1==this.scaleY},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=e?1:-1},enumerable:!1,configurable:!0}),t.deprecatedWarning1=!1,t}(),$t=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},t}(),Jt=function(t,e,n){if(this.color=new B(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");if(null==n)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=n},Qt=function(t){function e(e){var n=t.call(this,e,0,!1)||this;return n.bones=new Array,n.rotateMix=0,n.translateMix=0,n.scaleMix=0,n.shearMix=0,n.offsetRotation=0,n.offsetX=0,n.offsetY=0,n.offsetScaleX=0,n.offsetScaleY=0,n.offsetShearY=0,n.relative=!1,n.local=!1,n}return et(e,t),e}(Gt),te=function(t,e,n){this.slotIndex=t,this.name=e,this.attachment=n},ee=function(){function t(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return t.prototype.setAttachment=function(t,e,n){if(null==n)throw new Error("attachment cannot be null.");var r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=n},t.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],r=!1,i=0;i<this.bones.length;i++)if(this.bones[i]==n){r=!0;break}r||this.bones.push(n)}for(e=0;e<t.constraints.length;e++){var o=t.constraints[e];for(r=!1,i=0;i<this.constraints.length;i++)if(this.constraints[i]==o){r=!0;break}r||this.constraints.push(o)}var a=t.getAttachments();for(e=0;e<a.length;e++){var s=a[e];this.setAttachment(s.slotIndex,s.name,s.attachment)}},t.prototype.copySkin=function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],r=!1,i=0;i<this.bones.length;i++)if(this.bones[i]==n){r=!0;break}r||this.bones.push(n)}for(e=0;e<t.constraints.length;e++){var o=t.constraints[e];for(r=!1,i=0;i<this.constraints.length;i++)if(this.constraints[i]==o){r=!0;break}r||this.constraints.push(o)}var a=t.getAttachments();for(e=0;e<a.length;e++){var s=a[e];null!=s.attachment&&(s.attachment instanceof st?(s.attachment=s.attachment.newLinkedMesh(),this.setAttachment(s.slotIndex,s.name,s.attachment)):(s.attachment=s.attachment.copy(),this.setAttachment(s.slotIndex,s.name,s.attachment)))}},t.prototype.getAttachment=function(t,e){var n=this.attachments[t];return n?n[e]:null},t.prototype.removeAttachment=function(t,e){var n=this.attachments[t];n&&(n[e]=null)},t.prototype.getAttachments=function(){for(var t=new Array,e=0;e<this.attachments.length;e++){var n=this.attachments[e];if(n)for(var r in n){var i=n[r];i&&t.push(new te(e,r,i))}}return t},t.prototype.getAttachmentsForSlot=function(t,e){var n=this.attachments[t];if(n)for(var r in n){var i=n[r];i&&e.push(new te(t,r,i))}},t.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},t.prototype.attachAll=function(t,e){for(var n=0,r=0;r<t.slots.length;r++){var i=t.slots[r],o=i.getAttachment();if(o&&n<e.attachments.length){var a=e.attachments[n];for(var s in a){if(o==a[s]){var u=this.getAttachment(n,s);null!=u&&i.setAttachment(u);break}}}n++}},t}(),ne=function(){function t(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return t.prototype.readSkeletonData=function(e){var n=this.scale,r=new $t;r.name="";var i=new E(e);if(r.hash=i.readString(),r.version=i.readString(),"3.8.75"===r.version){console.error("Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.")}r.x=i.readFloat(),r.y=i.readFloat(),r.width=i.readFloat(),r.height=i.readFloat();var o=i.readBoolean();o&&(r.fps=i.readFloat(),r.imagesPath=i.readString(),r.audioPath=i.readString());var a=0;a=i.readInt(!0);for(var s=0;s<a;s++)i.strings.push(i.readString());a=i.readInt(!0);for(s=0;s<a;s++){var u=i.readString(),c=0==s?null:r.bones[i.readInt(!0)];(f=new Ut(s,u,c)).rotation=i.readFloat(),f.x=i.readFloat()*n,f.y=i.readFloat()*n,f.scaleX=i.readFloat(),f.scaleY=i.readFloat(),f.shearX=i.readFloat(),f.shearY=i.readFloat(),f.length=i.readFloat()*n,f.transformMode=t.TransformModeValues[i.readInt(!0)],f.skinRequired=i.readBoolean(),o&&B.rgba8888ToColor(f.color,i.readInt32()),r.bones.push(f)}a=i.readInt(!0);for(s=0;s<a;s++){var l=i.readString(),h=r.bones[i.readInt(!0)],f=new Jt(s,l,h);B.rgba8888ToColor(f.color,i.readInt32());var p=i.readInt32();-1!=p&&B.rgb888ToColor(f.darkColor=new B,p),f.attachmentName=i.readStringRef(),f.blendMode=t.BlendModeValues[i.readInt(!0)],r.slots.push(f)}a=i.readInt(!0);s=0;for(var d=void 0;s<a;s++){(f=new Wt(i.readString())).order=i.readInt(!0),f.skinRequired=i.readBoolean(),d=i.readInt(!0);for(var y=0;y<d;y++)f.bones.push(r.bones[i.readInt(!0)]);f.target=r.bones[i.readInt(!0)],f.mix=i.readFloat(),f.softness=i.readFloat()*n,f.bendDirection=i.readByte(),f.compress=i.readBoolean(),f.stretch=i.readBoolean(),f.uniform=i.readBoolean(),r.ikConstraints.push(f)}a=i.readInt(!0);for(s=0,d=void 0;s<a;s++){(f=new Qt(i.readString())).order=i.readInt(!0),f.skinRequired=i.readBoolean(),d=i.readInt(!0);for(y=0;y<d;y++)f.bones.push(r.bones[i.readInt(!0)]);f.target=r.bones[i.readInt(!0)],f.local=i.readBoolean(),f.relative=i.readBoolean(),f.offsetRotation=i.readFloat(),f.offsetX=i.readFloat()*n,f.offsetY=i.readFloat()*n,f.offsetScaleX=i.readFloat(),f.offsetScaleY=i.readFloat(),f.offsetShearY=i.readFloat(),f.rotateMix=i.readFloat(),f.translateMix=i.readFloat(),f.scaleMix=i.readFloat(),f.shearMix=i.readFloat(),r.transformConstraints.push(f)}a=i.readInt(!0);for(s=0,d=void 0;s<a;s++){(f=new Yt(i.readString())).order=i.readInt(!0),f.skinRequired=i.readBoolean(),d=i.readInt(!0);for(y=0;y<d;y++)f.bones.push(r.bones[i.readInt(!0)]);f.target=r.slots[i.readInt(!0)],f.positionMode=t.PositionModeValues[i.readInt(!0)],f.spacingMode=t.SpacingModeValues[i.readInt(!0)],f.rotateMode=t.RotateModeValues[i.readInt(!0)],f.offsetRotation=i.readFloat(),f.position=i.readFloat(),f.positionMode==_.Fixed&&(f.position*=n),f.spacing=i.readFloat(),f.spacingMode!=jt.Length&&f.spacingMode!=jt.Fixed||(f.spacing*=n),f.rotateMix=i.readFloat(),f.translateMix=i.readFloat(),r.pathConstraints.push(f)}var m=this.readSkin(i,r,!0,o);null!=m&&(r.defaultSkin=m,r.skins.push(m));s=r.skins.length;for(G.setArraySize(r.skins,a=s+i.readInt(!0));s<a;s++)r.skins[s]=this.readSkin(i,r,!1,o);a=this.linkedMeshes.length;for(s=0;s<a;s++){var v=this.linkedMeshes[s],g=null==v.skin?r.defaultSkin:r.findSkin(v.skin);if(null==g)throw new Error("Skin not found: "+v.skin);var b=g.getAttachment(v.slotIndex,v.parent);if(null==b)throw new Error("Parent mesh not found: "+v.parent);v.mesh.deformAttachment=v.inheritDeform?b:v.mesh,v.mesh.setParentMesh(b)}this.linkedMeshes.length=0,a=i.readInt(!0);for(s=0;s<a;s++){(f=new Vt(i.readStringRef())).intValue=i.readInt(!1),f.floatValue=i.readFloat(),f.stringValue=i.readString(),f.audioPath=i.readString(),null!=f.audioPath&&(f.volume=i.readFloat(),f.balance=i.readFloat()),r.events.push(f)}a=i.readInt(!0);for(s=0;s<a;s++)r.animations.push(this.readAnimation(i,i.readString(),r));return r},t.prototype.readSkin=function(t,e,n,r){var i=null,o=0;if(n){if(0==(o=t.readInt(!0)))return null;i=new ee("default")}else{(i=new ee(t.readStringRef())).bones.length=t.readInt(!0);for(var a=0,s=i.bones.length;a<s;a++)i.bones[a]=e.bones[t.readInt(!0)];for(a=0,s=t.readInt(!0);a<s;a++)i.constraints.push(e.ikConstraints[t.readInt(!0)]);for(a=0,s=t.readInt(!0);a<s;a++)i.constraints.push(e.transformConstraints[t.readInt(!0)]);for(a=0,s=t.readInt(!0);a<s;a++)i.constraints.push(e.pathConstraints[t.readInt(!0)]);o=t.readInt(!0)}for(a=0;a<o;a++)for(var u=t.readInt(!0),c=0,l=t.readInt(!0);c<l;c++){var h=t.readStringRef(),f=this.readAttachment(t,e,i,u,h,r);null!=f&&i.setAttachment(u,h,f)}return i},t.prototype.readAttachment=function(e,n,r,i,o,s){var u=this.scale,c=e.readStringRef();null==c&&(c=o);var l=e.readByte();switch(t.AttachmentTypeValues[l]){case a.Region:var h=e.readStringRef(),f=e.readFloat(),p=e.readFloat(),d=e.readFloat(),y=e.readFloat(),m=e.readFloat(),v=e.readFloat(),_=e.readFloat(),g=e.readInt32();null==h&&(h=c);var b=this.attachmentLoader.newRegionAttachment(r,c,h);return null==b?null:(b.path=h,b.x=p*u,b.y=d*u,b.scaleX=y,b.scaleY=m,b.rotation=f,b.width=v*u,b.height=_*u,B.rgba8888ToColor(b.color,g),b);case a.BoundingBox:var E=e.readInt(!0),T=this.readVertices(e,E),w=(g=s?e.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(r,c));return null==w?null:(w.worldVerticesLength=E<<1,w.vertices=T.vertices,w.bones=T.bones,s&&B.rgba8888ToColor(w.color,g),w);case a.Mesh:h=e.readStringRef(),g=e.readInt32(),E=e.readInt(!0);var x=this.readFloatArray(e,E<<1,1),S=this.readShortArray(e),O=(T=this.readVertices(e,E),e.readInt(!0)),P=null;v=0,_=0;return s&&(P=this.readShortArray(e),v=e.readFloat(),_=e.readFloat()),null==h&&(h=c),null==(R=this.attachmentLoader.newMeshAttachment(r,c,h))?null:(R.path=h,B.rgba8888ToColor(R.color,g),R.bones=T.bones,R.vertices=T.vertices,R.worldVerticesLength=E<<1,R.triangles=S,R.regionUVs=new Float32Array(x),R.hullLength=O<<1,s&&(R.edges=P,R.width=v*u,R.height=_*u),R);case a.LinkedMesh:h=e.readStringRef(),g=e.readInt32();var R,A=e.readStringRef(),I=e.readStringRef(),C=e.readBoolean();v=0,_=0;return s&&(v=e.readFloat(),_=e.readFloat()),null==h&&(h=c),null==(R=this.attachmentLoader.newMeshAttachment(r,c,h))?null:(R.path=h,B.rgba8888ToColor(R.color,g),s&&(R.width=v*u,R.height=_*u),this.linkedMeshes.push(new re(R,A,i,I,C)),R);case a.Path:for(var k=e.readBoolean(),N=e.readBoolean(),M=(E=e.readInt(!0),T=this.readVertices(e,E),G.newArray(E/3,0)),j=0,D=M.length;j<D;j++)M[j]=e.readFloat()*u;g=s?e.readInt32():0;return null==(h=this.attachmentLoader.newPathAttachment(r,c))?null:(h.closed=k,h.constantSpeed=N,h.worldVerticesLength=E<<1,h.vertices=T.vertices,h.bones=T.bones,h.lengths=M,s&&B.rgba8888ToColor(h.color,g),h);case a.Point:f=e.readFloat(),p=e.readFloat(),d=e.readFloat(),g=s?e.readInt32():0;var L=this.attachmentLoader.newPointAttachment(r,c);return null==L?null:(L.x=p*u,L.y=d*u,L.rotation=f,s&&B.rgba8888ToColor(L.color,g),L);case a.Clipping:var F=e.readInt(!0),U=(E=e.readInt(!0),T=this.readVertices(e,E),g=s?e.readInt32():0,this.attachmentLoader.newClippingAttachment(r,c));return null==U?null:(U.endSlot=n.slots[F],U.worldVerticesLength=E<<1,U.vertices=T.vertices,U.bones=T.bones,s&&B.rgba8888ToColor(U.color,g),U)}return null},t.prototype.readVertices=function(t,e){var n=e<<1,r=new ie,i=this.scale;if(!t.readBoolean())return r.vertices=this.readFloatArray(t,n,i),r;for(var o=new Array,a=new Array,s=0;s<e;s++){var u=t.readInt(!0);a.push(u);for(var c=0;c<u;c++)a.push(t.readInt(!0)),o.push(t.readFloat()*i),o.push(t.readFloat()*i),o.push(t.readFloat())}return r.vertices=G.toFloatArray(o),r.bones=a,r},t.prototype.readFloatArray=function(t,e,n){var r=new Array(e);if(1==n)for(var i=0;i<e;i++)r[i]=t.readFloat();else for(i=0;i<e;i++)r[i]=t.readFloat()*n;return r},t.prototype.readShortArray=function(t){for(var e=t.readInt(!0),n=new Array(e),r=0;r<e;r++)n[r]=t.readShort();return n},t.prototype.readAnimation=function(e,n,r){for(var i=new Array,o=this.scale,a=0,s=new B,u=new B,c=0,l=e.readInt(!0);c<l;c++)for(var h=e.readInt(!0),f=0,p=e.readInt(!0);f<p;f++){var d=e.readByte(),y=e.readInt(!0);switch(d){case t.SLOT_ATTACHMENT:(b=new Tt(y)).slotIndex=h;for(var m=0;m<y;m++)b.setFrame(m,e.readFloat(),e.readStringRef());i.push(b),a=Math.max(a,b.frames[y-1]);break;case t.SLOT_COLOR:(b=new bt(y)).slotIndex=h;for(m=0;m<y;m++){var v=e.readFloat();B.rgba8888ToColor(s,e.readInt32()),b.setFrame(m,v,s.r,s.g,s.b,s.a),m<y-1&&this.readCurve(e,m,b)}i.push(b),a=Math.max(a,b.frames[(y-1)*bt.ENTRIES]);break;case t.SLOT_TWO_COLOR:(b=new Et(y)).slotIndex=h;for(m=0;m<y;m++){v=e.readFloat();B.rgba8888ToColor(s,e.readInt32()),B.rgb888ToColor(u,e.readInt32()),b.setFrame(m,v,s.r,s.g,s.b,s.a,u.r,u.g,u.b),m<y-1&&this.readCurve(e,m,b)}i.push(b),a=Math.max(a,b.frames[(y-1)*Et.ENTRIES])}}for(c=0,l=e.readInt(!0);c<l;c++){var g=e.readInt(!0);for(f=0,p=e.readInt(!0);f<p;f++){d=e.readByte(),y=e.readInt(!0);switch(d){case t.BONE_ROTATE:(b=new mt(y)).boneIndex=g;for(m=0;m<y;m++)b.setFrame(m,e.readFloat(),e.readFloat()),m<y-1&&this.readCurve(e,m,b);i.push(b),a=Math.max(a,b.frames[(y-1)*mt.ENTRIES]);break;case t.BONE_TRANSLATE:case t.BONE_SCALE:case t.BONE_SHEAR:var b=void 0,E=1;d==t.BONE_SCALE?b=new _t(y):d==t.BONE_SHEAR?b=new gt(y):(b=new vt(y),E=o),b.boneIndex=g;for(m=0;m<y;m++)b.setFrame(m,e.readFloat(),e.readFloat()*E,e.readFloat()*E),m<y-1&&this.readCurve(e,m,b);i.push(b),a=Math.max(a,b.frames[(y-1)*vt.ENTRIES])}}}for(c=0,l=e.readInt(!0);c<l;c++){var T=e.readInt(!0);y=e.readInt(!0);(b=new Pt(y)).ikConstraintIndex=T;for(m=0;m<y;m++)b.setFrame(m,e.readFloat(),e.readFloat(),e.readFloat()*o,e.readByte(),e.readBoolean(),e.readBoolean()),m<y-1&&this.readCurve(e,m,b);i.push(b),a=Math.max(a,b.frames[(y-1)*Pt.ENTRIES])}for(c=0,l=e.readInt(!0);c<l;c++){T=e.readInt(!0),y=e.readInt(!0);(b=new Rt(y)).transformConstraintIndex=T;for(m=0;m<y;m++)b.setFrame(m,e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat()),m<y-1&&this.readCurve(e,m,b);i.push(b),a=Math.max(a,b.frames[(y-1)*Rt.ENTRIES])}for(c=0,l=e.readInt(!0);c<l;c++){T=e.readInt(!0);var w=r.pathConstraints[T];for(f=0,p=e.readInt(!0);f<p;f++){d=e.readByte(),y=e.readInt(!0);switch(d){case t.PATH_POSITION:case t.PATH_SPACING:b=void 0,E=1;d==t.PATH_SPACING?(b=new It(y),w.spacingMode!=jt.Length&&w.spacingMode!=jt.Fixed||(E=o)):(b=new At(y),w.positionMode==_.Fixed&&(E=o)),b.pathConstraintIndex=T;for(m=0;m<y;m++)b.setFrame(m,e.readFloat(),e.readFloat()*E),m<y-1&&this.readCurve(e,m,b);i.push(b),a=Math.max(a,b.frames[(y-1)*At.ENTRIES]);break;case t.PATH_MIX:(b=new Ct(y)).pathConstraintIndex=T;for(m=0;m<y;m++)b.setFrame(m,e.readFloat(),e.readFloat(),e.readFloat()),m<y-1&&this.readCurve(e,m,b);i.push(b),a=Math.max(a,b.frames[(y-1)*Ct.ENTRIES])}}}for(c=0,l=e.readInt(!0);c<l;c++){var x=r.skins[e.readInt(!0)];for(f=0,p=e.readInt(!0);f<p;f++){h=e.readInt(!0);for(var S=0,O=e.readInt(!0);S<O;S++){var P=x.getAttachment(h,e.readStringRef()),R=null!=P.bones,A=P.vertices,I=R?A.length/3*2:A.length;y=e.readInt(!0);(b=new xt(y)).slotIndex=h,b.attachment=P;for(m=0;m<y;m++){v=e.readFloat();var C=void 0,k=e.readInt(!0);if(0==k)C=R?G.newFloatArray(I):A;else{C=G.newFloatArray(I);var N=e.readInt(!0);if(k+=N,1==o)for(var M=N;M<k;M++)C[M]=e.readFloat();else for(M=N;M<k;M++)C[M]=e.readFloat()*o;if(!R){M=0;for(var j=C.length;M<j;M++)C[M]+=A[M]}}b.setFrame(m,v,C),m<y-1&&this.readCurve(e,m,b)}i.push(b),a=Math.max(a,b.frames[y-1])}}}var D=e.readInt(!0);if(D>0){b=new Ot(D);var L=r.slots.length;for(c=0;c<D;c++){v=e.readFloat();var F=e.readInt(!0),U=G.newArray(L,0);for(f=L-1;f>=0;f--)U[f]=-1;var H=G.newArray(L-F,0),V=0,X=0;for(f=0;f<F;f++){for(h=e.readInt(!0);V!=h;)H[X++]=V++;U[V+e.readInt(!0)]=V++}for(;V<L;)H[X++]=V++;for(f=L-1;f>=0;f--)-1==U[f]&&(U[f]=H[--X]);b.setFrame(c,v,U)}i.push(b),a=Math.max(a,b.frames[D-1])}var W=e.readInt(!0);if(W>0){for(b=new St(W),c=0;c<W;c++){v=e.readFloat();var Y=r.events[e.readInt(!0)],z=new Ht(v,Y);z.intValue=e.readInt(!1),z.floatValue=e.readFloat(),z.stringValue=e.readBoolean()?e.readString():Y.stringValue,null!=z.data.audioPath&&(z.volume=e.readFloat(),z.balance=e.readFloat()),b.setFrame(c,z)}i.push(b),a=Math.max(a,b.frames[W-1])}return new pt(n,i,a)},t.prototype.readCurve=function(e,n,r){switch(e.readByte()){case t.CURVE_STEPPED:r.setStepped(n);break;case t.CURVE_BEZIER:this.setCurve(r,n,e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat())}},t.prototype.setCurve=function(t,e,n,r,i,o){t.setCurve(e,n,r,i,o)},t.AttachmentTypeValues=[0,1,2,3,4,5,6],t.TransformModeValues=[b.Normal,b.OnlyTranslation,b.NoRotationOrReflection,b.NoScale,b.NoScaleOrReflection],t.PositionModeValues=[_.Fixed,_.Percent],t.SpacingModeValues=[jt.Length,jt.Fixed,jt.Percent],t.RotateModeValues=[g.Tangent,g.Chain,g.ChainScale],t.BlendModeValues=[c.b.NORMAL,c.b.ADD,c.b.MULTIPLY,c.b.SCREEN],t.BONE_ROTATE=0,t.BONE_TRANSLATE=1,t.BONE_SCALE=2,t.BONE_SHEAR=3,t.SLOT_ATTACHMENT=0,t.SLOT_COLOR=1,t.SLOT_TWO_COLOR=2,t.PATH_POSITION=0,t.PATH_SPACING=1,t.PATH_MIX=2,t.CURVE_LINEAR=0,t.CURVE_STEPPED=1,t.CURVE_BEZIER=2,t}(),re=function(t,e,n,r,i){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=r,this.inheritDeform=i},ie=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.bones=t,this.vertices=e},oe=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new H((function(){return G.newFloatArray(16)}))}return t.prototype.update=function(t,e){if(null==t)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,r=this.polygons,i=this.polygonPool,o=t.slots,a=o.length;n.length=0,i.freeAll(r),r.length=0;for(var s=0;s<a;s++){var u=o[s];if(u.bone.active){var c=u.getAttachment();if(c instanceof ot){var l=c;n.push(l);var h=i.obtain();h.length!=l.worldVerticesLength&&(h=G.newFloatArray(l.worldVerticesLength)),r.push(h),l.computeWorldVertices(u,0,l.worldVerticesLength,h,0,2)}}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},t.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,i=this.polygons,o=0,a=i.length;o<a;o++)for(var s=i[o],u=s,c=0,l=s.length;c<l;c+=2){var h=u[c],f=u[c+1];t=Math.min(t,h),e=Math.min(e,f),n=Math.max(n,h),r=Math.max(r,f)}this.minX=t,this.minY=e,this.maxX=n,this.maxY=r},t.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},t.prototype.aabbIntersectsSegment=function(t,e,n,r){var i=this.minX,o=this.minY,a=this.maxX,s=this.maxY;if(t<=i&&n<=i||e<=o&&r<=o||t>=a&&n>=a||e>=s&&r>=s)return!1;var u=(r-e)/(n-t),c=u*(i-t)+e;if(c>o&&c<s)return!0;if((c=u*(a-t)+e)>o&&c<s)return!0;var l=(o-e)/u+t;return l>i&&l<a||(l=(s-e)/u+t)>i&&l<a},t.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},t.prototype.containsPoint=function(t,e){for(var n=this.polygons,r=0,i=n.length;r<i;r++)if(this.containsPointPolygon(n[r],t,e))return this.boundingBoxes[r];return null},t.prototype.containsPointPolygon=function(t,e,n){for(var r=t,i=t.length,o=i-2,a=!1,s=0;s<i;s+=2){var u=r[s+1],c=r[o+1];if(u<n&&c>=n||c<n&&u>=n){var l=r[s];l+(n-u)/(c-u)*(r[o]-l)<e&&(a=!a)}o=s}return a},t.prototype.intersectsSegment=function(t,e,n,r){for(var i=this.polygons,o=0,a=i.length;o<a;o++)if(this.intersectsSegmentPolygon(i[o],t,e,n,r))return this.boundingBoxes[o];return null},t.prototype.intersectsSegmentPolygon=function(t,e,n,r,i){for(var o=t,a=t.length,s=e-r,u=n-i,c=e*i-n*r,l=o[a-2],h=o[a-1],f=0;f<a;f+=2){var p=o[f],d=o[f+1],y=l*d-h*p,m=l-p,v=h-d,_=s*v-u*m,g=(c*m-s*y)/_;if((g>=l&&g<=p||g>=p&&g<=l)&&(g>=e&&g<=r||g>=r&&g<=e)){var b=(c*v-u*y)/_;if((b>=h&&b<=d||b>=d&&b<=h)&&(b>=n&&b<=i||b>=i&&b<=n))return!0}l=p,h=d}return!1},t.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},t}(),ae=function(){function t(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return t.prototype.readSkeletonData=function(e){var n=this.scale,r=new $t,i="string"==typeof e?JSON.parse(e):e,o=i.skeleton;if(null!=o){if(r.hash=o.hash,r.version=o.spine,"3.8"!==r.version.substr(0,3)){var a="Spine 3.8 loader cant load version "+o.spine+". Please configure your pixi-spine bundle";console.error(a)}if("3.8.75"===r.version){a="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(a)}r.x=o.x,r.y=o.y,r.width=o.width,r.height=o.height,r.fps=o.fps,r.imagesPath=o.images}if(i.bones)for(var s=0;s<i.bones.length;s++){var u=i.bones[s],c=null,l=this.getValue(u,"parent",null);if(null!=l&&null==(c=r.findBone(l)))throw new Error("Parent bone not found: "+l);(d=new Ut(r.bones.length,u.name,c)).length=this.getValue(u,"length",0)*n,d.x=this.getValue(u,"x",0)*n,d.y=this.getValue(u,"y",0)*n,d.rotation=this.getValue(u,"rotation",0),d.scaleX=this.getValue(u,"scaleX",1),d.scaleY=this.getValue(u,"scaleY",1),d.shearX=this.getValue(u,"shearX",0),d.shearY=this.getValue(u,"shearY",0),d.transformMode=t.transformModeFromString(this.getValue(u,"transform","normal")),d.skinRequired=this.getValue(u,"skin",!1),r.bones.push(d)}if(i.slots)for(s=0;s<i.slots.length;s++){var h=(P=i.slots[s]).name,f=P.bone,p=r.findBone(f);if(null==p)throw new Error("Slot bone not found: "+f);var d=new Jt(r.slots.length,h,p),y=this.getValue(P,"color",null);null!=y&&d.color.setFromString(y);var m=this.getValue(P,"dark",null);null!=m&&(d.darkColor=new B(1,1,1,1),d.darkColor.setFromString(m)),d.attachmentName=this.getValue(P,"attachment",null),d.blendMode=t.blendModeFromString(this.getValue(P,"blend","normal")),r.slots.push(d)}if(i.ik)for(s=0;s<i.ik.length;s++){var v=i.ik[s];(d=new Wt(v.name)).order=this.getValue(v,"order",0),d.skinRequired=this.getValue(v,"skin",!1);for(var g=0;g<v.bones.length;g++){f=v.bones[g];if(null==(x=r.findBone(f)))throw new Error("IK bone not found: "+f);d.bones.push(x)}var b=v.target;if(d.target=r.findBone(b),null==d.target)throw new Error("IK target bone not found: "+b);d.mix=this.getValue(v,"mix",1),d.softness=this.getValue(v,"softness",0)*n,d.bendDirection=this.getValue(v,"bendPositive",!0)?1:-1,d.compress=this.getValue(v,"compress",!1),d.stretch=this.getValue(v,"stretch",!1),d.uniform=this.getValue(v,"uniform",!1),r.ikConstraints.push(d)}if(i.transform)for(s=0;s<i.transform.length;s++){v=i.transform[s];(d=new Qt(v.name)).order=this.getValue(v,"order",0),d.skinRequired=this.getValue(v,"skin",!1);for(g=0;g<v.bones.length;g++){f=v.bones[g];if(null==(x=r.findBone(f)))throw new Error("Transform constraint bone not found: "+f);d.bones.push(x)}b=v.target;if(d.target=r.findBone(b),null==d.target)throw new Error("Transform constraint target bone not found: "+b);d.local=this.getValue(v,"local",!1),d.relative=this.getValue(v,"relative",!1),d.offsetRotation=this.getValue(v,"rotation",0),d.offsetX=this.getValue(v,"x",0)*n,d.offsetY=this.getValue(v,"y",0)*n,d.offsetScaleX=this.getValue(v,"scaleX",0),d.offsetScaleY=this.getValue(v,"scaleY",0),d.offsetShearY=this.getValue(v,"shearY",0),d.rotateMix=this.getValue(v,"rotateMix",1),d.translateMix=this.getValue(v,"translateMix",1),d.scaleMix=this.getValue(v,"scaleMix",1),d.shearMix=this.getValue(v,"shearMix",1),r.transformConstraints.push(d)}if(i.path)for(s=0;s<i.path.length;s++){v=i.path[s];(d=new Yt(v.name)).order=this.getValue(v,"order",0),d.skinRequired=this.getValue(v,"skin",!1);for(g=0;g<v.bones.length;g++){f=v.bones[g];if(null==(x=r.findBone(f)))throw new Error("Transform constraint bone not found: "+f);d.bones.push(x)}b=v.target;if(d.target=r.findSlot(b),null==d.target)throw new Error("Path target slot not found: "+b);d.positionMode=t.positionModeFromString(this.getValue(v,"positionMode","percent")),d.spacingMode=t.spacingModeFromString(this.getValue(v,"spacingMode","length")),d.rotateMode=t.rotateModeFromString(this.getValue(v,"rotateMode","tangent")),d.offsetRotation=this.getValue(v,"rotation",0),d.position=this.getValue(v,"position",0),d.positionMode==_.Fixed&&(d.position*=n),d.spacing=this.getValue(v,"spacing",0),d.spacingMode!=jt.Length&&d.spacingMode!=jt.Fixed||(d.spacing*=n),d.rotateMix=this.getValue(v,"rotateMix",1),d.translateMix=this.getValue(v,"translateMix",1),r.pathConstraints.push(d)}if(i.skins)for(s=0;s<i.skins.length;s++){var E=i.skins[s],T=new ee(E.name);if(E.bones)for(var w=0;w<E.bones.length;w++){var x;if(null==(x=r.findBone(E.bones[w])))throw new Error("Skin bone not found: "+E.bones[s]);T.bones.push(x)}if(E.ik)for(w=0;w<E.ik.length;w++){if(null==(S=r.findIkConstraint(E.ik[w])))throw new Error("Skin IK constraint not found: "+E.ik[s]);T.constraints.push(S)}if(E.transform)for(w=0;w<E.transform.length;w++){if(null==(S=r.findTransformConstraint(E.transform[w])))throw new Error("Skin transform constraint not found: "+E.transform[s]);T.constraints.push(S)}if(E.path)for(w=0;w<E.path.length;w++){var S;if(null==(S=r.findPathConstraint(E.path[w])))throw new Error("Skin path constraint not found: "+E.path[s]);T.constraints.push(S)}for(var h in E.attachments){var O=r.findSlot(h);if(null==O)throw new Error("Slot not found: "+h);var P=E.attachments[h];for(var R in P){var A=this.readAttachment(P[R],T,O.index,R,r);null!=A&&T.setAttachment(O.index,R,A)}}r.skins.push(T),"default"==T.name&&(r.defaultSkin=T)}s=0;for(var I=this.linkedMeshes.length;s<I;s++){var C=this.linkedMeshes[s];if(null==(T=null==C.skin?r.defaultSkin:r.findSkin(C.skin)))throw new Error("Skin not found: "+C.skin);var k=T.getAttachment(C.slotIndex,C.parent);if(null==k)throw new Error("Parent mesh not found: "+C.parent);C.mesh.deformAttachment=C.inheritDeform?k:C.mesh,C.mesh.setParentMesh(k)}if(this.linkedMeshes.length=0,i.events)for(var N in i.events){var M=i.events[N];(d=new Vt(N)).intValue=this.getValue(M,"int",0),d.floatValue=this.getValue(M,"float",0),d.stringValue=this.getValue(M,"string",""),d.audioPath=this.getValue(M,"audio",null),null!=d.audioPath&&(d.volume=this.getValue(M,"volume",1),d.balance=this.getValue(M,"balance",0)),r.events.push(d)}if(i.animations)for(var j in i.animations){var D=i.animations[j];this.readAnimation(D,j,r)}return r},t.prototype.readAttachment=function(t,e,n,r,i){var o=this.scale;switch(r=this.getValue(t,"name",r),this.getValue(t,"type","region")){case"region":var a=this.getValue(t,"path",r),s=this.attachmentLoader.newRegionAttachment(e,r,a);return null==s?null:(s.path=a,s.x=this.getValue(t,"x",0)*o,s.y=this.getValue(t,"y",0)*o,s.scaleX=this.getValue(t,"scaleX",1),s.scaleY=this.getValue(t,"scaleY",1),s.rotation=this.getValue(t,"rotation",0),s.width=t.width*o,s.height=t.height*o,null!=(g=this.getValue(t,"color",null))&&s.color.setFromString(g),s);case"boundingbox":var u=this.attachmentLoader.newBoundingBoxAttachment(e,r);return null==u?null:(this.readVertices(t,u,t.vertexCount<<1),null!=(g=this.getValue(t,"color",null))&&u.color.setFromString(g),u);case"mesh":case"linkedmesh":a=this.getValue(t,"path",r);var c=this.attachmentLoader.newMeshAttachment(e,r,a);if(null==c)return null;c.path=a,null!=(g=this.getValue(t,"color",null))&&c.color.setFromString(g),c.width=this.getValue(t,"width",0)*o,c.height=this.getValue(t,"height",0)*o;var l=this.getValue(t,"parent",null);if(null!=l)return this.linkedMeshes.push(new se(c,this.getValue(t,"skin",null),n,l,this.getValue(t,"deform",!0))),c;var h=t.uvs;return this.readVertices(t,c,h.length),c.triangles=t.triangles,c.regionUVs=new Float32Array(h),c.edges=this.getValue(t,"edges",null),c.hullLength=2*this.getValue(t,"hull",0),c;case"path":if(null==(a=this.attachmentLoader.newPathAttachment(e,r)))return null;a.closed=this.getValue(t,"closed",!1),a.constantSpeed=this.getValue(t,"constantSpeed",!0);var f=t.vertexCount;this.readVertices(t,a,f<<1);for(var p=G.newArray(f/3,0),d=0;d<t.lengths.length;d++)p[d]=t.lengths[d]*o;return a.lengths=p,null!=(g=this.getValue(t,"color",null))&&a.color.setFromString(g),a;case"point":var y=this.attachmentLoader.newPointAttachment(e,r);return null==y?null:(y.x=this.getValue(t,"x",0)*o,y.y=this.getValue(t,"y",0)*o,y.rotation=this.getValue(t,"rotation",0),null!=(g=this.getValue(t,"color",null))&&y.color.setFromString(g),y);case"clipping":var m=this.attachmentLoader.newClippingAttachment(e,r);if(null==m)return null;var v=this.getValue(t,"end",null);if(null!=v){var _=i.findSlot(v);if(null==_)throw new Error("Clipping end slot not found: "+v);m.endSlot=_}var g;f=t.vertexCount;return this.readVertices(t,m,f<<1),null!=(g=this.getValue(t,"color",null))&&m.color.setFromString(g),m}return null},t.prototype.readVertices=function(t,e,n){var r=this.scale;e.worldVerticesLength=n;var i=t.vertices;if(n!=i.length){var o=new Array,a=new Array;for(l=0,h=i.length;l<h;){var s=i[l++];a.push(s);for(var u=l+4*s;l<u;l+=4)a.push(i[l]),o.push(i[l+1]*r),o.push(i[l+2]*r),o.push(i[l+3])}e.bones=a,e.vertices=G.toFloatArray(o)}else{var c=G.toFloatArray(i);if(1!=r)for(var l=0,h=i.length;l<h;l++)c[l]*=r;e.vertices=c}},t.prototype.readAnimation=function(t,e,n){var r=this.scale,i=new Array,o=0;if(t.slots)for(var a in t.slots){var s=t.slots[a];if(-1==(Q=n.findSlotIndex(a)))throw new Error("Slot not found: "+a);for(var u in s){var c=s[u];if("attachment"==u){(b=new Tt(c.length)).slotIndex=Q;for(var l=0,h=0;h<c.length;h++){var f=c[h];b.setFrame(l++,this.getValue(f,"time",0),f.name)}i.push(b),o=Math.max(o,b.frames[b.getFrameCount()-1])}else if("color"==u){(b=new bt(c.length)).slotIndex=Q;for(l=0,h=0;h<c.length;h++){f=c[h];var p=new B;p.setFromString(f.color||"ffffffff"),b.setFrame(l,this.getValue(f,"time",0),p.r,p.g,p.b,p.a),this.readCurve(f,b,l),l++}i.push(b),o=Math.max(o,b.frames[(b.getFrameCount()-1)*bt.ENTRIES])}else{if("twoColor"!=u)throw new Error("Invalid timeline type for a slot: "+u+" ("+a+")");(b=new Et(c.length)).slotIndex=Q;for(l=0,h=0;h<c.length;h++){f=c[h];var d=new B,y=new B;d.setFromString(f.light),y.setFromString(f.dark),b.setFrame(l,this.getValue(f,"time",0),d.r,d.g,d.b,d.a,y.r,y.g,y.b),this.readCurve(f,b,l),l++}i.push(b),o=Math.max(o,b.frames[(b.getFrameCount()-1)*Et.ENTRIES])}}}if(t.bones)for(var m in t.bones){var v=t.bones[m],g=n.findBoneIndex(m);if(-1==g)throw new Error("Bone not found: "+m);for(var u in v){c=v[u];if("rotate"===u){(b=new mt(c.length)).boneIndex=g;for(l=0,h=0;h<c.length;h++){f=c[h];b.setFrame(l,this.getValue(f,"time",0),this.getValue(f,"angle",0)),this.readCurve(f,b,l),l++}i.push(b),o=Math.max(o,b.frames[(b.getFrameCount()-1)*mt.ENTRIES])}else{if("translate"!==u&&"scale"!==u&&"shear"!==u)throw new Error("Invalid timeline type for a bone: "+u+" ("+m+")");var b=null,E=1,T=0;"scale"===u?(b=new _t(c.length),T=1):"shear"===u?b=new gt(c.length):(b=new vt(c.length),E=r),b.boneIndex=g;for(l=0,h=0;h<c.length;h++){f=c[h];var w=this.getValue(f,"x",T),x=this.getValue(f,"y",T);b.setFrame(l,this.getValue(f,"time",0),w*E,x*E),this.readCurve(f,b,l),l++}i.push(b),o=Math.max(o,b.frames[(b.getFrameCount()-1)*vt.ENTRIES])}}}if(t.ik)for(var S in t.ik){var O=t.ik[S],P=n.findIkConstraint(S);(b=new Pt(O.length)).ikConstraintIndex=n.ikConstraints.indexOf(P);for(l=0,h=0;h<O.length;h++){f=O[h];b.setFrame(l,this.getValue(f,"time",0),this.getValue(f,"mix",1),this.getValue(f,"softness",0)*r,this.getValue(f,"bendPositive",!0)?1:-1,this.getValue(f,"compress",!1),this.getValue(f,"stretch",!1)),this.readCurve(f,b,l),l++}i.push(b),o=Math.max(o,b.frames[(b.getFrameCount()-1)*Pt.ENTRIES])}if(t.transform)for(var S in t.transform){O=t.transform[S],P=n.findTransformConstraint(S);(b=new Rt(O.length)).transformConstraintIndex=n.transformConstraints.indexOf(P);for(l=0,h=0;h<O.length;h++){f=O[h];b.setFrame(l,this.getValue(f,"time",0),this.getValue(f,"rotateMix",1),this.getValue(f,"translateMix",1),this.getValue(f,"scaleMix",1),this.getValue(f,"shearMix",1)),this.readCurve(f,b,l),l++}i.push(b),o=Math.max(o,b.frames[(b.getFrameCount()-1)*Rt.ENTRIES])}if(t.path)for(var S in t.path){O=t.path[S];var R=n.findPathConstraintIndex(S);if(-1==R)throw new Error("Path constraint not found: "+S);var A=n.pathConstraints[R];for(var u in O){c=O[u];if("position"===u||"spacing"===u){b=null,E=1;"spacing"===u?(b=new It(c.length),A.spacingMode!=jt.Length&&A.spacingMode!=jt.Fixed||(E=r)):(b=new At(c.length),A.positionMode==_.Fixed&&(E=r)),b.pathConstraintIndex=R;for(l=0,h=0;h<c.length;h++){f=c[h];b.setFrame(l,this.getValue(f,"time",0),this.getValue(f,u,0)*E),this.readCurve(f,b,l),l++}i.push(b),o=Math.max(o,b.frames[(b.getFrameCount()-1)*At.ENTRIES])}else if("mix"===u){(b=new Ct(c.length)).pathConstraintIndex=R;for(l=0,h=0;h<c.length;h++){f=c[h];b.setFrame(l,this.getValue(f,"time",0),this.getValue(f,"rotateMix",1),this.getValue(f,"translateMix",1)),this.readCurve(f,b,l),l++}i.push(b),o=Math.max(o,b.frames[(b.getFrameCount()-1)*Ct.ENTRIES])}}}if(t.deform)for(var I in t.deform){var C=t.deform[I],k=n.findSkin(I);if(null!=k)for(var a in C){s=C[a];if(-1==(Q=n.findSlotIndex(a)))throw new Error("Slot not found: "+s.name);for(var u in s){c=s[u];var N=k.getAttachment(Q,u);if(null==N)throw new Error("Deform attachment not found: "+c.name);var M=null!=N.bones,j=N.vertices,D=M?j.length/3*2:j.length;(b=new xt(c.length)).slotIndex=Q,b.attachment=N;l=0;for(var L=0;L<c.length;L++){f=c[L];var F=void 0,U=this.getValue(f,"vertices",null);if(null==U)F=M?G.newFloatArray(D):j;else{F=G.newFloatArray(D);var H=this.getValue(f,"offset",0);if(G.arrayCopy(U,0,F,H,U.length),1!=r)for(var V=(h=H)+U.length;h<V;h++)F[h]*=r;if(!M)for(h=0;h<D;h++)F[h]+=j[h]}b.setFrame(l,this.getValue(f,"time",0),F),this.readCurve(f,b,l),l++}i.push(b),o=Math.max(o,b.frames[b.getFrameCount()-1])}}else if(W)throw new Error("Skin not found: "+I)}var X=t.drawOrder;if(null==X&&(X=t.draworder),null!=X){b=new Ot(X.length);var Y=n.slots.length;for(l=0,L=0;L<X.length;L++){var z=X[L],q=null,K=this.getValue(z,"offsets",null);if(null!=K){q=G.newArray(Y,-1);var Z=G.newArray(Y-K.length,0),$=0,J=0;for(h=0;h<K.length;h++){var Q,tt=K[h];if(-1==(Q=n.findSlotIndex(tt.slot)))throw new Error("Slot not found: "+tt.slot);for(;$!=Q;)Z[J++]=$++;q[$+tt.offset]=$++}for(;$<Y;)Z[J++]=$++;for(h=Y-1;h>=0;h--)-1==q[h]&&(q[h]=Z[--J])}b.setFrame(l++,this.getValue(z,"time",0),q)}i.push(b),o=Math.max(o,b.frames[b.getFrameCount()-1])}if(t.events){for(b=new St(t.events.length),l=0,h=0;h<t.events.length;h++){var et=t.events[h],nt=n.findEvent(et.name);if(null==nt)throw new Error("Event not found: "+et.name);var rt=new Ht(G.toSinglePrecision(this.getValue(et,"time",0)),nt);rt.intValue=this.getValue(et,"int",nt.intValue),rt.floatValue=this.getValue(et,"float",nt.floatValue),rt.stringValue=this.getValue(et,"string",nt.stringValue),null!=rt.data.audioPath&&(rt.volume=this.getValue(et,"volume",1),rt.balance=this.getValue(et,"balance",0)),b.setFrame(l++,rt)}i.push(b),o=Math.max(o,b.frames[b.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new pt(e,i,o))},t.prototype.readCurve=function(t,e,n){if(t.hasOwnProperty("curve"))if("stepped"===t.curve)e.setStepped(n);else{var r=t.curve;e.setCurve(n,r,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},t.prototype.getValue=function(t,e,n){return void 0!==t[e]?t[e]:n},t.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return c.b.NORMAL;if("additive"==t)return c.b.ADD;if("multiply"==t)return c.b.MULTIPLY;if("screen"==t)return c.b.SCREEN;throw new Error("Unknown blend mode: "+t)},t.positionModeFromString=function(t){if("fixed"==(t=t.toLowerCase()))return _.Fixed;if("percent"==t)return _.Percent;throw new Error("Unknown position mode: "+t)},t.spacingModeFromString=function(t){if("length"==(t=t.toLowerCase()))return jt.Length;if("fixed"==t)return jt.Fixed;if("percent"==t)return jt.Percent;throw new Error("Unknown position mode: "+t)},t.rotateModeFromString=function(t){if("tangent"==(t=t.toLowerCase()))return g.Tangent;if("chain"==t)return g.Chain;if("chainscale"==t)return g.ChainScale;throw new Error("Unknown rotate mode: "+t)},t.transformModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return b.Normal;if("onlytranslation"==t)return b.OnlyTranslation;if("norotationorreflection"==t)return b.NoRotationOrReflection;if("noscale"==t)return b.NoScale;if("noscaleorreflection"==t)return b.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},t}(),se=function(t,e,n,r,i){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=r,this.inheritDeform=i},ue=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return et(e,t),e.prototype.createSkeleton=function(t){this.skeleton=new Zt(t),this.skeleton.updateWorldTransform(),this.stateData=new Lt(t),this.state=new kt(this.stateData)},e}($),ce=function(t,e){return(ce=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function le(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ce(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var he,fe=function(t){if(null==t)throw new Error("name cannot be null.");this.name=t},pe=function(t){function e(n){var r=t.call(this,n)||this;return r.id=(65535&e.nextID++)<<11,r.worldVerticesLength=0,r}return le(e,t),e.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},e.prototype.computeWorldVertices=function(t,e,n,r,i,o){n=i+(n>>1)*o;var a=t.bone.skeleton,s=t.attachmentVertices,u=this.vertices,c=this.bones;if(null!=c){for(var l=0,h=0,f=0;f<e;f+=2){l+=(m=c[l])+1,h+=m}var p=a.bones;if(0==s.length)for(R=i,x=3*h;R<n;R+=o){var d=0,y=0,m=c[l++];for(m+=l;l<m;l++,x+=3){b=p[c[l]].matrix,A=u[x],I=u[x+1];var v=u[x+2];d+=(A*b.a+I*b.c+b.tx)*v,y+=(A*b.b+I*b.d+b.ty)*v}r[R]=d,r[R+1]=y}else for(var _=s,g=(R=i,x=3*h,h<<1);R<n;R+=o){d=0,y=0,m=c[l++];for(m+=l;l<m;l++,x+=3,g+=2){b=p[c[l]].matrix,A=u[x]+_[g],I=u[x+1]+_[g+1],v=u[x+2];d+=(A*b.a+I*b.c+b.tx)*v,y+=(A*b.b+I*b.d+b.ty)*v}r[R]=d,r[R+1]=y}}else{s.length>0&&(u=s);for(var b,E=(b=t.bone.matrix).tx,T=b.ty,w=b.a,x=b.c,S=b.b,O=b.d,P=e,R=i;R<n;P+=2,R+=o){var A=u[P],I=u[P+1];r[R]=A*w+I*x+E,r[R+1]=A*S+I*O+T}}},e.prototype.applyDeform=function(t){return this==t},e.nextID=0,e}(fe),de=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.BoundingBox,n.color=new B(1,1,1,1),n}return le(e,t),e}(pe),ye=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.Clipping,n.color=new B(.2275,.2275,.8078,1),n}return le(e,t),e}(pe),me=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.Mesh,n.color=new B(1,1,1,1),n.inheritDeform=!1,n.tempColor=new B(0,0,0,0),n}return le(e,t),e.prototype.applyDeform=function(t){return this==t||this.inheritDeform&&this.parentMesh==t},e.prototype.getParentMesh=function(){return this.parentMesh},e.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},e}(pe),ve=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.Path,n.closed=!1,n.constantSpeed=!1,n.color=new B(1,1,1,1),n}return le(e,t),e}(pe),_e=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.Point,n.color=new B(.38,.94,0,1),n}return le(e,t),e.prototype.computeWorldPosition=function(t,e){var n=t.matrix;return e.x=this.x*n.a+this.y*n.c+t.worldX,e.y=this.x*n.b+this.y*n.d+t.worldY,e},e.prototype.computeWorldRotation=function(t){var e=t.matrix,n=F.cosDeg(this.rotation),r=F.sinDeg(this.rotation),i=n*e.a+r*e.c,o=n*e.b+r*e.d;return Math.atan2(o,i)*F.radDeg},e}(pe),ge=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.Region,n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new B(1,1,1,1),n.offset=G.newFloatArray(8),n.uvs=G.newFloatArray(8),n.tempColor=new B(1,1,1,1),n}return le(e,t),e.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,n=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*t,i=-this.height/2*this.scaleY+this.region.offsetY*n,o=r+this.region.width*t,a=i+this.region.height*n,s=this.rotation*Math.PI/180,u=Math.cos(s),c=Math.sin(s),l=r*u+this.x,h=r*c,f=i*u+this.y,p=i*c,d=o*u+this.x,y=o*c,m=a*u+this.y,v=a*c,_=this.offset;_[e.OX1]=l-p,_[e.OY1]=f+h,_[e.OX2]=l-v,_[e.OY2]=m+h,_[e.OX3]=d-v,_[e.OY3]=m+y,_[e.OX4]=d-p,_[e.OY4]=f+y},e.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},e.prototype.computeWorldVertices=function(t,n,r,i){var o=this.offset,a=t.matrix,s=a.tx,u=a.ty,c=a.a,l=a.c,h=a.b,f=a.d,p=0,d=0;p=o[e.OX1],d=o[e.OY1],n[r]=p*c+d*l+s,n[r+1]=p*h+d*f+u,r+=i,p=o[e.OX2],d=o[e.OY2],n[r]=p*c+d*l+s,n[r+1]=p*h+d*f+u,r+=i,p=o[e.OX3],d=o[e.OY3],n[r]=p*c+d*l+s,n[r+1]=p*h+d*f+u,r+=i,p=o[e.OX4],d=o[e.OY4],n[r]=p*c+d*l+s,n[r+1]=p*h+d*f+u},e.OX1=0,e.OY1=1,e.OX2=2,e.OY2=3,e.OX3=4,e.OY3=5,e.OX4=6,e.OY4=7,e.X1=0,e.Y1=1,e.C1R=2,e.C1G=3,e.C1B=4,e.C1A=5,e.U1=6,e.V1=7,e.X2=8,e.Y2=9,e.C2R=10,e.C2G=11,e.C2B=12,e.C2A=13,e.U2=14,e.V2=15,e.X3=16,e.Y3=17,e.C3R=18,e.C3G=19,e.C3B=20,e.C3A=21,e.U3=22,e.V3=23,e.X4=24,e.Y4=25,e.C4R=26,e.C4G=27,e.C4B=28,e.C4A=29,e.U4=30,e.V4=31,e}(fe),be=function(){function t(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return t.prototype.begin=function(t){},t.prototype.transform=function(t,e,n,r){t.x+=F.randomTriangular(-this.jitterX,this.jitterY),t.y+=F.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},t}(),Ee=function(){function t(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return t.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},t.prototype.transform=function(e,n,r,i){var o=this.angle*F.degreesToRadians,a=e.x-this.worldX,s=e.y-this.worldY,u=Math.sqrt(a*a+s*s);if(u<this.radius){var c=t.interpolation.apply(0,o,(this.radius-u)/this.radius),l=Math.cos(c),h=Math.sin(c);e.x=l*a-h*s+this.worldX,e.y=h*a+l*s+this.worldY}},t.prototype.end=function(){},t.interpolation=new U(2),t}(),Te=function(){function t(t,e,n){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=n}return t.prototype.apply=function(t,e,n,r,i,o,a,s){if(null==t)throw new Error("skeleton cannot be null.");r&&0!=this.duration&&(n%=this.duration,e>0&&(e%=this.duration));for(var u=this.timelines,c=0,l=u.length;c<l;c++)u[c].apply(t,e,n,i,o,a,s)},t.binarySearch=function(t,e,n){void 0===n&&(n=1);var r=0,i=t.length/n-2;if(0==i)return n;for(var o=i>>>1;;){if(t[(o+1)*n]<=e?r=o+1:i=o,r==i)return(r+1)*n;o=r+i>>>1}},t.linearSearch=function(t,e,n){for(var r=0,i=t.length-n;r<=i;r+=n)if(t[r]>e)return r;return-1},t}();!function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"}(he||(he={}));var we,xe=function(){function t(e){if(e<=0)throw new Error("frameCount must be > 0: "+e);this.curves=G.newFloatArray((e-1)*t.BEZIER_SIZE)}return t.prototype.getFrameCount=function(){return this.curves.length/t.BEZIER_SIZE+1},t.prototype.setLinear=function(e){this.curves[e*t.BEZIER_SIZE]=t.LINEAR},t.prototype.setStepped=function(e){this.curves[e*t.BEZIER_SIZE]=t.STEPPED},t.prototype.getCurveType=function(e){var n=e*t.BEZIER_SIZE;if(n==this.curves.length)return t.LINEAR;var r=this.curves[n];return r==t.LINEAR?t.LINEAR:r==t.STEPPED?t.STEPPED:t.BEZIER},t.prototype.setCurve=function(e,n,r,i,o){var a=.03*(2*-n+i),s=.03*(2*-r+o),u=.006*(3*(n-i)+1),c=.006*(3*(r-o)+1),l=2*a+u,h=2*s+c,f=.3*n+a+.16666667*u,p=.3*r+s+.16666667*c,d=e*t.BEZIER_SIZE,y=this.curves;y[d++]=t.BEZIER;for(var m=f,v=p,_=d+t.BEZIER_SIZE-1;d<_;d+=2)y[d]=m,y[d+1]=v,f+=l,p+=h,l+=u,h+=c,m+=f,v+=p},t.prototype.getCurvePercent=function(e,n){n=F.clamp(n,0,1);var r=this.curves,i=e*t.BEZIER_SIZE,o=r[i];if(o==t.LINEAR)return n;if(o==t.STEPPED)return 0;for(var a=0,s=++i,u=i+t.BEZIER_SIZE-1;i<u;i+=2)if((a=r[i])>=n){var c=void 0,l=void 0;return i==s?(c=0,l=0):(c=r[i-2],l=r[i-1]),l+(r[i+1]-l)*(n-c)/(a-c)}var h=r[i-1];return h+(1-h)*(n-a)/(1-a)},t.LINEAR=0,t.STEPPED=1,t.BEZIER=2,t.BEZIER_SIZE=19,t}(),Se=function(t){function e(e){var n=t.call(this,e)||this;return n.frames=G.newFloatArray(e<<1),n}return le(e,t),e.prototype.getPropertyId=function(){return(he.rotate<<24)+this.boneIndex},e.prototype.setFrame=function(t,n,r){t<<=1,this.frames[t]=n,this.frames[t+e.ROTATION]=r},e.prototype.apply=function(t,n,r,i,o,a,s){var u=this.frames,c=t.bones[this.boneIndex];if(r<u[0])switch(a){case m.setup:return void(c.rotation=c.data.rotation);case m.first:var l=c.data.rotation-c.rotation;c.rotation+=(l-360*(16384-(16384.499999999996-l/360|0)))*o}else if(r>=u[u.length-e.ENTRIES]){var h=u[u.length+e.PREV_ROTATION];switch(a){case m.setup:c.rotation=c.data.rotation+h*o;break;case m.first:case m.replace:h+=c.data.rotation-c.rotation,h-=360*(16384-(16384.499999999996-h/360|0));case m.add:c.rotation+=h*o}}else{var f=Te.binarySearch(u,r,e.ENTRIES),p=u[f+e.PREV_ROTATION],d=u[f],y=this.getCurvePercent((f>>1)-1,1-(r-d)/(u[f+e.PREV_TIME]-d)),v=u[f+e.ROTATION]-p;switch(v=p+(v-360*(16384-(16384.499999999996-v/360|0)))*y,a){case m.setup:c.rotation=c.data.rotation+(v-360*(16384-(16384.499999999996-v/360|0)))*o;break;case m.first:case m.replace:v+=c.data.rotation-c.rotation;case m.add:c.rotation+=(v-360*(16384-(16384.499999999996-v/360|0)))*o}}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_ROTATION=-1,e.ROTATION=1,e}(xe),Oe=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=G.newFloatArray(n*e.ENTRIES),r}return le(e,t),e.prototype.getPropertyId=function(){return(he.translate<<24)+this.boneIndex},e.prototype.setFrame=function(t,n,r,i){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.X]=r,this.frames[t+e.Y]=i},e.prototype.apply=function(t,n,r,i,o,a,s){var u=this.frames,c=t.bones[this.boneIndex];if(r<u[0])switch(a){case m.setup:return c.x=c.data.x,void(c.y=c.data.y);case m.first:c.x+=(c.data.x-c.x)*o,c.y+=(c.data.y-c.y)*o}else{var l=0,h=0;if(r>=u[u.length-e.ENTRIES])l=u[u.length+e.PREV_X],h=u[u.length+e.PREV_Y];else{var f=Te.binarySearch(u,r,e.ENTRIES);l=u[f+e.PREV_X],h=u[f+e.PREV_Y];var p=u[f],d=this.getCurvePercent(f/e.ENTRIES-1,1-(r-p)/(u[f+e.PREV_TIME]-p));l+=(u[f+e.X]-l)*d,h+=(u[f+e.Y]-h)*d}switch(a){case m.setup:c.x=c.data.x+l*o,c.y=c.data.y+h*o;break;case m.first:case m.replace:c.x+=(c.data.x+l-c.x)*o,c.y+=(c.data.y+h-c.y)*o;break;case m.add:c.x+=l*o,c.y+=h*o}}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_X=-2,e.PREV_Y=-1,e.X=1,e.Y=2,e}(xe),Pe=function(t){function e(e){return t.call(this,e)||this}return le(e,t),e.prototype.getPropertyId=function(){return(he.scale<<24)+this.boneIndex},e.prototype.apply=function(t,n,r,i,o,a,s){var u=this.frames,c=t.bones[this.boneIndex];if(r<u[0])switch(a){case m.setup:return c.scaleX=c.data.scaleX,void(c.scaleY=c.data.scaleY);case m.first:c.scaleX+=(c.data.scaleX-c.scaleX)*o,c.scaleY+=(c.data.scaleY-c.scaleY)*o}else{var l=0,h=0;if(r>=u[u.length-e.ENTRIES])l=u[u.length+e.PREV_X]*c.data.scaleX,h=u[u.length+e.PREV_Y]*c.data.scaleY;else{var f=Te.binarySearch(u,r,e.ENTRIES);l=u[f+e.PREV_X],h=u[f+e.PREV_Y];var p=u[f],d=this.getCurvePercent(f/e.ENTRIES-1,1-(r-p)/(u[f+e.PREV_TIME]-p));l=(l+(u[f+e.X]-l)*d)*c.data.scaleX,h=(h+(u[f+e.Y]-h)*d)*c.data.scaleY}if(1==o)a==m.add?(c.scaleX+=l-c.data.scaleX,c.scaleY+=h-c.data.scaleY):(c.scaleX=l,c.scaleY=h);else{var y=0,_=0;if(s==v.mixOut)switch(a){case m.setup:y=c.data.scaleX,_=c.data.scaleY,c.scaleX=y+(Math.abs(l)*F.signum(y)-y)*o,c.scaleY=_+(Math.abs(h)*F.signum(_)-_)*o;break;case m.first:case m.replace:y=c.scaleX,_=c.scaleY,c.scaleX=y+(Math.abs(l)*F.signum(y)-y)*o,c.scaleY=_+(Math.abs(h)*F.signum(_)-_)*o;break;case m.add:y=c.scaleX,_=c.scaleY,c.scaleX=y+(Math.abs(l)*F.signum(y)-c.data.scaleX)*o,c.scaleY=_+(Math.abs(h)*F.signum(_)-c.data.scaleY)*o}else switch(a){case m.setup:y=Math.abs(c.data.scaleX)*F.signum(l),_=Math.abs(c.data.scaleY)*F.signum(h),c.scaleX=y+(l-y)*o,c.scaleY=_+(h-_)*o;break;case m.first:case m.replace:y=Math.abs(c.scaleX)*F.signum(l),_=Math.abs(c.scaleY)*F.signum(h),c.scaleX=y+(l-y)*o,c.scaleY=_+(h-_)*o;break;case m.add:y=F.signum(l),_=F.signum(h),c.scaleX=Math.abs(c.scaleX)*y+(l-Math.abs(c.data.scaleX)*y)*o,c.scaleY=Math.abs(c.scaleY)*_+(h-Math.abs(c.data.scaleY)*_)*o}}}},e}(Oe),Re=function(t){function e(e){return t.call(this,e)||this}return le(e,t),e.prototype.getPropertyId=function(){return(he.shear<<24)+this.boneIndex},e.prototype.apply=function(t,n,r,i,o,a,s){var u=this.frames,c=t.bones[this.boneIndex];if(r<u[0])switch(a){case m.setup:return c.shearX=c.data.shearX,void(c.shearY=c.data.shearY);case m.first:c.shearX+=(c.data.shearX-c.shearX)*o,c.shearY+=(c.data.shearY-c.shearY)*o}else{var l=0,h=0;if(r>=u[u.length-e.ENTRIES])l=u[u.length+e.PREV_X],h=u[u.length+e.PREV_Y];else{var f=Te.binarySearch(u,r,e.ENTRIES);l=u[f+e.PREV_X],h=u[f+e.PREV_Y];var p=u[f],d=this.getCurvePercent(f/e.ENTRIES-1,1-(r-p)/(u[f+e.PREV_TIME]-p));l+=(u[f+e.X]-l)*d,h+=(u[f+e.Y]-h)*d}switch(a){case m.setup:c.shearX=c.data.shearX+l*o,c.shearY=c.data.shearY+h*o;break;case m.first:case m.replace:c.shearX+=(c.data.shearX+l-c.shearX)*o,c.shearY+=(c.data.shearY+h-c.shearY)*o;break;case m.add:c.shearX+=l*o,c.shearY+=h*o}}},e}(Oe),Ae=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=G.newFloatArray(n*e.ENTRIES),r}return le(e,t),e.prototype.getPropertyId=function(){return(he.color<<24)+this.slotIndex},e.prototype.setFrame=function(t,n,r,i,o,a){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.R]=r,this.frames[t+e.G]=i,this.frames[t+e.B]=o,this.frames[t+e.A]=a},e.prototype.apply=function(t,n,r,i,o,a,s){var u=t.slots[this.slotIndex],c=this.frames;if(r<c[0])switch(a){case m.setup:return void u.color.setFromColor(u.data.color);case m.first:var l=u.color,h=u.data.color;l.add((h.r-l.r)*o,(h.g-l.g)*o,(h.b-l.b)*o,(h.a-l.a)*o)}else{var f=0,p=0,d=0,y=0;if(r>=c[c.length-e.ENTRIES]){var v=c.length;f=c[v+e.PREV_R],p=c[v+e.PREV_G],d=c[v+e.PREV_B],y=c[v+e.PREV_A]}else{var _=Te.binarySearch(c,r,e.ENTRIES);f=c[_+e.PREV_R],p=c[_+e.PREV_G],d=c[_+e.PREV_B],y=c[_+e.PREV_A];var g=c[_],b=this.getCurvePercent(_/e.ENTRIES-1,1-(r-g)/(c[_+e.PREV_TIME]-g));f+=(c[_+e.R]-f)*b,p+=(c[_+e.G]-p)*b,d+=(c[_+e.B]-d)*b,y+=(c[_+e.A]-y)*b}if(1==o)u.color.set(f,p,d,y);else{l=u.color;a==m.setup&&l.setFromColor(u.data.color),l.add((f-l.r)*o,(p-l.g)*o,(d-l.b)*o,(y-l.a)*o)}}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_R=-4,e.PREV_G=-3,e.PREV_B=-2,e.PREV_A=-1,e.R=1,e.G=2,e.B=3,e.A=4,e}(xe),Ie=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=G.newFloatArray(n*e.ENTRIES),r}return le(e,t),e.prototype.getPropertyId=function(){return(he.twoColor<<24)+this.slotIndex},e.prototype.setFrame=function(t,n,r,i,o,a,s,u,c){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.R]=r,this.frames[t+e.G]=i,this.frames[t+e.B]=o,this.frames[t+e.A]=a,this.frames[t+e.R2]=s,this.frames[t+e.G2]=u,this.frames[t+e.B2]=c},e.prototype.apply=function(t,n,r,i,o,a,s){var u=t.slots[this.slotIndex],c=this.frames;if(r<c[0])switch(a){case m.setup:return u.color.setFromColor(u.data.color),void u.darkColor.setFromColor(u.data.darkColor);case m.first:var l=u.color,h=u.darkColor,f=u.data.color,p=u.data.darkColor;l.add((f.r-l.r)*o,(f.g-l.g)*o,(f.b-l.b)*o,(f.a-l.a)*o),h.add((p.r-h.r)*o,(p.g-h.g)*o,(p.b-h.b)*o,0)}else{var d=0,y=0,v=0,_=0,g=0,b=0,E=0;if(r>=c[c.length-e.ENTRIES]){var T=c.length;d=c[T+e.PREV_R],y=c[T+e.PREV_G],v=c[T+e.PREV_B],_=c[T+e.PREV_A],g=c[T+e.PREV_R2],b=c[T+e.PREV_G2],E=c[T+e.PREV_B2]}else{var w=Te.binarySearch(c,r,e.ENTRIES);d=c[w+e.PREV_R],y=c[w+e.PREV_G],v=c[w+e.PREV_B],_=c[w+e.PREV_A],g=c[w+e.PREV_R2],b=c[w+e.PREV_G2],E=c[w+e.PREV_B2];var x=c[w],S=this.getCurvePercent(w/e.ENTRIES-1,1-(r-x)/(c[w+e.PREV_TIME]-x));d+=(c[w+e.R]-d)*S,y+=(c[w+e.G]-y)*S,v+=(c[w+e.B]-v)*S,_+=(c[w+e.A]-_)*S,g+=(c[w+e.R2]-g)*S,b+=(c[w+e.G2]-b)*S,E+=(c[w+e.B2]-E)*S}if(1==o)u.color.set(d,y,v,_),u.darkColor.set(g,b,E,1);else{l=u.color,h=u.darkColor;a==m.setup&&(l.setFromColor(u.data.color),h.setFromColor(u.data.darkColor)),l.add((d-l.r)*o,(y-l.g)*o,(v-l.b)*o,(_-l.a)*o),h.add((g-h.r)*o,(b-h.g)*o,(E-h.b)*o,0)}}},e.ENTRIES=8,e.PREV_TIME=-8,e.PREV_R=-7,e.PREV_G=-6,e.PREV_B=-5,e.PREV_A=-4,e.PREV_R2=-3,e.PREV_G2=-2,e.PREV_B2=-1,e.R=1,e.G=2,e.B=3,e.A=4,e.R2=5,e.G2=6,e.B2=7,e}(xe),Ce=function(){function t(t){this.frames=G.newFloatArray(t),this.attachmentNames=new Array(t)}return t.prototype.getPropertyId=function(){return(he.attachment<<24)+this.slotIndex},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},t.prototype.apply=function(t,e,n,r,i,o,a){var s=t.slots[this.slotIndex];if(a!=v.mixOut||o!=m.setup){var u=this.frames;if(n<u[0]){if(o==m.setup||o==m.first){var c=s.data.attachmentName;s.setAttachment(null==c?null:t.getAttachment(this.slotIndex,c))}}else{var l=0;l=n>=u[u.length-1]?u.length-1:Te.binarySearch(u,n,1)-1;var h=this.attachmentNames[l];t.slots[this.slotIndex].setAttachment(null==h?null:t.getAttachment(this.slotIndex,h))}}else{var f=s.data.attachmentName;s.setAttachment(null==f?null:t.getAttachment(this.slotIndex,f))}},t}(),ke=null,Ne=function(t){function e(e){var n=t.call(this,e)||this;return n.frames=G.newFloatArray(e),n.frameVertices=new Array(e),null==ke&&(ke=G.newFloatArray(64)),n}return le(e,t),e.prototype.getPropertyId=function(){return(he.deform<<27)+ +this.attachment.id+this.slotIndex},e.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.frameVertices[t]=n},e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.slots[this.slotIndex],u=s.getAttachment();if(u instanceof pe&&u.applyDeform(this.attachment)){var c=s.attachmentVertices;0==c.length&&(o=m.setup);var l=this.frameVertices,h=l[0].length,f=this.frames;if(n<f[0]){var p=u;switch(o){case m.setup:return void(c.length=0);case m.first:if(1==i){c.length=0;break}var d=G.setArraySize(c,h);if(null==p.bones)for(var y=p.vertices,v=0;v<h;v++)d[v]+=(y[v]-d[v])*i;else{i=1-i;for(v=0;v<h;v++)d[v]*=i}}}else{var _=G.setArraySize(c,h);if(n>=f[f.length-1]){var g=l[f.length-1];if(1==i)if(o==m.add)if(null==(p=u).bones)for(y=p.vertices,v=0;v<h;v++)_[v]+=g[v]-y[v];else for(v=0;v<h;v++)_[v]+=g[v];else G.arrayCopy(g,0,_,0,h);else switch(o){case m.setup:var b=u;if(null==b.bones)for(y=b.vertices,v=0;v<h;v++){var E=y[v];_[v]=E+(g[v]-E)*i}else for(v=0;v<h;v++)_[v]=g[v]*i;break;case m.first:case m.replace:for(v=0;v<h;v++)_[v]+=(g[v]-_[v])*i;case m.add:if(null==(p=u).bones)for(y=p.vertices,v=0;v<h;v++)_[v]+=(g[v]-y[v])*i;else for(v=0;v<h;v++)_[v]+=g[v]*i}}else{var T=Te.binarySearch(f,n),w=l[T-1],x=l[T],S=f[T],O=this.getCurvePercent(T-1,1-(n-S)/(f[T-1]-S));if(1==i)if(o==m.add)if(null==(p=u).bones)for(y=p.vertices,v=0;v<h;v++){var P=w[v];_[v]+=P+(x[v]-P)*O-y[v]}else for(v=0;v<h;v++){P=w[v];_[v]+=P+(x[v]-P)*O}else for(v=0;v<h;v++){P=w[v];_[v]=P+(x[v]-P)*O}else switch(o){case m.setup:var R=u;if(null==R.bones)for(y=R.vertices,v=0;v<h;v++){P=w[v],E=y[v];_[v]=E+(P+(x[v]-P)*O-E)*i}else for(v=0;v<h;v++){P=w[v];_[v]=(P+(x[v]-P)*O)*i}break;case m.first:case m.replace:for(v=0;v<h;v++){P=w[v];_[v]+=(P+(x[v]-P)*O-_[v])*i}break;case m.add:if(null==(p=u).bones)for(y=p.vertices,v=0;v<h;v++){P=w[v];_[v]+=(P+(x[v]-P)*O-y[v])*i}else for(v=0;v<h;v++){P=w[v];_[v]+=(P+(x[v]-P)*O)*i}}}}}},e}(xe),Me=function(){function t(t){this.frames=G.newFloatArray(t),this.events=new Array(t)}return t.prototype.getPropertyId=function(){return he.event<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},t.prototype.apply=function(t,e,n,r,i,o,a){if(null!=r){var s=this.frames,u=this.frames.length;if(e>n)this.apply(t,e,Number.MAX_VALUE,r,i,o,a),e=-1;else if(e>=s[u-1])return;if(!(n<s[0])){var c=0;if(e<s[0])c=0;else for(var l=s[c=Te.binarySearch(s,e)];c>0&&s[c-1]==l;)c--;for(;c<u&&n>=s[c];c++)r.push(this.events[c])}}},t}(),je=function(){function t(t){this.frames=G.newFloatArray(t),this.drawOrders=new Array(t)}return t.prototype.getPropertyId=function(){return he.drawOrder<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},t.prototype.apply=function(t,e,n,r,i,o,a){var s=t.drawOrder,u=t.slots;if(a!=v.mixOut||o!=m.setup){var c=this.frames;if(n<c[0])o!=m.setup&&o!=m.first||G.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var l=0;l=n>=c[c.length-1]?c.length-1:Te.binarySearch(c,n)-1;var h=this.drawOrders[l];if(null==h)G.arrayCopy(u,0,s,0,u.length);else for(var f=0,p=h.length;f<p;f++)s[f]=u[h[f]]}}else G.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)},t}(),De=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=G.newFloatArray(n*e.ENTRIES),r}return le(e,t),e.prototype.getPropertyId=function(){return(he.ikConstraint<<24)+this.ikConstraintIndex},e.prototype.setFrame=function(t,n,r,i,o,a){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.MIX]=r,this.frames[t+e.BEND_DIRECTION]=i,this.frames[t+e.COMPRESS]=o?1:0,this.frames[t+e.STRETCH]=a?1:0},e.prototype.apply=function(t,n,r,i,o,a,s){var u=this.frames,c=t.ikConstraints[this.ikConstraintIndex];if(r<u[0])switch(a){case m.setup:return c.mix=c.data.mix,c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,void(c.stretch=c.data.stretch);case m.first:c.mix+=(c.data.mix-c.mix)*o,c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch}else if(r>=u[u.length-e.ENTRIES])a==m.setup?(c.mix=c.data.mix+(u[u.length+e.PREV_MIX]-c.data.mix)*o,s==v.mixOut?(c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch):(c.bendDirection=u[u.length+e.PREV_BEND_DIRECTION],c.compress=0!=u[u.length+e.PREV_COMPRESS],c.stretch=0!=u[u.length+e.PREV_STRETCH])):(c.mix+=(u[u.length+e.PREV_MIX]-c.mix)*o,s==v.mixIn&&(c.bendDirection=u[u.length+e.PREV_BEND_DIRECTION],c.compress=0!=u[u.length+e.PREV_COMPRESS],c.stretch=0!=u[u.length+e.PREV_STRETCH]));else{var l=Te.binarySearch(u,r,e.ENTRIES),h=u[l+e.PREV_MIX],f=u[l],p=this.getCurvePercent(l/e.ENTRIES-1,1-(r-f)/(u[l+e.PREV_TIME]-f));a==m.setup?(c.mix=c.data.mix+(h+(u[l+e.MIX]-h)*p-c.data.mix)*o,s==v.mixOut?(c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch):(c.bendDirection=u[l+e.PREV_BEND_DIRECTION],c.compress=0!=u[l+e.PREV_COMPRESS],c.stretch=0!=u[l+e.PREV_STRETCH])):(c.mix+=(h+(u[l+e.MIX]-h)*p-c.mix)*o,s==v.mixIn&&(c.bendDirection=u[l+e.PREV_BEND_DIRECTION],c.compress=0!=u[l+e.PREV_COMPRESS],c.stretch=0!=u[l+e.PREV_STRETCH]))}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_MIX=-4,e.PREV_BEND_DIRECTION=-3,e.PREV_COMPRESS=-2,e.PREV_STRETCH=-1,e.MIX=1,e.BEND_DIRECTION=2,e.COMPRESS=3,e.STRETCH=4,e}(xe),Le=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=G.newFloatArray(n*e.ENTRIES),r}return le(e,t),e.prototype.getPropertyId=function(){return(he.transformConstraint<<24)+this.transformConstraintIndex},e.prototype.setFrame=function(t,n,r,i,o,a){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.ROTATE]=r,this.frames[t+e.TRANSLATE]=i,this.frames[t+e.SCALE]=o,this.frames[t+e.SHEAR]=a},e.prototype.apply=function(t,n,r,i,o,a,s){var u=this.frames,c=t.transformConstraints[this.transformConstraintIndex];if(r<u[0]){var l=c.data;switch(a){case m.setup:return c.rotateMix=l.rotateMix,c.translateMix=l.translateMix,c.scaleMix=l.scaleMix,void(c.shearMix=l.shearMix);case m.first:c.rotateMix+=(l.rotateMix-c.rotateMix)*o,c.translateMix+=(l.translateMix-c.translateMix)*o,c.scaleMix+=(l.scaleMix-c.scaleMix)*o,c.shearMix+=(l.shearMix-c.shearMix)*o}}else{var h=0,f=0,p=0,d=0;if(r>=u[u.length-e.ENTRIES]){var y=u.length;h=u[y+e.PREV_ROTATE],f=u[y+e.PREV_TRANSLATE],p=u[y+e.PREV_SCALE],d=u[y+e.PREV_SHEAR]}else{var v=Te.binarySearch(u,r,e.ENTRIES);h=u[v+e.PREV_ROTATE],f=u[v+e.PREV_TRANSLATE],p=u[v+e.PREV_SCALE],d=u[v+e.PREV_SHEAR];var _=u[v],g=this.getCurvePercent(v/e.ENTRIES-1,1-(r-_)/(u[v+e.PREV_TIME]-_));h+=(u[v+e.ROTATE]-h)*g,f+=(u[v+e.TRANSLATE]-f)*g,p+=(u[v+e.SCALE]-p)*g,d+=(u[v+e.SHEAR]-d)*g}if(a==m.setup){l=c.data;c.rotateMix=l.rotateMix+(h-l.rotateMix)*o,c.translateMix=l.translateMix+(f-l.translateMix)*o,c.scaleMix=l.scaleMix+(p-l.scaleMix)*o,c.shearMix=l.shearMix+(d-l.shearMix)*o}else c.rotateMix+=(h-c.rotateMix)*o,c.translateMix+=(f-c.translateMix)*o,c.scaleMix+=(p-c.scaleMix)*o,c.shearMix+=(d-c.shearMix)*o}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_ROTATE=-4,e.PREV_TRANSLATE=-3,e.PREV_SCALE=-2,e.PREV_SHEAR=-1,e.ROTATE=1,e.TRANSLATE=2,e.SCALE=3,e.SHEAR=4,e}(xe),Be=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=G.newFloatArray(n*e.ENTRIES),r}return le(e,t),e.prototype.getPropertyId=function(){return(he.pathConstraintPosition<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(t,n,r){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.VALUE]=r},e.prototype.apply=function(t,n,r,i,o,a,s){var u=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(r<u[0])switch(a){case m.setup:return void(c.position=c.data.position);case m.first:c.position+=(c.data.position-c.position)*o}else{var l=0;if(r>=u[u.length-e.ENTRIES])l=u[u.length+e.PREV_VALUE];else{var h=Te.binarySearch(u,r,e.ENTRIES);l=u[h+e.PREV_VALUE];var f=u[h],p=this.getCurvePercent(h/e.ENTRIES-1,1-(r-f)/(u[h+e.PREV_TIME]-f));l+=(u[h+e.VALUE]-l)*p}a==m.setup?c.position=c.data.position+(l-c.data.position)*o:c.position+=(l-c.position)*o}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_VALUE=-1,e.VALUE=1,e}(xe),Fe=function(t){function e(e){return t.call(this,e)||this}return le(e,t),e.prototype.getPropertyId=function(){return(he.pathConstraintSpacing<<24)+this.pathConstraintIndex},e.prototype.apply=function(t,n,r,i,o,a,s){var u=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(r<u[0])switch(a){case m.setup:return void(c.spacing=c.data.spacing);case m.first:c.spacing+=(c.data.spacing-c.spacing)*o}else{var l=0;if(r>=u[u.length-e.ENTRIES])l=u[u.length+e.PREV_VALUE];else{var h=Te.binarySearch(u,r,e.ENTRIES);l=u[h+e.PREV_VALUE];var f=u[h],p=this.getCurvePercent(h/e.ENTRIES-1,1-(r-f)/(u[h+e.PREV_TIME]-f));l+=(u[h+e.VALUE]-l)*p}a==m.setup?c.spacing=c.data.spacing+(l-c.data.spacing)*o:c.spacing+=(l-c.spacing)*o}},e}(Be),Ue=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=G.newFloatArray(n*e.ENTRIES),r}return le(e,t),e.prototype.getPropertyId=function(){return(he.pathConstraintMix<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(t,n,r,i){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.ROTATE]=r,this.frames[t+e.TRANSLATE]=i},e.prototype.apply=function(t,n,r,i,o,a,s){var u=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(r<u[0])switch(a){case m.setup:return c.rotateMix=c.data.rotateMix,void(c.translateMix=c.data.translateMix);case m.first:c.rotateMix+=(c.data.rotateMix-c.rotateMix)*o,c.translateMix+=(c.data.translateMix-c.translateMix)*o}else{var l=0,h=0;if(r>=u[u.length-e.ENTRIES])l=u[u.length+e.PREV_ROTATE],h=u[u.length+e.PREV_TRANSLATE];else{var f=Te.binarySearch(u,r,e.ENTRIES);l=u[f+e.PREV_ROTATE],h=u[f+e.PREV_TRANSLATE];var p=u[f],d=this.getCurvePercent(f/e.ENTRIES-1,1-(r-p)/(u[f+e.PREV_TIME]-p));l+=(u[f+e.ROTATE]-l)*d,h+=(u[f+e.TRANSLATE]-h)*d}a==m.setup?(c.rotateMix=c.data.rotateMix+(l-c.data.rotateMix)*o,c.translateMix=c.data.translateMix+(h-c.data.translateMix)*o):(c.rotateMix+=(l-c.rotateMix)*o,c.translateMix+=(h-c.translateMix)*o)}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_ROTATE=-2,e.PREV_TRANSLATE=-1,e.ROTATE=1,e.TRANSLATE=2,e}(xe),Ge=function(){function t(t){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new Ve(this),this.propertyIDs=new D,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new H((function(){return new He})),this.data=t}return t.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,n=0,r=e.length;n<r;n++){var i=e[n];if(null!=i){i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast;var o=t*i.timeScale;if(i.delay>0){if(i.delay-=o,i.delay>0)continue;o=-i.delay,i.delay=0}var a=i.next;if(null!=a){var s=i.trackLast-a.delay;if(s>=0){for(a.delay=0,a.trackTime=0==i.timeScale?0:(s/i.timeScale+t)*a.timeScale,i.trackTime+=o,this.setCurrent(n,a,!0);null!=a.mixingFrom;)a.mixTime+=t,a=a.mixingFrom;continue}}else if(i.trackLast>=i.trackEnd&&null==i.mixingFrom){e[n]=null,this.queue.end(i),this.disposeNext(i);continue}if(null!=i.mixingFrom&&this.updateMixingFrom(i,t)){var u=i.mixingFrom;for(i.mixingFrom=null,null!=u&&(u.mixingTo=null);null!=u;)this.queue.end(u),u=u.mixingFrom}i.trackTime+=o}}this.queue.drain()},t.prototype.updateMixingFrom=function(t,e){var n=t.mixingFrom;if(null==n)return!0;var r=this.updateMixingFrom(n,e);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=n.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=n.mixingFrom,null!=n.mixingFrom&&(n.mixingFrom.mixingTo=t),t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),r):(n.trackTime+=e*n.timeScale,t.mixTime+=e,!1)},t.prototype.apply=function(e){if(null==e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var n=this.events,r=this.tracks,i=!1,o=0,a=r.length;o<a;o++){var s=r[o];if(!(null==s||s.delay>0)){i=!0;var u=0==o?m.first:s.mixBlend,c=s.alpha;null!=s.mixingFrom?c*=this.applyMixingFrom(s,e,u):s.trackTime>=s.trackEnd&&null==s.next&&(c=0);var l=s.animationLast,h=s.getAnimationTime(),f=s.animation.timelines.length,p=s.animation.timelines;if(0==o&&1==c||u==m.add)for(var d=0;d<f;d++)G.webkit602BugfixHelper(c,u),p[d].apply(e,l,h,n,c,u,v.mixIn);else{var y=s.timelineMode,_=0==s.timelinesRotation.length;_&&G.setArraySize(s.timelinesRotation,f<<1,null);var g=s.timelinesRotation;for(d=0;d<f;d++){var b=p[d],E=y[d]==t.SUBSEQUENT?u:m.setup;b instanceof Se?this.applyRotateTimeline(b,e,h,c,E,g,d<<1,_):(G.webkit602BugfixHelper(c,u),b.apply(e,l,h,n,c,E,v.mixIn))}}this.queueEvents(s,h),n.length=0,s.nextAnimationLast=h,s.nextTrackLast=s.trackTime}}return this.queue.drain(),i},t.prototype.applyMixingFrom=function(e,n,r){var i=e.mixingFrom;null!=i.mixingFrom&&this.applyMixingFrom(i,n,r);var o=0;0==e.mixDuration?(o=1,r==m.first&&(r=m.setup)):((o=e.mixTime/e.mixDuration)>1&&(o=1),r!=m.first&&(r=i.mixBlend));var a=o<i.eventThreshold?this.events:null,s=o<i.attachmentThreshold,u=o<i.drawOrderThreshold,c=i.animationLast,l=i.getAnimationTime(),h=i.animation.timelines.length,f=i.animation.timelines,p=i.alpha*e.interruptAlpha,d=p*(1-o);if(r==m.add)for(var y=0;y<h;y++)f[y].apply(n,c,l,a,d,r,v.mixOut);else{var _=i.timelineMode,g=i.timelineHoldMix,b=0==i.timelinesRotation.length;b&&G.setArraySize(i.timelinesRotation,h<<1,null);var E=i.timelinesRotation;i.totalAlpha=0;for(y=0;y<h;y++){var T=f[y],w=v.mixOut,x=void 0,S=0;switch(_[y]){case t.SUBSEQUENT:if(!s&&T instanceof Ce)continue;if(!u&&T instanceof je)continue;x=r,S=d;break;case t.FIRST:x=m.setup,S=d;break;case t.HOLD:x=m.setup,S=p;break;default:x=m.setup;var O=g[y];S=p*Math.max(0,1-O.mixTime/O.mixDuration)}i.totalAlpha+=S,T instanceof Se?this.applyRotateTimeline(T,n,l,S,x,E,y<<1,b):(G.webkit602BugfixHelper(S,r),x==m.setup&&(T instanceof Ce?s&&(w=v.mixOut):T instanceof je&&u&&(w=v.mixOut)),T.apply(n,c,l,a,S,x,w))}}return e.mixDuration>0&&this.queueEvents(i,l),this.events.length=0,i.nextAnimationLast=l,i.nextTrackLast=i.trackTime,o},t.prototype.applyRotateTimeline=function(t,e,n,r,i,o,a,s){if(s&&(o[a]=0),1!=r){var u=t,c=u.frames,l=e.bones[u.boneIndex],h=0,f=0;if(n<c[0])switch(i){case m.setup:l.rotation=l.data.rotation;default:return;case m.first:h=l.rotation,f=l.data.rotation}else if(h=i==m.setup?l.data.rotation:l.rotation,n>=c[c.length-Se.ENTRIES])f=l.data.rotation+c[c.length+Se.PREV_ROTATION];else{var p=Te.binarySearch(c,n,Se.ENTRIES),d=c[p+Se.PREV_ROTATION],y=c[p],_=u.getCurvePercent((p>>1)-1,1-(n-y)/(c[p+Se.PREV_TIME]-y));f=c[p+Se.ROTATION]-d,f=d+(f-=360*(16384-(16384.499999999996-f/360|0)))*_+l.data.rotation,f-=360*(16384-(16384.499999999996-f/360|0))}var g=0,b=f-h;if(0==(b-=360*(16384-(16384.499999999996-b/360|0))))g=o[a];else{var E=0,T=0;s?(E=0,T=b):(E=o[a],T=o[a+1]);var w=b>0,x=E>=0;F.signum(T)!=F.signum(b)&&Math.abs(T)<=90&&(Math.abs(E)>180&&(E+=360*F.signum(E)),x=w),g=b+E-E%360,x!=w&&(g+=360*F.signum(E)),o[a]=g}o[a+1]=b,h+=g*r,l.rotation=h-360*(16384-(16384.499999999996-h/360|0))}else t.apply(e,0,n,null,1,i,v.mixIn)},t.prototype.queueEvents=function(t,e){for(var n=t.animationStart,r=t.animationEnd,i=r-n,o=t.trackLast%i,a=this.events,s=0,u=a.length;s<u;s++){var c=a[s];if(c.time<o)break;c.time>r||this.queue.event(t,c)}for((t.loop?0==i||o>t.trackTime%i:e>=r&&t.animationLast<r)&&this.queue.complete(t);s<u;s++){a[s].time<n||this.queue.event(t,a[s])}},t.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,n=this.tracks.length;e<n;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},t.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var n=e;;){var r=n.mixingFrom;if(null==r)break;this.queue.end(r),n.mixingFrom=null,n.mixingTo=null,n=r}this.tracks[e.trackIndex]=null,this.queue.drain()}}},t.prototype.setCurrent=function(t,e,n){var r=this.expandToIndex(t);this.tracks[t]=e,null!=r&&(n&&this.queue.interrupt(r),e.mixingFrom=r,r.mixingTo=e,e.mixTime=0,null!=r.mixingFrom&&r.mixDuration>0&&(e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(e)},t.prototype.setAnimation=function(t,e,n){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,r,n)},t.prototype.setAnimationWith=function(t,e,n){if(null==e)throw new Error("animation cannot be null.");var r=!0,i=this.expandToIndex(t);null!=i&&(-1==i.nextTrackLast?(this.tracks[t]=i.mixingFrom,this.queue.interrupt(i),this.queue.end(i),this.disposeNext(i),i=i.mixingFrom,r=!1):this.disposeNext(i));var o=this.trackEntry(t,e,n,i);return this.setCurrent(t,o,r),this.queue.drain(),o},t.prototype.addAnimation=function(t,e,n,r){var i=this.data.skeletonData.findAnimation(e);if(null==i)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,i,n,r)},t.prototype.addAnimationWith=function(t,e,n,r){if(null==e)throw new Error("animation cannot be null.");var i=this.expandToIndex(t);if(null!=i)for(;null!=i.next;)i=i.next;var o=this.trackEntry(t,e,n,i);if(null==i)this.setCurrent(t,o,!0),this.queue.drain();else if(i.next=o,r<=0){var a=i.animationEnd-i.animationStart;0!=a?(i.loop?r+=a*(1+(i.trackTime/a|0)):r+=Math.max(a,i.trackTime),r-=this.data.getMix(i.animation,e)):r=i.trackTime}return o.delay=r,o},t.prototype.setEmptyAnimation=function(e,n){var r=this.setAnimationWith(e,t.emptyAnimation,!1);return r.mixDuration=n,r.trackEnd=n,r},t.prototype.addEmptyAnimation=function(e,n,r){r<=0&&(r-=n);var i=this.addAnimationWith(e,t.emptyAnimation,!1,r);return i.mixDuration=n,i.trackEnd=n,i},t.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,r=this.tracks.length;n<r;n++){var i=this.tracks[n];null!=i&&this.setEmptyAnimation(i.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},t.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(G.ensureArrayCapacity(this.tracks,t-this.tracks.length+1,null),this.tracks.length=t+1,null)},t.prototype.trackEntry=function(t,e,n,r){var i=this.trackEntryPool.obtain();return i.trackIndex=t,i.animation=e,i.loop=n,i.holdPrevious=!1,i.eventThreshold=0,i.attachmentThreshold=0,i.drawOrderThreshold=0,i.animationStart=0,i.animationEnd=e.duration,i.animationLast=-1,i.nextAnimationLast=-1,i.delay=0,i.trackTime=0,i.trackLast=-1,i.nextTrackLast=-1,i.trackEnd=Number.MAX_VALUE,i.timeScale=1,i.alpha=1,i.interruptAlpha=1,i.mixTime=0,i.mixDuration=null==r?0:this.data.getMix(r.animation,e),i},t.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},t.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=0,e=this.tracks.length;t<e;t++){var n=this.tracks[t];if(null!=n){for(;null!=n.mixingFrom;)n=n.mixingFrom;do{null!=n.mixingFrom&&n.mixBlend==m.add||this.setTimelineModes(n),n=n.mixingTo}while(null!=n)}}},t.prototype.setTimelineModes=function(e){var n=e.mixingTo,r=e.animation.timelines,i=e.animation.timelines.length,o=G.setArraySize(e.timelineMode,i);e.timelineHoldMix.length=0;var a=G.setArraySize(e.timelineHoldMix,i),s=this.propertyIDs;if(null!=n&&n.holdPrevious)for(var u=0;u<i;u++)s.add(r[u].getPropertyId()),o[u]=t.HOLD;else t:for(u=0;u<i;u++){var c=r[u].getPropertyId();if(s.add(c))if(null!=n&&this.hasTimeline(n,c)){for(var l=n.mixingTo;null!=l;l=l.mixingTo)if(!this.hasTimeline(l,c)){if(e.mixDuration>0){o[u]=t.HOLD_MIX,a[u]=l;continue t}break}o[u]=t.HOLD}else o[u]=t.FIRST;else o[u]=t.SUBSEQUENT}},t.prototype.hasTimeline=function(t,e){for(var n=t.animation.timelines,r=0,i=n.length;r<i;r++)if(n[r].getPropertyId()==e)return!0;return!1},t.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},t.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},t.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},t.prototype.clearListeners=function(){this.listeners.length=0},t.prototype.clearListenerNotifications=function(){this.queue.clear()},t.prototype.setAnimationByName=function(e,n,r){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(e,n,r)},t.prototype.addAnimationByName=function(e,n,r,i){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(e,n,r,i)},t.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},t.prototype.hasAnimationByName=function(e){return t.deprecatedWarning3||(t.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(e)},t.emptyAnimation=new Te("<empty>",[],0),t.SUBSEQUENT=0,t.FIRST=1,t.HOLD=2,t.HOLD_MIX=3,t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t.deprecatedWarning3=!1,t}(),He=function(){function t(){this.mixBlend=m.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},t.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(t.prototype,"time",{get:function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(e){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),t.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t}(),Ve=function(){function t(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return t.prototype.start=function(t){this.objects.push(we.start),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.interrupt=function(t){this.objects.push(we.interrupt),this.objects.push(t)},t.prototype.end=function(t){this.objects.push(we.end),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.dispose=function(t){this.objects.push(we.dispose),this.objects.push(t)},t.prototype.complete=function(t){this.objects.push(we.complete),this.objects.push(t)},t.prototype.event=function(t,e){this.objects.push(we.event),this.objects.push(t),this.objects.push(e)},t.prototype.deprecateStuff=function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];switch(r){case we.start:null!=i.listener&&i.listener.start&&i.listener.start(i);for(var o=0;o<e.length;o++)e[o].start&&e[o].start(i);i.onStart&&this.deprecateStuff()&&i.onStart(i.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(i.trackIndex);break;case we.interrupt:null!=i.listener&&i.listener.interrupt&&i.listener.interrupt(i);for(o=0;o<e.length;o++)e[o].interrupt&&e[o].interrupt(i);break;case we.end:null!=i.listener&&i.listener.end&&i.listener.end(i);for(o=0;o<e.length;o++)e[o].end&&e[o].end(i);i.onEnd&&this.deprecateStuff()&&i.onEnd(i.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(i.trackIndex);case we.dispose:null!=i.listener&&i.listener.dispose&&i.listener.dispose(i);for(o=0;o<e.length;o++)e[o].dispose&&e[o].dispose(i);this.animState.trackEntryPool.free(i);break;case we.complete:null!=i.listener&&i.listener.complete&&i.listener.complete(i);for(o=0;o<e.length;o++)e[o].complete&&e[o].complete(i);var a=F.toInt(i.loopsCount());i.onComplete&&this.deprecateStuff()&&i.onComplete(i.trackIndex,a),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(i.trackIndex,a);break;case we.event:var s=t[2+n++];null!=i.listener&&i.listener.event&&i.listener.event(i,s);for(o=0;o<e.length;o++)e[o].event&&e[o].event(i,s);i.onEvent&&this.deprecateStuff()&&i.onEvent(i.trackIndex,s),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(i.trackIndex,s)}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t.deprecatedWarning1=!1,t}();!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(we||(we={}));var Xe,We=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}(),Ye=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,n){var r=this.skeletonData.findAnimation(t);if(null==r)throw new Error("Animation not found: "+t);var i=this.skeletonData.findAnimation(e);if(null==i)throw new Error("Animation not found: "+e);this.setMixWith(r,i,n)},t.prototype.setMixByName=function(e,n,r){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,n,r)},t.prototype.setMixWith=function(t,e,n){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var r=t.name+"."+e.name;this.animationToMixTime[r]=n},t.prototype.getMix=function(t,e){var n=t.name+"."+e.name,r=this.animationToMixTime[n];return void 0===r?this.defaultMix:r},t.deprecatedWarning1=!1,t}(),ze=function(){function t(t){this.atlas=t}return t.prototype.newRegionAttachment=function(t,e,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (region attachment: "+e+")");var i=new ge(e);return i.region=r,i},t.prototype.newMeshAttachment=function(t,e,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+e+")");var i=new me(e);return i.region=r,i},t.prototype.newBoundingBoxAttachment=function(t,e){return new de(e)},t.prototype.newPathAttachment=function(t,e){return new ve(e)},t.prototype.newPointAttachment=function(t,e){return new _e(e)},t.prototype.newClippingAttachment=function(t,e){return new ye(e)},t}(),qe=function(){function t(t,e,n){if(this.matrix=new l.d,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()}return Object.defineProperty(t.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(t,e,n,r,i,o,a){this.ax=t,this.ay=e,this.arotation=n,this.ascaleX=r,this.ascaleY=i,this.ashearX=o,this.ashearY=a,this.appliedValid=!0;var s=this.parent,u=this.matrix,c=this.skeleton.scaleX,l=X?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==s){var h=this.skeleton,f=n+90+a;return u.a=F.cosDeg(n+o)*r*c,u.c=F.cosDeg(f)*i*c,u.b=F.sinDeg(n+o)*r*l,u.d=F.sinDeg(f)*i*l,u.tx=t*c+h.x,void(u.ty=e*l+h.y)}var p=s.matrix.a,d=s.matrix.c,y=s.matrix.b,m=s.matrix.d;switch(u.tx=p*t+d*e+s.matrix.tx,u.ty=y*t+m*e+s.matrix.ty,this.data.transformMode){case b.Normal:f=n+90+a;var v=F.cosDeg(n+o)*r,_=F.cosDeg(f)*i,g=F.sinDeg(n+o)*r,E=F.sinDeg(f)*i;return u.a=p*v+d*g,u.c=p*_+d*E,u.b=y*v+m*g,void(u.d=y*_+m*E);case b.OnlyTranslation:f=n+90+a;u.a=F.cosDeg(n+o)*r,u.c=F.cosDeg(f)*i,u.b=F.sinDeg(n+o)*r,u.d=F.sinDeg(f)*i;break;case b.NoRotationOrReflection:var T=0;(S=p*p+y*y)>1e-4?(d=y*(S=Math.abs(p*m-d*y)/S),m=p*S,T=Math.atan2(y,p)*F.radDeg):(p=0,y=0,T=90-Math.atan2(m,d)*F.radDeg);var w=n+o-T,x=n+a-T+90;v=F.cosDeg(w)*r,_=F.cosDeg(x)*i,g=F.sinDeg(w)*r,E=F.sinDeg(x)*i;u.a=p*v-d*g,u.c=p*_-d*E,u.b=y*v+m*g,u.d=y*_+m*E;break;case b.NoScale:case b.NoScaleOrReflection:var S,O=F.cosDeg(n),P=F.sinDeg(n),R=(p*O+d*P)/c,A=(y*O+m*P)/l;(S=Math.sqrt(R*R+A*A))>1e-5&&(S=1/S),R*=S,A*=S,S=Math.sqrt(R*R+A*A),this.data.transformMode==b.NoScale&&p*m-d*y<0!=(X?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(S=-S);var I=Math.PI/2+Math.atan2(A,R),C=Math.cos(I)*S,k=Math.sin(I)*S;v=F.cosDeg(o)*r,_=F.cosDeg(90+a)*i,g=F.sinDeg(o)*r,E=F.sinDeg(90+a)*i;u.a=R*v+C*g,u.c=R*_+C*E,u.b=A*v+k*g,u.d=A*_+k*E}u.a*=c,u.c*=c,u.b*=l,u.d*=l},t.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*F.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*F.radDeg},t.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},t.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},t.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent,e=this.matrix;if(null==t)return this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*F.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,void(this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*F.radDeg);var n=t.matrix,r=1/(n.a*n.d-n.b*n.c),i=e.tx-n.tx,o=e.ty-n.ty;this.ax=i*n.d*r-o*n.c*r,this.ay=o*n.a*r-i*n.b*r;var a=r*n.d,s=r*n.a,u=r*n.c,c=r*n.b,l=a*e.a-u*e.b,h=a*e.c-u*e.d,f=s*e.b-c*e.a,p=s*e.d-c*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(l*l+f*f),this.ascaleX>1e-4){var d=l*p-h*f;this.ascaleY=d/this.ascaleX,this.ashearY=Math.atan2(l*h+f*p,d)*F.radDeg,this.arotation=Math.atan2(f,l)*F.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(h*h+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,h)*F.radDeg},t.prototype.worldToLocal=function(t){var e=this.matrix,n=e.a,r=e.c,i=e.b,o=e.d,a=1/(n*o-r*i),s=t.x-e.tx,u=t.y-e.ty;return t.x=s*o*a-u*r*a,t.y=u*n*a-s*i*a,t},t.prototype.localToWorld=function(t){var e=this.matrix,n=t.x,r=t.y;return t.x=n*e.a+r*e.c+e.tx,t.y=n*e.b+r*e.d+e.ty,t},t.prototype.worldToLocalRotation=function(t){var e=F.sinDeg(t),n=F.cosDeg(t),r=this.matrix;return Math.atan2(r.a*e-r.b*n,r.d*n-r.c*e)*F.radDeg},t.prototype.localToWorldRotation=function(t){var e=F.sinDeg(t),n=F.cosDeg(t),r=this.matrix;return Math.atan2(n*r.b+e*r.d,n*r.a+e*r.c)*F.radDeg},t.prototype.rotateWorld=function(t){var e=this.matrix,n=e.a,r=e.c,i=e.b,o=e.d,a=F.cosDeg(t),s=F.sinDeg(t);e.a=a*n-s*i,e.c=a*r-s*o,e.b=s*n+a*i,e.d=s*r+a*o,this.appliedValid=!1},t}(),Ke=function(t,e,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=b.Normal,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=n},Ze=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e},$e=function(t){this.name=t},Je=function(){function t(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}return t.prototype.getOrder=function(){return this.data.order},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.mix)}},t.prototype.apply1=function(t,e,n,r,i,o,a){t.appliedValid||t.updateAppliedTransform();var s=t.parent.matrix,u=1/(s.a*s.d-s.b*s.c),c=e-s.tx,l=n-s.ty,h=(c*s.d-l*s.c)*u-t.ax,f=(l*s.a-c*s.b)*u-t.ay,p=Math.atan2(f,h)*F.radDeg-t.ashearX-t.arotation;t.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);var d=t.ascaleX,y=t.ascaleY;if(r||i){var m=t.data.length*d,v=Math.sqrt(h*h+f*f);if(r&&v<m||i&&v>m&&m>1e-4){var _=(v/m-1)*a+1;d*=_,o&&(y*=_)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+p*a,d,y,t.ashearX,t.ashearY)},t.prototype.apply2=function(t,e,n,r,i,o,a){if(0!=a){t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();var s=t.ax,u=t.ay,c=t.ascaleX,l=c,h=t.ascaleY,f=e.ascaleX,p=t.matrix,d=0,y=0,m=0;c<0?(c=-c,d=180,m=-1):(d=0,m=1),h<0&&(h=-h,m=-m),f<0?(f=-f,y=180):y=0;var v=e.ax,_=0,g=0,b=0,E=p.a,T=p.c,w=p.b,x=p.d,S=Math.abs(c-h)<=1e-4;S?(g=E*v+T*(_=e.ay)+p.tx,b=w*v+x*_+p.ty):(_=0,g=E*v+p.tx,b=w*v+p.ty);var O=t.parent.matrix;E=O.a,T=O.c,w=O.b;var P=1/(E*(x=O.d)-T*w),R=n-O.tx,A=r-O.ty,I=(R*x-A*T)*P-s,C=(A*E-R*w)*P-u,k=I*I+C*C,N=((R=g-O.tx)*x-(A=b-O.ty)*T)*P-s,M=(A*E-R*w)*P-u,j=Math.sqrt(N*N+M*M),D=e.data.length*f,L=0,B=0;t:if(S){var U=(k-j*j-(D*=c)*D)/(2*j*D);U<-1?U=-1:U>1&&(U=1,o&&j+D>1e-4&&(l*=(Math.sqrt(k)/(j+D)-1)*a+1)),B=Math.acos(U)*i,E=j+D*U,T=D*Math.sin(B),L=Math.atan2(C*E-I*T,I*E+C*T)}else{var G=(E=c*D)*E,H=(T=h*D)*T,V=Math.atan2(C,I),X=-2*H*j,W=H-G;if((x=X*X-4*W*(w=H*j*j+G*k-G*H))>=0){var Y=Math.sqrt(x);X<0&&(Y=-Y);var z=(Y=-(X+Y)/2)/W,q=w/Y,K=Math.abs(z)<Math.abs(q)?z:q;if(K*K<=k){A=Math.sqrt(k-K*K)*i,L=V-Math.atan2(A,K),B=Math.atan2(A/h,(K-j)/c);break t}}var Z=F.PI,$=j-E,J=$*$,Q=0,tt=0,et=j+E,nt=et*et,rt=0;(w=-E*j/(G-H))>=-1&&w<=1&&(w=Math.acos(w),(x=(R=E*Math.cos(w)+j)*R+(A=T*Math.sin(w))*A)<J&&(Z=w,J=x,$=R,Q=A),x>nt&&(tt=w,nt=x,et=R,rt=A)),k<=(J+nt)/2?(L=V-Math.atan2(Q*i,$),B=Z*i):(L=V-Math.atan2(rt*i,et),B=tt*i)}var it=Math.atan2(_,v)*m,ot=t.arotation;(L=(L-it)*F.radDeg+d-ot)>180?L-=360:L<-180&&(L+=360),t.updateWorldTransformWith(s,u,ot+L*a,l,t.ascaleY,0,0),ot=e.arotation,(B=((B+it)*F.radDeg-e.ashearX)*m+y-ot)>180?B-=360:B<-180&&(B+=360),e.updateWorldTransformWith(v,_,ot+B*a,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}else e.updateWorldTransform()},t}(),Qe=function(t){this.order=0,this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.name=t},tn=function(t){this.order=0,this.bones=new Array,this.name=t};!function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"}(Xe||(Xe={}));var en=function(){function t(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,r=t.bones.length;n<r;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return t.prototype.apply=function(){this.update()},t.prototype.update=function(){var e=this.target.getAttachment();if(e instanceof ve){var n=this.rotateMix,r=this.translateMix,i=n>0;if(r>0||i){var o=this.data,a=o.spacingMode,s=a==Xe.Length,u=o.rotateMode,c=u==g.Tangent,l=u==g.ChainScale,h=this.bones.length,f=c?h:h+1,p=this.bones,d=G.setArraySize(this.spaces,f),y=null,m=this.spacing;if(l||s){l&&(y=G.setArraySize(this.lengths,h));for(var v=0,b=f-1;v<b;){var E=(C=p[v]).data.length;if(E<t.epsilon)l&&(y[v]=0),d[++v]=0;else{var T=E*C.matrix.a,w=E*C.matrix.b,x=Math.sqrt(T*T+w*w);l&&(y[v]=x),d[++v]=(s?E+m:m)*x/E}}}else for(v=1;v<f;v++)d[v]=m;var S=this.computeWorldPositions(e,f,c,o.positionMode==_.Percent,a==Xe.Percent),O=S[0],P=S[1],R=o.offsetRotation,A=!1;if(0==R)A=u==g.Chain;else A=!1,R*=(I=this.target.bone.matrix).a*I.d-I.b*I.c>0?F.degRad:-F.degRad;v=0;for(var I=3;v<h;v++,I+=3){var C,k=(C=p[v]).matrix;k.tx+=(O-k.tx)*r,k.ty+=(P-k.ty)*r;var N=(T=S[I])-O,M=(w=S[I+1])-P;if(l){var j=y[v];if(0!=j){var D=(Math.sqrt(N*N+M*M)/j-1)*n+1;k.a*=D,k.b*=D}}if(O=T,P=w,i){var L=k.a,B=k.c,U=k.b,H=k.d,V=0,X=0,W=0;if(V=c?S[I-1]:0==d[v+1]?S[I+2]:Math.atan2(M,N),V-=Math.atan2(U,L),A){X=Math.cos(V),W=Math.sin(V);var Y=C.data.length;O+=(Y*(X*L-W*U)-N)*n,P+=(Y*(W*L+X*U)-M)*n}else V+=R;V>F.PI?V-=F.PI2:V<-F.PI&&(V+=F.PI2),V*=n,X=Math.cos(V),W=Math.sin(V),k.a=X*L-W*U,k.c=X*B-W*H,k.b=W*L+X*U,k.d=W*B+X*H}C.appliedValid=!1}}}},t.prototype.computeWorldPositions=function(e,n,r,i,o){var a=this.target,s=this.position,u=this.spaces,c=G.setArraySize(this.positions,3*n+2),l=null,h=e.closed,f=e.worldVerticesLength,p=f/6,d=t.NONE;if(!e.constantSpeed){var y=e.lengths,m=y[p-=h?1:2];if(i&&(s*=m),o)for(var v=0;v<n;v++)u[v]*=m;l=G.setArraySize(this.world,8);v=0;for(var _=0,g=0;v<n;v++,_+=3){var b=s+=W=u[v];if(h)(b%=m)<0&&(b+=m),g=0;else{if(b<0){d!=t.BEFORE&&(d=t.BEFORE,e.computeWorldVertices(a,2,4,l,0,2)),this.addBeforePosition(b,l,0,c,_);continue}if(b>m){d!=t.AFTER&&(d=t.AFTER,e.computeWorldVertices(a,f-6,4,l,0,2)),this.addAfterPosition(b-m,l,0,c,_);continue}}for(;;g++){var E=y[g];if(!(b>E)){if(0==g)b/=E;else b=(b-(K=y[g-1]))/(E-K);break}}g!=d&&(d=g,h&&g==p?(e.computeWorldVertices(a,f-4,4,l,0,2),e.computeWorldVertices(a,0,4,l,4,2)):e.computeWorldVertices(a,6*g+2,8,l,0,2)),this.addCurvePosition(b,l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],c,_,r||v>0&&0==W)}return c}h?(f+=2,l=G.setArraySize(this.world,f),e.computeWorldVertices(a,2,f-4,l,0,2),e.computeWorldVertices(a,0,2,l,f-4,2),l[f-2]=l[0],l[f-1]=l[1]):(p--,f-=4,l=G.setArraySize(this.world,f),e.computeWorldVertices(a,2,f,l,0,2));for(var T=G.setArraySize(this.curves,p),w=0,x=l[0],S=l[1],O=0,P=0,R=0,A=0,I=0,C=0,k=0,N=0,M=0,j=0,D=0,L=0,B=0,F=0,U=(v=0,2);v<p;v++,U+=6)O=l[U],P=l[U+1],R=l[U+2],A=l[U+3],D=2*(k=.1875*(x-2*O+R))+(M=.09375*(3*(O-R)-x+(I=l[U+4]))),L=2*(N=.1875*(S-2*P+A))+(j=.09375*(3*(P-A)-S+(C=l[U+5]))),B=.75*(O-x)+k+.16666667*M,F=.75*(P-S)+N+.16666667*j,w+=Math.sqrt(B*B+F*F),B+=D,F+=L,D+=M,L+=j,w+=Math.sqrt(B*B+F*F),B+=D,F+=L,w+=Math.sqrt(B*B+F*F),B+=D+M,F+=L+j,w+=Math.sqrt(B*B+F*F),T[v]=w,x=I,S=C;if(i&&(s*=w),o)for(v=0;v<n;v++)u[v]*=w;for(var H=this.segments,V=0,X=(v=0,_=0,g=0,0);v<n;v++,_+=3){var W;b=s+=W=u[v];if(h)(b%=w)<0&&(b+=w),g=0;else{if(b<0){this.addBeforePosition(b,l,0,c,_);continue}if(b>w){this.addAfterPosition(b-w,l,f-4,c,_);continue}}for(;;g++){var Y=T[g];if(!(b>Y)){if(0==g)b/=Y;else b=(b-(K=T[g-1]))/(Y-K);break}}if(g!=d){d=g;var z=6*g;for(x=l[z],S=l[z+1],O=l[z+2],P=l[z+3],R=l[z+4],A=l[z+5],D=2*(k=.03*(x-2*O+R))+(M=.006*(3*(O-R)-x+(I=l[z+6]))),L=2*(N=.03*(S-2*P+A))+(j=.006*(3*(P-A)-S+(C=l[z+7]))),B=.3*(O-x)+k+.16666667*M,F=.3*(P-S)+N+.16666667*j,V=Math.sqrt(B*B+F*F),H[0]=V,z=1;z<8;z++)B+=D,F+=L,D+=M,L+=j,V+=Math.sqrt(B*B+F*F),H[z]=V;B+=D,F+=L,V+=Math.sqrt(B*B+F*F),H[8]=V,B+=D+M,F+=L+j,V+=Math.sqrt(B*B+F*F),H[9]=V,X=0}for(b*=V;;X++){var q=H[X];if(!(b>q)){var K;if(0==X)b/=q;else b=X+(b-(K=H[X-1]))/(q-K);break}}this.addCurvePosition(.1*b,x,S,O,P,R,A,I,C,c,_,r||v>0&&0==W)}return c},t.prototype.addBeforePosition=function(t,e,n,r,i){var o=e[n],a=e[n+1],s=e[n+2]-o,u=e[n+3]-a,c=Math.atan2(u,s);r[i]=o+t*Math.cos(c),r[i+1]=a+t*Math.sin(c),r[i+2]=c},t.prototype.addAfterPosition=function(t,e,n,r,i){var o=e[n+2],a=e[n+3],s=o-e[n],u=a-e[n+1],c=Math.atan2(u,s);r[i]=o+t*Math.cos(c),r[i+1]=a+t*Math.sin(c),r[i+2]=c},t.prototype.addCurvePosition=function(t,e,n,r,i,o,a,s,u,c,l,h){(0==t||isNaN(t))&&(t=1e-4);var f=t*t,p=f*t,d=1-t,y=d*d,m=y*d,v=d*t,_=3*v,g=d*_,b=_*t,E=e*m+r*g+o*b+s*p,T=n*m+i*g+a*b+u*p;c[l]=E,c[l+1]=T,h&&(c[l+2]=Math.atan2(T-(n*y+i*v*2+a*f),E-(e*y+r*v*2+o*f)))},t.prototype.getOrder=function(){return this.data.order},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,t.epsilon=1e-5,t}(),nn=function(){function t(t,e){if(this.attachmentVertices=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new B,this.darkColor=null==t.darkColor?null:new B,this.setToSetupPose(),this.blendMode=this.data.blendMode}return t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},t.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}(),rn=function(){function t(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new V,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}return t.prototype.apply=function(){this.update()},t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},t.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target,o=i.matrix,a=o.a,s=o.c,u=o.b,c=o.d,l=a*c-s*u>0?F.degRad:-F.degRad,h=this.data.offsetRotation*l,f=this.data.offsetShearY*l,p=this.bones,d=0,y=p.length;d<y;d++){var m=p[d],v=!1,_=m.matrix;if(0!=t){var g=_.a,b=_.c,E=_.b,T=_.d;(R=Math.atan2(u,a)-Math.atan2(E,g)+h)>F.PI?R-=F.PI2:R<-F.PI&&(R+=F.PI2),R*=t;var w=Math.cos(R),x=Math.sin(R);_.a=w*g-x*E,_.c=w*b-x*T,_.b=x*g+w*E,_.d=x*b+w*T,v=!0}if(0!=e){var S=this.temp;i.localToWorld(S.set(this.data.offsetX,this.data.offsetY)),_.tx+=(S.x-_.tx)*e,_.ty+=(S.y-_.ty)*e,v=!0}if(n>0){var O=Math.sqrt(_.a*_.a+_.b*_.b),P=Math.sqrt(a*a+u*u);O>1e-5&&(O=(O+(P-O+this.data.offsetScaleX)*n)/O),_.a*=O,_.b*=O,O=Math.sqrt(_.c*_.c+_.d*_.d),P=Math.sqrt(s*s+c*c),O>1e-5&&(O=(O+(P-O+this.data.offsetScaleY)*n)/O),_.c*=O,_.d*=O,v=!0}if(r>0){b=_.c,T=_.d;var R,A=Math.atan2(T,b);(R=Math.atan2(c,s)-Math.atan2(u,a)-(A-Math.atan2(_.b,_.a)))>F.PI?R-=F.PI2:R<-F.PI&&(R+=F.PI2),R=A+(R+f)*r;O=Math.sqrt(b*b+T*T);_.c=Math.cos(R)*O,_.d=Math.sin(R)*O,v=!0}v&&(m.appliedValid=!1)}},t.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target,o=i.matrix,a=o.a,s=o.c,u=o.b,c=o.d,l=a*c-s*u>0?F.degRad:-F.degRad,h=this.data.offsetRotation*l,f=this.data.offsetShearY*l,p=this.bones,d=0,y=p.length;d<y;d++){var m=p[d],v=!1,_=m.matrix;if(0!=t){var g=_.a,b=_.c,E=_.b,T=_.d;(P=Math.atan2(u,a)+h)>F.PI?P-=F.PI2:P<-F.PI&&(P+=F.PI2),P*=t;var w=Math.cos(P),x=Math.sin(P);_.a=w*g-x*E,_.c=w*b-x*T,_.b=x*g+w*E,_.d=x*b+w*T,v=!0}if(0!=e){var S=this.temp;i.localToWorld(S.set(this.data.offsetX,this.data.offsetY)),_.tx+=S.x*e,_.ty+=S.y*e,v=!0}if(n>0){var O=(Math.sqrt(a*a+u*u)-1+this.data.offsetScaleX)*n+1;_.a*=O,_.b*=O,O=(Math.sqrt(s*s+c*c)-1+this.data.offsetScaleY)*n+1,_.c*=O,_.d*=O,v=!0}if(r>0){var P;(P=Math.atan2(c,s)-Math.atan2(u,a))>F.PI?P-=F.PI2:P<-F.PI&&(P+=F.PI2);b=_.c,T=_.d;P=Math.atan2(T,b)+(P-F.PI/2+f)*r;O=Math.sqrt(b*b+T*T);_.c=Math.cos(P)*O,_.d=Math.sin(P)*O,v=!0}v&&(m.appliedValid=!1)}},t.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();for(var o=this.bones,a=0,s=o.length;a<s;a++){var u=o[a];u.appliedValid||u.updateAppliedTransform();var c=u.arotation;if(0!=t){var l=i.arotation-c+this.data.offsetRotation;c+=(l-=360*(16384-(16384.499999999996-l/360|0)))*t}var h=u.ax,f=u.ay;0!=e&&(h+=(i.ax-h+this.data.offsetX)*e,f+=(i.ay-f+this.data.offsetY)*e);var p=u.ascaleX,d=u.ascaleY;n>0&&(p>1e-5&&(p=(p+(i.ascaleX-p+this.data.offsetScaleX)*n)/p),d>1e-5&&(d=(d+(i.ascaleY-d+this.data.offsetScaleY)*n)/d));var y=u.ashearY;if(r>0){l=i.ashearY-y+this.data.offsetShearY;l-=360*(16384-(16384.499999999996-l/360|0)),u.shearY+=l*r}u.updateWorldTransformWith(h,f,c,p,d,u.ashearX,y)}},t.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target;i.appliedValid||i.updateAppliedTransform();for(var o=this.bones,a=0,s=o.length;a<s;a++){var u=o[a];u.appliedValid||u.updateAppliedTransform();var c=u.arotation;0!=t&&(c+=(i.arotation+this.data.offsetRotation)*t);var l=u.ax,h=u.ay;0!=e&&(l+=(i.ax+this.data.offsetX)*e,h+=(i.ay+this.data.offsetY)*e);var f=u.ascaleX,p=u.ascaleY;n>0&&(f>1e-5&&(f*=(i.ascaleX-1+this.data.offsetScaleX)*n+1),p>1e-5&&(p*=(i.ascaleY-1+this.data.offsetScaleY)*n+1));var d=u.ashearY;r>0&&(d+=(i.ashearY+this.data.offsetShearY)*r),u.updateWorldTransformWith(l,h,c,f,p,u.ashearX,d)}},t.prototype.getOrder=function(){return this.data.order},t}(),on=function(){function t(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var n=t.bones[e],r=void 0;if(null==n.parent)r=new qe(n,this,null);else{var i=this.bones[n.parent.index];r=new qe(n,this,i),i.children.push(r)}this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(e=0;e<t.slots.length;e++){var o=t.slots[e],a=(r=this.bones[o.boneData.index],new nn(o,r));this.slots.push(a),this.drawOrder.push(a)}this.ikConstraints=new Array;for(e=0;e<t.ikConstraints.length;e++){var s=t.ikConstraints[e];this.ikConstraints.push(new Je(s,this))}this.transformConstraints=new Array;for(e=0;e<t.transformConstraints.length;e++){var u=t.transformConstraints[e];this.transformConstraints.push(new rn(u,this))}this.pathConstraints=new Array;for(e=0;e<t.pathConstraints.length;e++){var c=t.pathConstraints[e];this.pathConstraints.push(new en(c,this))}this.color=new B(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].sorted=!1;var r=this.ikConstraints,i=this.transformConstraints,o=this.pathConstraints,a=r.length,s=i.length,u=o.length,c=a+s+u;t:for(e=0;e<c;e++){for(var l=0;l<a;l++){if((h=r[l]).data.order==e){this.sortIkConstraint(h);continue t}}for(l=0;l<s;l++){if((h=i[l]).data.order==e){this.sortTransformConstraint(h);continue t}}for(l=0;l<u;l++){var h;if((h=o[l]).data.order==e){this.sortPathConstraint(h);continue t}}}for(e=0,n=t.length;e<n;e++)this.sortBone(t[e])},t.prototype.sortIkConstraint=function(t){var e=t.target;this.sortBone(e);var n=t.bones,r=n[0];if(this.sortBone(r),n.length>1){var i=n[n.length-1];this._updateCache.indexOf(i)>-1||this.updateCacheReset.push(i)}this._updateCache.push(t),this.sortReset(r.children),n[n.length-1].sorted=!0},t.prototype.sortPathConstraint=function(t){var e=t.target,n=e.data.index,r=e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,r),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,r);for(var i=0,o=this.data.skins.length;i<o;i++)this.sortPathConstraintAttachment(this.data.skins[i],n,r);var a=e.getAttachment();a instanceof ve&&this.sortPathConstraintAttachmentWith(a,r);var s=t.bones,u=s.length;for(i=0;i<u;i++)this.sortBone(s[i]);this._updateCache.push(t);for(i=0;i<u;i++)this.sortReset(s[i].children);for(i=0;i<u;i++)s[i].sorted=!0},t.prototype.sortTransformConstraint=function(t){this.sortBone(t.target);var e=t.bones,n=e.length;if(t.data.local)for(var r=0;r<n;r++){var i=e[r];this.sortBone(i.parent),this._updateCache.indexOf(i)>-1||this.updateCacheReset.push(i)}else for(r=0;r<n;r++)this.sortBone(e[r]);this._updateCache.push(t);for(var o=0;o<n;o++)this.sortReset(e[o].children);for(o=0;o<n;o++)e[o].sorted=!0},t.prototype.sortPathConstraintAttachment=function(t,e,n){var r=t.attachments[e];if(r)for(var i in r)this.sortPathConstraintAttachmentWith(r[i],n)},t.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof ve){var n=t.bones;if(null==n)this.sortBone(e);else for(var r=this.bones,i=0;i<n.length;)for(var o=n[i++],a=i+o;i<a;i++){var s=n[i];this.sortBone(r[s])}}},t.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},t.prototype.sortReset=function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];r.sorted&&this.sortReset(r.children),r.sorted=!1}},t.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,n=t.length;e<n;e++){var r=t[e];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY,r.appliedValid=!0}var i=this._updateCache;for(e=0,n=i.length;e<n;e++)i[e].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].setToSetupPose();var r=this.ikConstraints;for(e=0,n=r.length;e<n;e++){(s=r[e]).bendDirection=s.data.bendDirection,s.mix=s.data.mix}var i=this.transformConstraints;for(e=0,n=i.length;e<n;e++){var o=(s=i[e]).data;s.rotateMix=o.rotateMix,s.translateMix=o.translateMix,s.scaleMix=o.scaleMix,s.shearMix=o.shearMix}var a=this.pathConstraints;for(e=0,n=a.length;e<n;e++){var s;o=(s=a[e]).data;s.position=o.position,s.spacing=o.spacing,s.rotateMix=o.rotateMix,s.translateMix=o.translateMix}},t.prototype.setSlotsToSetupPose=function(){var t=this.slots;G.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,n=t.length;e<n;e++)t[e].setToSetupPose()},t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++)if(e[n].data.name==t)return n;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++)if(e[n].data.name==t)return n;return-1},t.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},t.prototype.setSkin=function(t){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n],o=i.data.attachmentName;if(null!=o){var a=t.getAttachment(n,o);null!=a&&i.setAttachment(a)}}this.skin=t},t.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},t.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var n=this.skin.getAttachment(t,e);if(null!=n)return n}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},t.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var n=this.slots,r=0,i=n.length;r<i;r++){var o=n[r];if(o.data.name==t){var a=null;if(null!=e&&null==(a=this.getAttachment(r,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void o.setAttachment(a)}}throw new Error("Slot not found: "+t)},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.getBounds=function(t,e,n){if(null==t)throw new Error("offset cannot be null.");if(null==e)throw new Error("size cannot be null.");for(var r=this.drawOrder,i=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,u=0,c=r.length;u<c;u++){var l=r[u],h=0,f=null,p=l.getAttachment();if(p instanceof ge)h=8,f=G.setArraySize(n,h,0),p.computeWorldVertices(l.bone,f,0,2);else if(p instanceof me){var d=p;h=d.worldVerticesLength,f=G.setArraySize(n,h,0),d.computeWorldVertices(l,0,h,f,0,2)}if(null!=f)for(var y=0,m=f.length;y<m;y+=2){var v=f[y],_=f[y+1];i=Math.min(i,v),o=Math.min(o,_),a=Math.max(a,v),s=Math.max(s,_)}}t.set(i,o),e.set(a-i,s-o)},t.prototype.update=function(t){this.time+=t},Object.defineProperty(t.prototype,"flipX",{get:function(){return-1==this.scaleX},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=e?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flipY",{get:function(){return-1==this.scaleY},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=e?1:-1},enumerable:!1,configurable:!0}),t.deprecatedWarning1=!1,t}(),an=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new H((function(){return G.newFloatArray(16)}))}return t.prototype.update=function(t,e){if(null==t)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,r=this.polygons,i=this.polygonPool,o=t.slots,a=o.length;n.length=0,i.freeAll(r),r.length=0;for(var s=0;s<a;s++){var u=o[s],c=u.getAttachment();if(c instanceof de){var l=c;n.push(l);var h=i.obtain();h.length!=l.worldVerticesLength&&(h=G.newFloatArray(l.worldVerticesLength)),r.push(h),l.computeWorldVertices(u,0,l.worldVerticesLength,h,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},t.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,i=this.polygons,o=0,a=i.length;o<a;o++)for(var s=i[o],u=s,c=0,l=s.length;c<l;c+=2){var h=u[c],f=u[c+1];t=Math.min(t,h),e=Math.min(e,f),n=Math.max(n,h),r=Math.max(r,f)}this.minX=t,this.minY=e,this.maxX=n,this.maxY=r},t.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},t.prototype.aabbIntersectsSegment=function(t,e,n,r){var i=this.minX,o=this.minY,a=this.maxX,s=this.maxY;if(t<=i&&n<=i||e<=o&&r<=o||t>=a&&n>=a||e>=s&&r>=s)return!1;var u=(r-e)/(n-t),c=u*(i-t)+e;if(c>o&&c<s)return!0;if((c=u*(a-t)+e)>o&&c<s)return!0;var l=(o-e)/u+t;return l>i&&l<a||(l=(s-e)/u+t)>i&&l<a},t.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},t.prototype.containsPoint=function(t,e){for(var n=this.polygons,r=0,i=n.length;r<i;r++)if(this.containsPointPolygon(n[r],t,e))return this.boundingBoxes[r];return null},t.prototype.containsPointPolygon=function(t,e,n){for(var r=t,i=t.length,o=i-2,a=!1,s=0;s<i;s+=2){var u=r[s+1],c=r[o+1];if(u<n&&c>=n||c<n&&u>=n){var l=r[s];l+(n-u)/(c-u)*(r[o]-l)<e&&(a=!a)}o=s}return a},t.prototype.intersectsSegment=function(t,e,n,r){for(var i=this.polygons,o=0,a=i.length;o<a;o++)if(this.intersectsSegmentPolygon(i[o],t,e,n,r))return this.boundingBoxes[o];return null},t.prototype.intersectsSegmentPolygon=function(t,e,n,r,i){for(var o=t,a=t.length,s=e-r,u=n-i,c=e*i-n*r,l=o[a-2],h=o[a-1],f=0;f<a;f+=2){var p=o[f],d=o[f+1],y=l*d-h*p,m=l-p,v=h-d,_=s*v-u*m,g=(c*m-s*y)/_;if((g>=l&&g<=p||g>=p&&g<=l)&&(g>=e&&g<=r||g>=r&&g<=e)){var b=(c*v-u*y)/_;if((b>=h&&b<=d||b>=d&&b<=h)&&(b>=n&&b<=i||b>=i&&b<=n))return!0}l=p,h=d}return!1},t.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},t}(),sn=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},t}(),un=function(t,e,n){if(this.color=new B(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");if(null==n)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=n},cn=function(t){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,null==t)throw new Error("name cannot be null.");this.name=t},ln=function(){function t(t){if(this.attachments=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return t.prototype.addAttachment=function(t,e,n){if(null==n)throw new Error("attachment cannot be null.");var r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=n},t.prototype.getAttachment=function(t,e){var n=this.attachments[t];return n?n[e]:null},t.prototype.attachAll=function(t,e){for(var n=0,r=0;r<t.slots.length;r++){var i=t.slots[r],o=i.getAttachment();if(o&&n<e.attachments.length){var a=e.attachments[n];for(var s in a){if(o==a[s]){var u=this.getAttachment(n,s);null!=u&&i.setAttachment(u);break}}}n++}},t}(),hn=function(){function t(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return t.prototype.readSkeletonData=function(e){var n=this.scale,r=new sn,i="string"==typeof e?JSON.parse(e):e,o=i.skeleton;if(null!=o&&(r.hash=o.hash,r.version=o.spine,r.width=o.width,r.height=o.height,r.fps=o.fps,r.imagesPath=o.images),i.bones)for(var a=0;a<i.bones.length;a++){var s=i.bones[a],u=null,c=this.getValue(s,"parent",null);if(null!=c&&null==(u=r.findBone(c)))throw new Error("Parent bone not found: "+c);(p=new Ke(r.bones.length,s.name,u)).length=this.getValue(s,"length",0)*n,p.x=this.getValue(s,"x",0)*n,p.y=this.getValue(s,"y",0)*n,p.rotation=this.getValue(s,"rotation",0),p.scaleX=this.getValue(s,"scaleX",1),p.scaleY=this.getValue(s,"scaleY",1),p.shearX=this.getValue(s,"shearX",0),p.shearY=this.getValue(s,"shearY",0),p.transformMode=t.transformModeFromString(this.getValue(s,"transform","normal")),r.bones.push(p)}if(i.slots)for(a=0;a<i.slots.length;a++){var l=(S=i.slots[a]).name,h=S.bone,f=r.findBone(h);if(null==f)throw new Error("Slot bone not found: "+h);var p=new un(r.slots.length,l,f),d=this.getValue(S,"color",null);null!=d&&p.color.setFromString(d);var y=this.getValue(S,"dark",null);null!=y&&(p.darkColor=new B(1,1,1,1),p.darkColor.setFromString(y)),p.attachmentName=this.getValue(S,"attachment",null),p.blendMode=t.blendModeFromString(this.getValue(S,"blend","normal")),r.slots.push(p)}if(i.ik)for(a=0;a<i.ik.length;a++){var m=i.ik[a];(p=new Qe(m.name)).order=this.getValue(m,"order",0);for(var v=0;v<m.bones.length;v++){h=m.bones[v];if(null==(b=r.findBone(h)))throw new Error("IK bone not found: "+h);p.bones.push(b)}var g=m.target;if(p.target=r.findBone(g),null==p.target)throw new Error("IK target bone not found: "+g);p.bendDirection=this.getValue(m,"bendPositive",!0)?1:-1,p.mix=this.getValue(m,"mix",1),r.ikConstraints.push(p)}if(i.transform)for(a=0;a<i.transform.length;a++){m=i.transform[a];(p=new cn(m.name)).order=this.getValue(m,"order",0);for(v=0;v<m.bones.length;v++){h=m.bones[v];if(null==(b=r.findBone(h)))throw new Error("Transform constraint bone not found: "+h);p.bones.push(b)}g=m.target;if(p.target=r.findBone(g),null==p.target)throw new Error("Transform constraint target bone not found: "+g);p.local=this.getValue(m,"local",!1),p.relative=this.getValue(m,"relative",!1),p.offsetRotation=this.getValue(m,"rotation",0),p.offsetX=this.getValue(m,"x",0)*n,p.offsetY=this.getValue(m,"y",0)*n,p.offsetScaleX=this.getValue(m,"scaleX",0),p.offsetScaleY=this.getValue(m,"scaleY",0),p.offsetShearY=this.getValue(m,"shearY",0),p.rotateMix=this.getValue(m,"rotateMix",1),p.translateMix=this.getValue(m,"translateMix",1),p.scaleMix=this.getValue(m,"scaleMix",1),p.shearMix=this.getValue(m,"shearMix",1),r.transformConstraints.push(p)}if(i.path)for(a=0;a<i.path.length;a++){m=i.path[a];(p=new tn(m.name)).order=this.getValue(m,"order",0);for(v=0;v<m.bones.length;v++){var b;h=m.bones[v];if(null==(b=r.findBone(h)))throw new Error("Transform constraint bone not found: "+h);p.bones.push(b)}g=m.target;if(p.target=r.findSlot(g),null==p.target)throw new Error("Path target slot not found: "+g);p.positionMode=t.positionModeFromString(this.getValue(m,"positionMode","percent")),p.spacingMode=t.spacingModeFromString(this.getValue(m,"spacingMode","length")),p.rotateMode=t.rotateModeFromString(this.getValue(m,"rotateMode","tangent")),p.offsetRotation=this.getValue(m,"rotation",0),p.position=this.getValue(m,"position",0),p.positionMode==_.Fixed&&(p.position*=n),p.spacing=this.getValue(m,"spacing",0),p.spacingMode!=Xe.Length&&p.spacingMode!=Xe.Fixed||(p.spacing*=n),p.rotateMix=this.getValue(m,"rotateMix",1),p.translateMix=this.getValue(m,"translateMix",1),r.pathConstraints.push(p)}if(i.skins)for(var E in i.skins){var T=i.skins[E],w=new ln(E);for(var l in T){var x=r.findSlotIndex(l);if(-1==x)throw new Error("Slot not found: "+l);var S=T[l];for(var O in S){var P=this.readAttachment(S[O],w,x,O,r);null!=P&&w.addAttachment(x,O,P)}}r.skins.push(w),"default"==w.name&&(r.defaultSkin=w)}a=0;for(var R=this.linkedMeshes.length;a<R;a++){var A=this.linkedMeshes[a];if(null==(w=null==A.skin?r.defaultSkin:r.findSkin(A.skin)))throw new Error("Skin not found: "+A.skin);var I=w.getAttachment(A.slotIndex,A.parent);if(null==I)throw new Error("Parent mesh not found: "+A.parent);A.mesh.setParentMesh(I)}if(this.linkedMeshes.length=0,i.events)for(var C in i.events){var k=i.events[C];(p=new $e(C)).intValue=this.getValue(k,"int",0),p.floatValue=this.getValue(k,"float",0),p.stringValue=this.getValue(k,"string",""),p.audioPath=this.getValue(k,"audio",null),null!=p.audioPath&&(p.volume=this.getValue(k,"volume",1),p.balance=this.getValue(k,"balance",0)),r.events.push(p)}if(i.animations)for(var N in i.animations){var M=i.animations[N];this.readAnimation(M,N,r)}return r},t.prototype.readAttachment=function(t,e,n,r,i){var o=this.scale;switch(r=this.getValue(t,"name",r),this.getValue(t,"type","region")){case"region":var a=this.getValue(t,"path",r),s=this.attachmentLoader.newRegionAttachment(e,r,a);return null==s?null:(s.path=a,s.x=this.getValue(t,"x",0)*o,s.y=this.getValue(t,"y",0)*o,s.scaleX=this.getValue(t,"scaleX",1),s.scaleY=this.getValue(t,"scaleY",1),s.rotation=this.getValue(t,"rotation",0),s.width=t.width*o,s.height=t.height*o,null!=(g=this.getValue(t,"color",null))&&s.color.setFromString(g),s);case"boundingbox":var u=this.attachmentLoader.newBoundingBoxAttachment(e,r);return null==u?null:(this.readVertices(t,u,t.vertexCount<<1),null!=(g=this.getValue(t,"color",null))&&u.color.setFromString(g),u);case"mesh":case"linkedmesh":a=this.getValue(t,"path",r);var c=this.attachmentLoader.newMeshAttachment(e,r,a);if(null==c)return null;c.path=a,null!=(g=this.getValue(t,"color",null))&&c.color.setFromString(g);var l=this.getValue(t,"parent",null);if(null!=l)return c.inheritDeform=this.getValue(t,"deform",!0),this.linkedMeshes.push(new fn(c,this.getValue(t,"skin",null),n,l)),c;var h=t.uvs;return this.readVertices(t,c,h.length),c.triangles=t.triangles,c.regionUVs=new Float32Array(h),c.hullLength=2*this.getValue(t,"hull",0),c;case"path":if(null==(a=this.attachmentLoader.newPathAttachment(e,r)))return null;a.closed=this.getValue(t,"closed",!1),a.constantSpeed=this.getValue(t,"constantSpeed",!0);var f=t.vertexCount;this.readVertices(t,a,f<<1);for(var p=G.newArray(f/3,0),d=0;d<t.lengths.length;d++)p[d]=t.lengths[d]*o;return a.lengths=p,null!=(g=this.getValue(t,"color",null))&&a.color.setFromString(g),a;case"point":var y=this.attachmentLoader.newPointAttachment(e,r);return null==y?null:(y.x=this.getValue(t,"x",0)*o,y.y=this.getValue(t,"y",0)*o,y.rotation=this.getValue(t,"rotation",0),null!=(g=this.getValue(t,"color",null))&&y.color.setFromString(g),y);case"clipping":var m=this.attachmentLoader.newClippingAttachment(e,r);if(null==m)return null;var v=this.getValue(t,"end",null);if(null!=v){var _=i.findSlot(v);if(null==_)throw new Error("Clipping end slot not found: "+v);m.endSlot=_}var g;f=t.vertexCount;return this.readVertices(t,m,f<<1),null!=(g=this.getValue(t,"color",null))&&m.color.setFromString(g),m}return null},t.prototype.readVertices=function(t,e,n){var r=this.scale;e.worldVerticesLength=n;var i=t.vertices;if(n!=i.length){var o=new Array,a=new Array;for(l=0,h=i.length;l<h;){var s=i[l++];a.push(s);for(var u=l+4*s;l<u;l+=4)a.push(i[l]),o.push(i[l+1]*r),o.push(i[l+2]*r),o.push(i[l+3])}e.bones=a,e.vertices=G.toFloatArray(o)}else{var c=G.toFloatArray(i);if(1!=r)for(var l=0,h=i.length;l<h;l++)c[l]*=r;e.vertices=c}},t.prototype.readAnimation=function(t,e,n){var r=this.scale,i=new Array,o=0;if(t.slots)for(var a in t.slots){var s=t.slots[a];if(-1==(J=n.findSlotIndex(a)))throw new Error("Slot not found: "+a);for(var u in s){var c=s[u];if("attachment"==u){(b=new Ce(c.length)).slotIndex=J;for(var l=0,h=0;h<c.length;h++){var f=c[h];b.setFrame(l++,f.time,f.name)}i.push(b),o=Math.max(o,b.frames[b.getFrameCount()-1])}else if("color"==u){(b=new Ae(c.length)).slotIndex=J;for(l=0,h=0;h<c.length;h++){f=c[h];var p=new B;p.setFromString(f.color||"ffffffff"),b.setFrame(l,f.time,p.r,p.g,p.b,p.a),this.readCurve(f,b,l),l++}i.push(b),o=Math.max(o,b.frames[(b.getFrameCount()-1)*Ae.ENTRIES])}else{if("twoColor"!=u)throw new Error("Invalid timeline type for a slot: "+u+" ("+a+")");(b=new Ie(c.length)).slotIndex=J;for(l=0,h=0;h<c.length;h++){f=c[h];var d=new B,y=new B;d.setFromString(f.light),y.setFromString(f.dark),b.setFrame(l,f.time,d.r,d.g,d.b,d.a,y.r,y.g,y.b),this.readCurve(f,b,l),l++}i.push(b),o=Math.max(o,b.frames[(b.getFrameCount()-1)*Ie.ENTRIES])}}}if(t.bones)for(var m in t.bones){var v=t.bones[m],g=n.findBoneIndex(m);if(-1==g)throw new Error("Bone not found: "+m);for(var u in v){c=v[u];if("rotate"===u){(b=new Se(c.length)).boneIndex=g;for(l=0,h=0;h<c.length;h++){f=c[h];b.setFrame(l,f.time,f.angle),this.readCurve(f,b,l),l++}i.push(b),o=Math.max(o,b.frames[(b.getFrameCount()-1)*Se.ENTRIES])}else{if("translate"!==u&&"scale"!==u&&"shear"!==u)throw new Error("Invalid timeline type for a bone: "+u+" ("+m+")");var b=null,E=1;"scale"===u?b=new Pe(c.length):"shear"===u?b=new Re(c.length):(b=new Oe(c.length),E=r),b.boneIndex=g;for(l=0,h=0;h<c.length;h++){f=c[h];var T=this.getValue(f,"x",0),w=this.getValue(f,"y",0);b.setFrame(l,f.time,T*E,w*E),this.readCurve(f,b,l),l++}i.push(b),o=Math.max(o,b.frames[(b.getFrameCount()-1)*Oe.ENTRIES])}}}if(t.ik)for(var x in t.ik){var S=t.ik[x],O=n.findIkConstraint(x);(b=new De(S.length)).ikConstraintIndex=n.ikConstraints.indexOf(O);for(l=0,h=0;h<S.length;h++){f=S[h];b.setFrame(l,f.time,this.getValue(f,"mix",1),this.getValue(f,"bendPositive",!0)?1:-1,this.getValue(f,"compress",!1),this.getValue(f,"stretch",!1)),this.readCurve(f,b,l),l++}i.push(b),o=Math.max(o,b.frames[(b.getFrameCount()-1)*De.ENTRIES])}if(t.transform)for(var x in t.transform){S=t.transform[x],O=n.findTransformConstraint(x);(b=new Le(S.length)).transformConstraintIndex=n.transformConstraints.indexOf(O);for(l=0,h=0;h<S.length;h++){f=S[h];b.setFrame(l,f.time,this.getValue(f,"rotateMix",1),this.getValue(f,"translateMix",1),this.getValue(f,"scaleMix",1),this.getValue(f,"shearMix",1)),this.readCurve(f,b,l),l++}i.push(b),o=Math.max(o,b.frames[(b.getFrameCount()-1)*Le.ENTRIES])}if(t.paths)for(var x in t.paths){S=t.paths[x];var P=n.findPathConstraintIndex(x);if(-1==P)throw new Error("Path constraint not found: "+x);var R=n.pathConstraints[P];for(var u in S){c=S[u];if("position"===u||"spacing"===u){b=null,E=1;"spacing"===u?(b=new Fe(c.length),R.spacingMode!=Xe.Length&&R.spacingMode!=Xe.Fixed||(E=r)):(b=new Be(c.length),R.positionMode==_.Fixed&&(E=r)),b.pathConstraintIndex=P;for(l=0,h=0;h<c.length;h++){f=c[h];b.setFrame(l,f.time,this.getValue(f,u,0)*E),this.readCurve(f,b,l),l++}i.push(b),o=Math.max(o,b.frames[(b.getFrameCount()-1)*Be.ENTRIES])}else if("mix"===u){(b=new Ue(c.length)).pathConstraintIndex=P;for(l=0,h=0;h<c.length;h++){f=c[h];b.setFrame(l,f.time,this.getValue(f,"rotateMix",1),this.getValue(f,"translateMix",1)),this.readCurve(f,b,l),l++}i.push(b),o=Math.max(o,b.frames[(b.getFrameCount()-1)*Ue.ENTRIES])}}}if(t.deform)for(var A in t.deform){var I=t.deform[A],C=n.findSkin(A);if(null!=C)for(var a in I){s=I[a];if(-1==(J=n.findSlotIndex(a)))throw new Error("Slot not found: "+s.name);for(var u in s){c=s[u];var k=C.getAttachment(J,u);if(null==k)throw new Error("Deform attachment not found: "+c.name);var N=null!=k.bones,M=k.vertices,j=N?M.length/3*2:M.length;(b=new Ne(c.length)).slotIndex=J,b.attachment=k;l=0;for(var D=0;D<c.length;D++){f=c[D];var L=void 0,F=this.getValue(f,"vertices",null);if(null==F)L=N?G.newFloatArray(j):M;else{L=G.newFloatArray(j);var U=this.getValue(f,"offset",0);if(G.arrayCopy(F,0,L,U,F.length),1!=r)for(var H=(h=U)+F.length;h<H;h++)L[h]*=r;if(!N)for(h=0;h<j;h++)L[h]+=M[h]}b.setFrame(l,f.time,L),this.readCurve(f,b,l),l++}i.push(b),o=Math.max(o,b.frames[b.getFrameCount()-1])}}else if(W)throw new Error("Skin not found: "+A)}var V=t.drawOrder;if(null==V&&(V=t.draworder),null!=V){b=new je(V.length);var X=n.slots.length;for(l=0,D=0;D<V.length;D++){var Y=V[D],z=null,q=this.getValue(Y,"offsets",null);if(null!=q){z=G.newArray(X,-1);var K=G.newArray(X-q.length,0),Z=0,$=0;for(h=0;h<q.length;h++){var J,Q=q[h];if(-1==(J=n.findSlotIndex(Q.slot)))throw new Error("Slot not found: "+Q.slot);for(;Z!=J;)K[$++]=Z++;z[Z+Q.offset]=Z++}for(;Z<X;)K[$++]=Z++;for(h=X-1;h>=0;h--)-1==z[h]&&(z[h]=K[--$])}b.setFrame(l++,Y.time,z)}i.push(b),o=Math.max(o,b.frames[b.getFrameCount()-1])}if(t.events){for(b=new Me(t.events.length),l=0,h=0;h<t.events.length;h++){var tt=t.events[h],et=n.findEvent(tt.name);if(null==et)throw new Error("Event not found: "+tt.name);var nt=new Ze(G.toSinglePrecision(tt.time),et);nt.intValue=this.getValue(tt,"int",et.intValue),nt.floatValue=this.getValue(tt,"float",et.floatValue),nt.stringValue=this.getValue(tt,"string",et.stringValue),null!=nt.data.audioPath&&(nt.volume=this.getValue(tt,"volume",1),nt.balance=this.getValue(tt,"balance",0)),b.setFrame(l++,nt)}i.push(b),o=Math.max(o,b.frames[b.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new Te(e,i,o))},t.prototype.readCurve=function(t,e,n){if(t.curve)if("stepped"===t.curve)e.setStepped(n);else if("[object Array]"===Object.prototype.toString.call(t.curve)){var r=t.curve;e.setCurve(n,r[0],r[1],r[2],r[3])}},t.prototype.getValue=function(t,e,n){return void 0!==t[e]?t[e]:n},t.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return c.b.NORMAL;if("additive"==t)return c.b.ADD;if("multiply"==t)return c.b.MULTIPLY;if("screen"==t)return c.b.SCREEN;throw new Error("Unknown blend mode: "+t)},t.positionModeFromString=function(t){if("fixed"==(t=t.toLowerCase()))return _.Fixed;if("percent"==t)return _.Percent;throw new Error("Unknown position mode: "+t)},t.spacingModeFromString=function(t){if("length"==(t=t.toLowerCase()))return Xe.Length;if("fixed"==t)return Xe.Fixed;if("percent"==t)return Xe.Percent;throw new Error("Unknown position mode: "+t)},t.rotateModeFromString=function(t){if("tangent"==(t=t.toLowerCase()))return g.Tangent;if("chain"==t)return g.Chain;if("chainscale"==t)return g.ChainScale;throw new Error("Unknown rotate mode: "+t)},t.transformModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return b.Normal;if("onlytranslation"==t)return b.OnlyTranslation;if("norotationorreflection"==t)return b.NoRotationOrReflection;if("noscale"==t)return b.NoScale;if("noscaleorreflection"==t)return b.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},t}(),fn=function(t,e,n,r){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=r},pn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return le(e,t),e.prototype.createSkeleton=function(t){this.skeleton=new on(t),this.skeleton.updateWorldTransform(),this.stateData=new Ye(t),this.state=new Ge(this.stateData)},e}($),dn=function(t,e){return(dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function yn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}dn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var mn,vn=function(t){if(!t)throw new Error("name cannot be null.");this.name=t},_n=function(t){function e(n){var r=t.call(this,n)||this;return r.id=e.nextID++,r.worldVerticesLength=0,r.deformAttachment=r,r}return yn(e,t),e.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},e.prototype.computeWorldVertices=function(t,e,n,r,i,o){n=i+(n>>1)*o;var a=t.bone.skeleton,s=t.deform,u=this.vertices,c=this.bones;if(c){for(var l=0,h=0,f=0;f<e;f+=2){l+=(m=c[l])+1,h+=m}var p=a.bones;if(0==s.length)for(R=i,x=3*h;R<n;R+=o){var d=0,y=0,m=c[l++];for(m+=l;l<m;l++,x+=3){b=p[c[l]].matrix,A=u[x],I=u[x+1];var v=u[x+2];d+=(A*b.a+I*b.c+b.tx)*v,y+=(A*b.b+I*b.d+b.ty)*v}r[R]=d,r[R+1]=y}else for(var _=s,g=(R=i,x=3*h,h<<1);R<n;R+=o){d=0,y=0,m=c[l++];for(m+=l;l<m;l++,x+=3,g+=2){b=p[c[l]].matrix,A=u[x]+_[g],I=u[x+1]+_[g+1],v=u[x+2];d+=(A*b.a+I*b.c+b.tx)*v,y+=(A*b.b+I*b.d+b.ty)*v}r[R]=d,r[R+1]=y}}else{s.length>0&&(u=s);for(var b,E=(b=t.bone.matrix).tx,T=b.ty,w=b.a,x=b.c,S=b.b,O=b.d,P=e,R=i;R<n;P+=2,R+=o){var A=u[P],I=u[P+1];r[R]=A*w+I*x+E,r[R+1]=A*S+I*O+T}}},e.prototype.copyTo=function(t){this.bones?(t.bones=new Array(this.bones.length),G.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices?(t.vertices=G.newFloatArray(this.vertices.length),G.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment},e.nextID=0,e}(vn),gn=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.BoundingBox,n.color=new B(1,1,1,1),n}return yn(e,t),e.prototype.copy=function(){var t=new e(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t},e}(_n),bn=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.Clipping,n.color=new B(.2275,.2275,.8078,1),n}return yn(e,t),e.prototype.copy=function(){var t=new e(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},e}(_n),En=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.Mesh,n.color=new B(1,1,1,1),n.tempColor=new B(0,0,0,0),n}return yn(e,t),e.prototype.getParentMesh=function(){return this.parentMesh},e.prototype.setParentMesh=function(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},e.prototype.copy=function(){if(this.parentMesh)return this.newLinkedMesh();var t=new e(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Float32Array(this.regionUVs.length),G.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.triangles=new Array(this.triangles.length),G.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,this.edges&&(t.edges=new Array(this.edges.length),G.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t},e.prototype.newLinkedMesh=function(){var t=new e(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),t},e}(_n),Tn=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.Path,n.closed=!1,n.constantSpeed=!1,n.color=new B(1,1,1,1),n}return yn(e,t),e.prototype.copy=function(){var t=new e(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),G.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t},e}(_n),wn=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.Point,n.color=new B(.38,.94,0,1),n}return yn(e,t),e.prototype.computeWorldPosition=function(t,e){var n=t.matrix;return e.x=this.x*n.a+this.y*n.c+t.worldX,e.y=this.x*n.b+this.y*n.d+t.worldY,e},e.prototype.computeWorldRotation=function(t){var e=t.matrix,n=F.cosDeg(this.rotation),r=F.sinDeg(this.rotation),i=n*e.a+r*e.c,o=n*e.b+r*e.d;return Math.atan2(o,i)*F.radDeg},e.prototype.copy=function(){var t=new e(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},e}(_n),xn=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.Region,n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new B(1,1,1,1),n.offset=G.newFloatArray(8),n.uvs=G.newFloatArray(8),n.tempColor=new B(1,1,1,1),n}return yn(e,t),e.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,n=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*t,i=-this.height/2*this.scaleY+this.region.offsetY*n,o=r+this.region.width*t,a=i+this.region.height*n,s=this.rotation*Math.PI/180,u=Math.cos(s),c=Math.sin(s),l=r*u+this.x,h=r*c,f=i*u+this.y,p=i*c,d=o*u+this.x,y=o*c,m=a*u+this.y,v=a*c,_=this.offset;_[e.OX1]=l-p,_[e.OY1]=f+h,_[e.OX2]=l-v,_[e.OY2]=m+h,_[e.OX3]=d-v,_[e.OY3]=m+y,_[e.OX4]=d-p,_[e.OY4]=f+y},e.prototype.setRegion=function(t){this.region=t;var e=this.uvs;90==t.degrees?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},e.prototype.computeWorldVertices=function(t,n,r,i){var o=this.offset,a=t.matrix,s=a.tx,u=a.ty,c=a.a,l=a.c,h=a.b,f=a.d,p=0,d=0;p=o[e.OX1],d=o[e.OY1],n[r]=p*c+d*l+s,n[r+1]=p*h+d*f+u,r+=i,p=o[e.OX2],d=o[e.OY2],n[r]=p*c+d*l+s,n[r+1]=p*h+d*f+u,r+=i,p=o[e.OX3],d=o[e.OY3],n[r]=p*c+d*l+s,n[r+1]=p*h+d*f+u,r+=i,p=o[e.OX4],d=o[e.OY4],n[r]=p*c+d*l+s,n[r+1]=p*h+d*f+u},e.prototype.copy=function(){var t=new e(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,G.arrayCopy(this.uvs,0,t.uvs,0,8),G.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t},e.OX1=0,e.OY1=1,e.OX2=2,e.OY2=3,e.OX3=4,e.OY3=5,e.OX4=6,e.OY4=7,e.X1=0,e.Y1=1,e.C1R=2,e.C1G=3,e.C1B=4,e.C1A=5,e.U1=6,e.V1=7,e.X2=8,e.Y2=9,e.C2R=10,e.C2G=11,e.C2B=12,e.C2A=13,e.U2=14,e.V2=15,e.X3=16,e.Y3=17,e.C3R=18,e.C3G=19,e.C3B=20,e.C3A=21,e.U3=22,e.V3=23,e.X4=24,e.Y4=25,e.C4R=26,e.C4G=27,e.C4B=28,e.C4A=29,e.U4=30,e.V4=31,e}(vn),Sn=function(){function t(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return t.prototype.begin=function(t){},t.prototype.transform=function(t,e,n,r){t.x+=F.randomTriangular(-this.jitterX,this.jitterY),t.y+=F.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},t}(),On=function(){function t(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return t.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},t.prototype.transform=function(e,n,r,i){var o=this.angle*F.degreesToRadians,a=e.x-this.worldX,s=e.y-this.worldY,u=Math.sqrt(a*a+s*s);if(u<this.radius){var c=t.interpolation.apply(0,o,(this.radius-u)/this.radius),l=Math.cos(c),h=Math.sin(c);e.x=l*a-h*s+this.worldX,e.y=h*a+l*s+this.worldY}},t.prototype.end=function(){},t.interpolation=new U(2),t}(),Pn=function(){function t(t,e,n){if(!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=n}return t.prototype.setTimelines=function(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds=new L;for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())},t.prototype.hasTimeline=function(t){for(var e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1},t.prototype.apply=function(t,e,n,r,i,o,a,s){if(!t)throw new Error("skeleton cannot be null.");r&&0!=this.duration&&(n%=this.duration,e>0&&(e%=this.duration));for(var u=this.timelines,c=0,l=u.length;c<l;c++)u[c].apply(t,e,n,i,o,a,s)},t}(),Rn=0,An=1,In=2,Cn=3,kn=4,Nn=5,Mn=6,jn=7,Dn=8,Ln=9,Bn=10,Fn=11,Un=12,Gn=13,Hn=14,Vn=15,Xn=16,Wn=17,Yn=18,zn=function(){function t(t,e){this.propertyIds=e,this.frames=G.newFloatArray(t*this.getFrameEntries())}return t.prototype.getPropertyIds=function(){return this.propertyIds},t.prototype.getFrameEntries=function(){return 1},t.prototype.getFrameCount=function(){return this.frames.length/this.getFrameEntries()},t.prototype.getDuration=function(){return this.frames[this.frames.length-this.getFrameEntries()]},t.search1=function(t,e){for(var n=t.length,r=1;r<n;r++)if(t[r]>e)return r-1;return n-1},t.search=function(t,e,n){for(var r=t.length,i=n;i<r;i+=n)if(t[i]>e)return i-n;return r-n},t}(),qn=function(t){function e(e,n,r){var i=t.call(this,e,r)||this;return i.curves=G.newFloatArray(e+18*n),i.curves[e-1]=1,i}return yn(e,t),e.prototype.setLinear=function(t){this.curves[t]=0},e.prototype.setStepped=function(t){this.curves[t]=1},e.prototype.shrink=function(t){var e=this.getFrameCount()+18*t;if(this.curves.length>e){var n=G.newFloatArray(e);G.arrayCopy(this.curves,0,n,0,e),this.curves=n}},e.prototype.setBezier=function(t,e,n,r,i,o,a,s,u,c,l){var h=this.curves,f=this.getFrameCount()+18*t;0==n&&(h[e]=2+f);for(var p=.03*(r-2*o+s),d=.03*(i-2*a+u),y=.006*(3*(o-s)-r+c),m=.006*(3*(a-u)-i+l),v=2*p+y,_=2*d+m,g=.3*(o-r)+p+.16666667*y,b=.3*(a-i)+d+.16666667*m,E=r+g,T=i+b,w=f+18;f<w;f+=2)h[f]=E,h[f+1]=T,g+=v,b+=_,v+=y,_+=m,E+=g,T+=b},e.prototype.getBezierValue=function(t,e,n,r){var i=this.curves;if(i[r]>t){var o=this.frames[e],a=this.frames[e+n];return a+(t-o)/(i[r]-o)*(i[r+1]-a)}var s=r+18;for(r+=2;r<s;r+=2)if(i[r]>=t){var u=i[r-2],c=i[r-1];return c+(t-u)/(i[r]-u)*(i[r+1]-c)}e+=this.getFrameEntries();var l=i[s-2],h=i[s-1];return h+(t-l)/(this.frames[e]-l)*(this.frames[e+n]-h)},e}(zn),Kn=function(t){function e(e,n,r){return t.call(this,e,n,[r])||this}return yn(e,t),e.prototype.getFrameEntries=function(){return 2},e.prototype.setFrame=function(t,e,n){t<<=1,this.frames[t]=e,this.frames[t+1]=n},e.prototype.getCurveValue=function(t){for(var e=this.frames,n=e.length-2,r=2;r<=n;r+=2)if(e[r]>t){n=r-2;break}var i=this.curves[n>>1];switch(i){case 0:var o=e[n],a=e[n+1];return a+(t-o)/(e[n+2]-o)*(e[n+2+1]-a);case 1:return e[n+1]}return this.getBezierValue(t,n,1,i-2)},e}(qn),Zn=function(t){function e(e,n,r,i){return t.call(this,e,n,[r,i])||this}return yn(e,t),e.prototype.getFrameEntries=function(){return 3},e.prototype.setFrame=function(t,e,n,r){t*=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r},e}(qn),$n=function(t){function e(e,n,r){var i=t.call(this,e,n,Rn+"|"+r)||this;return i.boneIndex=0,i.boneIndex=r,i}return yn(e,t),e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.bones[this.boneIndex];if(s.active)if(n<this.frames[0])switch(o){case m.setup:return void(s.rotation=s.data.rotation);case m.first:s.rotation+=(s.data.rotation-s.rotation)*i}else{var u=this.getCurveValue(n);switch(o){case m.setup:s.rotation=s.data.rotation+u*i;break;case m.first:case m.replace:u+=s.data.rotation-s.rotation;case m.add:s.rotation+=u*i}}},e}(Kn),Jn=function(t){function e(e,n,r){var i=t.call(this,e,n,An+"|"+r,In+"|"+r)||this;return i.boneIndex=0,i.boneIndex=r,i}return yn(e,t),e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.bones[this.boneIndex];if(s.active){var u=this.frames;if(n<u[0])switch(o){case m.setup:return s.x=s.data.x,void(s.y=s.data.y);case m.first:s.x+=(s.data.x-s.x)*i,s.y+=(s.data.y-s.y)*i}else{var c=0,l=0,h=zn.search(u,n,3),f=this.curves[h/3];switch(f){case 0:var p=u[h];c=u[h+1],l=u[h+2];var d=(n-p)/(u[h+3]-p);c+=(u[h+3+1]-c)*d,l+=(u[h+3+2]-l)*d;break;case 1:c=u[h+1],l=u[h+2];break;default:c=this.getBezierValue(n,h,1,f-2),l=this.getBezierValue(n,h,2,f+18-2)}switch(o){case m.setup:s.x=s.data.x+c*i,s.y=s.data.y+l*i;break;case m.first:case m.replace:s.x+=(s.data.x+c-s.x)*i,s.y+=(s.data.y+l-s.y)*i;break;case m.add:s.x+=c*i,s.y+=l*i}}}},e}(Zn),Qn=function(t){function e(e,n,r){var i=t.call(this,e,n,An+"|"+r)||this;return i.boneIndex=0,i.boneIndex=r,i}return yn(e,t),e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.bones[this.boneIndex];if(s.active)if(n<this.frames[0])switch(o){case m.setup:return void(s.x=s.data.x);case m.first:s.x+=(s.data.x-s.x)*i}else{var u=this.getCurveValue(n);switch(o){case m.setup:s.x=s.data.x+u*i;break;case m.first:case m.replace:s.x+=(s.data.x+u-s.x)*i;break;case m.add:s.x+=u*i}}},e}(Kn),tr=function(t){function e(e,n,r){var i=t.call(this,e,n,In+"|"+r)||this;return i.boneIndex=0,i.boneIndex=r,i}return yn(e,t),e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.bones[this.boneIndex];if(s.active)if(n<this.frames[0])switch(o){case m.setup:return void(s.y=s.data.y);case m.first:s.y+=(s.data.y-s.y)*i}else{var u=this.getCurveValue(n);switch(o){case m.setup:s.y=s.data.y+u*i;break;case m.first:case m.replace:s.y+=(s.data.y+u-s.y)*i;break;case m.add:s.y+=u*i}}},e}(Kn),er=function(t){function e(e,n,r){var i=t.call(this,e,n,Cn+"|"+r,kn+"|"+r)||this;return i.boneIndex=0,i.boneIndex=r,i}return yn(e,t),e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.bones[this.boneIndex];if(s.active){var u=this.frames;if(n<u[0])switch(o){case m.setup:return s.scaleX=s.data.scaleX,void(s.scaleY=s.data.scaleY);case m.first:s.scaleX+=(s.data.scaleX-s.scaleX)*i,s.scaleY+=(s.data.scaleY-s.scaleY)*i}else{var c,l,h=zn.search(u,n,3),f=this.curves[h/3];switch(f){case 0:var p=u[h];c=u[h+1],l=u[h+2];var d=(n-p)/(u[h+3]-p);c+=(u[h+3+1]-c)*d,l+=(u[h+3+2]-l)*d;break;case 1:c=u[h+1],l=u[h+2];break;default:c=this.getBezierValue(n,h,1,f-2),l=this.getBezierValue(n,h,2,f+18-2)}if(c*=s.data.scaleX,l*=s.data.scaleY,1==i)o==m.add?(s.scaleX+=c-s.data.scaleX,s.scaleY+=l-s.data.scaleY):(s.scaleX=c,s.scaleY=l);else{var y=0,_=0;if(a==v.mixOut)switch(o){case m.setup:y=s.data.scaleX,_=s.data.scaleY,s.scaleX=y+(Math.abs(c)*F.signum(y)-y)*i,s.scaleY=_+(Math.abs(l)*F.signum(_)-_)*i;break;case m.first:case m.replace:y=s.scaleX,_=s.scaleY,s.scaleX=y+(Math.abs(c)*F.signum(y)-y)*i,s.scaleY=_+(Math.abs(l)*F.signum(_)-_)*i;break;case m.add:y=s.scaleX,_=s.scaleY,s.scaleX=y+(Math.abs(c)*F.signum(y)-s.data.scaleX)*i,s.scaleY=_+(Math.abs(l)*F.signum(_)-s.data.scaleY)*i}else switch(o){case m.setup:y=Math.abs(s.data.scaleX)*F.signum(c),_=Math.abs(s.data.scaleY)*F.signum(l),s.scaleX=y+(c-y)*i,s.scaleY=_+(l-_)*i;break;case m.first:case m.replace:y=Math.abs(s.scaleX)*F.signum(c),_=Math.abs(s.scaleY)*F.signum(l),s.scaleX=y+(c-y)*i,s.scaleY=_+(l-_)*i;break;case m.add:y=F.signum(c),_=F.signum(l),s.scaleX=Math.abs(s.scaleX)*y+(c-Math.abs(s.data.scaleX)*y)*i,s.scaleY=Math.abs(s.scaleY)*_+(l-Math.abs(s.data.scaleY)*_)*i}}}}},e}(Zn),nr=function(t){function e(e,n,r){var i=t.call(this,e,n,Cn+"|"+r)||this;return i.boneIndex=0,i.boneIndex=r,i}return yn(e,t),e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.bones[this.boneIndex];if(s.active)if(n<this.frames[0])switch(o){case m.setup:return void(s.scaleX=s.data.scaleX);case m.first:s.scaleX+=(s.data.scaleX-s.scaleX)*i}else{var u=this.getCurveValue(n)*s.data.scaleX;if(1==i)o==m.add?s.scaleX+=u-s.data.scaleX:s.scaleX=u;else{var c=0;if(a==v.mixOut)switch(o){case m.setup:c=s.data.scaleX,s.scaleX=c+(Math.abs(u)*F.signum(c)-c)*i;break;case m.first:case m.replace:c=s.scaleX,s.scaleX=c+(Math.abs(u)*F.signum(c)-c)*i;break;case m.add:c=s.scaleX,s.scaleX=c+(Math.abs(u)*F.signum(c)-s.data.scaleX)*i}else switch(o){case m.setup:c=Math.abs(s.data.scaleX)*F.signum(u),s.scaleX=c+(u-c)*i;break;case m.first:case m.replace:c=Math.abs(s.scaleX)*F.signum(u),s.scaleX=c+(u-c)*i;break;case m.add:c=F.signum(u),s.scaleX=Math.abs(s.scaleX)*c+(u-Math.abs(s.data.scaleX)*c)*i}}}},e}(Kn),rr=function(t){function e(e,n,r){var i=t.call(this,e,n,kn+"|"+r)||this;return i.boneIndex=0,i.boneIndex=r,i}return yn(e,t),e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.bones[this.boneIndex];if(s.active)if(n<this.frames[0])switch(o){case m.setup:return void(s.scaleY=s.data.scaleY);case m.first:s.scaleY+=(s.data.scaleY-s.scaleY)*i}else{var u=this.getCurveValue(n)*s.data.scaleY;if(1==i)o==m.add?s.scaleY+=u-s.data.scaleY:s.scaleY=u;else{var c=0;if(a==v.mixOut)switch(o){case m.setup:c=s.data.scaleY,s.scaleY=c+(Math.abs(u)*F.signum(c)-c)*i;break;case m.first:case m.replace:c=s.scaleY,s.scaleY=c+(Math.abs(u)*F.signum(c)-c)*i;break;case m.add:c=s.scaleY,s.scaleY=c+(Math.abs(u)*F.signum(c)-s.data.scaleY)*i}else switch(o){case m.setup:c=Math.abs(s.data.scaleY)*F.signum(u),s.scaleY=c+(u-c)*i;break;case m.first:case m.replace:c=Math.abs(s.scaleY)*F.signum(u),s.scaleY=c+(u-c)*i;break;case m.add:c=F.signum(u),s.scaleY=Math.abs(s.scaleY)*c+(u-Math.abs(s.data.scaleY)*c)*i}}}},e}(Kn),ir=function(t){function e(e,n,r){var i=t.call(this,e,n,Nn+"|"+r,Mn+"|"+r)||this;return i.boneIndex=0,i.boneIndex=r,i}return yn(e,t),e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.bones[this.boneIndex];if(s.active){var u=this.frames;if(n<u[0])switch(o){case m.setup:return s.shearX=s.data.shearX,void(s.shearY=s.data.shearY);case m.first:s.shearX+=(s.data.shearX-s.shearX)*i,s.shearY+=(s.data.shearY-s.shearY)*i}else{var c=0,l=0,h=zn.search(u,n,3),f=this.curves[h/3];switch(f){case 0:var p=u[h];c=u[h+1],l=u[h+2];var d=(n-p)/(u[h+3]-p);c+=(u[h+3+1]-c)*d,l+=(u[h+3+2]-l)*d;break;case 1:c=u[h+1],l=u[h+2];break;default:c=this.getBezierValue(n,h,1,f-2),l=this.getBezierValue(n,h,2,f+18-2)}switch(o){case m.setup:s.shearX=s.data.shearX+c*i,s.shearY=s.data.shearY+l*i;break;case m.first:case m.replace:s.shearX+=(s.data.shearX+c-s.shearX)*i,s.shearY+=(s.data.shearY+l-s.shearY)*i;break;case m.add:s.shearX+=c*i,s.shearY+=l*i}}}},e}(Zn),or=function(t){function e(e,n,r){var i=t.call(this,e,n,Nn+"|"+r)||this;return i.boneIndex=0,i.boneIndex=r,i}return yn(e,t),e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.bones[this.boneIndex];if(s.active)if(n<this.frames[0])switch(o){case m.setup:return void(s.shearX=s.data.shearX);case m.first:s.shearX+=(s.data.shearX-s.shearX)*i}else{var u=this.getCurveValue(n);switch(o){case m.setup:s.shearX=s.data.shearX+u*i;break;case m.first:case m.replace:s.shearX+=(s.data.shearX+u-s.shearX)*i;break;case m.add:s.shearX+=u*i}}},e}(Kn),ar=function(t){function e(e,n,r){var i=t.call(this,e,n,Mn+"|"+r)||this;return i.boneIndex=0,i.boneIndex=r,i}return yn(e,t),e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.bones[this.boneIndex];if(s.active)if(n<this.frames[0])switch(o){case m.setup:return void(s.shearY=s.data.shearY);case m.first:s.shearY+=(s.data.shearY-s.shearY)*i}else{var u=this.getCurveValue(n);switch(o){case m.setup:s.shearY=s.data.shearY+u*i;break;case m.first:case m.replace:s.shearY+=(s.data.shearY+u-s.shearY)*i;break;case m.add:s.shearY+=u*i}}},e}(Kn),sr=function(t){function e(e,n,r){var i=t.call(this,e,n,[jn+"|"+r,Dn+"|"+r])||this;return i.slotIndex=0,i.slotIndex=r,i}return yn(e,t),e.prototype.getFrameEntries=function(){return 5},e.prototype.setFrame=function(t,e,n,r,i,o){t*=5,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r,this.frames[t+3]=i,this.frames[t+4]=o},e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.slots[this.slotIndex];if(s.bone.active){var u=this.frames,c=s.color;if(n<u[0]){var l=s.data.color;switch(o){case m.setup:return void c.setFromColor(l);case m.first:c.add((l.r-c.r)*i,(l.g-c.g)*i,(l.b-c.b)*i,(l.a-c.a)*i)}}else{var h=0,f=0,p=0,d=0,y=zn.search(u,n,5),v=this.curves[y/5];switch(v){case 0:var _=u[y];h=u[y+1],f=u[y+2],p=u[y+3],d=u[y+4];var g=(n-_)/(u[y+5]-_);h+=(u[y+5+1]-h)*g,f+=(u[y+5+2]-f)*g,p+=(u[y+5+3]-p)*g,d+=(u[y+5+4]-d)*g;break;case 1:h=u[y+1],f=u[y+2],p=u[y+3],d=u[y+4];break;default:h=this.getBezierValue(n,y,1,v-2),f=this.getBezierValue(n,y,2,v+18-2),p=this.getBezierValue(n,y,3,v+36-2),d=this.getBezierValue(n,y,4,v+54-2)}1==i?c.set(h,f,p,d):(o==m.setup&&c.setFromColor(s.data.color),c.add((h-c.r)*i,(f-c.g)*i,(p-c.b)*i,(d-c.a)*i))}}},e}(qn),ur=function(t){function e(e,n,r){var i=t.call(this,e,n,[jn+"|"+r])||this;return i.slotIndex=0,i.slotIndex=r,i}return yn(e,t),e.prototype.getFrameEntries=function(){return 4},e.prototype.setFrame=function(t,e,n,r,i){t<<=2,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r,this.frames[t+3]=i},e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.slots[this.slotIndex];if(s.bone.active){var u=this.frames,c=s.color;if(n<u[0]){var l=s.data.color;switch(o){case m.setup:return c.r=l.r,c.g=l.g,void(c.b=l.b);case m.first:c.r+=(l.r-c.r)*i,c.g+=(l.g-c.g)*i,c.b+=(l.b-c.b)*i}}else{var h=0,f=0,p=0,d=zn.search(u,n,4),y=this.curves[d>>2];switch(y){case 0:var v=u[d];h=u[d+1],f=u[d+2],p=u[d+3];var _=(n-v)/(u[d+4]-v);h+=(u[d+4+1]-h)*_,f+=(u[d+4+2]-f)*_,p+=(u[d+4+3]-p)*_;break;case 1:h=u[d+1],f=u[d+2],p=u[d+3];break;default:h=this.getBezierValue(n,d,1,y-2),f=this.getBezierValue(n,d,2,y+18-2),p=this.getBezierValue(n,d,3,y+36-2)}if(1==i)c.r=h,c.g=f,c.b=p;else{if(o==m.setup){l=s.data.color;c.r=l.r,c.g=l.g,c.b=l.b}c.r+=(h-c.r)*i,c.g+=(f-c.g)*i,c.b+=(p-c.b)*i}}}},e}(qn),cr=function(t){function e(e,n,r){var i=t.call(this,e,n,Dn+"|"+r)||this;return i.slotIndex=0,i.slotIndex=r,i}return yn(e,t),e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.slots[this.slotIndex];if(s.bone.active){var u=s.color;if(n<this.frames[0]){var c=s.data.color;switch(o){case m.setup:return void(u.a=c.a);case m.first:u.a+=(c.a-u.a)*i}}else{var l=this.getCurveValue(n);1==i?u.a=l:(o==m.setup&&(u.a=s.data.color.a),u.a+=(l-u.a)*i)}}},e}(Kn),lr=function(t){function e(e,n,r){var i=t.call(this,e,n,[jn+"|"+r,Dn+"|"+r,Ln+"|"+r])||this;return i.slotIndex=0,i.slotIndex=r,i}return yn(e,t),e.prototype.getFrameEntries=function(){return 8},e.prototype.setFrame=function(t,e,n,r,i,o,a,s,u){t<<=3,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r,this.frames[t+3]=i,this.frames[t+4]=o,this.frames[t+5]=a,this.frames[t+6]=s,this.frames[t+7]=u},e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.slots[this.slotIndex];if(s.bone.active){var u=this.frames,c=s.color,l=s.darkColor;if(n<u[0]){var h=s.data.color,f=s.data.darkColor;switch(o){case m.setup:return c.setFromColor(h),l.r=f.r,l.g=f.g,void(l.b=f.b);case m.first:c.add((h.r-c.r)*i,(h.g-c.g)*i,(h.b-c.b)*i,(h.a-c.a)*i),l.r+=(f.r-l.r)*i,l.g+=(f.g-l.g)*i,l.b+=(f.b-l.b)*i}}else{var p=0,d=0,y=0,v=0,_=0,g=0,b=0,E=zn.search(u,n,8),T=this.curves[E>>3];switch(T){case 0:var w=u[E];p=u[E+1],d=u[E+2],y=u[E+3],v=u[E+4],_=u[E+5],g=u[E+6],b=u[E+7];var x=(n-w)/(u[E+8]-w);p+=(u[E+8+1]-p)*x,d+=(u[E+8+2]-d)*x,y+=(u[E+8+3]-y)*x,v+=(u[E+8+4]-v)*x,_+=(u[E+8+5]-_)*x,g+=(u[E+8+6]-g)*x,b+=(u[E+8+7]-b)*x;break;case 1:p=u[E+1],d=u[E+2],y=u[E+3],v=u[E+4],_=u[E+5],g=u[E+6],b=u[E+7];break;default:p=this.getBezierValue(n,E,1,T-2),d=this.getBezierValue(n,E,2,T+18-2),y=this.getBezierValue(n,E,3,T+36-2),v=this.getBezierValue(n,E,4,T+54-2),_=this.getBezierValue(n,E,5,T+72-2),g=this.getBezierValue(n,E,6,T+90-2),b=this.getBezierValue(n,E,7,T+108-2)}if(1==i)c.set(p,d,y,v),l.r=_,l.g=g,l.b=b;else{if(o==m.setup){c.setFromColor(s.data.color);f=s.data.darkColor;l.r=f.r,l.g=f.g,l.b=f.b}c.add((p-c.r)*i,(d-c.g)*i,(y-c.b)*i,(v-c.a)*i),l.r+=(_-l.r)*i,l.g+=(g-l.g)*i,l.b+=(b-l.b)*i}}}},e}(qn),hr=function(t){function e(e,n,r){var i=t.call(this,e,n,[jn+"|"+r,Ln+"|"+r])||this;return i.slotIndex=0,i.slotIndex=r,i}return yn(e,t),e.prototype.getFrameEntries=function(){return 7},e.prototype.setFrame=function(t,e,n,r,i,o,a,s){t*=7,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r,this.frames[t+3]=i,this.frames[t+4]=o,this.frames[t+5]=a,this.frames[t+6]=s},e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.slots[this.slotIndex];if(s.bone.active){var u=this.frames,c=s.color,l=s.darkColor;if(n<u[0]){var h=s.data.color,f=s.data.darkColor;switch(o){case m.setup:return c.r=h.r,c.g=h.g,c.b=h.b,l.r=f.r,l.g=f.g,void(l.b=f.b);case m.first:c.r+=(h.r-c.r)*i,c.g+=(h.g-c.g)*i,c.b+=(h.b-c.b)*i,l.r+=(f.r-l.r)*i,l.g+=(f.g-l.g)*i,l.b+=(f.b-l.b)*i}}else{var p=0,d=0,y=0,v=0,_=0,g=0,b=zn.search(u,n,7),E=this.curves[b/7];switch(E){case 0:var T=u[b];p=u[b+1],d=u[b+2],y=u[b+3],v=u[b+4],_=u[b+5],g=u[b+6];var w=(n-T)/(u[b+7]-T);p+=(u[b+7+1]-p)*w,d+=(u[b+7+2]-d)*w,y+=(u[b+7+3]-y)*w,v+=(u[b+7+4]-v)*w,_+=(u[b+7+5]-_)*w,g+=(u[b+7+6]-g)*w;break;case 1:p=u[b+1],d=u[b+2],y=u[b+3],v=u[b+4],_=u[b+5],g=u[b+6];break;default:p=this.getBezierValue(n,b,1,E-2),d=this.getBezierValue(n,b,2,E+18-2),y=this.getBezierValue(n,b,3,E+36-2),v=this.getBezierValue(n,b,4,E+54-2),_=this.getBezierValue(n,b,5,E+72-2),g=this.getBezierValue(n,b,6,E+90-2)}if(1==i)c.r=p,c.g=d,c.b=y,l.r=v,l.g=_,l.b=g;else{if(o==m.setup){h=s.data.color,f=s.data.darkColor;c.r=h.r,c.g=h.g,c.b=h.b,l.r=f.r,l.g=f.g,l.b=f.b}c.r+=(p-c.r)*i,c.g+=(d-c.g)*i,c.b+=(y-c.b)*i,l.r+=(v-l.r)*i,l.g+=(_-l.g)*i,l.b+=(g-l.b)*i}}}},e}(qn),fr=function(t){function e(e,n){var r=t.call(this,e,[Bn+"|"+n])||this;return r.slotIndex=0,r.slotIndex=n,r.attachmentNames=new Array(e),r}return yn(e,t),e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.slots[this.slotIndex];s.bone.active&&(a!=v.mixOut?n<this.frames[0]?o!=m.setup&&o!=m.first||this.setAttachment(t,s,s.data.attachmentName):this.setAttachment(t,s,this.attachmentNames[zn.search1(this.frames,n)]):o==m.setup&&this.setAttachment(t,s,s.data.attachmentName))},e.prototype.setAttachment=function(t,e,n){e.setAttachment(n?t.getAttachment(this.slotIndex,n):null)},e}(zn),pr=function(t){function e(e,n,r,i){var o=t.call(this,e,n,[Fn+"|"+r+"|"+i.id])||this;return o.slotIndex=0,o.slotIndex=r,o.attachment=i,o.vertices=new Array(e),o}return yn(e,t),e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.vertices[t]=n},e.prototype.setBezier=function(t,e,n,r,i,o,a,s,u,c,l){var h=this.curves,f=this.getFrameCount()+18*t;0==n&&(h[e]=2+f);for(var p=.03*(r-2*o+s),d=.03*u-.06*a,y=.006*(3*(o-s)-r+c),m=.018*(a-u+.33333333),v=2*p+y,_=2*d+m,g=.3*(o-r)+p+.16666667*y,b=.3*a+d+.16666667*m,E=r+g,T=b,w=f+18;f<w;f+=2)h[f]=E,h[f+1]=T,g+=v,b+=_,v+=y,_+=m,E+=g,T+=b},e.prototype.getCurvePercent=function(t,e){var n=this.curves,r=n[e];switch(r){case 0:var i=this.frames[e];return(t-i)/(this.frames[e+this.getFrameEntries()]-i);case 1:return 0}if(n[r-=2]>t){var o=this.frames[e];return n[r+1]*(t-o)/(n[r]-o)}var a=r+18;for(r+=2;r<a;r+=2)if(n[r]>=t){var s=n[r-2],u=n[r-1];return u+(t-s)/(n[r]-s)*(n[r+1]-u)}var c=n[a-2],l=n[a-1];return l+(1-l)*(t-c)/(this.frames[e+this.getFrameEntries()]-c)},e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.slots[this.slotIndex];if(s.bone.active){var u=s.getAttachment();if(u instanceof _n&&u.deformAttachment==this.attachment){var c=s.deform;0==c.length&&(o=m.setup);var l=this.vertices,h=l[0].length,f=this.frames;if(n<f[0]){var p=u;switch(o){case m.setup:return void(c.length=0);case m.first:if(1==i)return void(c.length=0);if(c.length=h,p.bones){i=1-i;for(y=0;y<h;y++)c[y]*=i}else for(var d=p.vertices,y=0;y<h;y++)c[y]+=(d[y]-c[y])*i}}else if(c.length=h,n>=f[f.length-1]){var v=l[f.length-1];if(1==i)if(o==m.add)if((p=u).bones)for(var _=0;_<h;_++)c[_]+=v[_];else{d=p.vertices;for(var g=0;g<h;g++)c[g]+=v[g]-d[g]}else G.arrayCopy(v,0,c,0,h);else switch(o){case m.setup:var b=u;if(b.bones)for(var E=0;E<h;E++)c[E]=v[E]*i;else{d=b.vertices;for(var T=0;T<h;T++){var w=d[T];c[T]=w+(v[T]-w)*i}}break;case m.first:case m.replace:for(var x=0;x<h;x++)c[x]+=(v[x]-c[x])*i;break;case m.add:if((p=u).bones)for(var S=0;S<h;S++)c[S]+=v[S]*i;else{d=p.vertices;for(var O=0;O<h;O++)c[O]+=(v[O]-d[O])*i}}}else{var P=zn.search1(f,n),R=this.getCurvePercent(n,P),A=l[P],I=l[P+1];if(1==i)if(o==m.add)if((p=u).bones)for(var C=0;C<h;C++){N=A[C];c[C]+=N+(I[C]-N)*R}else{d=p.vertices;for(var k=0;k<h;k++){var N=A[k];c[k]+=N+(I[k]-N)*R-d[k]}}else for(var M=0;M<h;M++){N=A[M];c[M]=N+(I[M]-N)*R}else switch(o){case m.setup:var j=u;if(j.bones)for(var D=0;D<h;D++){N=A[D];c[D]=(N+(I[D]-N)*R)*i}else{d=j.vertices;for(var L=0;L<h;L++){var N=A[L];w=d[L];c[L]=w+(N+(I[L]-N)*R-w)*i}}break;case m.first:case m.replace:for(var B=0;B<h;B++){N=A[B];c[B]+=(N+(I[B]-N)*R-c[B])*i}break;case m.add:if((p=u).bones)for(var F=0;F<h;F++){N=A[F];c[F]+=(N+(I[F]-N)*R)*i}else{d=p.vertices;for(var U=0;U<h;U++){N=A[U];c[U]+=(N+(I[U]-N)*R-d[U])*i}}}}}}},e}(qn),dr=function(t){function e(n){var r=t.call(this,n,e.propertyIds)||this;return r.events=new Array(n),r}return yn(e,t),e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},e.prototype.apply=function(t,e,n,r,i,o,a){if(r){var s=this.frames,u=this.frames.length;if(e>n)this.apply(t,e,Number.MAX_VALUE,r,i,o,a),e=-1;else if(e>=s[u-1])return;if(!(n<s[0])){var c=0;if(e<s[0])c=0;else for(var l=s[c=zn.search1(s,e)+1];c>0&&s[c-1]==l;)c--;for(;c<u&&n>=s[c];c++)r.push(this.events[c])}}},e.propertyIds=[""+Un],e}(zn),yr=function(t){function e(n){var r=t.call(this,n,e.propertyIds)||this;return r.drawOrders=new Array(n),r}return yn(e,t),e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},e.prototype.apply=function(t,e,n,r,i,o,a){if(a!=v.mixOut)if(n<this.frames[0])o!=m.setup&&o!=m.first||G.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var s=this.drawOrders[zn.search1(this.frames,n)];if(s)for(var u=t.drawOrder,c=t.slots,l=0,h=s.length;l<h;l++)u[l]=c[s[l]];else G.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}else o==m.setup&&G.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)},e.propertyIds=[""+Gn],e}(zn),mr=function(t){function e(e,n,r){var i=t.call(this,e,n,[Hn+"|"+r])||this;return i.ikConstraintIndex=r,i}return yn(e,t),e.prototype.getFrameEntries=function(){return 6},e.prototype.setFrame=function(t,e,n,r,i,o,a){t*=6,this.frames[t]=e,this.frames[t+1]=n,this.frames[t+2]=r,this.frames[t+3]=i,this.frames[t+4]=o?1:0,this.frames[t+5]=a?1:0},e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.ikConstraints[this.ikConstraintIndex];if(s.active){var u=this.frames;if(n<u[0])switch(o){case m.setup:return s.mix=s.data.mix,s.softness=s.data.softness,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,void(s.stretch=s.data.stretch);case m.first:s.mix+=(s.data.mix-s.mix)*i,s.softness+=(s.data.softness-s.softness)*i,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch}else{var c=0,l=0,h=zn.search(u,n,6),f=this.curves[h/6];switch(f){case 0:var p=u[h];c=u[h+1],l=u[h+2];var d=(n-p)/(u[h+6]-p);c+=(u[h+6+1]-c)*d,l+=(u[h+6+2]-l)*d;break;case 1:c=u[h+1],l=u[h+2];break;default:c=this.getBezierValue(n,h,1,f-2),l=this.getBezierValue(n,h,2,f+18-2)}o==m.setup?(s.mix=s.data.mix+(c-s.data.mix)*i,s.softness=s.data.softness+(l-s.data.softness)*i,a==v.mixOut?(s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch):(s.bendDirection=u[h+3],s.compress=0!=u[h+4],s.stretch=0!=u[h+5])):(s.mix+=(c-s.mix)*i,s.softness+=(l-s.softness)*i,a==v.mixIn&&(s.bendDirection=u[h+3],s.compress=0!=u[h+4],s.stretch=0!=u[h+5]))}}},e}(qn),vr=function(t){function e(e,n,r){var i=t.call(this,e,n,[Vn+"|"+r])||this;return i.transformConstraintIndex=r,i}return yn(e,t),e.prototype.getFrameEntries=function(){return 7},e.prototype.setFrame=function(t,e,n,r,i,o,a,s){var u=this.frames;u[t*=7]=e,u[t+1]=n,u[t+2]=r,u[t+3]=i,u[t+4]=o,u[t+5]=a,u[t+6]=s},e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.transformConstraints[this.transformConstraintIndex];if(s.active){var u=this.frames;if(n<u[0]){var c=s.data;switch(o){case m.setup:return s.mixRotate=c.mixRotate,s.mixX=c.mixX,s.mixY=c.mixY,s.mixScaleX=c.mixScaleX,s.mixScaleY=c.mixScaleY,void(s.mixShearY=c.mixShearY);case m.first:s.mixRotate+=(c.mixRotate-s.mixRotate)*i,s.mixX+=(c.mixX-s.mixX)*i,s.mixY+=(c.mixY-s.mixY)*i,s.mixScaleX+=(c.mixScaleX-s.mixScaleX)*i,s.mixScaleY+=(c.mixScaleY-s.mixScaleY)*i,s.mixShearY+=(c.mixShearY-s.mixShearY)*i}}else{var l,h,f,p,d,y,v=zn.search(u,n,7),_=this.curves[v/7];switch(_){case 0:var g=u[v];l=u[v+1],h=u[v+2],f=u[v+3],p=u[v+4],d=u[v+5],y=u[v+6];var b=(n-g)/(u[v+7]-g);l+=(u[v+7+1]-l)*b,h+=(u[v+7+2]-h)*b,f+=(u[v+7+3]-f)*b,p+=(u[v+7+4]-p)*b,d+=(u[v+7+5]-d)*b,y+=(u[v+7+6]-y)*b;break;case 1:l=u[v+1],h=u[v+2],f=u[v+3],p=u[v+4],d=u[v+5],y=u[v+6];break;default:l=this.getBezierValue(n,v,1,_-2),h=this.getBezierValue(n,v,2,_+18-2),f=this.getBezierValue(n,v,3,_+36-2),p=this.getBezierValue(n,v,4,_+54-2),d=this.getBezierValue(n,v,5,_+72-2),y=this.getBezierValue(n,v,6,_+90-2)}if(o==m.setup){c=s.data;s.mixRotate=c.mixRotate+(l-c.mixRotate)*i,s.mixX=c.mixX+(h-c.mixX)*i,s.mixY=c.mixY+(f-c.mixY)*i,s.mixScaleX=c.mixScaleX+(p-c.mixScaleX)*i,s.mixScaleY=c.mixScaleY+(d-c.mixScaleY)*i,s.mixShearY=c.mixShearY+(y-c.mixShearY)*i}else s.mixRotate+=(l-s.mixRotate)*i,s.mixX+=(h-s.mixX)*i,s.mixY+=(f-s.mixY)*i,s.mixScaleX+=(p-s.mixScaleX)*i,s.mixScaleY+=(d-s.mixScaleY)*i,s.mixShearY+=(y-s.mixShearY)*i}}},e}(qn),_r=function(t){function e(e,n,r){var i=t.call(this,e,n,Xn+"|"+r)||this;return i.pathConstraintIndex=r,i}return yn(e,t),e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.pathConstraints[this.pathConstraintIndex];if(s.active)if(n<this.frames[0])switch(o){case m.setup:return void(s.position=s.data.position);case m.first:s.position+=(s.data.position-s.position)*i}else{var u=this.getCurveValue(n);o==m.setup?s.position=s.data.position+(u-s.data.position)*i:s.position+=(u-s.position)*i}},e}(Kn),gr=function(t){function e(e,n,r){var i=t.call(this,e,n,Wn+"|"+r)||this;return i.pathConstraintIndex=0,i.pathConstraintIndex=r,i}return yn(e,t),e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.pathConstraints[this.pathConstraintIndex];if(s.active)if(n<this.frames[0])switch(o){case m.setup:return void(s.spacing=s.data.spacing);case m.first:s.spacing+=(s.data.spacing-s.spacing)*i}else{var u=this.getCurveValue(n);o==m.setup?s.spacing=s.data.spacing+(u-s.data.spacing)*i:s.spacing+=(u-s.spacing)*i}},e}(Kn),br=function(t){function e(e,n,r){var i=t.call(this,e,n,[Yn+"|"+r])||this;return i.pathConstraintIndex=0,i.pathConstraintIndex=r,i}return yn(e,t),e.prototype.getFrameEntries=function(){return 4},e.prototype.setFrame=function(t,e,n,r,i){var o=this.frames;o[t<<=2]=e,o[t+1]=n,o[t+2]=r,o[t+3]=i},e.prototype.apply=function(t,e,n,r,i,o,a){var s=t.pathConstraints[this.pathConstraintIndex];if(s.active){var u=this.frames;if(n<u[0])switch(o){case m.setup:return s.mixRotate=s.data.mixRotate,s.mixX=s.data.mixX,void(s.mixY=s.data.mixY);case m.first:s.mixRotate+=(s.data.mixRotate-s.mixRotate)*i,s.mixX+=(s.data.mixX-s.mixX)*i,s.mixY+=(s.data.mixY-s.mixY)*i}else{var c,l,h,f=zn.search(u,n,4),p=this.curves[f>>2];switch(p){case 0:var d=u[f];c=u[f+1],l=u[f+2],h=u[f+3];var y=(n-d)/(u[f+4]-d);c+=(u[f+4+1]-c)*y,l+=(u[f+4+2]-l)*y,h+=(u[f+4+3]-h)*y;break;case 1:c=u[f+1],l=u[f+2],h=u[f+3];break;default:c=this.getBezierValue(n,f,1,p-2),l=this.getBezierValue(n,f,2,p+18-2),h=this.getBezierValue(n,f,3,p+36-2)}if(o==m.setup){var v=s.data;s.mixRotate=v.mixRotate+(c-v.mixRotate)*i,s.mixX=v.mixX+(l-v.mixX)*i,s.mixY=v.mixY+(h-v.mixY)*i}else s.mixRotate+=(c-s.mixRotate)*i,s.mixX+=(l-s.mixX)*i,s.mixY+=(h-s.mixY)*i}}},e}(qn),Er=function(){function t(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new wr(this),this.propertyIDs=new L,this.animationsChanged=!1,this.trackEntryPool=new H((function(){return new Tr})),this.data=t}return t.emptyAnimation=function(){return Nr||(Nr=new Pn("<empty>",[],0)),Nr},t.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,n=0,r=e.length;n<r;n++){var i=e[n];if(i){i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast;var o=t*i.timeScale;if(i.delay>0){if(i.delay-=o,i.delay>0)continue;o=-i.delay,i.delay=0}var a=i.next;if(a){var s=i.trackLast-a.delay;if(s>=0){for(a.delay=0,a.trackTime+=0==i.timeScale?0:(s/i.timeScale+t)*a.timeScale,i.trackTime+=o,this.setCurrent(n,a,!0);a.mixingFrom;)a.mixTime+=t,a=a.mixingFrom;continue}}else if(i.trackLast>=i.trackEnd&&!i.mixingFrom){e[n]=null,this.queue.end(i),this.clearNext(i);continue}if(i.mixingFrom&&this.updateMixingFrom(i,t)){var u=i.mixingFrom;for(i.mixingFrom=null,u&&(u.mixingTo=null);u;)this.queue.end(u),u=u.mixingFrom}i.trackTime+=o}}this.queue.drain()},t.prototype.updateMixingFrom=function(t,e){var n=t.mixingFrom;if(!n)return!0;var r=this.updateMixingFrom(n,e);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=n.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=n.mixingFrom,n.mixingFrom&&(n.mixingFrom.mixingTo=t),t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),r):(n.trackTime+=e*n.timeScale,t.mixTime+=e,!1)},t.prototype.apply=function(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,n=this.tracks,r=!1,i=0,o=n.length;i<o;i++){var a=n[i];if(a&&!(a.delay>0)){r=!0;var s=0==i?m.first:a.mixBlend,u=a.alpha;a.mixingFrom?u*=this.applyMixingFrom(a,t,s):a.trackTime>=a.trackEnd&&!a.next&&(u=0);var c=a.animationLast,l=a.getAnimationTime(),h=l,f=e;a.reverse&&(h=a.animation.duration-h,f=null);var p=a.animation.timelines,d=p.length;if(0==i&&1==u||s==m.add)for(var y=0;y<d;y++){G.webkit602BugfixHelper(u,s);var _=p[y];_ instanceof fr?this.applyAttachmentTimeline(_,t,h,s,!0):_.apply(t,c,h,f,u,s,v.mixIn)}else{var g=a.timelineMode,b=a.timelinesRotation.length!=d<<1;b&&(a.timelinesRotation.length=d<<1);for(y=0;y<d;y++){var E=p[y],T=g[y]==Or?s:m.setup;E instanceof $n?this.applyRotateTimeline(E,t,h,u,T,a.timelinesRotation,y<<1,b):E instanceof fr?this.applyAttachmentTimeline(E,t,h,s,!0):(G.webkit602BugfixHelper(u,s),E.apply(t,c,h,f,u,T,v.mixIn))}}this.queueEvents(a,l),e.length=0,a.nextAnimationLast=l,a.nextTrackLast=a.trackTime}}for(var w=this.unkeyedState+Cr,x=t.slots,S=0,O=t.slots.length;S<O;S++){var P=x[S];if(P.attachmentState==w){var R=P.data.attachmentName;P.setAttachment(R?t.getAttachment(P.data.index,R):null)}}return this.unkeyedState+=2,this.queue.drain(),r},t.prototype.applyMixingFrom=function(t,e,n){var r=t.mixingFrom;r.mixingFrom&&this.applyMixingFrom(r,e,n);var i=0;0==t.mixDuration?(i=1,n==m.first&&(n=m.setup)):((i=t.mixTime/t.mixDuration)>1&&(i=1),n!=m.first&&(n=r.mixBlend));var o=i<r.attachmentThreshold,a=i<r.drawOrderThreshold,s=r.animation.timelines,u=s.length,c=r.alpha*t.interruptAlpha,l=c*(1-i),h=r.animationLast,f=r.getAnimationTime(),p=f,d=null;if(r.reverse?p=r.animation.duration-p:i<r.eventThreshold&&(d=this.events),n==m.add)for(var y=0;y<u;y++)s[y].apply(e,h,p,d,l,n,v.mixOut);else{var _=r.timelineMode,g=r.timelineHoldMix,b=r.timelinesRotation.length!=u<<1;b&&(r.timelinesRotation.length=u<<1),r.totalAlpha=0;for(y=0;y<u;y++){var E=s[y],T=v.mixOut,w=void 0,x=0;switch(_[y]){case Or:if(!a&&E instanceof yr)continue;w=n,x=l;break;case Pr:w=m.setup,x=l;break;case Rr:w=n,x=c;break;case Ar:w=m.setup,x=c;break;default:w=m.setup;var S=g[y];x=c*Math.max(0,1-S.mixTime/S.mixDuration)}r.totalAlpha+=x,E instanceof $n?this.applyRotateTimeline(E,e,p,x,w,r.timelinesRotation,y<<1,b):E instanceof fr?this.applyAttachmentTimeline(E,e,p,w,o):(G.webkit602BugfixHelper(x,n),a&&E instanceof yr&&w==m.setup&&(T=v.mixIn),E.apply(e,h,p,d,x,w,T))}}return t.mixDuration>0&&this.queueEvents(r,f),this.events.length=0,r.nextAnimationLast=f,r.nextTrackLast=r.trackTime,i},t.prototype.applyAttachmentTimeline=function(t,e,n,r,i){var o=e.slots[t.slotIndex];o.bone.active&&(n<t.frames[0]?r!=m.setup&&r!=m.first||this.setAttachment(e,o,o.data.attachmentName,i):this.setAttachment(e,o,t.attachmentNames[zn.search1(t.frames,n)],i),o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+Cr))},t.prototype.setAttachment=function(t,e,n,r){e.setAttachment(n?t.getAttachment(e.data.index,n):null),r&&(e.attachmentState=this.unkeyedState+kr)},t.prototype.applyRotateTimeline=function(t,e,n,r,i,o,a,s){if(s&&(o[a]=0),1!=r){var u=e.bones[t.boneIndex];if(u.active){var c=0,l=0;if(n<t.frames[0])switch(i){case m.setup:u.rotation=u.data.rotation;default:return;case m.first:c=u.rotation,l=u.data.rotation}else c=i==m.setup?u.data.rotation:u.rotation,l=u.data.rotation+t.getCurveValue(n);var h=0,f=l-c;if(0==(f-=360*(16384-(16384.499999999996-f/360|0))))h=o[a];else{var p=0,d=0;s?(p=0,d=f):(p=o[a],d=o[a+1]);var y=f>0,_=p>=0;F.signum(d)!=F.signum(f)&&Math.abs(d)<=90&&(Math.abs(p)>180&&(p+=360*F.signum(p)),_=y),h=f+p-p%360,_!=y&&(h+=360*F.signum(p)),o[a]=h}o[a+1]=f,u.rotation=c+h*r}}else t.apply(e,0,n,null,1,i,v.mixIn)},t.prototype.queueEvents=function(t,e){for(var n=t.animationStart,r=t.animationEnd,i=r-n,o=t.trackLast%i,a=this.events,s=0,u=a.length;s<u;s++){var c=a[s];if(c.time<o)break;c.time>r||this.queue.event(t,c)}for((t.loop?0==i||o>t.trackTime%i:e>=r&&t.animationLast<r)&&this.queue.complete(t);s<u;s++){var l=a[s];l.time<n||this.queue.event(t,l)}},t.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,n=this.tracks.length;e<n;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},t.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(e){this.queue.end(e),this.clearNext(e);for(var n=e;;){var r=n.mixingFrom;if(!r)break;this.queue.end(r),n.mixingFrom=null,n.mixingTo=null,n=r}this.tracks[e.trackIndex]=null,this.queue.drain()}}},t.prototype.setCurrent=function(t,e,n){var r=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,r&&(n&&this.queue.interrupt(r),e.mixingFrom=r,r.mixingTo=e,e.mixTime=0,r.mixingFrom&&r.mixDuration>0&&(e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(e)},t.prototype.setAnimation=function(t,e,n){void 0===n&&(n=!1);var r=this.data.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,r,n)},t.prototype.setAnimationWith=function(t,e,n){if(void 0===n&&(n=!1),!e)throw new Error("animation cannot be null.");var r=!0,i=this.expandToIndex(t);i&&(-1==i.nextTrackLast?(this.tracks[t]=i.mixingFrom,this.queue.interrupt(i),this.queue.end(i),this.clearNext(i),i=i.mixingFrom,r=!1):this.clearNext(i));var o=this.trackEntry(t,e,n,i);return this.setCurrent(t,o,r),this.queue.drain(),o},t.prototype.addAnimation=function(t,e,n,r){void 0===n&&(n=!1),void 0===r&&(r=0);var i=this.data.skeletonData.findAnimation(e);if(!i)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,i,n,r)},t.prototype.addAnimationWith=function(t,e,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=0),!e)throw new Error("animation cannot be null.");var i=this.expandToIndex(t);if(i)for(;i.next;)i=i.next;var o=this.trackEntry(t,e,n,i);return i?(i.next=o,o.previous=i,r<=0&&(r+=i.getTrackComplete()-o.mixDuration)):(this.setCurrent(t,o,!0),this.queue.drain()),o.delay=r,o},t.prototype.setEmptyAnimation=function(e,n){void 0===n&&(n=0);var r=this.setAnimationWith(e,t.emptyAnimation(),!1);return r.mixDuration=n,r.trackEnd=n,r},t.prototype.addEmptyAnimation=function(e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=this.addAnimationWith(e,t.emptyAnimation(),!1,r);return r<=0&&(i.delay+=i.mixDuration-n),i.mixDuration=n,i.trackEnd=n,i},t.prototype.setEmptyAnimations=function(t){void 0===t&&(t=0);var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,r=this.tracks.length;n<r;n++){var i=this.tracks[n];i&&this.setEmptyAnimation(i.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},t.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(G.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)},t.prototype.trackEntry=function(t,e,n,r){var i=this.trackEntryPool.obtain();return i.trackIndex=t,i.animation=e,i.loop=n,i.holdPrevious=!1,i.eventThreshold=0,i.attachmentThreshold=0,i.drawOrderThreshold=0,i.animationStart=0,i.animationEnd=e.duration,i.animationLast=-1,i.nextAnimationLast=-1,i.delay=0,i.trackTime=0,i.trackLast=-1,i.nextTrackLast=-1,i.trackEnd=Number.MAX_VALUE,i.timeScale=1,i.alpha=1,i.interruptAlpha=1,i.mixTime=0,i.mixDuration=r?this.data.getMix(r.animation,e):0,i.mixBlend=m.replace,i},t.prototype.clearNext=function(t){for(var e=t.next;e;)this.queue.dispose(e),e=e.next;t.next=null},t.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=this.tracks,e=0,n=t.length;e<n;e++){var r=t[e];if(r){for(;r.mixingFrom;)r=r.mixingFrom;do{r.mixingTo&&r.mixBlend==m.add||this.computeHold(r),r=r.mixingTo}while(r)}}},t.prototype.computeHold=function(t){var e=t.mixingTo,n=t.animation.timelines,r=t.animation.timelines.length,i=t.timelineMode;i.length=r;var o=t.timelineHoldMix;o.length=0;var a=this.propertyIDs;if(e&&e.holdPrevious)for(var s=0;s<r;s++)i[s]=a.addAll(n[s].getPropertyIds())?Ar:Rr;else t:for(s=0;s<r;s++){var u=n[s],c=u.getPropertyIds();if(a.addAll(c))if(!e||u instanceof fr||u instanceof yr||u instanceof dr||!e.animation.hasTimeline(c))i[s]=Pr;else{for(var l=e.mixingTo;l;l=l.mixingTo)if(!l.animation.hasTimeline(c)){if(t.mixDuration>0){i[s]=Ir,o[s]=l;continue t}break}i[s]=Ar}else i[s]=Or}},t.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},t.prototype.addListener=function(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)},t.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},t.prototype.clearListeners=function(){this.listeners.length=0},t.prototype.clearListenerNotifications=function(){this.queue.clear()},t.prototype.setAnimationByName=function(e,n,r){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(e,n,r)},t.prototype.addAnimationByName=function(e,n,r,i){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(e,n,r,i)},t.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},t.prototype.hasAnimationByName=function(e){return t.deprecatedWarning3||(t.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(e)},t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t.deprecatedWarning3=!1,t}(),Tr=function(){function t(){this.mixBlend=m.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},t.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},t.prototype.getTrackComplete=function(){var t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime},Object.defineProperty(t.prototype,"time",{get:function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(e){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),t.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t}(),wr=function(){function t(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return t.prototype.start=function(t){this.objects.push(mn.start),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.interrupt=function(t){this.objects.push(mn.interrupt),this.objects.push(t)},t.prototype.end=function(t){this.objects.push(mn.end),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.dispose=function(t){this.objects.push(mn.dispose),this.objects.push(t)},t.prototype.complete=function(t){this.objects.push(mn.complete),this.objects.push(t)},t.prototype.event=function(t,e){this.objects.push(mn.event),this.objects.push(t),this.objects.push(e)},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];switch(r){case mn.start:null!=i.listener&&i.listener.start&&i.listener.start(i);for(var o=0;o<e.length;o++)e[o].start&&e[o].start(i);break;case mn.interrupt:null!=i.listener&&i.listener.interrupt&&i.listener.interrupt(i);for(o=0;o<e.length;o++)e[o].interrupt&&e[o].interrupt(i);break;case mn.end:null!=i.listener&&i.listener.end&&i.listener.end(i);for(o=0;o<e.length;o++)e[o].end&&e[o].end(i);case mn.dispose:null!=i.listener&&i.listener.dispose&&i.listener.dispose(i);for(o=0;o<e.length;o++)e[o].dispose&&e[o].dispose(i);this.animState.trackEntryPool.free(i);break;case mn.complete:null!=i.listener&&i.listener.complete&&i.listener.complete(i);for(o=0;o<e.length;o++)e[o].complete&&e[o].complete(i);break;case mn.event:var a=t[2+n++];null!=i.listener&&i.listener.event&&i.listener.event(i,a);for(o=0;o<e.length;o++)e[o].event&&e[o].event(i,a)}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t}();!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(mn||(mn={}));var xr,Sr=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}(),Or=0,Pr=1,Rr=2,Ar=3,Ir=4,Cr=1,kr=2,Nr=null,Mr=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,n){var r=this.skeletonData.findAnimation(t);if(null==r)throw new Error("Animation not found: "+t);var i=this.skeletonData.findAnimation(e);if(null==i)throw new Error("Animation not found: "+e);this.setMixWith(r,i,n)},t.prototype.setMixWith=function(t,e,n){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var r=t.name+"."+e.name;this.animationToMixTime[r]=n},t.prototype.getMix=function(t,e){var n=t.name+"."+e.name,r=this.animationToMixTime[n];return void 0===r?this.defaultMix:r},t}(),jr=function(){function t(t){this.atlas=t}return t.prototype.newRegionAttachment=function(t,e,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (region attachment: "+e+")");var i=new xn(e);return i.region=r,i},t.prototype.newMeshAttachment=function(t,e,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+e+")");var i=new En(e);return i.region=r,i},t.prototype.newBoundingBoxAttachment=function(t,e){return new gn(e)},t.prototype.newPathAttachment=function(t,e){return new Tn(e)},t.prototype.newPointAttachment=function(t,e){return new wn(e)},t.prototype.newClippingAttachment=function(t,e){return new bn(e)},t}(),Dr=function(){function t(t,e,n){if(this.matrix=new l.d,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.sorted=!1,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()}return Object.defineProperty(t.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),t.prototype.isActive=function(){return this.active},t.prototype.update=function(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(t,e,n,r,i,o,a){this.ax=t,this.ay=e,this.arotation=n,this.ascaleX=r,this.ascaleY=i,this.ashearX=o,this.ashearY=a;var s=this.parent,u=this.matrix,c=this.skeleton.scaleX,l=X?-this.skeleton.scaleY:this.skeleton.scaleY;if(!s){var h=this.skeleton,f=n+90+a;return u.a=F.cosDeg(n+o)*r*c,u.c=F.cosDeg(f)*i*c,u.b=F.sinDeg(n+o)*r*l,u.d=F.sinDeg(f)*i*l,u.tx=t*c+h.x,void(u.ty=e*l+h.y)}var p=s.matrix.a,d=s.matrix.c,y=s.matrix.b,m=s.matrix.d;switch(u.tx=p*t+d*e+s.matrix.tx,u.ty=y*t+m*e+s.matrix.ty,this.data.transformMode){case b.Normal:f=n+90+a;var v=F.cosDeg(n+o)*r,_=F.cosDeg(f)*i,g=F.sinDeg(n+o)*r,E=F.sinDeg(f)*i;return u.a=p*v+d*g,u.c=p*_+d*E,u.b=y*v+m*g,void(u.d=y*_+m*E);case b.OnlyTranslation:f=n+90+a;u.a=F.cosDeg(n+o)*r,u.c=F.cosDeg(f)*i,u.b=F.sinDeg(n+o)*r,u.d=F.sinDeg(f)*i;break;case b.NoRotationOrReflection:var T=0;(S=p*p+y*y)>1e-4?(S=Math.abs(p*m-d*y)/S,p/=this.skeleton.scaleX,d=(y/=this.skeleton.scaleY)*S,m=p*S,T=Math.atan2(y,p)*F.radDeg):(p=0,y=0,T=90-Math.atan2(m,d)*F.radDeg);var w=n+o-T,x=n+a-T+90;v=F.cosDeg(w)*r,_=F.cosDeg(x)*i,g=F.sinDeg(w)*r,E=F.sinDeg(x)*i;u.a=p*v-d*g,u.c=p*_-d*E,u.b=y*v+m*g,u.d=y*_+m*E;break;case b.NoScale:case b.NoScaleOrReflection:var S,O=F.cosDeg(n),P=F.sinDeg(n),R=(p*O+d*P)/c,A=(y*O+m*P)/l;(S=Math.sqrt(R*R+A*A))>1e-5&&(S=1/S),R*=S,A*=S,S=Math.sqrt(R*R+A*A),this.data.transformMode==b.NoScale&&p*m-d*y<0!=(X?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(S=-S);var I=Math.PI/2+Math.atan2(A,R),C=Math.cos(I)*S,k=Math.sin(I)*S;v=F.cosDeg(o)*r,_=F.cosDeg(90+a)*i,g=F.sinDeg(o)*r,E=F.sinDeg(90+a)*i;u.a=R*v+C*g,u.c=R*_+C*E,u.b=A*v+k*g,u.d=A*_+k*E}u.a*=c,u.c*=c,u.b*=l,u.d*=l},t.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*F.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*F.radDeg},t.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.b*t.b)},t.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.c*t.c+t.d*t.d)},t.prototype.updateAppliedTransform=function(){var t=this.parent,e=this.matrix;if(!t)return this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*F.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,void(this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*F.radDeg);var n=t.matrix,r=1/(n.a*n.d-n.b*n.c),i=e.tx-n.tx,o=e.ty-n.ty;this.ax=i*n.d*r-o*n.c*r,this.ay=o*n.a*r-i*n.b*r;var a=r*n.d,s=r*n.a,u=r*n.c,c=r*n.b,l=a*e.a-u*e.b,h=a*e.c-u*e.d,f=s*e.b-c*e.a,p=s*e.d-c*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(l*l+f*f),this.ascaleX>1e-4){var d=l*p-h*f;this.ascaleY=d/this.ascaleX,this.ashearY=Math.atan2(l*h+f*p,d)*F.radDeg,this.arotation=Math.atan2(f,l)*F.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(h*h+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,h)*F.radDeg},t.prototype.worldToLocal=function(t){var e=this.matrix,n=e.a,r=e.c,i=e.b,o=e.d,a=1/(n*o-r*i),s=t.x-e.tx,u=t.y-e.ty;return t.x=s*o*a-u*r*a,t.y=u*n*a-s*i*a,t},t.prototype.localToWorld=function(t){var e=this.matrix,n=t.x,r=t.y;return t.x=n*e.a+r*e.c+e.tx,t.y=n*e.b+r*e.d+e.ty,t},t.prototype.worldToLocalRotation=function(t){var e=F.sinDeg(t),n=F.cosDeg(t),r=this.matrix;return Math.atan2(r.a*e-r.b*n,r.d*n-r.c*e)*F.radDeg},t.prototype.localToWorldRotation=function(t){t-=this.rotation-this.shearX;var e=F.sinDeg(t),n=F.cosDeg(t),r=this.matrix;return Math.atan2(n*r.b+e*r.d,n*r.a+e*r.c)*F.radDeg},t.prototype.rotateWorld=function(t){var e=this.matrix,n=e.a,r=e.c,i=e.b,o=e.d,a=F.cosDeg(t),s=F.sinDeg(t);e.a=a*n-s*i,e.c=a*r-s*o,e.b=s*n+a*i,e.d=s*r+a*o},t}(),Lr=function(t,e,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=b.Normal,this.skinRequired=!1,this.color=new B,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=n},Br=function(t,e,n){this.name=t,this.order=e,this.skinRequired=n},Fr=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e},Ur=function(t){this.name=t},Gr=function(){function t(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.update=function(){if(0!=this.mix){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}},t.prototype.apply1=function(t,e,n,r,i,o,a){var s=t.parent.matrix,u=s.a,c=s.c,l=s.b,h=s.d,f=-t.ashearX-t.arotation,p=0,d=0;switch(t.data.transformMode){case b.OnlyTranslation:p=e-t.worldX,d=n-t.worldY;break;case b.NoRotationOrReflection:var y=Math.abs(u*h-c*l)/(u*u+l*l),m=u/t.skeleton.scaleX,v=l/t.skeleton.scaleY;c=-v*y*t.skeleton.scaleX,h=m*y*t.skeleton.scaleY,f+=Math.atan2(v,m)*F.radDeg;default:var _=e-s.tx,g=n-s.ty,E=u*h-c*l;p=(_*h-g*c)/E-t.ax,d=(g*u-_*l)/E-t.ay}f+=Math.atan2(d,p)*F.radDeg,t.ascaleX<0&&(f+=180),f>180?f-=360:f<-180&&(f+=360);var T=t.ascaleX,w=t.ascaleY;if(r||i){switch(t.data.transformMode){case b.NoScale:case b.NoScaleOrReflection:p=e-t.worldX,d=n-t.worldY}var x=t.data.length*T,S=Math.sqrt(p*p+d*d);if(r&&S<x||i&&S>x&&x>1e-4)T*=y=(S/x-1)*a+1,o&&(w*=y)}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+f*a,T,w,t.ashearX,t.ashearY)},t.prototype.apply2=function(t,e,n,r,i,o,a,s,u){var c=t.ax,l=t.ay,h=t.ascaleX,f=t.ascaleY,p=h,d=f,y=e.ascaleX,m=t.matrix,v=0,_=0,g=0;h<0?(h=-h,v=180,g=-1):(v=0,g=1),f<0&&(f=-f,g=-g),y<0?(y=-y,_=180):_=0;var b=e.ax,E=0,T=0,w=0,x=m.a,S=m.c,O=m.b,P=m.d,R=Math.abs(h-f)<=1e-4;!R||o?(E=0,T=x*b+m.tx,w=O*b+m.ty):(T=x*b+S*(E=e.ay)+m.tx,w=O*b+P*E+m.ty);var A=t.parent.matrix;x=A.a,S=A.c,O=A.b;var I,C,k=1/(x*(P=A.d)-S*O),N=T-A.tx,M=w-A.ty,j=(N*P-M*S)*k-c,D=(M*x-N*O)*k-l,L=Math.sqrt(j*j+D*D),B=e.data.length*y;if(L<1e-4)return this.apply1(t,n,r,!1,o,!1,u),void e.updateWorldTransformWith(b,E,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);var U=((N=n-A.tx)*P-(M=r-A.ty)*S)*k-c,G=(M*x-N*O)*k-l,H=U*U+G*G;if(0!=s){s*=h*(y+1)*.5;var V=Math.sqrt(H),X=V-L-B*h+s;if(X>0){var W=Math.min(1,X/(2*s))-1;H=(U-=(W=(X-s*(1-W*W))/V)*U)*U+(G-=W*G)*G}}t:if(R){var Y=(H-L*L-(B*=h)*B)/(2*L*B);Y<-1?(Y=-1,C=Math.PI*i):Y>1?(Y=1,C=0,o&&(p*=x=(Math.sqrt(H)/(L+B)-1)*u+1,a&&(d*=x))):C=Math.acos(Y)*i,x=L+B*Y,S=B*Math.sin(C),I=Math.atan2(G*x-U*S,U*x+G*S)}else{var z=(x=h*B)*x,q=(S=f*B)*S,K=Math.atan2(G,U),Z=-2*q*L,$=q-z;if((P=Z*Z-4*$*(O=q*L*L+z*H-z*q))>=0){var J=Math.sqrt(P);Z<0&&(J=-J);var Q=(J=.5*-(Z+J))/$,tt=O/J,et=Math.abs(Q)<Math.abs(tt)?Q:tt;if(et*et<=H){M=Math.sqrt(H-et*et)*i,I=K-Math.atan2(M,et),C=Math.atan2(M/f,(et-L)/h);break t}}var nt=F.PI,rt=L-x,it=rt*rt,ot=0,at=0,st=L+x,ut=st*st,ct=0;(O=-x*L/(z-q))>=-1&&O<=1&&(O=Math.acos(O),(P=(N=x*Math.cos(O)+L)*N+(M=S*Math.sin(O))*M)<it&&(nt=O,it=P,rt=N,ot=M),P>ut&&(at=O,ut=P,st=N,ct=M)),H<=.5*(it+ut)?(I=K-Math.atan2(ot*i,rt),C=nt*i):(I=K-Math.atan2(ct*i,st),C=at*i)}var lt=Math.atan2(E,b)*g,ht=t.arotation;(I=(I-lt)*F.radDeg+v-ht)>180?I-=360:I<-180&&(I+=360),t.updateWorldTransformWith(c,l,ht+I*u,p,d,0,0),ht=e.arotation,(C=((C+lt)*F.radDeg-e.ashearX)*g+_-ht)>180?C-=360:C<-180&&(C+=360),e.updateWorldTransformWith(b,E,ht+C*u,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)},t}(),Hr=function(t){function e(e){var n=t.call(this,e,0,!1)||this;return n.bones=new Array,n.bendDirection=1,n.compress=!1,n.stretch=!1,n.uniform=!1,n.mix=1,n.softness=0,n}return yn(e,t),e}(Br),Vr=function(t){function e(e){var n=t.call(this,e,0,!1)||this;return n.bones=new Array,n.mixRotate=0,n.mixX=0,n.mixY=0,n}return yn(e,t),e}(Br);!function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional"}(xr||(xr={}));var Xr=function(){function t(t,e){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,r=t.bones.length;n<r;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}return t.prototype.isActive=function(){return this.active},t.prototype.update=function(){var e=this.target.getAttachment();if(e instanceof Tn){var n=this.mixRotate,r=this.mixX,i=this.mixY;if(0!=n||0!=r||0!=i){var o=this.data,a=o.rotateMode==g.Tangent,s=o.rotateMode==g.ChainScale,u=this.bones.length,c=a?u:u+1,l=this.bones,h=G.setArraySize(this.spaces,c),f=s?this.lengths=G.setArraySize(this.lengths,u):null,p=this.spacing;switch(o.spacingMode){case xr.Percent:if(s)for(var d=0,y=c-1;d<y;d++){if((T=(I=l[d]).data.length)<t.epsilon)f[d]=0;else{var m=T*I.matrix.a,v=T*I.matrix.b;f[d]=Math.sqrt(m*m+v*v)}}G.arrayFill(h,1,c,p);break;case xr.Proportional:var _=0;for(d=0,y=c-1;d<y;){if((T=(I=l[d]).data.length)<t.epsilon)s&&(f[d]=0),h[++d]=p;else{m=T*I.matrix.a,v=T*I.matrix.b;var b=Math.sqrt(m*m+v*v);s&&(f[d]=b),h[++d]=b,_+=b}}if(_>0){_=c/_*p;for(d=1;d<c;d++)h[d]*=_}break;default:var E=o.spacingMode==xr.Length;for(d=0,y=c-1;d<y;){var T;if((T=(I=l[d]).data.length)<t.epsilon)s&&(f[d]=0),h[++d]=p;else{m=T*I.matrix.a,v=T*I.matrix.b;var w=Math.sqrt(m*m+v*v);s&&(f[d]=w),h[++d]=(E?T+p:p)*w/T}}}var x=this.computeWorldPositions(e,c,a),S=x[0],O=x[1],P=o.offsetRotation,R=!1;if(0==P)R=o.rotateMode==g.Chain;else R=!1,P*=(A=this.target.bone.matrix).a*A.d-A.b*A.c>0?F.degRad:-F.degRad;d=0;for(var A=3;d<u;d++,A+=3){var I,C=(I=l[d]).matrix;C.tx+=(S-C.tx)*r,C.ty+=(O-C.ty)*i;var k=(m=x[A])-S,N=(v=x[A+1])-O;if(s){var M=f[d];if(0!=M){var j=(Math.sqrt(k*k+N*N)/M-1)*n+1;C.a*=j,C.b*=j}}if(S=m,O=v,n>0){var D=C.a,L=C.c,B=C.b,U=C.d,H=0,V=0,X=0;if(H=a?x[A-1]:0==h[d+1]?x[A+2]:Math.atan2(N,k),H-=Math.atan2(B,D),R){V=Math.cos(H),X=Math.sin(H);var W=I.data.length;S+=(W*(V*D-X*B)-k)*n,O+=(W*(X*D+V*B)-N)*n}else H+=P;H>F.PI?H-=F.PI2:H<-F.PI&&(H+=F.PI2),H*=n,V=Math.cos(H),X=Math.sin(H),C.a=V*D-X*B,C.c=V*L-X*U,C.b=X*D+V*B,C.d=X*L+V*U}I.updateAppliedTransform()}}}},t.prototype.computeWorldPositions=function(e,n,r){var i=this.target,o=this.position,a=this.spaces,s=G.setArraySize(this.positions,3*n+2),u=null,c=e.closed,l=e.worldVerticesLength,h=l/6,f=t.NONE;if(!e.constantSpeed){var p,d=e.lengths,y=d[h-=c?1:2];switch(this.data.positionMode==_.Percent&&(o*=y),this.data.spacingMode){case xr.Percent:p=y;break;case xr.Proportional:p=y/n;break;default:p=1}u=G.setArraySize(this.world,8);for(var m=0,v=0,g=0;m<n;m++,v+=3){var b=o+=Y=a[m]*p;if(c)(b%=y)<0&&(b+=y),g=0;else{if(b<0){f!=t.BEFORE&&(f=t.BEFORE,e.computeWorldVertices(i,2,4,u,0,2)),this.addBeforePosition(b,u,0,s,v);continue}if(b>y){f!=t.AFTER&&(f=t.AFTER,e.computeWorldVertices(i,l-6,4,u,0,2)),this.addAfterPosition(b-y,u,0,s,v);continue}}for(;;g++){var E=d[g];if(!(b>E)){if(0==g)b/=E;else b=(b-(Z=d[g-1]))/(E-Z);break}}g!=f&&(f=g,c&&g==h?(e.computeWorldVertices(i,l-4,4,u,0,2),e.computeWorldVertices(i,0,4,u,4,2)):e.computeWorldVertices(i,6*g+2,8,u,0,2)),this.addCurvePosition(b,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],s,v,r||m>0&&0==Y)}return s}c?(l+=2,u=G.setArraySize(this.world,l),e.computeWorldVertices(i,2,l-4,u,0,2),e.computeWorldVertices(i,0,2,u,l-4,2),u[l-2]=u[0],u[l-1]=u[1]):(h--,l-=4,u=G.setArraySize(this.world,l),e.computeWorldVertices(i,2,l,u,0,2));for(var T=G.setArraySize(this.curves,h),w=0,x=u[0],S=u[1],O=0,P=0,R=0,A=0,I=0,C=0,k=0,N=0,M=0,j=0,D=0,L=0,B=0,F=0,U=(m=0,2);m<h;m++,U+=6)O=u[U],P=u[U+1],R=u[U+2],A=u[U+3],D=2*(k=.1875*(x-2*O+R))+(M=.09375*(3*(O-R)-x+(I=u[U+4]))),L=2*(N=.1875*(S-2*P+A))+(j=.09375*(3*(P-A)-S+(C=u[U+5]))),B=.75*(O-x)+k+.16666667*M,F=.75*(P-S)+N+.16666667*j,w+=Math.sqrt(B*B+F*F),B+=D,F+=L,D+=M,L+=j,w+=Math.sqrt(B*B+F*F),B+=D,F+=L,w+=Math.sqrt(B*B+F*F),B+=D+M,F+=L+j,w+=Math.sqrt(B*B+F*F),T[m]=w,x=I,S=C;this.data.positionMode==_.Percent&&(o*=w);var H=0;switch(this.data.spacingMode){case xr.Percent:H=w;break;case xr.Proportional:H=w/n;break;default:H=1}for(var V=this.segments,X=0,W=(m=0,v=0,g=0,0);m<n;m++,v+=3){var Y;b=o+=Y=a[m]*H;if(c)(b%=w)<0&&(b+=w),g=0;else{if(b<0){this.addBeforePosition(b,u,0,s,v);continue}if(b>w){this.addAfterPosition(b-w,u,l-4,s,v);continue}}for(;;g++){var z=T[g];if(!(b>z)){if(0==g)b/=z;else b=(b-(Z=T[g-1]))/(z-Z);break}}if(g!=f){f=g;var q=6*g;for(x=u[q],S=u[q+1],O=u[q+2],P=u[q+3],R=u[q+4],A=u[q+5],D=2*(k=.03*(x-2*O+R))+(M=.006*(3*(O-R)-x+(I=u[q+6]))),L=2*(N=.03*(S-2*P+A))+(j=.006*(3*(P-A)-S+(C=u[q+7]))),B=.3*(O-x)+k+.16666667*M,F=.3*(P-S)+N+.16666667*j,X=Math.sqrt(B*B+F*F),V[0]=X,q=1;q<8;q++)B+=D,F+=L,D+=M,L+=j,X+=Math.sqrt(B*B+F*F),V[q]=X;B+=D,F+=L,X+=Math.sqrt(B*B+F*F),V[8]=X,B+=D+M,F+=L+j,X+=Math.sqrt(B*B+F*F),V[9]=X,W=0}for(b*=X;;W++){var K=V[W];if(!(b>K)){var Z;if(0==W)b/=K;else b=W+(b-(Z=V[W-1]))/(K-Z);break}}this.addCurvePosition(.1*b,x,S,O,P,R,A,I,C,s,v,r||m>0&&0==Y)}return s},t.prototype.addBeforePosition=function(t,e,n,r,i){var o=e[n],a=e[n+1],s=e[n+2]-o,u=e[n+3]-a,c=Math.atan2(u,s);r[i]=o+t*Math.cos(c),r[i+1]=a+t*Math.sin(c),r[i+2]=c},t.prototype.addAfterPosition=function(t,e,n,r,i){var o=e[n+2],a=e[n+3],s=o-e[n],u=a-e[n+1],c=Math.atan2(u,s);r[i]=o+t*Math.cos(c),r[i+1]=a+t*Math.sin(c),r[i+2]=c},t.prototype.addCurvePosition=function(t,e,n,r,i,o,a,s,u,c,l,h){if(0==t||isNaN(t))return c[l]=e,c[l+1]=n,void(c[l+2]=Math.atan2(i-n,r-e));var f=t*t,p=f*t,d=1-t,y=d*d,m=y*d,v=d*t,_=3*v,g=d*_,b=_*t,E=e*m+r*g+o*b+s*p,T=n*m+i*g+a*b+u*p;c[l]=E,c[l+1]=T,h&&(c[l+2]=t<.001?Math.atan2(i-n,r-e):Math.atan2(T-(n*y+i*v*2+a*f),E-(e*y+r*v*2+o*f)))},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,t.epsilon=1e-5,t}(),Wr=function(){function t(t,e){if(this.deform=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new B,this.darkColor=null==t.darkColor?null:new B,this.setToSetupPose(),this.blendMode=this.data.blendMode}return t.prototype.getSkeleton=function(){return this.bone.skeleton},t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},t.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}(),Yr=function(){function t(t,e){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new V,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.update=function(){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleX&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())},t.prototype.applyAbsoluteWorld=function(){for(var t=this.mixRotate,e=this.mixX,n=this.mixY,r=this.mixScaleX,i=this.mixScaleY,o=this.mixShearY,a=0!=e||0!=n,s=this.target,u=s.matrix,c=u.a,l=u.c,h=u.b,f=u.d,p=c*f-l*h>0?F.degRad:-F.degRad,d=this.data.offsetRotation*p,y=this.data.offsetShearY*p,m=this.bones,v=0,_=m.length;v<_;v++){var g=m[v],b=g.matrix;if(0!=t){var E=b.a,T=b.c,w=b.b,x=b.d;(R=Math.atan2(h,c)-Math.atan2(w,E)+d)>F.PI?R-=F.PI2:R<-F.PI&&(R+=F.PI2),R*=t;var S=Math.cos(R),O=Math.sin(R);b.a=S*E-O*w,b.c=S*T-O*x,b.b=O*E+S*w,b.d=O*T+S*x}if(a){var P=this.temp;s.localToWorld(P.set(this.data.offsetX,this.data.offsetY)),b.tx+=(P.x-b.tx)*e,b.ty+=(P.y-b.ty)*n}if(0!=r)0!=(I=Math.sqrt(b.a*b.a+b.b*b.b))&&(I=(I+(Math.sqrt(c*c+h*h)-I+this.data.offsetScaleX)*r)/I),b.a*=I,b.b*=I;if(0!=i)0!=(I=Math.sqrt(b.c*b.c+b.d*b.d))&&(I=(I+(Math.sqrt(l*l+f*f)-I+this.data.offsetScaleY)*i)/I),b.c*=I,b.d*=I;if(o>0){T=b.c,x=b.d;var R,A=Math.atan2(x,T);(R=Math.atan2(f,l)-Math.atan2(h,c)-(A-Math.atan2(b.b,b.a)))>F.PI?R-=F.PI2:R<-F.PI&&(R+=F.PI2),R=A+(R+y)*o;var I=Math.sqrt(T*T+x*x);b.c=Math.cos(R)*I,b.d=Math.sin(R)*I}g.updateAppliedTransform()}},t.prototype.applyRelativeWorld=function(){for(var t=this.mixRotate,e=this.mixX,n=this.mixY,r=this.mixScaleX,i=this.mixScaleY,o=this.mixShearY,a=0!=e||0!=n,s=this.target,u=s.matrix,c=u.a,l=u.c,h=u.b,f=u.d,p=c*f-l*h>0?F.degRad:-F.degRad,d=this.data.offsetRotation*p,y=this.data.offsetShearY*p,m=this.bones,v=0,_=m.length;v<_;v++){var g=m[v],b=g.matrix;if(0!=t){var E=b.a,T=b.c,w=b.b,x=b.d;(A=Math.atan2(h,c)+d)>F.PI?A-=F.PI2:A<-F.PI&&(A+=F.PI2),A*=t;var S=Math.cos(A),O=Math.sin(A);b.a=S*E-O*w,b.c=S*T-O*x,b.b=O*E+S*w,b.d=O*T+S*x}if(a){var P=this.temp;s.localToWorld(P.set(this.data.offsetX,this.data.offsetY)),b.tx+=P.x*e,b.ty+=P.y*n}if(0!=r){var R=(Math.sqrt(c*c+h*h)-1+this.data.offsetScaleX)*r+1;b.a*=R,b.b*=R}if(0!=i){R=(Math.sqrt(l*l+f*f)-1+this.data.offsetScaleY)*i+1;b.c*=R,b.d*=R}if(o>0){var A;(A=Math.atan2(f,l)-Math.atan2(h,c))>F.PI?A-=F.PI2:A<-F.PI&&(A+=F.PI2);T=b.c,x=b.d;A=Math.atan2(x,T)+(A-F.PI/2+y)*o;R=Math.sqrt(T*T+x*x);b.c=Math.cos(A)*R,b.d=Math.sin(A)*R}g.updateAppliedTransform()}},t.prototype.applyAbsoluteLocal=function(){for(var t=this.mixRotate,e=this.mixX,n=this.mixY,r=this.mixScaleX,i=this.mixScaleY,o=this.mixShearY,a=this.target,s=this.bones,u=0,c=s.length;u<c;u++){var l=s[u],h=l.arotation;if(0!=t){var f=a.arotation-h+this.data.offsetRotation;h+=(f-=360*(16384-(16384.499999999996-f/360|0)))*t}var p=l.ax,d=l.ay;p+=(a.ax-p+this.data.offsetX)*e,d+=(a.ay-d+this.data.offsetY)*n;var y=l.ascaleX,m=l.ascaleY;0!=r&&0!=y&&(y=(y+(a.ascaleX-y+this.data.offsetScaleX)*r)/y),0!=i&&0!=m&&(m=(m+(a.ascaleY-m+this.data.offsetScaleY)*i)/m);var v=l.ashearY;if(0!=o){f=a.ashearY-v+this.data.offsetShearY;v+=(f-=360*(16384-(16384.499999999996-f/360|0)))*o}l.updateWorldTransformWith(p,d,h,y,m,l.ashearX,v)}},t.prototype.applyRelativeLocal=function(){for(var t=this.mixRotate,e=this.mixX,n=this.mixY,r=this.mixScaleX,i=this.mixScaleY,o=this.mixShearY,a=this.target,s=this.bones,u=0,c=s.length;u<c;u++){var l=s[u],h=l.arotation+(a.arotation+this.data.offsetRotation)*t,f=l.ax+(a.ax+this.data.offsetX)*e,p=l.ay+(a.ay+this.data.offsetY)*n,d=l.ascaleX*((a.ascaleX-1+this.data.offsetScaleX)*r)+1,y=l.ascaleY*((a.ascaleY-1+this.data.offsetScaleY)*i)+1,m=l.ashearY+(a.ashearY+this.data.offsetShearY)*o;l.updateWorldTransformWith(f,p,h,d,y,l.ashearX,m)}},t}(),zr=function(){function t(t){if(this._updateCache=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var n=t.bones[e],r=void 0;if(n.parent){var i=this.bones[n.parent.index];r=new Dr(n,this,i),i.children.push(r)}else r=new Dr(n,this,null);this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(e=0;e<t.slots.length;e++){var o=t.slots[e],a=(r=this.bones[o.boneData.index],new Wr(o,r));this.slots.push(a),this.drawOrder.push(a)}this.ikConstraints=new Array;for(e=0;e<t.ikConstraints.length;e++){var s=t.ikConstraints[e];this.ikConstraints.push(new Gr(s,this))}this.transformConstraints=new Array;for(e=0;e<t.transformConstraints.length;e++){var u=t.transformConstraints[e];this.transformConstraints.push(new Yr(u,this))}this.pathConstraints=new Array;for(e=0;e<t.pathConstraints.length;e++){var c=t.pathConstraints[e];this.pathConstraints.push(new Xr(c,this))}this.color=new B(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){this._updateCache.length=0;for(var t=this.bones,e=0,n=t.length;e<n;e++){(i=t[e]).sorted=i.data.skinRequired,i.active=!i.sorted}if(this.skin){var r=this.skin.bones;for(e=0,n=this.skin.bones.length;e<n;e++){var i=this.bones[r[e].index];do{i.sorted=!1,i.active=!0,i=i.parent}while(i)}}var o=this.ikConstraints,a=this.transformConstraints,s=this.pathConstraints,u=o.length,c=a.length,l=s.length,h=u+c+l;t:for(e=0;e<h;e++){for(var f=0;f<u;f++){if((p=o[f]).data.order==e){this.sortIkConstraint(p);continue t}}for(f=0;f<c;f++){if((p=a[f]).data.order==e){this.sortTransformConstraint(p);continue t}}for(f=0;f<l;f++){var p;if((p=s[f]).data.order==e){this.sortPathConstraint(p);continue t}}}for(e=0,n=t.length;e<n;e++)this.sortBone(t[e])},t.prototype.sortIkConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&G.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target;this.sortBone(e);var n=t.bones,r=n[0];if(this.sortBone(r),1==n.length)this._updateCache.push(t),this.sortReset(r.children);else{var i=n[n.length-1];this.sortBone(i),this._updateCache.push(t),this.sortReset(r.children),i.sorted=!0}}},t.prototype.sortPathConstraint=function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&G.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target,n=e.data.index,r=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,n,r),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,r);for(var i=0,o=this.data.skins.length;i<o;i++)this.sortPathConstraintAttachment(this.data.skins[i],n,r);var a=e.getAttachment();a instanceof Tn&&this.sortPathConstraintAttachmentWith(a,r);var s=t.bones,u=s.length;for(i=0;i<u;i++)this.sortBone(s[i]);this._updateCache.push(t);for(i=0;i<u;i++)this.sortReset(s[i].children);for(i=0;i<u;i++)s[i].sorted=!0}},t.prototype.sortTransformConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&G.contains(this.skin.constraints,t.data,!0)),t.active){this.sortBone(t.target);var e=t.bones,n=e.length;if(t.data.local)for(var r=0;r<n;r++){var i=e[r];this.sortBone(i.parent),this.sortBone(i)}else for(r=0;r<n;r++)this.sortBone(e[r]);this._updateCache.push(t);for(r=0;r<n;r++)this.sortReset(e[r].children);for(r=0;r<n;r++)e[r].sorted=!0}},t.prototype.sortPathConstraintAttachment=function(t,e,n){var r=t.attachments[e];if(r)for(var i in r)this.sortPathConstraintAttachmentWith(r[i],n)},t.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof Tn){var n=t.bones;if(n)for(var r=this.bones,i=0,o=n.length;i<o;){var a=n[i++];for(a+=i;i<a;)this.sortBone(r[n[i++]])}else this.sortBone(e)}},t.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},t.prototype.sortReset=function(t){for(var e=0,n=t.length;e<n;e++){var r=t[e];r.active&&(r.sorted&&this.sortReset(r.children),r.sorted=!1)}},t.prototype.updateWorldTransform=function(){for(var t=this.bones,e=0,n=t.length;e<n;e++){var r=t[e];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY}var i=this._updateCache;for(e=0,n=i.length;e<n;e++)i[e].update()},t.prototype.updateWorldTransformWith=function(t){var e=this.getRootBone(),n=t.matrix.a,r=t.matrix.c,i=t.matrix.b,o=t.matrix.d;e.matrix.tx=n*this.x+r*this.y+t.worldX,e.matrix.ty=i*this.x+o*this.y+t.worldY;var a=e.rotation+90+e.shearY,s=F.cosDeg(e.rotation+e.shearX)*e.scaleX,u=F.cosDeg(a)*e.scaleY,c=F.sinDeg(e.rotation+e.shearX)*e.scaleX,l=F.sinDeg(a)*e.scaleY,h=this.scaleX,f=X?-this.scaleY:this.scaleY;e.matrix.a=(n*s+r*c)*h,e.matrix.c=(n*u+r*l)*h,e.matrix.b=(i*s+o*c)*f,e.matrix.d=(i*u+o*l)*f;for(var p=this._updateCache,d=0,y=p.length;d<y;d++){var m=p[d];m!=e&&m.update()}},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].setToSetupPose();var r=this.ikConstraints;for(e=0,n=r.length;e<n;e++){(s=r[e]).mix=s.data.mix,s.softness=s.data.softness,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch}var i=this.transformConstraints;for(e=0,n=i.length;e<n;e++){var o=(s=i[e]).data;s.mixRotate=o.mixRotate,s.mixX=o.mixX,s.mixY=o.mixY,s.mixScaleX=o.mixScaleX,s.mixScaleY=o.mixScaleY,s.mixShearY=o.mixShearY}var a=this.pathConstraints;for(e=0,n=a.length;e<n;e++){var s;o=(s=a[e]).data;s.position=o.position,s.spacing=o.spacing,s.mixRotate=o.mixRotate,s.mixX=o.mixX,s.mixY=o.mixY}},t.prototype.setSlotsToSetupPose=function(){var t=this.slots;G.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,n=t.length;e<n;e++)t[e].setToSetupPose()},t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},t.prototype.findBone=function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findBoneIndex=function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++)if(e[n].data.name==t)return n;return-1},t.prototype.findSlot=function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findSlotIndex=function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++)if(e[n].data.name==t)return n;return-1},t.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)},t.prototype.setSkin=function(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n],o=i.data.attachmentName;if(o){var a=t.getAttachment(n,o);a&&i.setAttachment(a)}}this.skin=t,this.updateCache()}},t.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},t.prototype.getAttachment=function(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){var n=this.skin.getAttachment(t,e);if(n)return n}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},t.prototype.setAttachment=function(t,e){if(!t)throw new Error("slotName cannot be null.");for(var n=this.slots,r=0,i=n.length;r<i;r++){var o=n[r];if(o.data.name==t){var a=null;if(e&&!(a=this.getAttachment(r,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void o.setAttachment(a)}}throw new Error("Slot not found: "+t)},t.prototype.findIkConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findTransformConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.findPathConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.data.name==t)return i}return null},t.prototype.getBounds=function(t,e,n){if(void 0===n&&(n=new Array(2)),!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");for(var r=this.drawOrder,i=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY,u=0,c=r.length;u<c;u++){var l=r[u];if(l.bone.active){var h=0,f=null,p=l.getAttachment();if(p instanceof xn)h=8,f=G.setArraySize(n,h,0),p.computeWorldVertices(l.bone,f,0,2);else if(p instanceof En){var d=p;h=d.worldVerticesLength,f=G.setArraySize(n,h,0),d.computeWorldVertices(l,0,h,f,0,2)}if(f)for(var y=0,m=f.length;y<m;y+=2){var v=f[y],_=f[y+1];i=Math.min(i,v),o=Math.min(o,_),a=Math.max(a,v),s=Math.max(s,_)}}}t.set(i,o),e.set(a-i,s-o)},t.prototype.update=function(t){this.time+=t},Object.defineProperty(t.prototype,"flipX",{get:function(){return-1==this.scaleX},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=e?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flipY",{get:function(){return-1==this.scaleY},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=e?1:-1},enumerable:!1,configurable:!0}),t.deprecatedWarning1=!1,t}(),qr=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findBoneIndex=function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},t.prototype.findSlot=function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findSlotIndex=function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},t.prototype.findSkin=function(t){if(!t)throw new Error("skinName cannot be null.");for(var e=this.skins,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findEvent=function(t){if(!t)throw new Error("eventDataName cannot be null.");for(var e=this.events,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findAnimation=function(t){if(!t)throw new Error("animationName cannot be null.");for(var e=this.animations,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findIkConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findTransformConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findPathConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++){var i=e[n];if(i.name==t)return i}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,n=0,r=e.length;n<r;n++)if(e[n].name==t)return n;return-1},t}(),Kr=function(t,e,n){if(this.color=new B(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!n)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=n},Zr=function(t){function e(e){var n=t.call(this,e,0,!1)||this;return n.bones=new Array,n.mixRotate=0,n.mixX=0,n.mixY=0,n.mixScaleX=0,n.mixScaleY=0,n.mixShearY=0,n.offsetRotation=0,n.offsetX=0,n.offsetY=0,n.offsetScaleX=0,n.offsetScaleY=0,n.offsetShearY=0,n.relative=!1,n.local=!1,n}return yn(e,t),e}(Br),$r=function(t,e,n){this.slotIndex=t,this.name=e,this.attachment=n},Jr=function(){function t(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t}return t.prototype.setAttachment=function(t,e,n){if(!n)throw new Error("attachment cannot be null.");var r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=n},t.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],r=!1,i=0;i<this.bones.length;i++)if(this.bones[i]==n){r=!0;break}r||this.bones.push(n)}for(e=0;e<t.constraints.length;e++){var o=t.constraints[e];for(r=!1,i=0;i<this.constraints.length;i++)if(this.constraints[i]==o){r=!0;break}r||this.constraints.push(o)}var a=t.getAttachments();for(e=0;e<a.length;e++){var s=a[e];this.setAttachment(s.slotIndex,s.name,s.attachment)}},t.prototype.copySkin=function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],r=!1,i=0;i<this.bones.length;i++)if(this.bones[i]==n){r=!0;break}r||this.bones.push(n)}for(e=0;e<t.constraints.length;e++){var o=t.constraints[e];for(r=!1,i=0;i<this.constraints.length;i++)if(this.constraints[i]==o){r=!0;break}r||this.constraints.push(o)}var a=t.getAttachments();for(e=0;e<a.length;e++){var s=a[e];s.attachment&&(s.attachment instanceof En?(s.attachment=s.attachment.newLinkedMesh(),this.setAttachment(s.slotIndex,s.name,s.attachment)):(s.attachment=s.attachment.copy(),this.setAttachment(s.slotIndex,s.name,s.attachment)))}},t.prototype.getAttachment=function(t,e){var n=this.attachments[t];return n?n[e]:null},t.prototype.removeAttachment=function(t,e){var n=this.attachments[t];n&&(n[e]=null)},t.prototype.getAttachments=function(){for(var t=new Array,e=0;e<this.attachments.length;e++){var n=this.attachments[e];if(n)for(var r in n){var i=n[r];i&&t.push(new $r(e,r,i))}}return t},t.prototype.getAttachmentsForSlot=function(t,e){var n=this.attachments[t];if(n)for(var r in n){var i=n[r];i&&e.push(new $r(t,r,i))}},t.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},t.prototype.attachAll=function(t,e){for(var n=0,r=0;r<t.slots.length;r++){var i=t.slots[r],o=i.getAttachment();if(o&&n<e.attachments.length){var a=e.attachments[n];for(var s in a){if(o==a[s]){var u=this.getAttachment(n,s);u&&i.setAttachment(u);break}}}n++}},t}(),Qr=function(){function t(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return t.prototype.readSkeletonData=function(e){var n=this.scale,r=new qr;r.name="";var i=new E(e),o=i.readInt32(),a=i.readInt32();if(r.hash=0==a&&0==o?null:a.toString(16)+o.toString(16),r.version=i.readString(),"4.0"!==r.version.substr(0,3)){var s="Spine 4.0 loader cant load version "+r.version+". Please configure your pixi-spine bundle";console.error(s)}r.x=i.readFloat(),r.y=i.readFloat(),r.width=i.readFloat(),r.height=i.readFloat();var u=i.readBoolean();u&&(r.fps=i.readFloat(),r.imagesPath=i.readString(),r.audioPath=i.readString());var c=0;c=i.readInt(!0);for(var l=0;l<c;l++)i.strings.push(i.readString());c=i.readInt(!0);for(l=0;l<c;l++){var h=i.readString(),f=0==l?null:r.bones[i.readInt(!0)];(y=new Lr(l,h,f)).rotation=i.readFloat(),y.x=i.readFloat()*n,y.y=i.readFloat()*n,y.scaleX=i.readFloat(),y.scaleY=i.readFloat(),y.shearX=i.readFloat(),y.shearY=i.readFloat(),y.length=i.readFloat()*n,y.transformMode=i.readInt(!0),y.skinRequired=i.readBoolean(),u&&B.rgba8888ToColor(y.color,i.readInt32()),r.bones.push(y)}c=i.readInt(!0);for(l=0;l<c;l++){var p=i.readString(),d=r.bones[i.readInt(!0)],y=new Kr(l,p,d);B.rgba8888ToColor(y.color,i.readInt32());var m=i.readInt32();-1!=m&&B.rgb888ToColor(y.darkColor=new B,m),y.attachmentName=i.readStringRef(),y.blendMode=t.BlendModeValues[i.readInt(!0)],r.slots.push(y)}c=i.readInt(!0);l=0;for(var v=void 0;l<c;l++){(y=new Hr(i.readString())).order=i.readInt(!0),y.skinRequired=i.readBoolean(),v=i.readInt(!0);for(var g=0;g<v;g++)y.bones.push(r.bones[i.readInt(!0)]);y.target=r.bones[i.readInt(!0)],y.mix=i.readFloat(),y.softness=i.readFloat()*n,y.bendDirection=i.readByte(),y.compress=i.readBoolean(),y.stretch=i.readBoolean(),y.uniform=i.readBoolean(),r.ikConstraints.push(y)}c=i.readInt(!0);for(l=0,v=void 0;l<c;l++){(y=new Zr(i.readString())).order=i.readInt(!0),y.skinRequired=i.readBoolean(),v=i.readInt(!0);for(g=0;g<v;g++)y.bones.push(r.bones[i.readInt(!0)]);y.target=r.bones[i.readInt(!0)],y.local=i.readBoolean(),y.relative=i.readBoolean(),y.offsetRotation=i.readFloat(),y.offsetX=i.readFloat()*n,y.offsetY=i.readFloat()*n,y.offsetScaleX=i.readFloat(),y.offsetScaleY=i.readFloat(),y.offsetShearY=i.readFloat(),y.mixRotate=i.readFloat(),y.mixX=i.readFloat(),y.mixY=i.readFloat(),y.mixScaleX=i.readFloat(),y.mixScaleY=i.readFloat(),y.mixShearY=i.readFloat(),r.transformConstraints.push(y)}c=i.readInt(!0);for(l=0,v=void 0;l<c;l++){(y=new Vr(i.readString())).order=i.readInt(!0),y.skinRequired=i.readBoolean(),v=i.readInt(!0);for(g=0;g<v;g++)y.bones.push(r.bones[i.readInt(!0)]);y.target=r.slots[i.readInt(!0)],y.positionMode=i.readInt(!0),y.spacingMode=i.readInt(!0),y.rotateMode=i.readInt(!0),y.offsetRotation=i.readFloat(),y.position=i.readFloat(),y.positionMode==_.Fixed&&(y.position*=n),y.spacing=i.readFloat(),y.spacingMode!=xr.Length&&y.spacingMode!=xr.Fixed||(y.spacing*=n),y.mixRotate=i.readFloat(),y.mixX=i.readFloat(),y.mixY=i.readFloat(),r.pathConstraints.push(y)}var b=this.readSkin(i,r,!0,u);b&&(r.defaultSkin=b,r.skins.push(b));l=r.skins.length;for(G.setArraySize(r.skins,c=l+i.readInt(!0));l<c;l++)r.skins[l]=this.readSkin(i,r,!1,u);c=this.linkedMeshes.length;for(l=0;l<c;l++){var T=this.linkedMeshes[l],w=(T.skin?r.findSkin(T.skin):r.defaultSkin).getAttachment(T.slotIndex,T.parent);T.mesh.deformAttachment=T.inheritDeform?w:T.mesh,T.mesh.setParentMesh(w)}this.linkedMeshes.length=0,c=i.readInt(!0);for(l=0;l<c;l++){(y=new Ur(i.readStringRef())).intValue=i.readInt(!1),y.floatValue=i.readFloat(),y.stringValue=i.readString(),y.audioPath=i.readString(),y.audioPath&&(y.volume=i.readFloat(),y.balance=i.readFloat()),r.events.push(y)}c=i.readInt(!0);for(l=0;l<c;l++)r.animations.push(this.readAnimation(i,i.readString(),r));return r},t.prototype.readSkin=function(t,e,n,r){var i=null,o=0;if(n){if(0==(o=t.readInt(!0)))return null;i=new Jr("default")}else{(i=new Jr(t.readStringRef())).bones.length=t.readInt(!0);for(var a=0,s=i.bones.length;a<s;a++)i.bones[a]=e.bones[t.readInt(!0)];for(a=0,s=t.readInt(!0);a<s;a++)i.constraints.push(e.ikConstraints[t.readInt(!0)]);for(a=0,s=t.readInt(!0);a<s;a++)i.constraints.push(e.transformConstraints[t.readInt(!0)]);for(a=0,s=t.readInt(!0);a<s;a++)i.constraints.push(e.pathConstraints[t.readInt(!0)]);o=t.readInt(!0)}for(a=0;a<o;a++)for(var u=t.readInt(!0),c=0,l=t.readInt(!0);c<l;c++){var h=t.readStringRef(),f=this.readAttachment(t,e,i,u,h,r);f&&i.setAttachment(u,h,f)}return i},t.prototype.readAttachment=function(t,e,n,r,i,o){var s=this.scale,u=t.readStringRef();switch(u||(u=i),t.readByte()){case a.Region:var c=t.readStringRef(),l=t.readFloat(),h=t.readFloat(),f=t.readFloat(),p=t.readFloat(),d=t.readFloat(),y=t.readFloat(),m=t.readFloat(),v=t.readInt32();c||(c=u);var _=this.attachmentLoader.newRegionAttachment(n,u,c);return _?(_.path=c,_.x=h*s,_.y=f*s,_.scaleX=p,_.scaleY=d,_.rotation=l,_.width=y*s,_.height=m*s,B.rgba8888ToColor(_.color,v),_):null;case a.BoundingBox:var g=t.readInt(!0),b=this.readVertices(t,g),E=(v=o?t.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(n,u));return E?(E.worldVerticesLength=g<<1,E.vertices=b.vertices,E.bones=b.bones,o&&B.rgba8888ToColor(E.color,v),E):null;case a.Mesh:c=t.readStringRef(),v=t.readInt32(),g=t.readInt(!0);var T=this.readFloatArray(t,g<<1,1),w=this.readShortArray(t),x=(b=this.readVertices(t,g),t.readInt(!0)),S=null;y=0,m=0;return o&&(S=this.readShortArray(t),y=t.readFloat(),m=t.readFloat()),c||(c=u),(O=this.attachmentLoader.newMeshAttachment(n,u,c))?(O.path=c,B.rgba8888ToColor(O.color,v),O.bones=b.bones,O.vertices=b.vertices,O.worldVerticesLength=g<<1,O.triangles=w,O.regionUVs=new Float32Array(T),O.hullLength=x<<1,o&&(O.edges=S,O.width=y*s,O.height=m*s),O):null;case a.LinkedMesh:c=t.readStringRef(),v=t.readInt32();var O,P=t.readStringRef(),R=t.readStringRef(),A=t.readBoolean();y=0,m=0;return o&&(y=t.readFloat(),m=t.readFloat()),c||(c=u),(O=this.attachmentLoader.newMeshAttachment(n,u,c))?(O.path=c,B.rgba8888ToColor(O.color,v),o&&(O.width=y*s,O.height=m*s),this.linkedMeshes.push(new ti(O,P,r,R,A)),O):null;case a.Path:for(var I=t.readBoolean(),C=t.readBoolean(),k=(g=t.readInt(!0),b=this.readVertices(t,g),G.newArray(g/3,0)),N=0,M=k.length;N<M;N++)k[N]=t.readFloat()*s;v=o?t.readInt32():0;return(c=this.attachmentLoader.newPathAttachment(n,u))?(c.closed=I,c.constantSpeed=C,c.worldVerticesLength=g<<1,c.vertices=b.vertices,c.bones=b.bones,c.lengths=k,o&&B.rgba8888ToColor(c.color,v),c):null;case a.Point:l=t.readFloat(),h=t.readFloat(),f=t.readFloat(),v=o?t.readInt32():0;var j=this.attachmentLoader.newPointAttachment(n,u);return j?(j.x=h*s,j.y=f*s,j.rotation=l,o&&B.rgba8888ToColor(j.color,v),j):null;case a.Clipping:var D=t.readInt(!0),L=(g=t.readInt(!0),b=this.readVertices(t,g),v=o?t.readInt32():0,this.attachmentLoader.newClippingAttachment(n,u));return L?(L.endSlot=e.slots[D],L.worldVerticesLength=g<<1,L.vertices=b.vertices,L.bones=b.bones,o&&B.rgba8888ToColor(L.color,v),L):null}return null},t.prototype.readVertices=function(t,e){var n=this.scale,r=e<<1,i=new ei;if(!t.readBoolean())return i.vertices=this.readFloatArray(t,r,n),i;for(var o=new Array,a=new Array,s=0;s<e;s++){var u=t.readInt(!0);a.push(u);for(var c=0;c<u;c++)a.push(t.readInt(!0)),o.push(t.readFloat()*n),o.push(t.readFloat()*n),o.push(t.readFloat())}return i.vertices=G.toFloatArray(o),i.bones=a,i},t.prototype.readFloatArray=function(t,e,n){var r=new Array(e);if(1==n)for(var i=0;i<e;i++)r[i]=t.readFloat();else for(i=0;i<e;i++)r[i]=t.readFloat()*n;return r},t.prototype.readShortArray=function(t){for(var e=t.readInt(!0),n=new Array(e),r=0;r<e;r++)n[r]=t.readShort();return n},t.prototype.readAnimation=function(t,e,n){t.readInt(!0);for(var r=new Array,i=this.scale,o=0,a=t.readInt(!0);o<a;o++)for(var s=t.readInt(!0),u=0,c=t.readInt(!0);u<c;u++){var l=t.readByte(),h=(D=t.readInt(!0))-1;switch(l){case yi:for(var f=new fr(D,s),p=0;p<D;p++)f.setFrame(p,t.readFloat(),t.readStringRef());r.push(f);break;case mi:for(var d=t.readInt(!0),y=(f=new sr(D,d,s),t.readFloat()),m=t.readUnsignedByte()/255,v=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,E=(p=0,0);f.setFrame(p,y,m,v,g,b),p!=h;p++){var T=t.readFloat(),w=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255,O=t.readUnsignedByte()/255;switch(t.readByte()){case xi:f.setStepped(p);break;case Si:ii(t,f,E++,p,0,y,T,m,w,1),ii(t,f,E++,p,1,y,T,v,x,1),ii(t,f,E++,p,2,y,T,g,S,1),ii(t,f,E++,p,3,y,T,b,O,1)}y=T,m=w,v=x,g=S,b=O}r.push(f);break;case vi:for(d=t.readInt(!0),f=new ur(D,d,s),y=t.readFloat(),m=t.readUnsignedByte()/255,v=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,p=0,E=0;f.setFrame(p,y,m,v,g),p!=h;p++){T=t.readFloat(),w=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255;switch(t.readByte()){case xi:f.setStepped(p);break;case Si:ii(t,f,E++,p,0,y,T,m,w,1),ii(t,f,E++,p,1,y,T,v,x,1),ii(t,f,E++,p,2,y,T,g,S,1)}y=T,m=w,v=x,g=S}r.push(f);break;case _i:for(d=t.readInt(!0),f=new lr(D,d,s),y=t.readFloat(),m=t.readUnsignedByte()/255,v=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255,p=0,E=0;f.setFrame(p,y,m,v,g,b,w,x,S),p!=h;p++){T=t.readFloat();var P=t.readUnsignedByte()/255,R=t.readUnsignedByte()/255,A=t.readUnsignedByte()/255,I=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,k=t.readUnsignedByte()/255,N=t.readUnsignedByte()/255;switch(t.readByte()){case xi:f.setStepped(p);break;case Si:ii(t,f,E++,p,0,y,T,m,P,1),ii(t,f,E++,p,1,y,T,v,R,1),ii(t,f,E++,p,2,y,T,g,A,1),ii(t,f,E++,p,3,y,T,b,I,1),ii(t,f,E++,p,4,y,T,w,C,1),ii(t,f,E++,p,5,y,T,x,k,1),ii(t,f,E++,p,6,y,T,S,N,1)}y=T,m=P,v=R,g=A,b=I,w=C,x=k,S=N}r.push(f);break;case gi:for(d=t.readInt(!0),f=new hr(D,d,s),y=t.readFloat(),m=t.readUnsignedByte()/255,v=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,x=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255,p=0,E=0;f.setFrame(p,y,m,v,g,w,x,S),p!=h;p++){T=t.readFloat(),P=t.readUnsignedByte()/255,R=t.readUnsignedByte()/255,A=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,k=t.readUnsignedByte()/255,N=t.readUnsignedByte()/255;switch(t.readByte()){case xi:f.setStepped(p);break;case Si:ii(t,f,E++,p,0,y,T,m,P,1),ii(t,f,E++,p,1,y,T,v,R,1),ii(t,f,E++,p,2,y,T,g,A,1),ii(t,f,E++,p,3,y,T,w,C,1),ii(t,f,E++,p,4,y,T,x,k,1),ii(t,f,E++,p,5,y,T,S,N,1)}y=T,m=P,v=R,g=A,w=C,x=k,S=N}r.push(f);break;case bi:for(f=new cr(D,t.readInt(!0),s),y=t.readFloat(),b=t.readUnsignedByte()/255,p=0,E=0;f.setFrame(p,y,b),p!=h;p++){T=t.readFloat(),O=t.readUnsignedByte()/255;switch(t.readByte()){case xi:f.setStepped(p);break;case Si:ii(t,f,E++,p,0,y,T,b,O,1)}y=T,b=O}r.push(f)}}for(o=0,a=t.readInt(!0);o<a;o++){var M=t.readInt(!0);for(u=0,c=t.readInt(!0);u<c;u++){var j=t.readByte(),D=t.readInt(!0);d=t.readInt(!0);switch(j){case oi:r.push(ni(t,new $n(D,d,M),1));break;case ai:r.push(ri(t,new Jn(D,d,M),i));break;case si:r.push(ni(t,new Qn(D,d,M),i));break;case ui:r.push(ni(t,new tr(D,d,M),i));break;case ci:r.push(ri(t,new er(D,d,M),1));break;case li:r.push(ni(t,new nr(D,d,M),1));break;case hi:r.push(ni(t,new rr(D,d,M),1));break;case fi:r.push(ri(t,new ir(D,d,M),1));break;case pi:r.push(ni(t,new or(D,d,M),1));break;case di:r.push(ni(t,new ar(D,d,M),1))}}}for(o=0,a=t.readInt(!0);o<a;o++){var L=t.readInt(!0),B=(h=(D=t.readInt(!0))-1,f=new mr(D,t.readInt(!0),L),y=t.readFloat(),t.readFloat()),F=t.readFloat()*i;for(p=0,E=0;f.setFrame(p,y,B,F,t.readByte(),t.readBoolean(),t.readBoolean()),p!=h;p++){T=t.readFloat();var U=t.readFloat(),H=t.readFloat()*i;switch(t.readByte()){case xi:f.setStepped(p);break;case Si:ii(t,f,E++,p,0,y,T,B,U,1),ii(t,f,E++,p,1,y,T,F,H,i)}y=T,B=U,F=H}r.push(f)}for(o=0,a=t.readInt(!0);o<a;o++){L=t.readInt(!0),h=(D=t.readInt(!0))-1,f=new vr(D,t.readInt(!0),L),y=t.readFloat();var V=t.readFloat(),X=t.readFloat(),W=t.readFloat(),Y=t.readFloat(),z=t.readFloat(),q=t.readFloat();for(p=0,E=0;f.setFrame(p,y,V,X,W,Y,z,q),p!=h;p++){T=t.readFloat();var K=t.readFloat(),Z=t.readFloat(),$=t.readFloat(),J=t.readFloat(),Q=t.readFloat(),tt=t.readFloat();switch(t.readByte()){case xi:f.setStepped(p);break;case Si:ii(t,f,E++,p,0,y,T,V,K,1),ii(t,f,E++,p,1,y,T,X,Z,1),ii(t,f,E++,p,2,y,T,W,$,1),ii(t,f,E++,p,3,y,T,Y,J,1),ii(t,f,E++,p,4,y,T,z,Q,1),ii(t,f,E++,p,5,y,T,q,tt,1)}y=T,V=K,X=Z,W=$,Y=J,z=Q,q=tt}r.push(f)}for(o=0,a=t.readInt(!0);o<a;o++){L=t.readInt(!0);var et=n.pathConstraints[L];for(u=0,c=t.readInt(!0);u<c;u++)switch(t.readByte()){case Ei:r.push(ni(t,new _r(t.readInt(!0),t.readInt(!0),L),et.positionMode==_.Fixed?i:1));break;case Ti:r.push(ni(t,new gr(t.readInt(!0),t.readInt(!0),L),et.spacingMode==xr.Length||et.spacingMode==xr.Fixed?i:1));break;case wi:for(f=new br(t.readInt(!0),t.readInt(!0),L),y=t.readFloat(),V=t.readFloat(),X=t.readFloat(),W=t.readFloat(),p=0,E=0,h=f.getFrameCount()-1;f.setFrame(p,y,V,X,W),p!=h;p++){T=t.readFloat(),K=t.readFloat(),Z=t.readFloat(),$=t.readFloat();switch(t.readByte()){case xi:f.setStepped(p);break;case Si:ii(t,f,E++,p,0,y,T,V,K,1),ii(t,f,E++,p,1,y,T,X,Z,1),ii(t,f,E++,p,2,y,T,W,$,1)}y=T,V=K,X=Z,W=$}r.push(f)}}for(o=0,a=t.readInt(!0);o<a;o++){var nt=n.skins[t.readInt(!0)];for(u=0,c=t.readInt(!0);u<c;u++){s=t.readInt(!0);for(var rt=0,it=t.readInt(!0);rt<it;rt++){var ot=t.readStringRef(),at=nt.getAttachment(s,ot),st=at.bones,ut=at.vertices,ct=st?ut.length/3*2:ut.length;for(h=(D=t.readInt(!0))-1,d=t.readInt(!0),f=new pr(D,d,s,at),y=t.readFloat(),p=0,E=0;;p++){var lt=void 0,ht=t.readInt(!0);if(0==ht)lt=st?G.newFloatArray(ct):ut;else{lt=G.newFloatArray(ct);var ft=t.readInt(!0);if(ht+=ft,1==i)for(var pt=ft;pt<ht;pt++)lt[pt]=t.readFloat();else for(pt=ft;pt<ht;pt++)lt[pt]=t.readFloat()*i;if(!st){pt=0;for(var dt=lt.length;pt<dt;pt++)lt[pt]+=ut[pt]}}if(f.setFrame(p,y,lt),p==h)break;T=t.readFloat();switch(t.readByte()){case xi:f.setStepped(p);break;case Si:ii(t,f,E++,p,0,y,T,0,1,1)}y=T}r.push(f)}}}var yt=t.readInt(!0);if(yt>0){f=new yr(yt);var mt=n.slots.length;for(o=0;o<yt;o++){y=t.readFloat();var vt=t.readInt(!0),_t=G.newArray(mt,0);for(u=mt-1;u>=0;u--)_t[u]=-1;var gt=G.newArray(mt-vt,0),bt=0,Et=0;for(u=0;u<vt;u++){for(s=t.readInt(!0);bt!=s;)gt[Et++]=bt++;_t[bt+t.readInt(!0)]=bt++}for(;bt<mt;)gt[Et++]=bt++;for(u=mt-1;u>=0;u--)-1==_t[u]&&(_t[u]=gt[--Et]);f.setFrame(o,y,_t)}r.push(f)}var Tt=t.readInt(!0);if(Tt>0){for(f=new dr(Tt),o=0;o<Tt;o++){y=t.readFloat();var wt=n.events[t.readInt(!0)],xt=new Fr(y,wt);xt.intValue=t.readInt(!1),xt.floatValue=t.readFloat(),xt.stringValue=t.readBoolean()?t.readString():wt.stringValue,xt.data.audioPath&&(xt.volume=t.readFloat(),xt.balance=t.readFloat()),f.setFrame(o,xt)}r.push(f)}var St=0;for(o=0,a=r.length;o<a;o++)St=Math.max(St,r[o].getDuration());return new Pn(e,r,St)},t.BlendModeValues=[c.b.NORMAL,c.b.ADD,c.b.MULTIPLY,c.b.SCREEN],t}(),ti=function(t,e,n,r,i){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=r,this.inheritDeform=i},ei=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.bones=t,this.vertices=e};function ni(t,e,n){for(var r=t.readFloat(),i=t.readFloat()*n,o=0,a=0,s=e.getFrameCount()-1;e.setFrame(o,r,i),o!=s;o++){var u=t.readFloat(),c=t.readFloat()*n;switch(t.readByte()){case xi:e.setStepped(o);break;case Si:ii(t,e,a++,o,0,r,u,i,c,n)}r=u,i=c}return e}function ri(t,e,n){for(var r=t.readFloat(),i=t.readFloat()*n,o=t.readFloat()*n,a=0,s=0,u=e.getFrameCount()-1;e.setFrame(a,r,i,o),a!=u;a++){var c=t.readFloat(),l=t.readFloat()*n,h=t.readFloat()*n;switch(t.readByte()){case xi:e.setStepped(a);break;case Si:ii(t,e,s++,a,0,r,c,i,l,n),ii(t,e,s++,a,1,r,c,o,h,n)}r=c,i=l,o=h}return e}function ii(t,e,n,r,i,o,a,s,u,c){e.setBezier(n,r,i,o,s,t.readFloat(),t.readFloat()*c,t.readFloat(),t.readFloat()*c,a,u)}var oi=0,ai=1,si=2,ui=3,ci=4,li=5,hi=6,fi=7,pi=8,di=9,yi=0,mi=1,vi=2,_i=3,gi=4,bi=5,Ei=0,Ti=1,wi=2,xi=1,Si=2,Oi=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new H((function(){return G.newFloatArray(16)}))}return t.prototype.update=function(t,e){if(null==t)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,r=this.polygons,i=this.polygonPool,o=t.slots,a=o.length;n.length=0,i.freeAll(r),r.length=0;for(var s=0;s<a;s++){var u=o[s];if(u.bone.active){var c=u.getAttachment();if(c instanceof gn){var l=c;n.push(l);var h=i.obtain();h.length!=l.worldVerticesLength&&(h=G.newFloatArray(l.worldVerticesLength)),r.push(h),l.computeWorldVertices(u,0,l.worldVerticesLength,h,0,2)}}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},t.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,i=this.polygons,o=0,a=i.length;o<a;o++)for(var s=i[o],u=s,c=0,l=s.length;c<l;c+=2){var h=u[c],f=u[c+1];t=Math.min(t,h),e=Math.min(e,f),n=Math.max(n,h),r=Math.max(r,f)}this.minX=t,this.minY=e,this.maxX=n,this.maxY=r},t.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},t.prototype.aabbIntersectsSegment=function(t,e,n,r){var i=this.minX,o=this.minY,a=this.maxX,s=this.maxY;if(t<=i&&n<=i||e<=o&&r<=o||t>=a&&n>=a||e>=s&&r>=s)return!1;var u=(r-e)/(n-t),c=u*(i-t)+e;if(c>o&&c<s)return!0;if((c=u*(a-t)+e)>o&&c<s)return!0;var l=(o-e)/u+t;return l>i&&l<a||(l=(s-e)/u+t)>i&&l<a},t.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},t.prototype.containsPoint=function(t,e){for(var n=this.polygons,r=0,i=n.length;r<i;r++)if(this.containsPointPolygon(n[r],t,e))return this.boundingBoxes[r];return null},t.prototype.containsPointPolygon=function(t,e,n){for(var r=t,i=t.length,o=i-2,a=!1,s=0;s<i;s+=2){var u=r[s+1],c=r[o+1];if(u<n&&c>=n||c<n&&u>=n){var l=r[s];l+(n-u)/(c-u)*(r[o]-l)<e&&(a=!a)}o=s}return a},t.prototype.intersectsSegment=function(t,e,n,r){for(var i=this.polygons,o=0,a=i.length;o<a;o++)if(this.intersectsSegmentPolygon(i[o],t,e,n,r))return this.boundingBoxes[o];return null},t.prototype.intersectsSegmentPolygon=function(t,e,n,r,i){for(var o=t,a=t.length,s=e-r,u=n-i,c=e*i-n*r,l=o[a-2],h=o[a-1],f=0;f<a;f+=2){var p=o[f],d=o[f+1],y=l*d-h*p,m=l-p,v=h-d,_=s*v-u*m,g=(c*m-s*y)/_;if((g>=l&&g<=p||g>=p&&g<=l)&&(g>=e&&g<=r||g>=r&&g<=e)){var b=(c*v-u*y)/_;if((b>=h&&b<=d||b>=d&&b<=h)&&(b>=n&&b<=i||b>=i&&b<=n))return!0}l=p,h=d}return!1},t.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},t}(),Pi=function(){function t(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return t.prototype.readSkeletonData=function(e){var n=this.scale,r=new qr,i="string"==typeof e?JSON.parse(e):e,o=i.skeleton;if(o){if(r.hash=o.hash,r.version=o.spine,"4.0"!==r.version.substr(0,3)){var a="Spine 4.0 loader cant load version "+o.spine+". Please configure your pixi-spine bundle";console.error(a)}r.x=o.x,r.y=o.y,r.width=o.width,r.height=o.height,r.fps=o.fps,r.imagesPath=o.images}if(i.bones)for(var s=0;s<i.bones.length;s++){var u=i.bones[s],c=null,l=ki(u,"parent",null);if(null!=l&&null==(c=r.findBone(l)))throw new Error("Parent bone not found: "+l);(y=new Lr(r.bones.length,u.name,c)).length=ki(u,"length",0)*n,y.x=ki(u,"x",0)*n,y.y=ki(u,"y",0)*n,y.rotation=ki(u,"rotation",0),y.scaleX=ki(u,"scaleX",1),y.scaleY=ki(u,"scaleY",1),y.shearX=ki(u,"shearX",0),y.shearY=ki(u,"shearY",0),y.transformMode=G.enumValue(b,ki(u,"transform","Normal")),y.skinRequired=ki(u,"skin",!1),(d=ki(u,"color",null))&&y.color.setFromString(d),r.bones.push(y)}if(i.slots)for(s=0;s<i.slots.length;s++){var h=(R=i.slots[s]).name,f=R.bone,p=r.findBone(f);if(null==p)throw new Error("Slot bone not found: "+f);var d,y=new Kr(r.slots.length,h,p);(d=ki(R,"color",null))&&y.color.setFromString(d);var m=ki(R,"dark",null);m&&(y.darkColor=B.fromString(m)),y.attachmentName=ki(R,"attachment",null),y.blendMode=t.blendModeFromString(ki(R,"blend","normal")),r.slots.push(y)}if(i.ik)for(s=0;s<i.ik.length;s++){var v=i.ik[s];(y=new Hr(v.name)).order=ki(v,"order",0),y.skinRequired=ki(v,"skin",!1);for(var E=0;E<v.bones.length;E++){f=v.bones[E];if(null==(S=r.findBone(f)))throw new Error("IK bone not found: "+f);y.bones.push(S)}y.target=r.findBone(v.target),y.mix=ki(v,"mix",1),y.softness=ki(v,"softness",0)*n,y.bendDirection=ki(v,"bendPositive",!0)?1:-1,y.compress=ki(v,"compress",!1),y.stretch=ki(v,"stretch",!1),y.uniform=ki(v,"uniform",!1),r.ikConstraints.push(y)}if(i.transform)for(s=0;s<i.transform.length;s++){v=i.transform[s];(y=new Zr(v.name)).order=ki(v,"order",0),y.skinRequired=ki(v,"skin",!1);for(E=0;E<v.bones.length;E++){f=v.bones[E];if(null==(S=r.findBone(f)))throw new Error("Transform constraint bone not found: "+f);y.bones.push(S)}var T=v.target;if(y.target=r.findBone(T),null==y.target)throw new Error("Transform constraint target bone not found: "+T);y.local=ki(v,"local",!1),y.relative=ki(v,"relative",!1),y.offsetRotation=ki(v,"rotation",0),y.offsetX=ki(v,"x",0)*n,y.offsetY=ki(v,"y",0)*n,y.offsetScaleX=ki(v,"scaleX",0),y.offsetScaleY=ki(v,"scaleY",0),y.offsetShearY=ki(v,"shearY",0),y.mixRotate=ki(v,"mixRotate",1),y.mixX=ki(v,"mixX",1),y.mixY=ki(v,"mixY",y.mixX),y.mixScaleX=ki(v,"mixScaleX",1),y.mixScaleY=ki(v,"mixScaleY",y.mixScaleX),y.mixShearY=ki(v,"mixShearY",1),r.transformConstraints.push(y)}if(i.path)for(s=0;s<i.path.length;s++){v=i.path[s];(y=new Vr(v.name)).order=ki(v,"order",0),y.skinRequired=ki(v,"skin",!1);for(E=0;E<v.bones.length;E++){f=v.bones[E];if(null==(S=r.findBone(f)))throw new Error("Transform constraint bone not found: "+f);y.bones.push(S)}T=v.target;if(y.target=r.findSlot(T),null==y.target)throw new Error("Path target slot not found: "+T);y.positionMode=G.enumValue(_,ki(v,"positionMode","Percent")),y.spacingMode=G.enumValue(xr,ki(v,"spacingMode","Length")),y.rotateMode=G.enumValue(g,ki(v,"rotateMode","Tangent")),y.offsetRotation=ki(v,"rotation",0),y.position=ki(v,"position",0),y.positionMode==_.Fixed&&(y.position*=n),y.spacing=ki(v,"spacing",0),y.spacingMode!=xr.Length&&y.spacingMode!=xr.Fixed||(y.spacing*=n),y.mixRotate=ki(v,"mixRotate",1),y.mixX=ki(v,"mixX",1),y.mixY=ki(v,"mixY",y.mixX),r.pathConstraints.push(y)}if(i.skins)for(s=0;s<i.skins.length;s++){var w=i.skins[s],x=new Jr(w.name);if(w.bones)for(E=0;E<w.bones.length;E++){var S;if(null==(S=r.findBone(w.bones[E])))throw new Error("Skin bone not found: "+w.bones[s]);x.bones.push(S)}if(w.ik)for(E=0;E<w.ik.length;E++){if(null==(O=r.findIkConstraint(w.ik[E])))throw new Error("Skin IK constraint not found: "+w.ik[s]);x.constraints.push(O)}if(w.transform)for(E=0;E<w.transform.length;E++){if(null==(O=r.findTransformConstraint(w.transform[E])))throw new Error("Skin transform constraint not found: "+w.transform[s]);x.constraints.push(O)}if(w.path)for(E=0;E<w.path.length;E++){var O;if(null==(O=r.findPathConstraint(w.path[E])))throw new Error("Skin path constraint not found: "+w.path[s]);x.constraints.push(O)}for(var h in w.attachments){var P=r.findSlot(h);if(null==P)throw new Error("Slot not found: "+h);var R=w.attachments[h];for(var A in R){var I=this.readAttachment(R[A],x,P.index,A,r);I&&x.setAttachment(P.index,A,I)}}r.skins.push(x),"default"==x.name&&(r.defaultSkin=x)}s=0;for(var C=this.linkedMeshes.length;s<C;s++){var k=this.linkedMeshes[s],N=(x=k.skin?r.findSkin(k.skin):r.defaultSkin).getAttachment(k.slotIndex,k.parent);k.mesh.deformAttachment=k.inheritDeform?N:k.mesh,k.mesh.setParentMesh(N)}if(this.linkedMeshes.length=0,i.events)for(var M in i.events){var j=i.events[M];(y=new Ur(M)).intValue=ki(j,"int",0),y.floatValue=ki(j,"float",0),y.stringValue=ki(j,"string",""),y.audioPath=ki(j,"audio",null),y.audioPath&&(y.volume=ki(j,"volume",1),y.balance=ki(j,"balance",0)),r.events.push(y)}if(i.animations)for(var D in i.animations){var L=i.animations[D];this.readAnimation(L,D,r)}return r},t.prototype.readAttachment=function(t,e,n,r,i){var o=this.scale;switch(r=ki(t,"name",r),ki(t,"type","region")){case"region":var a=ki(t,"path",r),s=this.attachmentLoader.newRegionAttachment(e,r,a);return s?(s.path=a,s.x=ki(t,"x",0)*o,s.y=ki(t,"y",0)*o,s.scaleX=ki(t,"scaleX",1),s.scaleY=ki(t,"scaleY",1),s.rotation=ki(t,"rotation",0),s.width=t.width*o,s.height=t.height*o,(g=ki(t,"color",null))&&s.color.setFromString(g),s):null;case"boundingbox":var u=this.attachmentLoader.newBoundingBoxAttachment(e,r);return u?(this.readVertices(t,u,t.vertexCount<<1),(g=ki(t,"color",null))&&u.color.setFromString(g),u):null;case"mesh":case"linkedmesh":a=ki(t,"path",r);var c=this.attachmentLoader.newMeshAttachment(e,r,a);if(!c)return null;c.path=a,(g=ki(t,"color",null))&&c.color.setFromString(g),c.width=ki(t,"width",0)*o,c.height=ki(t,"height",0)*o;var l=ki(t,"parent",null);if(l)return this.linkedMeshes.push(new Ri(c,ki(t,"skin",null),n,l,ki(t,"deform",!0))),c;var h=t.uvs;return this.readVertices(t,c,h.length),c.triangles=t.triangles,c.regionUVs=new Float32Array(h),c.edges=ki(t,"edges",null),c.hullLength=2*ki(t,"hull",0),c;case"path":if(!(a=this.attachmentLoader.newPathAttachment(e,r)))return null;a.closed=ki(t,"closed",!1),a.constantSpeed=ki(t,"constantSpeed",!0);var f=t.vertexCount;this.readVertices(t,a,f<<1);for(var p=G.newArray(f/3,0),d=0;d<t.lengths.length;d++)p[d]=t.lengths[d]*o;return a.lengths=p,(g=ki(t,"color",null))&&a.color.setFromString(g),a;case"point":var y=this.attachmentLoader.newPointAttachment(e,r);return y?(y.x=ki(t,"x",0)*o,y.y=ki(t,"y",0)*o,y.rotation=ki(t,"rotation",0),(g=ki(t,"color",null))&&y.color.setFromString(g),y):null;case"clipping":var m=this.attachmentLoader.newClippingAttachment(e,r);if(!m)return null;var v=ki(t,"end",null);if(null!=v){var _=i.findSlot(v);if(null==_)throw new Error("Clipping end slot not found: "+v);m.endSlot=_}var g;f=t.vertexCount;return this.readVertices(t,m,f<<1),(g=ki(t,"color",null))&&m.color.setFromString(g),m}return null},t.prototype.readVertices=function(t,e,n){var r=this.scale;e.worldVerticesLength=n;var i=t.vertices;if(n!=i.length){var o=new Array,a=new Array;for(l=0,h=i.length;l<h;){var s=i[l++];a.push(s);for(var u=l+4*s;l<u;l+=4)a.push(i[l]),o.push(i[l+1]*r),o.push(i[l+2]*r),o.push(i[l+3])}e.bones=a,e.vertices=G.toFloatArray(o)}else{var c=G.toFloatArray(i);if(1!=r)for(var l=0,h=i.length;l<h;l++)c[l]*=r;e.vertices=c}},t.prototype.readAnimation=function(t,e,n){var r=this.scale,i=new Array;if(t.slots)for(var o in t.slots){var a=t.slots[o];if(-1==(yt=n.findSlotIndex(o)))throw new Error("Slot not found: "+o);for(var s in a){if(q=a[s])if("attachment"==s){for(var u=new fr(q.length,yt),c=0;c<q.length;c++){var l=q[c];u.setFrame(c,ki(l,"time",0),l.name)}i.push(u)}else if("rgba"==s){u=new sr(q.length,q.length<<2,yt);for(var h=ki(l=q[0],"time",0),f=B.fromString(l.color),p=(c=0,0);;c++){if(u.setFrame(c,h,f.r,f.g,f.b,f.a),!(Q=q[c+1])){u.shrink(p);break}var d=ki(Q,"time",0),y=B.fromString(Q.color);(ot=l.curve)&&(p=Ci(ot,u,p,c,0,h,d,f.r,y.r,1),p=Ci(ot,u,p,c,1,h,d,f.g,y.g,1),p=Ci(ot,u,p,c,2,h,d,f.b,y.b,1),p=Ci(ot,u,p,c,3,h,d,f.a,y.a,1)),h=d,f=y,l=Q}i.push(u)}else if("rgb"==s){for(u=new ur(q.length,3*q.length,yt),h=ki(l=q[0],"time",0),f=B.fromString(l.color),c=0,p=0;;c++){if(u.setFrame(c,h,f.r,f.g,f.b),!(Q=q[c+1])){u.shrink(p);break}d=ki(Q,"time",0),y=B.fromString(Q.color);(ot=l.curve)&&(p=Ci(ot,u,p,c,0,h,d,f.r,y.r,1),p=Ci(ot,u,p,c,1,h,d,f.g,y.g,1),p=Ci(ot,u,p,c,2,h,d,f.b,y.b,1)),h=d,f=y,l=Q}i.push(u)}else if("alpha"==s)i.push(Ai(q,new cr(q.length,q.length,yt),0,1));else if("rgba2"==s){u=new lr(q.length,7*q.length,yt),h=ki(l=q[0],"time",0),f=B.fromString(l.light);var m=B.fromString(l.dark);for(c=0,p=0;;c++){if(u.setFrame(c,h,f.r,f.g,f.b,f.a,m.r,m.g,m.b),!(Q=q[c+1])){u.shrink(p);break}d=ki(Q,"time",0),y=B.fromString(Q.light);var v=B.fromString(Q.dark);(ot=l.curve)&&(p=Ci(ot,u,p,c,0,h,d,f.r,y.r,1),p=Ci(ot,u,p,c,1,h,d,f.g,y.g,1),p=Ci(ot,u,p,c,2,h,d,f.b,y.b,1),p=Ci(ot,u,p,c,3,h,d,f.a,y.a,1),p=Ci(ot,u,p,c,4,h,d,m.r,v.r,1),p=Ci(ot,u,p,c,5,h,d,m.g,v.g,1),p=Ci(ot,u,p,c,6,h,d,m.b,v.b,1)),h=d,f=y,m=v,l=Q}i.push(u)}else{if("rgb2"!=s)throw new Error("Invalid timeline type for a slot: "+s+" ("+o+")");for(u=new hr(q.length,6*q.length,yt),h=ki(l=q[0],"time",0),f=B.fromString(l.light),m=B.fromString(l.dark),c=0,p=0;;c++){if(u.setFrame(c,h,f.r,f.g,f.b,m.r,m.g,m.b),!(Q=q[c+1])){u.shrink(p);break}d=ki(Q,"time",0),y=B.fromString(Q.light),v=B.fromString(Q.dark);(ot=l.curve)&&(p=Ci(ot,u,p,c,0,h,d,f.r,y.r,1),p=Ci(ot,u,p,c,1,h,d,f.g,y.g,1),p=Ci(ot,u,p,c,2,h,d,f.b,y.b,1),p=Ci(ot,u,p,c,3,h,d,m.r,v.r,1),p=Ci(ot,u,p,c,4,h,d,m.g,v.g,1),p=Ci(ot,u,p,c,5,h,d,m.b,v.b,1)),h=d,f=y,m=v,l=Q}i.push(u)}}}if(t.bones)for(var g in t.bones){var b=t.bones[g],E=n.findBoneIndex(g);if(-1==E)throw new Error("Bone not found: "+g);for(var s in b){if(0!=(q=b[s]).length)if("rotate"===s)i.push(Ai(q,new $n(q.length,q.length,E),0,1));else if("translate"===s){u=new Jn(q.length,q.length<<1,E);i.push(Ii(q,u,"x","y",0,r))}else if("translatex"===s){u=new Qn(q.length,q.length,E);i.push(Ai(q,u,0,r))}else if("translatey"===s){u=new tr(q.length,q.length,E);i.push(Ai(q,u,0,r))}else if("scale"===s){u=new er(q.length,q.length<<1,E);i.push(Ii(q,u,"x","y",1,1))}else if("scalex"===s){u=new nr(q.length,q.length,E);i.push(Ai(q,u,1,1))}else if("scaley"===s){u=new rr(q.length,q.length,E);i.push(Ai(q,u,1,1))}else if("shear"===s){u=new ir(q.length,q.length<<1,E);i.push(Ii(q,u,"x","y",0,1))}else if("shearx"===s){u=new or(q.length,q.length,E);i.push(Ai(q,u,0,1))}else if("sheary"===s){u=new ar(q.length,q.length,E);i.push(Ai(q,u,0,1))}}}if(t.ik)for(var T in t.ik){if(l=(V=t.ik[T])[0]){var w=n.findIkConstraint(T),x=n.ikConstraints.indexOf(w),S=(u=new mr(V.length,V.length<<1,x),h=ki(l,"time",0),ki(l,"mix",1)),O=ki(l,"softness",0)*r;for(c=0,p=0;;c++){if(u.setFrame(c,h,S,O,ki(l,"bendPositive",!0)?1:-1,ki(l,"compress",!1),ki(l,"stretch",!1)),!(Q=V[c+1])){u.shrink(p);break}d=ki(Q,"time",0);var P=ki(Q,"mix",1),R=ki(Q,"softness",0)*r;(ot=l.curve)&&(p=Ci(ot,u,p,c,0,h,d,S,P,1),p=Ci(ot,u,p,c,1,h,d,O,R,r)),h=d,S=P,O=R,l=Q}i.push(u)}}if(t.transform)for(var T in t.transform){if(l=(q=t.transform[T])[0]){w=n.findTransformConstraint(T),x=n.transformConstraints.indexOf(w),u=new vr(q.length,q.length<<2,x),h=ki(l,"time",0);var A=ki(l,"mixRotate",1),I=ki(l,"mixX",1),C=ki(l,"mixY",I),k=ki(l,"mixScaleX",1),N=ki(l,"mixScaleY",k),M=ki(l,"mixShearY",1);for(c=0,p=0;;c++){if(u.setFrame(c,h,A,I,C,k,N,M),!(Q=q[c+1])){u.shrink(p);break}d=ki(Q,"time",0);var j=ki(Q,"mixRotate",1),D=ki(Q,"mixX",1),L=ki(Q,"mixY",D),F=ki(Q,"mixScaleX",1),U=ki(Q,"mixScaleY",F),H=ki(Q,"mixShearY",1);(ot=l.curve)&&(p=Ci(ot,u,p,c,0,h,d,A,j,1),p=Ci(ot,u,p,c,1,h,d,I,D,1),p=Ci(ot,u,p,c,2,h,d,C,L,1),p=Ci(ot,u,p,c,3,h,d,k,F,1),p=Ci(ot,u,p,c,4,h,d,N,U,1),p=Ci(ot,u,p,c,5,h,d,M,H,1)),h=d,A=j,I=D,C=L,k=F,N=U,k=F,l=Q}i.push(u)}}if(t.path)for(var T in t.path){var V=t.path[T];if(-1==(x=n.findPathConstraintIndex(T)))throw new Error("Path constraint not found: "+T);w=n.pathConstraints[x];for(var s in V){if(l=(q=V[s])[0])if("position"===s){u=new _r(q.length,q.length,x);i.push(Ai(q,u,0,w.positionMode==_.Fixed?r:1))}else if("spacing"===s){u=new gr(q.length,q.length,x);i.push(Ai(q,u,0,w.spacingMode==xr.Length||w.spacingMode==xr.Fixed?r:1))}else if("mix"===s){for(u=new br(q.length,3*q.length,x),h=ki(l,"time",0),A=ki(l,"mixRotate",1),I=ki(l,"mixX",1),C=ki(l,"mixY",I),c=0,p=0;;c++){if(u.setFrame(c,h,A,I,C),!(Q=q[c+1])){u.shrink(p);break}d=ki(Q,"time",0),j=ki(Q,"mixRotate",1),D=ki(Q,"mixX",1),L=ki(Q,"mixY",D);(ot=l.curve)&&(p=Ci(ot,u,p,c,0,h,d,A,j,1),p=Ci(ot,u,p,c,1,h,d,I,D,1),p=Ci(ot,u,p,c,2,h,d,C,L,1)),h=d,A=j,I=D,C=L,l=Q}i.push(u)}}}if(t.deform)for(var X in t.deform){var Y=t.deform[X],z=n.findSkin(X);if(null!=z)for(var o in Y){a=Y[o];if(-1==(yt=n.findSlotIndex(o)))throw new Error("Slot not found: "+a.name);for(var s in a){var q;if(l=(q=a[s])[0]){var K=z.getAttachment(yt,s);if(null==K)throw new Error("Deform attachment not found: "+q.name);var Z=null!=K.bones,$=K.vertices,J=Z?$.length/3*2:$.length;for(u=new pr(q.length,q.length,yt,K),h=ki(l,"time",0),c=0,p=0;;c++){var Q,tt=void 0,et=ki(l,"vertices",null);if(et){tt=G.newFloatArray(J);var nt=ki(l,"offset",0);if(G.arrayCopy(et,0,tt,nt,et.length),1!=r)for(var rt=(it=nt)+et.length;it<rt;it++)tt[it]*=r;if(!Z)for(var it=0;it<J;it++)tt[it]+=$[it]}else tt=Z?G.newFloatArray(J):$;if(u.setFrame(c,h,tt),!(Q=q[c+1])){u.shrink(p);break}var ot;d=ki(Q,"time",0);(ot=l.curve)&&(p=Ci(ot,u,p,c,0,h,d,0,1,1)),h=d,l=Q}i.push(u)}}}else if(W)throw new Error("Skin not found: "+X)}if(t.drawOrder){u=new yr(t.drawOrder.length);var at=n.slots.length;for(c=0,it=0;it<t.drawOrder.length;it++,c++){var st=t.drawOrder[it],ut=null,ct=ki(st,"offsets",null);if(ct){ut=G.newArray(at,-1);for(var lt=G.newArray(at-ct.length,0),ht=0,ft=0,pt=0;pt<ct.length;pt++){for(var dt=ct[pt],yt=n.findSlotIndex(dt.slot);ht!=yt;)lt[ft++]=ht++;ut[ht+dt.offset]=ht++}for(;ht<at;)lt[ft++]=ht++;for(pt=at-1;pt>=0;pt--)-1==ut[pt]&&(ut[pt]=lt[--ft])}u.setFrame(c,ki(st,"time",0),ut)}i.push(u)}if(t.events){for(u=new dr(t.events.length),c=0,it=0;it<t.events.length;it++,c++){var mt=t.events[it],vt=n.findEvent(mt.name),_t=new Fr(G.toSinglePrecision(ki(mt,"time",0)),vt);_t.intValue=ki(mt,"int",vt.intValue),_t.floatValue=ki(mt,"float",vt.floatValue),_t.stringValue=ki(mt,"string",vt.stringValue),_t.data.audioPath&&(_t.volume=ki(mt,"volume",1),_t.balance=ki(mt,"balance",0)),u.setFrame(c,_t)}i.push(u)}var gt=0;for(it=0,rt=i.length;it<rt;it++)gt=Math.max(gt,i[it].getDuration());if(isNaN(gt))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new Pn(e,i,gt))},t.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return c.b.NORMAL;if("additive"==t)return c.b.ADD;if("multiply"==t)return c.b.MULTIPLY;if("screen"==t)return c.b.SCREEN;throw new Error("Unknown blend mode: "+t)},t}(),Ri=function(t,e,n,r,i){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=r,this.inheritDeform=i};function Ai(t,e,n,r){for(var i=t[0],o=ki(i,"time",0),a=ki(i,"value",n)*r,s=0,u=0;;u++){e.setFrame(u,o,a);var c=t[u+1];if(!c)return e.shrink(s),e;var l=ki(c,"time",0),h=ki(c,"value",n)*r;i.curve&&(s=Ci(i.curve,e,s,u,0,o,l,a,h,r)),o=l,a=h,i=c}}function Ii(t,e,n,r,i,o){for(var a=t[0],s=ki(a,"time",0),u=ki(a,n,i)*o,c=ki(a,r,i)*o,l=0,h=0;;h++){e.setFrame(h,s,u,c);var f=t[h+1];if(!f)return e.shrink(l),e;var p=ki(f,"time",0),d=ki(f,n,i)*o,y=ki(f,r,i)*o,m=a.curve;m&&(l=Ci(m,e,l,h,0,s,p,u,d,o),l=Ci(m,e,l,h,1,s,p,c,y,o)),s=p,u=d,c=y,a=f}}function Ci(t,e,n,r,i,o,a,s,u,c){if("stepped"==t)return e.setStepped(r),n;var l=i<<2,h=t[l],f=t[l+1]*c,p=t[l+2],d=t[l+3]*c;return e.setBezier(n,r,i,o,s,h,f,p,d,a,u),n+1}function ki(t,e,n){return void 0!==t[e]?t[e]:n}var Ni,Mi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yn(e,t),e.prototype.createSkeleton=function(t){this.skeleton=new zr(t),this.skeleton.updateWorldTransform(),this.stateData=new Mr(t),this.state=new Er(this.stateData)},e}($),ji=function(t,e){return(ji=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};
/*!
 * @pixi-spine/loader-uni - v3.0.13
 * Compiled Mon, 13 Sep 2021 16:46:40 UTC
 *
 * @pixi-spine/loader-uni is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 * 
 * Copyright 2019-2020, Mat Groves, All Rights Reserved
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Di(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ji(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Li(t){var e=t.substr(0,3),n=Math.floor(10*+e+.001);return"3.7"===e?Ni.VER37:"3.8"===e?Ni.VER38:"4.0"===e?Ni.VER40:n<Ni.VER37?Ni.VER37:Ni.UNKNOWN}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VER37=37]="VER37",t[t.VER38=38]="VER38",t[t.VER40=40]="VER40"}(Ni||(Ni={}));var Bi=function(){function t(){this.scale=1}return t.prototype.readSkeletonData=function(t,e){var n=new E(e);n.readString();var r=n.readString(),i=Li(r),o=null;if(i===Ni.VER38&&(o=new ne(new Bt(t))),(n=new E(e)).readInt32(),n.readInt32(),(i=Li(r=n.readString()))===Ni.VER40&&(o=new Qr(new jr(t))),!o){var a="Unsupported version of spine model "+r+", please update pixi-spine";console.error(a)}return o.scale=this.scale,o.readSkeletonData(e)},t}(),Fi=function(){function t(){this.scale=1}return t.prototype.readSkeletonData=function(t,e){var n=e.skeleton.spine,r=Li(n),i=null;if(r===Ni.VER37&&(i=new hn(new ze(t))),r===Ni.VER38&&(i=new ae(new Bt(t))),r===Ni.VER40&&(i=new Pi(new jr(t))),!i){var o="Unsupported version of spine model "+n+", please update pixi-spine";console.error(o)}return i.scale=this.scale,i.readSkeletonData(e)},t}(),Ui=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Di(e,t),e.prototype.createBinaryParser=function(){return new Bi},e.prototype.createJsonParser=function(){return new Fi},e.prototype.parseData=function(t,e,n,r){var i=e;t.spineData=i.readSkeletonData(n,r),t.spineAtlas=n},e.registerLoaderPlugin=function(){s.b.registerPlugin(e)},e.use=(new e).genMiddleware().use,e}(J),Gi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Di(e,t),e.prototype.createSkeleton=function(t){var e=Li(t.version),n=null;if(e===Ni.VER37&&(n=i),e===Ni.VER38&&(n=r),e===Ni.VER40&&(n=o),!n){var a="Cant detect version of spine model "+t.version;console.error(a)}this.skeleton=new n.Skeleton(t),this.skeleton.updateWorldTransform(),this.stateData=new n.AnimationStateData(t),this.state=new n.AnimationState(this.stateData)},e}($);
/*!
 * pixi-spine - v3.0.0
 * Compiled Thu, 29 Apr 2021 13:42:29 UTC
 *
 * pixi-spine is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 * 
 * Copyright 2019-2020, Ivan Igorevich Popelyshev <ivan.popelyshev@gmail.com>, All Rights Reserved
 */
Ui.registerLoaderPlugin()},"./node_modules/pixi.js/dist/esm/pixi.js":function(t,e,n){"use strict";n.r(e),n.d(e,"utils",(function(){return h})),n.d(e,"AccessibilityManager",(function(){return d})),n.d(e,"accessibleTarget",(function(){return p})),n.d(e,"InteractionData",(function(){return v})),n.d(e,"InteractionEvent",(function(){return g})),n.d(e,"InteractionManager",(function(){return x})),n.d(e,"InteractionTrackingData",(function(){return b})),n.d(e,"interactiveTarget",(function(){return T})),n.d(e,"Application",(function(){return O})),n.d(e,"AbstractBatchRenderer",(function(){return S.a})),n.d(e,"AbstractMultiResource",(function(){return S.b})),n.d(e,"AbstractRenderer",(function(){return S.c})),n.d(e,"ArrayResource",(function(){return S.d})),n.d(e,"Attribute",(function(){return S.e})),n.d(e,"BaseImageResource",(function(){return S.f})),n.d(e,"BaseRenderTexture",(function(){return S.g})),n.d(e,"BaseTexture",(function(){return S.h})),n.d(e,"BatchDrawCall",(function(){return S.i})),n.d(e,"BatchGeometry",(function(){return S.j})),n.d(e,"BatchPluginFactory",(function(){return S.k})),n.d(e,"BatchRenderer",(function(){return S.l})),n.d(e,"BatchShaderGenerator",(function(){return S.m})),n.d(e,"BatchSystem",(function(){return S.n})),n.d(e,"BatchTextureArray",(function(){return S.o})),n.d(e,"Buffer",(function(){return S.p})),n.d(e,"BufferResource",(function(){return S.q})),n.d(e,"CanvasResource",(function(){return S.r})),n.d(e,"ContextSystem",(function(){return S.s})),n.d(e,"CubeResource",(function(){return S.t})),n.d(e,"Filter",(function(){return S.u})),n.d(e,"FilterState",(function(){return S.v})),n.d(e,"FilterSystem",(function(){return S.w})),n.d(e,"Framebuffer",(function(){return S.x})),n.d(e,"FramebufferSystem",(function(){return S.y})),n.d(e,"GLFramebuffer",(function(){return S.z})),n.d(e,"GLProgram",(function(){return S.A})),n.d(e,"GLTexture",(function(){return S.B})),n.d(e,"Geometry",(function(){return S.C})),n.d(e,"GeometrySystem",(function(){return S.D})),n.d(e,"IGLUniformData",(function(){return S.E})),n.d(e,"INSTALLED",(function(){return S.F})),n.d(e,"ImageBitmapResource",(function(){return S.G})),n.d(e,"ImageResource",(function(){return S.H})),n.d(e,"MaskData",(function(){return S.I})),n.d(e,"MaskSystem",(function(){return S.J})),n.d(e,"ObjectRenderer",(function(){return S.K})),n.d(e,"Program",(function(){return S.L})),n.d(e,"ProjectionSystem",(function(){return S.M})),n.d(e,"Quad",(function(){return S.N})),n.d(e,"QuadUv",(function(){return S.O})),n.d(e,"RenderTexture",(function(){return S.P})),n.d(e,"RenderTexturePool",(function(){return S.Q})),n.d(e,"RenderTextureSystem",(function(){return S.R})),n.d(e,"Renderer",(function(){return S.S})),n.d(e,"Resource",(function(){return S.T})),n.d(e,"SVGResource",(function(){return S.U})),n.d(e,"ScissorSystem",(function(){return S.V})),n.d(e,"Shader",(function(){return S.W})),n.d(e,"ShaderSystem",(function(){return S.X})),n.d(e,"SpriteMaskFilter",(function(){return S.Y})),n.d(e,"State",(function(){return S.Z})),n.d(e,"StateSystem",(function(){return S.ab})),n.d(e,"StencilSystem",(function(){return S.bb})),n.d(e,"System",(function(){return S.cb})),n.d(e,"Texture",(function(){return S.db})),n.d(e,"TextureGCSystem",(function(){return S.eb})),n.d(e,"TextureMatrix",(function(){return S.fb})),n.d(e,"TextureSystem",(function(){return S.gb})),n.d(e,"TextureUvs",(function(){return S.hb})),n.d(e,"UniformGroup",(function(){return S.ib})),n.d(e,"VideoResource",(function(){return S.jb})),n.d(e,"ViewableBuffer",(function(){return S.kb})),n.d(e,"autoDetectRenderer",(function(){return S.lb})),n.d(e,"autoDetectResource",(function(){return S.mb})),n.d(e,"checkMaxIfStatementsInShader",(function(){return S.nb})),n.d(e,"createUBOElements",(function(){return S.ob})),n.d(e,"defaultFilterVertex",(function(){return S.pb})),n.d(e,"defaultVertex",(function(){return S.qb})),n.d(e,"generateProgram",(function(){return S.rb})),n.d(e,"generateUniformBufferSync",(function(){return S.sb})),n.d(e,"getTestContext",(function(){return S.tb})),n.d(e,"getUBOData",(function(){return S.ub})),n.d(e,"resources",(function(){return S.vb})),n.d(e,"systems",(function(){return S.wb})),n.d(e,"uniformParsers",(function(){return S.xb})),n.d(e,"Extract",(function(){return C})),n.d(e,"AppLoaderPlugin",(function(){return k.a})),n.d(e,"Loader",(function(){return k.b})),n.d(e,"LoaderResource",(function(){return k.c})),n.d(e,"TextureLoader",(function(){return k.d})),n.d(e,"BlobResource",(function(){return U})),n.d(e,"CompressedTextureLoader",(function(){return H})),n.d(e,"CompressedTextureResource",(function(){return G})),n.d(e,"DDSLoader",(function(){return at})),n.d(e,"FORMATS_TO_COMPONENTS",(function(){return bt})),n.d(e,"INTERNAL_FORMATS",(function(){return A})),n.d(e,"INTERNAL_FORMAT_TO_BYTES_PER_PIXEL",(function(){return M})),n.d(e,"KTXLoader",(function(){return Tt})),n.d(e,"TYPES_TO_BYTES_PER_COMPONENT",(function(){return gt})),n.d(e,"TYPES_TO_BYTES_PER_PIXEL",(function(){return Et})),n.d(e,"ParticleContainer",(function(){return wt.a})),n.d(e,"ParticleRenderer",(function(){return wt.b})),n.d(e,"BasePrepare",(function(){return xt.a})),n.d(e,"CountLimiter",(function(){return xt.b})),n.d(e,"Prepare",(function(){return xt.c})),n.d(e,"TimeLimiter",(function(){return xt.d})),n.d(e,"Spritesheet",(function(){return St.a})),n.d(e,"SpritesheetLoader",(function(){return St.b})),n.d(e,"TilingSprite",(function(){return Ot.a})),n.d(e,"TilingSpriteRenderer",(function(){return Ot.b})),n.d(e,"BitmapFont",(function(){return Pt.a})),n.d(e,"BitmapFontData",(function(){return Pt.b})),n.d(e,"BitmapFontLoader",(function(){return Pt.c})),n.d(e,"BitmapText",(function(){return Pt.d})),n.d(e,"Ticker",(function(){return m.a})),n.d(e,"TickerPlugin",(function(){return m.b})),n.d(e,"UPDATE_PRIORITY",(function(){return m.c})),n.d(e,"ALPHA_MODES",(function(){return N.a})),n.d(e,"BLEND_MODES",(function(){return N.b})),n.d(e,"BUFFER_BITS",(function(){return N.c})),n.d(e,"BUFFER_TYPE",(function(){return N.d})),n.d(e,"CLEAR_MODES",(function(){return N.e})),n.d(e,"DRAW_MODES",(function(){return N.f})),n.d(e,"ENV",(function(){return N.g})),n.d(e,"FORMATS",(function(){return N.h})),n.d(e,"GC_MODES",(function(){return N.i})),n.d(e,"MASK_TYPES",(function(){return N.j})),n.d(e,"MIPMAP_MODES",(function(){return N.k})),n.d(e,"MSAA_QUALITY",(function(){return N.l})),n.d(e,"PRECISION",(function(){return N.m})),n.d(e,"RENDERER_TYPE",(function(){return N.n})),n.d(e,"SAMPLER_TYPES",(function(){return N.o})),n.d(e,"SCALE_MODES",(function(){return N.p})),n.d(e,"TARGETS",(function(){return N.q})),n.d(e,"TYPES",(function(){return N.r})),n.d(e,"WRAP_MODES",(function(){return N.s})),n.d(e,"Bounds",(function(){return f.a})),n.d(e,"Container",(function(){return f.b})),n.d(e,"DisplayObject",(function(){return f.c})),n.d(e,"TemporaryDisplayObject",(function(){return f.d})),n.d(e,"FillStyle",(function(){return ke.a})),n.d(e,"GRAPHICS_CURVES",(function(){return ke.b})),n.d(e,"Graphics",(function(){return ke.c})),n.d(e,"GraphicsData",(function(){return ke.d})),n.d(e,"GraphicsGeometry",(function(){return ke.e})),n.d(e,"LINE_CAP",(function(){return ke.f})),n.d(e,"LINE_JOIN",(function(){return ke.g})),n.d(e,"LineStyle",(function(){return ke.h})),n.d(e,"graphicsUtils",(function(){return ke.i})),n.d(e,"Circle",(function(){return y.a})),n.d(e,"DEG_TO_RAD",(function(){return y.b})),n.d(e,"Ellipse",(function(){return y.c})),n.d(e,"Matrix",(function(){return y.d})),n.d(e,"ObservablePoint",(function(){return y.e})),n.d(e,"PI_2",(function(){return y.f})),n.d(e,"Point",(function(){return y.g})),n.d(e,"Polygon",(function(){return y.h})),n.d(e,"RAD_TO_DEG",(function(){return y.i})),n.d(e,"Rectangle",(function(){return y.j})),n.d(e,"RoundedRectangle",(function(){return y.k})),n.d(e,"SHAPES",(function(){return y.l})),n.d(e,"Transform",(function(){return y.m})),n.d(e,"groupD8",(function(){return y.n})),n.d(e,"Mesh",(function(){return Ne.a})),n.d(e,"MeshBatchUvs",(function(){return Ne.b})),n.d(e,"MeshGeometry",(function(){return Ne.c})),n.d(e,"MeshMaterial",(function(){return Ne.d})),n.d(e,"NineSlicePlane",(function(){return Me.a})),n.d(e,"PlaneGeometry",(function(){return Me.b})),n.d(e,"RopeGeometry",(function(){return Me.c})),n.d(e,"SimpleMesh",(function(){return Me.d})),n.d(e,"SimplePlane",(function(){return Me.e})),n.d(e,"SimpleRope",(function(){return Me.f})),n.d(e,"Runner",(function(){return je.a})),n.d(e,"Sprite",(function(){return Ae.a})),n.d(e,"AnimatedSprite",(function(){return Le})),n.d(e,"TEXT_GRADIENT",(function(){return Be.a})),n.d(e,"Text",(function(){return Be.b})),n.d(e,"TextMetrics",(function(){return Be.c})),n.d(e,"TextStyle",(function(){return Be.d})),n.d(e,"isMobile",(function(){return It.a})),n.d(e,"settings",(function(){return It.b})),n.d(e,"VERSION",(function(){return Fe})),n.d(e,"filters",(function(){return Ue}));var r=n("./node_modules/promise-polyfill/src/index.js"),i=n("./node_modules/object-assign/index.js"),o=n.n(i);
/*!
 * @pixi/polyfill - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
self.Promise||(self.Promise=r.a),Object.assign||(Object.assign=o.a);if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!self.performance||!self.performance.now){var a=Date.now();self.performance||(self.performance={}),self.performance.now=function(){return Date.now()-a}}for(var s=Date.now(),u=["ms","moz","webkit","o"],c=0;c<u.length&&!self.requestAnimationFrame;++c){var l=u[c];self.requestAnimationFrame=self[l+"RequestAnimationFrame"],self.cancelAnimationFrame=self[l+"CancelAnimationFrame"]||self[l+"CancelRequestAnimationFrame"]}self.requestAnimationFrame||(self.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+s-e;return n<0&&(n=0),s=e,self.setTimeout((function(){s=Date.now(),t(performance.now())}),n)}),self.cancelAnimationFrame||(self.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),self.ArrayBuffer||(self.ArrayBuffer=Array),self.Float32Array||(self.Float32Array=Array),self.Uint32Array||(self.Uint32Array=Array),self.Uint16Array||(self.Uint16Array=Array),self.Uint8Array||(self.Uint8Array=Array),self.Int32Array||(self.Int32Array=Array);var h=n("./node_modules/@pixi/utils/dist/esm/utils.js"),f=n("./node_modules/@pixi/display/dist/esm/display.js"),p={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};f.c.mixin(p);var d=function(){function t(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(h.isMobile.tablet||h.isMobile.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),self.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,self.document.addEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(t=this.renderer.view.parentNode)||void 0===t||t.appendChild(this.div))},t.prototype.deactivate=function(){var t;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(t=this.div.parentNode)||void 0===t||t.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);var e=t.children;if(e)for(var n=0;n<e.length;n++)this.updateAccessibleObjects(e[n])}},t.prototype.update=function(){var t=performance.now();if(!(h.isMobile.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),n=e.left,r=e.top,i=e.width,o=e.height,a=this.renderer,s=a.width,u=a.height,c=a.resolution,l=i/s*c,f=o/u*c,p=this.div;p.style.left=n+"px",p.style.top=r+"px",p.style.width=s+"px",p.style.height=u+"px";for(var d=0;d<this.children.length;d++){var y=this.children[d];if(y.renderId!==this.renderId)y._accessibleActive=!1,Object(h.removeItems)(this.children,d,1),this.div.removeChild(y._accessibleDiv),this.pool.push(y._accessibleDiv),y._accessibleDiv=null,d--;else{p=y._accessibleDiv;var m=y.hitArea,v=y.worldTransform;y.hitArea?(p.style.left=(v.tx+m.x*v.a)*l+"px",p.style.top=(v.ty+m.y*v.d)*f+"px",p.style.width=m.width*v.a*l+"px",p.style.height=m.height*v.d*f+"px"):(m=y.getBounds(),this.capHitArea(m),p.style.left=m.x*l+"px",p.style.top=m.y*f+"px",p.style.width=m.width*l+"px",p.style.height=m.height*f+"px",p.title!==y.accessibleTitle&&null!==y.accessibleTitle&&(p.title=y.accessibleTitle),p.getAttribute("aria-label")!==y.accessibleHint&&null!==y.accessibleHint&&p.setAttribute("aria-label",y.accessibleHint)),y.accessibleTitle===p.title&&y.tabIndex===p.tabIndex||(p.title=y.accessibleTitle,p.tabIndex=y.tabIndex,this.debug&&this.updateDebugHTML(p))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,n=e.width,r=e.height;t.x+t.width>n&&(t.width=n-t.x),t.y+t.height>r&&(t.height=r-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,n=t.target.displayObject,r=e.eventData;e.dispatchEvent(n,"click",r),e.dispatchEvent(n,"pointertap",r),e.dispatchEvent(n,"tap",r)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,n=t.target.displayObject,r=e.eventData;e.dispatchEvent(n,"mouseover",r)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,n=t.target.displayObject,r=e.eventData;e.dispatchEvent(n,"mouseout",r)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}(),y=n("./node_modules/@pixi/math/dist/esm/math.js"),m=n("./node_modules/@pixi/ticker/dist/esm/ticker.js"),v=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new y.g,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,n){return t.worldTransform.applyInverse(n||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),_=function(t,e){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var g=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),b=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!=(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!=(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!=(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),E=function(){function t(){this._tempPoint=new y.g}return t.prototype.recursiveFindHit=function(t,e,n,r,i){if(!e||!e.visible)return!1;var o=t.data.global,a=!1,s=i=e.interactive||i,u=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(r=!1,u=!1)),s=!1):e._mask&&r&&(e._mask.containsPoint&&e._mask.containsPoint(o)||(r=!1)),u&&e.interactiveChildren&&e.children)for(var c=e.children,l=c.length-1;l>=0;l--){var h=c[l],f=this.recursiveFindHit(t,h,n,r,s);if(f){if(!h.parent)continue;s=!1,f&&(t.target&&(r=!1),a=!0)}}return i&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(a=!0),e.interactive&&(a&&!t.target&&(t.target=e),n&&n(t,e,!!a))),a},t.prototype.findHit=function(t,e,n,r){this.recursiveFindHit(t,e,n,r,!1)},t}(),T={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};f.c.mixin(T);var w={target:null,data:{global:null}},x=function(t){function e(e,n){var r=t.call(this)||this;return n=n||{},r.renderer=e,r.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,r.interactionFrequency=n.interactionFrequency||10,r.mouse=new v,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new g,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!("PointerEvent"in self),r.supportsTouchEvents="ontouchstart"in self,r.supportsPointerEvents=!!self.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new E,r._tempDisplayObject=new f.d,r._eventListenerOptions={capture:!0,passive:!1},r._useSystemTicker=void 0===n.useSystemTicker||n.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(t,e){function n(){this.constructor=t}_(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return w.target=null,w.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(w,e,null,!0),w.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(m.a.system.add(this.tickerUpdate,this,m.c.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(m.a.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(self.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),self.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),self.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(self.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),self.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(self.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),self.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),self.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(self.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),self.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var e=!0;if(self.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(e=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var n=this.cursorStyles[t];if(n)switch(typeof n){case"string":e&&(this.interactionDOMElement.style.cursor=n);break;case"function":n(t);break;case"object":e&&Object.assign(this.interactionDOMElement.style,n)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,n){n.stopPropagationHint&&t!==n.stopsPropagatingAt||(n.currentTarget=t,n.type=e,t.emit(e,n),t[e]&&t[e](n))},e.prototype.delayDispatchEvent=function(t,e,n){this.delayedEvents.push({displayObject:t,eventString:e,eventData:n})},e.prototype.mapPositionToPoint=function(t,e,n){var r;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var i=1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*i,t.y=(n-r.top)*(this.interactionDOMElement.height/r.height)*i},e.prototype.processInteractive=function(t,e,n,r){var i=this.search.findHit(t,e,n,r),o=this.delayedEvents;if(!o.length)return i;t.stopPropagationHint=!1;var a=o.length;this.delayedEvents=[];for(var s=0;s<a;s++){var u=o[s],c=u.displayObject,l=u.eventString,h=u.eventData;h.stopsPropagatingAt===c&&(h.stopPropagationHint=!0),this.dispatchEvent(c,l,h)}return i},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var n=e.length,r=0;r<n;r++){var i=e[r],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(a.data.originalEvent=t,this.processInteractive(a,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===i.pointerType)this.emit("touchstart",a);else if("mouse"===i.pointerType||"pen"===i.pointerType){var s=2===i.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,n){var r=t.data,i=t.data.identifier;if(n)if(e.trackedPointers[i]||(e.trackedPointers[i]=new b(i)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?e.trackedPointers[i].rightDown=!0:e.trackedPointers[i].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,n){for(var r=this.normalizeToPointerData(t),i=r.length,o=t.target!==this.interactionDOMElement?"outside":"",a=0;a<i;a++){var s=r[a],u=this.getInteractionDataForPointerId(s),c=this.configureInteractionEventForDOMEvent(this.eventData,s,u);if(c.data.originalEvent=t,this.processInteractive(c,this.lastObjectRendered,n,e||!o),this.emit(e?"pointercancel":"pointerup"+o,c),"mouse"===s.pointerType||"pen"===s.pointerType){var l=2===s.button;this.emit(l?"rightup"+o:"mouseup"+o,c)}else"touch"===s.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,c),this.releaseInteractionDataForPointerId(s.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var n=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===n.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,n){var r=t.data,i=t.data.identifier,o=e.trackedPointers[i],a="touch"===r.pointerType,s="mouse"===r.pointerType||"pen"===r.pointerType,u=!1;if(s){var c=2===r.button,l=b.FLAGS,h=c?l.RIGHT_DOWN:l.LEFT_DOWN,f=void 0!==o&&o.flags&h;n?(this.dispatchEvent(e,c?"rightup":"mouseup",t),f&&(this.dispatchEvent(e,c?"rightclick":"click",t),u=!0)):f&&this.dispatchEvent(e,c?"rightupoutside":"mouseupoutside",t),o&&(c?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(e,"pointerup",t),a&&this.dispatchEvent(e,"touchend",t),o&&(s&&!u||this.dispatchEvent(e,"pointertap",t),a&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),a&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[i]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var n=e.length,r=0;r<n;r++){var i=e[r],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=t,this.processInteractive(a,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",a),"touch"===i.pointerType&&this.emit("touchmove",a),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",a)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,n){var r=t.data,i="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(t,e,n),this.moveWhenInside&&!n||(this.dispatchEvent(e,"pointermove",t),i&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,n);r.data.originalEvent=e,this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(n.identifier)}},e.prototype.processPointerOverOut=function(t,e,n){var r=t.data,i=t.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,a=e.trackedPointers[i];n&&!a&&(a=e.trackedPointers[i]=new b(i)),void 0!==a&&(n&&this.mouseOverRenderer?(a.over||(a.over=!0,this.delayDispatchEvent(e,"pointerover",t),o&&this.delayDispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):a.over&&(a.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),a.none&&delete e.trackedPointers[i]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],n=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,n);r.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e,n=t.pointerId;return 1===n||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[n]?e=this.activeInteractionData[n]:((e=this.interactionDataPool.pop()||new v).identifier=n,this.activeInteractionData[n]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,n){return t.data=n,this.mapPositionToPoint(n.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=n.global.x,e.globalY=n.global.y),n.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,r=t.changedTouches.length;n<r;n++){var i=t.changedTouches[n];void 0===i.button&&(i.button=t.touches.length?1:0),void 0===i.buttons&&(i.buttons=t.touches.length?1:0),void 0===i.isPrimary&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===i.width&&(i.width=i.radiusX||1),void 0===i.height&&(i.height=i.radiusY||1),void 0===i.tiltX&&(i.tiltX=0),void 0===i.tiltY&&(i.tiltY=0),void 0===i.pointerType&&(i.pointerType="touch"),void 0===i.pointerId&&(i.pointerId=i.identifier||0),void 0===i.pressure&&(i.pressure=i.force||.5),void 0===i.twist&&(i.twist=0),void 0===i.tangentialPressure&&(i.tangentialPressure=0),void 0===i.layerX&&(i.layerX=i.offsetX=i.clientX),void 0===i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,e.push(i)}else if(self.MouseEvent&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof self.PointerEvent))e.push(t);else{var o=t;void 0===o.isPrimary&&(o.isPrimary=!0),void 0===o.width&&(o.width=1),void 0===o.height&&(o.height=1),void 0===o.tiltX&&(o.tiltX=0),void 0===o.tiltY&&(o.tiltY=0),void 0===o.pointerType&&(o.pointerType="mouse"),void 0===o.pointerId&&(o.pointerId=1),void 0===o.pressure&&(o.pressure=.5),void 0===o.twist&&(o.twist=0),void 0===o.tangentialPressure&&(o.tangentialPressure=0),o.isNormalized=!0,e.push(o)}return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(h.EventEmitter),S=n("./node_modules/@pixi/core/dist/esm/core.js"),O=function(){function t(e){var n=this;this.stage=new f.b,e=Object.assign({forceCanvas:!1},e),this.renderer=Object(S.lb)(e),t._plugins.forEach((function(t){t.init.call(n,e)}))}return t.registerPlugin=function(e){t._plugins.push(e)},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,n){var r=this,i=t._plugins.slice(0);i.reverse(),i.forEach((function(t){t.destroy.call(r)})),this.stage.destroy(n),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}(),P=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){self.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(self.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,n;if(e.cancelResize(),e._resizeTo===self)t=self.innerWidth,n=self.innerHeight;else{var r=e._resizeTo;t=r.clientWidth,n=r.clientHeight}e.renderer.resize(t,n)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){self.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t}();O.registerPlugin(P);
/*!
 * @pixi/extract - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
var R,A,I=new y.j,C=function(){function t(t){this.renderer=t}return t.prototype.image=function(t,e,n){var r=new Image;return r.src=this.base64(t,e,n),r},t.prototype.base64=function(t,e,n){return this.canvas(t).toDataURL(e,n)},t.prototype.canvas=function(e){var n,r,i,o=this.renderer,a=!1,s=!1;e&&(e instanceof S.P?i=e:(i=this.renderer.generateTexture(e),s=!0)),i?(n=i.baseTexture.resolution,r=i.frame,a=!1,o.renderTexture.bind(i)):(n=this.renderer.resolution,a=!0,(r=I).width=this.renderer.width,r.height=this.renderer.height,o.renderTexture.bind(null));var u=Math.floor(r.width*n+1e-4),c=Math.floor(r.height*n+1e-4),l=new h.CanvasRenderTarget(u,c,1),f=new Uint8Array(4*u*c),p=o.gl;p.readPixels(r.x*n,r.y*n,u,c,p.RGBA,p.UNSIGNED_BYTE,f);var d=l.context.getImageData(0,0,u,c);if(t.arrayPostDivide(f,d.data),l.context.putImageData(d,0,0),a){var y=new h.CanvasRenderTarget(l.width,l.height,1);y.context.scale(1,-1),y.context.drawImage(l.canvas,0,-c),l.destroy(),l=y}return s&&i.destroy(!0),l.canvas},t.prototype.pixels=function(e){var n,r,i,o=this.renderer,a=!1;e&&(e instanceof S.P?i=e:(i=this.renderer.generateTexture(e),a=!0)),i?(n=i.baseTexture.resolution,r=i.frame,o.renderTexture.bind(i)):(n=o.resolution,(r=I).width=o.width,r.height=o.height,o.renderTexture.bind(null));var s=r.width*n,u=r.height*n,c=new Uint8Array(4*s*u),l=o.gl;return l.readPixels(r.x*n,r.y*n,s,u,l.RGBA,l.UNSIGNED_BYTE,c),a&&i.destroy(!0),t.arrayPostDivide(c,c),c},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(t,e){for(var n=0;n<t.length;n+=4){var r=e[n+3]=t[n+3];0!==r?(e[n]=Math.round(Math.min(255*t[n]/r,255)),e[n+1]=Math.round(Math.min(255*t[n+1]/r,255)),e[n+2]=Math.round(Math.min(255*t[n+2]/r,255))):(e[n]=t[n],e[n+1]=t[n+1],e[n+2]=t[n+2])}},t}(),k=n("./node_modules/@pixi/loaders/dist/esm/loaders.js"),N=n("./node_modules/@pixi/constants/dist/esm/constants.js");!function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"}(A||(A={}));var M=((R={})[A.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,R[A.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,R[A.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,R[A.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,R[A.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,R[A.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,R[A.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,R[A.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,R[A.COMPRESSED_R11_EAC]=.5,R[A.COMPRESSED_SIGNED_R11_EAC]=.5,R[A.COMPRESSED_RG11_EAC]=1,R[A.COMPRESSED_SIGNED_RG11_EAC]=1,R[A.COMPRESSED_RGB8_ETC2]=.5,R[A.COMPRESSED_RGBA8_ETC2_EAC]=1,R[A.COMPRESSED_SRGB8_ETC2]=.5,R[A.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,R[A.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,R[A.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,R[A.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,R[A.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,R[A.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,R[A.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,R[A.COMPRESSED_RGB_ETC1_WEBGL]=.5,R[A.COMPRESSED_RGB_ATC_WEBGL]=.5,R[A.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,R[A.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,R),j=function(t,e){return(j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function D(t,e){function n(){this.constructor=t}j(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function L(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var B,F,U=function(t){function e(e,n){void 0===n&&(n={width:1,height:1,autoLoad:!0});var r,i,o=this;return"string"==typeof e?(r=e,i=new Uint8Array):(r=null,i=e),(o=t.call(this,i,n)||this).origin=r,o.buffer=i?new S.kb(i):null,o.origin&&!1!==n.autoLoad&&o.load(),i&&i.length&&(o.loaded=!0,o.onBlobLoaded(o.buffer.rawBinaryData)),o}return D(e,t),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return t=this,e=void 0,r=function(){var t;return L(this,(function(e){switch(e.label){case 0:return[4,fetch(this.origin)];case 1:return[4,e.sent().blob()];case 2:return[4,e.sent().arrayBuffer()];case 3:return t=e.sent(),this.data=new Uint32Array(t),this.buffer=new S.kb(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),[2,this]}}))},new((n=Promise)||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}u((r=r.apply(t,e||[])).next())}));var t,e,n,r},e}(S.q),G=function(t){function e(n,r){var i=t.call(this,n,r)||this;return i.format=r.format,i.levels=r.levels||1,i._width=r.width,i._height=r.height,i._extension=e._formatToExtension(i.format),(r.levelBuffers||i.buffer)&&(i._levelBuffers=r.levelBuffers||e._createLevelBuffers(n instanceof Uint8Array?n:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return D(e,t),e.prototype.upload=function(t,e,n){var r=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var i=0,o=this.levels;i<o;i++){var a=this._levelBuffers[i],s=a.levelID,u=a.levelWidth,c=a.levelHeight,l=a.levelBuffer;r.compressedTexImage2D(r.TEXTURE_2D,s,this.format,u,c,0,l)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,e,n,r,i,o,a){for(var s=new Array(n),u=t.byteOffset,c=o,l=a,h=c+r-1&~(r-1),f=l+i-1&~(i-1),p=h*f*M[e],d=0;d<n;d++)s[d]={levelID:d,levelWidth:n>1?c:h,levelHeight:n>1?l:f,levelBuffer:new Uint8Array(t.buffer,u,p)},u+=p,p=(h=(c=c>>1||1)+r-1&~(r-1))*(f=(l=l>>1||1)+i-1&~(i-1))*M[e];return s},e}(U),H=function(){function t(){}return t.use=function(e,n){var r=e.data;if(e.type===k.c.TYPE.JSON&&r&&r.cacheID&&r.textures){for(var i=r.textures,o=void 0,a=void 0,s=0,u=i.length;s<u;s++){var c=i[s],l=c.src,f=c.format;if(f||(a=l),t.textureFormats[f]){o=l;break}}if(!(o=o||a))return void n(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));if(o===e.url)return void n(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var p={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},d=h.url.resolve(e.url.replace(this.baseUrl,""),o),y=r.cacheID;this.add(y,d,p,(function(t){if(t.error)n(t.error);else{var r=t.texture,i=void 0===r?null:r,o=t.textures,a=void 0===o?{}:o;Object.assign(e,{texture:i,textures:a}),n()}}))}else n()},t.add=function(){var e=document.createElement("canvas").getContext("webgl");if(e){var n={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};for(var r in t.textureExtensions=n,t.textureFormats={},n){var i=n[r];i&&Object.assign(t.textureFormats,Object.getPrototypeOf(i))}}else console.warn("WebGL not available for compressed textures. Silently failing.")},t}();function V(t,e,n){var r={textures:{},texture:null};return e?(e.map((function(t){return new S.db(new S.h(t,Object.assign({mipmap:N.k.OFF,alphaMode:N.a.NO_PREMULTIPLIED_ALPHA},n)))})).forEach((function(e,n){var i=e.baseTexture,o=t+"-"+(n+1);S.h.addToCache(i,o),S.db.addToCache(e,o),0===n&&(S.h.addToCache(i,t),S.db.addToCache(e,t),r.texture=e),r.textures[o]=e})),r):r}k.c.setExtensionXhrType("dds",k.c.XHR_RESPONSE_TYPE.BUFFER);var X,W,Y=3,z=4,q=7,K=19,Z=2,$=0,J=1,Q=2,tt=3;!function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(X||(X={})),function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(W||(W={}));var et,nt,rt,it=((B={})[827611204]=A.COMPRESSED_RGBA_S3TC_DXT1_EXT,B[861165636]=A.COMPRESSED_RGBA_S3TC_DXT3_EXT,B[894720068]=A.COMPRESSED_RGBA_S3TC_DXT5_EXT,B),ot=((F={})[X.DXGI_FORMAT_BC1_TYPELESS]=A.COMPRESSED_RGBA_S3TC_DXT1_EXT,F[X.DXGI_FORMAT_BC1_UNORM]=A.COMPRESSED_RGBA_S3TC_DXT1_EXT,F[X.DXGI_FORMAT_BC2_TYPELESS]=A.COMPRESSED_RGBA_S3TC_DXT3_EXT,F[X.DXGI_FORMAT_BC2_UNORM]=A.COMPRESSED_RGBA_S3TC_DXT3_EXT,F[X.DXGI_FORMAT_BC3_TYPELESS]=A.COMPRESSED_RGBA_S3TC_DXT5_EXT,F[X.DXGI_FORMAT_BC3_UNORM]=A.COMPRESSED_RGBA_S3TC_DXT5_EXT,F[X.DXGI_FORMAT_BC1_UNORM_SRGB]=A.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,F[X.DXGI_FORMAT_BC2_UNORM_SRGB]=A.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,F[X.DXGI_FORMAT_BC3_UNORM_SRGB]=A.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,F),at=function(){function t(){}return t.use=function(e,n){if("dds"===e.extension&&e.data)try{Object.assign(e,V(e.name||e.url,t.parse(e.data),e.metadata))}catch(t){return void n(t)}n()},t.parse=function(t){var e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");var n=new Uint32Array(t,0,124/Uint32Array.BYTES_PER_ELEMENT),r=n[Y],i=n[z],o=n[q],a=new Uint32Array(t,K*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),s=a[1];if(4&s){var u=a[Z];if(808540228!==u){var c=it[u],l=new Uint8Array(t,128);return[new G(l,{format:c,width:i,height:r,levels:o})]}var h=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),f=h[$],p=h[J],d=h[Q],y=h[tt],m=ot[f];if(void 0===m)throw new Error("DDSLoader cannot parse texture data with DXGI format "+f);if(4===d)throw new Error("DDSLoader does not support cubemap textures");if(p===W.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var v=new Array;if(1===y)v.push(new Uint8Array(t,148));else{for(var _=M[m],g=0,b=i,E=r,T=0;T<o;T++){g+=Math.max(1,b+3&-4)*Math.max(1,E+3&-4)*_,b>>>=1,E>>>=1}var w=148;for(T=0;T<y;T++)v.push(new Uint8Array(t,w,g)),w+=g}return v.map((function(t){return new G(t,{format:m,width:i,height:r,levels:o})}))}if(64&s)throw new Error("DDSLoader does not support uncompressed texture data.");if(512&s)throw new Error("DDSLoader does not supported YUV uncompressed texture data.");if(131072&s)throw new Error("DDSLoader does not support single-channel (lumninance) texture data!");if(2&s)throw new Error("DDSLoader does not support single-channel (alpha) texture data!");throw new Error("DDSLoader failed to load a texture file due to an unknown reason!")},t}();k.c.setExtensionXhrType("ktx",k.c.XHR_RESPONSE_TYPE.BUFFER);var st=[171,75,84,88,32,49,49,187,13,10,26,10],ut=12,ct=16,lt=24,ht=28,ft=36,pt=40,dt=44,yt=48,mt=52,vt=56,_t=60,gt=((et={})[N.r.UNSIGNED_BYTE]=1,et[N.r.UNSIGNED_SHORT]=2,et[N.r.FLOAT]=4,et[N.r.HALF_FLOAT]=8,et),bt=((nt={})[N.h.RGBA]=4,nt[N.h.RGB]=3,nt[N.h.LUMINANCE]=1,nt[N.h.LUMINANCE_ALPHA]=2,nt[N.h.ALPHA]=1,nt),Et=((rt={})[N.r.UNSIGNED_SHORT_4_4_4_4]=2,rt[N.r.UNSIGNED_SHORT_5_5_5_1]=2,rt[N.r.UNSIGNED_SHORT_5_6_5]=2,rt),Tt=function(){function t(){}return t.use=function(e,n){if("ktx"===e.extension&&e.data)try{var r=e.name||e.url;Object.assign(e,V(r,t.parse(r,e.data),e.metadata))}catch(t){return void n(t)}n()},t.parse=function(e,n){var r=new DataView(n);if(!t.validate(e,r))return null;var i=67305985===r.getUint32(ut,!0),o=r.getUint32(ct,i),a=r.getUint32(lt,i),s=r.getUint32(ht,i),u=r.getUint32(ft,i),c=r.getUint32(pt,i)||1,l=r.getUint32(dt,i)||1,h=r.getUint32(yt,i)||1,f=r.getUint32(mt,i),p=r.getUint32(vt,i),d=r.getUint32(_t,i);if(0===c||1!==l)throw new Error("Only 2D textures are supported");if(1!==f)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==h)throw new Error("WebGL does not support array textures");var y,m=u+3&-4,v=c+3&-4,_=new Array(h),g=u*c;if(0===o&&(g=m*v),void 0===(y=0!==o?gt[o]?gt[o]*bt[a]:Et[o]:M[s]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var b=g*y,E=u,T=c,w=m,x=v,S=64+d,O=0;O<p;O++){for(var P=r.getUint32(S,i),R=S+4,A=0;A<h;A++){var I=_[A];I||(I=_[A]=new Array(p)),I[O]={levelID:O,levelWidth:p>1?E:w,levelHeight:p>1?T:x,levelBuffer:new Uint8Array(n,R,b)},R+=b}S=(S+=P+4)%4!=0?S+4-S%4:S,b=(w=(E=E>>1||1)+4-1&-4)*(x=(T=T>>1||1)+4-1&-4)*y}if(0!==o)throw new Error("TODO: Uncompressed");return _.map((function(t){return new G(null,{format:s,width:u,height:c,levels:p,levelBuffers:t})}))},t.validate=function(t,e){for(var n=0;n<st.length;n++)if(e.getUint8(n)!==st[n])return console.error(t+" is not a valid *.ktx file!"),!1;return!0},t}(),wt=n("./node_modules/@pixi/particle-container/dist/esm/particle-container.js"),xt=n("./node_modules/@pixi/prepare/dist/esm/prepare.js"),St=n("./node_modules/@pixi/spritesheet/dist/esm/spritesheet.js"),Ot=n("./node_modules/@pixi/sprite-tiling/dist/esm/sprite-tiling.js"),Pt=n("./node_modules/@pixi/text-bitmap/dist/esm/text-bitmap.js"),Rt=function(t,e){return(Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var At=function(t){function e(e){void 0===e&&(e=1);var n=t.call(this,S.qb,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return n.alpha=e,n}return function(t,e){function n(){this.constructor=t}Rt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(S.u),It=n("./node_modules/@pixi/settings/dist/esm/settings.js"),Ct=function(t,e){return(Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function kt(t,e){function n(){this.constructor=t}Ct(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Nt,Mt,jt,Dt,Lt,Bt,Ft,Ut,Gt,Ht,Vt,Xt,Wt,Yt,zt,qt,Kt,Zt,$t,Jt={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Qt=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Nt||(Nt={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Mt||(Mt={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(jt||(jt={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Dt||(Dt={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Lt||(Lt={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Bt||(Bt={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Ft||(Ft={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Ut||(Ut={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(Gt||(Gt={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(Ht||(Ht={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Vt||(Vt={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(Xt||(Xt={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Wt||(Wt={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Yt||(Yt={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(zt||(zt={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(qt||(qt={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(Kt||(Kt={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Zt||(Zt={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}($t||($t={}));var te=function(t){function e(e,n,r,i,o){void 0===n&&(n=8),void 0===r&&(r=4),void 0===i&&(i=It.b.FILTER_RESOLUTION),void 0===o&&(o=5);var a=this,s=function(t,e){var n,r=Math.ceil(t/2),i="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";n=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var s=n.replace("%index%",a.toString());o+=s=s.replace("%sampleIndex%",a-(r-1)+".0"),o+="\n"}return i=(i=i.replace("%blur%",o)).replace("%size%",t.toString())}(o,e),u=function(t){for(var e,n=Jt[t],r=n.length,i=Qt,o="",a=0;a<t;a++){var s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",a.toString());e=a,a>=r&&(e=t-a-1),o+=s=s.replace("%value%",n[e].toString()),o+="\n"}return i=(i=i.replace("%blur%",o)).replace("%size%",t.toString())}
/*!
 * @pixi/constants - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */(o);return(a=t.call(this,s,u)||this).horizontal=e,a.resolution=i,a._quality=0,a.quality=r,a.blur=n,a}return kt(e,t),e.prototype.apply=function(t,e,n,r){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/e.width):this.uniforms.strength=1/n.height*(n.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,n,r);else{var i=t.getFilterTexture(),o=t.renderer,a=e,s=i;this.state.blend=!1,t.applyFilter(this,a,s,Yt.CLEAR);for(var u=1;u<this.passes-1;u++){t.bindAndClear(a,Yt.BLIT),this.uniforms.uSampler=s;var c=s;s=a,a=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,s,n,r),t.returnFilterTexture(i)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(S.u),ee=function(t){function e(e,n,r,i){void 0===e&&(e=8),void 0===n&&(n=4),void 0===r&&(r=It.b.FILTER_RESOLUTION),void 0===i&&(i=5);var o=t.call(this)||this;return o.blurXFilter=new te(!0,e,n,r,i),o.blurYFilter=new te(!1,e,n,r,i),o.resolution=r,o.quality=n,o.blur=e,o.repeatEdgePixels=!1,o}return kt(e,t),e.prototype.apply=function(t,e,n,r){var i=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(i&&o){var a=t.getFilterTexture();this.blurXFilter.apply(t,e,a,Yt.CLEAR),this.blurYFilter.apply(t,a,n,r),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,e,n,r):this.blurXFilter.apply(t,e,n,r)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(S.u),ne=function(t,e){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var re=function(t){function e(){var e=this,n={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,S.pb,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",n)||this).alpha=1,e}return function(t,e){function n(){this.constructor=t}ne(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var n=t;e&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n},e.prototype._multiply=function(t,e,n){return t[0]=e[0]*n[0]+e[1]*n[5]+e[2]*n[10]+e[3]*n[15],t[1]=e[0]*n[1]+e[1]*n[6]+e[2]*n[11]+e[3]*n[16],t[2]=e[0]*n[2]+e[1]*n[7]+e[2]*n[12]+e[3]*n[17],t[3]=e[0]*n[3]+e[1]*n[8]+e[2]*n[13]+e[3]*n[18],t[4]=e[0]*n[4]+e[1]*n[9]+e[2]*n[14]+e[3]*n[19]+e[4],t[5]=e[5]*n[0]+e[6]*n[5]+e[7]*n[10]+e[8]*n[15],t[6]=e[5]*n[1]+e[6]*n[6]+e[7]*n[11]+e[8]*n[16],t[7]=e[5]*n[2]+e[6]*n[7]+e[7]*n[12]+e[8]*n[17],t[8]=e[5]*n[3]+e[6]*n[8]+e[7]*n[13]+e[8]*n[18],t[9]=e[5]*n[4]+e[6]*n[9]+e[7]*n[14]+e[8]*n[19]+e[9],t[10]=e[10]*n[0]+e[11]*n[5]+e[12]*n[10]+e[13]*n[15],t[11]=e[10]*n[1]+e[11]*n[6]+e[12]*n[11]+e[13]*n[16],t[12]=e[10]*n[2]+e[11]*n[7]+e[12]*n[12]+e[13]*n[17],t[13]=e[10]*n[3]+e[11]*n[8]+e[12]*n[13]+e[13]*n[18],t[14]=e[10]*n[4]+e[11]*n[9]+e[12]*n[14]+e[13]*n[19]+e[14],t[15]=e[15]*n[0]+e[16]*n[5]+e[17]*n[10]+e[18]*n[15],t[16]=e[15]*n[1]+e[16]*n[6]+e[17]*n[11]+e[18]*n[16],t[17]=e[15]*n[2]+e[16]*n[7]+e[17]*n[12]+e[18]*n[17],t[18]=e[15]*n[3]+e[16]*n[8]+e[17]*n[13]+e[18]*n[18],t[19]=e[15]*n[4]+e[16]*n[9]+e[17]*n[14]+e[18]*n[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.tint=function(t,e){var n=[(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.greyscale=function(t,e){var n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var n=Math.cos(t),r=Math.sin(t),i=1/3,o=(0,Math.sqrt)(i),a=[n+(1-n)*i,i*(1-n)-o*r,i*(1-n)+o*r,0,0,i*(1-n)+o*r,n+i*(1-n),i*(1-n)-o*r,0,0,i*(1-n)-o*r,i*(1-n)+o*r,n+i*(1-n),0,0,0,0,0,1,0];this._loadMatrix(a,e)},e.prototype.contrast=function(t,e){var n=(t||0)+1,r=-.5*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var n=2*t/3+1,r=-.5*(n-1),i=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,n,r,i){var o=((n=n||16770432)>>16&255)/255,a=(n>>8&255)/255,s=(255&n)/255,u=((r=r||3375104)>>16&255)/255,c=(r>>8&255)/255,l=(255&r)/255,h=[.3,.59,.11,0,0,o,a,s,t=t||.2,0,u,c,l,e=e||.15,0,o-u,a-c,s-l,0,0];this._loadMatrix(h,i)},e.prototype.night=function(t,e){var n=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.predator=function(t,e){var n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(S.u);re.prototype.grayscale=re.prototype.greyscale;
/*!
 * @pixi/filter-displacement - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var ie=function(t,e){return(ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var oe=function(t){function e(e,n){var r=this,i=new y.d;return e.renderable=!1,(r=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,r.maskMatrix=i,null==n&&(n=20),r.scale=new y.g(n,n),r}return function(t,e){function n(){this.constructor=t}ie(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.apply=function(t,e,n,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var i=this.maskSprite.worldTransform,o=Math.sqrt(i.a*i.a+i.b*i.b),a=Math.sqrt(i.c*i.c+i.d*i.d);0!==o&&0!==a&&(this.uniforms.rotation[0]=i.a/o,this.uniforms.rotation[1]=i.b/o,this.uniforms.rotation[2]=i.c/a,this.uniforms.rotation[3]=i.d/a),t.applyFilter(this,e,n,r)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(S.u),ae=function(t,e){return(ae=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var se=function(t){function e(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function(t,e){function n(){this.constructor=t}ae(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(S.u),ue=function(t,e){return(ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var ce,le,he,fe,pe,de,ye,me,ve,_e,ge,be,Ee,Te,we,xe,Se,Oe,Pe,Re=function(t){function e(e,n){void 0===e&&(e=.5),void 0===n&&(n=Math.random());var r=t.call(this,S.pb,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return r.noise=e,r.seed=n,r}return function(t,e){function n(){this.constructor=t}ue(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(S.u),Ae=n("./node_modules/@pixi/sprite/dist/esm/sprite.js");!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(ce||(ce={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(le||(le={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(he||(he={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(fe||(fe={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(pe||(pe={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(de||(de={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(ye||(ye={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(me||(me={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(ve||(ve={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(_e||(_e={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(ge||(ge={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(be||(be={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Ee||(Ee={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Te||(Te={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(we||(we={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(xe||(xe={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(Se||(Se={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Oe||(Oe={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(Pe||(Pe={}));var Ie=new y.d;f.c.prototype._cacheAsBitmap=!1,f.c.prototype._cacheData=null,f.c.prototype._cacheAsBitmapResolution=null,f.c.prototype._cacheAsBitmapMultisample=Oe.NONE;var Ce=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(f.c.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new Ce),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),f.c.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},f.c.prototype._initCachedDisplayObject=function(t){var e;if(!this._cacheData||!this._cacheData.sprite){var n=this.alpha;this.alpha=1,t.batch.flush();var r=this.getLocalBounds(null,!0).clone();if(this.filters){var i=this.filters[0].padding;r.pad(i)}r.ceil(It.b.RESOLUTION);var o=t.renderTexture.current,a=t.renderTexture.sourceFrame.clone(),s=t.renderTexture.destinationFrame.clone(),u=t.projection.transform,c=S.P.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:null!==(e=this.cacheAsBitmapMultisample)&&void 0!==e?e:t.multisample}),l="cacheAsBitmap_"+Object(h.uid)();this._cacheData.textureCacheId=l,S.h.addToCache(c.baseTexture,l),S.db.addToCache(c,l);var f=this.transform.localTransform.copyTo(Ie).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:c,clear:!0,transform:f,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=u,t.renderTexture.bind(o,a,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var p=new Ae.a(c);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-r.x/r.width,p.anchor.y=-r.y/r.height,p.alpha=n,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=p.containsPoint.bind(p)}},f.c.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},f.c.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;var r=t.context,i=t._projTransform;e.ceil(It.b.RESOLUTION);var o=S.P.create({width:e.width,height:e.height}),a="cacheAsBitmap_"+Object(h.uid)();this._cacheData.textureCacheId=a,S.h.addToCache(o.baseTexture,a),S.db.addToCache(o,a);var s=Ie;this.transform.localTransform.copyTo(s),s.invert(),s.tx-=e.x,s.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:s,skipUpdateTransform:!1}),t.context=r,t._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;var u=new Ae.a(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-e.x/e.width,u.anchor.y=-e.y/e.height,u.alpha=n,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}},f.c.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},f.c.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},f.c.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,S.h.removeFromCache(this._cacheData.textureCacheId),S.db.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},f.c.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},
/*!
 * @pixi/mixin-get-child-by-name - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
f.c.prototype.name=null,f.b.prototype.getChildByName=function(t,e){for(var n=0,r=this.children.length;n<r;n++)if(this.children[n].name===t)return this.children[n];if(e)for(n=0,r=this.children.length;n<r;n++){if(this.children[n].getChildByName){var i=this.children[n].getChildByName(t,!0);if(i)return i}}return null},
/*!
 * @pixi/mixin-get-global-position - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
f.c.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new y.g),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var ke=n("./node_modules/@pixi/graphics/dist/esm/graphics.js"),Ne=n("./node_modules/@pixi/mesh/dist/esm/mesh.js"),Me=n("./node_modules/@pixi/mesh-extras/dist/esm/mesh-extras.js"),je=n("./node_modules/@pixi/runner/dist/esm/runner.js"),De=function(t,e){return(De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var Le=function(t){function e(e,n){void 0===n&&(n=!0);var r=t.call(this,e[0]instanceof S.db?e[0]:e[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=n,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=e,r}return function(t,e){function n(){this.constructor=t}De(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(m.a.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(m.a.shared.add(this.update,this,m.c.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,n=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var n=[],r=0;r<t.length;++r)n.push(S.db.from(t[r]));return new e(n)},e.fromImages=function(t){for(var n=[],r=0;r<t.length;++r)n.push(S.db.from(t[r]));return new e(n)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof S.db)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(m.a.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(m.a.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(Ae.a),Be=n("./node_modules/@pixi/text/dist/esm/text.js");
/*!
 * pixi.js - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
S.S.registerPlugin("accessibility",d),S.S.registerPlugin("extract",C),S.S.registerPlugin("interaction",x),S.S.registerPlugin("particle",wt.b),S.S.registerPlugin("prepare",xt.c),S.S.registerPlugin("batch",S.l),S.S.registerPlugin("tilingSprite",Ot.b),k.b.registerPlugin(Pt.c),k.b.registerPlugin(H),k.b.registerPlugin(at),k.b.registerPlugin(Tt),k.b.registerPlugin(St.b),O.registerPlugin(m.b),O.registerPlugin(k.a);var Fe="6.2.0",Ue={AlphaFilter:At,BlurFilter:ee,BlurFilterPass:te,ColorMatrixFilter:re,DisplacementFilter:oe,FXAAFilter:se,NoiseFilter:Re}},"./node_modules/process/browser.js":function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var t=s(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"./node_modules/promise-polyfill/src/allSettled.js":function(t,e,n){"use strict";e.a=function(t){return new this((function(e,n){if(!t||void 0===t.length)return n(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,n){if(n&&("object"==typeof n||"function"==typeof n)){var a=n.then;if("function"==typeof a)return void a.call(n,(function(e){o(t,e)}),(function(n){r[t]={status:"rejected",reason:n},0==--i&&e(r)}))}r[t]={status:"fulfilled",value:n},0==--i&&e(r)}for(var a=0;a<r.length;a++)o(a,r[a])}))}},"./node_modules/promise-polyfill/src/finally.js":function(t,e,n){"use strict";e.a=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))}},"./node_modules/promise-polyfill/src/index.js":function(t,e,n){"use strict";(function(t){var r=n("./node_modules/promise-polyfill/src/finally.js"),i=n("./node_modules/promise-polyfill/src/allSettled.js"),o=setTimeout,a=void 0!==t?t:null;function s(t){return Boolean(t&&void 0!==t.length)}function u(){}function c(t){if(!(this instanceof c))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],y(t,this)}function l(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,c._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void f(e.promise,t)}h(e.promise,r)}else(1===t._state?h:f)(e.promise,t._value)}))):t._deferreds.push(e)}function h(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof c)return t._state=3,t._value=e,void p(t);if("function"==typeof n)return void y((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,p(t)}catch(e){f(t,e)}var r,i}function f(t,e){t._state=2,t._value=e,p(t)}function p(t){2===t._state&&0===t._deferreds.length&&c._immediateFn((function(){t._handled||c._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)l(t,t._deferreds[e]);t._deferreds=null}function d(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function y(t,e){var n=!1;try{t((function(t){n||(n=!0,h(e,t))}),(function(t){n||(n=!0,f(e,t))}))}catch(t){if(n)return;n=!0,f(e,t)}}c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){var n=new this.constructor(u);return l(this,new d(t,e,n)),n},c.prototype.finally=r.a,c.all=function(t){return new c((function(e,n){if(!s(t))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var i=r.length;function o(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(e){o(t,e)}),n)}r[t]=a,0==--i&&e(r)}catch(t){n(t)}}for(var a=0;a<r.length;a++)o(a,r[a])}))},c.allSettled=i.a,c.resolve=function(t){return t&&"object"==typeof t&&t.constructor===c?t:new c((function(e){e(t)}))},c.reject=function(t){return new c((function(e,n){n(t)}))},c.race=function(t){return new c((function(e,n){if(!s(t))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=t.length;r<i;r++)c.resolve(t[r]).then(e,n)}))},c._immediateFn="function"==typeof a&&function(t){a(t)}||function(t){o(t,0)},c._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},e.a=c}).call(this,n("./node_modules/node-libs-browser/node_modules/timers-browserify/main.js").setImmediate)},"./node_modules/punycode/punycode.js":function(t,e,n){(function(t,r){var i;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(o){e&&e.nodeType,t&&t.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var s,u=2147483647,c=/^xn--/,l=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,d=String.fromCharCode;function y(t){throw new RangeError(f[t])}function m(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function v(t,e){var n=t.split("@"),r="";return n.length>1&&(r=n[0]+"@",t=n[1]),r+m((t=t.replace(h,".")).split("."),e).join(".")}function _(t){for(var e,n,r=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function g(t){return m(t,(function(t){var e="";return t>65535&&(e+=d((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=d(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function E(t,e,n){var r=0;for(t=n?p(t/700):t>>1,t+=p(t/e);t>455;r+=36)t=p(t/35);return p(r+36*t/(t+38))}function T(t){var e,n,r,i,o,a,s,c,l,h,f,d=[],m=t.length,v=0,_=128,b=72;for((n=t.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&y("not-basic"),d.push(t.charCodeAt(r));for(i=n>0?n+1:0;i<m;){for(o=v,a=1,s=36;i>=m&&y("invalid-input"),((c=(f=t.charCodeAt(i++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:36)>=36||c>p((u-v)/a))&&y("overflow"),v+=c*a,!(c<(l=s<=b?1:s>=b+26?26:s-b));s+=36)a>p(u/(h=36-l))&&y("overflow"),a*=h;b=E(v-o,e=d.length+1,0==o),p(v/e)>u-_&&y("overflow"),_+=p(v/e),v%=e,d.splice(v++,0,_)}return g(d)}function w(t){var e,n,r,i,o,a,s,c,l,h,f,m,v,g,T,w=[];for(m=(t=_(t)).length,e=128,n=0,o=72,a=0;a<m;++a)(f=t[a])<128&&w.push(d(f));for(r=i=w.length,i&&w.push("-");r<m;){for(s=u,a=0;a<m;++a)(f=t[a])>=e&&f<s&&(s=f);for(s-e>p((u-n)/(v=r+1))&&y("overflow"),n+=(s-e)*v,e=s,a=0;a<m;++a)if((f=t[a])<e&&++n>u&&y("overflow"),f==e){for(c=n,l=36;!(c<(h=l<=o?1:l>=o+26?26:l-o));l+=36)T=c-h,g=36-h,w.push(d(b(h+T%g,0))),c=p(T/g);w.push(d(b(c,0))),o=E(n,v,r==i),n=0,++r}++n,++e}return w.join("")}s={version:"1.4.1",ucs2:{decode:_,encode:g},decode:T,encode:w,toASCII:function(t){return v(t,(function(t){return l.test(t)?"xn--"+w(t):t}))},toUnicode:function(t){return v(t,(function(t){return c.test(t)?T(t.slice(4).toLowerCase()):t}))}},void 0===(i=function(){return s}.call(e,n,e,t))||(t.exports=i)}()}).call(this,n("./node_modules/webpack/buildin/module.js")(t),n("./node_modules/webpack/buildin/global.js"))},"./node_modules/qs/lib/formats.js":function(t,e,n){"use strict";var r=String.prototype.replace,i=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return r.call(t,i,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},"./node_modules/qs/lib/index.js":function(t,e,n){"use strict";var r=n("./node_modules/qs/lib/stringify.js"),i=n("./node_modules/qs/lib/parse.js"),o=n("./node_modules/qs/lib/formats.js");t.exports={formats:o,parse:i,stringify:r}},"./node_modules/qs/lib/parse.js":function(t,e,n){"use strict";var r=n("./node_modules/qs/lib/utils.js"),i=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},a=function(t,e,n){if(t){var r=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(r),s=a?r.slice(0,a.index):r,u=[];if(s){if(!n.plainObjects&&i.call(Object.prototype,s)&&!n.allowPrototypes)return;u.push(s)}for(var c=0;null!==(a=o.exec(r))&&c<n.depth;){if(c+=1,!n.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+r.slice(a.index)+"]"),function(t,e,n){for(var r=e,i=t.length-1;i>=0;--i){var o,a=t[i];if("[]"===a)o=(o=[]).concat(r);else{o=n.plainObjects?Object.create(null):{};var s="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(s,10);!isNaN(u)&&a!==s&&String(u)===s&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(o=[])[u]=r:o[s]=r}r=o}return r}(u,e,n)}};t.exports=function(t,e){var n=e?r.assign({},e):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:o.delimiter,n.depth="number"==typeof n.depth?n.depth:o.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:o.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:o.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:o.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:o.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:o.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:o.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:o.strictNullHandling,""===t||null==t)return n.plainObjects?Object.create(null):{};for(var s="string"==typeof t?function(t,e){for(var n={},r=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,a=e.parameterLimit===1/0?void 0:e.parameterLimit,s=r.split(e.delimiter,a),u=0;u<s.length;++u){var c,l,h=s[u],f=h.indexOf("]="),p=-1===f?h.indexOf("="):f+1;-1===p?(c=e.decoder(h,o.decoder),l=e.strictNullHandling?null:""):(c=e.decoder(h.slice(0,p),o.decoder),l=e.decoder(h.slice(p+1),o.decoder)),i.call(n,c)?n[c]=[].concat(n[c]).concat(l):n[c]=l}return n}(t,n):t,u=n.plainObjects?Object.create(null):{},c=Object.keys(s),l=0;l<c.length;++l){var h=c[l],f=a(h,s[h],n);u=r.merge(u,f,n)}return r.compact(u)}},"./node_modules/qs/lib/stringify.js":function(t,e,n){"use strict";var r=n("./node_modules/qs/lib/utils.js"),i=n("./node_modules/qs/lib/formats.js"),o={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},a=Date.prototype.toISOString,s={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(t){return a.call(t)},skipNulls:!1,strictNullHandling:!1},u=function t(e,n,i,o,a,u,c,l,h,f,p,d){var y=e;if("function"==typeof c)y=c(n,y);else if(y instanceof Date)y=f(y);else if(null===y){if(o)return u&&!d?u(n,s.encoder):n;y=""}if("string"==typeof y||"number"==typeof y||"boolean"==typeof y||r.isBuffer(y))return u?[p(d?n:u(n,s.encoder))+"="+p(u(y,s.encoder))]:[p(n)+"="+p(String(y))];var m,v=[];if(void 0===y)return v;if(Array.isArray(c))m=c;else{var _=Object.keys(y);m=l?_.sort(l):_}for(var g=0;g<m.length;++g){var b=m[g];a&&null===y[b]||(v=Array.isArray(y)?v.concat(t(y[b],i(n,b),i,o,a,u,c,l,h,f,p,d)):v.concat(t(y[b],n+(h?"."+b:"["+b+"]"),i,o,a,u,c,l,h,f,p,d)))}return v};t.exports=function(t,e){var n=t,a=e?r.assign({},e):{};if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===a.delimiter?s.delimiter:a.delimiter,l="boolean"==typeof a.strictNullHandling?a.strictNullHandling:s.strictNullHandling,h="boolean"==typeof a.skipNulls?a.skipNulls:s.skipNulls,f="boolean"==typeof a.encode?a.encode:s.encode,p="function"==typeof a.encoder?a.encoder:s.encoder,d="function"==typeof a.sort?a.sort:null,y=void 0!==a.allowDots&&a.allowDots,m="function"==typeof a.serializeDate?a.serializeDate:s.serializeDate,v="boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:s.encodeValuesOnly;if(void 0===a.format)a.format=i.default;else if(!Object.prototype.hasOwnProperty.call(i.formatters,a.format))throw new TypeError("Unknown format option provided.");var _,g,b=i.formatters[a.format];"function"==typeof a.filter?n=(g=a.filter)("",n):Array.isArray(a.filter)&&(_=g=a.filter);var E,T=[];if("object"!=typeof n||null===n)return"";E=a.arrayFormat in o?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":"indices";var w=o[E];_||(_=Object.keys(n)),d&&_.sort(d);for(var x=0;x<_.length;++x){var S=_[x];h&&null===n[S]||(T=T.concat(u(n[S],S,w,l,h,f?p:null,g,d,y,m,b,v)))}var O=T.join(c),P=!0===a.addQueryPrefix?"?":"";return O.length>0?P+O:""}},"./node_modules/qs/lib/utils.js":function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),o=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(n[r]=t[r]);return n};t.exports={arrayToObject:o,assign:function(t,e){return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),t)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var i=e[r],o=i.obj[i.prop],a=Object.keys(o),s=0;s<a.length;++s){var u=a[s],c=o[u];"object"==typeof c&&null!==c&&-1===n.indexOf(c)&&(e.push({obj:o,prop:u}),n.push(c))}return function(t){for(var e;t.length;){var n=t.pop();if(e=n.obj[n.prop],Array.isArray(e)){for(var r=[],i=0;i<e.length;++i)void 0!==e[i]&&r.push(e[i]);n.obj[n.prop]=r}}return e}(e)},decode:function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},encode:function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),n="",r=0;r<e.length;++r){var o=e.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?n+=e.charAt(r):o<128?n+=i[o]:o<2048?n+=i[192|o>>6]+i[128|63&o]:o<55296||o>=57344?n+=i[224|o>>12]+i[128|o>>6&63]+i[128|63&o]:(r+=1,o=65536+((1023&o)<<10|1023&e.charCodeAt(r)),n+=i[240|o>>18]+i[128|o>>12&63]+i[128|o>>6&63]+i[128|63&o])}return n},isBuffer:function(t){return null!=t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,n,i){if(!n)return e;if("object"!=typeof n){if(Array.isArray(e))e.push(n);else{if("object"!=typeof e)return[e,n];(i.plainObjects||i.allowPrototypes||!r.call(Object.prototype,n))&&(e[n]=!0)}return e}if("object"!=typeof e)return[e].concat(n);var a=e;return Array.isArray(e)&&!Array.isArray(n)&&(a=o(e,i)),Array.isArray(e)&&Array.isArray(n)?(n.forEach((function(n,o){r.call(e,o)?e[o]&&"object"==typeof e[o]?e[o]=t(e[o],n,i):e.push(n):e[o]=n})),e):Object.keys(n).reduce((function(e,o){var a=n[o];return r.call(e,o)?e[o]=t(e[o],a,i):e[o]=a,e}),a)}}},"./node_modules/querystring-es3/decode.js":function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var s=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;l<c;++l){var h,f,p,d,y=t[l].replace(s,"%20"),m=y.indexOf(n);m>=0?(h=y.substr(0,m),f=y.substr(m+1)):(h=y,f=""),p=decodeURIComponent(h),d=decodeURIComponent(f),r(a,p)?i(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},"./node_modules/querystring-es3/encode.js":function(t,e,n){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?o(a(t),(function(a){var s=encodeURIComponent(r(a))+n;return i(t[a])?o(t[a],(function(t){return s+encodeURIComponent(r(t))})).join(e):s+encodeURIComponent(r(t[a]))})).join(e):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(t)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var a=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},"./node_modules/querystring-es3/index.js":function(t,e,n){"use strict";e.decode=e.parse=n("./node_modules/querystring-es3/decode.js"),e.encode=e.stringify=n("./node_modules/querystring-es3/encode.js")},"./node_modules/ramda/es/always.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/internal/_curry1.js"),i=Object(r.a)((function(t){return function(){return t}}));e.a=i},"./node_modules/ramda/es/clone.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/type.js");function i(t,e,n,o){var a,s=function(r){for(var a=e.length,s=0;s<a;){if(t===e[s])return n[s];s+=1}for(var u in e[s+1]=t,n[s+1]=r,t)r[u]=o?i(t[u],e,n,!0):t[u];return r};switch(Object(r.a)(t)){case"Object":return s({});case"Array":return s([]);case"Date":return new Date(t.valueOf());case"RegExp":return a=t,new RegExp(a.source,(a.global?"g":"")+(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.sticky?"y":"")+(a.unicode?"u":""));default:return t}}var o=n("./node_modules/ramda/es/internal/_curry1.js"),a=Object(o.a)((function(t){return null!=t&&"function"==typeof t.clone?t.clone():i(t,[],[],!0)}));e.a=a},"./node_modules/ramda/es/curryN.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/internal/_arity.js"),i=n("./node_modules/ramda/es/internal/_curry1.js"),o=n("./node_modules/ramda/es/internal/_curry2.js"),a=n("./node_modules/ramda/es/internal/_curryN.js"),s=Object(o.a)((function(t,e){return 1===t?Object(i.a)(e):Object(r.a)(t,Object(a.a)(t,[],e))}));e.a=s},"./node_modules/ramda/es/equals.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/internal/_curry2.js");function i(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}var o=n("./node_modules/ramda/es/internal/_includesWith.js");var a=n("./node_modules/ramda/es/internal/_has.js");var s="function"==typeof Object.is?Object.is:function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},u=n("./node_modules/ramda/es/keys.js"),c=n("./node_modules/ramda/es/type.js");function l(t,e,n,r){var a=i(t),s=i(e);function u(t,e){return h(t,e,n.slice(),r.slice())}return!Object(o.a)((function(t,e){return!Object(o.a)(u,e,t)}),s,a)}function h(t,e,n,r){if(s(t,e))return!0;var i,o,f=Object(c.a)(t);if(f!==Object(c.a)(e))return!1;if(null==t||null==e)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(f){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===(i=t.constructor,null==(o=String(i).match(/^function (\w*)/))?"":o[1]))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!s(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!s(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var p=n.length-1;p>=0;){if(n[p]===t)return r[p]===e;p-=1}switch(f){case"Map":return t.size===e.size&&l(t.entries(),e.entries(),n.concat([t]),r.concat([e]));case"Set":return t.size===e.size&&l(t.values(),e.values(),n.concat([t]),r.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var d=Object(u.a)(t);if(d.length!==Object(u.a)(e).length)return!1;var y=n.concat([t]),m=r.concat([e]);for(p=d.length-1;p>=0;){var v=d[p];if(!Object(a.a)(v,e)||!h(e[v],t[v],y,m))return!1;p-=1}return!0}var f=Object(r.a)((function(t,e){return h(t,e,[],[])}));e.a=f},"./node_modules/ramda/es/flatten.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/internal/_curry1.js"),i=n("./node_modules/ramda/es/internal/_isArrayLike.js");function o(t){return function e(n){for(var r,o,a,s=[],u=0,c=n.length;u<c;){if(Object(i.a)(n[u]))for(a=0,o=(r=t?e(n[u]):n[u]).length;a<o;)s[s.length]=r[a],a+=1;else s[s.length]=n[u];u+=1}return s}}var a=Object(r.a)(o(!0));e.a=a},"./node_modules/ramda/es/internal/_arity.js":function(t,e,n){"use strict";function r(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,i){return e.apply(this,arguments)};case 5:return function(t,n,r,i,o){return e.apply(this,arguments)};case 6:return function(t,n,r,i,o,a){return e.apply(this,arguments)};case 7:return function(t,n,r,i,o,a,s){return e.apply(this,arguments)};case 8:return function(t,n,r,i,o,a,s,u){return e.apply(this,arguments)};case 9:return function(t,n,r,i,o,a,s,u,c){return e.apply(this,arguments)};case 10:return function(t,n,r,i,o,a,s,u,c,l){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}n.d(e,"a",(function(){return r}))},"./node_modules/ramda/es/internal/_curry1.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("./node_modules/ramda/es/internal/_isPlaceholder.js");function i(t){return function e(n){return 0===arguments.length||Object(r.a)(n)?e:t.apply(this,arguments)}}},"./node_modules/ramda/es/internal/_curry2.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("./node_modules/ramda/es/internal/_curry1.js"),i=n("./node_modules/ramda/es/internal/_isPlaceholder.js");function o(t){return function e(n,o){switch(arguments.length){case 0:return e;case 1:return Object(i.a)(n)?e:Object(r.a)((function(e){return t(n,e)}));default:return Object(i.a)(n)&&Object(i.a)(o)?e:Object(i.a)(n)?Object(r.a)((function(e){return t(e,o)})):Object(i.a)(o)?Object(r.a)((function(e){return t(n,e)})):t(n,o)}}}},"./node_modules/ramda/es/internal/_curry3.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("./node_modules/ramda/es/internal/_curry1.js"),i=n("./node_modules/ramda/es/internal/_curry2.js"),o=n("./node_modules/ramda/es/internal/_isPlaceholder.js");function a(t){return function e(n,a,s){switch(arguments.length){case 0:return e;case 1:return Object(o.a)(n)?e:Object(i.a)((function(e,r){return t(n,e,r)}));case 2:return Object(o.a)(n)&&Object(o.a)(a)?e:Object(o.a)(n)?Object(i.a)((function(e,n){return t(e,a,n)})):Object(o.a)(a)?Object(i.a)((function(e,r){return t(n,e,r)})):Object(r.a)((function(e){return t(n,a,e)}));default:return Object(o.a)(n)&&Object(o.a)(a)&&Object(o.a)(s)?e:Object(o.a)(n)&&Object(o.a)(a)?Object(i.a)((function(e,n){return t(e,n,s)})):Object(o.a)(n)&&Object(o.a)(s)?Object(i.a)((function(e,n){return t(e,a,n)})):Object(o.a)(a)&&Object(o.a)(s)?Object(i.a)((function(e,r){return t(n,e,r)})):Object(o.a)(n)?Object(r.a)((function(e){return t(e,a,s)})):Object(o.a)(a)?Object(r.a)((function(e){return t(n,e,s)})):Object(o.a)(s)?Object(r.a)((function(e){return t(n,a,e)})):t(n,a,s)}}}},"./node_modules/ramda/es/internal/_curryN.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("./node_modules/ramda/es/internal/_arity.js"),i=n("./node_modules/ramda/es/internal/_isPlaceholder.js");function o(t,e,n){return function(){for(var a=[],s=0,u=t,c=0;c<e.length||s<arguments.length;){var l;c<e.length&&(!Object(i.a)(e[c])||s>=arguments.length)?l=e[c]:(l=arguments[s],s+=1),a[c]=l,Object(i.a)(l)||(u-=1),c+=1}return u<=0?n.apply(this,a):Object(r.a)(u,o(t,a,n))}}},"./node_modules/ramda/es/internal/_dispatchable.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("./node_modules/ramda/es/internal/_isArray.js");function i(t){return null!=t&&"function"==typeof t["@@transducer/step"]}function o(t,e,n){return function(){if(0===arguments.length)return n();var o=Array.prototype.slice.call(arguments,0),a=o.pop();if(!Object(r.a)(a)){for(var s=0;s<t.length;){if("function"==typeof a[t[s]])return a[t[s]].apply(a,o);s+=1}if(i(a)){var u=e.apply(null,o);return u(a)}}return n.apply(this,arguments)}}},"./node_modules/ramda/es/internal/_has.js":function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(e,t)}n.d(e,"a",(function(){return r}))},"./node_modules/ramda/es/internal/_includes.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("./node_modules/ramda/es/equals.js");function i(t,e){return function(t,e,n){var i,o;if("function"==typeof t.indexOf)switch(typeof e){case"number":if(0===e){for(i=1/e;n<t.length;){if(0===(o=t[n])&&1/o===i)return n;n+=1}return-1}if(e!=e){for(;n<t.length;){if("number"==typeof(o=t[n])&&o!=o)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(null===e)return t.indexOf(e,n)}for(;n<t.length;){if(Object(r.a)(t[n],e))return n;n+=1}return-1}(e,t,0)>=0}},"./node_modules/ramda/es/internal/_includesWith.js":function(t,e,n){"use strict";function r(t,e,n){for(var r=0,i=n.length;r<i;){if(t(e,n[r]))return!0;r+=1}return!1}n.d(e,"a",(function(){return r}))},"./node_modules/ramda/es/internal/_isArguments.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/internal/_has.js"),i=Object.prototype.toString,o=function(){return"[object Arguments]"===i.call(arguments)?function(t){return"[object Arguments]"===i.call(t)}:function(t){return Object(r.a)("callee",t)}}();e.a=o},"./node_modules/ramda/es/internal/_isArray.js":function(t,e,n){"use strict";e.a=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)}},"./node_modules/ramda/es/internal/_isArrayLike.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/internal/_curry1.js"),i=n("./node_modules/ramda/es/internal/_isArray.js"),o=n("./node_modules/ramda/es/internal/_isString.js"),a=Object(r.a)((function(t){return!!Object(i.a)(t)||!!t&&("object"==typeof t&&(!Object(o.a)(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))}));e.a=a},"./node_modules/ramda/es/internal/_isObject.js":function(t,e,n){"use strict";function r(t){return"[object Object]"===Object.prototype.toString.call(t)}n.d(e,"a",(function(){return r}))},"./node_modules/ramda/es/internal/_isPlaceholder.js":function(t,e,n){"use strict";function r(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}n.d(e,"a",(function(){return r}))},"./node_modules/ramda/es/internal/_isString.js":function(t,e,n){"use strict";function r(t){return"[object String]"===Object.prototype.toString.call(t)}n.d(e,"a",(function(){return r}))},"./node_modules/ramda/es/internal/_map.js":function(t,e,n){"use strict";function r(t,e){for(var n=0,r=e.length,i=Array(r);n<r;)i[n]=t(e[n]),n+=1;return i}n.d(e,"a",(function(){return r}))},"./node_modules/ramda/es/internal/_reduce.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("./node_modules/ramda/es/internal/_isArrayLike.js"),i=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();var o=n("./node_modules/ramda/es/internal/_arity.js"),a=n("./node_modules/ramda/es/internal/_curry2.js"),s=Object(a.a)((function(t,e){return Object(o.a)(t.length,(function(){return t.apply(e,arguments)}))}));function u(t,e,n){for(var r=n.next();!r.done;){if((e=t["@@transducer/step"](e,r.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function c(t,e,n,r){return t["@@transducer/result"](n[r](s(t["@@transducer/step"],t),e))}var l="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function h(t,e,n){if("function"==typeof t&&(t=function(t){return new i(t)}(t)),Object(r.a)(n))return function(t,e,n){for(var r=0,i=n.length;r<i;){if((e=t["@@transducer/step"](e,n[r]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}(t,e,n);if("function"==typeof n["fantasy-land/reduce"])return c(t,e,n,"fantasy-land/reduce");if(null!=n[l])return u(t,e,n[l]());if("function"==typeof n.next)return u(t,e,n);if("function"==typeof n.reduce)return c(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}},"./node_modules/ramda/es/internal/_xfBase.js":function(t,e,n){"use strict";e.a={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}}},"./node_modules/ramda/es/isEmpty.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/internal/_curry1.js"),i=n("./node_modules/ramda/es/internal/_isArguments.js"),o=n("./node_modules/ramda/es/internal/_isArray.js"),a=n("./node_modules/ramda/es/internal/_isObject.js"),s=n("./node_modules/ramda/es/internal/_isString.js"),u=Object(r.a)((function(t){return null!=t&&"function"==typeof t["fantasy-land/empty"]?t["fantasy-land/empty"]():null!=t&&null!=t.constructor&&"function"==typeof t.constructor["fantasy-land/empty"]?t.constructor["fantasy-land/empty"]():null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():Object(o.a)(t)?[]:Object(s.a)(t)?"":Object(a.a)(t)?{}:Object(i.a)(t)?function(){return arguments}():void 0})),c=n("./node_modules/ramda/es/equals.js"),l=Object(r.a)((function(t){return null!=t&&Object(c.a)(t,u(t))}));e.a=l},"./node_modules/ramda/es/isNil.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/internal/_curry1.js"),i=Object(r.a)((function(t){return null==t}));e.a=i},"./node_modules/ramda/es/keys.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/internal/_curry1.js"),i=n("./node_modules/ramda/es/internal/_has.js"),o=n("./node_modules/ramda/es/internal/_isArguments.js"),a=!{toString:null}.propertyIsEnumerable("toString"),s=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],u=function(){return arguments.propertyIsEnumerable("length")}(),c=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},l="function"!=typeof Object.keys||u?Object(r.a)((function(t){if(Object(t)!==t)return[];var e,n,r=[],l=u&&Object(o.a)(t);for(e in t)!Object(i.a)(e,t)||l&&"length"===e||(r[r.length]=e);if(a)for(n=s.length-1;n>=0;)e=s[n],Object(i.a)(e,t)&&!c(r,e)&&(r[r.length]=e),n-=1;return r})):Object(r.a)((function(t){return Object(t)!==t?[]:Object.keys(t)}));e.a=l},"./node_modules/ramda/es/mergeDeepLeft.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/internal/_curry2.js"),i=n("./node_modules/ramda/es/mergeDeepWithKey.js"),o=Object(r.a)((function(t,e){return Object(i.a)((function(t,e,n){return e}),t,e)}));e.a=o},"./node_modules/ramda/es/mergeDeepRight.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/internal/_curry2.js"),i=n("./node_modules/ramda/es/mergeDeepWithKey.js"),o=Object(r.a)((function(t,e){return Object(i.a)((function(t,e,n){return n}),t,e)}));e.a=o},"./node_modules/ramda/es/mergeDeepWithKey.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/internal/_curry3.js"),i=n("./node_modules/ramda/es/internal/_isObject.js"),o=n("./node_modules/ramda/es/internal/_has.js"),a=Object(r.a)((function(t,e,n){var r,i={};for(r in e)Object(o.a)(r,e)&&(i[r]=Object(o.a)(r,n)?t(r,e[r],n[r]):e[r]);for(r in n)Object(o.a)(r,n)&&!Object(o.a)(r,i)&&(i[r]=n[r]);return i})),s=Object(r.a)((function t(e,n,r){return a((function(n,r,o){return Object(i.a)(r)&&Object(i.a)(o)?t(e,r,o):e(n,r,o)}),n,r)}));e.a=s},"./node_modules/ramda/es/path.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/internal/_curry2.js"),i=Object(r.a)((function(t,e){for(var n=e,r=0;r<t.length;){if(null==n)return;n=n[t[r]],r+=1}return n}));e.a=i},"./node_modules/ramda/es/range.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/internal/_curry2.js");function i(t){return"[object Number]"===Object.prototype.toString.call(t)}var o=Object(r.a)((function(t,e){if(!i(t)||!i(e))throw new TypeError("Both arguments to range must be numbers");for(var n=[],r=t;r<e;)n.push(r),r+=1;return n}));e.a=o},"./node_modules/ramda/es/reject.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/internal/_curry2.js"),i=n("./node_modules/ramda/es/internal/_dispatchable.js");var o=n("./node_modules/ramda/es/internal/_isObject.js"),a=n("./node_modules/ramda/es/internal/_reduce.js"),s=n("./node_modules/ramda/es/internal/_xfBase.js"),u=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=s.a.init,t.prototype["@@transducer/result"]=s.a.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},t}(),c=Object(r.a)((function(t,e){return new u(t,e)})),l=n("./node_modules/ramda/es/keys.js"),h=Object(r.a)(Object(i.a)(["filter"],c,(function(t,e){return Object(o.a)(e)?Object(a.a)((function(n,r){return t(e[r])&&(n[r]=e[r]),n}),{},Object(l.a)(e)):function(t,e){for(var n=0,r=e.length,i=[];n<r;)t(e[n])&&(i[i.length]=e[n]),n+=1;return i}(t,e)}))),f=Object(r.a)((function(t,e){return h((n=t,function(){return!n.apply(this,arguments)}),e);var n}));e.a=f},"./node_modules/ramda/es/times.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/internal/_curry2.js"),i=Object(r.a)((function(t,e){var n,r=Number(e),i=0;if(r<0||isNaN(r))throw new RangeError("n must be a non-negative number");for(n=new Array(r);i<r;)n[i]=t(i),i+=1;return n}));e.a=i},"./node_modules/ramda/es/type.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/internal/_curry1.js"),i=Object(r.a)((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));e.a=i},"./node_modules/ramda/es/without.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/internal/_includes.js"),i=n("./node_modules/ramda/es/internal/_curry2.js"),o=n("./node_modules/ramda/es/internal/_curry1.js"),a=n("./node_modules/ramda/es/curryN.js"),s=Object(o.a)((function(t){return Object(a.a)(t.length,(function(e,n){var r=Array.prototype.slice.call(arguments,0);return r[0]=n,r[1]=e,t.apply(this,r)}))})),u=n("./node_modules/ramda/es/reject.js"),c=Object(i.a)((function(t,e){return Object(u.a)(s(r.a)(t),e)}));e.a=c},"./node_modules/seamless-immutable/seamless-immutable.development.js":function(t,e,n){var r;!function(){"use strict";var i=function t(e){var n,r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element"),i={use_static:!1};function o(t){var e=Object.getPrototypeOf(t);return e?Object.create(e):{}}function a(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!1,value:n})}function s(t,e){a(t,e,(function(){throw new y("The "+e+" method cannot be invoked on an Immutable data structure.")}))}function u(t){return"object"!=typeof t||(null===t||Boolean(Object.getOwnPropertyDescriptor(t,"__immutable_invariants_hold")))}function c(t,e){return t===e||t!=t&&e!=e}function l(t){return!(null===t||"object"!=typeof t||Array.isArray(t)||t instanceof Date)}"object"!=typeof(n=e)||Array.isArray(n)||null===n||void 0!==e.use_static&&(i.use_static=Boolean(e.use_static));var h=["setPrototypeOf"],f=h.concat(["push","pop","sort","splice","shift","unshift","reverse"]),p=["keys"].concat(["map","filter","slice","concat","reduce","reduceRight"]),d=h.concat(["setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"]);function y(t){this.name="MyError",this.message=t,this.stack=(new Error).stack}function m(t,e){for(var n in a(t,"__immutable_invariants_hold",!0),e)e.hasOwnProperty(n)&&s(t,e[n]);return Object.freeze(t),t}function v(t,e){var n=t[e];a(t,e,(function(){return X(n.apply(t,arguments))}))}function _(t,e,n){var r=n&&n.deep;if(t in this&&(r&&this[t]!==e&&l(e)&&l(this[t])&&(e=X.merge(this[t],e,{deep:!0,mode:"replace"})),c(this[t],e)))return this;var i=S.call(this);return i[t]=X(e),E(i)}y.prototype=new Error,y.prototype.constructor=Error;var g=X([]);function b(t,e,n){var r=t[0];if(1===t.length)return _.call(this,r,e,n);var i,o=t.slice(1),a=this[r];if("object"==typeof a&&null!==a)i=X.setIn(a,o,e);else{var s=o[0];i=""!==s&&isFinite(s)?b.call(g,o,e):j.call(M,o,e)}if(r in this&&a===i)return this;var u=S.call(this);return u[r]=i,E(u)}function E(t){for(var e in p){if(p.hasOwnProperty(e))v(t,p[e])}i.use_static||(a(t,"flatMap",w),a(t,"asObject",O),a(t,"asMutable",S),a(t,"set",_),a(t,"setIn",b),a(t,"update",L),a(t,"updateIn",F),a(t,"getIn",U));for(var n=0,r=t.length;n<r;n++)t[n]=X(t[n]);return m(t,f)}function T(){return new Date(this.getTime())}function w(t){if(0===arguments.length)return this;var e,n=[],r=this.length;for(e=0;e<r;e++){var i=t(this[e],e,this);Array.isArray(i)?n.push.apply(n,i):n.push(i)}return E(n)}function x(t){if(void 0===t&&0===arguments.length)return this;if("function"!=typeof t){var e=Array.isArray(t)?t.slice():Array.prototype.slice.call(arguments);e.forEach((function(t,e,n){"number"==typeof t&&(n[e]=t.toString())})),t=function(t,n){return-1!==e.indexOf(n)}}var n=o(this);for(var r in this)this.hasOwnProperty(r)&&!1===t(this[r],r)&&(n[r]=this[r]);return V(n)}function S(t){var e,n,r=[];if(t&&t.deep)for(e=0,n=this.length;e<n;e++)r.push(P(this[e]));else for(e=0,n=this.length;e<n;e++)r.push(this[e]);return r}function O(t){"function"!=typeof t&&(t=function(t){return t});var e,n={},r=this.length;for(e=0;e<r;e++){var i=t(this[e],e,this),o=i[0],a=i[1];n[o]=a}return V(n)}function P(t){return!t||"object"!=typeof t||!Object.getOwnPropertyDescriptor(t,"__immutable_invariants_hold")||t instanceof Date?t:X.asMutable(t,{deep:!0})}function R(t,e){for(var n in t)Object.getOwnPropertyDescriptor(t,n)&&(e[n]=t[n]);return e}function A(t,e){if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#merge can only be invoked with objects or arrays, not "+JSON.stringify(t));var n,r,i=Array.isArray(t),a=e&&e.deep,s=e&&e.mode||"merge",u=e&&e.merger;function h(t,r,i){var s,h=X(r[i]),f=u&&u(t[i],h,e),p=t[i];void 0===n&&void 0===f&&t.hasOwnProperty(i)&&c(h,p)||(c(p,s=void 0!==f?f:a&&l(p)&&l(h)?X.merge(p,h,e):h)&&t.hasOwnProperty(i)||(void 0===n&&(n=R(t,o(t))),n[i]=s))}function f(t,e){for(var r in t)e.hasOwnProperty(r)||(void 0===n&&(n=R(t,o(t))),delete n[r])}if(i)for(var p=0,d=t.length;p<d;p++){var y=t[p];for(r in y)y.hasOwnProperty(r)&&h(void 0!==n?n:this,y,r)}else{for(r in t)Object.getOwnPropertyDescriptor(t,r)&&h(this,t,r);"replace"===s&&f(this,t)}return void 0===n?this:V(n)}function I(t,e){var n=e&&e.deep;if(0===arguments.length)return this;if(null===t||"object"!=typeof t)throw new TypeError("Immutable#replace can only be invoked with objects or arrays, not "+JSON.stringify(t));return X.merge(this,t,{deep:n,mode:"replace"})}var C,k,N,M=X({});function j(t,e,n){if(!Array.isArray(t)||0===t.length)throw new TypeError('The first argument to Immutable#setIn must be an array containing at least one "key" string.');var r=t[0];if(1===t.length)return D.call(this,r,e,n);var i,a=t.slice(1),s=this[r];if(i=this.hasOwnProperty(r)&&"object"==typeof s&&null!==s?X.setIn(s,a,e):j.call(M,a,e),this.hasOwnProperty(r)&&s===i)return this;var u=R(this,o(this));return u[r]=i,V(u)}function D(t,e,n){var r=n&&n.deep;if(this.hasOwnProperty(t)&&(r&&this[t]!==e&&l(e)&&l(this[t])&&(e=X.merge(this[t],e,{deep:!0,mode:"replace"})),c(this[t],e)))return this;var i=R(this,o(this));return i[t]=X(e),V(i)}function L(t,e){var n=Array.prototype.slice.call(arguments,2),r=this[t];return X.set(this,t,e.apply(r,[r].concat(n)))}function B(t,e){for(var n=0,r=e.length;null!=t&&n<r;n++)t=t[e[n]];return n&&n==r?t:void 0}function F(t,e){var n=Array.prototype.slice.call(arguments,2),r=B(this,t);return X.setIn(this,t,e.apply(r,[r].concat(n)))}function U(t,e){var n=B(this,t);return void 0===n?e:n}function G(t){var e,n=o(this);if(t&&t.deep)for(e in this)this.hasOwnProperty(e)&&(n[e]=P(this[e]));else for(e in this)this.hasOwnProperty(e)&&(n[e]=this[e]);return n}function H(){return{}}function V(t){return i.use_static||(a(t,"merge",A),a(t,"replace",I),a(t,"without",x),a(t,"asMutable",G),a(t,"set",D),a(t,"setIn",j),a(t,"update",L),a(t,"updateIn",F),a(t,"getIn",U)),m(t,h)}function X(t,e,n){if(u(t)||function(t){return"object"==typeof t&&null!==t&&(60103===t.$$typeof||t.$$typeof===r)}(t)||function(t){return"undefined"!=typeof File&&t instanceof File}(t)||function(t){return"undefined"!=typeof Blob&&t instanceof Blob}(t)||function(t){return t instanceof Error}(t))return t;if(function(t){return"object"==typeof t&&"function"==typeof t.then}(t))return t.then(X);if(Array.isArray(t))return E(t.slice());if(t instanceof Date)return o=new Date(t.getTime()),i.use_static||a(o,"asMutable",T),m(o,d);var o,s=e&&e.prototype,c=(s&&s!==Object.prototype?function(){return Object.create(s)}:H)();if(null==n&&(n=64),n<=0)throw new y("Attempt to construct Immutable from a deeply nested object was detected. Have you tried to wrap an object with circular references (e.g. React element)? See https://github.com/rtfeldman/seamless-immutable/wiki/Deeply-nested-object-was-detected for details.");for(var l in n-=1,t)Object.getOwnPropertyDescriptor(t,l)&&(c[l]=X(t[l],void 0,n));return V(c)}function W(t){return function(){var e=[].slice.call(arguments),n=e.shift();return t.apply(n,e)}}function Y(t,e){return function(){var n=[].slice.call(arguments),r=n.shift();return Array.isArray(r)?e.apply(r,n):t.apply(r,n)}}return X.from=X,X.isImmutable=u,X.ImmutableError=y,X.merge=W(A),X.replace=W(I),X.without=W(x),X.asMutable=(C=G,k=S,N=T,function(){var t=[].slice.call(arguments),e=t.shift();return Array.isArray(e)?k.apply(e,t):e instanceof Date?N.apply(e,t):C.apply(e,t)}),X.set=Y(D,_),X.setIn=Y(j,b),X.update=W(L),X.updateIn=W(F),X.getIn=W(U),X.flatMap=W(w),X.asObject=W(O),i.use_static||(X.static=t({use_static:!0})),Object.freeze(X),X}();void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r)}()},"./node_modules/seedrandom/index.js":function(t,e,n){var r=n("./node_modules/seedrandom/lib/alea.js"),i=n("./node_modules/seedrandom/lib/xor128.js"),o=n("./node_modules/seedrandom/lib/xorwow.js"),a=n("./node_modules/seedrandom/lib/xorshift7.js"),s=n("./node_modules/seedrandom/lib/xor4096.js"),u=n("./node_modules/seedrandom/lib/tychei.js"),c=n("./node_modules/seedrandom/seedrandom.js");c.alea=r,c.xor128=i,c.xorwow=o,c.xorshift7=a,c.xor4096=s,c.tychei=u,t.exports=c},"./node_modules/seedrandom/lib/alea.js":function(t,e,n){(function(t){var r;!function(t,i,o){function a(t){var e,n=this,r=(e=4022871197,function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function s(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function u(t,e){var n=new a(t),r=e&&e.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n("./node_modules/webpack/buildin/amd-define.js")&&n("./node_modules/webpack/buildin/amd-options.js")?void 0===(r=function(){return u}.call(e,n,e,i))||(i.exports=r):this.alea=u}(0,t,n("./node_modules/webpack/buildin/amd-define.js"))}).call(this,n("./node_modules/webpack/buildin/module.js")(t))},"./node_modules/seedrandom/lib/tychei.js":function(t,e,n){(function(t){var r;!function(t,i,o){function a(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function u(t,e){var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n("./node_modules/webpack/buildin/amd-define.js")&&n("./node_modules/webpack/buildin/amd-options.js")?void 0===(r=function(){return u}.call(e,n,e,i))||(i.exports=r):this.tychei=u}(0,t,n("./node_modules/webpack/buildin/amd-define.js"))}).call(this,n("./node_modules/webpack/buildin/module.js")(t))},"./node_modules/seedrandom/lib/xor128.js":function(t,e,n){(function(t){var r;!function(t,i,o){function a(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function u(t,e){var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n("./node_modules/webpack/buildin/amd-define.js")&&n("./node_modules/webpack/buildin/amd-options.js")?void 0===(r=function(){return u}.call(e,n,e,i))||(i.exports=r):this.xor128=u}(0,t,n("./node_modules/webpack/buildin/amd-define.js"))}).call(this,n("./node_modules/webpack/buildin/module.js")(t))},"./node_modules/seedrandom/lib/xor4096.js":function(t,e,n){(function(t){var r;!function(t,i,o){function a(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,o=e.i;return e.w=r=r+1640531527|0,n=i[o+34&127],t=i[o=o+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=i[o]=n^t,e.i=o,n+(r^r>>>16)|0},function(t,e){var n,r,i,o,a,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),i=0,o=-32;o<u;++o)e&&(r^=e.charCodeAt((o+32)%e.length)),0===o&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(a=a+1640531527|0,i=0==(n=s[127&o]^=r+a)?i+1:0);for(i>=128&&(s[127&(e&&e.length||0)]=-1),i=127,o=512;o>0;--o)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;t.w=a,t.X=s,t.i=i}(e,t)}function s(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function u(t,e){null==t&&(t=+new Date);var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&(r.X&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n("./node_modules/webpack/buildin/amd-define.js")&&n("./node_modules/webpack/buildin/amd-options.js")?void 0===(r=function(){return u}.call(e,n,e,i))||(i.exports=r):this.xor4096=u}(0,t,n("./node_modules/webpack/buildin/amd-define.js"))}).call(this,n("./node_modules/webpack/buildin/module.js")(t))},"./node_modules/seedrandom/lib/xorshift7.js":function(t,e,n){(function(t){var r;!function(t,i,o){function a(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],n=(t^=t>>>7)^t<<24,n^=(t=r[i+1&7])^t>>>10,n^=(t=r[i+3&7])^t>>>3,n^=(t=r[i+4&7])^t<<7,t=r[i+7&7],n^=(t^=t<<13)^t<<9,r[i]=n,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function s(t,e){return e.x=t.x.slice(),e.i=t.i,e}function u(t,e){null==t&&(t=+new Date);var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&(r.x&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n("./node_modules/webpack/buildin/amd-define.js")&&n("./node_modules/webpack/buildin/amd-options.js")?void 0===(r=function(){return u}.call(e,n,e,i))||(i.exports=r):this.xorshift7=u}(0,t,n("./node_modules/webpack/buildin/amd-define.js"))}).call(this,n("./node_modules/webpack/buildin/module.js")(t))},"./node_modules/seedrandom/lib/xorwow.js":function(t,e,n){(function(t){var r;!function(t,i,o){function a(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function u(t,e){var n=new a(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=u:n("./node_modules/webpack/buildin/amd-define.js")&&n("./node_modules/webpack/buildin/amd-options.js")?void 0===(r=function(){return u}.call(e,n,e,i))||(i.exports=r):this.xorwow=u}(0,t,n("./node_modules/webpack/buildin/amd-define.js"))}).call(this,n("./node_modules/webpack/buildin/module.js")(t))},"./node_modules/seedrandom/seedrandom.js":function(t,e,n){var r;!function(i,o,a){var s,u=a.pow(256,6),c=a.pow(2,52),l=2*c;function h(t,e,n){var r=[],h=d(function t(e,n){var r,i=[],o=typeof e;if(n&&"object"==o)for(r in e)try{i.push(t(e[r],n-1))}catch(t){}return i.length?i:"string"==o?e:e+"\0"}((e=1==e?{entropy:!0}:e||{}).entropy?[t,y(o)]:null==t?function(){try{var t;return s&&(t=s.randomBytes)?t=t(256):(t=new Uint8Array(256),(i.crypto||i.msCrypto).getRandomValues(t)),y(t)}catch(t){var e=i.navigator,n=e&&e.plugins;return[+new Date,i,n,i.screen,y(o)]}}():t,3),r),m=new f(r),v=function(){for(var t=m.g(6),e=u,n=0;t<c;)t=256*(t+n),e*=256,n=m.g(1);for(;t>=l;)t/=2,e/=2,n>>>=1;return(t+n)/e};return v.int32=function(){return 0|m.g(4)},v.quick=function(){return m.g(4)/4294967296},v.double=v,d(y(m.S),o),(e.pass||n||function(t,e,n,r){return r&&(r.S&&p(r,m),t.state=function(){return p(m,{})}),n?(a.random=t,e):t})(v,h,"global"in e?e.global:this==a,e.state)}function f(t){var e,n=t.length,r=this,i=0,o=r.i=r.j=0,a=r.S=[];for(n||(t=[n++]);i<256;)a[i]=i++;for(i=0;i<256;i++)a[i]=a[o=255&o+t[i%n]+(e=a[i])],a[o]=e;(r.g=function(t){for(var e,n=0,i=r.i,o=r.j,a=r.S;t--;)e=a[i=255&i+1],n=256*n+a[255&(a[i]=a[o=255&o+e])+(a[o]=e)];return r.i=i,r.j=o,n})(256)}function p(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function d(t,e){for(var n,r=t+"",i=0;i<r.length;)e[255&i]=255&(n^=19*e[255&i])+r.charCodeAt(i++);return y(e)}function y(t){return String.fromCharCode.apply(0,t)}if(d(a.random(),o),t.exports){t.exports=h;try{s=n(0)}catch(t){}}else void 0===(r=function(){return h}.call(e,n,e,t))||(t.exports=r)}("undefined"!=typeof self?self:this,[],Math)},"./node_modules/setimmediate/setImmediate.js":function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,s,u=1,c={},l=!1,h=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(t){var e=h.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return c[u]=i,r(u),u++},f.clearImmediate=p}function p(t){delete c[t]}function d(t){if(l)setTimeout(d,0,t);else{var e=c[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{p(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n("./node_modules/webpack/buildin/global.js"),n("./node_modules/process/browser.js"))},"./node_modules/url/url.js":function(t,e,n){"use strict";var r=n("./node_modules/punycode/punycode.js"),i=n("./node_modules/url/util.js");function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=g,e.resolve=function(t,e){return g(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?g(t,!1,!0).resolveObject(e):e},e.format=function(t){i.isString(t)&&(t=g(t));return t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,u=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(c),h=["%","/","?",";","#"].concat(l),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=n("./node_modules/querystring-es3/index.js");function g(t,e,n){if(t&&i.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,n),r}o.prototype.parse=function(t,e,n){if(!i.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),s=-1!==o&&o<t.indexOf("#")?"?":"#",c=t.split(s);c[0]=c[0].replace(/\\/g,"/");var g=t=c.join(s);if(g=g.trim(),!n&&1===t.split("#").length){var b=u.exec(g);if(b)return this.path=g,this.href=g,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var E=a.exec(g);if(E){var T=(E=E[0]).toLowerCase();this.protocol=T,g=g.substr(E.length)}if(n||E||g.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===g.substr(0,2);!w||E&&m[E]||(g=g.substr(2),this.slashes=!0)}if(!m[E]&&(w||E&&!v[E])){for(var x,S,O=-1,P=0;P<f.length;P++){-1!==(R=g.indexOf(f[P]))&&(-1===O||R<O)&&(O=R)}-1!==(S=-1===O?g.lastIndexOf("@"):g.lastIndexOf("@",O))&&(x=g.slice(0,S),g=g.slice(S+1),this.auth=decodeURIComponent(x)),O=-1;for(P=0;P<h.length;P++){var R;-1!==(R=g.indexOf(h[P]))&&(-1===O||R<O)&&(O=R)}-1===O&&(O=g.length),this.host=g.slice(0,O),g=g.slice(O),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var I=this.hostname.split(/\./),C=(P=0,I.length);P<C;P++){var k=I[P];if(k&&!k.match(p)){for(var N="",M=0,j=k.length;M<j;M++)k.charCodeAt(M)>127?N+="x":N+=k[M];if(!N.match(p)){var D=I.slice(0,P),L=I.slice(P+1),B=k.match(d);B&&(D.push(B[1]),L.unshift(B[2])),L.length&&(g="/"+L.join(".")+g),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=r.toASCII(this.hostname));var F=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+F,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==g[0]&&(g="/"+g))}if(!y[T])for(P=0,C=l.length;P<C;P++){var G=l[P];if(-1!==g.indexOf(G)){var H=encodeURIComponent(G);H===G&&(H=escape(G)),g=g.split(G).join(H)}}var V=g.indexOf("#");-1!==V&&(this.hash=g.substr(V),g=g.slice(0,V));var X=g.indexOf("?");if(-1!==X?(this.search=g.substr(X),this.query=g.substr(X+1),e&&(this.query=_.parse(this.query)),g=g.slice(0,X)):e&&(this.search="",this.query={}),g&&(this.pathname=g),v[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var W=this.search||"";this.path=F+W}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=_.stringify(this.query));var s=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),e+o+(n=n.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(g(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(i.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var u=Object.keys(t),c=0;c<u.length;c++){var l=u[c];"protocol"!==l&&(n[l]=t[l])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!v[t.protocol]){for(var h=Object.keys(t),f=0;f<h.length;f++){var p=h[f];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||m[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var y=n.pathname||"",_=n.search||"";n.path=y+_}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),E=b||g||n.host&&t.pathname,T=E,w=n.pathname&&n.pathname.split("/")||[],x=(d=t.pathname&&t.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if(x&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),E=E&&(""===d[0]||""===w[0])),b)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,w=d;else if(d.length)w||(w=[]),w.pop(),w=w.concat(d),n.search=t.search,n.query=t.query;else if(!i.isNullOrUndefined(t.search)){if(x)n.hostname=n.host=w.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift());return n.search=t.search,n.query=t.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=w.slice(-1)[0],O=(n.host||t.host||w.length>1)&&("."===S||".."===S)||""===S,P=0,R=w.length;R>=0;R--)"."===(S=w[R])?w.splice(R,1):".."===S?(w.splice(R,1),P++):P&&(w.splice(R,1),P--);if(!E&&!T)for(;P--;P)w.unshift("..");!E||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),O&&"/"!==w.join("/").substr(-1)&&w.push("");var A,I=""===w[0]||w[0]&&"/"===w[0].charAt(0);x&&(n.hostname=n.host=I?"":w.length?w.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift()));return(E=E||n.host&&w.length)&&!I&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},"./node_modules/url/util.js":function(t,e,n){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},"./node_modules/webpack/buildin/amd-define.js":function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},"./node_modules/webpack/buildin/amd-options.js":function(t,e){(function(e){t.exports=e}).call(this,{})},"./node_modules/webpack/buildin/global.js":function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},"./node_modules/webpack/buildin/module.js":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"./src/config.js":function(t,e,n){"use strict";var r=n("./node_modules/ramda/es/mergeDeepLeft.js"),i=n("./src/core/config/index.js"),o=n("./src/core/utils/constants.js"),a={extraWin:{particlesSource:{bigWinCoins:["extraWinCoin"],superWinCoins:["extraWinCoin"],megaWinCoins:["extraWinCoin"],totalWinCoins:["extraWinCoin"]},coinsParticles:{bigWinCoins:{emitter:{sourceType:o.c.MOVIE_CLIP,emitterGuideType:o.b.RECTANGLE,randomFrameStart:!0,maxParticles:200,rate:{amount:[1,3],interval:[.07,.1]},initializers:{velocity:{speed:[1,1.5],angle:[180]},mass:[.3,.7],life:[5],radius:[360]},behaviors:{gravity:[2.5],scale:{from:[.4,.7],to:[.8,1.1]}}}},superWinCoins:{emitter:{sourceType:o.c.MOVIE_CLIP,emitterGuideType:o.b.RECTANGLE,randomFrameStart:!0,maxParticles:200,rate:{amount:[1,2],interval:[.06,.09]},initializers:{velocity:{speed:[2,3],angle:[180]},mass:[.2,.6],life:[5],radius:[360]},behaviors:{gravity:[3],scale:{from:[.4,.7],to:[.8,1.1]}}}},megaWinCoins:{emitter:{sourceType:o.c.MOVIE_CLIP,emitterGuideType:o.b.RECTANGLE,randomFrameStart:!0,maxParticles:200,rate:{amount:[2,4],interval:[.1,.2]},initializers:{velocity:{speed:[3,4],angle:[180]},mass:[.1,.5],life:[5],radius:[360]},behaviors:{gravity:[2],scale:{from:[.4,.7],to:[.8,1.1]}}}},totalWinCoins:{emitter:{sourceType:o.c.MOVIE_CLIP,emitterGuideType:o.b.RECTANGLE,randomFrameStart:!0,maxParticles:200,rate:{amount:[2,3],interval:[.07,.1]},initializers:{velocity:{speed:[3,6],angle:[180]},mass:[.3,.7],life:[5],radius:[360]},behaviors:{gravity:[2.5],scale:{from:[.4,.7],to:[.8,1.1]}}}}}},centerCoins:{emitter:{emitterGuideType:o.b.RECTANGLE,sourceType:o.c.MOVIE_CLIP,maxParticles:100,randomFrameStart:!0,rate:{amount:[1,2],interval:[.05]},initializers:{velocity:{speed:[13,15],angle:[340,380]},mass:[.6,1],life:[2,3],radius:[360]},behaviors:{gravity:[8.5],scale:{from:[.3,.4],to:[.6,.8]}}}},centerWinBar:{emitter:{emitterGuideType:o.b.RECTANGLE,sourceType:o.c.MOVIE_CLIP,maxParticles:100,randomFrameStart:!0,rate:{amount:[1,2],interval:[.05,.07]},initializers:{velocity:{speed:[12,15],angle:[340,380]},mass:[.7,1.1],life:[6],radius:[360]},behaviors:{gravity:[8.5],scale:{from:[.35,.45],to:[.5,.6]}}}},centerWinBurst:{emitter:{emitterGuideType:o.b.RECTANGLE,sourceType:o.c.MOVIE_CLIP,maxParticles:100,randomFrameStart:!0,rate:{amount:[4,6],interval:[.001,.01]},initializers:{velocity:{speed:[10,16],angle:[330,390]},mass:[.7,1.4],life:[4],radius:[360]},behaviors:{gravity:[8.5],scale:{from:[.35,.45],to:[.5,.6]}}}},freeSpinsTileWin:{duration:.2,particlesSource:{win:["extraWinCoin"]},particlesEmitter:{win:{emitter:{sourceType:o.c.MOVIE_CLIP,emitterGuideType:o.b.CIRCLE,maxParticles:3,randomFrameStart:!0,rate:{amount:[1,2],interval:[.05]},initializers:{velocity:{speed:[4,7],angle:[-60,-5]},mass:[.5,1],life:[4],radius:[360]},behaviors:{gravity:[6],scale:{from:[.13,.18],to:[.25,.35]},rotation:{from:[-20,20],to:[0]}}}}}},fairyTrail:{particlesSource:["fairyBonusParticles1","fairyBonusParticles3","fairyBonusBlink"],emitter:{sourceType:o.c.MOVIE_CLIP,emitterGuideType:o.b.RECTANGLE,randomFrameStart:!0,maxParticles:500,rate:{amount:[5,15],interval:[.01]},initializers:{velocity:{speed:[.1,1],angle:[180]},life:[.5,1]},behaviors:{gravity:[.5],scale:{from:[.3,.7],to:[0,.1]}}}},winTiles:{duration:.2,particlesSource:{coins:["extraWinCoin"]},particlesEmitter:{coins:{emitter:{sourceType:o.c.MOVIE_CLIP,emitterGuideType:o.b.CIRCLE,maxParticles:4,randomFrameStart:!0,rate:{amount:[1,2],interval:[.015]},initializers:{velocity:{speed:[5,7],angle:[-40,40]},mass:[.8,1.5],life:[4],radius:[360]},behaviors:{gravity:[12],scale:{from:[.1,.2],to:[.3,.4]}}}}}},fatTiles:{duration:.2,particlesSource:{coins:["extraWinCoin"]},particlesEmitter:{coins:{emitter:{sourceType:o.c.MOVIE_CLIP,emitterGuideType:o.b.CIRCLE,maxParticles:12,randomFrameStart:!0,rate:{amount:[2,4],interval:[.015]},initializers:{velocity:{speed:[8,12],angle:[-25,25]},mass:[.9,1.6],life:[4],radius:[360]},behaviors:{gravity:[12],scale:{from:[.1,.2],to:[.3,.4]}}}}}},fairyPicker:{duration:.2,particlesSource:{coins:["extraWinCoin"]},particlesEmitter:{coins:{emitter:{sourceType:o.c.MOVIE_CLIP,emitterGuideType:o.b.CIRCLE,maxParticles:4,randomFrameStart:!0,rate:{amount:[1,2],interval:[.015]},initializers:{velocity:{speed:[5,7],angle:[-40,40]},mass:[.8,1.5],life:[4],radius:[360]},behaviors:{gravity:[12],scale:{from:[.1,.2],to:[.3,.4]}}}}},types:{2:{particlesEmitter:{coins:{emitter:{maxParticles:5}}}},3:{particlesEmitter:{coins:{emitter:{maxParticles:6}}}},4:{particlesEmitter:{coins:{emitter:{maxParticles:7,initializers:{velocity:{speed:[7,9]}}}}}},5:{particlesEmitter:{coins:{emitter:{maxParticles:9,initializers:{velocity:{speed:[8,10]}}}}}},6:{particlesEmitter:{coins:{emitter:{maxParticles:11,initializers:{velocity:{speed:[10,12]}}}}}}}}},s={extraWin:{bigWin:{start:{delay:.1,scale:1.005,duration:.22,ease:"power1.out"},end:{scale:1,duration:.23,ease:"power1.in"}},superWin:{start:{delay:.1,scale:1.015,duration:.32,ease:"power1.out"},end:{scale:1,duration:.28,ease:"power1.in"}},megaWin:{start:{delay:.1,scale:1.025,duration:.32,ease:"power1.out"},end:{scale:1,duration:.28,ease:"power1.in"}},totalWin:{start:{delay:.1,scale:1.005,duration:.32,ease:"power1.out"},end:{scale:1,duration:.28,ease:"power1.in"}},maxWin:{start:{delay:.1,scale:1.025,duration:.32,ease:"power1.out"},end:{scale:1,duration:.28,ease:"power1.in"}}},freeSpinsPopupTiles:{show:{1:{start:{offsetY:4,duration:.2,ease:"power2.out"},end:{offsetY:0,duration:.4,ease:"power1.inOut"}},2:{start:{offsetY:7,duration:.2,ease:"power2.out"},end:{offsetY:0,duration:.4,ease:"power1.inOut"}},3:{start:{offsetY:10,duration:.2,ease:"power2.out"},end:{offsetY:0,duration:.4,ease:"power1.inOut"}},4:{start:{offsetY:13,duration:.2,ease:"power2.out"},end:{offsetY:0,duration:.4,ease:"power1.inOut"}}},win:{start:{delay:.45,scale:1.02,offsetY:-14,duration:.37,ease:"power2.inOut"},end:{offsetY:0,scale:1,duration:.4,ease:"power2.in"}}},beerPopupTiles:{show:{1:{start:{offsetY:4,duration:.2,ease:"power2.out"},end:{offsetY:0,duration:.4,ease:"power1.inOut"}},2:{start:{offsetY:7,duration:.2,ease:"power2.out"},end:{offsetY:0,duration:.4,ease:"power1.inOut"}},3:{start:{offsetY:10,duration:.2,ease:"power2.out"},end:{offsetY:0,duration:.4,ease:"power1.inOut"}},4:{start:{offsetY:13,duration:.2,ease:"power2.out"},end:{offsetY:0,duration:.4,ease:"power1.inOut"}}},win:{start:{delay:.25,scale:1.02,offsetY:-14,duration:.47,ease:"power2.inOut"},end:{offsetY:0,scale:1,duration:.45,ease:"power1.inOut"}}},fairyPopupTiles:{show:{1:{start:{scale:1.005,duration:.47,ease:"power1.inOut"},end:{scale:1,duration:.32,ease:"power1.in"}},2:{start:{scale:1.008,duration:.47,ease:"power1.inOut"},end:{scale:1,duration:.32,ease:"power1.in"}},3:{start:{scale:1.011,duration:.47,ease:"power1.inOut"},end:{scale:1,duration:.32,ease:"power1.in"}},4:{start:{scale:1.014,duration:.47,ease:"power1.inOut"},end:{scale:1,duration:.32,ease:"power1.in"}},5:{start:{scale:1.017,duration:.47,ease:"power1.inOut"},end:{scale:1,duration:.32,ease:"power1.in"}},6:{start:{scale:1.02,duration:.47,ease:"power1.inOut"},end:{scale:1,duration:.32,ease:"power1.in"}}},win:{start:{offsetY:5,duration:.33,ease:"power1.out"},middle:{offsetY:-10,duration:.63,ease:"power2.out"},end:{offsetY:0,duration:.17,ease:"power1.inOut"}}},jackpotPopupTiles:{show:{1:{start:{offsetY:4,duration:.2,ease:"power1.out"},end:{offsetY:0,duration:.33,ease:"power1.inOut"}},2:{start:{offsetY:7,duration:.2,ease:"power1.out"},end:{offsetY:0,duration:.33,ease:"power1.inOut"}},3:{start:{offsetY:10,duration:.2,ease:"power1.out"},end:{offsetY:0,duration:.33,ease:"power1.inOut"}}},spawn:{1:{start:{scale:1.005,duration:.25,ease:"power1.in"},end:{scale:1,duration:.38,ease:"power1.inOut"}},2:{start:{scale:1.01,duration:.25,ease:"power1.in"},end:{scale:1,duration:.38,ease:"power1.inOut"}},3:{start:{scale:1.015,duration:.25,ease:"power1.in"},end:{scale:1,duration:.38,ease:"power1.inOut"}}},win:{start:{delay:.18,scale:1.02,duration:.47,ease:"power1.inOut"},end:{delay:.18,scale:1,duration:.35,ease:"power1.inOut"}}},rainingTiles:{normal:{start:{offsetX:-4,offsetY:4,duration:.15,ease:"power2.out"},end:{offsetX:0,offsetY:0,duration:.3,ease:"power1.inOut"}},bonus:{start:{scale:.998,offsetX:-6,offsetY:6,duration:.15,ease:"power2.out"},end:{scale:1,offsetX:0,offsetY:0,duration:.3,ease:"power1.inOut"}},mega:{start:{scale:.996,offsetX:-10,offsetY:10,duration:.15,ease:"power2.out"},end:{scale:1,offsetX:0,offsetY:0,duration:.3,ease:"power1.inOut"}}},rainingTilesMega:{start:{offsetX:-2,offsetY:2,duration:.1,yoyo:!0,repeat:-1,ease:"power1.inOut"},end:{offsetX:0,offsetY:0,duration:.1,ease:"power1.inOut"}},freeSpinsStartScreen:{start:{delay:.57,duration:.2,scale:1.01,ease:"power1.in"},end:{duration:.8,scale:1,ease:"power1.out"}}},u={beerBonusSplash:{normal:{intensity:{x:0,y:1.7},duration:.3,interval:.08,randomize:!1,deceleration:{duration:.3,ease:"power2.in"}},mega:{intensity:{x:0,y:2.3},duration:.3,interval:.08,randomize:!1,deceleration:{duration:.3,ease:"power2.in"}}}};function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=[6,7,8],p=9,d=10,y=11,m=12,v={branding:{},renderer:{width:1224,height:1050},reels:{count:6,tiles:{total:9,visible:7,offsetTop:1,offsetBottom:2,tilesAnimSource:"MegaWaysTiles",sizes:[2,3,4,5,6,7],blur:h(h(h(h(h({default:{x:0,y:2,quality:4}},p,{x:0,y:0,quality:0}),d,{x:0,y:0,quality:0}),y,{x:0,y:0,quality:0}),m,{x:0,y:0,quality:0}),100,{x:0,y:0,quality:0}),stacked:{tiles:{1:{min:2,max:4},2:{min:2,max:4},3:{min:2,max:4},4:{min:2,max:4},5:{min:2,max:4},6:{min:2,max:4},7:{min:2,max:4},8:{min:2,max:4}},stackSingleTiles:!0,singleTileChance:0}},spin:{minDistance:14,speed:26,delay:{atStart:0,atEnd:4},easeStart:{offset:2,speed:10,easings:["power2.in"]},easeEnd:{offset:.08,speed:.4,easings:["power2.out","power1.inOut"]},instantStop:{}},move:{}},paytable:{drawLines:!1,screens:8,optional:[{index:9,condition:"hasFeatureBuy"}]},loadingScreen:{stopTickChildren:!1},headerBanners:{default:{waitHideAnimation:!1,count:4}},cascade:{skipTimeScale:3,specialTileIds:[y,m,d,p].concat(f),destroy:{replaceTile:!0,delays:{beforeSetStart:0,betweenBlocks:0,afterEnd:0}},move:{speed:1600,ease:"power2.in",easeEnd:{offset:-4,speed:30,easings:["power1.out","power1.in"]},delays:{beforeSetStart:0,betweenBlocks:0,betweenBlockSets:.05,afterEnd:0}},drop:{speed:1600,ease:"power2.in",addedDropOffset:30,easeEnd:{offset:-4,speed:30,easings:["power1.out","power1.in"]},delays:{beforeSetStart:0,betweenBlocks:.05,betweenBlockSets:.05,afterEnd:0}}},extraWin:l({bangupSpeed:7,maxWinBangupSpeed:600,totalWinDuration:0,coinsStopDelayDivider:1.5,easings:["slow(0.1, 0.4, false)","slow(0.1, 0.7, false)","slow(0.3, 0.7, false)","slow(0.5, 0.4, false)","power1.out"],sum:{currency:!0,font:"sumFont",alignType:"CENTER",ignoreRatio:!1,overscale:!0,fitBounds:null},dynamicLabels:!0,showDelay:{normalWin:{default:0,custom:{}},bigWin:{default:.5},superWin:{default:.7},megaWin:{default:1},totalWin:{default:.5},maxWin:{default:1,custom:{}}},hideDelay:{normalWin:{default:.9},bigWin:{default:2.4},superWin:{default:3.8},megaWin:{default:5},totalWin:{default:5,underOrEqualStake:1},maxWin:{default:5,custom:{}}}},a.extraWin),centerCoins:l({},a.centerCoins),jackpotPopupTiles:{tileId:100,attachable:!0,effectThreshold:3,spawnTween:{alpha:0,duration:.45,ease:"power1.in"}},jackpotWin:{tileId:100,labels:{tileWin:"spawn"},delays:{deactivate:8,spawn:{betweenTiles:1}}},fatTiles:{tileIds:[].concat(f,[p]),visibleTiles:7,skipLoop:!0,skipTileReplace:!0,attachable:!0,counter:{font:"fatTileFont",alignType:"CENTER",template:"x{{val}}",letterSpacing:-12},replaceArea:{width:1,force:!0,id:0},particles:l({fromCenter:!0,useReelBounds:!0},a.fatTiles)},activators:{LUCKY_PIPE:"LuckyPipe",RANDOM_TILES:"RandomTiles",RANDOM_TILES_MEGA:"RandomTilesMega",FREE_SPINS:"FreeSpins",FREE_SPINS_MEGA:"FreeSpinsMega",BEER_BONUS:"BeerBonus",BEER_BONUS_MEGA:"BeerBonusMega",FAIRY_BONUS:"FairyBonus",CHANCE:"Chance",MAX_WIN:"MaxWin"},bonuses:{FAIRY:"fairy",BEER:"beer",BEER_MEGA:"beerMega"},wins:{tiles:{renderTexture:{enabled:!1}},lines:{delays:{afterShow:.3}},particles:l({fromCenter:!0,centerUsingTileGuide:!0},a.winTiles)},anticipation:{freeSpins:{tileId:y,minTiles:2,maxTiles:3,minDuration:5,maxDuration:8,reels:[3,4],bgAlpha:.2},jackpot:{tileId:100,minTiles:2,maxTiles:2,minDuration:5,maxDuration:10,reels:[5],bgAlpha:.2},beer:{tileId:d,minTiles:2,maxTiles:3,minDuration:5,maxDuration:8,reels:[3,4],bgAlpha:.2},fairy:{tileId:m,minTiles:2,maxTiles:6,minDuration:5,maxDuration:8,reels:[2,3,4,5],bgAlpha:.2}},cascadeAnticipation:{default:{minTiles:2,maxTiles:4,delays:{beforeHideStart:.5},skipReels:[0,5],unique:[y,d,m]},fairy:{minTiles:2,maxTiles:6,skipReels:[]}},anticipationFade:{alpha:.7},wildPopupTiles:{tileId:p,attachable:!0},beerPopupTiles:{tileId:d,attachable:!0},fairyPopupTiles:{tileId:m,attachable:!0},freeSpinsPopupTiles:{tileId:y,delays:{betweenSingleCollect:.4,afterCollectShow:.2},particles:l({force:!0,fromCenter:!0,customGuide:{x:-30,y:-150,width:5,height:5}},a.freeSpinsTileWin)},seniorPopupTiles:{tileIds:f,attachable:!0,skipLoop:!0},freeSpinsStatus:{counter:{font:"freeSpinsFont"}},fairyPicker:{countersStakeThreshold:10,hideDelay:.25,hoverExtraFrames:5,unlockedPickersTween:{fadeIn:{alpha:1,duration:.5},fadeOut:{alpha:.5,duration:.2,delay:.8}},arrowDelays:{afterPickedShow:.3,anticipation:.7},idleDelay:{min:.5,max:1.5},counters:{default:{alignType:"CENTER",letterSpacing:-5,ignoreRatio:!1,overscale:!0},currency:{currency:!0,hideDecimals:!0},multiplier:{currency:!1,round:!0,template:"x{{val}}"},picked:{font:"fairyBonusFont"},unpicked:{font:"fairyBonusFontInactive"}}},fairyPickerParticles:{particles:l({centerUsingCustomGuide:!0,fromCenter:!0,force:!0},a.fairyPicker)},rainingTiles:{scale:.8,degree:50,visibleTiles:7,skipTimeScale:3,normal:{diagonalOffset:2,speed:1200,tweens:{move:{ease:"power1.in"}}},fake:{diagonalOffset:5,speed:[1200,1800],endPointOffset:{x:-2,y:4},endPointDeviationRange:[-300,650],tweens:{move:{ease:"power1.in"},fadeOut:{alpha:0,duration:.1}}},delays:{betweenNormalTiles:[.7,1.5],betweenBonusTiles:[.2,.6],betweenFakeTiles:[.1,.3]},chances:{stopGenerateFake:30}},rainingTilesMega:{scale:1.1,skipTimeScale:3,reelsCount:6,normal:{diagonalOffset:3},fake:{diagonalOffset:5,speed:[1200,1600],endPointDeviationRange:[-200,550]},delays:{betweenNormalTiles:[1.5,2.5],betweenFakeTiles:[1,1.5]}},rainingTilesEffect:{normalIds:[].concat([1,2,3,4,5],f,[p]),specialIds:[d,y,m]},multiplierSplash:{hideDelay:.3,counter:{font:"multiplierSplashFont",alignType:"CENTER",template:"x{{val}}",hasBangup:!1}},multiplier:{counter:{font:"multiplierFont",alignType:"CENTER",template:"x{{val}}",round:!0,hasBangup:!0,bangupDuration:.38,ignoreRatio:!1,overscale:!0}},characterActivator:{flipChance:50,framerate:{normal:60,skip:180}},megaWaysCounter:{counter:{font:"megaWaysFont",letterSpacing:0,fitInBounds:!0,isInitiallyVisible:!0},tweens:{move:{offsetY:"+=15",duration:.35,ease:"power2.out"},reset:{duration:.35,ease:"power2.out"}}},freeSpinsStartScreen:{counter:{font:"freeSpinsSplashFont"}},beerBonus:{delays:{beforeWin:.4,beforeWinMega:.6}},beerBonusSplash:{pickersMap:{picker1:"tap1",picker2:"tap2",picker3:"tap3",picker4:"tap4"},types:{BEER:"beer",BEER_MEGA:"beerMega"},tapsPromptDelay:{min:.5,max:1.5}},beerBonusGlasses:{fullGlassMultiplier:30,tweensEase:"none",skipLoop:!0,skipTileReplace:!0,timeScaleTween:{timeScale:6,duration:.4,ease:"power1.in"},counter:{downScale:.9,upScale:1.15,bangupSpeed:3,bangupSpeedMega:5,currency:!0,hideDecimals:!1,font:"beerBonusFont",alignType:"CENTER",ignoreRatio:!1,overscale:!0,letterSpacing:-5},sumAnim:{endPosOffsetY:100,peakDelay:0,scaleNormal:1.1,scaleMega:1.05,pumpDuration:.25,deflateDuration:.6,pumpEase:"power1.inOut",deflateEase:"power1.inOut",reset:{duration:.2,ease:"power1.inOut",x:1,y:1}},foam:{ease:"power4.in",maxAddScale:.35}},beerBonusGlassesFrames:{skipLoop:!0,skipTileReplace:!0},beerBonusGlassesStreams:{skipLoop:!0,skipTileReplace:!0},centerWinBar:{delayBeforeHide:1.5,counter:{bangup:{speed:10},currency:!0,hideDecimals:!1,font:"sumFont",alignType:"CENTER",ignoreRatio:!1,overscale:!1,fitBounds:{}},particles:l({},a.centerWinBar),burstDuration:.1,burstParticles:l({},a.centerWinBurst)},sceneVisibility:{sceneShowTween:{duration:.42,ease:"power2.in"},sceneHideTween:{duration:1.4,ease:"power4.in"}},chanceActivator:{showChance:90,framerate:{normal:60,skip:180}},freeSpinsMegaThreshold:4,passingEffects:{freeSpins:{tileId:y,reelEndEvent:"animation_ending"},beerBonus:{tileId:d,reelEndEvent:"animation_ending"},fairyBonus:{tileId:m,reelEndEvent:"animation_ending"}},fairyTrailParticles:{switchDirectionChance:65,curvature:.01,offsetY:{min:15,max:30},moveTween:{duration:.7,ease:"power1.inOut",motionPath:{curviness:1}},hideTween:{alpha:0,duration:.2},particles:l({},a.fairyTrail)},fairyActivator:{framerate:{normal:60,skip:180}},fairySplash:{delayBeforeHide:{normal:2,mega:3},counter:{font:"fairyBonusFont",alignType:"CENTER"}},hitEffect:{firstEffectThreshold:1,secondEffectThreshold:2,thirdEffectThreshold:3},scatterHitEffect:{fairyId:m,thresholds:{second:2,third:3}},gameFrameMask:{x:-763,y:-767,width:2750,height:2584,color:0},winWaysBar:{sum:{font:"waysFont"},waysCount:{font:"waysFont"},scaleFactor:6},sceneOverlay:{types:["normal"]},cameraEffects:s,rumbleEffects:u};e.a=Object(r.a)(v,i.a)},"./src/core/App.js":function(t,e,n){"use strict";(function(t){var r=n("./node_modules/pixi.js/dist/esm/pixi.js"),i=(n("./node_modules/@games/pixi-animate/lib/index.js"),n("./node_modules/pixi-spine/lib/all.es.js"),n("./src/core/fixes/index.js"),n("./node_modules/@games/dope/src/Dopamine.js")),o=n("./src/core/utils/EventsHub.js"),a=n("./src/core/server/Server.js"),s=n("./src/config.js"),u=n("./src/core/loader/index.js"),c=n("./src/core/utils/CombinedTicker.js"),l=n("./src/core/Game.js"),h=n("./src/core/Renderer.js"),f=n("./src/features/index.js"),p=n("./src/texts/index.js"),d=n("./src/core/utils/Status.js"),y=n("./src/core/utils/misc.js"),m=n("./src/core/server/GameData.js");function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function b(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){g(o,r,i,a,s,"next",t)}function s(t){g(o,r,i,a,s,"throw",t)}a(void 0)}))}}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}window.PIXI=t;var T=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r.utils.skipHello(),this.stage=new r.Container,this.renderer=new h.a(s.a.renderer,this.stage),this.ticker=new c.a(this.renderer),this._client=new a.a(n),this._holdLoadingScreen=Promise.resolve(),this.container=document.createElement("div"),this.container.className="game",this.settings=null,this.game=null,this.container.appendChild(this.renderer.view),this._updateConfig(e)}var e,n,d,g,T,w,x;return e=t,(n=[{key:"holdLoadingScreen",value:function(){var t=this;this._holdLoadingScreen=new Promise((function(e){t._holdResolve=e}))}},{key:"releaseLoadingScreen",value:function(){this._holdResolve&&this._holdResolve()}},{key:"init",value:(x=b(regeneratorRuntime.mark((function t(){var e,n,r,a,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.b.loadManifest();case 2:return e=this._validateLanguage(s.a.lang),this.setLanguage(e),t.next=6,this._client.settings();case 6:n=t.sent,r=n.result,a=r&&r.game.skin?r.game.skin:s.a.skin?s.a.skin:null,this._applySkin(a),(c=this._validateLanguage(s.a.lang))!==e&&this.setLanguage(c),r&&(i.a.set(s.a.hideCurrency?{symbol:""}:r.user.currency),void 0===s.a.isStateful&&(s.a.isStateful=Boolean(r.game.stateful)),void 0===s.a.hasFeatureBuy&&(s.a.hasFeatureBuy=Boolean(r.game.hasFeatureBuy)),s.a.hasChoices=Boolean(r.game.hasChoices),this.settings=r,m.a.init(r)),o.a.emit(o.a.events.INIT);case 14:case"end":return t.stop()}}),t,this)}))),function(){return x.apply(this,arguments)})},{key:"preload",value:(w=b(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.settings){t.next=2;break}return t.abrupt("return",Promise.resolve());case 2:return o.a.emit(o.a.events.LOAD_GAME_START),t.next=5,u.b.loadFeature("loader");case 5:return e=u.b.loadFeature("main",{onProgress:function(t){o.a.emit(o.a.events.LOAD_GAME_PROGRESS,{progress:t/100})}}),this._showLoader(),t.next=9,e;case 9:return t.abrupt("return",this._initGame());case 10:case"end":return t.stop()}}),t,this)}))),function(){return w.apply(this,arguments)})},{key:"setLanguage",value:function(t){i.c.setLanguage(t,p.a,s.a.defaultLang)}},{key:"_showLoader",value:function(){this.loadingScreen=new f.a.LoadingScreen({animation:u.a.LoadingScreen.loadingScreen,config:s.a.loadingScreen}),this.stage.addChild(this.loadingScreen)}},{key:"_hideLoader",value:(T=b(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._holdLoadingScreen;case 2:return t.next=4,this.loadingScreen.onComplete();case 4:o.a.emit(o.a.events.LOAD_GAME_COMPLETE),s.a.paytableOnLoad&&this._removeLoadingScreen();case 6:case"end":return t.stop()}}),t,this)}))),function(){return T.apply(this,arguments)})},{key:"_initGame",value:(g=b(regeneratorRuntime.mark((function t(e){var n,r,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.game=new(e||l.a),this.stage.addChildAt(this.game,0),t.next=4,this.game.init(this._client,this.settings,this.renderer);case 4:if(n=this.game.getStakes(),r=n.selected,i=r.value,a=r.index,o.a.emit(o.a.events.STAKE_CHANGE,{value:i,index:a}),e){t.next=9;break}return t.next=9,this._hideLoader();case 9:this.game.ready(!!e),o.a.emit(o.a.events.GAME_READY);case 11:case"end":return t.stop()}}),t,this)}))),function(t){return g.apply(this,arguments)})},{key:"start",value:function(){this.renderer.resume()}},{key:"startGame",value:function(){this.game.scenario.features.paytable.isLoading||(this.loadingScreen&&!s.a.paytableOnLoad&&this._removeLoadingScreen(),this.game.hidePaytable(!s.a.paytableOnLoad),this.game.start())}},{key:"helpPath",get:function(){var t,e,n,r=null===(t=this.settings)||void 0===t||null===(e=t.user)||void 0===e||null===(n=e.country)||void 0===n?void 0:n.toLowerCase(),o=u.b.getAssetsVariant("help").find((function(t){return t.id==="help_".concat(i.c.code,"_").concat(r)}));return o||(o=u.b.getAssetsVariant("help").find((function(t){return t.id==="help_".concat(i.c.code)}))),o?o.src:u.b.getAssetsVariant("help").find((function(t){return t.id.includes(s.a.defaultLang)})).src}},{key:"rtp",get:function(){return this.settings?this.settings.game.rtp:{game:{default:""}}}},{key:"size",set:function(t){this.renderer.resize(t)}},{key:"_updateConfig",value:function(t){Object.assign(s.a,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t)),t.hideCurrency&&(s.a.hideCurrency=t.hideCurrency),t.skipJackpotWin&&(s.a.jackpotWin.duration=.01),t.paytableDynamicPayouts&&(s.a.paytable.paytableDynamicPayouts=t.paytableDynamicPayouts),t.minRoundDurationStrict&&(s.a.reels.spin.minSpinDurationEnabled=t.minRoundDurationStrict),s.a.static=t.static,Object(y.i)()}},{key:"_validateLanguage",value:function(t){var e=s.a.supported.languages[s.a.skin],n=e&&e.length?e:s.a.supported.languages.default,r=s.a.langsFallback[t]||t.split("-")[0],i=[].concat(t).concat(r).concat(s.a.defaultLang).find((function(t){return n.includes(t)}));return t!==s.a.defaultLang&&i===s.a.defaultLang&&console.warn("".concat(t," language is not supported, defaults to ").concat(s.a.defaultLang)),i}},{key:"_applySkin",value:function(t){s.a.supported.skins.includes(t)||(t="default"),s.a.skin=t}},{key:"_removeLoadingScreen",value:function(){this.stage.removeChild(this.loadingScreen),this.loadingScreen.removeAllListeners(),this.loadingScreen.destroy(),delete this.loadingScreen}}])&&E(e.prototype,n),d&&E(e,d),t}();T.Status=d.a,e.a=T}).call(this,n("./node_modules/pixi.js/dist/esm/pixi.js"))},"./src/core/Game.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return St}));var r=n("./node_modules/pixi.js/dist/esm/pixi.js"),i=n("./src/core/loader/index.js");function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.settings=n}var e,n,a;return e=t,(n=[{key:"load",value:function(t){return this[t]?console.warn("Feature ".concat(t," was already loaded, check for redundant calls")):i.b.loadFeature(t)}},{key:"add",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.container,o=void 0===i?this.container:i;Object.keys(t).forEach((function(n){if(e[n])console.error('Feature with name "'.concat(n,'" has already been added, check for redundant calls'));else{var i=t[n];i.name=n,o&&i instanceof r.DisplayObject&&o.addChild(i),Object.defineProperty(e,n,{get:function(){return i}})}}))}},{key:"arrange",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container,r=t.map((function(t){return e[t]}));n.children=n.children.sort((function(t,e){return r.includes(t)||r.includes(e)?r.includes(t)?r.includes(e)?r.indexOf(t)-r.indexOf(e):1:-1:0}))}},{key:"remove",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;Array.isArray(t)||(t=[t]),Object.keys(t).forEach((function(r){if(e[r])console.error('Feature "'.concat(r,"\" doesn't exist"));else{var i=t[r];i.stopTick(!0),i.destroy(),n.removeChild(i)}}))}}])&&o(e.prototype,n),a&&o(e,a),t}(),s=n("./src/core/utils/Status.js"),u=n("./src/core/server/SpinData.js"),c=n("./src/core/utils/EventsHub.js"),l=n("./src/states.js"),h=n("./src/core/utils/index.js"),f=n("./src/core/features/sound/SoundRouter.js"),p=n("./src/features/index.js"),d=n("./src/config.js");function y(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _=[1,12],g=[1,7],b={6:"hatHit",7:"horseshoeHit",8:"cloverHit",9:"wildHit"},E=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.router=new f.a,this.sounds=this.router.sounds,this._lineIndex=1}var e,n,r;return e=t,(n=[{key:"init",value:function(t){this._features=t,this._attachGameListeners()}},{key:"lastReelIndex",get:function(){return d.a.reels.count-1}},{key:"lastTileIndex",get:function(){return d.a.reels.tiles.visible-1}},{key:"isInFreeSpins",get:function(){return s.a.get(s.a.TYPES.IN_FREE_SPINS)}},{key:"isInRespin",get:function(){return s.a.get(s.a.TYPES.IN_RESPIN)}},{key:"hasWin",get:function(){return this.win>0}},{key:"hasExtraWin",get:function(){return this.totalRespinWin/this.stake>=Math.min.apply(Math,y(Object.values(this._features.extraWin.thresholds)))}},{key:"hasError",get:function(){return u.a.hasError}},{key:"hasNextSpin",get:function(){return u.a.hasNext}},{key:"gameData",get:function(){return u.a.currentSpin&&u.a.currentSpin.game||{}}},{key:"mainGameData",get:function(){var t;return(null===u.a||void 0===u.a||null===(t=u.a.main)||void 0===t?void 0:t.game)||{}}},{key:"win",get:function(){return(this.totalRespinWin||0)+this.instantWin}},{key:"stake",get:function(){return this.gameData.stake}},{key:"isWinAboveStake",get:function(){return this.win>this.stake&&this.roundHasCelebrations}},{key:"isTotalWinAboveStake",get:function(){return this.mainGameData.win.total>this.stake}},{key:"hasFsWin",get:function(){var t;return(null===(t=this.gameData.scatters)||void 0===t?void 0:t.length)>=3}},{key:"hasNearMiss",get:function(){var t=this.gameData.scatters;return t&&t.length>=2&&t[t.length-1].reel!==this.reelsCount-1}},{key:"totalRespinWin",get:function(){return this._features.respinWins.total}},{key:"isInLastRespin",get:function(){return!this.gameData.respin&&!this.gameData.chainReactor}},{key:"hasInstantWin",get:function(){var t;return!(null===(t=this.gameData)||void 0===t||!t.instantWin)}},{key:"instantWin",get:function(){var t,e;return(null===(t=this.gameData)||void 0===t||null===(e=t.win)||void 0===e?void 0:e.instantWin)||0}},{key:"hasBeerBonus",get:function(){var t,e;return this.hasInstantWin&&(null===(t=this.gameData)||void 0===t||null===(e=t.instantWin)||void 0===e?void 0:e.type)===d.a.bonuses.BEER}},{key:"_attachGameListeners",value:function(){var t=this;this._features.fairyPicker.on(p.a.FairyPicker.events.PICK_ARROW_SHOW_START,this._onFairyPickerPickArrowShowStartTool,this),this._features.beerBonusGlasses.on(p.a.BeerBonusGlasses.events.DEACTIVATE_START,this._onBeerBonusGlassesDeactivateStartTool,this),this._features.fairyActivator.on(p.a.FairyActivator.events.HIDE_END,this._onFairyActivatorHideEndTool,this),this._features.fairyBonusPassingEffect.on(p.a.PassingEffects.events.ACTIVATE_START,this._onFairyBonusPassingEffectActivateStartTool,this),this._features.beerBonusPassingEffect.on(p.a.PassingEffects.events.ACTIVATE_START,this._onBeerBonusPassingEffectActivateStartTool,this),this._features.cascadeAnticipationController.on(p.a.CascadeAnticipationController.events.START,this._onCascadeAnticipationControllerStartTool,this),this._features.winBar.on(p.a.WinBar.events.UPDATE_START,this._onWinBarUpdateStartTool,this),this._features.fairyPicker.on(p.a.FairyPicker.events.PICKER_CLICKED,this._onFairyPickerPickerClickedTool,this),this._features.centerWinBar.on(p.a.CenterWinBar.events.SHOW_START,this._onCenterWinBarShowStartTool,this),this._features.fairyPicker.on(p.a.FairyPicker.events.PICK_END,this._onFairyPickerPickEndTool,this),this._features.fairyActivator.on(p.a.FairyActivator.events.PLAY_ANIM_START,this._onFairyActivatorPlayAnimStartTool,this),this._features.fairyPicker.on(p.a.FairyPicker.events.PICK_START,this._onFairyPickerPickStartTool,this),this._features.characterActivator.on(p.a.CharacterActivator.events.SHOW_START,this._onCharacterActivatorShowStartTool,this),this._features.beerBonusSplash.on(p.a.BeerBonusSplash.events.SELECT_TAP,this._onBeerBonusSplashSelectTapTool,this),this._features.beerBonusSplash.on(p.a.BeerBonusSplash.events.BUTTON_CLICKED,this._onBeerBonusSplashButtonClickedTool,this),this._features.freeSpinsPopupTiles.on(p.a.FreeSpinsPopupTiles.events.SINGLE_PLAY_ANIM_START,this._onFreeSpinsPopupTilesSinglePlayAnimStartTool,this),this._features.fairyActivator.on(p.a.FairyActivator.events.SHOW_START,this._onFairyActivatorShowStartTool,this),this._features.beerBonusSplash.on(p.a.BeerBonusSplash.events.SHOW_START,this._onBeerBonusSplashShowStartTool,this),this._features.intro.on(p.a.GameIntro.events.HIDE_END,this._onIntroHideEndTool,this),this._features.chanceActivator.on(p.a.ChanceActivator.events.SHOW_START,this._onChanceActivatorShowStartTool,this),this._features.characterActivator.on(p.a.CharacterActivator.events.PLAY_ANIM_START,this._onCharacterActivatorPlayAnimStartTool,this),this._features.fairyActivator.on(p.a.FairyActivator.events.SHOW_END,this._onFairyActivatorShowEndTool,this),this._features.fairyPopupTiles.on(p.a.ScatterPopupTiles.events.PLAY_ANIM_START,this._onFairyPopupTilesPlayAnimStartTool,this),this._features.multiplier.on(p.a.Multiplier.events.PLAY_ANIM_START,this._onMultiplierPlayAnimStartTool,this),this._features.multiplierSplash.on(p.a.MultiplierCover.events.SHOW_START,this._onMultiplierSplashShowStartTool,this),this._features.beerPopupTiles.on(p.a.MegaWaysPopupTiles.events.PLAY_ANIM_START,this._onBeerPopupTilesPlayAnimStartTool,this),this._features.beerBonusSplash.on(p.a.BeerBonusSplash.events.HOVER_TAP,this._onBeerBonusSplashHoverTapTool,this),this._features.beerBonusGlasses.on(p.a.BeerBonusGlasses.events.ACTIVATE_START,this._onBeerBonusGlassesActivateStartTool,this),this._features.beerBonusGlasses.on(p.a.BeerBonusGlasses.events.FILL_START,this._onBeerBonusGlassesFillStartTool,this),this._features.beerBonusGlasses.on(p.a.BeerBonusGlasses.events.WIN_START,this._onBeerBonusGlassesWinStartTool,this),this._features.beerBonusGlasses.on(p.a.BeerBonusGlasses.events.SINGLE_FILL_END,this._onBeerBonusGlassesSingleFillEndTool,this),this._features.beerBonusSplash.on(p.a.BeerBonusSplash.events.HIDE_END,this._onBeerBonusSplashHideEndTool,this),this._features.fairyPicker.on(p.a.FairyPicker.events.HOVER,this._onFairyPickerHoverTool,this),this._features.freeSpinsPopupTiles.on(p.a.FreeSpinsPopupTiles.events.PARTICLES_BURST_START,this._onFreeSpinsPopupTilesParticlesBurstStartTool,this),this._features.freeSpinsPassingEffect.on(p.a.PassingEffects.events.ACTIVATE_START,this._onFreeSpinsPassingEffectActivateStartTool,this),this._features.beerPopupTiles.on(p.a.MegaWaysPopupTiles.events.TILE_ADD,this._onBeerPopupTilesTileAddTool,this),this._features.fairyPopupTiles.on(p.a.MegaWaysPopupTiles.events.TILE_ADD,this._onFairyPopupTilesTileAddTool,this),this._features.cascade.on(p.a.MegaWaysCascade.events.SINGLE_MOVE_ENDING,this._onCascadeSingleMoveEndingTool,this),this._features.reelMaster.on(p.a.SpinningMegaWaysReelMaster.events.ANIMATION_SPIN_STARTING,this._onReelMasterAnimationSpinStartingTool,this),this._features.centerCoins.on(p.a.ParticlesContainer.events.DEACTIVATE_START,this._onCenterCoinsDeactivateStartTool,this),this._features.centerCoins.on(p.a.ParticlesContainer.events.ACTIVATE_START,this._onCenterCoinsActivateStartTool,this),this._features.waysWins.on(p.a.WaysWins.events.SHOW_ALL_START,this._onWaysWinsShowAllStartTool,this),this._features.freeSpinsStartScreen.on(p.a.FreeSpinsStartScreen.events.SHOW_START,this._onFreeSpinsStartScreenShowStartTool,this),this._features.freeSpinsPopupTiles.on(p.a.PopupTiles.events.PLAY_ANIM_START,this._onFreeSpinsPopupTilesPlayAnimStartTool,this),this._features.freeSpinsStartScreen.on(p.a.FreeSpinsStartScreen.events.BUTTON_CLICKED,this._onFreeSpinsStartScreenButtonClickedTool,this),this._features.extraWin.on(p.a.ExtraWin.events.BANGUP_END,this._onExtraWinBangupEndTool,this),this._features.extraWin.on(p.a.ExtraWin.events.LABEL_CHANGE,this._onExtraWinLabelChangeTool,this),this._features.reelMaster.on(p.a.SpinningReelMaster.events.SPIN_START,this._onReelMasterSpinStartTool,this),this._features.winBar.on(p.a.WinBar.events.UPDATE_END,this._onWinBarUpdateEndTool,this),this._features.reelMaster.on(p.a.SpinningReelMaster.events.SPIN_END,this._onReelMasterSpinEndTool,this),this._features.freeSpinsPopupTiles.on(p.a.PopupTiles.events.TILE_ADD,this._onFreeSpinsPopupTilesTileAddTool,this),this._features.paytable.on(p.a.Paytable.events.HIDE_START,this._onPaytableHideStartTool,this),this._features.paytable.on(p.a.Paytable.events.SLIDE_SCREEN,this._onPaytableSlideScreenTool,this),this._features.intro.on(p.a.Cover.events.SHOW_START,this._onIntroShowStartTool,this),this._features.extraWin.on(p.a.ExtraWin.events.LABEL_SHOW_START,(function(e){return t._onExtraWinLabelShowStart(e)})),this._features.extraWin.on(p.a.ExtraWin.events.LABEL_SHOW_END,(function(e){return t._onExtraWinLabelShowEnd(e)})),this._features.extraWin.on(p.a.ExtraWin.events.HIDE_START,(function(e){return t._onExtraWinHideStart(e)})),this._features.reelMaster.on(p.a.ReelMaster.events.ANIMATION_SPIN_STARTING,(function(e){var n=e.index;return t._onReelStarting(n)})),this._features.reelMaster.on(p.a.ReelMaster.events.ANIMATION_SPIN_ENDING,(function(e){var n=e.index;return t._onReelEnding(n)})),this._features.jackpotPopupTiles.on(p.a.PopupTiles.events.TILE_ADD,(function(e){var n=e.reel,r=e.index,i=e.total;return t._onJpHit({reel:n,index:r,total:i})})),this._features.jackpots.on(p.a.Jackpots.events.SIRENS,(function(){return t._onSirensStart()})),this._features.anticipation.on(p.a.Anticipation.events.START,(function(){return t._executeAnticipation("Start")})),this._features.anticipation.on(p.a.Anticipation.events.FINISH,(function(){return t._executeAnticipation("Finish")})),this._features.rainingTilesEffect.on(p.a.RainingTilesEffect.events.SINGLE_SHOW_START,(function(e){return t._onRainingTilesEffectSingleShowStart(e)})),this._features.rainingTilesEffectMega.on(p.a.ReelCovers.events.SINGLE_SHOW_START,(function(e){return t._onRainingTilesEffectSingleShowStart(e)})),this._features.wildPopupTiles.on(p.a.BurstPopupTiles.events.TILE_ADD,(function(e){return t._onWildPopupTilesTileAdd(e)})),this._features.rainingTiles.on(p.a.RainingTiles.events.TILE_ENTER,(function(){return t._onRainingTilesTileEnter()})),this._features.rainingTilesMega.on(p.a.RainingTilesMega.events.TILE_ENTER,(function(){return t._onRainingTilesTileEnter()})),this._features.fairyPicker.on(p.a.FairyPicker.events.SINGLE_ANIM_PLAY_START,(function(e){return t._onFairyPickerSingleAnimPlayStart(e)})),this._features.cascadeAnticipationController.on(p.a.CascadeAnticipationController.events.FINISH,(function(){return t._onCascadeAnticipationControllerFinish()})),this._features.jackpots.on(p.a.Jackpots.events.WHEEL_HIDE_ALL,(function(){return t._onJpWheelHideAll()}))}},{key:"_onReelStarting",value:function(t){0===t&&this._reset()}},{key:"_onReelEnding",value:function(t){this._features.fatTiles.allChildren.some((function(e){return e.reel===t}))||this.sounds.reelStop.play().limitInterval(.02),t===this.lastReelIndex&&this.sounds.reelSpinMechLoop.fadeTo(.1,0)}},{key:"_onLineShow",value:function(t){var e=(d.a.soundTool||{}).lineThreshold,n=void 0===e?1:e,r=Math.ceil(this._lineIndex/n);!t&&this.sounds[1===n?"winLines":"winLines".concat(r)].play().limitInterval(.01),this._lineIndex++}},{key:"_onJpHit",value:function(t){var e,n=t.reel,r=t.index,i=t.total,o=null===(e=this.mainGameData.jackpotTiles)||void 0===e?void 0:e.some((function(t){return t.reel===n&&t.index===r&&!t.screen}));this.sounds["".concat(o?"jpSpawn":"jpHit").concat(i)].play()}},{key:"_onSirensStart",value:function(){this.sounds.jackSiren.play()}},{key:"_onBonusAnticipationStart",value:function(){!1===this.sounds.anticipation.playing()&&!1===this.isInFreeSpins&&(this.sounds.anticipation.play().loop(!0).volume(0).fadeIn(.3),this.sounds.reelSpinLoop.fadeTo(.1,0))}},{key:"_onBonusAnticipationFinish",value:function(){this.sounds.anticipation.fadeOut(.3,!0),!0===this.hasWin&&this.sounds.reelSpinLoop.fadeTo(.3,1),!1===this.hasWin&&this.sounds.backgrLoop.fadeTo(.3,1)}},{key:"_onFreeSpinsAnticipationStart",value:function(){!1===this.sounds.anticipation.playing()&&!1===this.isInFreeSpins&&(this.sounds.anticipation.play().loop(!0).volume(0).fadeIn(.3),this.sounds.reelSpinLoop.fadeTo(.1,0))}},{key:"_onFreeSpinsAnticipationFinish",value:function(){!1===this.isInFreeSpins&&this.sounds.anticipation.fadeOut(.3,!0),!0!==this.hasWin&&!this.hasNearMiss||!1!==this.isInFreeSpins||this.sounds.reelSpinLoop.fadeTo(.5,1)}},{key:"_onExtraWinLabelShowStart",value:function(t){this.sounds.fsLoop.fadeTo(1,0),this.sounds.reelSpinLoop.fadeTo(1,0),this.sounds.leprechaunLoop.fadeTo(1,0),this.sounds.fairyLoop.stop(),this.sounds.beerLoop.stop(),"bigWin"===t.label&&this.sounds.bigWinStart.play(),"totalWin"===t.label&&!0===this.isTotalWinAboveStake&&(this.sounds.totalWin.play(),this.sounds.fsLoop.fadeOut(1,!0)),"totalWin"===t.label&&!1===this.isTotalWinAboveStake&&(this.sounds.totalWinSmall.play(),this.sounds.fsLoop.fadeOut(1,!0)),"maxWin"===t.label&&this.isInFreeSpins&&this.sounds.fsLoop.fadeOut(1,!0),"maxWin"===t.label&&(this.sounds.megaWinStart.play(),this.sounds.megaWinLoop.play().loop(!0))}},{key:"_onExtraWinLabelShowEnd",value:function(t){"bigWin"===t.label&&(this.sounds.bigWinLoop.play().loop(!0),this.sounds.superWinLoop.play().loop(!0).volume(0),this.sounds.megaWinLoop.play().loop(!0).volume(0)),"superWin"===t.label&&this.sounds.superWinLoop.fadeTo(.1,1),"megaWin"===t.label&&this.sounds.megaWinLoop.fadeTo(.1,1)}},{key:"_onRainingTilesEffectSingleShowStart",value:function(t){this._playRandomHitSound(t.cover.data.tileId)}},{key:"_onWildPopupTilesTileAdd",value:function(t){var e=t.animLabel,n=t.total;if("spawn"!==e){var r=n>12?12:n;this.sounds["wildHit".concat(r)].play()}}},{key:"_onRainingTilesTileEnter",value:function(){this.sounds["rainingTile".concat(h.i.apply(void 0,g))].play()}},{key:"_onFairyPickerSingleAnimPlayStart",value:function(t){"swap"===t.animLabel&&t.target.length%d.a.reels.count==0&&this.sounds.gemRevealFx.play().limitInterval(.1)}},{key:"_onCascadeAnticipationControllerFinish",value:function(){this.win<=this.stake&&this.isInLastRespin&&!this.hasInstantWin&&!this.hasFsWin?this.sounds.backgrLoop.fadeIn(.3):this.sounds.reelSpinLoop.fadeIn(.3),this.sounds.anticipation.stop()}},{key:"_onExtraWinHideStart",value:function(t){["totalWin","maxWin"].includes(t.label)&&this.sounds.backgrLoop.fadeTo(2,1),["totalWin","maxWin"].includes(t.label)||!0!==this.isInFreeSpins||this.sounds.fsLoop.fadeTo(2,1),"totalWin"!==t.label&&!1===this.isInFreeSpins&&this.sounds.backgrLoop.fadeTo(2,1)}},{key:"_onJpWheelHideAll",value:function(){this.sounds.reelSpinLoop.fadeOut(0,!1),this.sounds.leprechaunLoop.fadeOut(0,!1),this.sounds.backgrLoop.fadeTo(.3,1)}},{key:"_reset",value:function(){this._lineIndex=1}},{key:"_executeAnticipation",value:function(t){"freeSpins"===this._features.anticipation.activeType?this["_onFreeSpinsAnticipation".concat(t)]():this["_onBonusAnticipation".concat(t)]()}},{key:"_playRandomHitSound",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_;b[t]&&this.sounds["".concat(b[t]).concat(h.i.apply(void 0,y(e)))].play().limitInterval(.01)}},{key:"_getInstantWinType",value:function(t){var e,n;return this.hasInstantWin&&(null===(e=this.gameData)||void 0===e||null===(n=e.instantWin)||void 0===n?void 0:n.type)===t}},{key:"_onFairyPickerPickArrowShowStartTool",value:function(t){this.sounds.fairyArrow.play()}},{key:"_onBeerBonusGlassesDeactivateStartTool",value:function(t){this.sounds.beerLoop.fadeTo(1.5,0)}},{key:"_onFairyActivatorHideEndTool",value:function(t){this.sounds.fairyLoop.fadeTo(1.5,0)}},{key:"_onFairyBonusPassingEffectActivateStartTool",value:function(t){this.sounds.fsPass.play()}},{key:"_onBeerBonusPassingEffectActivateStartTool",value:function(t){this.sounds.fsPass.play()}},{key:"_onCascadeAnticipationControllerStartTool",value:function(t){this.sounds.anticipation.play().loop(!0),this.sounds.reelSpinLoop.fadeTo(.1,0)}},{key:"_onWinBarUpdateStartTool",value:function(t){!0===this.isWinAboveStake&&!1===this.hasExtraWin&&!1===this.sounds.totalWin.playing()&&this.sounds.bangupLoop.fadeTo(.1,1)}},{key:"_onFairyPickerPickerClickedTool",value:function(t){this.sounds.fairyClick.play()}},{key:"_onCenterWinBarShowStartTool",value:function(t){this.sounds.bigWinEnd.play()}},{key:"_onFairyPickerPickEndTool",value:function(t){1===t.target.arrow.alpha&&this.sounds.pickEnd.play()}},{key:"_onFairyActivatorPlayAnimStartTool",value:function(t){"showPickedStart"===t.label&&this.sounds.fairyMagicFx.play(),"winLoop"===t.label&&this.sounds.fairyVoice.play()}},{key:"_onFairyPickerPickStartTool",value:function(t){this.sounds.pickStart.play()}},{key:"_onCharacterActivatorShowStartTool",value:function(t){this.sounds.reelSpinLoop.fadeTo(1,0)}},{key:"_onBeerBonusSplashSelectTapTool",value:function(t){this.sounds.selectTap.play(),this.sounds.beerLoop.play().loop(!0)}},{key:"_onBeerBonusSplashButtonClickedTool",value:function(t){this.sounds.beerLoop.play().loop(!0),this.sounds.selectTap.play()}},{key:"_onFreeSpinsPopupTilesSinglePlayAnimStartTool",value:function(t){"collect"===t.label&&this.sounds.fsInFs.play()}},{key:"_onFairyActivatorShowStartTool",value:function(t){this.sounds.reelSpinLoop.fadeTo(.5,0),this.sounds.fairyPopUp.play(),this.sounds.leprechaunLoop.fadeTo(.5,0)}},{key:"_onBeerBonusSplashShowStartTool",value:function(t){this.sounds.beerPreloaderLoop.play().loop(!0),this.sounds.beerPopupLabel.play(),this.sounds.reelSpinLoop.fadeTo(.5,0),this.sounds.leprechaunLoop.fadeTo(.5,0)}},{key:"_onIntroHideEndTool",value:function(t){this.sounds.reelSpinLoop.play().loop(!0).volume(0),this.sounds.backgrLoop.play().loop(!0).volume(1),this.sounds.bangupLoop.play().loop(!0).volume(0),this.sounds.reelSpinMechLoop.play().loop(!0).volume(0),this.sounds.leprechaunLoop.play().loop(!0).volume(0)}},{key:"_onChanceActivatorShowStartTool",value:function(t){this.sounds.chanceActivatorHat.play()}},{key:"_onCharacterActivatorPlayAnimStartTool",value:function(t){"normal"===t.label&&this.sounds.leprichaunBlowShort.play(),"hide"===t.label&&this.sounds.leprichaunHide.play(),"special"===t.label&&this.sounds.leprichaunBlowLong.play(),"show"===t.label&&(this.sounds.leprichaunPopup.play(),this.sounds.reelSpinLoop.fadeTo(1,0),this.sounds.fsLoop.fadeTo(1,0),this.sounds.leprechaunLoop.fadeTo(1,1))}},{key:"_onFairyActivatorShowEndTool",value:function(t){this.sounds.fairyLoop.play().loop(!0)}},{key:"_onFairyPopupTilesPlayAnimStartTool",value:function(t){"win"===t.label&&this.sounds.fairyWin.play()}},{key:"_onMultiplierPlayAnimStartTool",value:function(t){"increaseStart"===t.label&&this.sounds.multiplier.play()}},{key:"_onMultiplierSplashShowStartTool",value:function(t){this.sounds.multiplierSplash.play()}},{key:"_onBeerPopupTilesPlayAnimStartTool",value:function(t){"win"===t.label&&this.sounds.beerWin.play()}},{key:"_onBeerBonusSplashHoverTapTool",value:function(t){this.sounds.beerHover.play()}},{key:"_onBeerBonusGlassesActivateStartTool",value:function(t){this.sounds.glassAdd.play()}},{key:"_onBeerBonusGlassesFillStartTool",value:function(t){this.sounds.beerLoopBangup.play().loop(!0),this.sounds.beerFillLoop.play().loop(!0)}},{key:"_onBeerBonusGlassesWinStartTool",value:function(t){this.sounds.beerLoopEnd.play()}},{key:"_onBeerBonusGlassesSingleFillEndTool",value:function(t){!0===t.selected&&!0===this.hasBeerBonus&&this.sounds.beerLoopBangup.stop(),this._features.beerBonusGlasses.allChildren.length===t.fullCount&&this.sounds.beerFillLoop.stop(),this._features.beerBonusGlasses.allChildren.length===t.fullCount&&!1===this.hasBeerBonus&&this.sounds.beerLoopBangup.stop()}},{key:"_onBeerBonusSplashHideEndTool",value:function(t){this.sounds.beerPreloaderLoop.stop()}},{key:"_onFairyPickerHoverTool",value:function(t){this.sounds.fairyHover.play()}},{key:"_onFreeSpinsPopupTilesParticlesBurstStartTool",value:function(t){this.sounds.fsParticleBurst.play().limitInterval(.1)}},{key:"_onFreeSpinsPassingEffectActivateStartTool",value:function(t){this.sounds.fsPass.play()}},{key:"_onBeerPopupTilesTileAddTool",value:function(t){1===t.total&&this.sounds.beerHit1.play(),2===t.total&&this.sounds.beerHit2.play(),3===t.total&&this.sounds.beerHit3.play(),4===t.total&&this.sounds.beerHit4.play()}},{key:"_onFairyPopupTilesTileAddTool",value:function(t){1===t.total&&this.sounds.fairyHit1.play(),2===t.total&&this.sounds.fairyHit2.play(),3===t.total&&this.sounds.fairyHit3.play(),4===t.total&&this.sounds.fairyHit4.play(),5===t.total&&this.sounds.fairyHit5.play(),6===t.total&&this.sounds.fairyHit6.play()}},{key:"_onCascadeSingleMoveEndingTool",value:function(t){this.sounds.cascade.play().limitInterval(.1)}},{key:"_onReelMasterAnimationSpinStartingTool",value:function(t){this.sounds.reelSpinMechLoop.fadeTo(.1,1)}},{key:"_onCenterCoinsDeactivateStartTool",value:function(t){this.sounds.bangupLoop.stop()}},{key:"_onCenterCoinsActivateStartTool",value:function(t){this.sounds.bangupLoop.play().loop(!0)}},{key:"_onWaysWinsShowAllStartTool",value:function(t){this.sounds.tileSelect.play()}},{key:"_onFreeSpinsStartScreenShowStartTool",value:function(t){this.sounds.fsPreloaderLoop.play().loop(!0),this.sounds.fsPreloaderFx.play()}},{key:"_onFreeSpinsPopupTilesPlayAnimStartTool",value:function(t){!0===this.hasFsWin&&"win"===t.label&&this.sounds.fsTilesFrame.play().limitInterval(.1),"win"===t.label&&(this.sounds.reelSpinLoop.fadeTo(1,0),this.sounds.backgrLoop.fadeTo(1,0),this.sounds.leprechaunLoop.fadeTo(1,0))}},{key:"_onFreeSpinsStartScreenButtonClickedTool",value:function(t){this.sounds.freeSpinsStart.play(),this.sounds.fsPreloaderLoop.fadeOut(.3,!0)}},{key:"_onExtraWinBangupEndTool",value:function(t){this.sounds.superWinLoop.stop(),this.sounds.bigWinLoop.stop(),this.sounds.megaWinLoop.stop(),"megaWin"===t.label&&this.sounds.megaWinEnd.play(),"superWin"===t.label&&this.sounds.superWinEnd.play(),"bigWin"===t.label&&this.sounds.bigWinEnd.play(),"maxWin"===t.label&&this.sounds.megaWinEnd.play()}},{key:"_onExtraWinLabelChangeTool",value:function(t){"superWin"===t.newLabel&&(this.sounds.superWinStart.play(),this.sounds.bigWinLoop.fadeOut(1.5,!0)),"megaWin"===t.newLabel&&(this.sounds.megaWinStart.play(),this.sounds.superWinLoop.fadeOut(1.5,!0))}},{key:"_onReelMasterSpinStartTool",value:function(t){this.sounds.spinStart.play(),!1===this.isInFreeSpins&&(this.sounds.reelSpinLoop.fadeTo(.2,1),this.sounds.backgrLoop.fadeTo(.2,0)),!0===this.isInFreeSpins&&!1===this.sounds.fsLoop.playing()&&this.sounds.fsLoop.play().loop(!0)}},{key:"_onWinBarUpdateEndTool",value:function(t){!0===this.isWinAboveStake&&this.sounds.bangupLoop.fadeTo(.1,0),!0===this.hasWin&&!1===this.isWinAboveStake&&!1===this.isInFreeSpins&&!1===this.hasFsWin&&(this.sounds.reelSpinLoop.fadeTo(6,0),this.sounds.backgrLoop.fadeTo(6,1),this.sounds.leprechaunLoop.fadeTo(6,0)),!0===this.isWinAboveStake&&!1===this.hasExtraWin&&!1===this.isInFreeSpins&&(this.sounds.reelSpinLoop.fadeTo(6,0),this.sounds.backgrLoop.fadeTo(6,1),this.sounds.leprechaunLoop.fadeTo(6,0)),!1===this.isWinAboveStake&&!1===this.sounds.totalWin.playing()&&!1===this.sounds.bigWinEnd.playing()&&!1===this.sounds.superWinEnd.playing()&&!1===this.sounds.megaWinEnd.playing()&&!1===t.silent&&this.sounds.winSmall.play(),!0===this.isWinAboveStake&&!1===this.hasExtraWin&&!1===this.sounds.totalWin.playing()&&!1===this.sounds.bigWinEnd.playing()&&!1===this.sounds.superWinEnd.playing()&&!1===this.sounds.megaWinEnd.playing()&&!1===t.silent&&this.sounds.winNormal.play()}},{key:"_onReelMasterSpinEndTool",value:function(t){!1===this.hasWin&&!1===this.isInFreeSpins&&this.sounds.backgrLoop.fadeTo(6,1),!1===this.hasWin&&!1===this.hasNextSpin&&!1===this.isInFreeSpins&&(this.sounds.reelSpinLoop.fadeTo(6,0),this.sounds.leprechaunLoop.fadeTo(6,0))}},{key:"_onFreeSpinsPopupTilesTileAddTool",value:function(t){1===t.total&&this.sounds.fsHit1.play(),2===t.total&&this.sounds.fsHit2.play(),3===t.total&&this.sounds.fsHit3.play(),4===t.total&&this.sounds.fsHit4.play()}},{key:"_onPaytableHideStartTool",value:function(t){this.sounds.playButton.play()}},{key:"_onPaytableSlideScreenTool",value:function(t){this.sounds.payTablePages.play()}},{key:"_onIntroShowStartTool",value:function(t){this.sounds.introEnterGame.play()}}])&&v(e.prototype,n),r&&v(e,r),t}(),T=n("./src/core/server/GameData.js"),w=n("./src/core/utils/CombinedTicker.js");function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){O(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function O(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function A(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function I(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){A(o,r,i,a,s,"next",t)}function s(t){A(o,r,i,a,s,"throw",t)}a(void 0)}))}}function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var k=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.features=null,this.inRound=!1,this._cycleCounter=1}var e,n,r,i,o,f,p,d;return e=t,(n=[{key:"state",get:function(){return s.a.get(s.a.TYPES.STATE)}},{key:"init",value:(d=I(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.game,this.features=new a(n,r),this.addFeatures({soundEngine:new E});case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return d.apply(this,arguments)})},{key:"ready",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setStake(this.features.stake.value,!1),this.onReady(t)}},{key:"spinStart",value:(p=I(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.inRound){t.next=2;break}return t.abrupt("return",console.warn("Attempting to spin during game round. Please investigate"));case 2:return s.a.set(s.a.TYPES.GAME_ENABLED,!1),s.a.set(s.a.TYPES.PLAY_START_TIME,w.a.elapsedTime),this.inRound=!0,this.reset(),t.abrupt("return",this.changeState(l.a.PLAY_START,e));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"changeState",value:(f=I(regeneratorRuntime.mark((function t(e){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.a.set(s.a.TYPES.STATE,e),c.a.emit(c.a.events.STATE_CHANGED,{state:e}),e!==l.a.READY||s.a.get(s.a.TYPES.IN_FREE_SPINS)||s.a.get(s.a.TYPES.IN_RESPIN)||(this.inRound=!1),n=s.a.get(s.a.TYPES.MIN_ROUND_DURATION),!(e===l.a.FINISH&&n>0)){t.next=10;break}if(r=(w.a.elapsedTime-s.a.get(s.a.TYPES.PLAY_START_TIME))/1e3,!((i=n-r+.02)>0)){t.next=10;break}return t.next=10,Object(h.d)(i);case 10:console.log("# ".concat(e)),e===l.a.FINISH&&(console.log("------------------------- Cycle: ".concat(this._cycleCounter," --- RoundID: ").concat(s.a.get(s.a.TYPES.ROUND_ID))),this._cycleCounter++);case 12:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"skip",value:function(t){}},{key:"reset",value:function(){}},{key:"addFeatures",value:function(t,e){this.features.add(t,e)}},{key:"setStake",value:function(t,e,n){var r=this.features.stake.setValue(t,e);return this.reset(),this.features.statefulControl.setCurrBonusId(n),this._onStakeChange(t),this._showState(r.value),r}},{key:"_showState",value:function(t){var e=this.features,n=e.statefulControl,r=e.reelMaster;if(n.enabled){var i=n.getData(t);i.reelsBuffer.forEach((function(t,e){var n=P(t,2)[1],i=r.reels[e];n.forEach((function(t,e){return i.replaceTile(e,t,!0)}))})),this._onShowState(i)}}},{key:"_onShowState",value:function(t){}},{key:"_onStakeChange",value:function(t){}},{key:"_updateSpinData",value:(o=I(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=5;break}u.a.update(e),s.a.set(s.a.TYPES.GAME_ENABLED,!0),t.next=14;break;case 5:if(!u.a.hasNext){t.next=9;break}u.a.nextSpin(),t.next=14;break;case 9:return t.t0=u.a,t.next=12,this._requestSpin();case 12:t.t1=t.sent,t.t0.update.call(t.t0,t.t1);case 14:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"_requestSpin",value:(i=I(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=null,n=this.features.stake.value,t.prev=2,t.next=5,this.features.client.spin(n);case 5:e=t.sent,s.a.set(s.a.TYPES.GAME_ENABLED,!0),s.a.set(s.a.TYPES.SPIN_MODE,e.game.spinMode||""),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),r=this.features.statefulControl.enabled?this.features.statefulControl.getData(this.features.stake.value):T.a.settings.game,e={game:S({},r),hasError:!0};case 14:return t.abrupt("return",e);case 15:case"end":return t.stop()}}),t,this,[[2,10]])}))),function(){return i.apply(this,arguments)})}])&&C(e.prototype,n),r&&C(e,r),t}(),N=n("./node_modules/@games/dope/src/Dopamine.js"),M=n("./src/core/utils/misc.js");function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var D={seconds:3,thresholds:{low:30,normal:45},onChange:function(){}},L=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.average=60,this._ticker=null,this._counter=0,this._history=null}var e,n,r;return e=t,(n=[{key:"trackAverage",value:function(t){var e=this,n=Object(M.b)(D,t),r=n.seconds,i=n.thresholds,o=n.onChange,a=60*r;this._history=new Array(a),this._history.fill(this.average),this._ticker=w.a.Ticker,this._ticker.add((function(){return e._onTick(i,a,o)}))}},{key:"_onTick",value:function(t,e,n){var r=Math.floor(this._update(this._ticker.FPS,e));if(this.average!==r){this.average=r;var i=t.low,o=t.normal,a=this._ticker.isLowFPS;this.average<i&&(a=!0),this.average>o&&(a=!1),this._ticker.isLowFPS!==a&&(this._ticker.isLowFPS=a,n(a))}}},{key:"_update",value:function(t,e){return this._counter++,this._counter%=e,this._history[this._counter]=t,this._history.reduce((function(t,e){return t+e}),0)/e}}])&&j(e.prototype,n),r&&j(e,r),t}()),B=n("./src/core/features/reels/engines/SpinningMegaWaysReelMaster.js");function F(t){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function H(t,e,n){return e=X(e),function(t,e){if(e&&("object"===F(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],X(t).constructor):e.apply(t,n))}function V(t,e,n){return(V="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=X(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function X(t){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function W(t,e){return(W=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Y=function(t){function e(){return U(this,e),H(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&W(t,e)}(e,t),n=e,(r=[{key:"_doEaseEnd",value:function(){this._renderer.reset(),V(X(e.prototype),"_doEaseEnd",this).call(this)}}])&&G(n.prototype,r),i&&G(n,i),e}(n("./src/core/features/reels/animations/SpinningMegaWaysAnimation.js").a),z=n("./node_modules/ramda/es/mergeDeepRight.js"),q=n("./node_modules/ramda/es/clone.js"),K=n("./node_modules/@games/gsap/all.js");function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||Q(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t){return function(t){if(Array.isArray(t))return tt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Q(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(t,e){if(t){if("string"==typeof t)return tt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tt(t,e):void 0}}function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach((function(e){rt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function it(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function ot(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){it(o,r,i,a,s,"next",t)}function s(t){it(o,r,i,a,s,"throw",t)}a(void 0)}))}}function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function st(t,e,n){return e=ct(e),function(t,e){if(e&&("object"===Z(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],ct(t).constructor):e.apply(t,n))}function ut(t,e,n){return(ut="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ct(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lt(t,e){return(lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ht=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),st(this,e)}var n,o,a,f,y,m,v,_,g,b,E,w,x;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lt(t,e)}(e,t),n=e,(o=[{key:"init",value:(x=ot(regeneratorRuntime.mark((function t(n,o,a){var s,u,c,h=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ut(ct(e.prototype),"init",this).call(this,n,o,a),s=n.game,this.addFeatures({reelMaster:new B.a(nt(nt({},s),{},{config:d.a.reels,reelAnimation:Y})),throbber:new p.a.Throbber({animation:i.a.Throbber.throbber,config:d.a.throbber,container:o}),gameFrameMask:new p.a.GameFrameMask({config:d.a.gameFrameMask}),extraWinCoinsContainer:new r.Container,jackpotPopupTilesBelowContainer:new r.Container,wildPopupTilesTopContainer:new r.Container,wildPopupTilesWinContainer:new r.Container,beerPopupTilesBelowContainer:new r.Container,fairyPopupTilesBelowContainer:new r.Container,freeSpinsPopupTilesBelowContainer:new r.Container,anticipationBgContainer:new r.Container,fatTilesBelowContainer:new r.Container,fatTilesWinContainer:new r.Container,seniorPopupTilesTopContainer:new r.Container,beerBonusGlassesBelowContainer:new r.Container,beerBonusGlassesFramesBelowContainer:new r.Container,beerBonusGlassesStreamsBelowContainer:new r.Container}),this.addFeatures({paytable:new p.a.Paytable({animation:i.a.Paytable.paytableMc,onLoadStart:function(){h.features.throbber.activate()},onLoadEnd:function(){h.features.throbber.deactivate()},settings:s,config:d.a.paytable})}),d.a.hasPaytable&&this.features.paytable.initDrag(),u=this.features.reelMaster,c=u.featuresMask,this.addFeatures({background:new p.a.SceneEffects({scenes:i.a.Background,name:"Background",config:d.a.sceneEffects}),slotBg:new p.a.SceneEffects({scenes:i.a.SlotBackground,name:"SlotBackground",config:d.a.sceneEffects}),foreground:new p.a.SceneEffects({scenes:i.a.Foreground,name:"Foreground",config:d.a.sceneEffects}),foregroundOverlay:new p.a.SceneEffects({scenes:i.a.ForegroundOverlay,name:"ForegroundOverlay",config:d.a.sceneEffects}),intro:new p.a.GameIntro({animation:i.a.GameIntro.gameIntro}),logo:new p.a.Cover({animation:i.a.Logo.mainLogo}),headerBanners:new p.a.HeaderBanners({animation:i.a.HeaderBanners.headerBanners,config:d.a.headerBanners,lang:N.c.code}),statefulControl:new p.a.StatefulControl(n),centerCoins:new p.a.ParticlesContainer({source:i.a.ExtraWin.extraWinCoin,guide:(new i.a.CenterCoins.emitterGuide).guide,config:d.a.centerCoins}),freeSpinsStartScreen:new p.a.FreeSpinsStartScreen({animation:i.a.FreeSpinsStartScreen.freeSpinsStartScreenMc,config:d.a.freeSpinsStartScreen}),freeSpinsStatus:new p.a.FreeSpinsStatus({animation:i.a.FreeSpinsStatus.freeSpinsStatusMc,config:d.a.freeSpinsStatus}),winTiles:new p.a.WinTiles({reelMaster:u,source:{cover:p.a.MegaWaysWinTile,animation:i.a.WinTiles,config:d.a.wins.tiles},config:d.a.wins.tiles}),winBar:new p.a.WinBar,megaWaysCounter:new p.a.MegaWaysCounter({reelMaster:u,animation:i.a.MegaWaysCounter.megaWaysCounter,config:d.a.megaWaysCounter}),winWaysBar:new p.a.WinWaysBar({animation:i.a.WinWaysBar.winBar,config:d.a.winWaysBar}),respinWins:new p.a.RespinWins,extraWin:new p.a.ExtraWin({thresholds:s.extraWin,animation:i.a.ExtraWin.extraWin,config:d.a.extraWin,coinsContainer:this.features.extraWinCoinsContainer,particles:{source:i.a.ExtraWin}}),freeSpinsPopupTiles:new p.a.FreeSpinsPopupTiles({name:"FreeSpinsPopupTiles",source:{animations:i.a.PopupTiles},containers:{below:this.features.freeSpinsPopupTilesBelowContainer},reelMaster:u,config:nt(nt({},d.a.freeSpinsPopupTiles),d.a.scatterHitEffect)}),jackpotPopupTiles:new p.a.JackpotPopupTiles({name:"JackpotPopupTiles",source:{animations:i.a.PopupTiles,cover:p.a.FinishCover},containers:{below:this.features.jackpotPopupTilesBelowContainer},reelMaster:u,config:d.a.jackpotPopupTiles}),camera:new p.a.Camera(o,a.baseSize),rainingMegaCamera:new p.a.Camera(o.parent,a.baseSize),rumble:new p.a.Rumble({target:o.parent,config:d.a.rumble}),fade:new p.a.Cover({animation:i.a.Fade.fade}),bonusFade:new p.a.Cover({animation:i.a.FadeBonus.fade}),anticipationFade:new p.a.AnticipationFade({animation:i.a.Fade.fade,reelMaster:u,config:d.a.anticipationFade}),anticipation:new p.a.AnticipationLayers({name:"Anticipation",source:{animation:i.a.Anticipation.fullAnticipation,animationBg:i.a.AnticipationBg.fullAnticipation},containers:{background:this.features.anticipationBgContainer},configs:d.a.anticipation,reelMaster:u}),cascadeAnticipation:new p.a.CascadeAnticipation({name:"CascadeAnticipation",source:{animation:i.a.Anticipation.fullAnticipation},reelMaster:u}),cascadeAnticipationBg:new p.a.CascadeAnticipationBg({name:"CascadeAnticipationBg",source:{animation:i.a.AnticipationBg.fullAnticipation},reelMaster:u}),cascade:new p.a.MegaWaysCascade({reelMaster:this.features.reelMaster,source:{animation:i.a.CascadeTiles,cover:p.a.CustomCascadeTile},config:d.a.cascade,mask:c}),fatTiles:new p.a.FatTiles({name:"FatTiles",source:{cover:p.a.FatTileCover,animations:i.a.FatTiles},containers:{below:this.features.fatTilesBelowContainer,win:this.features.fatTilesWinContainer},reelMaster:u,config:d.a.fatTiles}),wildPopupTiles:new p.a.BurstPopupTiles({name:"WildPopupTiles",source:{animations:i.a.PopupTiles},containers:{top:this.features.wildPopupTilesTopContainer,win:this.features.wildPopupTilesWinContainer},reelMaster:u,config:d.a.wildPopupTiles}),beerPopupTiles:new p.a.ScatterPopupTiles({name:"BeerPopupTiles",source:{animations:i.a.PopupTiles},containers:{below:this.features.beerPopupTilesBelowContainer},reelMaster:u,config:nt(nt({},d.a.beerPopupTiles),d.a.scatterHitEffect)}),fairyPopupTiles:new p.a.ScatterPopupTiles({name:"FairyPopupTiles",source:{animations:i.a.PopupTiles},containers:{below:this.features.fairyPopupTilesBelowContainer},reelMaster:u,config:nt(nt({},d.a.fairyPopupTiles),d.a.scatterHitEffect)}),seniorPopupTiles:new p.a.SeniorPopupTiles({name:"SeniorPopupTiles",source:{animations:i.a.SeniorTiles},containers:{top:this.features.seniorPopupTilesTopContainer},reelMaster:u,mask:c,config:d.a.seniorPopupTiles}),rainingTiles:new p.a.RainingTiles({name:"RainingTiles",animation:i.a.RainingTiles.rainingTile,reelMaster:u,renderer:a,config:d.a.rainingTiles}),rainingTilesMega:new p.a.RainingTilesMega({name:"RainingTilesMega",animation:i.a.RainingTiles.rainingTile,reelMaster:u,renderer:a,config:Object(z.a)(d.a.rainingTiles,d.a.rainingTilesMega)}),multiplierSplash:new p.a.MultiplierCover({name:"MultiplierSplash",animation:i.a.MultiplierSplash.splash,config:d.a.multiplierSplash}),fadeMultiplier:new p.a.Cover({name:"FadeMultiplier",animation:i.a.FadeBonus.fadeMultiplier}),multiplier:new p.a.Multiplier({name:"Multiplier",animation:i.a.Multiplier.multiplier,config:d.a.multiplier}),characterActivator:new p.a.CharacterActivator({name:"CharacterActivator",animation:i.a.CharacterActivator.characterActivator,config:d.a.characterActivator}),chanceActivator:new p.a.ChanceActivator({name:"ChanceActivator",animation:i.a.ChanceActivator.characterActivator,config:d.a.chanceActivator}),spinConfigurator:new p.a.SpinConfigurator({reelMaster:this.features.reelMaster}),beerBonusSplash:new p.a.BeerBonusSplash({name:"BeerBonusSplash",animation:i.a.BeerBonus.beerBonusSplash,config:d.a.beerBonusSplash}),beerBonusPlate:new p.a.BeerBonusPlate({name:"BeerBonusPlate",animation:i.a.BeerBonus.beerBonusPlate}),beerBonusTaps:new p.a.BeerTapsCover({name:"BeerBonusTaps",animation:i.a.BeerBonus.beerBonusTaps}),beerBonusGlasses:new p.a.BeerBonusGlasses({name:"BeerBonusGlasses",source:{cover:p.a.BeerGlassCover,animation:i.a.BeerBonus.beerBonusGlass,config:d.a.beerBonusGlasses},containers:{below:this.features.beerBonusGlassesBelowContainer},reelMaster:u,config:d.a.beerBonusGlasses}),beerBonusGlassesFrames:new p.a.BeerBonusGlassesFrames({name:"BeerBonusGlassesFrames",source:{cover:p.a.BeerGlassFrameCover,animation:i.a.BeerBonus.beerBonusGlassFrame},containers:{below:this.features.beerBonusGlassesFramesBelowContainer},reelMaster:u,config:d.a.beerBonusGlassesFrames}),beerBonusGlassesStreams:new p.a.BeerBonusGlassesStreams({name:"BeerBonusGlassesStreams",source:{animation:i.a.BeerBonus.beerBonusStream},containers:{below:this.features.beerBonusGlassesStreamsBelowContainer},reelMaster:u,config:d.a.beerBonusGlassesStreams}),centerWinBar:new p.a.CenterWinBar({name:"CenterWinBar",animation:i.a.CenterWinBar.winBar,config:d.a.centerWinBar}),fairyActivator:new p.a.FairyActivator({name:"FairyActivator",animation:i.a.FairyActivator.fairyActivator,config:d.a.fairyActivator}),fairyTrailParticles:new p.a.FairyTrailParticles({name:"FairyTrailParticles",animation:i.a.FairyActivator.trailParticle,config:d.a.fairyTrailParticles}),fairySplash:new p.a.FairySplash({name:"FairySplash",animation:i.a.FairyActivator.fairyBonusSplash,config:d.a.fairySplash}),fairyArrows:new p.a.FairyArrows({animation:i.a.FairyPicker.rowArrow,markers:new i.a.FairyPicker.markers,config:{}}),rainingTilesEffect:new p.a.RainingTilesEffect({name:"RainingTilesEffect",source:{animations:i.a.RainingTilesEffect,cover:p.a.RainingTilesEffectCover},reelMaster:u,config:d.a.rainingTilesEffect}),rainingTilesEffectMega:new p.a.ReelCovers({name:"RainingTilesEffectMega",source:{animation:i.a.RainingFatTilesEffect.rainingFatEffect},reelMaster:u}),freeSpinsPassingEffect:new p.a.PassingEffects({name:"PassingEffect",source:{animation:i.a.PassEffect.passEffectFreeSpins},reelMaster:u,config:d.a.passingEffects.freeSpins,mask:c}),beerBonusPassingEffect:new p.a.PassingEffects({name:"PassingEffect",source:{animation:i.a.PassEffect.passEffectBeerBonus},reelMaster:u,config:d.a.passingEffects.beerBonus,mask:c}),fairyBonusPassingEffect:new p.a.PassingEffects({name:"PassingEffect",source:{animation:i.a.PassEffect.passEffectFairyBonus},reelMaster:u,config:d.a.passingEffects.fairyBonus,mask:c}),freeSpinsTileParticles:new p.a.TilesParticles({animation:i.a.ExtraWin,reelMaster:u,config:d.a.freeSpinsPopupTiles.particles}),freeSpinsHitEffect:new p.a.HitEffect({animation:i.a.HitEffect.hitEffectFs,config:d.a.hitEffect}),freeSpinsBgHitEffect:new p.a.HitEffect({animation:i.a.HitEffect.hitEffectFsBg,config:d.a.hitEffect}),beerBonusHitEffect:new p.a.HitEffect({animation:i.a.HitEffect.hitEffectBeer,config:d.a.hitEffect}),beerBonusBgHitEffect:new p.a.HitEffect({animation:i.a.HitEffect.hitEffectBeerBg,config:d.a.hitEffect}),fairyBonusHitEffect:new p.a.HitEffect({animation:i.a.HitEffect.hitEffectFairy,config:d.a.hitEffect}),fairyBonusBgHitEffect:new p.a.HitEffect({animation:i.a.HitEffect.hitEffectFairyBg,config:d.a.hitEffect}),freeSpinsTransition:new p.a.PrerenderedCover({animation:i.a.FreeSpinsTransition.freeSpinsTransition}),rainbowEffect:new p.a.Cover({animation:i.a.FreeSpinsTransition.rainbowEffect}),winTilesParticles:new p.a.TilesParticles({animation:i.a.ExtraWin,reelMaster:u,config:d.a.wins.particles}),fatTilesParticles:new p.a.TilesParticles({animation:i.a.ExtraWin,reelMaster:u,config:d.a.fatTiles.particles}),wildTilesParticles:new p.a.TilesParticles({animation:i.a.ExtraWin,reelMaster:u,config:d.a.wins.particles}),fairyPickerParticles:new p.a.TilesParticles({animation:i.a.ExtraWin,reelMaster:u,config:d.a.fairyPickerParticles.particles})}),this.addFeatures({waysWins:new p.a.WaysWins({name:"MegaWaysWins",reelMaster:u,tiles:this.features.winTiles,config:d.a.wins.ways}),cascadeAnticipationController:new p.a.CascadeAnticipationController({name:"CascadeAnticipationController",anticipation:this.features.cascadeAnticipation,anticipationBg:this.features.cascadeAnticipationBg,config:d.a.cascadeAnticipation.default,reelMaster:u}),fairyPicker:new p.a.FairyPicker({name:"FairyPicker",animation:i.a.FairyPicker.fairyPicker,levelsMultipliers:s.multiplierSequence.FairyLevelsMultipliers,fairyActivator:this.features.fairyActivator,fairyTrailParticles:this.features.fairyTrailParticles,config:d.a.fairyPicker}),sceneOverlay:new p.a.SceneEffects({scenes:i.a.SceneOverlay,name:"SlotOverlay",config:nt(nt({},d.a.sceneEffects),d.a.sceneOverlay)})}),this.addFeatures({jackpots:new p.a.Jackpots({features:{jackpotPopupTiles:this.features.jackpotPopupTiles,fatTiles:this.features.fatTiles,freeSpinsPopupTiles:this.features.freeSpinsPopupTiles,wildPopupTiles:this.features.wildPopupTiles,beerPopupTiles:this.features.beerPopupTiles,fairyPopupTiles:this.features.fairyPopupTiles,seniorPopupTiles:this.features.seniorPopupTiles,fade:this.features.fade},config:d.a.jackpotWin})}),this.features.jackpotPopupTilesBelowContainer.mask=c,this.features.beerPopupTilesBelowContainer.mask=c,this.features.fairyPopupTilesBelowContainer.mask=c,this.features.freeSpinsPopupTilesBelowContainer.mask=c,this.features.fatTilesBelowContainer.mask=c,this.features.soundEngine.init(this.features),this._attachGameListeners(),this.features.arrange(["background","slotBg","cascadeAnticipationBg","reelMaster","anticipationBgContainer","cascade","seniorPopupTiles","wildPopupTiles","beerPopupTilesBelowContainer","freeSpinsPopupTilesBelowContainer","fairyPopupTilesBelowContainer","fatTilesBelowContainer","jackpotPopupTilesBelowContainer","fade","anticipationFade","fadeMultiplier","beerBonusPassingEffect","freeSpinsPassingEffect","fairyBonusPassingEffect","foreground","headerBanners","logo","freeSpinsStatus","multiplier","seniorPopupTilesTopContainer","wildPopupTilesTopContainer","beerBonusBgHitEffect","beerPopupTiles","beerBonusHitEffect","freeSpinsBgHitEffect","freeSpinsPopupTiles","freeSpinsHitEffect","fairyBonusBgHitEffect","fairyPopupTiles","fairyBonusHitEffect","fatTiles","jackpotPopupTiles","cascadeAnticipation","anticipation","megaWaysCounter","winTiles","wildPopupTilesWinContainer","fatTilesWinContainer","winWaysBar","foregroundOverlay","fairyPicker","rainbowEffect","fairyTrailParticles","fairyActivator","fairyArrows","fairySplash","rainingTilesEffect","rainingTilesEffectMega","rainingTiles","rainingTilesMega","beerBonusGlassesFramesBelowContainer","beerBonusGlassesStreamsBelowContainer","beerBonusGlassesBelowContainer","beerBonusPlate","beerBonusGlassesFrames","beerBonusGlassesStreams","beerBonusGlasses","beerBonusTaps","beerBonusSplash","bonusFade","centerWinBar","multiplierSplash","freeSpinsTransition","freeSpinsStartScreen","characterActivator","chanceActivator","sceneOverlay","freeSpinsTileParticles","winTilesParticles","wildTilesParticles","fatTilesParticles","fairyPickerParticles","centerCoins","extraWin","extraWinCoinsContainer","intro","gameFrameMask","paytable","throbber"]),t.next=20,this.changeState(l.a.INIT);case 20:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return x.apply(this,arguments)})},{key:"onReady",value:(w=ot(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.features.camera.start(),this.features.rainingMegaCamera.start(),!e){t.next=7;break}return t.next=5,this.changeState(l.a.READY);case 5:t.next=9;break;case 7:return t.next=9,this.changeState(l.a.INTRO);case 9:c.a.emit(c.a.events.GAME_STARTED),L.trackAverage({onChange:function(t){return n._onAverageFpsChange(t)}});case 11:case"end":return t.stop()}}),t,this)}))),function(t){return w.apply(this,arguments)})},{key:"changeState",value:(E=ot(regeneratorRuntime.mark((function t(n,r){var i,o,a,f,y,m,v,_,g,b,E,w,x,S,O,P,R,A,I,C,k,N,M,j,D,L,B,F,U,G,H,V,X,W,Y,z,K,Z,$,Q,tt,et,rt,it,ot,at,st,lt,ht,ft,pt,dt,yt,mt,vt,_t,gt,bt,Et,Tt,wt,xt,St,Ot,Pt,Rt,At,It,Ct,kt,Nt,Mt,jt,Dt,Lt,Bt,Ft,Ut,Gt,Ht,Vt,Xt,Wt,Yt,zt,qt,Kt,Zt,$t,Jt,Qt,te,ee,ne,re,ie,oe,ae,se,ue,ce,le,he,fe,pe,de,ye,me,ve,_e,ge,be,Ee,Te,we,xe,Se,Oe,Pe,Re,Ae,Ie,Ce,ke,Ne,Me,je,De,Le,Be,Fe,Ue,Ge,He,Ve,Xe=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ut(ct(e.prototype),"changeState",this).call(this,n);case 2:o=null===(i=u.a.currentSpin)||void 0===i?void 0:i.game,t.t0=n,t.next=t.t0===l.a.INTRO?6:t.t0===l.a.READY?18:t.t0===l.a.PLAY_START?23:t.t0===l.a.PLAY_DATA?30:t.t0===l.a.LUCKY_PIPE?33:t.t0===l.a.PLAY_STOP?78:t.t0===l.a.PLAY_END?101:t.t0===l.a.WIN_LINES?107:t.t0===l.a.WIN_LINES_EW?126:t.t0===l.a.WIN_LINES_SUM?131:t.t0===l.a.WIN_LINES_NO_WIN?146:t.t0===l.a.BEER_BONUS?147:t.t0===l.a.FAIRY_BONUS?186:t.t0===l.a.INSTANT_WIN?216:t.t0===l.a.RESPIN_START?258:t.t0===l.a.CASCADE?262:t.t0===l.a.RESPIN_END?288:t.t0===l.a.FREE_SPINS_START?292:t.t0===l.a.FREE_SPINS_BONUS?343:t.t0===l.a.TOTAL_WIN?357:t.t0===l.a.JACKPOT_WIN?392:t.t0===l.a.FINISH?398:408;break;case 6:return s.a.set(s.a.TYPES.GAME_ENABLED,!1),a=T.a.settings.game.ways,this.features.wildPopupTiles.createInitial(),this.features.intro.awaitEmit(p.a.GameIntro.events.RAINBOW_SHOW).then((function(){return Xe.features.rainbowEffect.show({removeAtEnd:!0})})),this.features.intro.awaitEmit(p.a.GameIntro.events.LOGO).then((function(){Xe.features.logo.show(),Xe.features.megaWaysCounter.show(a[a.length-1])})),t.next=13,this.features.intro.show();case 13:return t.next=15,this.features.intro.hide();case 15:return this.features.remove(this.features.intro),s.a.set(s.a.TYPES.GAME_ENABLED,!0),t.abrupt("return",this.changeState(l.a.READY));case 18:return this.features.freeSpinsPassingEffect.disable(),this.features.beerBonusPassingEffect.disable(),this.features.fairyBonusPassingEffect.disable(),(s.a.get(s.a.TYPES.IN_FREE_SPINS)||s.a.get(s.a.TYPES.IN_RESPIN))&&(this.reset(),this.changeState(l.a.PLAY_START)),t.abrupt("return");case 23:return s.a.get(s.a.TYPES.AUTO_PLAY)&&c.a.emit(c.a.events.AUTOPLAY_SPIN),s.a.get(s.a.TYPES.IN_FREE_SPINS)||this.features.winBar.reset(),s.a.get(s.a.TYPES.IN_RESPIN)||(this._toggleUpperBufferVisibility(!0),this.features.reelMaster.start(),this.features.freeSpinsPassingEffect.enable(),this.features.beerBonusPassingEffect.enable(),this.features.fairyBonusPassingEffect.enable()),s.a.get(s.a.TYPES.IN_FREE_SPINS)&&!s.a.get(s.a.TYPES.IN_RESPIN)&&(this.features.freeSpinsStatus.decrement(),c.a.emit(c.a.events.FEATURE_UPDATE,{featureType:"freeSpins",name:"freeSpins"})),t.next=29,this._updateSpinData(r);case 29:return t.abrupt("return",this.changeState(l.a.PLAY_DATA));case 30:return f=o.reelsBuffer,y=o.activator,m=o.win,_=(v=void 0===m?{}:m).lines,g=void 0===_?0:_,b=v.multiplier,E=void 0===b?0:b,w=o.respin,x=o.ways,S=o.fatTiles,O=void 0===S?[]:S,P=o.pipeRandomTiles,R=void 0===P?[]:P,A=o.pipeScatters,I=void 0===A?[]:A,u.a.hasError||(this.features.megaWaysCounter.observeReels(x,{fatTiles:O}),s.a.get(s.a.TYPES.IN_RESPIN)||(this.features.jackpots.observeReels(),this._executePopupTiles((function(t,e){return t.observeReels(e)}),{seniorPopupTiles:{skipPositions:[].concat(J(R),J(I)),skipReels:O.map((function(t){return t.reel}))},skip:["jackpotPopupTiles"]}),s.a.get(s.a.TYPES.IN_FREE_SPINS)||y||this.features.anticipation.prepare(f)),(s.a.get(s.a.TYPES.IN_RESPIN)||w)&&this.features.respinWins.update(g+E)),t.abrupt("return",this.changeState(l.a.LUCKY_PIPE));case 33:if(C=d.a.activators,k=C.CHANCE,N=C.LUCKY_PIPE,M=C.RANDOM_TILES,j=C.RANDOM_TILES_MEGA,D=d.a.cameraEffects.rainingTilesMega,L=Object(h.b)(d.a.characterActivator.flipChance),!this._hasActivator(k)||this._hasActivator(N)){t.next=41;break}return t.next=38,this.features.fade.show();case 38:return t.next=40,this.features.chanceActivator.activate({shouldFlip:L,removeAtEnd:!0});case 40:this.features.fade.hide();case 41:if(this._hasActivator(N)){t.next=43;break}return t.abrupt("return",this.changeState(l.a.PLAY_STOP));case 43:return B=o.activator,F=o.reelsBuffer,U=o.fatTiles,G=void 0===U?[]:U,H=o.pipeRandomTiles,V=void 0===H?[]:H,X=o.pipeScatters,W=void 0===X?[]:X,Y=this._getReelsCurrentSize(F),z=[].concat(J(V),J(W)).map((function(t){return nt(nt({},t),{},{height:Y[t.reel]})})),K=[].concat(J(z),J(G))[0].tileId,t.next=49,this.features.fade.show();case 49:if(t.t1=Object(h.b)(d.a.chanceActivator.showChance),!t.t1){t.next=53;break}return t.next=53,this.features.chanceActivator.activate({shouldFlip:L,removeAtEnd:!0});case 53:return t.next=55,this.features.characterActivator.activate({tileId:K,activator:B.features[2],shouldFlip:L});case 55:if(this.features.characterActivator.hide(),this._hasActivator(j)&&this.features.rainingMegaCamera.change(D.start),!z.length){t.next=66;break}return Z=Promise.resolve(),$=this._getCurrentPopupFeature(K),this.features.gameFrameMask.apply(this.features.rainingTiles),t.next=63,this.features.rainingTiles.activate(z,{hasFakeTiles:this._hasActivator(M),onSingleLand:function(t){Z=Xe._onRainingTilesLand(t,$)}});case 63:return t.next=65,Z;case 65:this.features.gameFrameMask.unmask(this.features.rainingTiles);case 66:if(this.features.rainingTilesEffect.remove(),!G.length){t.next=75;break}return Q=Promise.resolve(),this.features.gameFrameMask.apply(this.features.rainingTilesMega),t.next=72,this.features.rainingTilesMega.activate(G,{hasFakeTiles:!0,skipSort:!0,onSingleLand:function(t){Q=Xe._onRainingTilesMegaLand(t)}});case 72:return t.next=74,Q;case 74:this.features.gameFrameMask.unmask(this.features.rainingTilesMega);case 75:return this.features.fade.hide(),this._hasActivator(j)&&this.features.rainingMegaCamera.change(D.end),t.abrupt("return",this.changeState(l.a.PLAY_STOP));case 78:if(tt=o.reelsBuffer,et=o.fatTiles,rt=void 0===et?[]:et,!s.a.get(s.a.TYPES.IN_RESPIN)){t.next=94;break}if(t.t2=this.features.cascadeAnticipationController.isActive,!t.t2){t.next=84;break}return t.next=84,Object(h.d)(d.a.cascadeAnticipation.default.delays.beforeHideStart);case 84:if(c.a.emit(c.a.events.FEATURE_START,{featureType:"chainReactor",name:"destroy"}),this._executePopupTiles((function(t){t.allChildren.length!==Xe._getTilesData(o,t.tileIds[0]).length&&t.moveToContainer("main")}),{skip:["wildPopupTiles","jackpotPopupTiles","seniorPopupTiles"]}),this.features.winTiles.children.length){t.next=89;break}return t.next=89,this.features.fatTiles.finish(null,{stopTickChildren:!1,waitLabel:"winHide"});case 89:return t.next=91,this.features.cascade.drop(tt);case 91:c.a.emit(c.a.events.FEATURE_END,{featureType:"chainReactor",name:"destroy"}),t.next=100;break;case 94:return(it=!!rt.length)&&this.features.spinConfigurator.preConfigStop(rt.map((function(t){return t.reel}))),t.next=98,this.features.reelMaster.stop(tt.asMutable({deep:!0}));case 98:u.a.hasWin&&this._toggleUpperBufferVisibility(!1),this._hasActivator(d.a.activators.LUCKY_PIPE)&&(it&&this.features.fatTiles.replaceTilesArea(),(ot=this._getCurrentPopupFeature())&&(ot.attach(),ot.replaceTiles()));case 100:return t.abrupt("return",this.changeState(l.a.PLAY_END));case 101:if(!u.a.hasError){t.next=103;break}return t.abrupt("return",this.changeState(l.a.FINISH));case 103:if(!s.a.get(s.a.TYPES.IN_FREE_SPINS)){t.next=105;break}return t.abrupt("return",this.changeState(l.a.WIN_LINES));case 105:return this._shouldShowAds()&&(this.features.logo.hide(),this.features.headerBanners.displayRandom().then((function(){return!s.a.get(s.a.TYPES.IN_FREE_SPINS)&&Xe.features.logo.show()}))),t.abrupt("return",this.changeState(l.a.WIN_LINES));case 107:if(at=this._hasActivator(d.a.activators.MAX_WIN),u.a.hasWin||at){t.next=110;break}return t.abrupt("return",this.changeState(l.a.WIN_LINES_EW));case 110:return st=o.winLines,lt=o.win,ht=lt.lines,ft=lt.instantWin,pt=void 0===ft?0:ft,dt=this.features.fatTiles.getTilesArea(),t.next=114,this.features.wildPopupTiles.finish(null,{stopTickChildren:!1,waitLabel:"show"});case 114:return this.features.jackpotPopupTiles.remove(),this._executePopupTiles((function(t){return t.moveToContainer("below")}),{skip:["jackpotPopupTiles","seniorPopupTiles","wildPopupTiles"]}),this.features.seniorPopupTiles.moveToContainer("main"),this.features.waysWins.setSkippedPositions([].concat(J(dt),J(this.features.wildPopupTiles.positions))),this.features.winWaysBar.show(st,at?pt:ht),this.features.fade.show(),t.next=122,this.features.waysWins.show(st,{onTilesShow:function(t){var e=t.positions,n=t.skipped;return Xe._onWaysWinsTilesShown(e,n)},hasMaxWin:at});case 122:return t.next=124,Object(h.d)(d.a.wins.lines.delays.afterShow);case 124:return this.features.winWaysBar.hide(),t.abrupt("return",this.changeState(l.a.WIN_LINES_EW));case 126:if(this._hasExtraWin()&&!o.chainReactor&&!this._hasActivator(d.a.activators.MAX_WIN)){t.next=128;break}return t.abrupt("return",this.changeState(l.a.WIN_LINES_SUM));case 128:return t.next=130,this._playExtraWin();case 130:return t.abrupt("return",this.changeState(l.a.WIN_LINES_SUM));case 131:if(yt=this.features.respinWins.total,!o.chainReactor&&!this._hasActivator(d.a.activators.MAX_WIN)&&yt){t.next=134;break}return t.abrupt("return",this.changeState(l.a.WIN_LINES_NO_WIN));case 134:if(mt=o.stake,!(yt>mt)||this._hasExtraWin()){t.next=144;break}return this.features.centerCoins.activate(),s.a.set(s.a.TYPES.RESULT_READY,!0),t.next=140,this.features.winBar.activate(yt,mt);case 140:s.a.set(s.a.TYPES.RESULT_READY,!1),this.features.centerCoins.deactivate(),t.next=145;break;case 144:yt&&this.features.winBar.activate(yt,mt,!0);case 145:return t.abrupt("return",this.changeState(l.a.WIN_LINES_NO_WIN));case 146:return t.abrupt("return",this.changeState(l.a.BEER_BONUS));case 147:if(vt=d.a.bonuses,_t=vt.BEER,gt=vt.BEER_MEGA,bt=d.a.beerBonus.delays,Et=bt.beforeWin,Tt=bt.beforeWinMega,this._hasBonus([_t,gt])){t.next=151;break}return t.abrupt("return",this.changeState(l.a.FAIRY_BONUS));case 151:return wt=this._hasBonus(gt),xt=o.instantWin,St=xt.options,Ot=xt.multiplier,t.next=155,this.features.beerPopupTiles.finish(null,{stopTickChildren:!1,waitLabel:"show"});case 155:return this._onPopupFadeShow("beerPopupTiles"),this.features.fade.show(),t.next=159,this.features.beerPopupTiles.play("win");case 159:return s.a.set(s.a.TYPES.IS_WHOLE_GAME_STAGE_USED,!0),t.next=162,this.features.beerBonusSplash.show({isMega:wt});case 162:return Pt=this.features.beerBonusSplash.lastChoiceId,Rt={isMega:wt,choices:Object(q.a)(St),selectedMultiplier:Ot,choiceId:Pt},At=this._parseBeerBonusData(Rt),t.next=167,this.features.beerBonusSplash.play(p.a.BeerBonusSplash.animLabels.MOVE);case 167:return this.features.fade.hide(),this.features.beerBonusSplash.hide(),this.features.beerBonusPlate.show(),this.features.beerBonusTaps.show(),t.next=173,this.features.beerBonusPlate.awaitEmit();case 173:return wt&&this.features.beerBonusPlate.showMegaEffect(),t.next=176,Promise.all([this.features.beerBonusTaps.showTapEffect({isMega:wt,choiceId:Pt}),this.features.beerBonusGlasses.activate(At,Rt),this.features.beerBonusGlassesFrames.activate(At,Rt)]);case 176:return this.features.beerBonusGlassesStreams.activate(At,Rt),t.next=179,this.features.beerBonusGlasses.startFilling({isMega:wt,onFillEnd:function(t){t.selected&&Xe.features.beerBonusTaps.hideTapEffect(t.reel),Xe.features.beerBonusGlassesStreams.deactivate(t,{removeAtEnd:!1}).then((function(){return Xe.features.beerBonusGlassesStreams.remove(t)}))}});case 179:return t.next=181,Object(h.d)(wt?Tt:Et);case 181:return wt&&this.features.beerBonusPlate.winMegaEffect(),t.next=184,Promise.all([this.features.beerBonusGlasses.playWin(),this.features.beerBonusGlassesFrames.playWin(wt)]);case 184:return this.features.beerBonusGlasses.hideWonSum(),t.abrupt("return",this.changeState(l.a.FAIRY_BONUS));case 186:if(this._hasBonus(d.a.bonuses.FAIRY)){t.next=188;break}return t.abrupt("return",this.changeState(l.a.INSTANT_WIN));case 188:return It=o.instantWin,Ct=It.levels,kt=It.unlocked,Nt=o.stake,t.next=191,this.features.fairyPopupTiles.finish(null,{stopTickChildren:!1,waitLabel:"show"});case 191:return this._onPopupFadeShow("fairyPopupTiles"),this.features.fade.show(),t.next=195,this.features.fairyPopupTiles.play("win");case 195:return s.a.set(s.a.TYPES.IS_WHOLE_GAME_STAGE_USED,!0),t.next=198,this.features.fairyActivator.show({loopAtEnd:!0});case 198:return this.features.fade.hide(),this.features.fairySplash.show(kt),t.next=202,this.features.fairyPicker.show(kt);case 202:return Mt=d.a.fairySplash.delayBeforeHide,jt=Mt.normal,Dt=Mt.mega,Lt=kt>1?Dt:jt,t.next=206,Object(h.d)(Lt);case 206:return this.features.fairySplash.hide(),t.next=209,this.features.fairyActivator.finish();case 209:return this.features.fairyActivator.play("showPicker",{loopAtEnd:!0}),t.next=212,this.features.fairyPicker.activate(Ct,kt,Nt);case 212:return t.next=214,this.features.fairyActivator.play("winLoop",{loopAtEnd:!0});case 214:return this.features.bonusFade.show(),t.abrupt("return",this.changeState(l.a.INSTANT_WIN));case 216:if(this._hasInstantWin()){t.next=218;break}return t.abrupt("return",this.changeState(l.a.RESPIN_START));case 218:if(Bt=this._hasActivator(d.a.activators.MAX_WIN),Ft=o.stake,Ut=o.instantWin,Ht=(Gt=void 0===Ut?{}:Ut).amount,Vt=void 0===Ht?0:Ht,Xt=Gt.type,Wt=void 0===Xt?"":Xt,Yt=d.a.bonuses,zt=Yt.FAIRY,qt=Yt.BEER,Kt=Yt.BEER_MEGA,Zt=p.a.ExtraWin.types,$t=Zt.BIG_WIN,Jt=Zt.NORMAL_WIN,Qt=this.features.extraWin.getTypeBasedOnMultiplier(Vt/Ft),[Jt,$t].includes(Qt)&&this.features.bonusFade.show(),!this._hasExtraInstantWin()&&!Bt){t.next=229;break}return t.next=227,this._playExtraWin({isInstantWin:!0,hasBangup:!0});case 227:t.next=238;break;case 229:return s.a.set(s.a.TYPES.RESULT_READY,!0),t.next=232,this.features.centerWinBar.activate({value:Vt,stake:Ft},{from:Vt,duration:0});case 232:return s.a.set(s.a.TYPES.RESULT_READY,!1),t.next=235,Object(h.d)(d.a.centerWinBar.delayBeforeHide);case 235:return this.features.bonusFade.hide(),t.next=238,this.features.centerWinBar.deactivate();case 238:if(this.features.winBar.activate(Vt,Ft,!0),s.a.get(s.a.TYPES.IS_WHOLE_GAME_STAGE_USED)&&s.a.set(s.a.TYPES.IS_WHOLE_GAME_STAGE_USED,!1),Wt!==zt){t.next=244;break}return this.features.fairyActivator.hide(),t.next=244,Object(h.d)(d.a.fairyPicker.hideDelay,(function(){return Xe.features.rainbowEffect.show({removeAtEnd:!0}),Xe.features.fairyPopupTiles.moveToContainer("below"),Xe.features.fairyPicker.hide()}));case 244:if(te=Wt===Kt,Wt!==qt&&!te){t.next=253;break}return this.features.beerBonusPlate.hide({isMega:te}),this.features.beerBonusTaps.hide(),this.features.beerPopupTiles.moveToContainer("below"),t.next=251,Promise.all([this.features.beerBonusGlasses.deactivate(null,{removeAtEnd:!1}),this.features.beerBonusGlassesFrames.deactivate(null,{removeAtEnd:!1,isMega:te})]);case 251:this.features.beerBonusGlasses.remove(),this.features.beerBonusGlassesFrames.remove();case 253:if(!Bt){t.next=257;break}return t.abrupt("return",this.changeState(l.a.JACKPOT_WIN));case 257:return t.abrupt("return",this.changeState(l.a.RESPIN_START));case 258:if(o.respin&&!s.a.get(s.a.TYPES.IN_RESPIN)){t.next=260;break}return t.abrupt("return",this.changeState(l.a.CASCADE));case 260:return s.a.set(s.a.TYPES.IN_RESPIN,!0),t.abrupt("return",this.changeState(l.a.CASCADE));case 262:if(o.chainReactor){t.next=264;break}return t.abrupt("return",this.changeState(l.a.RESPIN_END));case 264:return ee=o.winLines,ne=o.chainReactor,re=ne.move,ie=ne.screen,oe=o.scatters,ae=void 0===oe?[]:oe,se=o.stakeMultiplier,ue=(void 0===se?{}:se).multiplier,ce=void 0===ue?1:ue,le=o.fairyScatters,he=void 0===le?[]:le,fe=o.beerScatters,pe=void 0===fe?[]:fe,t.next=267,Promise.all([this.features.winTiles.finish(null,{stopTickChildren:!1}),this.features.fatTiles.finish(null,{stopTickChildren:!1,waitLabel:"winShow"}),this.features.wildPopupTiles.finish(null,{stopTickChildren:!1,waitLabel:"winShow"})]);case 267:return this.features.cascade.screenData=ie,this.features.fade.hide(),t.next=271,this.features.waysWins.hide(ee,{onTilesHide:function(t){var e=t.positions,n=t.skipped;return Xe._onWaysWinsTilesHide(e,n)},removeAtEnd:!1});case 271:if(!s.a.get(s.a.TYPES.IN_FREE_SPINS)){t.next=280;break}return this._executePopupTiles((function(t){return t.moveToContainer("below")}),{skip:["seniorPopupTiles","wildPopupTiles"]}),this.features.seniorPopupTiles.moveToContainer("main"),t.next=276,this.features.multiplierSplash.show(ce);case 276:return t.next=278,Object(h.d)(d.a.multiplierSplash.hideDelay);case 278:this.features.multiplierSplash.hide(),this.features.multiplier.increase(ce);case 280:return t.next=282,this.features.cascade.move(re);case 282:if(s.a.get(s.a.TYPES.IN_FREE_SPINS)){t.next=287;break}return he.length&&this.features.cascadeAnticipationController.preconfig(d.a.cascadeAnticipation.fairy),de=ae.length||he.length||pe.length,t.next=287,this.features.cascadeAnticipationController.activate(de,ie);case 287:return t.abrupt("return",this.changeState(l.a.RESPIN_END));case 288:if(s.a.get(s.a.TYPES.IN_RESPIN)&&!o.respin&&!o.chainReactor){t.next=290;break}return t.abrupt("return",this.changeState(l.a.FREE_SPINS_START));case 290:return s.a.set(s.a.TYPES.IN_RESPIN,!1),t.abrupt("return",this.changeState(l.a.FREE_SPINS_START));case 292:if(o.freeSpins&&!s.a.get(s.a.TYPES.IN_FREE_SPINS)){t.next=294;break}return t.abrupt("return",this.changeState(l.a.FREE_SPINS_BONUS));case 294:if(ye=o.freeSpins,me=o.initialSpins,ve=o.scatters,_e=void 0===ve?[]:ve,ge=o.stakeMultiplier,be=(void 0===ge?{}:ge).multiplier,Ee=void 0===be?1:be,Te=d.a.freeSpinsStatus.delays,we=d.a.freeSpinsMegaThreshold,xe=me||ye.length,this.features.freeSpinsPopupTiles.isActive){t.next=300;break}return t.next=300,this.features.freeSpinsPopupTiles.play("show");case 300:return t.next=302,this.features.freeSpinsPopupTiles.finish();case 302:return this._onPopupFadeShow("freeSpinsPopupTiles"),this.features.fade.show(),t.next=306,this.features.freeSpinsPopupTiles.play("win");case 306:return t.next=308,this.features.freeSpinsPopupTiles.deactivate(null,{skipRemove:!0});case 308:return s.a.set(s.a.TYPES.IS_WHOLE_GAME_STAGE_USED,!0),t.next=311,this.features.freeSpinsStartScreen.activate({spins:xe,instant:!0});case 311:return t.next=313,this.features.freeSpinsStartScreen.showStart();case 313:return c.a.emit(c.a.events.FEATURE_START,{featureType:"freeSpins",name:"freeSpins"}),t.next=316,this.features.freeSpinsStartScreen.start();case 316:return this.features.fade.hide(),this.features.freeSpinsStartScreen.hide(),t.next=320,this.features.freeSpinsTransition.show();case 320:return this.features.freeSpinsTransition.hide(),this.features.freeSpinsPopupTiles.moveToContainer("below"),this.features.logo.hide(),this.features.headerBanners.hide(),this.features.background.change("freeSpins"),this.features.slotBg.change("freeSpins"),this.features.foreground.change("freeSpins"),this.features.foregroundOverlay.change("freeSpins"),this.features.rainbowEffect.show({removeAtEnd:!0}),t.next=331,this.features.freeSpinsStatus.activate({spins:xe});case 331:if(!(_e.length>=we)){t.next=337;break}return this._executePopupTiles((function(t){return t.moveToContainer("below")}),{skip:["seniorPopupTiles","wildPopupTiles"]}),this.features.seniorPopupTiles.moveToContainer("main"),t.next=336,this.features.multiplierSplash.show(Ee);case 336:this.features.multiplierSplash.hide();case 337:return this.features.multiplier.show(Ee),s.a.set(s.a.TYPES.IN_FREE_SPINS,!0),s.a.set(s.a.TYPES.IS_WHOLE_GAME_STAGE_USED,!1),t.next=342,Object(h.d)(Te.afterUpdate);case 342:return t.abrupt("return",this.changeState(l.a.FREE_SPINS_BONUS));case 343:if(o.additionalSpins){t.next=345;break}return t.abrupt("return",this.changeState(l.a.TOTAL_WIN));case 345:return Se=d.a.freeSpinsStatus.delays,t.next=348,this.features.freeSpinsPopupTiles.finish(null,{waitLabel:"show",stopTickChildren:!1});case 348:return c.a.emit(c.a.events.FEATURE_UPDATE,{featureType:"freeSpins",name:"freeSpins"}),this._onPopupFadeShow("freeSpinsPopupTiles"),this.features.fade.show(),t.next=353,this.features.freeSpinsPopupTiles.collect({onSingleCollect:function(){return Xe.features.freeSpinsStatus.update({spins:1})}});case 353:return t.next=355,Object(h.d)(Se.afterUpdate);case 355:return this.features.fade.hide(),t.abrupt("return",this.changeState(l.a.TOTAL_WIN));case 357:if(Oe=this._hasActivator(d.a.activators.MAX_WIN),s.a.get(s.a.TYPES.IN_FREE_SPINS)&&!u.a.hasNext||Oe){t.next=360;break}return t.abrupt("return",this.changeState(l.a.JACKPOT_WIN));case 360:if(!Oe){t.next=365;break}return t.next=363,this._playExtraWin({isInstantWin:!0,hasBangup:!0});case 363:t.next=390;break;case 365:return Pe=u.a.main.game,Re=Pe.win.total,Ae=Pe.stake,Ie=d.a.extraWin,Ce=Ie.showDelay,ke=Ie.hideDelay,Ne=Ie.totalWinDuration,Me=Ie.coinsStopDelayDivider,je=p.a.ExtraWin.types.TOTAL_WIN,Le=(De=Re<=Ae)?ke.totalWin.underOrEqualStake:this.features.extraWin.getDelay(ke,je),t.next=372,Object(h.d)(this.features.extraWin.getDelay(Ce,je));case 372:return this.features.winBar.reset(),s.a.set(s.a.TYPES.IS_WHOLE_GAME_STAGE_USED,!0),this._executePopupTiles((function(t){return t.moveToContainer("below")}),{skip:["seniorPopupTiles","wildPopupTiles"]}),this.features.seniorPopupTiles.moveToContainer("main"),this.features.fade.show(),t.next=379,this.features.extraWin.showLabel(je);case 379:return s.a.set(s.a.TYPES.RESULT_READY,!0),t.next=382,Promise.all([this.features.extraWin.showLabelSum(je),this.features.extraWin.playSum({value:Re,skipCoins:De}),this.features.extraWin.bangup({from:Re,to:Re,stake:o.stake,duration:Ne,stopCoins:!1})]);case 382:return s.a.set(s.a.TYPES.RESULT_READY,!1),De||Object(h.d)(Le/Me).then((function(){return Xe.features.extraWin.deactivateCoins()})),t.next=386,Object(h.d)(Le);case 386:return this.features.fade.hide(),t.next=389,this.features.extraWin.hide();case 389:s.a.set(s.a.TYPES.IS_WHOLE_GAME_STAGE_USED,!1);case 390:return s.a.get(s.a.TYPES.IN_FREE_SPINS)&&(s.a.set(s.a.TYPES.IN_FREE_SPINS,!1),c.a.emit(c.a.events.FEATURE_END,{featureType:"freeSpins",name:"freeSpins"}),this.features.multiplier.deactivate(),this.features.freeSpinsStatus.deactivate(),this.features.background.change("normal"),this.features.slotBg.change("normal"),this.features.foreground.change("normal"),this.features.foregroundOverlay.change("normal"),this.features.logo.show(),this.features.winBar.set(u.a.main.game.win.total,0,!0)),t.abrupt("return",this.changeState(l.a.JACKPOT_WIN));case 392:if(u.a.hasJackpotWin&&!s.a.get(s.a.TYPES.IN_FREE_SPINS)&&!s.a.get(s.a.TYPES.IN_RESPIN)){t.next=394;break}return t.abrupt("return",this.changeState(l.a.FINISH));case 394:return Be=u.a.main.game,t.next=397,this.features.jackpots.activate(Be.jackpotTiles);case 397:return t.abrupt("return",this.changeState(l.a.FINISH));case 398:if(Fe=d.a.bonuses,Ue=Fe.FAIRY,Ge=Fe.BEER,He=Fe.BEER_MEGA,this.features.statefulControl.updateData(this.features.stake.value),this.features.jackpots.reset(),s.a.get(s.a.TYPES.AUTO_PLAY)&&(o.freeSpins||this._hasBonus([Ue,Ge,He]))&&c.a.emit(c.a.events.AUTOPLAY_BONUS),!s.a.get(s.a.TYPES.IN_FREE_SPINS)&&!s.a.get(s.a.TYPES.AUTO_PLAY)||s.a.get(s.a.TYPES.IN_RESPIN)){t.next=406;break}return Ve=this.features.respinWins.total>0?d.a.autoplay.nextSpinDelay.win:d.a.autoplay.nextSpinDelay.noWin,t.next=406,Object(h.d)(Ve);case 406:return s.a.get(s.a.TYPES.IN_RESPIN)||this.features.respinWins.reset(),t.abrupt("return",this.changeState(l.a.READY));case 408:case"end":return t.stop()}}),t,this)}))),function(t,e){return E.apply(this,arguments)})},{key:"hasBonus",value:function(){var t=u.a.currentSpin.game;return(null==t?void 0:t.freeSpins)||s.a.get(s.a.TYPES.IN_FREE_SPINS)}},{key:"reset",value:function(){var t=this;ut(ct(e.prototype),"reset",this).call(this),this.features.rainingTiles.reset(),this.features.rainingTilesMega.reset(),this.features.characterActivator.reset(),this.features.chanceActivator.reset(),this.features.freeSpinsPassingEffect.reset(),this.features.beerBonusPassingEffect.reset(),this.features.fairyBonusPassingEffect.reset(),this.features.freeSpinsTileParticles.reset(),this.features.winTilesParticles.reset(),this.features.fatTilesParticles.reset(),this.features.wildTilesParticles.reset(),this.features.fairyPickerParticles.reset(),s.a.get(s.a.TYPES.IN_RESPIN)||(this._executePopupTiles((function(t){return t.moveToContainer("below")}),{skip:["seniorPopupTiles","wildPopupTiles"]}),this.features.seniorPopupTiles.remove(),this.features.wildPopupTiles.allChildren.forEach((function(e){return e.mask=t.features.reelMaster.featuresMask})),this.features.fatTiles.moveToContainer("below"),this.features.fatTiles.attach(),s.a.get(s.a.TYPES.IN_FREE_SPINS)||this.features.cascadeAnticipationController.reset())}},{key:"skip",value:(b=ot(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ut(ct(e.prototype),"skip",this).call(this,n),t.t0=this.state,t.next=t.t0===l.a.PLAY_STOP?4:t.t0===l.a.LUCKY_PIPE?7:t.t0===l.a.INSTANT_WIN?12:t.t0===l.a.BEER_BONUS?15:t.t0===l.a.WIN_LINES_SUM?17:t.t0===l.a.CASCADE?19:t.t0===l.a.FREE_SPINS_START?21:t.t0===l.a.FREE_SPINS_BONUS?23:t.t0===l.a.JACKPOT_WIN||t.t0===l.a.WIN_LINES_EW||t.t0===l.a.TOTAL_WIN?25:27;break;case 4:return s.a.get(s.a.TYPES.IN_RESPIN)&&this.features.cascade.skip(),this.features.reelMaster.stopInstant(u.a.currentSpin.game.reelsBuffer.asMutable({deep:!0})),t.abrupt("break",27);case 7:return this.features.characterActivator.skip(),this.features.rainingTiles.skip(),this.features.rainingTilesMega.skip(),this.features.chanceActivator.skip(),t.abrupt("break",27);case 12:return this.features.centerWinBar.skip(),this.features.extraWin.skip(),t.abrupt("break",27);case 15:return this.features.beerBonusGlasses.skipTweens(),t.abrupt("break",27);case 17:return this.features.winBar.skip(),t.abrupt("break",27);case 19:return this.features.cascade.skip(),t.abrupt("break",27);case 21:return this.features.freeSpinsStartScreen.skip(),t.abrupt("break",27);case 23:return this.features.freeSpinsStatus.skip(),t.abrupt("break",27);case 25:return this.features.extraWin.skip(),t.abrupt("break",27);case 27:case"end":return t.stop()}}),t,this)}))),function(t){return b.apply(this,arguments)})},{key:"_shouldShowAds",value:function(){return this.features.headerBanners.getChance()&&!u.a.hasWin&&!u.a.hasJackpotWin&&!this.hasBonus()&&!this._hasInstantWin()&&!s.a.get(s.a.TYPES.IN_RESPIN)}},{key:"_onShowState",value:function(t){var e=t.ways||T.a.settings.game.ways,n=e[e.length-1];this.features.megaWaysCounter.update(n,{playAnim:!1})}},{key:"_onStakeChange",value:function(t){this.features.winBar.reset(),this.features.jackpotPopupTiles.remove()}},{key:"_onAverageFpsChange",value:function(t){}//****!IMPORTANT!****
},{key:"_attachGameListeners",value:function(){var t=this;this.features.cascade.on(p.a.MegaWaysCascade.events.SINGLE_MOVE_END,this._onCascadeSingleEnd,this),this.features.cascade.on(p.a.MegaWaysCascade.events.SINGLE_MOVE_UPDATE,this._onCascadeSingleUpdate,this),this.features.cascade.on(p.a.MegaWaysCascade.events.SINGLE_MOVE_ENDING,this._onCascadeSingleEnding,this),this.features.anticipation.on(p.a.Anticipation.events.START,(function(e){var n=e.reelIndex,r=t.features.anticipation.activeType,i="".concat(r,"PopupTiles");t._executePopupTiles((function(t){return t.name!==i&&t.moveToContainer("below")}),{skip:["seniorPopupTiles","wildPopupTiles"]}),t.features.seniorPopupTiles.moveToContainer("main"),t.features.anticipationFade.show({reelIndex:n}),c.a.emit(c.a.events.FEATURE_START,{featureType:"anticipation",name:r})})),this.features.anticipation.on(p.a.Anticipation.events.FINISH,(function(){t.features.anticipationFade.hide(),c.a.emit(c.a.events.FEATURE_END,{featureType:"anticipation",name:t.features.anticipation.activeType})})),this.features.fairyActivator.on(p.a.FairyActivator.events.SHOW_START,(function(){t._setSceneVisibility({alpha:0,features:["slotBg","fairyPopupTiles","fairyPopupTilesBelowContainer","seniorPopupTiles","megaWaysCounter"]})})),this.features.fairyPicker.on(p.a.FairyPicker.events.HIDE_START,(function(){t._setSceneVisibility({alpha:1,features:["slotBg","fairyPopupTiles","fairyPopupTilesBelowContainer","seniorPopupTiles","megaWaysCounter"]})})),this.features.fairyPicker.on(p.a.FairyPicker.events.PICKER_CLICKED,(function(e){var n=e.target;t.features.fairyArrows.hide({row:n.data.row})})),this.features.fairyPicker.on(p.a.FairyPicker.events.PICK_START,(function(e){var n=e.target,r=d.a.fairyPickerParticles.particles.types[n.data.row]||{};t.features.fairyPickerParticles.burst(n,nt({customGuide:n.hitRadius.getLocalBounds()},r))})),this.features.fairyPicker.on(p.a.FairyPicker.events.SHOW_NEXT_ROW,(function(e){var n=e.target;e.next&&t.features.fairyArrows.show({row:n.data.row+1})})),this.features.fairyPicker.on(p.a.FairyPicker.events.ACTIVATE_START,(function(){t.features.fairyArrows.show({row:1})})),this.features.headerBanners.on(p.a.HeaderBanners.events.SHOW_START,(function(){t.features.megaWaysCounter.lowerCounterPos()})),this.features.headerBanners.on(p.a.HeaderBanners.events.HIDE_START,(function(){t.features.megaWaysCounter.resetCounterPos()})),this.features.fatTiles.on(p.a.FatTiles.events.TILE_ADD,(function(e){var n=e.reel,r=u.a.currentSpin.game.ways;t.features.megaWaysCounter.update(r[n])})),this.features.freeSpinsPopupTiles.on(p.a.FreeSpinsPopupTiles.events.PARTICLES_BURST_START,(function(e){var n=e.cover;t.features.freeSpinsTileParticles.burst(n)})),this.features.extraWin.on(p.a.ExtraWin.events.LABEL_CHANGE,(function(e){e.oldLabel===p.a.ExtraWin.types.BIG_WIN&&t._hasExtraInstantWin()&&t.features.bonusFade.hide()})),this.features.winTiles.on(p.a.WinTiles.events.PARTICLES_BURST_START,(function(e){var n=e.cover;t.features.winTilesParticles.burst(n)})),this.features.characterActivator.on(p.a.CharacterActivator.events.PLAY_ANIM_START,(function(e){var n=e.label,r=p.a.CharacterActivator.animLabels,i=r.SHOW,o=r.HIDE,a=t.features.characterActivator;n===i&&t.features.gameFrameMask.apply(a),n===o&&t.features.gameFrameMask.unmask(a)})),this.features.chanceActivator.on(p.a.ChanceActivator.events.PLAY_ANIM_START,(function(e){e.label===p.a.ChanceActivator.animLabels.SHOW&&t.features.gameFrameMask.apply(t.features.chanceActivator)})),this.features.chanceActivator.on(p.a.ChanceActivator.events.PLAY_ANIM_END,(function(e){e.label===p.a.ChanceActivator.animLabels.SHOW&&t.features.gameFrameMask.unmask(t.features.chanceActivator)})),this.features.fatTiles.on(p.a.FatTiles.events.PARTICLES_BURST_START,(function(e){var n=e.cover;t.features.fatTilesParticles.burst(n)})),this.features.wildPopupTiles.on(p.a.BurstPopupTiles.events.PARTICLES_BURST_START,(function(e){var n=e.cover;t.features.wildTilesParticles.burst(n)})),this.features.multiplierSplash.on(p.a.Cover.events.SHOW_START,(function(){return t.features.fadeMultiplier.show()})),this.features.multiplierSplash.on(p.a.Cover.events.HIDE_START,(function(){return t.features.fadeMultiplier.hide()})),this.features.freeSpinsPopupTiles.on(p.a.FreeSpinsPopupTiles.events.TILE_ADD,(function(e){var n=e.reel,r=e.index,i=e.tileId,o=e.total,a=(u.a.currentSpin.game||{}).pipeScatters;(void 0===a?[]:a).some((function(t){return t.reel===n&&t.index===r&&t.tileId===i}))||(t._activateHitEffect("freeSpins",{symbolsCount:o}),t._startCameraSequence(d.a.cameraEffects.freeSpinsPopupTiles.show[o]))})),this.features.freeSpinsPopupTiles.on(p.a.FreeSpinsPopupTiles.events.PLAY_ANIM_START,(function(e){"win"===e.label&&t._startCameraSequence(d.a.cameraEffects.freeSpinsPopupTiles.win)})),this.features.beerPopupTiles.on(p.a.MegaWaysPopupTiles.events.TILE_ADD,(function(e){var n=e.reel,r=e.index,i=e.tileId,o=e.total,a=(u.a.currentSpin.game||{}).pipeScatters;(void 0===a?[]:a).some((function(t){return t.reel===n&&t.index===r&&t.tileId===i}))||(t._activateHitEffect("beerBonus",{symbolsCount:o}),t._startCameraSequence(d.a.cameraEffects.beerPopupTiles.show[o]))})),this.features.beerPopupTiles.on(p.a.MegaWaysPopupTiles.events.PLAY_ANIM_START,(function(e){"win"===e.label&&t._startCameraSequence(d.a.cameraEffects.beerPopupTiles.win)})),this.features.beerBonusSplash.on(p.a.BeerBonusSplash.events.HIDE_START,(function(){var e=t._hasBonus(d.a.bonuses.BEER_MEGA),n=d.a.rumbleEffects.beerBonusSplash,r=n.normal,i=n.mega,o=e?i:r;t.features.rumble.start(o)})),this.features.fairyPopupTiles.on(p.a.MegaWaysPopupTiles.events.TILE_ADD,(function(e){var n=e.reel,r=e.index,i=e.tileId,o=e.total,a=(u.a.currentSpin.game||{}).pipeScatters;(void 0===a?[]:a).some((function(t){return t.reel===n&&t.index===r&&t.tileId===i}))||(t._activateHitEffect("fairyBonus",{symbolsCount:o}),t._startCameraSequence(d.a.cameraEffects.fairyPopupTiles.show[o]))})),this.features.fairyPopupTiles.on(p.a.MegaWaysPopupTiles.events.PLAY_ANIM_START,(function(e){"win"===e.label&&t._startCameraSequence(d.a.cameraEffects.fairyPopupTiles.win)})),this.features.jackpotPopupTiles.on(p.a.JackpotPopupTiles.events.TILE_ADD,(function(e){var n=e.reel,r=e.total,i=e.animLabel;n>0&&!t.features.jackpotPopupTiles.allChildren.find((function(t){return 0===t.reel}))||n===d.a.reels.count-1&&r<d.a.jackpotPopupTiles.effectThreshold||t._startCameraSequence(d.a.cameraEffects.jackpotPopupTiles[i][r])})),this.features.jackpotPopupTiles.on(p.a.JackpotPopupTiles.events.PLAY_ANIM_START,(function(e){"win"===e.label&&t._startCameraSequence(d.a.cameraEffects.jackpotPopupTiles.win)})),this.features.rainingTiles.on(p.a.RainingTiles.events.SINGLE_TILE_LAND,(function(e){var n=e.tileId,r=d.a.cameraEffects.rainingTiles,i=r.normal,o=r.bonus;t._startCameraSequence(n>d.a.wildPopupTiles.tileId?o:i)})),this.features.rainingTiles.on(p.a.RainingTiles.events.ACTIVATE_END,(function(e){var n=e.tileId;if(d.a.rainingTilesEffect.specialIds.includes(n)){var r=d.a.freeSpinsPopupTiles,i=d.a.fairyPopupTiles,o=d.a.beerPopupTiles;switch(n){case r.tileId:return void t._activateHitEffect("freeSpins",{playAll:!0});case i.tileId:return void t._activateHitEffect("fairyBonus",{playAll:!0});case o.tileId:return void t._activateHitEffect("beerBonus",{playAll:!0})}}})),this.features.rainingTilesMega.on(p.a.RainingTilesMega.events.SINGLE_TILE_LAND,(function(){t._startCameraSequence(d.a.cameraEffects.rainingTiles.mega)})),this.features.extraWin.on(p.a.ExtraWin.events.LABEL_SHOW_START,(function(e){var n=e.label;t._startCameraSequence(d.a.cameraEffects.extraWin[n])})),this.features.freeSpinsStartScreen.on(p.a.FreeSpinsStartScreen.events.SHOW_START,(function(){t._startCameraSequence(d.a.cameraEffects.freeSpinsStartScreen)}))}},{key:"_startCameraSequence",value:(g=ot(regeneratorRuntime.mark((function t(e){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0,r=Object.keys(e);case 1:if(!(n<r.length)){t.next=8;break}return i=r[n],t.next=5,this.features.camera.change(e[i]);case 5:n++,t.next=1;break;case 8:case"end":return t.stop()}}),t,this)}))),function(t){return g.apply(this,arguments)})},{key:"_onCascadeSingleEnd",value:function(t){this._executePopupTiles((function(e){return e.onCascadeSingleEnd(t)}),{skip:["jackpotPopupTiles"]})}},{key:"_onCascadeSingleUpdate",value:function(t){this._executePopupTiles((function(e){return e.onCascadeSingleUpdate(t)}),{skip:["jackpotPopupTiles","wildPopupTiles"]})}},{key:"_onCascadeSingleEnding",value:function(t){var e=t.type,n=t.position.reel;"drop"===e&&(this._executePopupTiles((function(e,n){return e.onCascadeSingleEnding(t,n)}),{skip:["jackpotPopupTiles"]}),this.features.cascadeAnticipationController.activeReels.includes(n)&&this.features.cascadeAnticipationController.deactivate({reel:n}))}},{key:"_onWaysWinsTilesShown",value:function(t,e){if(this.features.seniorPopupTiles.remove(t),e.length)return this.features.fatTiles.moveToContainer("win"),this.features.wildPopupTiles.moveToContainer("win",e),Promise.all([this.features.fatTiles.play("winShow"),this.features.wildPopupTiles.play("winShow",e)])}},{key:"_onWaysWinsTilesHide",value:function(t,e){var n=this;e.length&&(this.features.wildPopupTiles.play("winHide",e).then((function(){return n.features.wildPopupTiles.remove(e,{silent:!0})})),this.features.fatTiles.play("winHide").then((function(){return n.features.fatTiles.remove(e)})))}},{key:"_hasInstantWin",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(null===(t=u.a.currentSpin)||void 0===t?void 0:t.game)||{};return!(null==e||!e.instantWin)}},{key:"_hasExtraInstantWin",value:function(){var t,e=((null===(t=u.a.currentSpin)||void 0===t?void 0:t.game)||{}).instantWin,n=(void 0===e?{}:e).amount,r=void 0===n?0:n;return r>0&&this._hasExtraWin(r)}},{key:"_hasExtraWin",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.features.respinWins.total,n=(null===(t=u.a.currentSpin)||void 0===t?void 0:t.game)||{},r=n.stake,i=void 0===r?this.features.stake.value:r,o=this.features.extraWin.thresholds,a=Math.min.apply(Math,J(Object.values(o))),s=e/i;return s>=a}},{key:"_playExtraWin",value:(_=ot(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,c,l,f,y,m,v,_,g,b,E,T,w,x,S,O,P,R,A,I=this,C=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=C.length>0&&void 0!==C[0]?C[0]:{},r=n.isInstantWin,i=void 0!==r&&r,o=n.hasBangup,a=void 0===o||o,c=(null===(e=u.a.currentSpin)||void 0===e?void 0:e.game)||{},l=c.stake,f=void 0===l?this.features.stake.value:l,y=c.instantWin,m=(void 0===y?{}:y).amount,v=void 0===m?0:m,_=d.a.extraWin,g=_.showDelay,b=_.hideDelay,E=_.totalWinDuration,T=_.coinsStopDelayDivider,w=_.bangupSpeed,x=_.maxWinBangupSpeed,S=i?v:this.features.respinWins.total,O=this._hasActivator(d.a.activators.MAX_WIN),P=a?{}:{value:S},R=a?O?p.a.ExtraWin.types.MAX_WIN:p.a.ExtraWin.types.BIG_WIN:this.features.extraWin.getTypeBasedOnMultiplier(S/f),t.t0=!i||O,!t.t0){t.next=11;break}return t.next=11,Object(h.d)(this.features.extraWin.getDelay(g,R));case 11:return this.features.jackpotPopupTiles.remove(),s.a.set(s.a.TYPES.IS_WHOLE_GAME_STAGE_USED,!0),this._executePopupTiles((function(t){return t.moveToContainer("below")}),{skip:["seniorPopupTiles","wildPopupTiles"]}),this.features.seniorPopupTiles.moveToContainer("main"),this.features.fade.show(),t.next=18,this.features.extraWin.showLabel(R);case 18:return s.a.set(s.a.TYPES.RESULT_READY,!0),t.next=21,Promise.all([this.features.extraWin.showLabelSum(R),this.features.extraWin.playSum(P),this.features.extraWin.bangup({from:a?0:S,to:S,stake:f,duration:a?null:E,dynamicLabels:a&&!O,stopCoins:a,speed:O?x:w})]);case 21:return s.a.set(s.a.TYPES.RESULT_READY,!1),a||Object(h.d)(this.features.extraWin.getDelay(b)/T).then((function(){return I.features.extraWin.deactivateCoins()})),t.next=25,Object(h.d)(this.features.extraWin.getDelay(b));case 25:if(O&&(this.features.waysWins.deactivate(),this.features.fatTiles.play("init"),this.features.wildPopupTiles.play("init")),A=this.features.extraWin.hide(),this.features.fade.hide(),this.features.bonusFade.hide(),t.t1=!i||O,!t.t1){t.next=33;break}return t.next=33,A;case 33:s.a.set(s.a.TYPES.IS_WHOLE_GAME_STAGE_USED,!1);case 34:case"end":return t.stop()}}),t,this)}))),function(){return _.apply(this,arguments)})},{key:"_hasActivator",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===(e=u.a.currentSpin)||void 0===e?void 0:e.game;return!!n&&[].concat(t).some((function(t){var e,r;return null===(e=n.activator)||void 0===e||null===(r=e.features)||void 0===r?void 0:r.includes(t)}))}},{key:"_hasBonus",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===(e=u.a.currentSpin)||void 0===e?void 0:e.game;return!!n&&[].concat(t).some((function(t){var e;return t===(null==n||null===(e=n.instantWin)||void 0===e?void 0:e.type)}))}},{key:"_setSceneVisibility",value:function(t){var e=this,n=t.alpha,r=void 0===n?1:n,i=t.reels,o=void 0===i?Object(h.k)(d.a.reels.count):i,a=t.features,s=void 0===a?[]:a,u=d.a.sceneVisibility,c=u.sceneShowTween,l=u.sceneHideTween,f=r?c:l;o.forEach((function(t){var n=e.features.reelMaster.reels[t];(null==n?void 0:n.alpha)!==r&&K.b.to(n,nt({alpha:r},f))})),s.forEach((function(t){var n=e.features[t];(null==n?void 0:n.alpha)!==r&&K.b.to(n,nt({alpha:r},f))}))}},{key:"_executePopupTiles",value:(v=ot(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s=this,u=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},r=n.skip,i=void 0===r?[]:r,o=n.features,a=void 0===o?["wildPopupTiles","beerPopupTiles","fairyPopupTiles","freeSpinsPopupTiles","seniorPopupTiles","jackpotPopupTiles"]:o,t.abrupt("return",Promise.all(a.map((function(t){return!i.includes(t)&&e(s.features[t],n[t]||{})}))));case 3:case"end":return t.stop()}}),t)}))),function(t){return v.apply(this,arguments)})},{key:"_getReelsCurrentSize",value:function(t){return t.reduce((function(t,e){var n=$(e,2),r=(n[0],n[1]);return t.push(r.filter((function(t){return t})).length),t}),[])}},{key:"_getCurrentPopupFeature",value:function(t){if(!t){var e,n,r=(null===(e=u.a.currentSpin)||void 0===e?void 0:e.game)||{},i=r.pipeRandomTiles,o=void 0===i?[]:i,a=r.pipeScatters,s=void 0===a?[]:a;t=(null===(n=[].concat(J(o),J(s))[0])||void 0===n?void 0:n.tileId)||0}var c=this.features;return[c.wildPopupTiles,c.beerPopupTiles,c.fairyPopupTiles,c.freeSpinsPopupTiles,c.seniorPopupTiles].find((function(e){return e.tileIds.includes(t)}))}},{key:"_onRainingTilesLand",value:(m=ot(regeneratorRuntime.mark((function t(e,n){var r,i,o,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.position,i=e.coords,o=["seniorPopupTiles","wildPopupTiles"].includes(n.name),t.next=4,this.features.rainingTilesEffect.activate(r,{coords:i});case 4:return this.features.rainingTilesEffect.deactivate(r,{removeAtEnd:!1}).then((function(){return a.features.rainingTilesEffect.remove(r,{silent:!0})})),t.next=7,n.activate(r,{animLabel:"spawn",container:o?"top":"",attachToReels:!1,skipTileReplace:!0,isReelsSpinning:!0,isStatic:!0,skipLoop:!0});case 7:this._scatterShow(n,r);case 8:case"end":return t.stop()}}),t,this)}))),function(t,e){return m.apply(this,arguments)})},{key:"_onRainingTilesMegaLand",value:(y=ot(regeneratorRuntime.mark((function t(e){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.position,t.next=3,this.features.rainingTilesEffectMega.activate(n);case 3:return this.features.rainingTilesEffectMega.deactivate(n,{removeAtEnd:!1}).then((function(){return r.features.rainingTilesEffectMega.remove(n,{silent:!0})})),t.abrupt("return",this.features.fatTiles.activate(n,{animLabel:"spawn",attachToReels:!1,force:!0}));case 5:case"end":return t.stop()}}),t,this)}))),function(t){return y.apply(this,arguments)})},{key:"_onPopupFadeShow",value:function(t){this._executePopupTiles((function(t){return t.moveToContainer("below")}),{skip:[t,"seniorPopupTiles","wildPopupTiles"]}),this.features.seniorPopupTiles.moveToContainer("main"),this.features[t].moveToContainer("main")}},{key:"_parseBeerBonusData",value:function(t){var e=t.isMega,n=t.choices,r=t.selectedMultiplier,i=t.choiceId,o=[];if(Object(h.n)(n,!0),e)o=n.map((function(t,e){return{multiplier:t.multiplier,amount:t.amount,reel:e+1,index:0,selected:!0}}));else{var a=-1;n.forEach((function(t,e){t.multiplier===r&&(a=e)}));var s=n.map((function(t){return t})),u=s.splice(a,1)[0];o=n.map((function(t,e){var n=e+1;return n===i?nt(nt({},u),{},{reel:n,index:0,selected:!0}):nt(nt({},s.shift()),{},{reel:n,index:0,selected:!1})}))}return o}},{key:"_getTilesData",value:function(t,e){var n=t.reelsBuffer;return(void 0===n?[]:n).flatMap((function(t,n){return $(t,2)[1].reduce((function(t,r,i){return e===r&&t.push({reel:n,index:i,tileId:e}),t}),[])}))}},{key:"_activateHitEffect",value:function(t,e){var n=this.features["".concat(t,"HitEffect")],r=this.features["".concat(t,"BgHitEffect")];return Promise.all([(null==n?void 0:n.activate(e))||Promise.resolve(),(null==r?void 0:r.activate(e))||Promise.resolve()])}},{key:"_scatterShow",value:(f=ot(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d.a.rainingTilesEffect.specialIds.includes(n.tileId)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.play("show",n);case 5:e.play("loop",n,{repeat:-1});case 6:case"end":return t.stop()}}),t)}))),function(t,e){return f.apply(this,arguments)})},{key:"_toggleUpperBufferVisibility",value:function(t){this.features.reelMaster.reels.forEach((function(e){return e.tiles[-1].visible=t}))}}])&&at(n.prototype,o),a&&at(n,a),e}(k);function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var pt=function(){function t(e){var n=e.defaultIndex,r=e.lastIndex,i=e.types;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._index="number"==typeof r?r:n,this._types=i.map((function(t){return parseFloat(t)})),this._value=this._types[this._index]}var e,n,r;return e=t,(n=[{key:"setValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e||-1!==this._types.indexOf(t)?(this._index=this._types.indexOf(t),this._value=t,{value:t,index:this._index,types:this._types}):console.error("Stake '".concat(t,"' not in allowed stakes: ").concat(this._stakes))}},{key:"getInfo",value:function(){return{types:this._types,selected:{index:this._index,value:this._value}}}},{key:"value",get:function(){return this._value}}])&&ft(e.prototype,n),r&&ft(e,r),t}(),dt=n("./src/core/loader/AssetCache.js");n("./src/core/config/index.js");function yt(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var vt=new(function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.instance||(t.instance=this,this._renderer=null,this._camera=null),t.instance}var e,n,r,i,o;return e=t,(n=[{key:"init",value:function(t,e){this._renderer=t,this._camera=e}},{key:"changeBaseSize",value:(i=regeneratorRuntime.mark((function t(e,n,r){var i,o,a,s,u,l,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.width,o=e.height,a=n.scale,s=n.offsetX,u=n.offsetY,l=r.ease,h=r.duration,c.a.emit(c.a.events.CHANGE_BASE_SIZE),this._camera.origin={width:i,height:o},this._camera.change({scale:a,offsetX:s,offsetY:u,ease:l,duration:h}),t.next=8,this._renderer.changeBaseSize({width:i,height:o,ease:l,duration:h});case 8:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){yt(o,n,r,a,s,"next",t)}function s(t){yt(o,n,r,a,s,"throw",t)}a(void 0)}))},function(t,e,n){return o.apply(this,arguments)})}])&&mt(e.prototype,n),r&&mt(e,r),t}());function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function bt(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){gt(o,r,i,a,s,"next",t)}function s(t){gt(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tt(t,e,n){return e=wt(e),function(t,e){if(e&&("object"===_t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],wt(t).constructor):e.apply(t,n))}function wt(t){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xt(t,e){return(xt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var St=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Tt(this,e)).name="game",t.scenario=new ht,t.preSpinHandler=null,t._started=!1,t}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xt(t,e)}(e,t),n=e,(r=[{key:"init",value:(a=bt(regeneratorRuntime.mark((function t(e,n,r){var i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new pt(n.user.stakes),o=(new dt.a.Game.Game).features,this._overrideConfig(n),this.addChild(o),t.next=6,this.scenario.init(n,o,r);case 6:vt.init(r,this.scenario.features.camera),this.scenario.addFeatures({stake:i,client:e});case 8:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return a.apply(this,arguments)})},{key:"start",value:function(t){this._started||(this.scenario.ready(t),this._started=!0)}},{key:"showPaytable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(s.a.get(s.a.TYPES.PAYTABLE)||s.a.get(s.a.TYPES.STATE)!==l.a.READY&&s.a.get(s.a.TYPES.STATE)!==l.a.INIT||s.a.get(s.a.TYPES.IN_FREE_SPINS)||s.a.get(s.a.TYPES.AUTO_PLAY))return console.warn("Nope, try again later");this.scenario.features.paytable.setStake(this.scenario.features.stake.value),this.scenario.features.paytable.show(t)}},{key:"hidePaytable",value:function(t){this.scenario.features.paytable.isLoading||this.scenario.features.paytable.hide(t)}},{key:"setPaytableIndex",value:function(t){return this.scenario.features.paytable.slideTo(t)}},{key:"attachPreSpinHandler",value:function(t){"function"==typeof t?this.preSpinHandler=t:console.error("attachPreSpinHandler: supplied handler is not a function")}},{key:"spinStart",value:(o=bt(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._preSpin();case 2:return t.next=4,this.scenario.spinStart(e);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"ready",value:function(t){if(t)return this.start(t);d.a.paytableOnLoad?this.showPaytable(!0):s.a.set(s.a.TYPES.START_SCREEN,!0)}},{key:"setStake",value:function(t,e,n){return this.scenario.setStake(t,e,n)}},{key:"getStakes",value:function(){return this.scenario.features.stake.getInfo()}},{key:"paytableToggle",value:function(t){t?this.hidePaytable():this.showPaytable()}},{key:"skip",value:function(t){this.scenario.skip(t)}},{key:"autoPlayStart",value:function(){s.a.set(s.a.TYPES.AUTO_PLAY,!0)}},{key:"autoPlayStop",value:function(){s.a.set(s.a.TYPES.AUTO_PLAY,!1)}},{key:"resumeJackpot",value:function(){var t=this.scenario.features.jackpots;t&&t.resume()}},{key:"jackpotWheelHide",value:function(){var t=this.scenario.features.jackpots;t&&t.wheelHide()}},{key:"jackpotWheelHideAll",value:function(){var t=this.scenario.features.jackpots;t&&t.wheelHideAll()}},{key:"jackpotWheelStart",value:function(){var t=this.scenario.features.jackpots;t&&t.wheelStart()}},{key:"enable",value:function(){s.a.set(s.a.TYPES.GAME_ENABLED,!0)}},{key:"disable",value:function(){s.a.set(s.a.TYPES.GAME_ENABLED,!1)}},{key:"_preSpin",value:function(){var t=this;return this.preSpinHandler?new Promise((function(e,n){try{t.preSpinHandler(e)}catch(t){n(t)}})):Promise.resolve()}},{key:"_overrideConfig",value:function(t){}}])&&Et(n.prototype,r),i&&Et(n,i),e}(r.Container)},"./src/core/Platform.js":function(t,e,n){"use strict";var r=n("./node_modules/eventemitter3/index.js"),i=n.n(r),o=n("./node_modules/browser-detect/dist/browser-detect.es5.js"),a=n("./src/config.js");function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e=p(e),function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],p(t).constructor):e.apply(t,n))}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=f(this,e))._browser=Object(o.a)(),t._orientation=t._getCurrentOrientation(),t._resolution=t._getCurrentResolution(),t._performance=void 0,window.addEventListener(t.events.RESIZE,(function(){t._orientation=t._getCurrentOrientation()})),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(e,t),n=e,(r=[{key:"events",get:function(){return{RESIZE:"resize",ORIENTATION_CHANGE:"orientation_change",RESOLUTION_CHANGE:"resolution_change",PERFORMANCE_CHANGE:"performance_change"}}},{key:"resolution",get:function(){var t=a.a.forceResolution;return t||this._resolution}},{key:"resolutionScale",get:function(){return a.a.scale[this.resolution]&&a.a.scale[this.resolution].default||1}},{key:"orientation",get:function(){return this._orientation}},{key:"browser",get:function(){return this._browser}},{key:"dimension",get:function(){var t=window.screen;return t.width-t.height>0?"width":"height"}},{key:"orientationQueries",get:function(){return{LANDSCAPE:"(orientation: landscape)",PORTRAIT:"(orientation: portrait)"}}},{key:"resolutionQueries",get:function(){return this._buildResolutionQueries()}},{key:"matchMediaQueries",value:function(t){var e=window.matchMedia;return Object.keys(t).reduce((function(n,r){return e(t[r]).matches?r:n}),"")}},{key:"_getCurrentResolution",value:function(){var t=this.matchMediaQueries(this.resolutionQueries);return t!==this._resolution&&this.emit(this.events.RESOLUTION_CHANGE,{resolution:t}),t}},{key:"_getCurrentOrientation",value:function(){var t=this.matchMediaQueries(this.orientationQueries);return t!==this._orientation&&this.emit(this.events.ORIENTATION_CHANGE,{orientation:t}),t}},{key:"_buildResolutionQueries",value:function(){var t=this,e=a.a.platform.resolutionThresholds;return Object.keys(e).reduce((function(n,r){var i=e[r];return c(c({},n),{},l({},r,"screen and (".concat(i[0],"-device-").concat(t.dimension,": ").concat(i[1],")")))}),{})}}])&&h(n.prototype,r),i&&h(n,i),e}(i.a);e.a=new y},"./src/core/Renderer.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return G}));var r,i=n("./node_modules/pixi.js/dist/esm/pixi.js"),o=n("./node_modules/@pixi/canvas-renderer/dist/esm/canvas-renderer.js"),a=n("./node_modules/@pixi/canvas-mesh/dist/esm/canvas-mesh.js"),s=n("./node_modules/@pixi/core/dist/esm/core.js"),u=n("./node_modules/@pixi/math/dist/esm/math.js"),c=n("./node_modules/@pixi/graphics/dist/esm/graphics.js"),l=function(){function t(){}return t.offsetPolygon=function(e,n){var r=[],i=e.length;n=t.isPolygonClockwise(e)?n:-1*n;for(var o=0;o<i;o+=2){var a=o-2;a<0&&(a+=i);var s=(o+2)%i,u=e[o]-e[a],c=e[o+1]-e[a+1],l=Math.sqrt(u*u+c*c);u/=l,c/=l;var h=-(c*=n),f=u*=n,p=[e[a]+h,e[a+1]+f],d=[e[o]+h,e[o+1]+f],y=e[s]-e[o],m=e[s+1]-e[o+1];y/=l=Math.sqrt(y*y+m*m),m/=l;var v=-(m*=n),_=y*=n,g=[e[o]+v,e[o+1]+_],b=[e[s]+v,e[s+1]+_],E=t.findIntersection(p[0],p[1],d[0],d[1],g[0],g[1],b[0],b[1]);E&&r.push.apply(r,E)}return r},t.findIntersection=function(t,e,n,r,i,o,a,s){var u=(s-o)*(n-t)-(a-i)*(r-e),c=(a-i)*(e-o)-(s-o)*(t-i);if(0===u)return 0===c&&0===(n-t)*(e-o)-(r-e)*(t-i)?[(t+n)/2,(e+r)/2]:null;var l=c/u;return[t+l*(n-t),e+l*(r-e)]},t.isPolygonClockwise=function(t){for(var e=0,n=0;n<t.length-2;n+=2)e+=(t[n+2]-t[n])*(t[n+3]+t[n+1]);return e>0},t}(),h=function(){function t(t){this._svgMatrix=null,this._tempMatrix=new u.d,this.renderer=t}return t.prototype._calcCanvasStyle=function(t,e){var n;return t.texture&&t.texture.baseTexture!==s.db.WHITE.baseTexture?t.texture.valid?(n=o.b.getTintedPattern(t.texture,e),this.setPatternTransform(n,t.matrix||u.d.IDENTITY)):n="#808080":n="#"+("00000"+(0|e).toString(16)).substr(-6),n},t.prototype.render=function(t){var e=this.renderer,n=e.context,r=t.worldAlpha,i=t.transform.worldTransform;e.setContextTransform(i),e.setBlendMode(t.blendMode);for(var o,a,s=t.geometry.graphicsData,c=(t.tint>>16&255)/255,l=(t.tint>>8&255)/255,h=(255&t.tint)/255,f=0;f<s.length;f++){var p=s[f],d=p.shape,y=p.fillStyle,m=p.lineStyle,v=0|p.fillStyle.color,_=0|p.lineStyle.color;if(p.matrix&&e.setContextTransform(i.copyTo(this._tempMatrix).append(p.matrix)),y.visible){var g=((v>>16&255)/255*c*255<<16)+((v>>8&255)/255*l*255<<8)+(255&v)/255*h*255;o=this._calcCanvasStyle(y,g)}if(m.visible){var b=((_>>16&255)/255*c*255<<16)+((_>>8&255)/255*l*255<<8)+(255&_)/255*h*255;a=this._calcCanvasStyle(m,b)}if(n.lineWidth=m.width,n.lineCap=m.cap,n.lineJoin=m.join,n.miterLimit=m.miterLimit,p.type===u.l.POLY){n.beginPath();var E=(I=d).points,T=p.holes,w=void 0,x=void 0,S=void 0,O=void 0,P=void 0;n.moveTo(E[0],E[1]);for(var R=2;R<E.length;R+=2)n.lineTo(E[R],E[R+1]);if(I.closeStroke&&n.closePath(),T.length>0){P=[],w=0,S=E[0],O=E[1];for(R=2;R+2<E.length;R+=2)w+=(E[R]-S)*(E[R+3]-O)-(E[R+2]-S)*(E[R+1]-O);for(var A=0;A<T.length;A++)if(E=T[A].shape.points){x=0,S=E[0],O=E[1];for(R=2;R+2<E.length;R+=2)x+=(E[R]-S)*(E[R+3]-O)-(E[R+2]-S)*(E[R+1]-O);if(x*w<0){n.moveTo(E[0],E[1]);for(R=2;R<E.length;R+=2)n.lineTo(E[R],E[R+1])}else{n.moveTo(E[E.length-2],E[E.length-1]);for(R=E.length-4;R>=0;R-=2)n.lineTo(E[R],E[R+1])}T[A].shape.closeStroke&&n.closePath(),P[A]=x*w<0}}y.visible&&(n.globalAlpha=y.alpha*r,n.fillStyle=o,n.fill()),m.visible&&this.paintPolygonStroke(I,m,a,T,P,r,n)}else if(p.type===u.l.RECT){var I=d;if(y.visible&&(n.globalAlpha=y.alpha*r,n.fillStyle=o,n.fillRect(I.x,I.y,I.width,I.height)),m.visible){var C=m.width*(.5-(1-m.alignment)),k=I.width+2*C,N=I.height+2*C;n.globalAlpha=m.alpha*r,n.strokeStyle=a,n.strokeRect(I.x-C,I.y-C,k,N)}}else if(p.type===u.l.CIRC){I=d;if(n.beginPath(),n.arc(I.x,I.y,I.radius,0,2*Math.PI),n.closePath(),y.visible&&(n.globalAlpha=y.alpha*r,n.fillStyle=o,n.fill()),m.visible){if(.5!==m.alignment){C=m.width*(.5-(1-m.alignment));n.beginPath(),n.arc(I.x,I.y,I.radius+C,0,2*Math.PI),n.closePath()}n.globalAlpha=m.alpha*r,n.strokeStyle=a,n.stroke()}}else if(p.type===u.l.ELIP){I=d;if((X=1===m.alignment)||this.paintEllipse(I,y,m,o,r,n),m.visible){if(.5!==m.alignment){C=m.width*(.5-(1-m.alignment));var M=2*(I.width+C),j=2*(I.height+C),D=I.x-M/2,L=I.y-j/2,B=M/2*.5522848,F=j/2*.5522848,U=D+M,G=L+j,H=D+M/2,V=L+j/2;n.beginPath(),n.moveTo(D,V),n.bezierCurveTo(D,V-F,H-B,L,H,L),n.bezierCurveTo(H+B,L,U,V-F,U,V),n.bezierCurveTo(U,V+F,H+B,G,H,G),n.bezierCurveTo(H-B,G,D,V+F,D,V),n.closePath()}n.globalAlpha=m.alpha*r,n.strokeStyle=a,n.stroke()}X&&this.paintEllipse(I,y,m,o,r,n)}else if(p.type===u.l.RREC){var X;I=d;if((X=1===m.alignment)||this.paintRoundedRectangle(I,y,m,o,r,n),m.visible){if(.5!==m.alignment){k=I.width,N=I.height,C=m.width*(.5-(1-m.alignment));var W=I.x-C,Y=I.y-C,z=I.width+2*C,q=I.height+2*C,K=C*(m.alignment>=1?Math.min(z/k,q/N):Math.min(k/z,N/q)),Z=I.radius+K,$=Math.min(z,q)/2;Z=Z>$?$:Z,n.beginPath(),n.moveTo(W,Y+Z),n.lineTo(W,Y+q-Z),n.quadraticCurveTo(W,Y+q,W+Z,Y+q),n.lineTo(W+z-Z,Y+q),n.quadraticCurveTo(W+z,Y+q,W+z,Y+q-Z),n.lineTo(W+z,Y+Z),n.quadraticCurveTo(W+z,Y,W+z-Z,Y),n.lineTo(W+Z,Y),n.quadraticCurveTo(W,Y,W,Y+Z),n.closePath()}n.globalAlpha=m.alpha*r,n.strokeStyle=a,n.stroke()}X&&this.paintRoundedRectangle(I,y,m,o,r,n)}}},t.prototype.paintPolygonStroke=function(t,e,n,r,i,o,a){if(.5!==e.alignment){var s=e.width*(.5-(1-e.alignment)),u=l.offsetPolygon(t.points,s),c=void 0;a.beginPath(),a.moveTo(u[0],u[1]);for(var h=2;h<u.length;h+=2)a.lineTo(u[h],u[h+1]);t.closeStroke&&a.closePath();for(var f=0;f<r.length;f++){if(c=r[f].shape.points,u=l.offsetPolygon(c,s),i[f]){a.moveTo(u[0],u[1]);for(h=2;h<u.length;h+=2)a.lineTo(u[h],u[h+1])}else{a.moveTo(u[u.length-2],u[u.length-1]);for(h=u.length-4;h>=0;h-=2)a.lineTo(u[h],u[h+1])}r[f].shape.closeStroke&&a.closePath()}}a.globalAlpha=e.alpha*o,a.strokeStyle=n,a.stroke()},t.prototype.paintEllipse=function(t,e,n,r,i,o){var a=2*t.width,s=2*t.height,u=t.x-a/2,c=t.y-s/2,l=a/2*.5522848,h=s/2*.5522848,f=u+a,p=c+s,d=u+a/2,y=c+s/2;o.beginPath(),o.moveTo(u,y),o.bezierCurveTo(u,y-h,d-l,c,d,c),o.bezierCurveTo(d+l,c,f,y-h,f,y),o.bezierCurveTo(f,y+h,d+l,p,d,p),o.bezierCurveTo(d-l,p,u,y+h,u,y),o.closePath(),0===n.alignment&&o.clip(),e.visible&&(o.globalAlpha=e.alpha*i,o.fillStyle=r,o.fill())},t.prototype.paintRoundedRectangle=function(t,e,n,r,i,o){var a=t.x,s=t.y,u=t.width,c=t.height,l=t.radius,h=Math.min(u,c)/2;l=l>h?h:l,o.beginPath(),o.moveTo(a,s+l),o.lineTo(a,s+c-l),o.quadraticCurveTo(a,s+c,a+l,s+c),o.lineTo(a+u-l,s+c),o.quadraticCurveTo(a+u,s+c,a+u,s+c-l),o.lineTo(a+u,s+l),o.quadraticCurveTo(a+u,s,a+u-l,s),o.lineTo(a+l,s),o.quadraticCurveTo(a,s,a,s+l),o.closePath(),0===n.alignment&&o.clip(),e.visible&&(o.globalAlpha=e.alpha*i,o.fillStyle=r,o.fill())},t.prototype.setPatternTransform=function(t,e){if(!1!==this._svgMatrix){if(!this._svgMatrix){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");if(n&&n.createSVGMatrix&&(this._svgMatrix=n.createSVGMatrix()),!this._svgMatrix||!t.setTransform)return void(this._svgMatrix=!1)}this._svgMatrix.a=e.a,this._svgMatrix.b=e.b,this._svgMatrix.c=e.c,this._svgMatrix.d=e.d,this._svgMatrix.e=e.tx,this._svgMatrix.f=e.ty,t.setTransform(this._svgMatrix.inverse())}},t.prototype.destroy=function(){this.renderer=null,this._svgMatrix=null,this._tempMatrix=null},t}(),f=new u.d;c.c.prototype.generateCanvasTexture=function(t,e){void 0===e&&(e=1);var n=this.getLocalBounds(),i=s.P.create({width:n.width,height:n.height,scaleMode:t,resolution:e});r||(r=new o.a),this.transform.updateLocalTransform(),this.transform.localTransform.copyTo(f),f.invert(),f.tx-=n.x,f.ty-=n.y,r.render(this,{renderTexture:i,clear:!0,transform:f});var a=s.db.from(i.baseTexture._canvasRenderTarget.canvas,{scaleMode:t});return a.baseTexture.setResolution(e),a},c.c.prototype.cachedGraphicsData=[],c.c.prototype._renderCanvas=function(t){!0!==this.isMask&&(this.finishPoly(),t.plugins.graphics.render(this))};var p=n("./node_modules/@pixi/constants/dist/esm/constants.js"),d=n("./node_modules/@pixi/sprite/dist/esm/sprite.js"),y=new u.d,m=function(){function t(t){this.renderer=t}return t.prototype.render=function(t){var e=t._texture,n=this.renderer,r=n.context;if(e.valid){var i=e._frame.width,a=e._frame.height,s=t.transform.worldTransform,c=0,l=0,h=e.baseTexture.getDrawableSource();if(!(e.orig.width<=0||e.orig.height<=0)&&e.valid&&h){n.setBlendMode(t.blendMode,!0),n.context.globalAlpha=t.worldAlpha;var f=e.baseTexture.scaleMode===p.p.LINEAR;n.smoothProperty&&n.context[n.smoothProperty]!==f&&(r[n.smoothProperty]=f),e.trim?(c=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,l=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(c=(.5-t.anchor.x)*e.orig.width,l=(.5-t.anchor.y)*e.orig.height),e.rotate&&(s.copyTo(y),s=y,u.n.matrixAppendRotationInv(s,e.rotate,c,l),c=0,l=0),c-=i/2,l-=a/2,n.setContextTransform(s,t.roundPixels,1),t.roundPixels&&(c|=0,l|=0);var d=e.baseTexture.resolution,m=n._outerBlend;m&&(r.save(),r.beginPath(),r.rect(c*n.resolution,l*n.resolution,i*n.resolution,a*n.resolution),r.clip()),16777215!==t.tint?(t._cachedTint===t.tint&&t._tintedCanvas.tintId===t._texture._updateID||(t._cachedTint=t.tint,t._tintedCanvas=o.b.getTintedCanvas(t,t.tint)),r.drawImage(t._tintedCanvas,0,0,Math.floor(i*d),Math.floor(a*d),Math.floor(c*n.resolution),Math.floor(l*n.resolution),Math.floor(i*n.resolution),Math.floor(a*n.resolution))):r.drawImage(h,e._frame.x*d,e._frame.y*d,Math.floor(i*d),Math.floor(a*d),Math.floor(c*n.resolution),Math.floor(l*n.resolution),Math.floor(i*n.resolution),Math.floor(a*n.resolution)),m&&r.restore(),n.setBlendMode(p.b.NORMAL)}}},t.prototype.destroy=function(){this.renderer=null},t}();d.a.prototype._tintedCanvas=null,d.a.prototype._renderCanvas=function(t){t.plugins.sprite.render(this)};var v=n("./node_modules/@pixi/utils/dist/esm/utils.js"),_=new u.j,g=function(){function t(t){this.renderer=t}return t.prototype.image=function(t,e,n){var r=new Image;return r.src=this.base64(t,e,n),r},t.prototype.base64=function(t,e,n){return this.canvas(t).toDataURL(e,n)},t.prototype.canvas=function(t){var e,n,r,i,o=this.renderer;t&&(i=t instanceof s.P?t:o.generateTexture(t)),i?(e=i.baseTexture._canvasRenderTarget.context,n=i.baseTexture._canvasRenderTarget.resolution,r=i.frame):(e=o.rootContext,n=o.resolution,(r=_).width=this.renderer.width,r.height=this.renderer.height);var a=Math.floor(r.width*n+1e-4),u=Math.floor(r.height*n+1e-4),c=new v.CanvasRenderTarget(a,u,1),l=e.getImageData(r.x*n,r.y*n,a,u);return c.context.putImageData(l,0,0),c.canvas},t.prototype.pixels=function(t){var e,n,r,i,o=this.renderer;t&&(i=t instanceof s.P?t:o.generateTexture(t)),i?(e=i.baseTexture._canvasRenderTarget.context,n=i.baseTexture._canvasRenderTarget.resolution,r=i.frame):(e=o.rootContext,n=o.resolution,(r=_).width=o.width,r.height=o.height);var a=r.x*n,u=r.y*n,c=r.width*n,l=r.height*n;return e.getImageData(a,u,c,l).data},t.prototype.destroy=function(){this.renderer=null},t}(),b=n("./node_modules/@pixi/prepare/dist/esm/prepare.js"),E=function(t,e){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};
/*!
 * @pixi/canvas-extract - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/canvas-extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */function T(t,e){var n=t;if(e instanceof s.h){var r=e.source,i=0===r.width?n.canvas.width:Math.min(n.canvas.width,r.width),o=0===r.height?n.canvas.height:Math.min(n.canvas.height,r.height);return n.ctx.drawImage(r,0,0,i,o,0,0,n.canvas.width,n.canvas.height),!0}return!1}var w=function(t){function e(e){var n=t.call(this,e)||this;return n.uploadHookHelper=n,n.canvas=document.createElement("canvas"),n.canvas.width=16,n.canvas.height=16,n.ctx=n.canvas.getContext("2d"),n.registerUploadHook(T),n}return function(t,e){function n(){this.constructor=t}E(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(b.a),x=n("./node_modules/@pixi/sprite-tiling/dist/esm/sprite-tiling.js"),S=new u.d,O=new u.d,P=[new u.g,new u.g,new u.g,new u.g];x.a.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.valid){var n=t.context,r=this.worldTransform,i=e.baseTexture,a=i.getDrawableSource(),s=i.resolution;if(this._textureID!==this._texture._updateID||this._cachedTint!==this.tint){this._textureID=this._texture._updateID;var u=new v.CanvasRenderTarget(e._frame.width,e._frame.height,s);16777215!==this.tint?(this._tintedCanvas=o.b.getTintedCanvas(this,this.tint),u.context.drawImage(this._tintedCanvas,0,0)):u.context.drawImage(a,-e._frame.x*s,-e._frame.y*s),this._cachedTint=this.tint,this._canvasPattern=u.context.createPattern(u.canvas,"repeat")}n.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),this.tileTransform.updateLocalTransform();var c=this.tileTransform.localTransform,l=this._width,h=this._height;S.identity(),O.copyFrom(c),this.uvRespectAnchor||O.translate(-this.anchor.x*l,-this.anchor.y*h),S.prepend(O),S.prepend(r),t.setContextTransform(S),n.fillStyle=this._canvasPattern;var f=this.anchor.x*-l,p=this.anchor.y*-h;P[0].set(f,p),P[1].set(f+l,p),P[2].set(f+l,p+h),P[3].set(f,p+h);for(var d=0;d<4;d++)O.applyInverse(P[d],P[d]);n.beginPath(),n.moveTo(P[0].x,P[0].y);for(d=1;d<4;d++)n.lineTo(P[d].x,P[d].y);n.closePath(),n.fill()}},
/*!
 * @pixi/canvas-particle-container - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/canvas-particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
n("./node_modules/@pixi/particle-container/dist/esm/particle-container.js").a.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,n=this.worldTransform,r=!0,i=0,o=0,a=0,s=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var u=0;u<this.children.length;++u){var c=this.children[u];if(c.visible&&c._texture.valid){var l=c._texture.frame;if(e.globalAlpha=this.worldAlpha*c.alpha,c.rotation%(2*Math.PI)==0)r&&(t.setContextTransform(n,!1,1),r=!1),i=c.anchor.x*(-l.width*c.scale.x)+c.position.x+.5,o=c.anchor.y*(-l.height*c.scale.y)+c.position.y+.5,a=l.width*c.scale.x,s=l.height*c.scale.y;else{r||(r=!0),c.displayObjectUpdateTransform();var h=c.worldTransform;t.setContextTransform(h,this.roundPixels,1),i=c.anchor.x*-l.width+.5,o=c.anchor.y*-l.height+.5,a=l.width,s=l.height}var f=c._texture.baseTexture.resolution;e.drawImage(c._texture.baseTexture.getDrawableSource(),l.x*f,l.y*f,l.width*f,l.height*f,i*t.resolution,o*t.resolution,a*t.resolution,s*t.resolution)}}}};var R=n("./node_modules/@pixi/display/dist/esm/display.js");
/*!
 * @pixi/canvas-display - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/canvas-display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */R.b.prototype._renderCanvas=function(t){},R.b.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,n=this.children.length;e<n;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},R.c.prototype.renderCanvas=function(t){},
/*!
 * @pixi/canvas-text - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * @pixi/canvas-text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
n("./node_modules/@pixi/text/dist/esm/text.js").b.prototype._renderCanvas=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),d.a.prototype._renderCanvas.call(this,t)},
/*!
 * pixi.js-legacy - v6.2.0
 * Compiled Mon, 01 Nov 2021 16:52:10 UTC
 *
 * pixi.js-legacy is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
o.a.registerPlugin("accessibility",i.AccessibilityManager),o.a.registerPlugin("extract",g),o.a.registerPlugin("graphics",h),o.a.registerPlugin("interaction",i.InteractionManager),o.a.registerPlugin("mesh",a.a),o.a.registerPlugin("prepare",w),o.a.registerPlugin("sprite",m);var A=n("./node_modules/eventemitter3/index.js"),I=n.n(A),C=n("./src/core/utils/Cache.js"),k=n("./node_modules/@games/gsap/gsap-core.js"),N=n("./node_modules/@games/gsap/all.js"),M=n("./src/config.js");function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function B(t,e,n){return e=F(e),function(t,e){if(e&&("object"===j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],F(t).constructor):e.apply(t,n))}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function U(t,e){return(U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}i.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var G=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=B(this,e),t.autoResize=!1,t.resolution=window.devicePixelRatio,r._config=t,r._engine=Object(i.autoDetectRenderer)(t),r._gameStage=n,r._paused=!0,r._canvas=r._engine.view,r._canvas.id="stage",r._activeStageProps={width:0,height:0,overlay:{bottom:0,top:0,left:0,right:0}},r._activeBaseSize={width:r._config.width,height:r._config.height},r._positionTween=null,r._scaleTween=null,Object(C.c)(r._engine),r._engine.plugins&&r._engine.plugins.accessibility&&r._engine.plugins.accessibility.destroy(),r}var n,r,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&U(t,e)}(e,t),n=e,(r=[{key:"baseSize",get:function(){return this._activeBaseSize}},{key:"pause",value:function(){this._paused=!0}},{key:"resume",value:function(){this._paused=!1}},{key:"changeBaseSize",value:(a=regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s,u,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.width,r=void 0===n?this._activeBaseSize.width:n,i=e.height,o=void 0===i?this._activeBaseSize.height:i,a=e.duration,s=void 0===a?0:a,u=e.ease,c=void 0===u?k.b.easeNone:u,this._baseSizeChanged({width:r,height:o})){t.next=3;break}return t.abrupt("return");case 3:if(this._finishActiveTweens(),l=this._getResizeConfig(),s=!0===M.a.static?0:s,this._positionTween=N.b.to(this._gameStage,{duration:s,x:l.gameStageX,y:l.gameStageY,ease:c}),this._scaleTween=N.b.to(this._gameStage.scale,{duration:s,x:l.scaleFactor,y:l.scaleFactor,ease:c}),M.a.static){t.next=11;break}return t.next=11,Promise.all([this._positionTween.then(),this._scaleTween.then()]);case 11:this._positionTween=null,this._scaleTween=null,this.render();case 14:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=a.apply(t,e);function o(t){D(i,n,r,o,s,"next",t)}function s(t){D(i,n,r,o,s,"throw",t)}o(void 0)}))},function(t){return s.apply(this,arguments)})},{key:"resize",value:function(t){if(this._stageChanged(t)){this._finishActiveTweens();var e=this._getResizeConfig();this._gameStage.scale.set(e.scaleFactor),this._gameStage.x=e.gameStageX,this._gameStage.y=e.gameStageY,this._engine.resize(this._activeStageProps.width,this._activeStageProps.height),this.render(),this.emit("resize")}}},{key:"render",value:function(){this._paused||this._engine.render(this._gameStage)}},{key:"view",get:function(){return this._canvas}},{key:"getVisibleArea",value:function(){var t=-(this._engine.screen.width/this._gameStage.scale.x-this._config.width)/2,e=-(this._engine.screen.height/this._gameStage.scale.y-this._config.height)/2;return{topLeftX:t,topLeftY:e,bottomRightX:this._config.width-t,bottomRightY:this._config.height-e}}},{key:"_stageChanged",value:function(t){return(this._activeStageProps.width!==t.width||this._activeStageProps.height!==t.height||this._activeStageProps.overlay.bottom!==t.overlay.bottom||this._activeStageProps.overlay.top!==t.overlay.top||this._activeStageProps.overlay.right!==t.overlay.right||this._activeStageProps.overlay.left!==t.overlay.left)&&(this._activeStageProps.width=t.width,this._activeStageProps.height=t.height,this._activeStageProps.overlay.bottom=t.overlay.bottom,this._activeStageProps.overlay.top=t.overlay.top,this._activeStageProps.overlay.right=t.overlay.right,this._activeStageProps.overlay.left=t.overlay.left,this._config.centerInScreen&&(this._activeStageProps.overlay.right=Math.max(t.overlay.right,t.overlay.left),this._activeStageProps.overlay.left=this._activeStageProps.overlay.right),!0)}},{key:"_baseSizeChanged",value:function(t){return(this._activeBaseSize.width!==t.width||this._activeBaseSize.height!==t.height)&&(this._activeBaseSize.width=t.width,this._activeBaseSize.height=t.height,!0)}},{key:"_getResizeConfig",value:function(){var t=this._activeStageProps.height-this._activeStageProps.overlay.top-this._activeStageProps.overlay.bottom,e=this._activeStageProps.width-this._activeStageProps.overlay.left-this._activeStageProps.overlay.right,n=1;n=e/t>=this._activeBaseSize.width/this._activeBaseSize.height?t/this._activeBaseSize.height:e/this._activeBaseSize.width;var r=this._activeBaseSize.width*n,i=this._activeBaseSize.height*n;return{scaleFactor:n,gameStageX:Math.round(this._activeStageProps.overlay.left+(e-r)/2),gameStageY:Math.round(this._activeStageProps.overlay.top+(t-i)/2)}}},{key:"_scaleSize",value:function(t,e){return{width:Math.round(t.width*e),height:Math.round(t.height*e),overlay:{top:Math.round(t.overlay.top*e),bottom:Math.round(t.overlay.bottom*e),left:Math.round(t.overlay.left*e),right:Math.round(t.overlay.right*e)}}}},{key:"_finishActiveTweens",value:function(){this._positionTween&&this._positionTween.progress(1),this._scaleTween&&this._scaleTween.progress(1),this._positionTween=null,this._scaleTween=null}}])&&L(n.prototype,r),o&&L(n,o),e}(I.a)},"./src/core/config/index.js":function(t,e,n){"use strict";var r=n("./node_modules/@games/gsap/EasePack.js"),i=n("./node_modules/@games/gsap/gsap-core.js"),o=n("./src/core/utils/constants.js"),a={bangupSpeed:1,totalWinDuration:5,sum:{currency:!0,hideDecimals:!1,font:"sumFont",alignType:"CENTER",ignoreRatio:!1,overscale:!0},pulseSum:{scaleBy:.9,animation:{ease:"power2.inOut",duration:1,repeat:-1,yoyo:!0},returnAnimation:{ease:"power2.in",duration:1}},dynamicLabels:!0,showDelay:{normalWin:{default:.5,custom:{}},bigWin:{default:.5,custom:{}},superWin:{default:.5,custom:{}},megaWin:{default:.5,custom:{}},epicWin:{default:.5,custom:{}},jackpotWin:{default:.5,custom:{}},totalWin:{default:1,custom:{}}},hideDelay:{normalWin:{default:1,custom:{}},bigWin:{default:2.5,custom:{}},superWin:{default:3.5,custom:{}},megaWin:{default:5,custom:{}},epicWin:{default:7,custom:{}},jackpotWin:{default:7,custom:{}},totalWin:{default:0,custom:{}}},easings:[r.a.ease.config(.1,.1,!1),r.a.ease.config(.1,.4,!1),i.c.easeIn,i.c.easeInOut,r.a.ease.config(.1,.7,!1),r.a.ease.config(.3,.1,!1),r.a.ease.config(.3,.4,!1),r.a.ease.config(.3,.7,!1),i.c.easeIn,i.c.easeInOut],coins:{emitter:{sourceType:o.c.MOVIE_CLIP,maxParticles:5e3,rate:{amount:[8,10],interval:[.1]},initializers:{velocity:{speed:8,angle:[400,320]},mass:[.05,.5],life:[10,12],radius:[800]},behaviors:{gravity:[2],scale:{from:[.3,.7],to:[1,1.5]}}},minDuration:.5,delays:{}}},s={activationEvent:"animation_ending",counter:{font:"sumFont",alignType:"CENTER",round:!0,isZeroVisible:!1,isInitiallyVisible:!1,fitInBounds:!1,letterSpacing:-5,bangup:{duration:0,easing:"none"},thresholds:[{range:[1,2500],animLabel:"count"},{range:[2501,1/0],animLabel:"countBig"}]}};function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=c(c({},a),{},{sum:c(c({},a.sum),{},{skip:{thresholds:[{value:5,skipToThreshold:!0,skipDelay:1.2},{value:10,skipToThreshold:!0,skipDelay:1.2},{value:15,skipToThreshold:!0,skipDelay:1.2},{value:30,skipToThreshold:!1,stepMultiplier:[35,40,45,50],stepDeviation:[2,3,4,5],skipDelay:[.5,.5,1]}],skipOnLabelChange:!0}}),pulseSum:{scaleBy:.9,animation:{ease:"power2.easeIn",duration:.1,yoyo:!1},returnAnimation:{ease:"power2.easeOut",duration:.3}}}),f={counter:{bangup:{duration:1,easing:i.b.easeNone},round:!0,font:"sumFont",alignType:"CENTER"},delays:{afterUpdate:.5}},p={screens:5,initialScreen:0,arrangement:"horizontal",maxDrag:.3,slideDuration:.5,ease:i.c.easeInOut,transitionLeverage:350,drawLines:!0,type:"lines",templates:{lines:"x{{val}}",cluster:"{{val}}+"},paytableDynamicPayouts:!1,useExternalPaytableModal:!1,isMinimal:!1},d={count:5,type:"spinning",useGlobalTileSizes:!1,useOwnMask:!1,unblurEndScreen:!1,dim:{tint:0,alpha:.5,blendMode:n("./node_modules/pixi.js/dist/esm/pixi.js").BLEND_MODES.MULTIPLY},tiles:{total:6,visible:3,offsetTop:1,offsetBottom:2,blur:{enabled:!0,default:{x:0,y:4,quality:8},19:{x:0,y:0,quality:0},100:{x:0,y:0,quality:0}},stacked:{},sizes:[3],dataParser:null,buildTiles:!0,ignoreSizes:{}},spin:{minSpinDurationEnabled:!1,spinStopTweenDuration:1.8,minDistance:7,speed:16,delay:{atStart:1,atEnd:3},easeStart:{offset:.08,speed:.4,easings:["power1.out","power1.in"]},easeEnd:{offset:.08,speed:.4,easings:["power1.out","power1.in"]},instantStop:{speedUpReels:{enabled:!0,speedFactor:5,overwrite:"auto",switchDuration:0,keepEaseEndSpeed:!0}},autoExpandTilesCount:1}},y=[{threshold:{width:1/0,ratio:1/0},offsetX:0,offsetY:0,scale:1,duration:.5}];function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g=v(v({},p),{},{paytableDynamicPayouts:!0,isMinimal:!0,paysScreen:4,arrowKeysDeltas:{up:60,down:-60},smoothSlide:{speed:2500,ease:"back.out(0.2)"},splash:{namespace:"PaytableScreen1",name:"paytableScreen1"},offsets:{height:0,top:0,bottom:0},arrangement:"vertical",screens:[1,2,3,4,5],mobileScrollSpeed:1});function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){T(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=E(E({},{version:"v0.0.14 master#5aa9d11",supported:{skins:["default"],languages:{default:["bg","cs","da","de","el","en","en-US","es","es-PE","fi","fr","hi","hr","hu","hy","id","it","ja","ka","ko","lt","lv","ms","nl","no","pl","pt","pt-BR","ro","ru","sk","sl","sv","th","tr","vi","zh","zh-TW"]}}}),{},T(T({branding:{client:"red-tiger",studio:null,powered:null,collaborator:null,background:"#000000"},namespace:"com.casino.game",client:"RedTiger",baseLang:"en",lang:"en",langsFallback:{"pt-BR":[],"es-PE":[],"zh-TW":[],"fr-CA":[],"en-US":[]},customUI:[],addedAnticipation:!1,hasFreeSpins:!1,hasPaytable:!0,hasAutoplay:!0,hasInternalJackpot:!1,hasBottomBar:!0,hasChoices:!1,useGameSumFont:!0,autoStart:!1,paytableOnLoad:!0,expanded:!1,hasFeatureEvents:!0,cdn:"dist/",basePath:"./",timestamp:"",size:{scale:{width:"auto",height:"auto",mode:"responsive",constrain:!1}},renderer:{width:1168,height:820,autoResize:!1,resolution:window.devicePixelRatio,centerInScreen:!1},dynamicRenderer:{default:{renderer:{width:1168,height:820},camera:{offsetY:0},tween:{ease:i.b.easeNone,duration:.5}}},randomSeed:"d0pe",video:{supportedFormats:["mp4","webm"]},centerCoins:{emitter:{sourceType:o.c.MOVIE_CLIP,maxParticles:1e3,randomFrameStart:!0,rate:{amount:[1,1],interval:[.04]},initializers:{velocity:{speed:10,angle:[345,375]},mass:[.5,2],life:[3,3],radius:[360]},behaviors:{gravity:[10],scale:{from:[.24,.32],to:[.24,.32]}}}},freeSpinsPopupTiles:{tileId:19,attachable:!0},jackpotPopupTiles:{tileId:100,attachable:!0},freeSpinsPassingEffects:{tileId:19,onShow:{repeat:-1},onHide:{}},rumble:{intensity:{x:1,y:1},duration:{x:1,y:1},randomize:{x:!0,y:!0},interval:{x:.02,y:.02},acceleration:{x:{duration:0,ease:"none"},y:{duration:0,ease:"none"}},deceleration:{x:{duration:0,ease:"none"},y:{duration:0,ease:"none"}}},scale:{XHD:{default:1},HD:{default:1},MD:{default:.6},SD:{default:.4},XSD:{default:.4}},forceResolution:null,anticipation:{freeSpins:{tileId:19,minTiles:2,maxTiles:3,minDuration:10,maxDuration:15,reels:[0,1,2,3,4]},jackpot:{tileId:100,minTiles:2,maxTiles:3,minDuration:10,maxDuration:15,reels:[0,2,4]}},sceneEffects:{types:["normal","freeSpins"],stopTickChildren:!1,transition:{fadeIn:{duration:.5,ease:"power1.out"},fadeOut:{duration:.5,ease:"power1.in"}}},totalWin:{bangup:{duration:5}},jackpotWin:{bangup:{duration:10},rumble:{duration:4.2},delays:{spawn:{beforeShow:1,betweenTiles:.5}},labels:{tileWin:"show",tileIdle:"loop"},winTilesThreshold:3},restrictRoundCelebrations:!1,roundCelebrationThreshold:0,extraWin:a,megaWaysCounter:s,skipStepExtraWin:h,freeSpinsBonusScreen:{counter:{font:"sumFont",alignType:"CENTER"},delays:{beforeHide:1}},freeSpinsStartScreen:{counter:{font:"sumFont",alignType:"CENTER"},countUpdate:{interval:{min:.05,max:.4}},delays:{afterHide:1}},freeSpinsStatus:f,headerBanners:{default:{count:6,prefix:"banner",showChance:30,initial:1,showTime:8,weights:{},waitHideAnimation:!0}},paytable:p,scrollablePaytable:g,platform:{resolutionThresholds:{XHD:["min","1920px"],HD:["max","1920px"],MD:["max","1280px"],SD:["max","670px"],XSD:["max","300px"]},monoSounds:["MD","SD","XSD"]},reels:d,wins:{winBar:{skipMplr:1,bangupSpeed:1.3},lines:{delays:{betweenLines:.1,singleLoop:1,afterShow:.5},topOffset:100,lineOffset:20,endToEnd:!0,layers:[{image:"lineFillTop",width:4,alignment:1},{image:"lineFillBottom",width:4,alignment:0},{image:"lineFill",width:2,alignment:.5}],filter:{enabled:!0,padding:10,strength:.1,quality:1,resolution:2}},ways:{delays:{betweenShows:0}},tiles:{renderTexture:{enabled:!0}},delays:{afterEnd:1},clusters:{delays:{betweenShows:0},frames:{fadeDuration:.5,edges:{enabled:!0}},labels:{polygonPrecision:1,label:{counter:{font:"sumFont",alignType:"CENTER",currency:!0,bangup:{duration:0,easing:"power2.out"}}}}}},centerWinBar:{counter:{bangup:{speed:5},currency:!0,hideDecimals:!1,font:"sumFont",alignType:"CENTER",fitBounds:{},ignoreRatio:!1,overscale:!0},delays:{beforeShow:.5,beforeHide:.5}},camera:y,autoplay:{nextSpinDelay:{win:1,noWin:.2}},cascade:{move:{speed:1e3,ease:"power2.in",easeEnd:{offset:-3,speed:15,easings:["none","none"]},delays:{beforeSetStart:.2,betweenBlocks:.05,betweenBlockSets:.2,afterEnd:0}},drop:{speed:1e3,ease:"power2.in",easeEnd:{offset:-3,speed:15,easings:["none","none"]},delays:{beforeSetStart:.2,betweenBlocks:.05,betweenBlockSets:.2,afterEnd:0}},destroy:{delays:{beforeSetStart:.2,betweenBlocks:.05,afterEnd:0},replaceTile:!1}},throbber:{color:"0x07072B",alpha:.6},winWaysBar:{labelSpacing:{left:2,right:2},alignType:"CENTER",fit:{ignoreRatio:!1,overscale:!1},sum:{currency:!0,font:"sumFont"},waysCount:{round:!0,font:"sumFont"}},royalWheel:{targetPointerOffset:0,spin:{start:{distance:360,speed:100,tweenOptions:{ease:"power3.in"}},loop:{speed:350,spinCount:{min:2,max:2},tweenOptions:{ease:"none"}},end:{sectorDeviation:{enabled:!0,offset:3},speed:100,spinCount:{min:3,max:3},tweenOptions:{ease:"power3.out"}},idle:{speed:5,tweenOptions:{ease:"none"},startAfterShow:!0}},sector:{counter:{round:!0,font:"sumFont",alignType:"CENTER",letterSpacing:-40,scale:.7,defaultScale:1}},delays:{beforeShow:.5,afterShow:.5,beforeHide:.5,afterHide:.5}},gambleWheel:{targetPointerOffset:0,spin:{start:{distance:200,speed:100,tweenOptions:{ease:"power3.in"}},loop:{speed:350,count:{min:1,max:2},tweenOptions:{ease:"none"}},end:{sectorDeviation:{enabled:!1,offset:3},speed:100,tweenOptions:{ease:"power3.out"}},idle:{speed:5,tweenOptions:{ease:"none"},startAfterShow:!0}},sector:{radius:425,valueToType:{0:"loss",1:"win"},types:{win:{init:{background:{color:"0x009966",alpha:1}},select:{background:{color:"0x009966",alpha:1}},deselect:{background:{color:"0x009966",alpha:1}},win:{background:{color:"0x009966",alpha:1}},noWin:{background:{color:"0x256651",alpha:1}},noWinHide:{background:{color:"0x256651",alpha:1}}},loss:{init:{background:{color:"0xCC3300",alpha:1}},select:{background:{color:"0xCC3300",alpha:1}},deselect:{background:{color:"0xCC3300",alpha:1}},win:{background:{color:"0xCC3300",alpha:1}},noWin:{background:{color:"0xa53e1c",alpha:1}},noWinHide:{background:{color:"0xa53e1c",alpha:1}}}}},delays:{beforeShow:.5,afterShow:.5,beforeHide:.5,afterHide:.5}},winExchange:{exchange:{splash:{counters:{spins:{containerName:"spins",counter:{font:"sumFont",alignType:"RIGHT"}},amount:{containerName:"amount",counter:{currency:!0,hideDecimals:!1,font:"sumFont",alignType:"CENTER"}},exchange:{containerName:"exchange",counter:{currency:!0,hideDecimals:!1,font:"sumFont",alignType:"CENTER"}}}},feature:{counters:{spins:{containerName:"spins",counter:{font:"sumFont",alignType:"CENTER"}},amount:{containerName:"amount",counter:{currency:!0,hideDecimals:!1,font:"sumFont",alignType:"CENTER"}},exchange:{containerName:"exchange",counter:{currency:!0,hideDecimals:!1,font:"sumFont",alignType:"CENTER"}}}},choices:{buttons:{collect:{type:"secondary",size:"large"},exchange:{type:"primary",size:"large"}}}},gamble:{splash:{counters:{spins:{containerName:"spins",counter:{font:"sumFont",alignType:"RIGHT"}},amount:{containerName:"amount",counter:{currency:!0,hideDecimals:!1,font:"sumFont",alignType:"CENTER"}}}},wheel:{targetPointerOffset:0,spin:{start:{distance:200,speed:100,tweenOptions:{ease:"power3.in"}},loop:{speed:350,count:{min:1,max:2},tweenOptions:{ease:"none"}},end:{sectorDeviation:{enabled:!1,offset:3},speed:100,tweenOptions:{ease:"power3.out"}},idle:{speed:5,tweenOptions:{ease:"none"},startAfterShow:!0}},sector:{radius:425,valueToType:{0:"loss",1:"win"},types:{win:{init:{background:{color:"0x009966",alpha:1}},select:{background:{color:"0x009966",alpha:1}},deselect:{background:{color:"0x009966",alpha:1}},win:{background:{color:"0x009966",alpha:1}},noWin:{background:{color:"0x256651",alpha:1}},noWinHide:{background:{color:"0x256651",alpha:1}}},loss:{init:{background:{color:"0xCC3300",alpha:1}},select:{background:{color:"0xCC3300",alpha:1}},deselect:{background:{color:"0xCC3300",alpha:1}},win:{background:{color:"0xCC3300",alpha:1}},noWin:{background:{color:"0xa53e1c",alpha:1}},noWinHide:{background:{color:"0xa53e1c",alpha:1}}}}},delays:{beforeShow:.5,afterShow:.5,beforeHide:.5,afterHide:.5}},status:{counters:{win:{containerName:"gamble.win",counter:{font:"sumFont",alignType:"CENTER"}},amount:{containerName:"amount",counter:{currency:!0,hideDecimals:!1,font:"sumFont",alignType:"CENTER"}},noWin:{containerName:"gamble.noWin",counter:{font:"sumFont",alignType:"CENTER"}}}},choices:{buttons:{collect:{type:"secondary",size:"large"},gamble:{type:"primary",size:"large"}}},delays:{win:1,noWin:.5}},delays:{beforeStart:.5,beforEnd:.5,afterEnd:.5}}},"scrollablePaytable",g),"featureBuy",{excludeDataFromPrevRounds:!1}))},"./src/core/features/reels/TilesGenerator.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("./node_modules/ramda/es/isEmpty.js"),i=n("./node_modules/ramda/es/times.js"),o=n("./node_modules/ramda/es/always.js"),a=n("./node_modules/ramda/es/flatten.js"),s=n("./src/core/utils/index.js");function u(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cachedSpinnableTilesIds={},this.spinnableTilesIds={},this._isStacked=!1,this._stack={}}var e,n,c;return e=t,(n=[{key:"isStacked",get:function(){return this._isStacked}},{key:"enableStack",value:function(t){var e=t.stacked,n=void 0===e?{}:e,i=t.index;if(Object(r.a)(n)||!n.tiles||Object(r.a)(n.tiles))return this._isStacked=!1,console.error("Invalid stacked configuration ".concat(n,"."));if(Number(i)!==i)return this._isStacked=!1,console.error("Invalid reel index ".concat(i," for enabling stack."));if(this._hasSpinnableTiles({index:i})){var o=Object(s.m)(this.spinnableTilesIds[i]);this._stack[i]={enabled:!0,cfg:Object(s.c)(n),stackSize:0,stackTileId:o,prevTileId:o},this._isStacked=Object.values(this._stack).every((function(t){return t.enabled}))}else this._isStacked=!1}},{key:"disableStack",value:function(){this._isStacked=!1}},{key:"setSpinnableTiles",value:function(t){var e=t.index,n=t.tiles,r=t.cache,i=void 0!==r&&r;return Number(e)!==e?console.error("Invalid reel specified ".concat(e," for setting spinnable tile ids")):Array.isArray(n)&&0!==n.length?(this.spinnableTilesIds[e]=Object(s.c)(n),void(i&&(this._cachedSpinnableTilesIds[e]=Object(s.c)(n)))):console.error("Invalid spinnable tiles argument for reel ".concat(e," ").concat(n))}},{key:"resetSpinnableTiles",value:function(t){var e=t.index;return Number(e)!==e?console.error("Invalid reel specified ".concat(e," for resetting spinnable tile ids")):this._cachedSpinnableTilesIds[e]?void(this.spinnableTilesIds[e]=Object(s.c)(this._cachedSpinnableTilesIds[e])):console.error("Missing cached spinnable tile ids for reel ".concat(e,", ").concat(this._cachedSpinnableTilesIds[e]))}},{key:"generateRandomTiles",value:function(t){var e=t.count,n=t.index;if(this._hasSpinnableTiles({index:n})){if(this._isStacked)return this._generateStackedTiles({count:e,index:n});for(var r=[];e>0;){var i=Object(s.m)(this.spinnableTilesIds[n],e);r=r.concat(i),e-=i.length}return r}}},{key:"generateRandomScreens",value:function(t){var e=this,n=t.count,r=t.index,a=t.minTileSize,c=t.maxTileSize;return Object(i.a)((function(){var t=Object(s.i)(a,c),n=e.generateRandomTiles({count:t,index:r}),l=Object(i.a)(Object(o.a)(0),c-t);return[].concat(u(n),u(l))}),n)}},{key:"addToSpinnableTiles",value:function(t){var e=this,n=t.tiles,r=t.tileId,i=t.frequency,o=t.index,u=t.cache,c=void 0!==u&&u;if(this._hasSpinnableTiles({index:o}))return(n||[{tileId:r,frequency:i}]).forEach((function(t){var n=t.tileId,r=t.frequency,i=r>0?r:1,u=e.spinnableTilesIds[o].filter((function(t){return t!==n}));if(i<1){var c=Math.round(1/i),l=Object(a.a)(u.map((function(t){return Object(s.k)(c,(function(){return t}))})));e.spinnableTilesIds[o]=l,e.spinnableTilesIds[o].push(n)}else{e.spinnableTilesIds[o]=u;for(var h=0;h<i;h++)e.spinnableTilesIds[o].push(n)}})),c&&(this._cachedSpinnableTilesIds[o]=this.spinnableTilesIds[o]),this.spinnableTilesIds[o]}},{key:"_generateStackedTiles",value:function(t){var e=this,n=t.count,r=t.index;if(this._hasSpinnableTiles({index:r})){var o=[];return Object(i.a)((function(){if(e._shouldResetStack({index:r,tileId:e._stack[r].stackTileId})){var t=e._stack[r].cfg.tiles[e._stack[r].stackTileId]&&e._stack[r].cfg.tiles[e._stack[r].stackTileId].min>1,n=e._stack[r].cfg.stackSingleTiles||t?e.spinnableTilesIds[r]:e.spinnableTilesIds[r].filter((function(t){return t!==e._stack[r].stackTileId}));e._stack[r].prevTileId=e._stack[r].stackTileId,e._stack[r].stackTileId=Object(s.m)(n),e._stack[r].stackSize=0}o.unshift(e._stack[r].stackTileId),e._stack[r].stackSize+=1}),n),o}}},{key:"_shouldResetStack",value:function(t){var e=t.index,n=t.tileId,r={min:1,max:1};return this._stack[e].cfg.tiles[n]&&(r.min=this._stack[e].cfg.tiles[n].min||1,r.max=this._stack[e].cfg.tiles[n].max||1),1===this._stack[e].stackSize&&Object(s.b)(this._stack[e].cfg.singleTileChance||0)||this._stack[e].stackSize>=r.max||this._stack[e].stackSize>=Object(s.i)(r.min,r.max)}},{key:"_hasSpinnableTiles",value:function(t){var e=t.index,n=Array.isArray(this.spinnableTilesIds[e])&&this.spinnableTilesIds[e].length>0;return n||console.error("There are no spinnable tiles set for reel ".concat(e)),n}}])&&l(e.prototype,n),c&&l(e,c),t}()},"./src/core/features/reels/animations/Animation.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("./node_modules/@games/dope/src/Dopamine.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e=s(e),function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],s(t).constructor):e.apply(t,n))}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c={ANIMATION_UPDATE:"animation_update",ANIMATION_SPIN_STARTING:"animation_starting",ANIMATION_SPINNING:"animation_spinning",ANIMATION_STOPPING:"animation_stopping",ANIMATION_SPIN_ENDING:"animation_ending",ANIMATION_SPIN_END:"animation_end"},l={},h=function(t){function e(t){var n,r=t.renderer,i=t.config;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=a(this,e))._index=r.index,n._renderer=r,n._config=i,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return c}},{key:"labels",get:function(){return l}}],(r=[{key:"renderer",get:function(){return this._renderer}},{key:"index",get:function(){return this._index}},{key:"config",get:function(){return this._config}},{key:"start",value:function(t){throw new Error('Subclass MUST override "start(config)" with its OWN custom logic!')}},{key:"stop",value:function(t,e){throw new Error('Subclass MUST override "stop(data, config)" with its OWN custom logic!')}}])&&o(n.prototype,r),i&&o(n,i),e}(r.b)},"./src/core/features/reels/animations/SpinningAnimation.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n("./src/core/features/reels/animations/Animation.js"),i=n("./node_modules/@games/gsap/all.js"),o=n("./src/core/utils/Timer.js");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e=c(e),function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},r.a.events),d={NONE:"none",EASE_START:"easeStart",SPINNING:"spinning",STOPPING:"stopping",EASE_END:"easeEnd"},y=function(t){function e(t){var n,r=t.renderer,i=t.config,o=t.tileHeight;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=u(this,e,[{renderer:r,config:i}])).buffer=r.buffer,n._tileHeight=o,n._initialConfig=i,n.timeline=null,n.tween=null,n.isStarting=!1,n.isSpinning=!1,n.isStopping=!1,n.isLocked=!1,n._inInstantStop=!1,n._lastEvent=null,n._reelSpinningListener=null,n._timeScaleTween=null,n.LOOPING_DISTANCE=n._initialConfig.minDistance,n._reset(),n}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,t),n=e,a=[{key:"events",get:function(){return p}},{key:"labels",get:function(){return d}}],(r=[{key:"label",get:function(){return this.timeline&&this.timeline.currentLabel()||e.labels.NONE}},{key:"start",value:function(){this.isStarting=!0,this._doStart()}},{key:"stop",value:function(t){var n=this;if(!this.isStarting)return console.error("I'm not started yet, reel:",this._index);if(this.isStopping)return console.error("I'm already stopping, reel:",this._index);this.isStopping=!0;var r=this._config.delay/this._config.speed+this.getEaseStartTime();this._lastEvent===e.events.ANIMATION_SPIN_STARTING?(this._timer=new o.a,this._timer.start(),this._reelSpinningListener=function(){var e=n._timer.stop();n._reelSpinningListener=null,n._onStop(r-e,t)},this.once(e.events.ANIMATION_SPINNING,this._reelSpinningListener,this)):this._lastEvent===e.events.ANIMATION_SPINNING?this._onStop(r,t):console.error("Well this should never happen!",this._lastEvent),this._config.autoStopInstantly&&this.stopInstant(t)}},{key:"stopInstant",value:function(t){if(!this.isStarting)return console.error("I'm not started yet, reel:",this._index);if(!this.isStopping)return console.error("I'm not stopping yet, reel:",this._index);this._reelSpinningListener&&(this.off(e.events.ANIMATION_SPINNING,this._reelSpinningListener),this._reelSpinningListener=null,this._timer.stop());var n=this._initialConfig.instantStop.speedUpReels,r=n.enabled;switch(r&&this.setTimeScale(n.speedFactor,n.switchDuration),this.timeline.currentLabel()){case e.labels.EASE_START:this._dispatch(e.events.ANIMATION_SPINNING),this._onStop(0,t),r||this.timeline.seek(e.labels.EASE_END,!1);break;case e.labels.SPINNING:console.warn("Invalid reel with index ".concat(this._index," timeline label, please investigate: ").concat(JSON.stringify(this.timeline.labels),"."));break;case e.labels.STOPPING:r||this.timeline.seek(e.labels.EASE_END,!1);break;case e.labels.EASE_END:}this._inInstantStop=!0}},{key:"setTimeScale",value:function(t,e){if(!this._inInstantStop){var n=this._initialConfig.instantStop.speedUpReels.overwrite;this._timeScaleTween=i.b.to(this.timeline,{duration:e,timeScale:t,overwrite:n})}}},{key:"lock",value:function(){this.isLocked=!0}},{key:"unlock",value:function(){this.isLocked=!1}},{key:"_reset",value:function(){var t=["power1.out","power1.in"],e=["power1.out","power1.in"];this._initialConfig.easeStart.easings&&(0===this._initialConfig.easeStart.easings.length||this._initialConfig.easeStart.easings.length>2?console.error("Invalid easing start configuration ".concat(this._initialConfig.easeStart.easings)):t=this._initialConfig.easeStart.easings),this._initialConfig.easeEnd.easings&&(2!==this._initialConfig.easeEnd.easings.length?console.error("Invalid easing end configuration ".concat(this._initialConfig.easeEnd.easings)):e=this._initialConfig.easeEnd.easings),this.LOOPING_DISTANCE=this._initialConfig.minDistance,this._config={delay:this._index*this._initialConfig.delay.atStart,speed:this._initialConfig.speed,distance:this._initialConfig.minDistance+this._initialConfig.delay.atEnd*this._index,easeStartOffset:this._initialConfig.easeStart.offset,easeEndOffset:this._initialConfig.easeEnd.offset,easeStartSpeed:this._initialConfig.easeStart.speed,easeEndSpeed:this._initialConfig.easeEnd.speed,easeStartEasings:t,easeEndEasings:e,autoExpandBuffer:!0,autoStopInstantly:!1,autoExpandTilesCount:Number.isInteger(this._initialConfig.autoExpandTilesCount)&&this._initialConfig.autoExpandTilesCount>0?this._initialConfig.autoExpandTilesCount:1},this.timeline&&(this.timeline.clear(),this.timeline.kill()),this.tween=null,this._lastEvent=null,this.isStarting=this.isSpinning=this.isStopping=!1,this._inInstantStop=!1,this.tween={pos:0,lastPos:0},this._timeScaleTween&&(this._timeScaleTween.kill(),this._timeScaleTween=null)}},{key:"_doStart",value:function(){this._renderer.offset&&(this.tween.pos=this.tween.lastPos=1-this._renderer.offset/this._tileHeight),this.timeline=i.b.timeline({delay:this._config.delay/this._config.speed}),this._dispatch(e.events.ANIMATION_SPIN_STARTING),this._doEaseStart(),this.timeline.addLabel(e.labels.SPINNING,"+=0.0001").call(this._dispatch.bind(this),[e.events.ANIMATION_SPINNING]),this._doLoop(),this.isSpinning=!0}},{key:"_doEaseStart",value:function(){var t=this.getEaseStartTime()/this._config.easeStartEasings.length;this.timeline.addLabel(e.labels.EASE_START),2===this._config.easeStartEasings.length?this.timeline.to(this.tween,{duration:t,pos:"-="+this._config.easeStartOffset,ease:this._config.easeStartEasings[0],callbackScope:this,onUpdate:this._onTween}).to(this.tween,{duration:t,pos:"+="+this._config.easeStartOffset,ease:this._config.easeStartEasings[1],callbackScope:this,onUpdate:this._onTween}):this.timeline.to(this.tween,{duration:t,pos:"+="+this._config.easeStartOffset,ease:this._config.easeStartEasings[0],callbackScope:this,onUpdate:this._onTween})}},{key:"_doLoop",value:function(){this.timeline.to(this.tween,{duration:this.LOOPING_DISTANCE/this._config.speed,pos:"+="+this.LOOPING_DISTANCE,ease:"none",onComplete:this._doLoop,callbackScope:this,onUpdate:this._onTween}).to(this.tween,{duration:this.LOOPING_DISTANCE/this._config.speed,pos:"+="+this.LOOPING_DISTANCE,ease:"none",callbackScope:this,onUpdate:this._onTween})}},{key:"_onStop",value:function(t,e){(Number(t)!==t||t<0)&&(console.warn("The syncTime("+t+") is wrong!!!!"),t=0),this._config.distance+=Math.ceil(t*this._config.speed),this.buffer.merge(e,this._config.distance),this._doStop()}},{key:"_doStop",value:function(){var t=this,n=Math.ceil(this.tween.pos)+this._config.distance,r=(this._getOffsetLeft()+this._config.distance)/this._config.speed;this._dispatch(e.events.ANIMATION_STOPPING),this.timeline.killTweensOf(this.tween),this.timeline.clear().addLabel(e.labels.STOPPING).to(this.tween,{duration:r,pos:n,ease:"none",callbackScope:this,onUpdate:this._onTween}).addLabel(e.labels.EASE_END).call(this._dispatch.bind(this),[e.events.ANIMATION_SPIN_ENDING]).call((function(){t._inInstantStop&&t._initialConfig.instantStop.speedUpReels.enabled&&t._initialConfig.instantStop.speedUpReels.keepEaseEndSpeed&&t.timeline.timeScale(1)})),this._doEaseEnd()}},{key:"_doEaseEnd",value:function(){var t=this.getEaseEndTime()/this._config.easeEndEasings.length;this.timeline.to(this.tween,{duration:t,pos:"+="+this._config.easeEndOffset,ease:this._config.easeEndEasings[0],callbackScope:this,onUpdate:this._onTween}).to(this.tween,{duration:t,pos:"-="+this._config.easeEndOffset,ease:this._config.easeEndEasings[1],callbackScope:this,onUpdate:this._onTween,onComplete:this._onSpinComplete})}},{key:"_onTween",value:function(){var t=(this.tween.pos-this.tween.lastPos)*this._tileHeight;this._config.autoExpandBuffer&&this._checkIsOutsideBuffer(t);var e=parseFloat((this._renderer.pos-t).toFixed(7));this._renderer.moveTo(e,!1),this.tween.lastPos=this.tween.pos}},{key:"_onSpinComplete",value:function(){var t=this.buffer.targetPosition*this._tileHeight;Math.abs(this._renderer.lastPos-t)>10&&console.warn("Reel ".concat(this.index," didn't stop at the correct position => ").concat(t,", ").concat(this._renderer.lastPos)),this._renderer.moveToTile(this.buffer.targetPosition),this._reset(),this._dispatch(e.events.ANIMATION_SPIN_END)}},{key:"_checkIsOutsideBuffer",value:function(t){if(this._renderer.pos-t<this._tileHeight){var e=this._config.autoExpandTilesCount+Math.ceil((t-this._renderer.pos)/this._tileHeight);this.buffer.expandLeft(e)}}},{key:"_dispatch",value:function(t){this._lastEvent=t,this.emit(t,{reel:this._renderer})}},{key:"_getOffsetLeft",value:function(){var t=this.tween.pos%1;return t?1-t:0}},{key:"getEaseStartTime",value:function(){var t=this._config.easeStartOffset/this._config.easeStartSpeed;return parseFloat(t.toFixed(7))}},{key:"getEaseEndTime",value:function(){var t=Math.abs(this._config.easeEndOffset)/this._config.easeEndSpeed;return parseFloat(t.toFixed(7))}}])&&s(n.prototype,r),a&&s(n,a),e}(r.a)},"./src/core/features/reels/animations/SpinningMegaWaysAnimation.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n("./src/core/features/reels/animations/Animation.js"),i=n("./node_modules/@games/gsap/all.js"),o=n("./src/core/utils/Timer.js");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e=c(e),function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},r.a.events),d={NONE:"none",EASE_START:"easeStart",SPINNING:"spinning",STOPPING:"stopping",EASE_END:"easeEnd"},y=function(t){function e(t){var n,r=t.renderer,i=t.config;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=u(this,e,[{renderer:r,config:i}])).buffer=r.buffer,n.tween=null,n.isStarting=!1,n.isSpinning=!1,n.isStopping=!1,n._initialConfig=i,n._inInstantStop=!1,n._lastEvent=null,n._timeline=null,n._reelSpinningListener=null,n._reset(),n}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,t),n=e,a=[{key:"events",get:function(){return p}},{key:"labels",get:function(){return d}}],(r=[{key:"easeStartDuration",get:function(){return this._config.easeStartOffset/this._config.easeStartSpeed}},{key:"easeEndDuration",get:function(){return Math.abs(this._config.easeEndOffset)/this._config.easeEndSpeed}},{key:"label",get:function(){return this._timeline&&this._timeline.currentLabel()||e.labels.NONE}},{key:"start",value:function(){var t=this;this.isStarting=!0;var n=this._config,r=n.delay,o=n.speed;this._timeline=i.b.timeline({delay:r/o}),this._dispatch(e.events.ANIMATION_SPIN_STARTING),this._doEaseStart(),this._timeline.addLabel(e.labels.SPINNING).call((function(){t._onTween(),t._dispatch(e.events.ANIMATION_SPINNING),t.isSpinning=!0})),this._doLoop()}},{key:"stop",value:function(t){var n=this;if(!this.isStarting)return console.error("I'm not started yet, reel:",this._index);if(this.isStopping)return console.error("I'm already stopping, reel:",this._index);this.isStopping=!0;var r=this._calculateSyncTime();this._lastEvent===e.events.ANIMATION_SPIN_STARTING?(this._timer=new o.a,this._timer.start(),this._reelSpinningListener=function(){n._reelSpinningListener=null,n._onStop(r-n._timer.stop(),t)},this.once(e.events.ANIMATION_SPINNING,this._reelSpinningListener,this)):this._lastEvent===e.events.ANIMATION_SPINNING?this._onStop(r,t):console.error("Well this should never happen!",this._lastEvent),this._config.autoStopInstantly&&this.stopInstant(t)}},{key:"stopInstant",value:function(t){if(!this.isStarting)return console.error("I'm not started yet, reel:",this._index);if(!this.isStopping)return console.error("I'm not stopping yet, reel:",this._index);this._reelSpinningListener&&(this.off(e.events.ANIMATION_SPINNING,this._reelSpinningListener),this._reelSpinningListener=null,this._timer.stop());var n=this._config.instantStop.speedUpReels,r=n.enabled;switch(r&&this.setTimeScale(n.speedFactor,n.switchDuration),this.label){case e.labels.EASE_START:this._dispatch(e.events.ANIMATION_SPINNING),this._onStop(0,t),r||this._timeline.seek(e.labels.EASE_END);break;case e.labels.SPINNING:this._onStop(0,t),r||this._timeline.seek(e.labels.EASE_END);break;case e.labels.STOPPING:r||this._timeline.seek(e.labels.EASE_END);break;case e.labels.EASE_END:}this._inInstantStop=!0}},{key:"setTimeScale",value:function(t,e){if(!this._inInstantStop){var n=this._initialConfig.instantStop.speedUpReels.overwrite;i.b.to(this._timeline,{duration:e,timeScale:t,overwrite:n})}}},{key:"_doEaseStart",value:function(){var t=this,n=this._config,r=n.easeStartOffset,i=n.easeStartEasings,o=this.easeStartDuration/i.length;this._timeline.addLabel(e.labels.EASE_START),2===i.length?this._timeline.to(this.tween,{duration:o,pos:"-="+r,ease:i[0],onUpdate:function(){return t._onTween()}}).to(this.tween,{duration:o,pos:"+="+r,ease:i[1],onUpdate:function(){return t._onTween()}}):this._timeline.to(this.tween,{duration:o,pos:"+="+r,ease:i[0],onUpdate:function(){return t._onTween()}})}},{key:"_doLoop",value:function(){var t=this;this._timeline.to(this.tween,{duration:this._loopingDistance/this._config.speed,pos:"+="+this._loopingDistance,ease:"none",onUpdate:function(){return t._onTween()},onComplete:function(){return t._doLoop()}}).to(this.tween,{duration:this._loopingDistance/this._config.speed,pos:"+="+this._loopingDistance,ease:"none",onUpdate:function(){return t._onTween()}})}},{key:"_onStop",value:function(t,e){(Number(t)!==t||t<0)&&(t=0);var n=this._config,r=n.distance,i=n.extraDistance,o=n.speed;this.buffer.merge(e,r,i),this._doStop(t/o)}},{key:"_doStop",value:function(t){var n=this,r=this._config.speed,i=this._renderer.offsetInTiles,o=this.buffer.distanceToTarget+t,a=(o-i)/r,s=this.tween.pos+o-i;this._timeline.killTweensOf(this.tween),this._timeline.clear().addLabel(e.labels.STOPPING).call((function(){return n._dispatch(e.events.ANIMATION_STOPPING)})).to(this.tween,{duration:a,pos:s,ease:"none",onUpdate:function(){return n._onTween()}}).addLabel(e.labels.EASE_END).call((function(){return n._onSpinEnding()}))}},{key:"_doEaseEnd",value:function(){var t=this,e=this._config,n=e.easeEndOffset,r=e.easeEndEasings,i=this.easeEndDuration/r.length;this._timeline.to(this.tween,{duration:i,pos:"+="+n,ease:r[0],onUpdate:function(){return t._onTween()}}).to(this.tween,{duration:i,pos:"-="+n,ease:r[1],onUpdate:function(){return t._onTween()},onComplete:function(){return t._onSpinEnd()}})}},{key:"_onTween",value:function(){this._config.autoExpandBuffer&&this._lastEvent===e.events.ANIMATION_SPINNING&&this._checkIsOutsideBuffer()&&this.buffer.expandLeft(this._renderer.maxTileSize),this._renderer.moveTo((this.tween.pos-this.tween.lastPos)*this._renderer.minTileHeight),this.tween.lastPos=this.tween.pos}},{key:"_onSpinEnding",value:function(){this._dispatch(e.events.ANIMATION_SPIN_ENDING);var t=this._initialConfig.instantStop.speedUpReels;this._inInstantStop&&t.enabled&&t.keepEaseEndSpeed&&this._timeline.timeScale(1),this._doEaseEnd()}},{key:"_onSpinEnd",value:function(){this._onTween(),this._reset(),this._renderer.reset(),this._dispatch(e.events.ANIMATION_SPIN_END)}},{key:"_checkIsOutsideBuffer",value:function(){return this.buffer.currentPosition<this.buffer.firstEntry.heightIndex}},{key:"_calculateSyncTime",value:function(){return this._config.delay/this._config.speed+this.easeStartDuration}},{key:"_reset",value:function(){var t=["power1.out","power1.in"],e=["power1.out","power1.in"],n=this._initialConfig,r=n.easeStart,i=n.easeEnd,o=n.delay,a=n.speed,s=n.minDistance,u=n.autoExpandTilesCount,c=n.instantStop;r.easings&&(0===r.easings.length||r.easings.length>2?console.error("Invalid easing start configuration ".concat(r.easings)):t=r.easings),i.easings&&(2!==i.easings.length?console.error("Invalid easing end configuration ".concat(i.easings)):e=i.easings);var l=this._renderer.maxTileSize;this._loopingDistance=s,this._config={delay:this._index*o.atStart,speed:a,distance:Math.floor(s/l),extraDistance:this._index*o.atEnd,easeStartOffset:r.offset,easeEndOffset:i.offset,easeStartSpeed:r.speed,easeEndSpeed:i.speed,easeStartEasings:t,easeEndEasings:e,autoExpandBuffer:!0,autoStopInstantly:!1,autoExpandTilesCount:Number.isInteger(u)&&u>0?u:1,instantStop:c,speedFactor:c.speedUpReels.speedFactor},this._timeline&&this._timeline.clear().kill(),this.isStarting=this.isSpinning=this.isStopping=!1,this.tween={pos:0,lastPos:0},this._inInstantStop=!1,this._lastEvent=null}},{key:"_dispatch",value:function(t){this._lastEvent=t,this.emit(t,{reel:this._renderer})}}])&&s(n.prototype,r),a&&s(n,a),e}(r.a)},"./src/core/features/reels/buffers/Buffer.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("./node_modules/@games/dope/src/Dopamine.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e=s(e),function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],s(t).constructor):e.apply(t,n))}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c={BUFFER_UPDATED:"buffer_updated"},l=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=a(this,e))._data=null,t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return c}}],(r=[{key:"data",get:function(){return this._data}},{key:"update",value:function(t){throw new Error('Subclass MUST override "update(bufferData)" with its OWN custom logic!')}},{key:"changeEntry",value:function(t,e){throw new Error('Subclass MUST override "changeEntry(offset, id)" with its OWN custom logic!')}},{key:"fetchEntry",value:function(t){throw new Error('Subclass MUST override "fetchEntry(offset)" with its OWN custom logic!')}},{key:"fetchResultScreen",value:function(){throw new Error('Subclass MUST override "fetchResultScreen()" with its OWN custom logic!')}},{key:"resetEntry",value:function(t){throw new Error('Subclass MUST override "resetEntry(offset)" with its OWN custom logic!')}}])&&o(n.prototype,r),i&&o(n,i),e}(r.b)},"./src/core/features/reels/controllers/Controller.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n("./node_modules/@games/dope/src/Dopamine.js"),i=n("./src/core/utils/index.js"),o=n("./src/core/utils/Status.js"),a=n("./src/core/utils/CombinedTicker.js");function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){u(o,r,i,a,s,"next",t)}function s(t){u(o,r,i,a,s,"throw",t)}a(void 0)}))}}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e=f(e),function(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],f(t).constructor):e.apply(t,n))}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d={SPIN_START:"spin_start",SPIN_STOPPING:"spin_stopping",SPIN_END:"spin_end",SPIN_STOPPING_INSTANT:"spin_stopping_instant"},y=function(t){function e(t){var n,r=t.config,i=t.renderers,o=t.animationSource;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=h(this,e))._config=r,n._reels=[],n._renderers=[],n._preConfigs={start:{},stop:{}},n.createReels(r,i,o),n._reset(),n}var n,r,s,u,f,y;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,t),n=e,r=[{key:"reels",get:function(){return this._reels}},{key:"preConfigs",get:function(){return this._preConfigs}},{key:"createReels",value:function(t,e,n){var r=this;e.forEach((function(e){return r._createReel(t,e,n)}))}},{key:"removeReel",value:function(t){this._reels=this._reels.filter((function(e){return e.index!==t})),this._renderers=this._renderers.filter((function(e){return e.index!==t})),delete this._preConfigs.start[t],delete this._preConfigs.stop[t]}},{key:"start",value:(y=c(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isSpinning){t.next=2;break}return t.abrupt("return");case 2:return this.emit(e.events.SPIN_START),this._config.spin.minSpinDurationEnabled&&console.time("spin"),t.next=6,this._onStart(n);case 6:this.isSpinning=!0;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return y.apply(this,arguments)})},{key:"stop",value:(f=c(regeneratorRuntime.mark((function t(n,r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._config.spin.minSpinDurationEnabled){t.next=4;break}return o=this._calcSpinDelay(),t.next=4,Object(i.d)(o);case 4:if(!this.isStopping){t.next=6;break}return t.abrupt("return");case 6:return this.emit(e.events.SPIN_STOPPING),this.isStopping=!0,this._config.spin.minSpinDurationEnabled&&console.time("stop_time"),t.next=11,this._onStop(n,r);case 11:this._reset(),this.emit(e.events.SPIN_END),this._config.spin.minSpinDurationEnabled&&(console.timeEnd("stop_time"),console.timeEnd("spin"));case 14:case"end":return t.stop()}}),t,this)}))),function(t,e){return f.apply(this,arguments)})},{key:"stopInstant",value:(u=c(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isStopping){t.next=2;break}return t.abrupt("return");case 2:if(!this.isInstantStopping){t.next=4;break}return t.abrupt("return",console.info("Don't worry - we are stopping INSTANTLY already ;)"));case 4:return this.emit(e.events.SPIN_STOPPING_INSTANT),this.isInstantStopping=!0,t.next=8,this._onInstantStop(n);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"getReelConfig",value:function(t){return this._reels[t].config}},{key:"preConfigStart",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=void 0===n?Object(i.k)(this._reels.length):[].concat(n);r.forEach((function(n){return t._preConfigs.start[n]=e}))}},{key:"preConfigStop",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=void 0===n?Object(i.k)(this._reels.length):[].concat(n);r.forEach((function(n){return t._preConfigs.stop[n]=e}))}},{key:"setTimeScale",value:function(t,e,n){var r=this;if(!this.isSpinning)return console.warn("Obviously, you could control the reels time scale only during spinning");Number(e)!==e&&(e=1),(void 0===n?Object(i.k)(this._reels.length):[].concat(n)).forEach((function(n){return r._reels[n].setTimeScale(t,e)}))}},{key:"_createReel",value:function(t,e,n){throw new Error('Subclass MUST override "_createReel(config, renderer, reelAnimationSource)" methods with its OWN custom logic!')}},{key:"_onStart",value:function(t){return Promise.reject(new Error('Subclass MUST override "_onStart(config)" with its OWN custom logic!'))}},{key:"_onStop",value:function(t,e){return Promise.reject(new Error('Subclass MUST override "_onStop(data, config)" with its OWN custom logic!'))}},{key:"_onInstantStop",value:function(t){return Promise.resolve()}},{key:"_reset",value:function(){this.isSpinning=!1,this.isStopping=!1,this.isInstantStopping=!1,this._resetPreconfigs()}},{key:"_resetPreconfigs",value:function(t){var e=this;(void 0===t?Object(i.k)(this._reels.length):[].concat(t)).forEach((function(t){e._preConfigs.start[t]={},e._preConfigs.stop[t]={}}))}},{key:"_calcSpinDelay",value:function(){var t=(a.a.elapsedTime-o.a.get(o.a.TYPES.PLAY_START_TIME))/1e3,e=o.a.get(o.a.TYPES.MIN_ROUND_DURATION);return Math.max(e-t-this._config.spin.spinStopTweenDuration,0)}}],s=[{key:"events",get:function(){return d}}],r&&l(n.prototype,r),s&&l(n,s),e}(r.b)},"./src/core/features/reels/controllers/SpinningController.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return N}));var r=n("./node_modules/ramda/es/internal/_curry2.js"),i=n("./node_modules/ramda/es/internal/_dispatchable.js"),o=n("./node_modules/ramda/es/internal/_map.js"),a=n("./node_modules/ramda/es/internal/_reduce.js"),s=n("./node_modules/ramda/es/internal/_xfBase.js"),u=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=s.a.init,t.prototype["@@transducer/result"]=s.a.result,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},t}(),c=Object(r.a)((function(t,e){return new u(t,e)})),l=n("./node_modules/ramda/es/curryN.js"),h=n("./node_modules/ramda/es/keys.js"),f=Object(r.a)(Object(i.a)(["fantasy-land/map","map"],c,(function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return Object(l.a)(e.length,(function(){return t.call(this,e.apply(this,arguments))}));case"[object Object]":return Object(a.a)((function(n,r){return n[r]=t(e[r]),n}),{},Object(h.a)(e));default:return Object(o.a)(t,e)}}))),p=n("./node_modules/ramda/es/path.js"),d=Object(r.a)((function(t,e){return Object(p.a)([t],e)})),y=Object(r.a)((function(t,e){return f(d(t),e)})),m=n("./node_modules/ramda/es/equals.js"),v=n("./src/core/utils/index.js"),_=n("./src/core/features/reels/controllers/Controller.js"),g=n("./src/core/features/reels/animations/SpinningAnimation.js"),b=n("./src/core/utils/EventsHub.js");function E(t){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function T(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function x(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function S(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){x(o,r,i,a,s,"next",t)}function s(t){x(o,r,i,a,s,"throw",t)}a(void 0)}))}}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function P(t,e,n){return e=R(e),function(t,e){if(e&&("object"===E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],R(t).constructor):e.apply(t,n))}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function I(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var k=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?I(Object(n),!0).forEach((function(e){C(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},_.a.events),N=function(t){function e(t){var n,r=t.config,i=t.renderers,o=t.animationSource;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=P(this,e,[{config:r,renderers:i,animationSource:o}])).totalSpinningReels=0,n.mismatchedReels=[],n}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(e,t),n=e,r=[{key:"reels",get:function(){return this._reels}},{key:"lockedReels",get:function(){return this._reels.filter((function(t){return!0===t.isLocked}))}},{key:"unlockedReels",get:function(){return this._reels.filter((function(t){return!1===t.isLocked}))}},{key:"preConfigStart",value:function(t,e){var n=this;(void 0===e?Object(v.k)(this._reels.length):[].concat(e)).forEach((function(e){if(n._reels[e].isStarting)return console.error("Too late, reel ".concat(e," is starting so you can't change its config."));var r=n._reels[e].config;Number.isInteger(t.delay)&&(r.delay=t.delay),Number.isInteger(t.speed)&&(r.speed=t.speed),Number(t.easeStartOffset)===t.easeStartOffset&&(r.easeStartOffset=t.easeStartOffset),Number(t.easeStartSpeed)===t.easeStartSpeed&&(r.easeStartSpeed=t.easeStartSpeed),"boolean"==typeof t.autoExpandBuffer&&(r.autoExpandBuffer=t.autoExpandBuffer),Array.isArray(t.easeStartEasings)&&t.easeStartEasings.length>=1&&t.easeStartEasings.length<=2&&(r.easeStartEasings=t.easeStartEasings),n._addCustomPreconfigStartProps(t,r)}))}},{key:"preConfigStop",value:function(t,e){var n=this;(void 0===e?Object(v.k)(this._reels.length):[].concat(e)).forEach((function(e){if(n._reels[e].isStopping)return console.error("Too late, reel ".concat(e," is stopping so you can't change its config."));var r=n._reels[e].config;Number.isInteger(t.distance)&&(r.distance=t.distance),Number(t.easeEndOffset)===t.easeEndOffset&&(r.easeEndOffset=t.easeEndOffset),Number(t.easeEndSpeed)===t.easeEndSpeed&&(r.easeEndSpeed=t.easeEndSpeed),"boolean"==typeof t.autoStopInstantly&&(r.autoStopInstantly=t.autoStopInstantly),Array.isArray(t.easeEndEasings)&&2===t.easeEndEasings.length&&(r.easeEndEasings=t.easeEndEasings),n._addCustomPreconfigStopProps(t,r)}))}},{key:"startReel",value:function(t){++this.totalSpinningReels,!t.isLocked&&t.start()}},{key:"_onStart",value:(a=S(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.totalSpinningReels?console.error("Trying to spin again during spinning"):(this._reels.forEach((function(t){return e.startReel(t)})),this.isSpinning=!0);case 1:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"_onStop",value:(o=S(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){n._reels.forEach((function(r){if(r.isLocked){if(n._onReelSpinEnd({index:r.index,data:e[r.index]}),n.totalSpinningReels>0)return;t()}else r.once(g.a.events.ANIMATION_SPIN_END,(function(){n._onReelSpinEnd({index:r.index,data:e[r.index]}),n.totalSpinningReels>0||t()})),r.stop(e[r.index])}))})));case 1:case"end":return t.stop()}}),t)}))),function(t){return o.apply(this,arguments)})},{key:"lock",value:function(t){var e=this;t.forEach((function(t){var n=e.reels[t];n?n.lock():console.error("Invalid reel index to lock: ".concat(t,"!"))}))}},{key:"unlock",value:function(t){var e=this;t.forEach((function(t){var n=e.reels[t];n?n.unlock():console.error("Invalid reel index to unlock: ".concat(t,"!"))}))}},{key:"_onInstantStop",value:function(t){this._reels.forEach((function(e,n){e.isStopping&&e.stopInstant(t[n])}))}},{key:"_onReelSpinEnd",value:function(t){var e=t.index,n=t.data,r=y("id",this._renderers[e].getResultData()),i=n[1];Object(m.a)(i,r)||(this.mismatchedReels.push(C({},e,{screenTiles:r,serverTiles:i})),1===this.mismatchedReels.length&&b.a.emit(b.a.events.ERROR,{priority:"high",errorType:"malfunction",nonRecoverable:!0,details:{}})),this.totalSpinningReels-=1,0===this.totalSpinningReels&&(this.mismatchedReels.length&&(this.mismatchedReels.forEach((function(t){Object.entries(t).forEach((function(t){var e=T(t,2),n=e[0],r=e[1],i=r.screenTiles,o=r.serverTiles;console.warn("The visible tiles of reel #".concat(n," are not EQUAL to the expected server result.\n                Visible tiles: ").concat(i,",\n                Server tiles:  ").concat(o,",\n                This should be investigated!"))}))})),console.error("Reel mismatch has occured!")),this.mismatchedReels=[])}},{key:"_createReel",value:function(t,e,n){var r=new n({renderer:e,config:t.spin,tileHeight:e.tileHeight});this._reels.push(r),this._renderers.push(e),this._preConfigs.start[e.index]={},this._preConfigs.stop[e.index]={},this._addBlurListeners(r)}},{key:"_addBlurListeners",value:function(t){var e=this;t.on(g.a.events.ANIMATION_SPINNING,(function(){return e._renderers[t.index].enableBlur()})),t.on(g.a.events.ANIMATION_SPIN_ENDING,(function(){return e._renderers[t.index].disableBlur()}))}},{key:"_addCustomPreconfigStartProps",value:function(t,e){}},{key:"_addCustomPreconfigStopProps",value:function(t,e){}}],i=[{key:"events",get:function(){return k}}],r&&O(n.prototype,r),i&&O(n,i),e}(_.a)},"./src/core/features/reels/engines/ReelMaster.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var r=n("./node_modules/pixi.js/dist/esm/pixi.js"),i=n("./src/core/loader/index.js"),o=n("./src/core/utils/index.js"),a=n("./node_modules/ramda/es/flatten.js"),s=n("./src/core/features/reels/tiles/TileBuilder.js"),u=n("./src/core/features/reels/controllers/Controller.js"),c=n("./src/core/features/reels/animations/Animation.js"),l=n("./src/core/features/reels/renderers/Renderer.js"),h=n("./src/core/features/reels/buffers/Buffer.js");function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function v(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){m(o,r,i,a,s,"next",t)}function s(t){m(o,r,i,a,s,"throw",t)}a(void 0)}))}}function _(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e,n){return e=T(e),function(t,e){if(e&&("object"===f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],T(t).constructor):e.apply(t,n))}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var x=function(t){function e(t){var n,r,o=t.data,a=t.tiles,s=t.reelRenderer,u=t.controller,c=t.reelAnimation,l=t.reelBufferSource,h=t.tilesGeneratorSource,f=t.config,p=t.reelMasterAnim,d=void 0===p?i.a.ReelMaster.ReelMaster:p;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=E(this,e),f.tiles.buildTiles&&r._buildTiles({tiles:a,tilesConfig:f.tiles}),r._config=f,r._anim=new d,r._markers=r._anim.markers.children,r._tilesGenerator=new h,r._reels=r._createReels(r._markers,o,a,s,l,f),r._controller=new u({config:f,renderers:r._reels,animationSource:c}),r.mask=r.featuresMask,r.interactiveChildren=!1,(n=r).addChild.apply(n,_(r._reels).concat([r._anim])),r._bubbleEvents(),r}var n,r,f,p,y,m;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(e,t),n=e,r=[{key:"spin",get:function(){return this._controller}},{key:"tileGuide",get:function(){return s.a.guides[this._config.tiles.visible]}},{key:"featuresMask",get:function(){return this._anim.featuresMaskContainer.children[0]}},{key:"anim",get:function(){return this._anim}},{key:"reels",get:function(){return this._reels}},{key:"animations",get:function(){return this._controller.reels}},{key:"controller",get:function(){return this._controller}},{key:"preConfigs",get:function(){return this._controller.preConfigs}},{key:"tilesGenerator",get:function(){return this._tilesGenerator}},{key:"start",value:(m=v(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._controller.start();case 2:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"stop",value:(y=v(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._controller.stop(e);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return y.apply(this,arguments)})},{key:"stopInstant",value:(p=v(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._controller.stopInstant(e);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"onceReels",value:function(t,e,n,r){var i=this;if(e&&"function"==typeof e)if(r){var o=[].concat(r),a=n?this._controller.reels:this._reels;o.forEach((function(r){a[r].once(t,(function(t){var o=i._composePayload(a[r],n,t);e(o)}))}))}else this.onceAll(t,e,n);else console.error("Invalid event handler!")}},{key:"onceAll",value:function(t,e,n){var r=this;(n?this._controller.reels:this._reels).forEach((function(i){return i.once(t,(function(t){var o=r._composePayload(i,n,t);e(o)}))}))}},{key:"getReelConfig",value:function(t){return this._controller.getReelConfig(t)}},{key:"getReelBounds",value:function(t){return this._reels[t]?this._reels[t].getReelBounds():console.error("Invalid reel index ".concat(t," when getting reel bounds."))}},{key:"setTimeScale",value:function(t,e,n){this._controller.setTimeScale(t,e,n)}},{key:"resetTile",value:function(t,e){var n=this;Object(a.a)([].concat(e)).map((function(t){return n._reels[t]})).forEach((function(e){return e.resetTile(t)}))}},{key:"resetTiles",value:function(t){var e=this;t.map((function(t){return e._reels[t]})).forEach((function(t){return t.resetTiles()}))}},{key:"replaceTilesArea",value:function(t){var e=this,n=t.index,r=t.offset,i=t.width,a=t.height,s=t.id,u=t.force,c=void 0!==u&&u,l=Object(o.k)(i,(function(t){return t+n}));Object(o.k)(a,(function(t){return t+r})).forEach((function(t){return e.replaceTile(t,s,l,c)}))}},{key:"replaceTile",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=Object(a.a)([].concat(n)).map((function(t){return r._reels[t]}));o.forEach((function(n){return n.replaceTile(t,e,i)}))}},{key:"getTilePosition",value:function(t){var e=t.reel,n=t.index;return this._reels[e].getTileCellPosition(n)}},{key:"getTileCoords",value:function(t){var e=t.reel,n=t.index;return this._reels[e].getTileCoordinates(n)}},{key:"getTileData",value:function(t,e){if(!this._reels[t])throw new Error("there is no reel of index ".concat(t));return this._reels[t].getTileData(e)}},{key:"getResultData",value:function(t){return Number.isInteger(t)?this._reels[t]?this._reels[t].getResultData():console.error("Invalid reel index ".concat(t," when getting result data.")):this._reels.map((function(t){return t.getResultData()}))}},{key:"parseBuffer",value:function(t){return t}},{key:"preConfigStart",value:function(t,e){this._controller.preConfigStart(t,e)}},{key:"preConfigStop",value:function(t,e){this._controller.preConfigStop(t,e)}},{key:"enableBlur",value:function(t){var e=this;(void 0===t?Object(o.k)(this._reels.length):[].concat(t)).forEach((function(t){return e._reels[t].hasBlur&&e._reels[t].enableBlur()}))}},{key:"disableBlur",value:function(t){var e=this;(void 0===t?Object(o.k)(this._reels.length):[].concat(t)).forEach((function(t){return e._reels[t].hasBlur&&e._reels[t].disableBlur()}))}},{key:"_createReels",value:function(t,e,n,r,i,o){var a=this,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return t.map((function(t,u){return a._createReel(e[u],n,t,s+u,r,i,o)}))}},{key:"_createReel",value:function(t,e,n,r,i,o,a){var s=new i;return s.onCreated({data:t,tileTypes:e,marker:n,index:r,config:a,tileGuide:this.tileGuide,bufferSource:o,tilesGenerator:this._tilesGenerator}),s}},{key:"_buildTiles",value:function(t){var e=t.tiles,n=t.tilesConfig;s.a.build({tiles:e},n)}},{key:"_bubbleEvents",value:function(){var t=this;this._controller.reels.forEach((function(e){return t._bubbleAnimationEvents(e)})),this._reels.forEach((function(e){t._bubbleRendererEvents(e),t._bubbleBufferEvents(e.buffer)})),this._bubbleControllerEvents()}},{key:"_bubbleAnimationEvents",value:function(t){throw new Error('Subclass MUST override "_bubbleAnimationEvents(animation)" with its OWN custom logic!')}},{key:"_bubbleRendererEvents",value:function(t){throw new Error('Subclass MUST override "_bubbleRendererEvents(renderer)" with its OWN custom logic!')}},{key:"_bubbleControllerEvents",value:function(){throw new Error('Subclass MUST override "_bubbleControllerEvents()" with its OWN custom logic!')}},{key:"_bubbleBufferEvents",value:function(t){throw new Error('Subclass MUST override "_bubbleBufferEvents(buffer)" with its OWN custom logic!')}},{key:"_composePayload",value:function(t,e,n){var r=e?{animation:t}:{renderer:t,label:this._controller.reels[t.index].label};return d(d({reel:t,index:t.index},r),n)}}],f=[{key:"events",get:function(){return d(d(d(d({},c.a.events),l.a.events),u.a.events),h.a.events)}},{key:"labels",get:function(){return d({},c.a.labels)}}],r&&b(n.prototype,r),f&&b(n,f),e}(r.Container)},"./src/core/features/reels/engines/SpinningMegaWaysReelMaster.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return ct}));var r=n("./src/core/features/reels/engines/ReelMaster.js"),i=n("./src/core/features/reels/tiles/TileBuilder.js"),o=(n("./node_modules/pixi.js/dist/esm/pixi.js"),n("./src/core/features/reels/renderers/Renderer.js")),a=n("./src/core/features/reels/buffers/Buffer.js"),s=n("./node_modules/ramda/es/times.js"),u=n("./node_modules/ramda/es/always.js"),c=n("./node_modules/ramda/es/flatten.js");function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e=y(e),function(t,e){if(e&&("object"===l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],y(t).constructor):e.apply(t,n))}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){g(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var b=_({},a.a.events),E=function(t){function e(t){var n,r=t.bufferData,i=t.index,o=t.tilesGenerator,a=t.config;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=d(this,e)).index=i,n.currentPosition=null,n.targetPosition=null,n.distance=null,n.size=null,n._screens=null,n._config=a,n._guides=a.guides,n._minTileSize=a.minTileSize,n._maxTileSize=a.maxTileSize,n._tilesGenerator=o,n._sizesMap=a.sizes.reduce((function(t,e){return _(_({},t),{},g({},e,a.maxTileSize/e))}),{}),n.init(r),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return b}}],(r=[{key:"firstEntry",get:function(){return this._data[0]}},{key:"targetEntry",get:function(){return this._data[this.targetPosition]}},{key:"distanceToTarget",get:function(){var t=this,e=this._data.slice(this.targetPosition,this.currentPosition).reduce((function(e,n){var r=n.heightIndex;return e+t._sizesMap[r]}),0);return Math.round(e)}},{key:"init",value:function(t){var e=this._parseData({data:t,isReal:!0}),n=e.parsed,r=e.targetPosition;this.update(n,r,r)}},{key:"merge",value:function(t,e,n){var r=this._parseData({data:t,isReal:!0}),i=r.parsed,o=r.targetPosition,a=[].concat(h(i),h(this._generateRandom(n)));this.expandLeft(a.length,a),this.setTargetPosition(o),e&&this._resizeDistance(e,i.length,a.length)}},{key:"update",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this._data=t,this._screens=this._parseScreens(this._data),this.size=t.length,this.currentPosition=e,this.targetPosition=n,i&&this._clearCache(),this._updatePositions(r)}},{key:"expandLeft",value:function(t,e,n){var r=e||this._generateScreens(Math.ceil(t/this._maxTileSize));this._addEntries(0,r,n)}},{key:"fetchEntry",value:function(t){return this._data[t+this.currentPosition]}},{key:"changeEntry",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=void 0!==r?r:this._data[this.targetPosition+t].heightIndex;this._data[this.targetPosition+t]=_(_({},this._data[this.targetPosition+t]),{},n?{id:e,heightIndex:i,replaced:null}:{heightIndex:i,replaced:e})}},{key:"fetchResultScreen",value:function(){var t=this.targetEntry,e=this._data.slice(this.targetPosition,this.targetPosition+t.heightIndex),n=Object(s.a)((function(){return{id:Object(u.a)(0)(),heightIndex:t.heightIndex}}),this._maxTileSize-e.length);return[].concat(h(e),h(n))}},{key:"resetEntry",value:function(t){this.changeEntry(t,null)}},{key:"setCurrentPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.currentPosition=t,this._updatePositions(e)}},{key:"setTargetPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.targetPosition=t,this._updatePositions(e)}},{key:"setTargetValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._data[this.targetPosition+e].id=t}},{key:"cleanLeft",value:function(){this._data.splice(0,this.currentPosition),this.update(this._data,0,this.targetPosition-this.currentPosition)}},{key:"_addEntries",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._data.splice(t,0,e),this._data=Object(c.a)(this._data),this.update(this._data,this.currentPosition+e.length,n?this.targetPosition+e.length:this.targetPosition)}},{key:"_removeEntries",value:function(t,e){this._data.splice(e,t),this.update(this._data,this.currentPosition-t,this.targetPosition)}},{key:"_parseScreens",value:function(t){for(var e=[],n=0,r=0,i=0,o=0;o<t.length;o++)t[o+1]?(n++,i=t[o].heightIndex,t[o+1].heightIndex===i&&n!==i||(e.push({from:r,to:o}),r=o+1,n=0)):e.push({from:r,to:o});return e}},{key:"_resizeDistance",value:function(t,e,n){var r=this._getScreenForPosition(e),i=t-(this._getScreenForPosition(this.targetPosition)-r+1);i>0&&this._doResize(i*this._maxTileSize,n)}},{key:"_doResize",value:function(t,e){if(!Number.isInteger(t)||!Number.isInteger(e))return console.error("Wrong configuration =>","howMany:",t,", fromPos:",e);if(!(t<0)){var n=[],r=this._data.slice(e,this.currentPosition);if(r.length>0){var i=r[0].heightIndex;if(r.length>i){if(!t){var o=this.currentPosition;return this._removeEntries(o-e,e)}return this._doResize(t-this._maxTileSize,e+i)}r.length<i&&(n=[].concat(h(n),h(this._generateEntries(i-r.length,i)))),t-=this._maxTileSize}t>0&&(n=[].concat(h(n),h(this._generateRandom(t))).reverse()),this._addEntries(e,n)}}},{key:"_clearCache",value:function(){var t=this.size-(this.currentPosition+this._config.total);t>30&&(this._data.splice(30-t),this.update(this._data,this.currentPosition,this.targetPosition,!1,!1))}},{key:"_generateRandom",value:function(t){var e=Math.floor(t/this._maxTileSize),n=t%this._maxTileSize,r=this._generateScreens(e),i=this._generateEntries(n);return[].concat(h(r),h(i))}},{key:"_generateScreens",value:function(t){var e=this._tilesGenerator.generateRandomScreens({count:t,index:this.index,minTileSize:this._minTileSize,maxTileSize:this._maxTileSize});return this._parseData({data:e}).parsed}},{key:"_generateEntries",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._maxTileSize,n=this._tilesGenerator.generateRandomTiles({count:t,index:this.index});return n.map((function(t){return{id:t,heightIndex:e,replaced:null}}))}},{key:"_getScreenForPosition",value:function(t){return this._screens.findIndex((function(e){return t>=e.from&&t<=e.to}))}},{key:"_updatePositions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.distance=this.currentPosition-this.targetPosition,t||this.emit(e.events.BUFFER_UPDATED,{index:this.index})}},{key:"_parseData",value:function(t){var e=t.data,n=t.isReal,r=void 0!==n&&n,i="function"==typeof this._config.customParser?this._config.customParser:function(t){return t},o=this._calcTargetPosition({data:e,isReal:r}),a=[];return e.forEach((function(t){var e=t.filter(Boolean),n=e.length,r=e.map((function(t){return{id:t,heightIndex:n,replaced:null}}));a=a.concat(r)})),{targetPosition:o,parsed:i(a)}}},{key:"_calcTargetPosition",value:function(t){var e=t.data,n=t.isReal;return void 0!==n&&n?e[0].filter(Boolean).length:this.targetPosition}}])&&p(n.prototype,r),i&&p(n,i),e}(a.a),T=n("./src/core/features/reels/tiles/MegaWaysTile.js"),w=n("./src/core/utils/index.js"),x=n("./node_modules/ramda/es/internal/_curry2.js"),S=n("./node_modules/ramda/es/internal/_isString.js"),O=Object(x.a)((function(t,e){var n=t<0?e.length+t:t;return Object(S.a)(e)?e.charAt(n):e[n]})),P=O(0),R=O(-1),A=n("./node_modules/ramda/es/range.js"),I=n("./node_modules/ramda/es/isEmpty.js");function C(t){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function N(t,e,n){return e=M(e),function(t,e){if(e&&("object"===C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],M(t).constructor):e.apply(t,n))}function M(t){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){B(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function B(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var F=L(L({},o.a.events),{},{RENDERER_TILE_ENTERING:"renderer_tile_entering",RENDERER_TILE_LEAVING:"renderer_tile_leaving"}),U=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=N(this,e))._tiles={},t._tileGuides={},t._tileIndex=0,t._offset=0,t._marker=null,t._hasBlur=null,t._tileEntering=!1,t._tilesGenerator=null,t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return F}}],(r=[{key:"guides",get:function(){return this._tileGuides}},{key:"offset",get:function(){return parseFloat(this._offset.toFixed(7))}},{key:"offsetInTiles",get:function(){return this.offset/this.minTileHeight}},{key:"minTileSize",get:function(){return P(this._config.tiles.sizes)}},{key:"maxTileSize",get:function(){return R(this._config.tiles.sizes)}},{key:"minTileHeight",get:function(){return this.guides[this.maxTileSize]}},{key:"currentSize",get:function(){return this._buffer.targetEntry.heightIndex}},{key:"onCreated",value:function(t){var e=t.data,n=t.tileTypes,r=t.marker,i=t.tileGuide,o=t.index,a=t.config,s=t.bufferSource,u=void 0===s?E:s,c=t.tilesGenerator,l=r.children[0],h=l.getBounds();a.useOwnMask?this.mask=l:l.alpha=0,this._marker=r,this._index=o,this._tilesGenerator=c,this.position.set(r.x,r.y);var f=this._createTilesConfig({tileTypes:n,config:a,bounds:h});this._config=Object(w.c)(a,{tiles:f,index:o},{bounds:h}),this._hasBlur=this._config.tiles.blur.enabled,this._tiles=this._createTiles(this._config.tiles),this._tileGuides=this._createGuides(a.tiles.sizes,i),this._buffer=this._createBuffer(u,{bufferData:e,index:o}),this._setSpinnableTiles(o),this._onBufferUpdate(),this.updateTiles(),this._draw(),this._buffer.on(u.events.BUFFER_UPDATED,this._onBufferUpdate,this)}},{key:"getTileCellPosition",value:function(t){return{x:this._marker.x+this._tiles[t].x,y:this._marker.y+t*this.guides[this.currentSize]}}},{key:"getTileCoordinates",value:function(t){var e=this.toGlobal(this.tiles[t].position);return this.parent.parent.toLocal(L({},e))}},{key:"moveTo",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._calculateMoveData(this._offset+t,this._tileIndex,this._buffer.data),i=r.offset,o=r.index;this._update(i,o,n),this._draw(),this.emit(e.events.RENDERER_MOVE,{index:this._index,delta:t}),this._tileEntering&&this._emitTileEvents(),this._tileEntering=!1}},{key:"updateTiles",value:function(){var t=this;Object.keys(this._tiles).forEach((function(e){return t.updateTile(parseInt(e))}))}},{key:"updateTile",value:function(t){if(!this._tiles[t])return console.warn("Sorry, but there is no tile with index "+t+" in my world!");var e=this._tiles[t],n=this.getTileData(t),r=n.id,i=n.replaced,o=n.heightIndex;e.to({id:r,replaced:i},this.blur?"blurred":"normal","",o)}},{key:"getTileData",value:function(t){return this._buffer.data[Object(w.f)(this._tileIndex+t,this._buffer.size)]}},{key:"enableBlur",value:function(){this._hasBlur&&(this.blur=!0),this.updateTiles()}},{key:"disableBlur",value:function(){this._hasBlur&&(this.blur=!1),this.updateTiles()}},{key:"replaceTile",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.currentSize;this._buffer.changeEntry(t,e,n,r),this.updateTiles(),this._draw()}},{key:"reset",value:function(){this._update(0,this._buffer.targetPosition,!0),this._draw()}},{key:"_createGuides",value:function(t,e){return t.reduce((function(t,n){return L(L({},t),{},B({},n,e[n].height))}),{})}},{key:"_onBufferUpdate",value:function(){this._tileIndex=this._buffer.currentPosition,this.emit(e.events.RENDERER_UPDATED,{offset:this._config.spin.speed})}},{key:"_update",value:function(t,e,n){this._offset=t,e!==this._tileIndex&&(this._tileIndex=e,this._buffer.setCurrentPosition(e,!0),this.updateTiles(),n||(this._tileEntering=!0))}},{key:"_draw",value:function(){var t=this;Object.keys(this._tiles).forEach((function(e){var n=parseInt(e),r=t._tiles[n];r.y=0===n?0:n<0?-t._tileGuides[r.heightIndex]:t._tiles[n-1].y+t._tileGuides[t._tiles[n-1].heightIndex]})),this.y=this._offset+this._marker.y,this.emit(e.events.RENDERER_DRAW,{index:this._index})}},{key:"_createTilesConfig",value:function(t){var e=t.tileTypes,n=t.config;return{bounds:t.bounds,ids:e.map((function(t){return t.id})).concat(0),sizes:n.tiles.sizes||[n.tiles.visible],spinnable:e.filter((function(t){return"normal"===t.type})).map((function(t){return t.id}))}}},{key:"_createTiles",value:function(t){var e=this,n=t.offsetTop,r=t.offsetBottom,i=t.visible;return Object(A.a)(-n,i+r).reduce((function(t,n){return L(L({},t),{},B({},n,e._createTile(n)))}),{})}},{key:"_createTile",value:function(t){var e=new T.a;return e.index=t,this.addChild(e),e}},{key:"_setSpinnableTiles",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._config.tiles;this._tilesGenerator.setSpinnableTiles({index:t,tiles:e.spinnable,cache:!0}),Object(I.a)(e.stacked)||this._tilesGenerator.enableStack({index:t,stacked:e.stacked})}},{key:"_createBuffer",value:function(t,e){return new t({bufferData:e.bufferData,index:e.index,tilesGenerator:this._tilesGenerator,config:this._createBufferConfig()})}},{key:"_createBufferConfig",value:function(){return L(L({},this._config.tiles),{},{guides:this.guides,minTileSize:this.minTileSize,maxTileSize:this.maxTileSize})}},{key:"_calculateMoveData",value:function(t,e,n){var r=e-1>=0?e-1:n.length-1,i=this._tileGuides[n[r].heightIndex];return t<=i?{index:e,offset:t}:this._calculateMoveData(t-i,r,n)}},{key:"_emitTileEvents",value:function(){this.emit(e.events.RENDERER_TILE_ENTERING,{tile:this.getTileData(0),tileIndex:this._tileIndex}),this.emit(e.events.RENDERER_TILE_LEAVING,{tile:this.getTileData(this._config.tiles.visible)})}}])&&k(n.prototype,r),i&&k(n,i),e}(o.a),G=n("./src/core/features/reels/controllers/SpinningController.js"),H=n("./src/core/features/reels/animations/SpinningMegaWaysAnimation.js");function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Y(t,e,n){return e=z(e),function(t,e){if(e&&("object"===V(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],z(t).constructor):e.apply(t,n))}function z(t){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function q(t,e){return(q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(Object(n),!0).forEach((function(e){Z(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},G.a.events),J=function(t){function e(){return X(this,e),Y(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return $}}],(r=[{key:"_addBlurListeners",value:function(t){var e=this;t.on(H.a.events.ANIMATION_SPINNING,(function(){return e._renderers[t.index].enableBlur()})),t.on(H.a.events.ANIMATION_SPIN_ENDING,(function(){return e._renderers[t.index].disableBlur()}))}},{key:"_addCustomPreconfigStopProps",value:function(t,e){Number.isInteger(t.extraDistance)&&(e.extraDistance=t.extraDistance)}}])&&W(n.prototype,r),i&&W(n,i),e}(G.a),Q=n("./src/core/features/reels/TilesGenerator.js"),tt=n("./node_modules/ramda/es/mergeDeepLeft.js");function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(n),!0).forEach((function(e){it(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function it(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function at(t,e,n){return e=st(e),function(t,e){if(e&&("object"===et(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],st(t).constructor):e.apply(t,n))}function st(t){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ct=function(t){function e(t){var n=t.reelsBuffer,r=t.tiles,i=t.reelMasterAnim,o=t.reelRenderer,a=void 0===o?U:o,s=t.controller,u=void 0===s?J:s,c=t.reelAnimation,l=void 0===c?H.a:c,h=t.reelBufferSource,f=void 0===h?E:h,p=t.tilesGeneratorSource,d=void 0===p?Q.a:p,y=t.config;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),at(this,e,[{data:n,tiles:r,reelMasterAnim:i,reelRenderer:a,controller:u,reelAnimation:l,reelBufferSource:f,tilesGeneratorSource:d,config:y}])}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(e,t),n=e,o=[{key:"events",get:function(){return rt(rt(rt(rt({},H.a.events),U.events),J.events),E.events)}},{key:"labels",get:function(){return rt({},H.a.labels)}}],(r=[{key:"tileGuide",get:function(){return i.a.guides}},{key:"getCurrentPosition",value:function(t){return this._reels[t]?this._reels[t].buffer.currentPosition:console.error("Invalid reel index ".concat(t," when getting buffer's current positions."))}},{key:"getTargetPosition",value:function(t){return this._reels[t]?this._reels[t].buffer.targetPosition:console.error("Invalid reel index ".concat(t," when getting buffer's target positions."))}},{key:"replaceTile",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,a=Object(c.a)([].concat(n)).map((function(t){return r._reels[t]}));a.forEach((function(n){return n.replaceTile(t,e,i,o)}))}},{key:"_bubbleAnimationEvents",value:function(t){var e=this,n=Object(tt.a)(t.constructor.events,H.a.events);Object.keys(n).forEach((function(r){t.on(n[r],(function(i){return e.emit(n[r],rt(rt({},i),{},{animation:t,index:t.index}))}))}))}},{key:"_bubbleRendererEvents",value:function(t){var e=this,n=Object(tt.a)(t.constructor.events,U.events);Object.keys(n).forEach((function(r){var i={};t.on(n[r],(function(o){[n.RENDERER_TILE_ENTERING,n.RENDERER_TILE_LEAVING].includes(n[r])&&(i.label=e._controller.reels[t.index].label),e.emit(n[r],rt(rt({renderer:t,index:t.index},o),i))}))}))}},{key:"_bubbleControllerEvents",value:function(){var t=this,e=Object(tt.a)(this._controller.constructor.events,J.events);Object.keys(e).forEach((function(n){t._controller.on(e[n],(function(r){return t.emit(e[n],rt({},r))}))}))}},{key:"_bubbleBufferEvents",value:function(t){var e=this,n=Object(tt.a)(t.constructor.events,E.events);Object.keys(n).forEach((function(r){t.on(n[r],(function(i){e.emit(n[r],rt({buffer:t,index:t.index},i))}))}))}}])&&ot(n.prototype,r),o&&ot(n,o),e}(r.a)},"./src/core/features/reels/renderers/Renderer.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("./node_modules/pixi.js/dist/esm/pixi.js");function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e=s(e),function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],s(t).constructor):e.apply(t,n))}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c={RENDERER_MOVE:"renderer_move",RENDERER_DRAW:"renderer_draw",RENDERER_UPDATED:"renderer_updated"},l=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=a(this,e))._index=null,t._config=null,t._buffer=null,t._hasBlur=!1,t._tiles={},t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return c}}],(r=[{key:"index",get:function(){return this._index}},{key:"buffer",get:function(){return this._buffer}},{key:"tiles",get:function(){return this._tiles}},{key:"config",get:function(){return this._config}},{key:"hasBlur",get:function(){return this._hasBlur}},{key:"onCreated",value:function(t){throw new Error('Subclass MUST override "onCreated(settings)" with its OWN custom logic!')}},{key:"getTileCellPosition",value:function(t){throw new Error('Subclass MUST override "getTileCellPosition(index)" with its OWN custom logic!')}},{key:"getTileCoordinates",value:function(t){throw new Error('Subclass MUST override "getTileCoordinates(index)" with its OWN custom logic!')}},{key:"getTileData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._buffer.fetchEntry(t)}},{key:"getResultData",value:function(){return this._buffer.fetchResultScreen()}},{key:"replaceTile",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._buffer.changeEntry(t,e,n),this.updateTiles()}},{key:"resetTile",value:function(t){this._buffer.resetEntry(t),this.updateTiles()}},{key:"resetTiles",value:function(){var t=this;Object.keys(this._tiles).forEach((function(e){return t.resetTile(e)}))}},{key:"enableBlur",value:function(){if(!this._hasBlur)return console.warn("The active renderer ".concat(this.index," does not support blur."))}},{key:"disableBlur",value:function(){if(!this._hasBlur)return console.warn("The active renderer ".concat(this.index," does not support blur."))}},{key:"getReelBounds",value:function(){return this._config.bounds}}])&&o(n.prototype,r),i&&o(n,i),e}(r.Container)},"./src/core/features/reels/tiles/MegaWaysTile.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("./src/core/features/reels/tiles/Tile.js"),i=n("./src/core/features/reels/tiles/TileBuilder.js");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e=u(e),function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],u(t).constructor):e.apply(t,n))}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=s(this,e,[t]))._heightIndex=null,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(r=[{key:"heightIndex",get:function(){return this._heightIndex}},{key:"fetchTileTexture",value:function(t,e,n,r){return this._heightIndex=r,i.a.tiles[t][r][e]}}])&&a(n.prototype,r),o&&a(n,o),e}(r.a)},"./src/core/features/reels/tiles/Tile.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("./node_modules/pixi.js/dist/esm/pixi.js"),i=n("./src/core/features/reels/tiles/TileBuilder.js");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e=c(e),function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],c(t).constructor):e.apply(t,n))}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Texture.EMPTY;return a(this,e),(t=u(this,e,[n])).index=null,t._id=null,t}var n,o,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,t),n=e,(o=[{key:"id",get:function(){return this._id}},{key:"to",value:function(t,e,n,r){var i=t.id,o=t.replaced,a=Number.isInteger(o)?o:i,s=this.fetchTileTexture(a,e,n,r),u=s.texture,c=s.pivot;this._id=a,this.texture=u,this.pivot.set(-c.x,-c.y)}},{key:"fetchTileTexture",value:function(t,e,n,r){return i.a.tiles[t][e]}}])&&s(n.prototype,o),c&&s(n,c),e}(r.Sprite)},"./src/core/features/reels/tiles/TileBuilder.js":function(t,e,n){"use strict";var r=n("./src/core/loader/index.js"),i=n("./node_modules/pixi.js/dist/esm/pixi.js"),o=n("./src/core/utils/Cache.js"),a=n("./node_modules/@pixi/core/dist/esm/core.js"),s=n("./node_modules/@pixi/math/dist/esm/math.js"),u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var c=function(t){function e(e,n,r){void 0===e&&(e=4),void 0===n&&(n=3),void 0===r&&(r=!1);var i=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",r?"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}\n":"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}")||this;return i._kernels=[],i._blur=4,i._quality=3,i.uniforms.uOffset=new Float32Array(2),i._pixelSize=new s.g,i.pixelSize=1,i._clamp=r,Array.isArray(e)?i.kernels=e:(i._blur=e,i.quality=n),i}return function(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.apply=function(t,e,n,r){var i,o=this._pixelSize.x/e._frame.width,a=this._pixelSize.y/e._frame.height;if(1===this._quality||0===this._blur)i=this._kernels[0]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*a,t.applyFilter(this,e,n,r);else{for(var s=t.getFilterTexture(),u=e,c=s,l=void 0,h=this._quality-1,f=0;f<h;f++)i=this._kernels[f]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*a,t.applyFilter(this,u,c,1),l=u,u=c,c=l;i=this._kernels[h]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*a,t.applyFilter(this,u,n,r),t.returnFilterTexture(s)}},e.prototype._updatePadding=function(){this.padding=Math.ceil(this._kernels.reduce((function(t,e){return t+e+.5}),0))},e.prototype._generateKernels=function(){var t=this._blur,e=this._quality,n=[t];if(t>0)for(var r=t,i=t/e,o=1;o<e;o++)r-=i,n.push(r);this._kernels=n,this._updatePadding()},Object.defineProperty(e.prototype,"kernels",{get:function(){return this._kernels},set:function(t){Array.isArray(t)&&t.length>0?(this._kernels=t,this._quality=t.length,this._blur=Math.max.apply(Math,t)):(this._kernels=[0],this._quality=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clamp",{get:function(){return this._clamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pixelSize",{get:function(){return this._pixelSize},set:function(t){"number"==typeof t?(this._pixelSize.x=t,this._pixelSize.y=t):Array.isArray(t)?(this._pixelSize.x=t[0],this._pixelSize.y=t[1]):t instanceof s.g?(this._pixelSize.x=t.x,this._pixelSize.y=t.y):(this._pixelSize.x=1,this._pixelSize.y=1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=Math.max(1,Math.round(t)),this._generateKernels()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blur",{get:function(){return this._blur},set:function(t){this._blur=t,this._generateKernels()},enumerable:!1,configurable:!0}),e}(a.u);function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e=y(e),function(t,e){if(e&&("object"===h(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],y(t).constructor):e.apply(t,n))}function y(t){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=function(t){function e(){return f(this,e),d(this,e,arguments)}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(e,t),n=e,(r=[{key:"apply",value:function(t){var e=this._cfg,n=e.x,r=e.y,o=e.quality,a={x:n>0?o/n:0,y:r>0?o/r:0},s=t.filters||[],u=new c(r,o);u.pixelSize=[a.x,a.y];var l=t.width,h=t.height,f=t.pivot,p=n*o*a.x*2,d=r*o*a.y*2,y=l+p,m=h+d;return f.x-=p/2,f.y-=d/2,t.filters=s.concat(u),t.filterArea=new i.Rectangle(0,0,y,m),t}},{key:"generateTexture",value:function(t){var e=this.apply(t),n=e.filterArea,r=e.pivot,i=n.width,a=n.height;return{blurredTexture:Object(o.f)(e,i,a),blurPivot:r}}}])&&p(n.prototype,r),a&&p(n,a),e}(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cfg=e}var e,n,r;return e=t,(n=[{key:"apply",value:function(t){if(!t.children||0===t.children.length)return t;var e=t.children.reduce((function(t,e){return{x:Math.min(t.x,e.x),y:Math.min(t.y,e.y)}}),{x:1/0,y:1/0});return t.pivot.x=e.x,t.pivot.y=e.y,t}},{key:"generateTexture",value:function(){console.warn("generateTexture is not implemented")}},{key:"generateSpritesheet",value:function(){console.warn("generateSpritesheet is not implemented")}}])&&l(e.prototype,n),r&&l(e,r),t}());function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var T=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._tiles={},this._guides={}}var e,n,a;return e=t,(n=[{key:"guides",get:function(){return this._guides}},{key:"tiles",get:function(){return this._tiles}},{key:"build",value:function(t,e){var n=this,r=t.tiles,i=r.map((function(t){return t.id})).concat(0);if(e.sizes&&e.sizes.length>1)this.buildMegaWays({tiles:r},e);else{var o=e.visible,a=e.blur,s=e.tilesAnimSource;this._tiles=i.reduce((function(t,e){return g(g({},t),{},b({},e,n._create({id:e,size:o,blur:a},s)))}),{})}}},{key:"buildMegaWays",value:function(t,e){var n=this,r=t.tiles.map((function(t){return t.id})).concat(0),i=e.sizes,o=e.blur,a=e.tilesAnimSource,s=e.ignoreSizes,u=void 0===s?{}:s;this._tiles=r.reduce((function(t,e){return g(g({},t),{},b({},e,n._createForSizes({id:e,sizes:i,blur:o,ignoreSizes:u},a)))}),{})}},{key:"_create",value:function(t){var e,n=t.id,i=t.size,a=t.blur,s=t.ignoreSizes,u=void 0===s?{}:s,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Tiles";if(!r.a[c])throw new Error("No tiles source with name '".concat(c,"' found!"));if(null!==(e=u[n])&&void 0!==e&&e.includes(i))return this._createEmpty(a.enabled);var l=r.a[c]["tile".concat(n,"x").concat(i)]?"tile".concat(n,"x").concat(i):"tile".concat(n),h=r.a[c]["tileGuidex".concat(i)]?"tileGuidex".concat(i):"tileGuide";if(this._guides=g(g({},this._guides),{},b({},i,new r.a[c][h])),!r.a[c][l])return 0!==n&&console.warn("there is no movie clip for tile",l),this._createEmpty(a.enabled);var f=new r.a[c][l],p=this._prepare(f),d={normal:{texture:Object(o.f)(p),pivot:p.pivot.clone()}};if(a.enabled){var y=new v(a[n]||a.default),m=y.generateTexture(p),_=m.blurredTexture,E=m.blurPivot;d=g(g({},d),{},{blurred:{texture:_,pivot:E}})}return d}},{key:"_createForSizes",value:function(t,e){var n=this,r=t.id,i=t.sizes,o=t.blur,a=t.ignoreSizes;return i.reduce((function(t,i){return g(g({},t),{},b({},i,n._create({id:r,size:i,blur:o,ignoreSizes:a},e)))}),{})}},{key:"_prepare",value:function(t){var e=t.children;if(!e||!e.length)return t;var n=e.some((function(t){return t.isMask})),r=e.reduce((function(t,e){if(n){if(e.isMask){var r=e.getLocalBounds();return{x:Math.min(t.x,r.x),y:Math.min(t.y,r.y)}}return t}return{x:Math.min(t.x,e.x),y:Math.min(t.y,e.y)}}),{x:1/0,y:1/0});return t.pivot.set(r.x,r.y),t}},{key:"_createEmpty",value:function(t){var e={normal:{texture:i.Texture.EMPTY,pivot:{x:0,y:0}}};return t&&(e=g(g({},e),{},{blurred:{texture:i.Texture.EMPTY,pivot:{x:0,y:0}}})),e}}])&&E(e.prototype,n),a&&E(e,a),t}();e.a=new T},"./src/core/features/sound/SoundRouter.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return ct}));var r=n("./src/core/loader/AssetCache.js"),i=n("./node_modules/ramda/es/isNil.js"),o=n("./node_modules/howler/dist/howler.js"),a=n("./node_modules/@games/gsap/all.js"),s="soundConfig.js",u={fsLoop:.38,fsPreloaderLoop:.41,freeSpinsStart:.78,backgrLoop:.25,reelStop:.53,cascade:.45,reelSpinMechLoop:1.1,winSmall:.6,winNormal:.75,bangupLoop:.94,tileSelect:.82,fsPreloaderFx:.57,totalWin:.7,fsHit1:.8,fsHit2:.8,fsHit3:.9,fsHit4:.8,anticipation:.71,wildHit1:.6,wildHit2:.6,wildHit3:.6,wildHit4:.6,fairyHit1:.48,fairyHit2:.55,fairyHit3:.97,fairyHit4:.51,fairyHit5:.58,fairyHit6:.66,beerHit1:.53,beerHit2:.73,beerHit3:1.63,beerHit4:.6,beerLoopBangup:.4,beerFillLoop:1,beerLoop:.55,beerLoopEnd:.8,selectTap:1.45,beerHover:.75,multiplierSplash:.71,multiplier:.53,reelSpinLoop:.2,bigWinEnd:.75,bigWinLoop:.75,bigWinStart:.75,megaWinEnd:.8,megaWinLoop:.8,megaWinStart:.8,superWinEnd:.7,superWinLoop:.7,superWinStart:.7,totalWinSmall:.67,hatHit1:.7,hatHit10:.7,hatHit11:.7,hatHit12:.7,hatHit2:.7,hatHit3:.7,hatHit4:.7,hatHit5:.7,hatHit6:.7,hatHit7:.7,hatHit8:.7,hatHit9:.7,horseshoeHit1:1,horseshoeHit10:1,horseshoeHit11:1,horseshoeHit12:1,horseshoeHit2:1,horseshoeHit3:1,horseshoeHit4:1,horseshoeHit5:1,horseshoeHit6:1,horseshoeHit7:1,horseshoeHit8:1,horseshoeHit9:1,wildHit10:.6,wildHit11:.6,wildHit12:.6,wildHit5:.6,wildHit6:.6,wildHit7:.6,wildHit8:.6,wildHit9:.6,fairyHover:.8,fairyLoop:.5,cloverHit1:1.01,cloverHit10:1.01,cloverHit11:1.01,cloverHit12:1.01,cloverHit2:1.01,cloverHit3:1.01,cloverHit4:1.01,cloverHit5:1.01,cloverHit6:1.01,cloverHit7:1.01,cloverHit8:1.01,cloverHit9:1.01,fsParticleBurst:.73,fsPass:.76,rainingTile1:.09,rainingTile2:.09,rainingTile3:.09,rainingTile4:.09,rainingTile5:.11,rainingTile6:.11,rainingTile7:.05,leprechaunLoop:.74,spinStart:.18,pickEnd:.53,pickStart:.76,beerPreloaderLoop:1,introEnterGame:1,leprichaunBlowLong:1,leprichaunBlowShort:1,leprichaunHide:1,leprichaunPopup:1,fsInFs:1,jackSiren:1,jpHit1:1,jpHit2:1,jpHit3:1,jpSpawn1:1,jpSpawn2:1,jpSpawn3:1,payTablePages:1,playButton:1,fsTilesFrame:1,beerPopupLabel:1,glassAdd:1,beerWin:1,chanceActivatorHat:1,fairyMagicFx:1,fairyPopUp:1,fairyWin:1,gemRevealFx:1,fairyClick:.67},c={name:"mainGain",value:1},l={channels:[{effects:[{name:"CompressorEffect",properties:{threshold:-4,knee:38,attack:.30000001192092896,release:1,ratio:12}}]},{effects:[{name:"CompressorEffect",properties:{threshold:-4,knee:38,attack:.30000001192092896,release:1,ratio:12}}]},{effects:[]},{effects:[]},{effects:[]},{effects:[]},{effects:[]},{effects:[]},{effects:[]},{effects:[]}],soundNameToChannelIndex:{anticipation:"1",backgrLoop:"1",bangupLoop:0,bigWinEnd:"1",bigWinLoop:"1",bigWinStart:"0",freeSpinsStart:0,fsHit1:0,fsHit2:0,fsHit3:0,fsInFs:0,fsLoop:0,fsPreloaderLoop:"1",introEnterGame:"1",jackSiren:0,jpHit1:0,jpHit2:0,jpHit3:0,jpSpawn1:0,jpSpawn2:0,jpSpawn3:0,megaWinEnd:"1",megaWinLoop:"1",megaWinStart:"1",payTablePages:0,playButton:0,reelSpinLoop:"1",reelSpinMechLoop:"1",reelStop:0,respinLoop:0,superWinEnd:"1",superWinLoop:"1",superWinStart:"1",totalWin:"1",winLines:0,winNormal:0,winSmall:0,cascade:0,tileSelect:0,fsPreloaderFx:0,fsHit4:0,totalWinSmall:0,beerHit1:0,beerHit2:0,beerHit3:0,beerHit4:0,fairyHit1:0,fairyHit2:0,fairyHit3:0,fairyHit4:0,fairyHit5:0,fairyHit6:0,fsParticleBurst:0,fsPass:0,fsTilesFrame:0,wildHit1:0,wildHit2:0,wildHit3:0,wildHit4:0,beerFillLoop:0,beerLoop:"1",beerLoopBangup:0,beerLoopEnd:0,beerPopupLabel:0,beerPreloaderLoop:"1",cloverHit1:0,cloverHit10:0,cloverHit11:0,cloverHit12:0,cloverHit2:0,cloverHit3:0,cloverHit4:0,cloverHit5:0,cloverHit6:0,cloverHit7:0,cloverHit8:0,cloverHit9:0,fairyHover:0,fairyLoop:"1",hatHit1:0,hatHit10:0,hatHit11:0,hatHit12:0,hatHit2:0,hatHit3:0,hatHit4:0,hatHit5:0,hatHit6:0,hatHit7:0,hatHit8:0,hatHit9:0,horseshoeHit1:0,horseshoeHit10:0,horseshoeHit11:0,horseshoeHit12:0,horseshoeHit2:0,horseshoeHit3:0,horseshoeHit4:0,horseshoeHit5:0,horseshoeHit6:0,horseshoeHit7:0,horseshoeHit8:0,horseshoeHit9:0,wildHit10:0,wildHit11:0,wildHit12:0,wildHit5:0,wildHit6:0,wildHit7:0,wildHit8:0,wildHit9:0,glassAdd:0,selectTap:0,beerHover:0,beerWin:0,multiplier:0,multiplierSplash:0,chanceActivatorHat:0,fairyMagicFx:0,fairyPopUp:0,fairySumCollision:0,fairySumShow:0,fairyWin:0,gemRevealFx:0,leprechaunLoop:"1",leprichaunBlowLong:"1",leprichaunBlowShort:"1",leprichaunHide:"1",leprichaunPopup:"1",pickEnd:0,pickStart:0,rainingTile1:0,rainingTile2:0,rainingTile3:0,rainingTile4:0,rainingTile5:0,rainingTile6:0,rainingTile7:0,spinStart:0,fairyClick:0}};function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(){h(this,t),this.inputNode=null,this.outputNode=null}var e,n,r;return e=t,(n=[{key:"mixerData",get:function(){throw new new Error("Subclass MUST override mixerData getter")}},{key:"mixerConfig",get:function(){var t=this;return{name:this.mixerData.name,properties:Object.fromEntries(this.mixerData.properties.map((function(e){var n=e.name;return[n,t[n]]})))}}},{key:"context",get:function(){return o.Howler.ctx}}])&&f(e.prototype,n),r&&f(e,r),t}();function d(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v=function(){function t(e){var n=e.context,r=e.index;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.context=n,this.node=this.context.createGain(),this.index=r,this._connectedTo=null,this._effects=[]}var e,n,r;return e=t,(n=[{key:"mixerConfig",get:function(){return{effects:this._effects.map((function(t){return t.mixerConfig}))}}},{key:"gain",get:function(){return this.node.gain.value},set:function(t){isNaN(t)||this.node.gain.setValueAtTime(t,this.context.currentTime)}},{key:"connect",value:function(t){this._connectedTo=t,this._updateConnections()}},{key:"addEffect",value:function(t){this._effects.push(t),this._updateConnections()}},{key:"removeEffect",value:function(t){t.outputNode.disconnect(),this._effects=this._effects.filter((function(e){return e!=t})),this._updateConnections()}},{key:"_updateConnections",value:function(){this.node.disconnect();var t,e=d(this._effects);try{for(e.s();!(t=e.n()).done;)t.value.outputNode.disconnect()}catch(t){e.e(t)}finally{e.f()}if(this._effects.length>0){this.node.connect(this._effects[0].inputNode);for(var n=0;n<this._effects.length-1;n++)this._effects[n].outputNode.connect(this._effects[n+1].inputNode);this._effects[this._effects.length-1].outputNode.connect(this._connectedTo)}else this.node.connect(this._connectedTo)}}])&&m(e.prototype,n),r&&m(e,r),t}();function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e,n){return e=T(e),function(t,e){if(e&&("object"===_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],T(t).constructor):e.apply(t,n))}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var x={name:"CompressorEffect",properties:[{name:"threshold",min:-100,max:100},{name:"knee",min:-100,max:100},{name:"attack",min:0,max:2},{name:"release",min:0,max:2},{name:"ratio",min:0,max:100}]},S=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g(this,e),(t=E(this,e,[n])).inputNode=t.context.createDynamicsCompressor(),t.outputNode=t.context.createGain(),t.inputNode.connect(t.outputNode);var r=n.threshold,i=void 0===r?-24:r,o=n.knee,a=void 0===o?30:o,s=n.attack,u=void 0===s?.003:s,c=n.release,l=void 0===c?.25:c,h=n.ratio,f=void 0===h?12:h;return t.threshold=i,t.knee=a,t.attack=u,t.release=l,t.ratio=f,t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(e,t),n=e,(r=[{key:"mixerData",get:function(){return x}},{key:"threshold",get:function(){return this.inputNode.threshold.value},set:function(t){this.inputNode.threshold.value=t}},{key:"knee",get:function(){return this.inputNode.knee.value},set:function(t){this.inputNode.knee.value=t}},{key:"attack",get:function(){return this.inputNode.attack.value},set:function(t){this.inputNode.attack.value=t}},{key:"release",get:function(){return this.inputNode.release.value},set:function(t){this.inputNode.release.value=t}},{key:"ratio",get:function(){return this.inputNode.ratio.value},set:function(t){this.inputNode.ratio.value=t}}])&&b(n.prototype,r),i&&b(n,i),e}(p);function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e,n){return e=I(e),function(t,e){if(e&&("object"===O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],I(t).constructor):e.apply(t,n))}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function C(t,e){return(C=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var k={name:"EchoEffect",properties:[{name:"dry",min:0,max:1},{name:"wet",min:0,max:1},{name:"time",min:0,max:5},{name:"feedback",min:0,max:1}]},N=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};P(this,e),(t=A(this,e,[n])).inputNode=t.context.createGain(),t.outputNode=t.context.createGain(),t.dryGainNode=t.context.createGain(),t.wetGainNode=t.context.createGain(),t.feedbackGainNode=t.context.createGain(),t.delayNode=t.context.createDelay(),t.inputNode.connect(t.dryGainNode),t.dryGainNode.connect(t.outputNode),t.delayNode.connect(t.feedbackGainNode),t.feedbackGainNode.connect(t.delayNode),t.inputNode.connect(t.delayNode),t.delayNode.connect(t.wetGainNode),t.wetGainNode.connect(t.outputNode);var r=n.dry,i=void 0===r?.7:r,o=n.wet,a=void 0===o?.3:o,s=n.time,u=void 0===s?.5:s,c=n.feedback,l=void 0===c?.3:c;return t.dry=i,t.wet=a,t.time=u,t.feedback=l,t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&C(t,e)}(e,t),n=e,(r=[{key:"mixerData",get:function(){return k}},{key:"dry",get:function(){return this.dryGainNode.gain.value},set:function(t){this.dryGainNode.gain.value=t}},{key:"wet",get:function(){return this.wetGainNode.gain.value},set:function(t){this.wetGainNode.gain.value=t}},{key:"time",get:function(){return this._time},set:function(t){this._time=t,this.delayNode.delayTime.value=t}},{key:"feedback",get:function(){return this._feedback},set:function(t){this._feedback=t,this.feedbackGainNode.gain.value=t}}])&&R(n.prototype,r),i&&R(n,i),e}(p),M=n("./src/core/utils/index.js");function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function B(t,e,n){return e=F(e),function(t,e){if(e&&("object"===j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],F(t).constructor):e.apply(t,n))}function F(t){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function U(t,e){return(U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var G={name:"ReverbEffect",properties:[{name:"dry",min:0,max:1},{name:"wet",min:0,max:1},{name:"duration",min:0,max:10},{name:"decay",min:.1,max:5}]},H=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};D(this,e),t=B(this,e,[n]);var r=n.dry,i=void 0===r?.7:r,o=n.wet,a=void 0===o?.3:o,s=n.duration,u=void 0===s?1:s,c=n.decay,l=void 0===c?2:c;return t._duration=u,t._decay=l,t.inputNode=t.context.createGain(),t.outputNode=t.context.createGain(),t.dryGainNode=t.context.createGain(),t.wetGainNode=t.context.createGain(),t.convolverNode=t.context.createConvolver(),t.convolverNode.buffer=t._buildImpulseResponse(u,l),t.inputNode.connect(t.dryGainNode),t.dryGainNode.connect(t.outputNode),t.inputNode.connect(t.convolverNode),t.convolverNode.connect(t.wetGainNode),t.wetGainNode.connect(t.outputNode),t.dry=i,t.wet=a,t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&U(t,e)}(e,t),n=e,(r=[{key:"mixerData",get:function(){return G}},{key:"dry",get:function(){return this.dryGainNode.gain.value},set:function(t){this.dryGainNode.gain.value=t}},{key:"wet",get:function(){return this.wetGainNode.gain.value},set:function(t){this.wetGainNode.gain.value=t}},{key:"duration",get:function(){return this._duration},set:function(t){this._duration=t,this.convolverNode.buffer=this._buildImpulseResponse(this._duration,this._decay)}},{key:"decay",get:function(){return this._decay},set:function(t){this._decay=t,this.convolverNode.buffer=this._buildImpulseResponse(this._duration,this._decay)}},{key:"_buildImpulseResponse",value:function(t,e){for(var n=this.context.sampleRate*t,r=this.context.createBuffer(1,n,this.context.sampleRate),i=r.getChannelData(0),o=0;o<i.length;o++){var a=Math.pow(1-o/n,e);i[o]=Object(M.h)(-a,a)}return r}}])&&L(n.prototype,r),i&&L(n,i),e}(p);function V(t){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X(Object(n),!0).forEach((function(e){Y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function K(t,e,n){return e&&q(t.prototype,e),n&&q(t,n),t}function Z(t,e,n){return e=$(e),function(t,e){if(e&&("object"===V(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],$(t).constructor):e.apply(t,n))}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function J(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Q(t,e)}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tt={properties:[{name:"frequency",min:0,max:2e4},{name:"peak",min:0,max:1e3}]},et=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};z(this,e),t=Z(this,e,[n]);var r=n.name,i=n.type,o=n.frequency,a=void 0===o?350:o,s=n.peak,u=void 0===s?1:s;return t.name=r,t.inputNode=t.outputNode=t.context.createBiquadFilter(),t.inputNode.type=i,t.frequency=a,t.peak=u,t}return J(e,t),K(e,[{key:"mixerData",get:function(){return W(W({},tt),{},{name:this.name})}},{key:"frequency",get:function(){return this.inputNode.frequency.value},set:function(t){this.inputNode.frequency.value=t}},{key:"peak",get:function(){return this.inputNode.Q.value},set:function(t){this.inputNode.Q.value=t}}]),e}(p),nt={CompressorEffect:S,EchoEffect:N,ReverbEffect:H,LowPassFilterEffect:function(t){function e(t){return z(this,e),Z(this,e,[W({type:"lowpass",name:"LowPassFilterEffect"},t)])}return J(e,t),K(e)}(et),HighPassFilterEffect:function(t){function e(t){return z(this,e),Z(this,e,[W({type:"highpass",name:"HighPassFilterEffect"},t)])}return J(e,t),K(e)}(et)};function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function it(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||ot(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(t,e){if(t){if("string"==typeof t)return at(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(t,e):void 0}}function at(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function st(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ct=function(){function t(){var e,n,s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ut(this,"getSoundsProxy",(function(t){return new Proxy(t,{get:function(e,n){o.Howler.noAudio||!t.all._sprite.hasOwnProperty(n)&&s._soundNotLoaded(n);return s.getSoundProxy(n)}})})),ut(this,"getSoundProxy",(function(t){return new Proxy(r.e.all,{get:function(e,n){return o.Howler.noAudio?function(){return s.getSoundProxy(t)}:r.e.all._sprite.hasOwnProperty(t)?s._isMethodInterceptable(n)?s.getSoundMethodProxy(t,n):r.e.all[n]:function(){return s.getSoundProxy(t)}}})})),ut(this,"getSoundMethodProxy",(function(t,e){return new Proxy((function(){}),{apply:function(n,r,o){var a=(0,s.interceptMethods[e])(t,o);return Object(i.a)(a)?s.getSoundProxy(t):a}})})),ut(this,"play",(function(t){if(s._passedLimitInterval(t)){var e=r.e.all.play(t),n=r.e.all._soundById(e);s._gains[t]||s._attachGain(n,t),n._node.disconnect(o.Howler.masterGain),n._node.connect(s._gains[t]),s._gains[t].disconnect();var i=s._channels[s._soundNameToChannelIndex[t]];i&&s._gains[t].connect(i.node),s.ids[t]=e,s.lastPlayedAt[t]=Date.now(),r.e.all.once("end",(function(){e&&r.e.all.loop(e)||delete s.ids[t]}),e)}})),ut(this,"playing",(function(t){var e=s.ids[t];return Boolean(e&&r.e.all.playing(e))})),ut(this,"stop",(function(t){var e=s.ids[t];e&&r.e.all.stop(e),delete s.ids[t]})),ut(this,"loop",(function(t,e){var n=it(e,1)[0],i=s.ids[t];i&&r.e.all.loop(n,i)})),ut(this,"fadeIn",(function(t,e){var n=it(e,1)[0];s.fadeTo(t,[n,1])})),ut(this,"fadeTo",(function(t,e){var n=it(e,3),i=n[0],o=n[1],u=n[2],c=s.ids[t];if(c){s._tweens[c]={_volume:r.e.all.volume(c)};var l=i*Math.abs(s._tweens[c]._volume-o);a.b.to(s._tweens[c],{duration:l,_volume:o,onUpdate:function(){return r.e.all.volume(s._tweens[c]._volume,c)},onComplete:function(){return u&&s.stop(t)}})}})),ut(this,"fadeOut",(function(t,e){var n=it(e,2),r=n[0],i=n[1];void 0===i&&(i=!0),s.fadeTo(t,[r,0,i])})),ut(this,"volume",(function(t,e){var n=it(e,1)[0],o=s.ids[t];if(Object(i.a)(n))return o&&r.e.all.volume(o);o&&r.e.all.volume(n,o)})),ut(this,"on",(function(t,e){var n=it(e,2),i=n[0],o=n[1],a=s.ids[t];a&&r.e.all.on(i,o,a)})),ut(this,"off",(function(t,e){var n=it(e,2),i=n[0],o=n[1],a=s.ids[t];a&&r.e.all.off(i,o,a)})),ut(this,"once",(function(t,e){var n=it(e,2),i=n[0],o=n[1],a=s.ids[t];a&&r.e.all.once(i,o,a)})),ut(this,"limitInterval",(function(t,e){var n=it(e,1)[0];s.intervals[t]=1e3*n})),ut(this,"pauseAll",(function(){Object.keys(s.ids).forEach((function(t){if(s.playing(t)){var e=s.ids[t];s.soundsToPause.push(e),e&&r.e.all.pause(e)}}))})),ut(this,"resumeAll",(function(){s.soundsToPause.forEach((function(t){r.e.all.play(t)})),s.soundsToPause=[]})),ut(this,"fadeOutSounds",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[];t.forEach((function(t){s.ids[t]?e.push(t):console.warn("Sound not found",t)})),Object.keys(s.ids).forEach((function(t){s.playing(t)&&s.volume(t,[])>0&&!e.includes(t)&&(s.fadedSounds.push({name:t,vol:s.volume(t,[])}),s.fadeOut(t,[1,!1]))}))})),ut(this,"fadeInSounds",(function(){s.fadedSounds.forEach((function(t){return s.fadeTo(t.name,[1,t.vol])})),s.fadedSounds=[]})),this.soundsToPause=[],this._tweens=[],this.ids=new Proxy({},{get:function(t,e){return t[e]||0}}),this.intervals=new Proxy({},{get:function(t,e){return t[e]||0}}),this.lastPlayedAt=new Proxy({},{get:function(t,e){return t[e]||0}}),this.interceptMethods={play:this.play,playing:this.playing,stop:this.stop,loop:this.loop,fadeIn:this.fadeIn,fadeOut:this.fadeOut,fadeTo:this.fadeTo,reset:this.reset,volume:this.volume,on:this.on,once:this.once,off:this.off,limitInterval:this.limitInterval},this._gains={},this._effectsConstructors=nt,this._channels=[],this.masterChannel=this._createChannel(o.Howler.masterGain),this._soundNameToChannelIndex={},(null===(e=l)||void 0===e||null===(n=e.channels)||void 0===n?void 0:n.length)>0?this._soundNameToChannelIndex=this._loadMixerConfig():this._soundNameToChannelIndex=this._initMixerNoConfig(),this._gainsValues=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){ut(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},u),o.Howler.noAudio&&(Object.keys(this.interceptMethods).forEach((function(t){return s.interceptMethods[t]=function(){}})),r.e.all={}),this.fadedSounds=[],this.sounds=this.getSoundsProxy(r.e)}var e,n,h;return e=t,h=[{key:"mute",value:function(){o.Howler.mute(!0)}},{key:"unmute",value:function(){o.Howler.mute(!1)}},{key:"setRate",value:function(t){o.Howler._howls.forEach((function(e){e.rate(t)}))}}],(n=[{key:"gainValues",get:function(){return this._gainsValues}},{key:"soundNames",get:function(){return Object.keys(r.e.all._sprite)}},{key:"exportFileName",get:function(){return s}},{key:"mainGainConfig",get:function(){return c}},{key:"mainGainValue",get:function(){return this.masterChannel.gain},set:function(t){this.masterChannel.gain=t}},{key:"mixerConfig",get:function(){return{channels:this._channels.map((function(t){return t.mixerConfig})),soundNameToChannelIndex:this._soundNameToChannelIndex}}},{key:"setGainValue",value:function(t,e){var n=this._gains[t];if(n){var r=n.context;n.gain.setValueAtTime(e,r.currentTime)}this._gainsValues[t]=e}},{key:"_createChannel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.masterChannel.node,e=new v({context:o.Howler.masterGain.context,index:this._channels.length});return this._channels.push(e),e.connect(t),e}},{key:"_initMixerNoConfig",value:function(){for(var t=0;t<9;t++)this._createChannel();var e={};for(var n in r.e.all._sprite)e[n]=0;return e}},{key:"_loadMixerConfig",value:function(){var t,e=l,n=e.channels,r=e.soundNameToChannelIndex,i=void 0===r?{}:r,o=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=ot(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this.soundNames);try{for(o.s();!(t=o.n()).done;){var a=t.value;i.hasOwnProperty(a)||(i[a]=0)}}catch(t){o.e(t)}finally{o.f()}this._loadChannelConfig(this.masterChannel,n[0]);for(var s=1;s<n.length;s++){var u=this._createChannel();this._loadChannelConfig(u,n[s])}return i}},{key:"_loadChannelConfig",value:function(t,e){var n=this;e.effects.forEach((function(e){var r=new n._effectsConstructors[e.name]({});Object.assign(r,e.properties),t.addEffect(r)}))}},{key:"_attachGain",value:function(t,e){if(t){var n=t._node.context,r=1;Object.keys(this._gainsValues).includes(e)&&(r=this._gainsValues[e]);var i=n.createGain();i.gain.setValueAtTime(r,n.currentTime),this._gains[e]=i}}},{key:"_isMethodInterceptable",value:function(t){return!!this.interceptMethods[t]}},{key:"_soundNotLoaded",value:function(t){return console.warn("Warning: Sound ".concat(t," not loaded"))}},{key:"_passedLimitInterval",value:function(t){var e=this.lastPlayedAt[t],n=this.intervals[t],r=!0;return e&&n&&Date.now()-e<n&&(r=!1),r}}])&&st(e.prototype,n),h&&st(e,h),t}()},"./src/core/fixes/index.js":function(t,e,n){"use strict";var r,i,o=n("./node_modules/pixi.js/dist/esm/pixi.js");r={willReadFrequently:!0},i=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d",r);return e&&e.measureText?t:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}(),o.TextMetrics._canvas=i,o.TextMetrics._context=i.getContext("2d",r)},"./src/core/loader/AssetCache.js":function(t,e,n){"use strict";n.d(e,"c",(function(){return r})),n.d(e,"e",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return a})),n.d(e,"f",(function(){return s})),n.d(e,"b",(function(){return u}));var r={},i={},o={},a={},s={},u={}},"./src/core/loader/index.js":function(t,e,n){"use strict";n.d(e,"d",(function(){return p.c})),n.d(e,"f",(function(){return p.e})),n.d(e,"a",(function(){return p.a})),n.d(e,"e",(function(){return p.d})),n.d(e,"c",(function(){return p.b}));var r=n("./node_modules/pixi.js/dist/esm/pixi.js"),i=n("./src/core/utils/misc.js"),o=n("./src/core/utils/EventsHub.js"),a=n("./node_modules/@games/dope/src/Dopamine.js"),s=n("./src/config.js");function u(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){u(o,r,i,a,s,"next",t)}function s(t){u(o,r,i,a,s,"throw",t)}a(void 0)}))}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.cdn,i=void 0===r?"./":r;l(this,t),this._list=null,this._basePath=i,this.progress=0,this._onProgress=e}var e,n,r,u,f;return e=t,(n=[{key:"loadList",value:(f=c(regeneratorRuntime.mark((function t(){var e,n,r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:[],n=!(i.length>1&&void 0!==i[1])||i[1],this.list=e,e.length){t.next=6;break}return this.progress=100,t.abrupt("return",Promise.resolve());case 6:return t.prev=6,t.next=9,this.attemptLoad();case 9:t.next=18;break;case 11:if(t.prev=11,t.t0=t.catch(6),!Array.isArray(t.t0)){t.next=17;break}return r=t.t0.map((function(t){return t.src})).join("\n"),o.a.emit(o.a.events.MESSAGE_SHOW,{title:a.c.texts.TITLE_SERVER_ERROR||"",text:"".concat(a.c.texts.CANNOT_PRELOAD_ASSETS,"\n").concat(r),msgType:"server_error",details:"".concat(a.c.texts.CANNOT_PRELOAD_ASSETS,"\n").concat(r),nonRecoverable:n}),t.abrupt("return",n?new Promise((function(){})):Promise.reject());case 17:console.error(t.t0);case 18:case"end":return t.stop()}}),t,this,[[6,11]])}))),function(){return f.apply(this,arguments)})},{key:"attemptLoad",value:(u=c(regeneratorRuntime.mark((function t(){var e,n,r,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:this.list,n=o.length>1&&void 0!==o[1]?o[1]:5,t.prev=2,t.next=5,this.load(e);case 5:t.next=20;break;case 7:if(t.prev=7,t.t0=t.catch(2),Array.isArray(t.t0)){t.next=12;break}return console.error(t.t0),t.abrupt("return");case 12:if(n-1!=0){t.next=14;break}return t.abrupt("return",Promise.reject(t.t0));case 14:return r=t.t0.map((function(t){return t.src})).join("\n"),console.warn("Failed to load assets:\n".concat(r,".\nTrying ").concat(n-1," more time(s).")),t.next=18,Object(i.c)(1);case 18:return t.next=20,this.attemptLoad(t.t0,n-1);case 20:case"end":return t.stop()}}),t,this,[[2,7]])}))),function(){return u.apply(this,arguments)})},{key:"load",value:function(){return Promise.resolve()}},{key:"list",get:function(){return this._list},set:function(t){this._list=t}},{key:"progress",get:function(){return this._progress},set:function(t){this._progress=t,"function"==typeof this._onProgress&&this._onProgress(t)}},{key:"_resolvePath",value:function(t){var e=this._basePath+t.src;return s.a.isBundleEnv&&t.isCore?this._replacePath(e):e}},{key:"_replacePath",value:function(t){var e="".concat(s.a.gameAppId,".").concat(s.a.lang),n="".concat(s.a.gameAppId,".en");return t.replace(e,n)}}])&&h(e.prototype,n),r&&h(e,r),t}(),p=n("./src/core/loader/AssetCache.js"),d=n("./src/core/Platform.js");function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function E(t,e,n){return e=T(e),function(t,e){if(e&&("object"===y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],T(t).constructor):e.apply(t,n))}function T(t){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}r.utils.TextureCache;var x=function(t){function e(){return g(this,e),E(this,e,arguments)}var n,i,o,a,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(e,t),n=e,(i=[{key:"load",value:(a=regeneratorRuntime.mark((function t(){var e,n,i,o,a,u,c,l=this,h=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=h.length>0&&void 0!==h[0]?h[0]:this.list,this.loader.reset(),e.forEach((function(t){l.loader.resources[t.id]||l.loader.add(t.id,l._resolvePath(t))})),this.loader.use((function(t,e){var n=s.a.scale[d.a.resolution].default;if(s.a.video.supportedFormats.includes(t.extension)){var i=t.name,o=new r.Texture(new r.BaseTexture(t.data,{resourceOptions:{autoPlay:!1}}));o.baseTexture.cacheId=i,o.source=t.data,r.BaseTexture.addToCache(o.baseTexture,i),r.Texture.addToCache(o,i),t.texture=o}return"jpg"===t.extension&&t.texture.baseTexture.setResolution(n),e(t.error)})),n=[],i=function(t){return l.progress=t.progress},o=function(t,r,i){var o=e.find((function(t){return i.name.includes(t.id)}));n.push(o)},a=this.loader.onProgress.add(i),u=this.loader.onError.add(o),c=this.loader.onComplete.add(i),t.next=12,new Promise((function(t){return l.loader.load(t)}));case 12:if(a.detach(),u.detach(),c.detach(),Object.entries(this.loader.resources).forEach((function(t){var e=m(t,2),n=e[0],r=e[1];n.includes("_atlas_")?r.textures&&Object.assign(p.c,r.textures):p.c[n]=r.texture})),!n.length){t.next=18;break}return t.abrupt("return",Promise.reject(n));case 18:case"end":return t.stop()}}),t,this)})),u=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=a.apply(t,e);function o(t){_(i,n,r,o,s,"next",t)}function s(t){_(i,n,r,o,s,"throw",t)}o(void 0)}))},function(){return u.apply(this,arguments)})},{key:"loader",get:function(){return this._loader=this._loader||new r.Loader,this._loader}}])&&b(n.prototype,i),o&&b(n,o),e}(f);function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e,n){return e=C(e),function(t,e){if(e&&("object"===S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],C(t).constructor):e.apply(t,n))}function I(t,e,n){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function C(t){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var N=function(t){function e(){return P(this,e),A(this,e,arguments)}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&k(t,e)}(e,t),n=e,(r=[{key:"load",value:(o=regeneratorRuntime.mark((function t(){var e,n,r,i,o,a=this,s=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:this.list,n=e.map((function(t){var e=a._resolvePath(t),n=document.createElement("script");return n.setAttribute("src",e),new Promise((function(e,r){n.onload=function(){return e({asset:t,failed:!1})},n.onerror=function(){return e({asset:t,failed:!0})},document.body.appendChild(n)}))})),t.next=4,Promise.all(n);case 4:if(r=t.sent,i=r.filter((function(t){return t.failed})).map((function(t){return t.asset})),(o=r.length-i.length)&&(this.progress=o/r.length*100),!i.length){t.next=10;break}return t.abrupt("return",Promise.reject(i));case 10:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){O(i,n,r,a,s,"next",t)}function s(t){O(i,n,r,a,s,"throw",t)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"_replacePath",value:function(t){if(!s.a.isBundlerV2Build)return I(C(e.prototype),"_replacePath",this).call(this,t);var n=s.a.bundlerGameId||s.a.gameAppId,r="".concat(this._basePath,"assets/"),i="../games.".concat(n,"/assets/"),o=t.replace(r,i);return I(C(e.prototype),"_replacePath",this).call(this,o)}}])&&R(n.prototype,r),i&&R(n,i),e}(f),M=n("./node_modules/howler/dist/howler.js");function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function F(t,e,n){return e=U(e),function(t,e){if(e&&("object"===j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],U(t).constructor):e.apply(t,n))}function U(t){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function G(t,e){return(G=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var H=function(t){function e(){return L(this,e),F(this,e,arguments)}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&G(t,e)}(e,t),n=e,(r=[{key:"load",value:(o=regeneratorRuntime.mark((function t(){var e,n,r,i,o=this,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=a.length>0&&void 0!==a[0]?a[0]:this.list).length){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,fetch(this._resolvePath(e[0]));case 6:if((n=t.sent).ok){t.next=9;break}throw Error(n.statusText);case 9:t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(3),t.abrupt("return",Promise.reject(e));case 14:return t.next=16,n.json();case 16:(r=t.sent).urls=r.urls.map((function(t){return o._resolvePath({isCore:!0,src:t})})),t.prev=18,i=new M.Howl({src:r.urls,sprite:r.sprite}),t.next=26;break;case 22:return t.prev=22,t.t1=t.catch(18),M.Howler.noAudio=!0,t.abrupt("return");case 26:if("unloaded"!==i.state()){t.next=28;break}return t.abrupt("return");case 28:return t.prev=28,t.next=31,this._loadPromise(i);case 31:t.next=36;break;case 33:return t.prev=33,t.t2=t.catch(28),t.abrupt("return",Promise.reject(e));case 36:this.progress=100,p.e.all=i;case 38:case"end":return t.stop()}}),t,this,[[3,11],[18,22],[28,33]])})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){D(i,n,r,a,s,"next",t)}function s(t){D(i,n,r,a,s,"throw",t)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"_loadPromise",value:function(t){return new Promise((function(e,n){var r=function(){t.off("loaderror",i),t.off("load",o)},i=function(){r(),n()},o=function(){r(),e()};t.on("loaderror",i),t.on("load",o)}))}}])&&B(n.prototype,r),i&&B(n,i),e}(f),V=n("./node_modules/@games/pixi-animate/lib/index.js");function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function q(t,e,n){return e=K(e),function(t,e){if(e&&("object"===X(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],K(t).constructor):e.apply(t,n))}function K(t){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Z(t,e){return(Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $=function(t){function e(){return Y(this,e),q(this,e,arguments)}var n,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z(t,e)}(e,t),n=e,(i=[{key:"load",value:(a=regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,u,c=this,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:this.list,this.loader.reset(),e.forEach((function(t){var e=t.id.replace(".shapes","");c.loader.resources[e]||c.loader.add(e,c._resolvePath(t))})),n=[],r=function(t){return c.progress=t.progress},i=function(t,r,i){return n.push(e.find((function(t){return t.id==="".concat(i.name,".shapes")})))},o=this.loader.onProgress.add(r),a=this.loader.onError.add(i),s=this.loader.onComplete.add(r),t.next=11,new Promise((function(t){return c.loader.load((function(e,n){return t(n)}))}));case 11:if(u=t.sent,o.detach(),a.detach(),s.detach(),Object.keys(u).forEach((function(t){var e=u[t];n.find((function(t){return t.id==="".concat(e.name,".shapes")}))||(V.ShapesCache.add(e.name,e.data),Object.assign(p.d,V.ShapesCache))})),!n.length){t.next=18;break}return t.abrupt("return",Promise.reject(n));case 18:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=a.apply(t,e);function o(t){W(i,n,r,o,s,"next",t)}function s(t){W(i,n,r,o,s,"throw",t)}o(void 0)}))},function(){return s.apply(this,arguments)})},{key:"loader",get:function(){return this._loader=this._loader||new r.Loader,this._loader}}])&&z(n.prototype,i),o&&z(n,o),e}(f);function J(t){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return tt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function et(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function nt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function it(t,e,n){return e=ot(e),function(t,e){if(e&&("object"===J(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],ot(t).constructor):e.apply(t,n))}function ot(t){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function at(t,e){return(at=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var st=function(t){function e(){return nt(this,e),it(this,e,arguments)}var n,i,o,a,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&at(t,e)}(e,t),n=e,(i=[{key:"load",value:(a=regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,u=this,c=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:this.list,this.loader.reset(),e.forEach((function(t){u.loader.resources[t.id]||u.loader.add(t.id,u._resolvePath(t))})),n=[],r=function(t){return u.progress=t.progress},i=function(t,r,i){var o;o="png"===i.extension?e.find((function(t){return i.name.includes(t.id)})):e.find((function(t){return t.id===i.name})),n.push(o)},o=this.loader.onProgress.add(r),a=this.loader.onError.add(i),t.next=10,new Promise((function(t){return u.loader.load(t)}));case 10:if(s.a.useGameSumFont&&!n.length&&this._cacheSumFont(),o.detach(),a.detach(),!n.length){t.next=15;break}return t.abrupt("return",Promise.reject(n));case 15:case"end":return t.stop()}}),t,this)})),u=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=a.apply(t,e);function o(t){et(i,n,r,o,s,"next",t)}function s(t){et(i,n,r,o,s,"throw",t)}o(void 0)}))},function(){return u.apply(this,arguments)})},{key:"_cacheSumFont",value:function(){var t=this.loader.resources.sumFont_atlas_,e={},n=[];Object.entries(t.bitmapFont.chars).forEach((function(t,r){var i=Q(t,2),o=i[0],a=i[1],s=a.texture.orig,u=s.x,c=s.y,l=s.width,h=s.height,f=a.page,p=String.fromCharCode(Number(o));n.push({}[r]=[u,c,l,h,Number(f)]),e[p]=[Number(r)]})),p.b.frames=n,p.b.animations=e,p.b.images=t.children.map((function(t){return t.name}))}},{key:"loader",get:function(){return this._loader=this._loader||new r.Loader,this._loader}}])&&rt(n.prototype,i),o&&rt(n,o),e}(f),ut=n("./node_modules/pixi-spine/lib/all.es.js");function ct(t){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lt(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function ht(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pt(t,e,n){return e=dt(e),function(t,e){if(e&&("object"===ct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],dt(t).constructor):e.apply(t,n))}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yt(t,e){return(yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mt=ut.a.prototype;mt.newMeshAttachment=function(t,e,n){var r=this.atlas.findRegion(n),i=new ut.b(e);return null==r?(console.warn("Region not found in atlas: ".concat(n," (mesh attachment: ").concat(e,")")),o.a.emit(o.a.events.ERROR,{priority:"high",nonRecoverable:!0,details:{message:"Region not found in atlas: ".concat(n," (mesh attachment: ").concat(e,")")},errorType:"crash"})):i.region=r,i},mt.newRegionAttachment=function(t,e,n){var r=this.atlas.findRegion(n),i=new ut.c(e);return null==r?(console.warn("Region not found in atlas: ".concat(n," (region attachment: ").concat(e,")")),o.a.emit(o.a.events.ERROR,{priority:"high",nonRecoverable:!0,details:{message:"Region not found in atlas: ".concat(n," (mesh attachment: ").concat(e,")")},errorType:"crash"})):i.region=r,i};var vt=function(t){function e(){return ht(this,e),pt(this,e,arguments)}var n,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yt(t,e)}(e,t),n=e,(i=[{key:"load",value:(a=regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,u=this,c=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:this.list,this.loader.reset(),e.forEach((function(t){var e=new ut.e;e.addTextureHash(p.c,!0),u.loader.resources[t.id]||u.loader.add(t.id,u._resolvePath(t),{metadata:{spineAtlas:e}})})),n=[],r=function(t){return u.progress=t.progress},i=function(t,r,i){return n.push(e.find((function(t){return t.id===i.name})))},o=this.loader.onProgress.add(r),a=this.loader.onError.add(i),t.next=10,new Promise((function(t){return u.loader.load((function(e,n){return t(n)}))}));case 10:if(s=t.sent,o.detach(),a.detach(),Object.keys(s).forEach((function(t){var e=s[t];e.error||(p.f[t]=e.spineData)})),!n.length){t.next=16;break}return t.abrupt("return",Promise.reject(n));case 16:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=a.apply(t,e);function o(t){lt(i,n,r,o,s,"next",t)}function s(t){lt(i,n,r,o,s,"throw",t)}o(void 0)}))},function(){return s.apply(this,arguments)})},{key:"loader",get:function(){return this._loader=this._loader||new r.Loader,this._loader}}])&&ft(n.prototype,i),o&&ft(n,o),e}(f),_t=n("./node_modules/ramda/es/without.js"),gt=n("./node_modules/ramda/es/internal/_curry1.js"),bt=n("./node_modules/ramda/es/keys.js"),Et=Object(gt.a)((function(t){for(var e=Object(bt.a)(t),n=e.length,r=[],i=0;i<n;)r[i]=t[e[i]],i+=1;return r}));function Tt(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function wt(t){return function(t){if(Array.isArray(t))return xt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return xt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function St(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?St(Object(n),!0).forEach((function(e){Pt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Pt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var At={IMAGES:"images",VIDEO:"video",SOUNDS:"sounds",SOUNDS_MOBILE:"sounds-mobile",SHAPES:"shapes",ANIMATE:"animate",FONTS:"fonts",SPRITE_SHEETS:"spriteSheets",SPINE:"spine"},It=[At.IMAGES,At.SPRITE_SHEETS,At.SHAPES],Ct=Object(_t.a)(It,Et(At)),kt=[],Nt=[At.SPRITE_SHEETS],Mt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.assetsList=null}var e,n,r,i,o;return e=t,(n=[{key:"filterAssets",value:function(t){var e=t.assets,n=t.feature;if((e=e[t.scale]||e)[n])return e[n].map((function(t){return Ot(Ot({},t),{},{isCore:!0})}));var r=e[s.a.baseLang]&&e[s.a.baseLang][n]?e[s.a.baseLang][n]:[],i=e[a.c.code]&&e[a.c.code][n]?e[a.c.code][n]:[];return r.forEach((function(t){return t.isCore=!0})),0===i.length?r:i}},{key:"getLoaderForAssetType",value:function(t){return Pt(Pt(Pt(Pt(Pt(Pt(Pt(Pt(Pt({},At.IMAGES,x),At.VIDEO,x),At.SPRITE_SHEETS,x),At.SOUNDS,H),At.SOUNDS_MOBILE,H),At.SHAPES,$),At.ANIMATE,N),At.FONTS,st),At.SPINE,vt)[t]}},{key:"makeAssetsUnique",value:function(t){return t.map((function(t){var e=t.src.split("c=");return t.id+="_".concat(e[1]||Date.now()),t}))}},{key:"getAssetsVariant",value:function(t){var e=s.a.skin;return this.assetsList[e][t]||[]}},{key:"loadAssets",value:function(t){var e=t.type,n=t.feature,r=t.scale,i=t.onProgress,o=t.nonrecoverable,a=!kt.includes(e),u=Nt.includes(e),c=this.getLoaderForAssetType(e),l=this.getAssetsVariant(e);return a&&(l=this.filterAssets({assets:l,feature:n,scale:r})),u&&(l=this.makeAssetsUnique(l)),new c(i,s.a).loadList(l,o)}},{key:"loadManifest",value:function(){var t=this;return fetch("".concat(s.a.cdn,"manifest.json?t=").concat(s.a.timestamp||Date.now())).then((function(t){return t.json()})).then((function(e){return t.assetsList=e}))}},{key:"getFeatureScaleForResolution",value:function(t){var e=t.feature,n=t.resolution,r=s.a.scale[n];return r?r[e]||r.default:1}},{key:"getCorrectScaleForFeature",value:function(t){var e=t.feature,n=t.scale,r=d.a.resolution,i=this.getFeatureScaleForResolution({feature:e,resolution:r});return"scale@".concat(n||i).replace(".","_")}},{key:"getInitialProgress",value:function(){return Et([].concat(It,wt(Ct))).reduce((function(t,e){return Ot(Ot({},t),{},Pt({},e,0))}),{})}},{key:"getTotalProgress",value:function(t){return Math.round(t.reduce((function(t,e){return t+e}),0)/t.length)}},{key:"updateProgress",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return function(i){e[t]=i,r(n.getTotalProgress(Et(e)))}}},{key:"loadFeature",value:(i=regeneratorRuntime.mark((function t(e){var n,r,i,o,a,u,c,l=this,h=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:{},r=n.onProgress,i=void 0===r?function(){}:r,o=n.scale,a=n.nonrecoverable,-1!==e.indexOf("_core")){t.next=4;break}return t.next=4,this.loadFeature("".concat(e,"_core"),i,o,a);case 4:return o=this.getCorrectScaleForFeature({feature:e,scale:o}),u=this.getInitialProgress(),c=function(t){return l.loadAssets({type:t,feature:e,scale:o,onProgress:l.updateProgress(t,u,i),nonrecoverable:a})},s.a.platform.monoSounds.indexOf(d.a.resolution)>-1?Ct.indexOf(At.SOUNDS)>-1&&Ct.splice(Ct.indexOf(At.SOUNDS),1):Ct.indexOf(At.SOUNDS_MOBILE)>-1&&Ct.splice(Ct.indexOf(At.SOUNDS_MOBILE),1),t.next=10,Promise.all(It.map(c));case 10:return t.abrupt("return",Promise.all(Ct.map(c)));case 11:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){Tt(o,n,r,a,s,"next",t)}function s(t){Tt(o,n,r,a,s,"throw",t)}a(void 0)}))},function(t){return o.apply(this,arguments)})}])&&Rt(e.prototype,n),r&&Rt(e,r),t}();e.b=new Mt},"./src/core/main.js":function(t,e,n){"use strict";n.r(e);var r=n("./src/core/utils/EventsHub.js"),i=n("./src/core/App.js"),o=n("./src/config.js"),a=n("./src/core/utils/Status.js"),s=n("./node_modules/@games/dope/src/Dopamine.js"),u=n("./src/core/features/sound/SoundRouter.js"),c=n("./src/core/utils/CombinedTicker.js"),l=n("./src/core/server/SpinData.js"),h=n("./src/states.js"),f=n("./src/core/utils/canvasErrors.js"),p=n("./src/core/loader/index.js"),d=n("./src/core/utils/ExternalInput.js");function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function T(t,e,n){return e=w(e),function(t,e){if(e&&("object"===y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],w(t).constructor):e.apply(t,n))}function w(t){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var S={READY:"ready",WIN_LINES:"win_lines",WIN_LINES_EXTRA_WIN:"win_lines_extra_win",WIN_LINES_SUM:"win_lines_sum",WIN_LINES_NO_WIN:"win_lines_no_win",JACKPOT_WIN:"jackpot_win",FINISH:"finish",PLAY_START:"play_start",PLAY_END:"play_end",PLAY_DATA:"play_data"},O={SERVER_ERROR:"server_error",GAME_ERROR:"game_error",WARNING:"warning",INFO:"info"},P={GAME_ENABLED:"gameEnabled",GAME_BUSY:"gameBusy",RESULT_READY:"resultReady",PAYTABLE:"paytable",MUTE:"mute",IN_FREE_SPINS:"inFreeSpins",IN_RESPIN:"inRespin",IS_SPIN_BUTTON_ACTIVE:"isSpinButtonActive",IS_WHOLE_GAME_STAGE_USED:"isWholeGameStageUsed"},R=function(t){function e(t,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=T(this,e))._app=new i.a(t,n),o._app.init(),r.a.onAny((function(t){var e=g(t,2),n=e[0],r=e[1];return o.emit(n,Object.assign({},r,{type:n}))})),o}var n,y,m;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(e,t),n=e,(y=[{key:"events",get:function(){return r.a.events}},{key:"states",get:function(){return S}},{key:"messageTypes",get:function(){return O}},{key:"statuses",get:function(){return P}},{key:"app",get:function(){return this._app}},{key:"preload",value:function(){return this.app.start(),this.app.preload()}},{key:"getContainer",value:function(){return this.app.container}},{key:"enableGame",value:function(){this.app.game.enable()}},{key:"disableGame",value:function(){this.app.game.disable()}},{key:"rumbleStart",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=this.app.game.scenario.features.rumble;if(n){var r=t.x,i=t.y;n.start(v(v({},t),{},{intensity:{x:r,y:i},duration:e}))}}},{key:"rumbleStop",value:function(){var t=this.app.game.scenario.features.rumble;t&&t.stop()}},{key:"setCurrencyFormat",value:function(t){s.a.set(t)}},{key:"freeze",value:function(t){t?this.app.renderer.pause():(this.app.game&&this.app.game.scenario.features.soundEngine.router.pauseAll(),this.app.ticker.stop())}},{key:"unfreeze",value:function(t){t?this.app.renderer.resume():(this.app.game&&this.app.game.scenario.features.soundEngine.router.resumeAll(),this.app.ticker.start())}},{key:"attachPrePlayHandler",value:function(t){this.app.game&&this.app.game.attachPreSpinHandler(t)}},{key:"skip",value:function(t){this.app.game&&this.app.game.skip(t)}},{key:"gamble",value:function(){}},{key:"reset",value:function(){var t=this.app.game.scenario;t.reset&&t.reset()}},{key:"autoPlayStart",value:function(t){this.app.game.autoPlayStart(),r.a.emit(r.a.events.AUTOPLAY_START)}},{key:"autoPlayStop",value:function(t){a.a.get(a.a.TYPES.AUTO_PLAY)&&(this.app.game.autoPlayStop(),r.a.emit(r.a.events.AUTOPLAY_STOP,{reason:t}))}},{key:"setStake",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.app.game.setStake(t,e,n),o=i.value,a=i.index;i.types,r.a.emit(r.a.events.STAKE_CHANGE,{value:o,index:a,bonusId:n})}},{key:"setBalance",value:function(t,e,n){}},{key:"paytableShow",value:function(){a.a.get(a.a.TYPES.PAYTABLE)||this.paytableToggle(!1)}},{key:"paytableHide",value:function(){a.a.get(a.a.TYPES.PAYTABLE)&&this.paytableToggle(!0)}},{key:"paytableToggle",value:function(t){var e="boolean"==typeof t?t:a.a.get(a.a.TYPES.PAYTABLE);this.app.game.paytableToggle(e),a.a.get(a.a.TYPES.PAYTABLE)&&this.app.game.scenario.features.paytable.slideToPays()}},{key:"getPaytableScreenIndex",value:function(){return this.app&&this.app.game?this.app.game.scenario.features.paytable?this.app.game.scenario.features.paytable.currentScreenIndex:console.warn("There is no paytable"):console.warn("There is no game attached")}},{key:"getIsGambleAllowed",value:function(){var t=l.a.hasError,e=a.a.get(a.a.TYPES.STATE)===h.a.READY,n=a.a.get(a.a.TYPES.IN_FREE_SPINS),r=l.a.main.jackpots&&l.a.main.jackpots.win,i=a.a.get(a.a.TYPES.IN_RESPIN);return!t&&!n&&e&&!r&&!i}},{key:"getRoundInfo",value:function(){return{roundId:null!==a.a.get(a.a.TYPES.ROUND_ID)?a.a.get(a.a.TYPES.ROUND_ID):void 0,isStateful:a.a.get(a.a.TYPES.HAS_MATH_STATE),isGambleAllowed:this.getIsGambleAllowed()}}},{key:"getGameStatus",value:function(){return _(_(_(_(_(_(_(_({},a.a.TYPES.STATE,a.a.get(a.a.TYPES.STATE)),a.a.TYPES.GAME_ENABLED,a.a.get(a.a.TYPES.GAME_ENABLED)),a.a.TYPES.GAME_BUSY,a.a.get(a.a.TYPES.GAME_BUSY)),a.a.TYPES.RESULT_READY,a.a.get(a.a.TYPES.RESULT_READY)),a.a.TYPES.PAYTABLE,a.a.get(a.a.TYPES.PAYTABLE)),a.a.TYPES.MUTE,a.a.get(a.a.TYPES.MUTE)),a.a.TYPES.IN_FREE_SPINS,a.a.get(a.a.TYPES.IN_FREE_SPINS)),a.a.TYPES.IS_WHOLE_GAME_STAGE_USED,a.a.get(a.a.TYPES.IS_WHOLE_GAME_STAGE_USED))}},{key:"getCurrencyFormat",value:function(){var t=s.a.singleton;return{code:t.code,symbol:t.symbol,thousand:t.thousands,decimal:t.decimals}}},{key:"getStakes",value:function(){return this.app.game.getStakes()}},{key:"getGameInfo",value:function(){var t,e,n=this.app.rtp;return{branding:o.a.branding,rtp:n,gameAppId:o.a.gameAppId,client:o.a.client,lang:s.c.code,version:o.a.version,isRealPlay:"real"===o.a.playMode,helpURL:o.a.cdn+this._app.helpPath,scale:o.a.size.scale,hasPaytable:o.a.hasPaytable,hasAutoplay:o.a.hasAutoplay,hasInternalJackpot:o.a.hasInternalJackpot,hasBottomBar:o.a.hasBottomBar,autoplay:"external",useExternalLoading:!0,useExternalPaytableUI:!0,useExternalPaytableModal:o.a.paytable.useExternalPaytableModal,paytableScreens:(null===(t=this.app.game)||void 0===t?void 0:t.scenario.features.paytable.screens)||o.a.paytable.screens,expanded:o.a.expanded,hasFeatureEvents:o.a.hasFeatureEvents,isStateful:o.a.isStateful,hasFreeSpins:o.a.hasFreeSpins,hasChoices:o.a.hasChoices,paytableMinimal:null===(e=this.app.game)||void 0===e?void 0:e.scenario.features.paytable.isMinimal}}},{key:"getErrors",value:function(){return f.a}},{key:"action",value:function(t,e){switch(t){case"spin":e&&e.result&&(e=e.result),this.app.game.spinStart(e);break;case"feature_action":d.a.resolveAction(e);break;case"jackpot_wheel_end":this.app.game.jackpotWheelHide();break;case"jackpot_wheel_end_all":this.app.game.jackpotWheelHideAll();break;case"jackpot_wheel_start":this.app.game.jackpotWheelStart();break;default:console.warn("GameAPI.action('".concat(t,"') not yet implemented"))}}},{key:"start",value:function(){if(!this._app||!this._app.game)return console.warn("There is no game attached");this._app.startGame()}},{key:"soundMute",value:function(){u.a.mute(),a.a.set(a.a.TYPES.MUTE,!0)}},{key:"soundUnmute",value:function(){u.a.unmute(),a.a.set(a.a.TYPES.MUTE,!1)}},{key:"soundToggle",value:function(){a.a.get(a.a.TYPES.MUTE)?this.soundUnmute():this.soundMute()}},{key:"fadeOutSounds",value:function(t){this.app.game.scenario.features.soundEngine.router.fadeOutSounds(t)}},{key:"fadeInSounds",value:function(){this.app.game.scenario.features.soundEngine.router.fadeInSounds()}},{key:"resumeJackpot",value:function(){this.app.game.resumeJackpot()}},{key:"updateResize",value:function(t){this._app.size=t,r.a.emit(r.a.events.RESIZE,{width:t.width,height:t.height})}},{key:"paytablePlay",value:function(){this._app.startGame()}},{key:"paytableSetIndex",value:function(t){return this._app.game.setPaytableIndex(t)}},{key:"setSpeed",value:function(t){"number"==typeof t&&!isNaN(t)&&t>=0&&c.a.setTimeScale(t)}},{key:"setOptions",value:function(t){void 0!==t&&("number"==typeof t.minRoundDuration&&a.a.set(a.a.TYPES.MIN_ROUND_DURATION,t.minRoundDuration),t.minRoundDurationStrict&&(o.a.reels.spin.minSpinDurationEnabled=t.minRoundDurationStrict),t.lang&&this._app.setLanguage(t.lang),t.roundCelebrationThreshold&&(o.a.restrictRoundCelebrations=!0,o.a.roundCelebrationThreshold=t.roundCelebrationThreshold))}},{key:"getSumFont",value:function(){return o.a.useGameSumFont?p.c:null}}])&&E(n.prototype,y),m&&E(n,m),e}(s.b),A=(n("./src/core/Game.js"),n("./src/core/utils/index.js"));n("./src/core/utils/misc.js");var I=window.com||{};I.casino=I.casino||{},I.casino.instances=I.casino.instances||{},I.casino.game=function(t,e){var n=new R(t,e);return I.casino.instances.slot=n,n},I.casino.game.utils=A.a,window.com=I},"./src/core/server/GameData.js":function(t,e,n){"use strict";var r=n("./node_modules/seamless-immutable/seamless-immutable.development.js"),i=n.n(r);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"init",value:function(t){this.settings=i()(t)}}])&&o(e.prototype,n),r&&o(e,r),t}();e.a=new a},"./src/core/server/Server.js":function(t,e,n){"use strict";var r=n("./node_modules/@games/dope/src/Dopamine.js"),i=n("./src/core/utils/Status.js"),o=n("./src/core/utils/EventsHub.js");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"parse",value:function(t){return this._moneyToNumber(t),t}},{key:"_moneyToNumber",value:function(t){var e;for(var n in t)if(t.hasOwnProperty(n))if("object"===a(e=t[n]))this._moneyToNumber(e);else if("string"==typeof e){if("rtp"===n||"userId"===n||"sessionId"===n)continue;!isNaN(parseFloat(e))&&isFinite(e)&&(t[n]=parseFloat(e))}}}])&&s(e.prototype,n),r&&s(e,r),t}();function c(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var h={SETTINGS:"settings",SPIN:"spin",CHOICE:"choice",FINISH:"finish",NOTIFICATION:"notification",BONUS_START:"bonus_start",BONUS_BUY_IN:"bonus_buy_in",BONUS_COLLECT:"bonus_collect",BONUS_CANCEL:"bonus_cancel",BONUS_CHOICE:"bonus_choice"},f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._client=e,this.parser=new u}var e,n,a,s,f;return e=t,n=[{key:"spin",value:(s=regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",Promise.reject(new Error("No stake was provided, for the spin request")));case 2:return e.next=4,this._request(t.requests.SPIN,{stake:n});case 4:return r=e.sent,o=r.result.transactions.roundId,i.a.set(i.a.TYPES.ROUND_ID,o),e.abrupt("return",r.result);case 8:case"end":return e.stop()}}),e,this)})),f=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=s.apply(t,e);function o(t){c(i,n,r,o,a,"next",t)}function a(t){c(i,n,r,o,a,"throw",t)}o(void 0)}))},function(t){return f.apply(this,arguments)})},{key:"settings",value:function(e){return this._request(t.requests.SETTINGS,e)}},{key:"choice",value:function(e){return this._request(t.requests.CHOICE,e)}},{key:"_request",value:function(e,n){var a=this;return new Promise((function(s){a._client[e](n,(function(n,u){var c=a.parser.parse(u);if(!n)return s(c);var l=e===t.requests.SETTINGS,h=l,f={title:r.c.texts.TITLE_SERVER_ERROR||"",text:r.c.texts.NO_CONNECTION||"",msgType:"server_error",details:n,nonRecoverable:h,code:99,requestType:e};if(c&&c.error){var p=c.error.code;f.text=c.error.msg,f.details=c.error.details,f.nonRecoverable=l||1===p||3===p||14===p||16===p||17===p,f.code=p}o.a.emit("message_show",f),!0===i.a.get(i.a.TYPES.AUTO_PLAY)&&o.a.emit(o.a.events.AUTOPLAY_STOP),s(n)}))}))}}],a=[{key:"requests",get:function(){return h}}],n&&l(e.prototype,n),a&&l(e,a),t}();e.a=f},"./src/core/server/SpinData.js":function(t,e,n){"use strict";var r=n("./node_modules/seamless-immutable/seamless-immutable.development.js"),i=n.n(r),o=n("./src/core/server/GameData.js"),a=n("./src/config.js");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._main=i()({}),this._currentSpin=null,this._counter=0}var e,n,r;return e=t,(n=[{key:"hasNext",get:function(){return this._counter<this.extraSpins.length}},{key:"roundHasCelebrations",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a.roundCelebrationThreshold,n=this._main.game.stake,r=t/n;if(!a.a.restrictRoundCelebrations)return!0;var i=!e||r>e;return i}},{key:"hasError",get:function(){return this._currentSpin&&this._currentSpin.hasError}},{key:"hasWin",get:function(){var t=this._currentSpin.game;return t&&t.win&&t.win.lines>0}},{key:"hasJackpotWin",get:function(){var t=this._currentSpin.jackpots;return t&&t.win>0}},{key:"hasExtraWin",get:function(){if(!this._currentSpin||!this._currentSpin.game)return!1;var t=o.a.settings.game.extraWin,e=this._currentSpin.game,n=e.win,r=e.stake,i=e.winsMultipliers;return(i?i.lines:n.lines/r)>=Math.min.apply(Math,l(Object.values(t)))}},{key:"main",get:function(){return this._main}},{key:"currentSpin",get:function(){return this._currentSpin}},{key:"extraSpins",get:function(){var t=this.parseExtraSpins(this._main.game);return this.flattenExtraSpins(t)}},{key:"update",value:function(t){this._main=i()(t),this._counter=0,this._currentSpin=this._main}},{key:"nextSpin",value:function(){this._currentSpin=this._currentSpin.set("game",this.extraSpins[this._counter++])}},{key:"flattenExtraSpins",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(e,n){var r=t.parseExtraSpins(n);return r?[].concat(l(e),[u(u({},n),{},{bonusSpins:r.length})],l(t.flattenExtraSpins(r))):[].concat(l(e),[n])}),[])}},{key:"parseExtraSpins",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.freeSpins||t.respin}}])&&f(e.prototype,n),r&&f(e,r),t}();e.a=new p},"./src/core/utils/AsyncAction.js":function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",(function(){return i}));var i=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isComplete=!1,this._completePromise=function(){},this._actionPromise=new Promise((function(t){return e._completePromise=t}))}var e,n,i;return e=t,(n=[{key:"complete",value:function(t){this.isComplete=!0,this._completePromise(t)}},{key:"wait",value:function(){return this._actionPromise}}])&&r(e.prototype,n),i&&r(e,i),t}()},"./src/core/utils/Cache.js":function(t,e,n){"use strict";n.d(e,"d",(function(){return c})),n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return a})),n.d(e,"f",(function(){return s})),n.d(e,"e",(function(){return u})),n.d(e,"b",(function(){return o}));var r=n("./node_modules/pixi.js/dist/esm/pixi.js"),i=n("./src/core/utils/CombinedTicker.js"),o=null,a=function(t){o||(o=t)},s=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.width,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.height;if(!(t instanceof r.DisplayObject))throw Error("provided object ".concat(t," is not an instance of DisplayObject"));var i=r.RenderTexture.create({width:e,height:n});return o.render(t,{renderTexture:i}),i},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.width,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.height,s=h(t),u=t.x+s.x-e,c=t.y+s.y-e;t.pivot.set(u,c);var l=r.RenderTexture.create({width:n+2*e,height:a+2*e});o.mask&&(o.mask.enableScissor=!0);var f=function(){return o.render(t,{renderTexture:l})};return i.a.Ticker.add(f),{texture:l,pivot:{x:u,y:c},tickUpdater:f}};function c(t,e){var n=e.width,i=e.height,a=e.offsetX,s=void 0===a?0:a,u=e.offsetY,c=void 0===u?0:u,l=new r.BaseRenderTexture(n+s,i+c),h=new r.RenderTexture(l);return t.y=c,t.x=s,o.render(t,{renderTexture:h}),new r.Sprite(h)}function l(t){return new Promise((function(e){if(o.type!==r.RENDERER_TYPE.WEBGL)return e();var n=o.plugins.prepare;n.add(t),n.upload(e)}))}function h(t){var e={x:0,y:0},n=t.children||[];return n.length>0&&(e=n.reduce((function(t,e){return{x:Math.min(t.x,e.x),y:Math.min(t.y,e.y)}}),{x:1/0,y:1/0})),e}},"./src/core/utils/CombinedTicker.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("./node_modules/pixi.js/dist/esm/pixi.js"),i=n("./node_modules/@games/gsap/index.js"),o=n("./node_modules/@games/pixi-animate/lib/index.js"),a=n("./src/core/utils/SpineUpdater.js");function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.update=this._update.bind(this),this._renderer=e,t.Ticker.isLowFPS=!1,t.Ticker.autoStart=!1,t.Ticker.stop(),t.setFPS(60),o.MovieClip.Ticker=t.Ticker,this.start()}var e,n,u;return e=t,u=[{key:"currentFPS",get:function(){return t.Ticker.FPS}},{key:"setTimeScale",value:function(t){i.b.globalTimeline.timeScale(t),o.MovieClip.TIME_SCALE=t}},{key:"resetTimeScale",value:function(){return r.Ticker.setTimeScale(1)}},{key:"setFPS",value:function(t){i.b.ticker.fps(t)}},{key:"elapsedTime",get:function(){return this.Ticker.lastTime}}],(n=[{key:"start",value:function(){i.b.ticker.add(this.update),i.b.globalTimeline.play()}},{key:"stop",value:function(){i.b.ticker.remove(this.update),i.b.globalTimeline.pause()}},{key:"_update",value:function(e,n){t.Ticker.update(),a.a.update(n/1e3),this._renderer.render()}}])&&s(e.prototype,n),u&&s(e,u),t}();u.Ticker=new r.Ticker},"./src/core/utils/EventsHub.js":function(t,e,n){"use strict";var r=new(n("./node_modules/@games/dope/src/Dopamine.js").b);r.events={INIT:"init",LOAD_GAME_START:"load_game_start",LOAD_GAME_PROGRESS:"load_game_progress",LOAD_GAME_COMPLETE:"load_game_complete",GAME_READY:"game_ready",GAME_STARTED:"game_started",ENABLE_WINBAR:"enable_winbar",DISABLE_WINBAR:"disable_winbar",BALANCE_CHANGE:"balance_change",BALANCE_CHANGE_END:"balance_change_end",WINBAR_CHANGE:"winbar_change",PAID_TOTAL:"paid_total",STAKE_CHANGE:"stake_change",DRAG_START:"drag_start",DRAG_END:"drag_stop",STATE_CHANGED:"state_changed",PROPERTY_CHANGED:"property_changed",MESSAGE_SHOW:"message_show",AUTOPLAY_START:"autoplay_start",AUTOPLAY_SPIN:"autoplay_spin",AUTOPLAY_STOP:"autoplay_stop",AUTOPLAY_BONUS:"autoplay_bonus",JACKPOTS_SPLASH_SHOW:"jackpots_splash_show",BONUS_WON:"bonus_won",FEATURE_START:"feature_start",FEATURE_UPDATE:"feature_update",FEATURE_END:"feature_end",PAYTABLE_SCREEN_CHANGE:"paytable_screen_change",FEATURE_CONTROLS_SHOW:"feature_controls_show",FEATURE_CONTROLS_HIDE:"feature_controls_hide",RESIZE:"resize",CHANGE_BASE_SIZE:"change_base_size",ERROR:"error"},e.a=r},"./src/core/utils/ExternalInput.js":function(t,e,n){"use strict";var r=n("./node_modules/@games/dope/src/Dopamine.js"),i=n("./src/core/utils/AsyncAction.js");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,n){return e=u(e),function(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],u(t).constructor):e.apply(t,n))}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var l={ACTION_RESOLVED:"input_action_resolved"},h=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=s(this,e))._actions={},t}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(r=[{key:"events",get:function(){return l}},{key:"when",value:function(t){return this._actions[t]||(this._actions[t]=new i.a),this._actions[t].wait()}},{key:"resolveAction",value:function(t){var e=t.name;this._actions[e]&&(this.emit(l.ACTION_RESOLVED,{data:t}),this._actions[e].complete(t),delete this._actions[e])}}])&&a(n.prototype,r),o&&a(n,o),e}(r.b);e.a=new h},"./src/core/utils/SpineUpdater.js":function(t,e,n){"use strict";var r=n("./node_modules/@games/pixi-animate/lib/index.js");n("./node_modules/pixi-spine/lib/all.es.js");function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._spines=[]}var e,n,o;return e=t,(n=[{key:"add",value:function(t){this._spines.indexOf(t)>-1||this._spines.push(t)}},{key:"remove",value:function(t){var e=this._spines.indexOf(t);-1!==e&&this._spines.splice(e,1)}},{key:"update",value:function(t){var e=this;this._spines.forEach((function(n){n._destroyed?e.remove(n):n.update(t*r.MovieClip.TIME_SCALE)}))}}])&&i(e.prototype,n),o&&i(e,o),t}();e.a=new o},"./src/core/utils/Status.js":function(t,e,n){"use strict";var r,i=n("./src/core/utils/EventsHub.js");function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a={STATE:"state",START_SCREEN:"startScreen",GAME_ENABLED:"gameEnabled",GAME_BUSY:"gameBusy",RESULT_READY:"resultReady",PAYTABLE:"paytable",MUTE:"mute",IN_FREE_SPINS:"inFreeSpins",IN_RESPIN:"inRespin",IS_WHOLE_GAME_STAGE_USED:"isWholeGameStageUsed",ROUND_ID:"roundId",AUTO_PLAY:"autoplay",HAS_MATH_STATE:"hasMathState",SPIN_MODE:"spinMode",MIN_ROUND_DURATION:"minRoundDuration",PLAY_START_TIME:"playStartTime"},s=(o(o(o(o(o(o(o(o(o(o(r={},a.STATE,null),a.START_SCREEN,!1),a.GAME_ENABLED,!0),a.GAME_BUSY,!1),a.RESULT_READY,!1),a.PAYTABLE,!1),a.MUTE,!1),a.IN_FREE_SPINS,!1),a.IN_RESPIN,!1),a.IS_WHOLE_GAME_STAGE_USED,!0),o(o(o(o(o(o(r,a.ROUND_ID,null),a.AUTO_PLAY,!1),a.HAS_MATH_STATE,!1),a.SPIN_MODE,""),a.MIN_ROUND_DURATION,-1),a.PLAY_START_TIME,-1));e.a={get:function(t){if(void 0!==s[t])return s[t];console.error("Status '".concat(t,"' not found"))},set:function(t,e){if(void 0!==s[t])return s[t]=e,i.a.emit(i.a.events.PROPERTY_CHANGED,{prop:t,value:e}),!0;console.error("Status '".concat(t,"' not found"))},TYPES:a}},"./src/core/utils/Timer.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("./node_modules/@games/gsap/all.js"),i=n("./node_modules/@games/gsap/gsap-core.js");function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.MAX_CYCLE=10,this._cycle=0,this._totalCycles=0,this._tween=null}var e,n,a;return e=t,(n=[{key:"start",value:function(){this._tween?this._tween.resume():this._tween=this._createTicker()}},{key:"stop",value:function(){return this._tween?(this._tween.pause(),this.getTime()):console.warn("I should start first, right?")}},{key:"clear",value:function(){this._tween.kill(),this._tween=null,this._cycle=0,this._totalCycles=0}},{key:"getTime",value:function(){return this._totalCycles*this.MAX_CYCLE+this._cycle}},{key:"_createTicker",value:function(){return r.b.to(this,{duration:this.MAX_CYCLE,_cycle:this.MAX_CYCLE,onRepeat:this._repeatCycle,repeat:-1,ease:i.b.easeNone})}},{key:"_repeatCycle",value:function(){++this._totalCycles}}])&&o(e.prototype,n),a&&o(e,a),t}()},"./src/core/utils/canvasErrors.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=[{match:"webglcontextlost",priority:"high",nonRecoverable:!0,details:{},errorType:"crash",isSilent:!0}]},"./src/core/utils/constants.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return o}));var r={ACTIVATE_START:"activate_start",ACTIVATE_END:"activate_end",DEACTIVATE_START:"deactivate_start",DEACTIVATE_END:"deactivate_end",SHOW_START:"show_start",SHOW_END:"show_end",HIDE_START:"hide_start",HIDE_END:"hide_end",SKIP_START:"skip_start",SKIP_END:"skip_end",UPDATE_START:"update_start",UPDATE_END:"update_end",RESET_START:"reset_start",RESET_END:"reset_end"},i={TEXTURE:"texture",MOVIE_CLIP:"movieClip",MIXED:"mixed"},o={CIRCLE:"circle",RECTANGLE:"rect"}},"./src/core/utils/index.js":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return v}));var r=n("./node_modules/@games/quark/dist/quark.js"),i=n("./src/core/utils/textures.js"),o=n("./src/core/loader/index.js"),a=n("./src/core/utils/particles.js"),s=n("./src/core/utils/constants.js"),u=n("./node_modules/@games/pixi-animate/lib/index.js"),c=n("./node_modules/pixi-heaven/lib/pixi-heaven.es.js"),l=n("./src/core/utils/misc.js"),h=n("./src/core/utils/CombinedTicker.js");n("./src/core/utils/mixins.js");n.d(e,"b",(function(){return l.a})),n.d(e,"c",(function(){return l.b})),n.d(e,"d",(function(){return l.c})),n.d(e,"f",(function(){return l.d})),n.d(e,"g",(function(){return l.e})),n.d(e,"h",(function(){return l.f})),n.d(e,"i",(function(){return l.g})),n.d(e,"k",(function(){return l.h})),n.d(e,"l",(function(){return l.j})),n.d(e,"m",(function(){return l.k})),n.d(e,"n",(function(){return l.l})),n.d(e,"o",(function(){return l.m}));var f=n("./src/core/utils/resizing.js");n.d(e,"e",(function(){return f.a}));var p=n("./src/core/utils/movieclip.js");function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"j",(function(){return p.a}));var v={pixiInstance:y(y({},t),{},{animate:{MovieClip:u.MovieClip,Ease:u.Ease},heaven:{SpriteH:c.a}}),ImagesCache:o.d,SoundsCache:o.f,AnimationsCache:o.a,ShapesCache:o.e,fromFrame:i.a,getTexture:i.b,Quark:r,createEmitter:a.a,sourceTypes:s.c,ticker:h.a.Ticker,delay:l.c,getRandomFloat:l.f,getRandomInt:l.g}}).call(this,n("./node_modules/pixi.js/dist/esm/pixi.js"))},"./src/core/utils/misc.js":function(t,e,n){"use strict";n.d(e,"h",(function(){return l})),n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return f})),n.d(e,"i",(function(){return p})),n.d(e,"g",(function(){return d})),n.d(e,"f",(function(){return y})),n.d(e,"k",(function(){return m})),n.d(e,"l",(function(){return v})),n.d(e,"a",(function(){return _})),n.d(e,"d",(function(){return g})),n.d(e,"j",(function(){return b})),n.d(e,"e",(function(){return E})),n.d(e,"m",(function(){return T}));n("./node_modules/pixi.js/dist/esm/pixi.js");var r=n("./node_modules/@games/gsap/all.js"),i=n("./node_modules/ramda/es/mergeDeepRight.js"),o=n("./node_modules/ramda/es/clone.js"),a=n("./src/config.js"),s=n("./node_modules/seedrandom/index.js"),u=n.n(s);var c=null;function l(t,e){for(var n=new Array(t),r=0;r<t;r++){var i="function"==typeof e?e(r):e;n[r]=void 0!==i?i:r}return n}function h(t,e){return r.b.to({val:0},{duration:t,val:1}).then(e)}function f(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length<2||void 0===e[1]?e[0]:e.reduce(i.a)}function p(){c=u()(a.a.static?a.a.randomSeed:null)}function d(t,e){return Math.floor(y(t,e+1))}function y(t,e){return c()*(e-t)+t}function m(t,e){var n=t.sort((function(){return.5-Math.random()}));return void 0===e?n[0]:n.slice(0,e)}function v(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||(t=Object(o.a)(t));for(var n=t.length-1;n>0;n--){var r=d(0,n),i=t[r];t[r]=t[n],t[n]=i}return t}function _(t){return d(1,100)<=t}function g(t,e){var n=Math.abs(t%e);return 0!==n&&t<0?e-n:n}function b(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-5,r=.25,i=0,o=e-t(i);Math.abs(o)>n;)(o=e-t(i+=r))<0!=r<0&&(r*=-.5);return i}function E(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{reel:a.a.reels.tiles.visible*t+e,index:0}}function T(t){var e=a.a.reels.tiles.visible;return{reel:Math.floor(t/e),index:t-Math.floor(t/e)*e}}},"./src/core/utils/mixins.js":function(t,e,n){"use strict";var r=n("./node_modules/pixi.js/dist/esm/pixi.js"),i=n("./src/core/utils/EventsHub.js"),o=n("./src/core/utils/canvasErrors.js"),a=n("./node_modules/howler/dist/howler.js"),s=n("./node_modules/pixi-heaven/lib/pixi-heaven.es.js");function u(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}r.LoaderResource.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(e)?e[n]:e));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}document.body.appendChild(this.data),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.setAttribute("preload","auto"),this.data.setAttribute("webkit-playsinline",""),this.data.setAttribute("playsinline",""),this.data.setAttribute("autoplay",""),this.data.setAttribute("controls","false"),this.data.crossOrigin="anonymous",this.data.addEventListener("stalled",(function(t){console.warn("Failed to fetch video data, but trying.")})),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},r.Graphics.prototype.setRenderable=r.Graphics.prototype.re=function(t){return this.renderable=!!t,this},r.ContextSystem.prototype.handleContextLost=function(t){var e=o.a.find((function(e){return e.match===t.type}));if(e){var n=e.priority,r=e.nonRecoverable,a=e.details,s=e.errorType;i.a.emit(i.a.events.ERROR,{priority:n,nonRecoverable:r,details:a,errorType:s})}},r.DisplayObject.prototype.promises={press:function(){return new Promise((function(t){t()}))}},r.DisplayObject.prototype.setMask=r.DisplayObject.prototype.ma=function(t){return t&&!(t instanceof r.Graphics||t instanceof r.Sprite||t instanceof s.a)?("undefined"!=typeof console&&console.warn&&console.warn("Warning: Masks can only be PIXI.Graphics, PIXI.Sprite or Pixi heaven SpriteH objects."),this):(t instanceof s.a?this.setSpriteMask(t):this.mask=t,this)},r.DisplayObject.prototype.maS=r.DisplayObject.prototype.setSpriteMask=function(t){if(!(t&&t instanceof s.a))return this;var e=function(t,e){t.maskSprite=e,t.hasSpriteMask=!0,t.pluginName="batchMasked"},n=function(t,n){t.on("childAdded",(function(t){t instanceof r.Sprite&&t.convertToHeaven&&t.convertToHeaven(),e(t,n)}))};return this instanceof s.a?e(this,t):this.maskSprite=t,n(this,t),function t(r,i){if(r.children){var o,a=u(r.children);try{for(a.s();!(o=a.n()).done;){var c=o.value;c instanceof s.a?e(c,i):c.children.length&&(n(c,i),t(c,i))}}catch(t){a.e(t)}finally{a.f()}}}(this,t),this},r.Container.prototype.setBlendMode=function(t){return this._blendMode=t,function e(n){n.children&&n.children.forEach((function(n){n instanceof r.Sprite?n.blendMode=t:n.children.length&&e(n)}))}(this),this},HowlerGlobal.prototype._autoSuspend=function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&Howler.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var n=0;n<t._howls[e]._sounds.length;n++)if(!t._howls[e]._sounds[n]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){t.autoSuspend&&(t._suspendTimer=null,null==t.ctx||"interrupted"===t.ctx.state?(t.state="suspended",t._autoResume()):(t.state="suspending",t.ctx.suspend().then((function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())}))))}),3e4),t}},Sound.prototype.reset=function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._node.disconnect(0),this._node.connect(Howler.masterGain),this._id=++Howler._counter,this},a.Howl.prototype.loop=function(){var t,e,n,r=this,i=arguments;if(0===i.length)return r._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(n=r._soundById(parseInt(i[0],10)))&&n._loop;t=i[0],r._loop=t}else 2===i.length&&(t=i[0],e=parseInt(i[1],10));for(var o=r._getSoundIds(e),a=0;a<o.length;a++)(n=r._soundById(o[a]))&&(n._loop=t,r._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=t,t&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop,r.playing(o[a])&&(r.pause(o[a],!0),r.play(o[a],!0)))));return r};r.Loader.prototype._onLoad=function(t){var e=this._queue.__proto__.constructor,n=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),e.eachSeries(this._afterMiddleware,(function(e,r){e.call(n,t,r)}),(function(){t.error&&"png"===t.extension||t.onAfterMiddleware.dispatch(t),n.progress=Math.min(100,n.progress+t.progressChunk),n.onProgress.dispatch(n,t),t.error?n.onError.dispatch(t.error,n,t):n.onLoad.dispatch(n,t),t.error&&"png"===t.extension?n._resourcesParsing=[]:n._resourcesParsing.splice(n._resourcesParsing.indexOf(t),1),n._queue.idle()&&0===n._resourcesParsing.length&&n._onComplete()}),!0)}},"./src/core/utils/movieclip.js":function(t,e,n){"use strict";function r(t){if(!Array.isArray(t.labels))return!1;for(var e=t.labels.map((function(t){return t.label})),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.every((function(t){return e.includes(t)}))}n.d(e,"a",(function(){return r}))},"./src/core/utils/particles.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var r=n("./node_modules/@games/quark/dist/quark.js"),i=n("./node_modules/pixi.js/dist/esm/pixi.js"),o=n("./src/core/utils/textures.js"),a=n("./src/core/utils/Cache.js"),s=n("./src/core/utils/misc.js"),u=n("./node_modules/@games/pixi-animate/lib/index.js"),c=n("./src/config.js"),l=n("./src/core/utils/CombinedTicker.js"),h=n("./src/core/utils/constants.js");function f(t,e,n){return(f=p()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&d(i,n.prototype),i}).apply(null,arguments)}function p(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function y(t){return function(t){if(Array.isArray(t))return m(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function v(t){var e=new r.Emitter(t),n=function(t){var e=t.sourceType,n=t.behaviors,r=void 0===n?{}:n,o=t.maxParticles,s=void 0===o?500:o,u=null;u=e!==h.c.MOVIE_CLIP&&e!==h.c.MIXED&&a.b instanceof i.Renderer?new i.ParticleContainer(s,{rotation:Boolean(r.rotation),vertices:Boolean(r.scale),alpha:Boolean(r.alpha)}):new i.Container;return u}(t),p=t.emitterGuide;if(c.a.static||l.a.Ticker.isLowFPS)return p.visible=!1,{emitter:e,container:new i.Container};!function(t,e){var n=e.behaviors;if(!n)return;var i=n.zone,o=n.alpha,a=n.attraction,s=(n.collision,n.gravity),u=n.gravityWell,c=n.randomDrift,l=n.repulsion,h=n.rotation,p=n.scale;if(i){var d,m,v=i.guide.getBounds(),_=v.x,g=v.y,b=v.width,E=v.height;switch(i.type){case"bounding":m=r.CrossZone.CROSS_TYPES.BOUND;break;case"dead":m=r.CrossZone.CROSS_TYPES.DEAD}(d=new r.CrossZone(new r.RectZone(_,g,b,E),m))&&(t.addBehavior(d),i.guide.visible=!1)}o&&t.addBehavior(new r.Alpha(r.getSpan.apply(void 0,y(o.from)),o.to&&r.getSpan.apply(void 0,y(o.to))));a&&t.addBehavior(new r.Attraction(f(r.Vector2D,y(a.center)),a.force,a.radius));s&&t.addBehavior(f(r.Gravity,y(s)));u&&t.addBehavior(new r.GravityWell(f(r.Vector2D,y(u.center)),u.force));c&&t.addBehavior(new r.RandomDrift(c.x,c.y,c.delay));l&&t.addBehavior(new r.Repulsion(f(r.Vector2D,y(l.center)),l.force,l.radius));h&&t.addBehavior(new r.Rotate(r.getSpan.apply(void 0,y(h.from)),h.to&&r.getSpan.apply(void 0,y(h.to))));p&&t.addBehavior(new r.Scale(r.getSpan.apply(void 0,y(p.from)),p.to&&r.getSpan.apply(void 0,y(p.to))))}(e,t),function(t,e){var n=e.initializers,i=e.emitterGuide,o=e.emitterGuideType;if(!n)return;var a=n.life,s=n.mass,u=n.radius,c=(n.rate,n.velocity);if(i){var l,p=i.width,d=i.height;switch(o){case h.b.CIRCLE:l=new r.CircleZone(0,0,p/2);break;case h.b.RECTANGLE:l=new r.RectZone(0,0,p,d)}l&&t.addInitialize(new r.Position(l))}a&&t.addInitialize(f(r.Life,y(a)));s&&t.addInitialize(f(r.Mass,y(s)));u&&t.addInitialize(f(r.Radius,y(u)));c&&(c.speed=[].concat(c.speed),t.addInitialize(new r.Velocity(c.speed,c.angle,"polar")))}(e,t);var d=e.initializes.find((function(t){return t.zone}));p.visible=!1;var m=function(){if(l.a.Ticker.isLowFPS)return console.warn("Turning off particles due to low fps"),e.stopEmit(),e.destroy(),void v();var r,i,o,a,s;!e.dead||n.children.length?(e.p.x=p.x,e.p.y=p.y,i=(r=t).resizable,o=r.emitterGuideType,a=h.b.CIRCLE,s=h.b.RECTANGLE,!i||o!==a&&o!==s||function(t,e){t.zone.width!==e.width&&(t.zone.width=e.width);t.zone.height!==e.height&&(t.zone.height=e.height);t.zone.radius&&(t.zone.radius=e.width/2)}(d,p),function(t,e){var n,r;return t.length&&(null==e||null===(n=e.behaviors)||void 0===n||null===(r=n.zone)||void 0===r?void 0:r.moving)}(e.behaviors,t)&&function(t,e){var n=t.find((function(t){return"CrossZone"===t.name})).zone,r=e.behaviors.zone.guide;n.x!==r.x&&(n.x=r.x);n.y!==r.y&&(n.y=r.y);n.width!==r.width&&(n.width=r.width);n.height!==r.height&&(n.height=r.height)}(e.behaviors,t),e.update(.0167)):v()},v=function(){n.visible=!1,n.destroy(),l.a.Ticker.remove(m)};return e.particleCreated.add((function(e){var r=function(t){var e=t.sourceType,n=t.source;switch(e){case h.c.MOVIE_CLIP:return new(_(n));case h.c.MIXED:var r=_(n);return"function"==typeof r?new r:new i.Sprite(Object(o.a)(r));default:return new i.Sprite(Object(o.a)(_(n)))}}(t);e.source=r,r.scale.set(e.scale),r.angle=e.rotation,r.anchor&&r.anchor.set(.5),"string"==typeof t.blendMode&&(r.blendMode=i.BLEND_MODES[t.blendMode.toUpperCase()]),t.randomFrameStart&&r instanceof u.MovieClip&&r.gotoAndPlay(function(t){return Object(s.g)(0,t.totalFrames-1)}(r)),n.addChild(r)})),e.particleUpdate.add((function(t){var e=t.source;e.position.x=t.p.x,e.position.y=t.p.y,e.scale.set(t.scale),e.alpha=t.alpha,e.angle=t.rotation})),e.particleDead.add((function(t){n.removeChild(t.source),t.source.destroy(),delete t.source,n.children.length||v()})),l.a.Ticker.add(m),{emitter:e,container:n}}function _(t){return t instanceof Array?Object(s.k)(t):t}},"./src/core/utils/resizing.js":function(t,e,n){"use strict";function r(t,e){var n=e.width,r=e.height,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=n/t.width,s=r/t.height,u=o?1/0:1,c=Math.min(a,s,u);t.scale.x*=i?a:c,t.scale.y*=i?s:c}n.d(e,"a",(function(){return r}))},"./src/core/utils/textures.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return u}));var r=n("./node_modules/pixi.js/dist/esm/pixi.js"),i=n("./src/core/loader/index.js"),o=n("./src/core/utils/EventsHub.js"),a=n("./src/core/utils/Cache.js");function s(t){return i.d[t]||(console.warn("TextureCache: '".concat(t,"' no such texture in texture cache")),o.a.emit(o.a.events.ERROR,{priority:"high",nonRecoverable:!0,details:{message:"TextureCache: '".concat(t,"' no such texture in texture cache")},errorType:"crash"})),i.d[t]||r.Texture.EMPTY}function u(t){return a.b.generateTexture(t)}},"./src/features/index.js":function(t,e,n){"use strict";var r=n("./src/core/utils/index.js"),i=n("./src/core/utils/constants.js"),o=n("./node_modules/pixi.js/dist/esm/pixi.js"),a=n("./src/core/utils/Cache.js"),s=n("./src/core/utils/CombinedTicker.js");function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){c(o,r,i,a,s,"next",t)}function s(t){c(o,r,i,a,s,"throw",t)}a(void 0)}))}}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e=d(e),function(t,e){if(e&&("object"===u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],d(t).constructor):e.apply(t,n))}function p(t,e,n){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g={INIT:"init",SHOW:"show",HIDE:"hide"},b=v(v({},i.a),{},{PLAY_ANIM_START:"cover_play_anim_start",PLAY_ANIM_END:"cover_play_anim_end"}),E=function(t){function e(t){var n,r=t.name,i=void 0===r?"Cover":r,o=t.animation,a=t.config,s=void 0===a?{}:a,u=t.mask,c=void 0===u?null:u,l=t.data,h=void 0===l?{}:l,p=t.stopTickChildren,d=t.rtMode,y=void 0!==d&&d;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=f(this,e)).name=i,n.mask=c,n._data=h,n._config=s,n._rtMode=y,n._isShown=!1,n._isShowing=!1,n._isHiding=!1,n._loopsCount=null,n._rtSprite=null,n._rtTickUpdater=null,n._anim=null,n._createAnim(o),n._init({stopTickChildren:y||p||s.stopTickChildren}),n}var n,i,u,c,m,_,E,T,w,x;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(e,t),n=e,i=[{key:"rtMode",get:function(){return this._rtMode}},{key:"data",get:function(){return this._data}},{key:"anim",get:function(){return this._anim}},{key:"isShown",get:function(){return this._isShown}},{key:"isShowing",get:function(){return this._isShowing}},{key:"isPlaying",get:function(){return!this._anim.paused}},{key:"isHiding",get:function(){return this._isHiding}},{key:"show",value:(x=l(regeneratorRuntime.mark((function t(){var n,r,i,o,a,s=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=s.length>0&&void 0!==s[0]?s[0]:{}).force||!this._isShowing&&!this._isShown){t.next=3;break}return t.abrupt("return");case 3:return r=n.animLabel,i=void 0===r?e.animLabels.SHOW:r,o=n.removeAtEnd,a=void 0!==o&&o,this._isShowing=!0,this._rtMode||this._anim.parent||this.addChild(this._anim),this.emit(e.events.SHOW_START,{label:i}),t.next=9,this.play(i,n);case 9:this._isShowing=!1,this._isShown=!0,this.emit(e.events.SHOW_END,{label:i}),a&&this.remove();case 13:case"end":return t.stop()}}),t,this)}))),function(){return x.apply(this,arguments)})},{key:"hide",value:(w=l(regeneratorRuntime.mark((function t(){var n,r,i,o,a,s,u,c=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=c.length>0&&void 0!==c[0]?c[0]:{}).force||(this._isShown||this._isShowing)&&!this._isHiding){t.next=3;break}return t.abrupt("return");case 3:return r=n.animLabel,i=void 0===r?e.animLabels.HIDE:r,o=n.stopTickChildren,a=void 0!==o&&o,s=n.removeAtEnd,u=void 0===s||s,this._isHiding=!0,this.emit(e.events.HIDE_START,{label:i}),t.next=8,this.play(i,v({stopTickChildren:a},n));case 8:this._isHiding=!1,this._isShown=!1,this.emit(e.events.HIDE_END,{label:i}),u&&this.remove();case 12:case"end":return t.stop()}}),t,this)}))),function(){return w.apply(this,arguments)})},{key:"play",value:(T=l(regeneratorRuntime.mark((function t(n){var r,i,o,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:{},this._isValid(n)){t.next=3;break}return t.abrupt("return");case 3:return i=r.stopTickChildren,o=void 0!==i&&i,this._rtMode||this._anim.parent||this.addChild(this._anim),this.emit(e.events.PLAY_ANIM_START,{label:n}),t.next=8,this._playAnimation(n,r);case 8:o&&this._anim.stopTick(!0),this.emit(e.events.PLAY_ANIM_END,{label:n});case 10:case"end":return t.stop()}}),t,this)}))),function(t){return T.apply(this,arguments)})},{key:"stop",value:(E=l(regeneratorRuntime.mark((function t(){var e,n,r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},n=e.stopTickChildren,r=void 0===n||n,t.next=4,this._exec((function(t){t.promises.stop(),r&&t.stopTick(!0)}));case 4:case"end":return t.stop()}}),t,this)}))),function(){return E.apply(this,arguments)})},{key:"finish",value:(_=l(regeneratorRuntime.mark((function t(){var e,n,r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:{},!this._anim.paused){t.next=3;break}return t.abrupt("return");case 3:return n=e.stopTickChildren,r=void 0===n||n,t.next=6,this._exec((function(t){return t.promises.finish()}));case 6:r&&this._anim.stopTick(!0);case 7:case"end":return t.stop()}}),t,this)}))),function(){return _.apply(this,arguments)})},{key:"skip",value:(m=l(regeneratorRuntime.mark((function t(){var e,n,r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.anim,n=e.currentLabel,r=e.totalFrames,i=this._getNextLabel(n),o=(null==i?void 0:i.position)-1||r-1,this.anim.promises.stop(),this.anim.promises.gotoAndStop(o);case 5:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"remove",value:function(){this.removeChild(this._anim),this._removeTickUpdater(),this._reset()}},{key:"destroy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.children,r=void 0===n||n;this._rtSprite&&(this._rtSprite.destroy(!0),this._rtSprite=null),p(d(e.prototype),"destroy",this).call(this,{children:r}),this._removeTickUpdater(),this._rtTickUpdater=null,this._anim=null,this._data=null,this._config=null}},{key:"generateRenderTexture",value:function(t){var e=t.padding,n=Object(a.e)(this._anim,e),r=n.texture,i=n.pivot,o=i.x,s=i.y,u=n.tickUpdater;return this.x+=o,this.y+=s,{source:this._anim,texture:r,pivot:{x:-o,y:-s},tickUpdater:u}}},{key:"applyTexture",value:function(t){var e=t.texture,n=t.source,r=t.pivot,i=t.tickUpdater,o=this._createRtSprite({texture:e,source:n,pivot:r});this._rtTickUpdater=i,this.stop({stopTickChildren:!0}),this.removeChild(this._anim),this.addChild(o),this._rtSprite=o,this._rtMode=!0}},{key:"removeTexture",value:function(){this._rtMode&&(this._removeTickUpdater(),this.removeChild(this._rtSprite),this.addChild(this._anim),this._rtTickUpdater=null,this._rtMode=!1,this._restoreAnimation())}},{key:"_playAnimation",value:function(t,e){return this._loopsCount=e.repeat,this._exec((function(n){return n.promises.gotoAndPlay(t,e)}))}},{key:"_restoreAnimation",value:(c=l(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this._rtSprite.animSource).paused){t.next=9;break}return t.next=4,this._anim.promises.gotoAndPlay(e.currentFrame);case 4:return t.next=6,this._anim.promises.stop();case 6:this._anim.promises.gotoAndPlay(e.currentLabel,{repeat:this._loopsCount}),t.next=10;break;case 9:this._anim.promises.gotoAndStop(e.currentFrame);case 10:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"_removeTickUpdater",value:function(){this._rtTickUpdater&&s.a.Ticker.remove(this._rtTickUpdater)}},{key:"_createAnim",value:function(t){try{this._anim=new t}catch(t){console.error('"[Cover]('.concat(this.name,')" ==> Failed to create movieClip!')),console.error(t)}}},{key:"_createRtSprite",value:function(t){var e=t.texture,n=t.source,r=t.pivot,i=this._rtSprite;return i?i.texture=e:i=new o.Sprite(e),i.animSource=n,i.pivot.set(r.x,r.y),i}},{key:"_exec",value:function(t){return t(this._rtMode?this._rtSprite.animSource:this._anim)}},{key:"_init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.stopTickChildren,i=void 0===n||n;if(this._anim.promises.gotoAndStop){var o=Object(r.j)(this._anim,e.animLabels.INIT)?e.animLabels.INIT:0;this._anim.promises.gotoAndStop(o)}i&&this._anim.stopTick(!0)}},{key:"_isValid",value:function(t){return!(!this._hasFrame(this._anim,t)&&!Object(r.j)(this._anim,t)&&(console.warn('"'.concat(this.name,'" ==> Missing animation state: ').concat(t)),1))}},{key:"_hasFrame",value:function(t,e){return!!Number.isInteger(e)&&e>=0&&e<t.totalFrames}},{key:"_getNextLabel",value:function(t){var e=this.anim.labels,n=e.find((function(e){return e.label===t})),r=e.indexOf(n);return e[r+1]}},{key:"_reset",value:function(){this._isShown=!1,this._isShowing=!1,this._isHiding=!1,this._rtMode=!1}}],u=[{key:"events",get:function(){return b}},{key:"animLabels",get:function(){return g}}],i&&h(n.prototype,i),u&&h(n,u),e}(o.Container),T=n("./src/core/Platform.js"),w=n("./node_modules/@games/gsap/all.js"),x=n("./node_modules/@games/dope/src/Dopamine.js");function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function P(t,e,n){return e=R(e),function(t,e){if(e&&("object"===S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],R(t).constructor):e.apply(t,n))}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function A(t,e){return(A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var I={TOP_LEFT:{x:0,y:0},LEFT:{x:0,y:.5},BOTTOM_LEFT:{x:0,y:1},TOP_CENTER:{x:.5,y:0},CENTER:{x:.5,y:.5},BOTTOM_CENTER:{x:.5,y:1},TOP_RIGHT:{x:1,y:0},RIGHT:{x:1,y:.5},BOTTOM_RIGHT:{x:1,y:1}},C={BANGUP_END:"counter_bangup_end"},k=function(t){function e(t){var n,r=t.config;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=P(this,e))._config=r,n._count=1,n._num=n._createNum(),n._updateTween=null,n._template=r.template||"{{val}}",n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&A(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return C}}],(r=[{key:"alignValues",get:function(){return I}},{key:"currentCount",get:function(){return this._count},set:function(t){this._updateNum(t)}},{key:"update",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.duration,i=void 0===r?0:r,o=n.easing,a=void 0===o?"none":o,s=n.onUpdate,u=n.from,c=void 0===u?this._count:u,l={value:c};return this._updateTween=w.b.to(l,{duration:i,value:t,ease:a,onUpdate:function(){e._updateNum(e._config.round?parseInt(l.value):l.value),s&&s(l.value)},onComplete:function(){e.emit(C.BANGUP_END,{value:l.value})}}),this._updateTween}},{key:"reset",value:function(){this._updateTween=null,this._updateNum(1)}},{key:"skip",value:function(){this._updateTween&&1!==this._updateTween.progress()&&this._updateTween.progress(1)}},{key:"prepareText",value:function(){return Object(a.a)(this._num)}},{key:"_updateNum",value:function(t){this._count=this._format(t,this._config.precision);var e=this._config.currency?x.a.format(this._count,this._config.hideDecimals):this._count;this._num.text=this._template.replace("{{val}}",e),void 0!==this._config.letterSpacing&&null!==this._config.letterSpacing&&(this._num.letterSpacing=this._config.letterSpacing*T.a.resolutionScale,this._align(this._num,this._config.alignType))}},{key:"_createNum",value:function(){var t=this._config,e=t.font,n=t.alignType,r=t.fontSize,i=new o.BitmapText("",{fontName:e,fontSize:r});return this.addChild(i),this._align(i,n),i}},{key:"_align",value:function(t,e){var n=this.alignValues[e],r=n.x,i=n.y;t.anchor.set(r,i)}},{key:"_format",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return parseFloat(t.toFixed(e))}}])&&O(n.prototype,r),i&&O(n,i),e}(o.Container);function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function M(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?M(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function B(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){L(o,r,i,a,s,"next",t)}function s(t){L(o,r,i,a,s,"throw",t)}a(void 0)}))}}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U(t,e,n){return e=H(e),function(t,e){if(e&&("object"===N(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],H(t).constructor):e.apply(t,n))}function G(t,e,n){return(G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=H(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function V(t,e){return(V=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var X={INIT:"init",INCREMENT_START:"incrementStart",INCREMENT_END:"incrementEnd",DECREMENT_START:"decrementStart",DECREMENT_END:"decrementEnd",ONE_SPIN:"oneSpin",LAST_SPIN:"lastSpin",RETURN_SPINS:"returnSpins",SPIN:"spin",SPINS:"spins"},W=function(t){function e(t){var n,r=t.name,i=t.animation,o=t.config,a=t.mask,s=t.data,u=t.stopTickChildren;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=U(this,e,[{name:r,animation:i,config:o,mask:a,data:s,stopTickChildren:u}]))._count=0,n._isInLastSpin=!1,n._counterMc=n._anim.counter,n._counter=n._createCounter(),n._counterMc.promises.gotoAndStop("init"),n}var n,r,i,o,a,s,u,c,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V(t,e)}(e,t),n=e,(r=[{key:"animLabels",get:function(){return X}},{key:"count",get:function(){return this._count}},{key:"activate",value:(l=B(regeneratorRuntime.mark((function t(){var e,n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:{},void 0!==(n=e.spins)){t.next=4;break}throw new Error("Spins count not provided!");case 4:return this._counter.reset(),this._count=n,this._isInLastSpin=!1,this._addCounter(),this._counter.update(this._count),this.anim.textContainer.promises.gotoAndStop(this.animLabels.INIT),t.next=12,this.show();case 12:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"update",value:(c=B(regeneratorRuntime.mark((function t(){var e,n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},n=e.spins,this._count+=n,t.abrupt("return",this._updateCount(j(j({},e),{},{animLabelStart:this.animLabels.INCREMENT_START,animLabelEnd:this.animLabels.INCREMENT_END})));case 4:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"deactivate",value:(u=B(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.hide();case 2:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"increment",value:(s=B(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._count++,this._updateCount({animLabelStart:this.animLabels.INCREMENT_START,animLabelEnd:this.animLabels.INCREMENT_END});case 2:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"decrement",value:function(){this._count&&(this._count--,this._updateCount({animLabelStart:this.animLabels.DECREMENT_START,animLabelEnd:this.animLabels.DECREMENT_END}))}},{key:"skip",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._counter.skip(),t)return G(H(e.prototype),"skip",this).call(this)}},{key:"_updateCount",value:(a=B(regeneratorRuntime.mark((function t(){var e,n,r,i,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:{},n=e.animLabelStart,r=e.animLabelEnd,i=this._counterMc.promises.gotoAndPlay,t.next=5,i(n);case 5:return t.next=7,this._onCountAnimHit(e);case 7:return t.next=9,i(r);case 9:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"_onCountAnimHit",value:(o=B(regeneratorRuntime.mark((function t(){var e,n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:{},n=e.duration,!(this._count>0)){t.next=5;break}return t.next=5,this._counter.update(this._count,{duration:n});case 5:this._updateTitle();case 6:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"_addCounter",value:function(){this._counterMc.numContainer.inner.removeChildren(),this._counterMc.numContainer.inner.addChild(this._counter)}},{key:"_updateTitle",value:function(){var t=this.anim.textContainer,e=this.animLabels,n=e.LAST_SPIN,r=e.RETURN_SPINS,i=e.SPIN,o=e.SPINS,a=e.INIT;this._count?(this._isInLastSpin&&this.play(r),1===this._count?t.promises.gotoAndPlay(i):[o,a].includes(t.currentLabel)||t.promises.gotoAndPlay(o),this._isInLastSpin=!1):(this._isInLastSpin=!0,this.play(n))}},{key:"_createCounter",value:function(){var t=this._counterMc.numContainer.inner.getLocalBounds().height;return new k({config:j({fontSize:t},this._config.counter)})}}])&&F(n.prototype,r),i&&F(n,i),e}(E),Y=n("./src/core/utils/EventsHub.js"),z=n("./src/core/utils/ExternalInput.js");function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function K(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Z(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){K(o,r,i,a,s,"next",t)}function s(t){K(o,r,i,a,s,"throw",t)}a(void 0)}))}}function $(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function J(t,e,n){return e=Q(e),function(t,e){if(e&&("object"===q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Q(t).constructor):e.apply(t,n))}function Q(t){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tt(t,e){return(tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function et(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?et(Object(n),!0).forEach((function(e){rt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var it=nt(nt({},E.animLabels),{},{SHOW_BUTTON:"showButton",INCREMENT_START:"incrementStart",INCREMENT_END:"incrementEnd",WIN:"win"}),ot=nt(nt({},E.events),{},{BUTTON_CLICKED:"button_clicked",COUNT_END:"count_end"}),at=function(t){function e(t){var n,r=t.name,i=t.animation,o=t.config,a=t.mask,s=t.data,u=t.stopTickChildren;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=J(this,e,[{name:r,animation:i,config:o,mask:a,data:s,stopTickChildren:u}]))._skip=null,n._count=1,n._finalCount=0,n._counterMc=n._anim.counter,n._counter=n._createCounter(),n._counterMc.promises.gotoAndStop("init"),n}var n,i,o,a,s,u,c,l,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}(e,t),n=e,i=[{key:"counter",get:function(){return this._counter}},{key:"activate",value:(h=Z(regeneratorRuntime.mark((function t(){var n,r,i,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.length>0&&void 0!==o[0]?o[0]:{},this._count=1,this._counter.reset(),r=n.spins,i=n.instant,this._finalCount=r,i&&(this._count=r,this._counter.update(r)),this._addCounter(),this._counterMc.promises.gotoAndStop("init"),t.next=10,this.show();case 10:if(i){t.next=14;break}return t.next=13,this._countTo(r);case 13:this.emit(e.events.COUNT_END,{count:this._counter.currentCount});case 14:return t.next=16,this._win();case 16:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"showStart",value:(l=Z(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Y.a.emit(Y.a.events.FEATURE_CONTROLS_SHOW,{options:this._getButtonOptions()}),t.next=3,z.a.when("FREE_SPINS_START");case 3:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"skip",value:(c=Z(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._skip){t.next=2;break}return t.abrupt("return");case 2:this._skip(),this._skip=null,this._count=this._finalCount,this._counter.update(this._count);case 6:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"start",value:(u=Z(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Y.a.emit(Y.a.events.FEATURE_CONTROLS_HIDE),this.emit(e.events.BUTTON_CLICKED);case 2:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"_countTo",value:(s=Z(regeneratorRuntime.mark((function t(n){var i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Z(regeneratorRuntime.mark((function t(o){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i._skip=o,i._count++,!(i._count>n)){t.next=4;break}return t.abrupt("return",o());case 4:return t.next=6,i._counterMc.promises.gotoAndPlay(e.animLabels.INCREMENT_START);case 6:return i._counter.update(i._count),t.next=9,i._counterMc.promises.gotoAndPlay(e.animLabels.INCREMENT_END);case 9:return t.next=11,Object(r.d)(i._getCountIntervalDelay());case 11:return t.abrupt("return",o(i._countTo(n)));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(t){return s.apply(this,arguments)})},{key:"_win",value:(a=Z(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._counterMc.promises.gotoAndPlay(e.animLabels.WIN);case 2:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"_getCountIntervalDelay",value:function(){var t=this._config.countUpdate.interval;return Object(r.h)(t.min,t.max)}},{key:"_addCounter",value:function(){this._counterMc.numContainer.inner.removeChildren(),this._counterMc.numContainer.inner.addChild(this._counter)}},{key:"_createCounter",value:function(){var t=this._counterMc.numContainer.inner.getLocalBounds().height;return new k({config:nt({fontSize:t},this._config.counter)})}},{key:"_getButtonOptions",value:function(){return{align:"center",buttons:[{name:"FREE_SPINS_START",label:x.c.texts.FREE_SPINS_START,type:"primary",size:"large",spacebar:!0}]}}}],o=[{key:"events",get:function(){return ot}},{key:"animLabels",get:function(){return it}}],i&&$(n.prototype,i),o&&$(n,o),e}(E);function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(n),!0).forEach((function(e){lt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ht(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pt(t,e,n){return e=dt(e),function(t,e){if(e&&("object"===st(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],dt(t).constructor):e.apply(t,n))}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yt(t,e){return(yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mt=function(t){function e(t){var n,r=t.name,i=t.animation,o=t.config,a=t.mask,s=t.data,u=t.stopTickChildren;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=pt(this,e,[{name:r,animation:i,config:o,mask:a,data:s,stopTickChildren:u}]))._counterMc=n._anim.counter,n._counter=n._createCounter(),n}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yt(t,e)}(e,t),n=e,(r=[{key:"activate",value:(o=regeneratorRuntime.mark((function t(){var e,n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},n=e.spins,this._counter.update(n),this._counterMc.numContainer.inner.removeChildren(),this._counterMc.numContainer.inner.addChild(this._counter),t.abrupt("return",this.show());case 6:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){ht(i,n,r,a,s,"next",t)}function s(t){ht(i,n,r,a,s,"throw",t)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"_createCounter",value:function(){var t=this._counterMc.numContainer.inner.getLocalBounds().height;return new k({config:ct({fontSize:t},this._config.counter)})}}])&&ft(n.prototype,r),i&&ft(n,i),e}(E),vt=n("./src/core/features/reels/engines/ReelMaster.js"),_t=n("./src/core/features/reels/renderers/Renderer.js"),gt=n("./src/core/features/reels/buffers/Buffer.js"),bt=n("./node_modules/ramda/es/flatten.js");function Et(t){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wt(t,e,n){return e=xt(e),function(t,e){if(e&&("object"===Et(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],xt(t).constructor):e.apply(t,n))}function xt(t){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function St(t,e){return(St=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ot(Object(n),!0).forEach((function(e){Rt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var At=Pt({},gt.a.events),It=function(t){function e(t){var n,r=t.bufferData,i=t.index,o=t.tilesGenerator,a=t.cfg;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=wt(this,e)).index=i,n.currentPosition=null,n.targetPosition=null,n.middlePosition=null,n.mergeLeftPosition=null,n.mergeRightPosition=null,n.distance=null,n.size=null,n._cfg=a,n._tilesGenerator=o,n.init(r),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&St(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return At}}],(r=[{key:"init",value:function(t){var e=t[0].length,n=this.parseData({data:t,isReal:!0},this._cfg.customParser);this.update(n,e,e)}},{key:"merge",value:function(t,e){var n=t[0].length,r=this.parseData({data:t,isReal:!0},this._cfg.customParser);this.expandLeft(r.length,r),this.setTargetPosition(n),e&&this.resizeDistance(e,r.length)}},{key:"fetchEntry",value:function(t){return this.data[t+this.currentPosition]}},{key:"changeEntry",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t=t||0,this._data[this.targetPosition+t]=Pt(Pt({},this._data[this.targetPosition+t]),{},n?{id:e,replaced:null}:{replaced:e})}},{key:"fetchResultScreen",value:function(){return this._data.slice(this.targetPosition,this.targetPosition+this._cfg.visible)}},{key:"resetEntry",value:function(t){this.changeEntry(t,null)}},{key:"setCurrentPosition",value:function(t,e){this.currentPosition=t,this._updatePositions(e)}},{key:"setTargetPosition",value:function(t,e){this.targetPosition=t,this._updatePositions(e)}},{key:"setTargetValue",value:function(t,e){e=e||0,this._data[this.targetPosition+e].id=t}},{key:"cleanLeft",value:function(){var t=this.currentPosition;this._data.splice(0,t),this.update(this._data,0,this.targetPosition-t)}},{key:"expandLeft",value:function(t,e){e||(e=this._tilesGenerator.generateRandomTiles({count:t,index:this.index}),e=this.parseData({data:e,isReal:!1},this._cfg.customParser));var n=this._data;n.splice(0,0,e),n=Object(bt.a)(n),this.update(n,this.currentPosition+t,this.targetPosition+t)}},{key:"expandDistance",value:function(t,e){if(!Number.isInteger(t)||!Number.isInteger(e))return console.error("Wrong configuration =>","howMany:",t,", fromPos:",e);var n=this._tilesGenerator.generateRandomTiles({count:t,index:this.index});n=this.parseData({data:n,isReal:!1},this._cfg.customParser);var r=this._data;r.splice(e,0,n),r=Object(bt.a)(r),this.update(r,this.currentPosition+t,this.targetPosition),this.mergeLeftPosition=e,this.mergeRightPosition=e+t}},{key:"reduceDistance",value:function(t,e){if(!Number.isInteger(t)||!Number.isInteger(e))return console.error("Wrong configuration =>","howMany:",t,", fromPos:",e);var n,r=this.currentPosition-e,i=Math.round(t/2);n=r>i?e-i:e-t+r,this._data.splice(n,t),this.update(this._data,this.currentPosition-t,this.targetPosition),this.mergeLeftPosition=this.mergeRightPosition=n}},{key:"resizeDistance",value:function(t,e){var n=t-this.distance;n>0?this.expandDistance(n,e):n<0?this.reduceDistance(Math.abs(n),e):this.mergeLeftPosition=this.mergeRightPosition=e}},{key:"update",value:function(t,e,n){this._data=t,this.size=t.length,this.currentPosition=e,this.targetPosition=n;var r=this.size-(this.currentPosition+this._cfg.total);r>50&&(this._data.splice(50-r),this.size=this._data.length),this._updatePositions()}},{key:"_updatePositions",value:function(t){this.middlePosition=this.targetPosition+Math.round((this.currentPosition-this.targetPosition)/2),this.distance=this.currentPosition-this.targetPosition,t||this.emit(e.events.BUFFER_UPDATED,{index:this.index})}},{key:"parseData",value:function(t,e){var n=t.data,r=t.isReal,i=void 0!==r&&r,o="function"==typeof e?e:function(t){return t},a=Object(bt.a)(n),s=i?n[1].length:this._cfg.sizes[0];return o(a.map((function(t){return{id:t,heightIndex:s,replaced:null}})),n,i)}}])&&Tt(n.prototype,r),i&&Tt(n,i),e}(gt.a),Ct=n("./node_modules/ramda/es/isEmpty.js"),kt=n("./src/core/features/reels/tiles/Tile.js");function Nt(t){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return jt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Dt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lt(t,e,n){return e=Ft(e),function(t,e){if(e&&("object"===Nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Ft(t).constructor):e.apply(t,n))}function Bt(t,e,n){return(Bt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ft(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ft(t){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ut(t,e){return(Ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gt(Object(n),!0).forEach((function(e){Vt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Vt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Xt=Ht(Ht({},_t.a.events),{},{RENDERER_TILE_ENTERING:"renderer_tile_entering",RENDERER_TILE_LEAVING:"renderer_tile_leaving"}),Wt=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Lt(this,e))._tileGuide=null,t.offset=0,t.tileIndex=null,t.pos=0,t.lastPos=0,t.blur=!1,t._tileHeight=0,t.TOTAL_TILES=0,t.TOTAL_TILES_SIZE=0,t._tilesEntering=0,t._hasBlur=!0,t._tilesGenerator=null,t}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ut(t,e)}(e,t),n=e,o=[{key:"events",get:function(){return Xt}}],(i=[{key:"onCreated",value:function(t){var e=t.data,n=t.tileTypes,i=t.marker,o=t.index,a=t.config,s=t.tileGuide,u=t.bufferSource,c=void 0===u?It:u,l=t.tilesGenerator,h=i.children[0],f=h.getBounds();a.useOwnMask?this.mask=h:h.alpha=0,this._index=o,this._tilesGenerator=l,this.position.set(i.x,i.y);var p=this._createTilesConfig({tileTypes:n,config:a,bounds:f});this._config=Object(r.c)(a,{tiles:p,index:o},{bounds:f}),this._tiles=this._createTiles(this._config.tiles),this._tileGuide=s,this._tileHeight=this._tileGuide.height,this.TOTAL_TILES=null,this.TOTAL_TILES_SIZE=null,this._buffer=new c({bufferData:e,index:o,tilesGenerator:this._tilesGenerator,cfg:{sizes:this._config.tiles.sizes,total:this._config.tiles.total,visible:this._config.tiles.visible}}),this._tilesGenerator.setSpinnableTiles({index:o,tiles:this._config.tiles.spinnable,cache:!0}),Object(Ct.a)(this._config.tiles.stacked)||this._tilesGenerator.enableStack({index:o,stacked:this._config.tiles.stacked}),this.buffer.on(It.events.BUFFER_UPDATED,this._reset,this),this._reset()}},{key:"moveTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.pos=Object(r.f)(t,this.TOTAL_TILES_SIZE),this._update(e),this._draw(),this._tilesEntering>0&&this._emitTileEvents(),this._tilesEntering=0}},{key:"moveToTile",value:function(t){this.moveTo(t*this._tileHeight,!1)}},{key:"updateTiles",value:function(){for(var t=0,e=Object.entries(this.tiles);t<e.length;t++){var n=Mt(e[t],2),r=n[0];n[1],this.updateTile(parseInt(r))}}},{key:"updateTile",value:function(t){if(!this.tiles[t])return console.warn("Sorry, but there is no tile with index "+t+" in my world!");var e=this._getTileId(t+this.tileIndex),n=this.isStaked(e,t);this._getTile(e,n,this.tiles[t])}},{key:"tileHeight",get:function(){return this._tileHeight}},{key:"isStaked",value:function(t,e){return null}},{key:"getVisibleTiles",value:function(){if(0!==this.offset)return console.warn("Can't get the visible tiles durring spinning/dragging");for(var t=[],e=0;e<this._config.tiles.visible;e++)t.push(this._getTileId(this.tileIndex+e));return t}},{key:"getTileCellPosition",value:function(t){return{x:this.x,y:this.y+t*this._tileGuide.height}}},{key:"getTileCoordinates",value:function(t){var e=this.toGlobal(this.tiles[t].position);return this.parent.parent.toLocal(Ht({},e))}},{key:"enableBlur",value:function(){Bt(Ft(e.prototype),"enableBlur",this).call(this),this._hasBlur&&(this.blur=!0,this.updateTiles())}},{key:"disableBlur",value:function(){Bt(Ft(e.prototype),"disableBlur",this).call(this),this._hasBlur&&(this.blur=!1,this.updateTiles())}},{key:"getCurrentPosition",value:function(){return this._buffer.currentPosition}},{key:"getTargetPosition",value:function(){return this._buffer.targetPosition}},{key:"getDistanceToTarget",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=(this.getTargetPosition()+t)*this.tileHeight;return this.pos-e}},{key:"_reset",value:function(){this.TOTAL_TILES=this.buffer.size,this.TOTAL_TILES_SIZE=this._tileHeight*this.TOTAL_TILES,this.lastPos=this.buffer.currentPosition*this._tileHeight+this.offset,this.moveTo(this.lastPos,!0),this.emit(e.events.RENDERER_UPDATED,{offset:this._config.spin.speed})}},{key:"_update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.offset=this.pos-Math.floor(this.pos/this._tileHeight)*this._tileHeight;var n=this._getTileIndex(this.pos);if(n!==this.tileIndex){var r=this.tileIndex-n;this.tileIndex=n,this.updateTiles(),this.buffer.setCurrentPosition(this.tileIndex,!0),t||(this._tilesEntering=r)}var i=this.pos-this.lastPos;this.emit(e.events.RENDERER_MOVE,{index:this._index,pos:this.pos,delta:i}),this.lastPos=this.pos}},{key:"_emitTileEvents",value:function(){for(var t=this._tilesEntering-1;t>=0;t--){var n=this.getTileData(t),r=this.getTileData(this.config.tiles.visible+t);this.emit(e.events.RENDERER_TILE_ENTERING,{tile:n,tileIndex:t}),this.emit(e.events.RENDERER_TILE_LEAVING,{tile:r,tileIndex:this.config.tiles.visible+t})}}},{key:"_draw",value:function(){for(var t=0,n=Object.entries(this.tiles);t<n.length;t++){var r=Mt(n[t],2),i=r[0];r[1].y=parseInt(i)*this._tileHeight-this.offset}this.emit(e.events.RENDERER_DRAW,{index:this._index})}},{key:"_getTileIndex",value:function(t){return Math.floor(t/this._tileHeight)}},{key:"_getTileId",value:function(t){return t=Object(r.f)(t,this.TOTAL_TILES),this.buffer.data[t]}},{key:"_getTile",value:function(t,e,n){var r=this.blur?"blurred":"normal";e=e||"",n.to(t,r,e)}},{key:"_createTilesConfig",value:function(t){var e=t.tileTypes,n=t.config;return{bounds:t.bounds,ids:e.map((function(t){return t.id})).concat(0),sizes:[n.tiles.visible],spinnable:e.filter((function(t){return"normal"===t.type})).map((function(t){return t.id}))}}},{key:"_createTiles",value:function(t){for(var e={},n=-t.offsetTop;n<t.visible+t.offsetBottom;n++)e[n]=new kt.a,e[n].index=n,this.addChild(e[n]);return e}}])&&Dt(n.prototype,i),o&&Dt(n,o),e}(_t.a),Yt=n("./src/core/features/reels/controllers/SpinningController.js"),zt=n("./src/core/features/reels/animations/SpinningAnimation.js"),qt=n("./src/core/loader/index.js"),Kt=n("./src/core/features/reels/TilesGenerator.js"),Zt=n("./node_modules/ramda/es/mergeDeepLeft.js");function $t(t){return($t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Qt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jt(Object(n),!0).forEach((function(e){te(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function te(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ee(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ne(t,e,n){return e=re(e),function(t,e){if(e&&("object"===$t(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],re(t).constructor):e.apply(t,n))}function re(t){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ie(t,e){return(ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oe=function(t){function e(t){var n=t.reelsBuffer,r=t.tiles,i=t.reelMasterAnim,o=t.reelRenderer,a=void 0===o?Wt:o,s=t.controller,u=void 0===s?Yt.a:s,c=t.reelAnimation,l=void 0===c?zt.a:c,h=t.reelBufferSource,f=void 0===h?It:h,p=t.tilesGeneratorSource,d=void 0===p?Kt.a:p,y=t.config;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ne(this,e,[{data:n,tiles:r,reelMasterAnim:i,reelRenderer:a,controller:u,reelAnimation:l,reelBufferSource:f,tilesGeneratorSource:d,config:y}])}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ie(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return Qt(Qt(Qt(Qt({},zt.a.events),Wt.events),Yt.a.events),It.events)}},{key:"labels",get:function(){return Qt({},zt.a.labels)}}],(r=[{key:"lockedReels",get:function(){return this.controller.lockedReels}},{key:"unlockedReels",get:function(){return this.controller.unlockedReels}},{key:"getCurrentPosition",value:function(t){return this._reels[t]?this._reels[t].getCurrentPosition():console.error("Invalid reel index ".concat(t," when getting buffer's current positions."))}},{key:"getTargetPosition",value:function(t){return this._reels[t]?this._reels[t].getTargetPosition():console.error("Invalid reel index ".concat(t," when getting buffer's target positions."))}},{key:"getDistanceToTarget",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._reels[t]?this._reels[t].getDistanceToTarget(e):console.error("Invalid reel index ".concat(t," when getting buffer's target positions."))}},{key:"addReels",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Wt,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:It,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:zt.a,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._config;if(e.length<t)return console.warn("You should pass buffers for every new reel, that you are trying to create!");var u=this.reels.length,c=this._createMarkers(t,u),l=this._createReels(c,e,n,i,o,s,u);return this._controller.createReels(s,l,a),l.forEach((function(t){var e=t.index;r._reels.push(t),r.addChildAt(t,e),r._bubbleAnimationEvents(r.animations[e]),r._bubbleRendererEvents(t),r._bubbleBufferEvents(t.buffer)})),l}},{key:"startReels",value:function(t){var e=this;return t&&t.length?this._controller.isSpinning?void t.forEach((function(t){var n=e.animations.find((function(e){return e.index===t}));if(!n)return console.warn("There isn't a reel to start at index: ".concat(t,"!"));e._controller.startReel(n)})):console.warn("Reels are not spinning yet!"):console.warn("You should specify which reels to start spinning!")}},{key:"removeReels",value:function(t){var e=this;t&&t.length&&t.forEach((function(t){return e._removeReel(t)}))}},{key:"lockReels",value:function(t){this.controller.lock(t)}},{key:"unlockReels",value:function(t){this.controller.unlock(t)}},{key:"_removeReel",value:function(t){var e=this._reels.find((function(e){return e.index===t}));if(!e)return console.warn("There isn't reel at index ".concat(t," to remove."));this._reels=this._reels.filter((function(t){return t.index!==e.index})),this._removeListeners(e),this._controller.removeReel(t),this.removeChild(e)}},{key:"_removeListeners",value:function(t){var e=this.animations.find((function(e){return e.index===t.index})),n=t.buffer;e.removeAllListeners(),t.removeAllListeners(),n.removeAllListeners()}},{key:"_bubbleAnimationEvents",value:function(t){var e=this,n=Object(Zt.a)(t.constructor.events,zt.a.events);Object.keys(n).forEach((function(r){t.on(n[r],(function(i){return e.emit(n[r],Qt({animation:t,index:t.index},i))}))}))}},{key:"_bubbleRendererEvents",value:function(t){var e=this,n=Object(Zt.a)(t.constructor.events,Wt.events);Object.keys(n).forEach((function(r){var i={};t.on(n[r],(function(o){[n.RENDERER_TILE_ENTERING,n.RENDERER_TILE_LEAVING].includes(n[r])&&(i.label=e._controller.reels[t.index].label),e.emit(n[r],Qt(Qt({renderer:t,index:t.index},o),i))}))}))}},{key:"_bubbleControllerEvents",value:function(){var t=this,e=Object(Zt.a)(this._controller.constructor.events,Yt.a.events);Object.keys(e).forEach((function(n){t._controller.on(e[n],(function(r){return t.emit(e[n],Qt({},r))}))}))}},{key:"_bubbleBufferEvents",value:function(t){var e=this,n=Object(Zt.a)(t.constructor.events,It.events);Object.keys(n).forEach((function(r){t.on(n[r],(function(i){e.emit(n[r],Qt({buffer:t,index:t.index},i))}))}))}},{key:"_createMarkers",value:function(t,e){for(var n=[],r=0;r<t;r++)n.push(this._getMarker(e+r));return n}},{key:"_getMarker",value:function(t){var e=new qt.a.ReelMaster.mask,n=this._markers[0],r=n.x,i=n.y,o=e.width;return this._markers.length>1&&(o=this._markers[1].x-r),e.x=r+t*o,e.y=i,e}}])&&ee(n.prototype,r),i&&ee(n,i),e}(vt.a),ae=n("./node_modules/ramda/es/range.js"),se=n("./node_modules/ramda/es/internal/_curry2.js"),ue=n("./node_modules/ramda/es/internal/_includes.js");function ce(t,e,n){var r,i=typeof t;switch(i){case"string":case"number":return 0===t&&1/t==-1/0?!!n._items["-0"]||(e&&(n._items["-0"]=!0),!1):null!==n._nativeSet?e?(r=n._nativeSet.size,n._nativeSet.add(t),n._nativeSet.size===r):n._nativeSet.has(t):i in n._items?t in n._items[i]||(e&&(n._items[i][t]=!0),!1):(e&&(n._items[i]={},n._items[i][t]=!0),!1);case"boolean":if(i in n._items){var o=t?1:0;return!!n._items[i][o]||(e&&(n._items[i][o]=!0),!1)}return e&&(n._items[i]=t?[!1,!0]:[!0,!1]),!1;case"function":return null!==n._nativeSet?e?(r=n._nativeSet.size,n._nativeSet.add(t),n._nativeSet.size===r):n._nativeSet.has(t):i in n._items?!!Object(ue.a)(t,n._items[i])||(e&&n._items[i].push(t),!1):(e&&(n._items[i]=[t]),!1);case"undefined":return!!n._items[i]||(e&&(n._items[i]=!0),!1);case"object":if(null===t)return!!n._items.null||(e&&(n._items.null=!0),!1);default:return(i=Object.prototype.toString.call(t))in n._items?!!Object(ue.a)(t,n._items[i])||(e&&n._items[i].push(t),!1):(e&&(n._items[i]=[t]),!1)}}var le=function(){function t(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return t.prototype.add=function(t){return!ce(t,!0,this)},t.prototype.has=function(t){return ce(t,!1,this)},t}(),he=Object(se.a)((function(t,e){for(var n=[],r=0,i=t.length,o=e.length,a=new le,s=0;s<o;s+=1)a.add(e[s]);for(;r<i;)a.add(t[r])&&(n[n.length]=t[r]),r+=1;return n}));function fe(t){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function de(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ye(t,e,n){return e=me(e),function(t,e){if(e&&("object"===fe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],me(t).constructor):e.apply(t,n))}function me(t){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ve(t,e){return(ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ge(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_e(Object(n),!0).forEach((function(e){be(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function be(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ee=ge({},gt.a.events),Te=function(t){function e(){return pe(this,e),ye(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ve(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return Ee}}],(r=[{key:"update",value:function(t){var e=t[1],n=e.filter((function(t){return!!t})).length,r=e.map((function(t){return{id:t,heightIndex:n,replaced:null}}));this._data=r}},{key:"changeEntry",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._data[t]=ge(ge({},this._data[t]),{},n?{id:e,replaced:null}:{replaced:e})}},{key:"fetchEntry",value:function(t){return this._data[t]}},{key:"fetchResultScreen",value:function(){return this._data}},{key:"resetEntry",value:function(t){this.changeEntry(t,null)}}])&&de(n.prototype,r),i&&de(n,i),e}(gt.a);function we(t){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Se(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xe(Object(n),!0).forEach((function(e){Oe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Oe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Re(t,e,n){return e=Ae(e),function(t,e){if(e&&("object"===we(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Ae(t).constructor):e.apply(t,n))}function Ae(t){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ie(t,e){return(Ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ce={FALL_IN:"fall_in",FALL_OUT:"fall_out"},ke=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Re(this,e))._dropTiles={},t._tilesCache={},t._guide=null,t._tilesGenerator=null,t}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ie(t,e)}(e,t),n=e,o=[{key:"tileTypes",get:function(){return Ce}}],(i=[{key:"tileGuide",get:function(){return this._guide}},{key:"dropTiles",get:function(){return this._dropTiles}},{key:"tilesGenerator",get:function(){return this._tilesGenerator}},{key:"onCreated",value:function(t){var e=t.data,n=t.tileTypes,i=t.marker,o=t.index,a=t.config,s=t.tileGuide,u=t.bufferSource,c=void 0===u?Te:u,l=t.tilesGenerator,h=i.children[0],f=h.getBounds();a.useOwnMask?this.mask=h:h.alpha=0,this._index=o,this._tilesGenerator=l,this._guide=s,this.position.set(i.x,i.y);var p=this._createTilesConfig({tileTypes:n,config:a,bounds:f});this._config=Object(r.c)(a,{tiles:p,index:o},{bounds:f});var d=this._createTiles(Object(ae.a)(0,this._config.tiles.visible),this._config.tiles);this._tiles=d,this._buffer=new c,this._buffer.update(e),this.setSpinnableTiles(),this.updateTiles(d)}},{key:"replaceTile",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ce.FALL_OUT;this._buffer.changeEntry(t,e,n);var i=r===Ce.FALL_IN?this._dropTiles:this._tiles;this.updateTile(i[t],this._buffer.data[t])}},{key:"createDropTiles",value:function(t,e){this._buffer.update(t);var n=this._config.tiles,r=this._getAvailableIndices(n.visible),i=this._createTiles(r,n),o=this._calcYOffset(r,n);this._dropTiles=i,this.updateTiles(i,o+e)}},{key:"reset",value:function(){this._tilesCache=this._tiles,Object.values(this._tilesCache).forEach((function(t){return t.visible=!1})),this._tiles=this._dropTiles}},{key:"getTileCellPosition",value:function(t){return{x:this.x+this._tiles[t].x,y:this.y+t*this._guide.height}}},{key:"getTileCoordinates",value:function(t){return{x:this.x,y:this.y+this._tiles[t].y}}},{key:"updateTiles",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._tiles,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this._buffer.data;Object.keys(e).forEach((function(i){var o=e[i];t.updateTile(o,r[i]),o.position.set(0,t._guide.height*i-n)}))}},{key:"setSpinnableTiles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._index,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._config.tiles;this._tilesGenerator&&(this._tilesGenerator.setSpinnableTiles({index:t,tiles:e.spinnable,cache:!0}),Object(Ct.a)(e.stacked)||this._tilesGenerator.enableStack({index:t,stacked:e.stacked}))}},{key:"updateTile",value:function(t,e){if(!t||!e)return console.warn("Tile with id ".concat(e.replaced||e.id," doesn't exist."));t.to(e,"normal")}},{key:"_createTiles",value:function(t){var e=this;return t.reduce((function(t,n){return Se(Se({},t),{},Oe({},n,e._createTile(n)))}),{})}},{key:"_createTile",value:function(t){var e=null;return Object.keys(this._tilesCache).length>0&&this._tilesCache[t]?(e=this._tilesCache[t]).visible=!0:(e=new kt.a).index=t,this.addChild(e),e}},{key:"_calcYOffset",value:function(t){return t.length*this._guide.height}},{key:"_getAvailableIndices",value:function(t){return he(Object(ae.a)(0,t),Object.keys(this._tiles))}},{key:"_createTilesConfig",value:function(t){var e,n=t.tileTypes,r=t.config,i={bounds:t.bounds,ids:n.map((function(t){return t.id})).concat(0),sizes:r.tiles.sizes||[r.tiles.visible],spinnable:n.filter((function(t){return"normal"===t.type})).map((function(t){return t.id}))};return null!==(e=r.fall.pass)&&void 0!==e&&e.excludeTiles&&(i.spinnable=he(i.spinnable,r.fall.pass.excludeTiles)),i}}])&&Pe(n.prototype,i),o&&Pe(n,o),e}(_t.a),Ne=n("./src/core/features/reels/controllers/Controller.js"),Me=n("./src/core/utils/Status.js");function je(t){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function De(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Le(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){De(o,r,i,a,s,"next",t)}function s(t){De(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Be(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ue(t,e,n){return e=Ge(e),function(t,e){if(e&&("object"===je(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Ge(t).constructor):e.apply(t,n))}function Ge(t){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function He(t,e){return(He=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ve(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Xe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ve(Object(n),!0).forEach((function(e){We(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function We(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ye=Xe({},Ne.a.events),ze=function(t){function e(){return Be(this,e),Ue(this,e,arguments)}var n,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&He(t,e)}(e,t),n=e,i=[{key:"stop",value:(s=Le(regeneratorRuntime.mark((function t(n,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isStopping){t.next=2;break}return t.abrupt("return");case 2:return this.emit(e.events.SPIN_STOPPING),this.isStopping=!0,this._config.spin.minSpinDurationEnabled&&!Me.a.get(Me.a.TYPES.IN_FREE_SPINS)&&console.time("stop_time"),t.next=7,this._onStop(n,r);case 7:this._reset(),this.emit(e.events.SPIN_END),this._config.spin.minSpinDurationEnabled&&(console.timeEnd("stop_time"),console.timeEnd("spin"));case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})},{key:"generateFakeFall",value:(a=Le(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this._calcSpinDelay(),i=2*(this._reels[0]._renderer.config.bounds.height+(null===(e=this._config.fall.pass)||void 0===e?void 0:e.offset)),o=i/(null===(n=this._config.fall.pass)||void 0===n?void 0:n.speed),a=Math.floor(r/o),console.time("fall_pass"),s=0;case 6:if(!(s<=a)){t.next=12;break}return t.next=9,this._anticipate();case 9:s++,t.next=6;break;case 12:console.timeEnd("fall_pass");case 13:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"_onStart",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._config.fall.out,n=this._reels.map((function(n){return n.start(t._mergeWithPreConfig(n,Object(r.c)(t._config.fall.out,e),"start"))}));return Promise.all(n)}},{key:"_onStop",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._config.fall.in,i=this._reels.map((function(i){return i.stop(t[i.index],e._mergeWithPreConfig(i,Object(r.c)(e._config.fall.in,n),"stop"))}));return Promise.all(i)}},{key:"_onInstantStop",value:function(t){this._reels.forEach((function(e,n){return e.isStopping&&e.stopInstant(t[n])}))}},{key:"_prepareConfig",value:function(t,e){return Xe(Xe({},t),{},{delays:this._calcDelays(t,e)})}},{key:"_mergeWithPreConfig",value:function(t,e,n){return this._preConfigs[n][t.index]?this._prepareConfig(Object(r.c)(e,this._preConfigs[n][t.index]),t.renderer):this._prepareConfig(e,t.renderer)}},{key:"_createReel",value:function(t,e,n){var r=new n({renderer:e,config:t});this._reels.push(r),this._renderers.push(e),this._preConfigs.start[e.index]={},this._preConfigs.stop[e.index]={}}},{key:"_anticipate",value:function(){var t=this,e=this._reels.map((function(e){return t._screenPass(e)}));return Promise.all(e)}},{key:"_screenPass",value:function(t){var e=[[],this._renderers[t.index].tilesGenerator.generateRandomTiles({count:this._config.tiles.visible,index:t.index}),[]];return t.screenPass(e,this._mergeWithPreConfig(t,this._config.fall.pass,"stop"))}},{key:"_calcDelays",value:function(t,e){var n=t.delays,i=n.betweenBlockSets,o=n.betweenBlocks,a=n.beforeSetStart;return Object(r.c)({beforeStart:i*e.index+a,blockDelays:this._calcBlockDelays(o,e)},t.delays)}},{key:"_calcBlockDelays",value:function(t,e){var n=e.config;return Object(ae.a)(0,n.tiles.visible).map((function(e){return t*e}))}}],o=[{key:"events",get:function(){return Ye}}],i&&Fe(n.prototype,i),o&&Fe(n,o),e}(Ne.a),qe=n("./src/core/features/reels/animations/Animation.js");function Ke(t){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ze(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function $e(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Ze(o,r,i,a,s,"next",t)}function s(t){Ze(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qe(t,e,n){return e=tn(e),function(t,e){if(e&&("object"===Ke(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],tn(t).constructor):e.apply(t,n))}function tn(t){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function en(t,e){return(en=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function rn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nn(Object(n),!0).forEach((function(e){on(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function on(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var an=rn(rn({},qe.a.events),{},{ANIMATION_SINGLE_START:"animation_single_start",ANIMATION_SINGLE_ENDING:"animation_single_ending",ANIMATION_SINGLE_END:"animation_single_end"}),sn=rn({},qe.a.labels),un="IN",cn="OUT",ln=function(t){function e(t){var n,r=t.renderer,i=t.config;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Qe(this,e,[{renderer:r,config:i}]))._timeScaleTween=null,n._fallInTimeline=null,n._fallOutTimeline=null,n._screenPassTimeline=null,n._isStarting=!1,n._isSpinning=!1,n._isStopping=!1,n._inSpin=!1,n._reset(),n}var n,r,i,o,a,s,u,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&en(t,e)}(e,t),n=e,r=[{key:"inSpin",get:function(){return this._inSpin}},{key:"isStarting",get:function(){return this._isStarting}},{key:"isSpinning",get:function(){return this._isSpinning}},{key:"isStopping",get:function(){return this._isStopping}},{key:"start",value:(c=$e(regeneratorRuntime.mark((function t(){var n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.length>0&&void 0!==r[0]?r[0]:{},!this._inSpin){t.next=3;break}return t.abrupt("return",Promise.resolve());case 3:return this._inSpin=!0,this._isStarting=!0,this.emit(e.events.ANIMATION_SPIN_STARTING),t.next=8,this._fallOut(n);case 8:this.emit(e.events.ANIMATION_SPINNING),this._isSpinning=!0;case 10:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"stop",value:(u=$e(regeneratorRuntime.mark((function t(n){var r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},this._isStopping=!0,this.emit(e.events.ANIMATION_STOPPING),t.next=5,this._fallIn(n,r);case 5:this.emit(e.events.ANIMATION_SPIN_END),this._inSpin=!1;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"stopInstant",value:function(){if(!this._isStarting)return console.error("I'm not started yet, reel:",this._index);if(!this._isStopping)return console.error("I'm not stopping yet, reel:",this._index);var t=this._config.fall.instantStop.speedUpReels;t.enabled?this.setTimeScale(t.speedFactor,t.switchDuration):(this._fallOutTimeline&&1!==this._fallOutTimeline.progress()&&this._fallOutTimeline.progress(1),this._fallInTimeline&&1!==this._fallInTimeline.progress()&&this._fallInTimeline.progress(1),this._screenPassTimeline&&1!==this._screenPassTimeline.progress()&&this._screenPassTimeline.progress(1)),this._inInstantStop=!0}},{key:"setTimeScale",value:function(t,e){if(!this._inInstantStop){var n=this._config.fall.instantStop.speedUpReels.overwrite;this._timeScaleTween=w.b.to([this._fallInTimeline,this._fallOutTimeline,this._screenPassTimeline],{duration:e,timeScale:t,overwrite:n})}}},{key:"screenPass",value:(s=$e(regeneratorRuntime.mark((function t(e,n){var r,i,o,a,s,u,c,l,h,f,p=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.delays,i=n.speed,n.easeEnd,o=n.ease,a=n.offset,s=void 0===a?50:a,this._renderer.createDropTiles(e,s),u=this._renderer,c=u.dropTiles,l=u.config.bounds,h=w.b.timeline(),f=Object.values(c).reverse().map((function(t,e){return p._getScreenPassTimeline({tile:t,i:e,bounds:l,speed:i,offset:s,delays:r,ease:o})})),h.add(f),this._screenPassTimeline=h,t.next=9,h.then();case 9:this._renderer.reset(),this._reset();case 11:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})},{key:"_fallOut",value:(a=$e(regeneratorRuntime.mark((function t(n){var r,i,o,a,s,u,c,l,h,f,p,d=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.delays,i=n.speed,o=n.ease,a=n.offset,s=void 0===a?50:a,u=this._renderer,c=u.tiles,l=u.config.bounds,h=w.b.timeline({}),f=cn,p=Object.values(c).reverse().map((function(t,n){var a=l.height+s,u=a/i;return w.b.to(t,{y:"+=".concat(a),duration:u,ease:o,onUpdate:function(){return d._onTweenUpdate(t,f)},delay:r.blockDelays[n],onStart:function(){return d.emit(e.events.ANIMATION_SINGLE_START,{tile:t})}})})),h.add(p,"+=".concat(r.beforeStart)),this._fallOutTimeline=h,t.next=9,h.then();case 9:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"_fallIn",value:(o=$e(regeneratorRuntime.mark((function t(e,n){var r,i,o,a,s,u,c,l,h,f,p,d,y=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.delays,i=n.speed,o=n.easeEnd,a=void 0===o?{offset:0,speed:0,easings:[]}:o,s=n.ease,u=n.offset,c=void 0===u?50:u,this._renderer.createDropTiles(e,c),l=this._renderer,h=l.dropTiles,f=l.tileGuide,l.config.bounds,p=w.b.timeline({}),d=Object.values(h).reverse().map((function(t,e){return y._getFallInTimeline({tile:t,i:e,delays:r,speed:i,dropTiles:h,tileGuide:f,ease:s,easeEnd:a})})),p.add(d),this._fallInTimeline=p,t.next=9,p.then();case 9:this._renderer.reset(),this._reset();case 11:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})},{key:"_getFallInTimeline",value:function(t){var n=this,r=t.tile,i=t.i,o=t.delays,a=t.speed,s=t.dropTiles,u=t.tileGuide,c=t.ease,l=t.easeEnd,h=((Object.values(s).length-i-1)*u.height-r.y)/a,f=un,p=w.b.timeline({onComplete:function(){return n.emit(e.events.ANIMATION_SINGLE_END,{tile:r})},onUpdate:function(){return n._onTweenUpdate(r,f)},delay:o.beforeStart}).to(r,{y:(Object.values(s).length-i-1)*u.height,duration:h,ease:c,delay:o.blockDelays[i],onComplete:function(){return n.emit(e.events.ANIMATION_SINGLE_ENDING,{tile:r})}});return 0!==l.offset&&this._setEaseEndOffsets(p,r,l),p}},{key:"_getScreenPassTimeline",value:function(t){var n=this,r=t.tile,i=t.i,o=t.delays,a=t.speed,s=t.offset,u=t.ease,c=2*(t.bounds.height+s),l=c/a,h=cn;return w.b.to(r,{y:"+=".concat(c),duration:l,ease:u,onUpdate:function(){n._onTweenUpdate(r,h)},delay:o.betweenBlockSets*this.index+o.blockDelays[i],onStart:function(){return n.emit(e.events.ANIMATION_SINGLE_START,{tile:r})}})}},{key:"_setEaseEndOffsets",value:function(t,e,n){var r=n.offset,i=n.speed,o=n.easings;if(0===i||2!==o.length)return console.error("Invalid ease end configuration offset: ".concat(r,", speed: ").concat(i,", easings: ").concat(o));var a=Math.abs(r)/i/o.length;t.to(e,{y:"+=".concat(r),duration:a,ease:o[0]}).to(e,{y:"-=".concat(r),duration:a,ease:o[1]})}},{key:"_onTweenUpdate",value:function(t,n){this.emit(e.events.ANIMATION_UPDATE,{tile:t,fallType:n})}},{key:"_reset",value:function(){this._fallInTimeline=null,this._fallOutTimeline=null,this._screenPassTimeline=null,this._timeScaleTween&&(this._timeScaleTween.kill(),this._timeScaleTween=null),this._isStarting=this._isSpinning=this._isStopping=!1,this._inInstantStop=!1}}],i=[{key:"events",get:function(){return an}},{key:"labels",get:function(){return sn}}],r&&Je(n.prototype,r),i&&Je(n,i),e}(qe.a);function hn(t){return(hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fn(Object(n),!0).forEach((function(e){dn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function dn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mn(t,e,n){return e=vn(e),function(t,e){if(e&&("object"===hn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],vn(t).constructor):e.apply(t,n))}function vn(t){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _n(t,e){return(_n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gn=function(t){function e(t){var n=t.reelsBuffer,r=t.tiles,i=t.reelMasterAnim,o=t.reelRenderer,a=void 0===o?ke:o,s=t.controller,u=void 0===s?ze:s,c=t.reelAnimation,l=void 0===c?ln:c,h=t.reelBufferSource,f=void 0===h?Te:h,p=t.tilesGeneratorSource,d=void 0===p?Kt.a:p,y=t.config;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),mn(this,e,[{data:n,tiles:r,reelMasterAnim:i,reelRenderer:a,controller:u,reelAnimation:l,reelBufferSource:f,tilesGeneratorSource:d,config:y}])}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_n(t,e)}(e,t),n=e,o=[{key:"events",get:function(){return pn(pn(pn(pn({},ln.events),ke.events),ze.events),Te.events)}},{key:"labels",get:function(){return pn({},ln.labels)}}],(i=[{key:"generateFakeFall",value:function(){return this._controller.generateFakeFall()}},{key:"replaceTile",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,a=Object(bt.a)([].concat(n)).map((function(t){return r._reels[t]}));a.forEach((function(n){return n.replaceTile(t,e,i,o)}))}},{key:"replaceTilesArea",value:function(t){var e=this,n=t.index,i=t.offset,o=t.width,a=t.height,s=t.id,u=t.force,c=void 0!==u&&u,l=t.type,h=Object(r.k)(o,(function(t){return t+n}));Object(r.k)(a,(function(t){return t+i})).forEach((function(t){return e.replaceTile(t,s,h,c,l)}))}},{key:"_bubbleAnimationEvents",value:function(t){var e=this,n=Object(Zt.a)(t.constructor.events,ln.events);Object.keys(n).forEach((function(r){t.on(n[r],(function(i){return e.emit(n[r],pn({animation:t,index:t.index},i))}))}))}},{key:"_bubbleRendererEvents",value:function(t){var e=this,n=Object(Zt.a)(t.constructor.events,ke.events);Object.keys(n).forEach((function(r){t.on(n[r],(function(i){return e.emit(n[r],pn({renderer:t,index:t.index},i))}))}))}},{key:"_bubbleControllerEvents",value:function(){var t=this,e=Object(Zt.a)(this._controller.constructor.events,ze.events);Object.keys(e).forEach((function(n){t._controller.on(e[n],(function(r){return t.emit(e[n],pn({},r))}))}))}},{key:"_bubbleBufferEvents",value:function(t){var e=this,n=Object(Zt.a)(t.constructor.events,Te.events);Object.keys(n).forEach((function(r){t.on(n[r],(function(i){return e.emit(n[r],pn({buffer:t,index:t.index},i))}))}))}}])&&yn(n.prototype,i),o&&yn(n,o),e}(vt.a),bn=n("./src/core/features/reels/engines/SpinningMegaWaysReelMaster.js"),En=n("./node_modules/@games/gsap/InertiaPlugin.js");function Tn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var xn={onStart:function(){},onUpdate:function(){},onComplete:function(){},traction:{x:1,y:1},maxOffset:{x:1/0,y:1/0}},Sn=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Tn(this,t),this._cfg=Object(r.c)(xn,i),this._target=e,this._dragStart=!1,this._isOver=!1,this._dragX=0,this._dragY=0,this._tracker=null,this._enabled=!0,this._hasMoved=!1,w.b.registerPlugin(En.a);var o=function(t){n._isOver=!1,n._onComplete(t)};e.on("mousedown",this._onStart.bind(this)),e.on("touchstart",(function(t){n._isOver=!0,n._onStart(t)})),e.on("mousemove",this._onUpdate.bind(this)),e.on("touchmove",this._onUpdate.bind(this)),e.on("mouseup",this._onComplete.bind(this)),e.on("touchend",this._onComplete.bind(this)),e.on("mouseover",(function(){n._isOver=!0})),e.on("mouseout",o),e.on("touchendoutside",o)}var e,n,i;return e=t,(n=[{key:"disable",value:function(t){t&&(this._enabled=!1),this._target.interactive=!1}},{key:"enable",value:function(t){t&&(this._enabled=!0),this._enabled&&(this._target.interactive=!0)}},{key:"toggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this._target.interactive;t?this.enable():this.disable()}},{key:"enabled",get:function(){return this._enabled}},{key:"_onStart",value:function(t){if(!this._dragStart&&this._enabled){this._dragStart=!0;var e=this._cfg.onStart,n=t.data.global,r=n.x,i=n.y;this._identifier=t.data.identifier,this._dragX=r,this._dragY=i,this._start={x:r,y:i},this._tracker=this._tracker||En.a.track(this,"_dragX,_dragY")[0],this._diraction={x:0,y:0},e({x:r,y:i})}}},{key:"_onUpdate",value:function(t){if(this._dragStart&&this._isOver&&this._identifier===t.data.identifier){if(t.data&&2===t.data.button)return this._onComplete(t);this._hasMoved=!0;var e=this._cfg,n=e.onUpdate,r=e.traction,i=e.maxOffset,o=t.data.global,a=o.x,s=o.y,u=window.devicePixelRatio||1,c={x:this._dragX-this._start.x,y:this._dragY-this._start.y},l={x:Math.abs(c.x)*u<i.x?(a-this._dragX)/r.x*u:0,y:Math.abs(c.y)*u<i.y?(s-this._dragY)/r.y*u:0};this._diraction={x:Math.sign(l.x),y:Math.sign(l.y)},this._dragX=a,this._dragY=s,n({delta:l,velocity:{x:this._tracker?this._tracker.get("_dragX"):0,y:this._tracker?this._tracker.get("_dragY"):0},direction:this._diraction})}}},{key:"_onComplete",value:function(t){if(this._dragStart&&this._identifier===t.data.identifier){this._dragStart=!1;var e=this._cfg.onComplete,n={x:t.data.global.x,y:t.data.global.y},r={x:this._tracker&&this._hasMoved?this._tracker.get("_dragX"):0,y:this._tracker&&this._hasMoved?this._tracker.get("_dragY"):0};this._hasMoved=!1,e({position:n,velocity:r,direction:this._diraction})}}}])&&wn(e.prototype,n),i&&wn(e,i),t}();function On(t){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pn(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Rn(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Pn(o,r,i,a,s,"next",t)}function s(t){Pn(o,r,i,a,s,"throw",t)}a(void 0)}))}}function An(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function In(t,e,n){return e=Cn(e),function(t,e){if(e&&("object"===On(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Cn(t).constructor):e.apply(t,n))}function Cn(t){return(Cn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kn(t,e){return(kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Nn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Mn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nn(Object(n),!0).forEach((function(e){jn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function jn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Dn={align:"center",buttons:{collect:{type:"secondary",size:"large"},gamble:{type:"primary",size:"large"}}},Ln={COLLECT:"CHOICE_COLLECT",GAMBLE:"CHOICE_GAMBLE",ACCEPT:"CHOICE_ACCEPT",DECLINE:"CHOICE_DECLINE",EXCHANGE:"CHOICE_EXCHANGE"},Bn=jn(jn(jn(jn(jn({},Ln.COLLECT,"collect"),Ln.GAMBLE,"gamble"),Ln.ACCEPT,"accept"),Ln.DECLINE,"decline"),Ln.EXCHANGE,"exchange"),Fn=Mn(Mn({},i.a),{},{CHOICE_COLLECT:"choice_collect",CHOICE_GAMBLE:"choice_gamble",CHOICE_ACCEPT:"choice_accept",CHOICE_DECLINE:"choice_decline",CHOICE_EXCHANGE:"choice_exchange"}),Un=function(t){function e(t){var n,i=t.config,o=t.mask;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=In(this,e)).mask=o,n._client=null,n._buttonsActions=[],n._config=Object(r.c)(Dn,i),n}var n,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kn(t,e)}(e,t),n=e,i=[{key:"activate",value:function(t,e){var n=t.choices;if(!n.available)throw new Error("No available choices provided!");return this._client||(this._client=e),this._showChoiceButtons(n.available)}},{key:"pick",value:function(){var t=this._buttonsActions.map((function(t){return z.a.when(t)}));return Promise.race(t)}},{key:"deactivate",value:(s=Rn(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.emit(e.events.HIDE_START),Y.a.emit(Y.a.events.FEATURE_CONTROLS_HIDE);case 2:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"handleChoice",value:(a=Rn(regeneratorRuntime.mark((function t(n){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.emit(e.events[n.name]),r={roundId:Me.a.get(Me.a.TYPES.ROUND_ID),choice:e.choiceNames[n.name]},t.next=4,this._client.choice(r);case 4:return i=t.sent,t.abrupt("return",i.result);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"_showChoiceButtons",value:function(t){var n=this,r=t.map((function(t){return n._getButtonData(t)}));this._buttonsActions=r.map((function(t){return t.name})),this.emit(e.events.SHOW_START),Y.a.emit(Y.a.events.FEATURE_CONTROLS_SHOW,{options:Mn(Mn({},this._config),{},{buttons:r})})}},{key:"_getButtonData",value:function(t){var n=t.toUpperCase();return Mn(Mn({},this._config.buttons[t]),{},{name:e.types[n],label:x.c.texts[e.types[n]]||n})}}],o=[{key:"events",get:function(){return Fn}},{key:"types",get:function(){return Ln}},{key:"choiceNames",get:function(){return Bn}}],i&&An(n.prototype,i),o&&An(n,o),e}(o.Container),Gn=n("./src/config.js"),Hn=n("./node_modules/eventemitter3/index.js"),Vn=n.n(Hn),Xn=n("./src/core/server/SpinData.js");function Wn(t){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yn(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function zn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qn(t,e,n){return e=Kn(e),function(t,e){if(e&&("object"===Wn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Kn(t).constructor):e.apply(t,n))}function Kn(t){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zn(t,e){return(Zn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $n={UPDATE_START:"update_start",UPDATE_END:"update_end"},Jn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=qn(this,e)).cfg=Gn.a.wins.winBar,t.value=0,t._bangupPromise=Promise.resolve(),t}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zn(t,e)}(e,t),n=e,r=[{key:"activate",value:function(t,e,n){var r=this._getBangupDuration(t,e,n);return this.set(this.value+parseFloat(t),r)}},{key:"increment",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.set(this.value+t,e)}},{key:"finish",value:function(){return this._bangupPromise}},{key:"set",value:(o=regeneratorRuntime.mark((function t(e){var n,r,i=this,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:0,r=o.length>2&&void 0!==o[2]&&o[2],Xn.a.roundHasCelebrations(e)||(n=0,r=!0),this.emit($n.UPDATE_START,{isInstant:!n,silent:r}),0!==n){t.next=9;break}return this.value=parseFloat(e),Y.a.emit(Y.a.events.WINBAR_CHANGE,{value:this.value}),this._bangupPromise=Promise.resolve(),t.abrupt("return",this.emit($n.UPDATE_END,{isInstant:!n}));case 9:return this._bangupTween=w.b.to(this,{duration:n,value:parseFloat(e),onUpdate:function(){return Y.a.emit(Y.a.events.WINBAR_CHANGE,{value:i.value})}}),this._bangupPromise=this._bangupTween.then(),t.next=13,this._bangupPromise;case 13:this.emit($n.UPDATE_END,{isInstant:!n});case 14:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Yn(i,n,r,a,s,"next",t)}function s(t){Yn(i,n,r,a,s,"throw",t)}a(void 0)}))},function(t){return a.apply(this,arguments)})},{key:"skip",value:function(){this._bangupTween&&1!==this._bangupTween.progress()&&this._bangupTween.progress(1)}},{key:"reset",value:function(){this.value=0,Y.a.emit(Y.a.events.WINBAR_CHANGE,{value:this.value})}},{key:"_getBangupDuration",value:function(t,e,n){var r=parseFloat(t),i=parseFloat(e),o=this.cfg,a=o.skipMplr,s=o.bangupSpeed;return r<=a*i||n?0:r/(s*i)}}],i=[{key:"events",get:function(){return $n}}],r&&zn(n.prototype,r),i&&zn(n,i),e}(Vn.a),Qn=n("./src/core/loader/AssetCache.js"),tr=n("./node_modules/ramda/es/times.js"),er=n("./node_modules/ramda/es/always.js");function nr(t){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ir(t,e,n){return e=or(e),function(t,e){if(e&&("object"===nr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],or(t).constructor):e.apply(t,n))}function or(t){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ar(t,e){return(ar=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function sr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ur(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var cr=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sr(Object(n),!0).forEach((function(e){ur(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},i.a),lr=function(t){function e(t,n,r,i){var o,a=i.config,s=i.mask;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=ir(this,e)).mask=s,o.lines=[],o.markers=n,o.linesData=t,o._config=a,o._tileWidth=r.width,o._tileHeight=r.height,o._lineOffsets=o._calcOffsets(),o._initLines(),o}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ar(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return cr}}],(r=[{key:"show",value:function(t){this.lines[t.index].visible=!0,this.emit(e.events.SHOW_START)}},{key:"showAll",value:function(){var t=this;this.lines.forEach((function(e,n){return t.show({index:n})}))}},{key:"hide",value:function(t){this.lines[t.index].visible=!1}},{key:"hideAll",value:function(){var t=this;this.lines.forEach((function(e,n){return t.hide({index:n})}))}},{key:"_initLines",value:function(){var t=this;this.linesData.forEach((function(e,n){var r=t._createLine(e,n);t.addChildAt(r,0),t.lines.push(r)}))}},{key:"_createLine",value:function(t){}},{key:"_calcOffsets",value:function(){var t,e,n=this,r=Object(tr.a)(Object(er.a)(this._config.topOffset),Gn.a.reels.tiles.visible);return this.linesData.map((function(i){return t=i[0],e=r[t],r[t]+=n._config.lineOffset,e}))}},{key:"_createPoints",value:function(t){var e=this.markers,n=this._config.endToEnd,r=this._tileWidth,i=this._tileHeight,a=[];return n&&a.push(new o.Point(e[0].x,e[0].y+t[0]*i)),t.forEach((function(t,n){var s=e[n].x+r/2,u=e[n].y+t*i;a.push(new o.Point(s,u))})),n&&a.push(new o.Point(e[e.length-1].x+r,e[e.length-1].y+t[t.length-1]*i)),a}}])&&rr(n.prototype,r),i&&rr(n,i),e}(o.Container);function hr(t){return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dr(t,e,n){return e=yr(e),function(t,e){if(e&&("object"===hr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],yr(t).constructor):e.apply(t,n))}function yr(t){return(yr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mr(t,e){return(mr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vr=function(t){function e(){return fr(this,e),dr(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mr(t,e)}(e,t),n=e,(r=[{key:"_createLine",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._createPoints(t),r=new o.SimpleRope(Qn.c.lineFill,n);return r.y=this._lineOffsets[e],r.visible=!1,r}}])&&pr(n.prototype,r),i&&pr(n,i),e}(lr);function _r(t){return(_r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function br(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Er(t,e,n){return e=Tr(e),function(t,e){if(e&&("object"===_r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Tr(t).constructor):e.apply(t,n))}function Tr(t){return(Tr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wr(t,e){return(wr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xr=function(t){function e(){return gr(this,e),Er(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wr(t,e)}(e,t),n=e,(r=[{key:"_createLine",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=new o.Graphics,i=0;if(r.points=this._createPoints(t),this._config.layers.forEach((function(t){return e._drawLayer(r,t)})),this._config.filter.enabled){var s=this._config.filter,u=s.strength,c=s.quality,l=s.resolution,h=s.padding,f=new o.filters.BlurFilter(u,c,l);f.blurX=0,f.padding=h,i=h/2,r.filters=[f]}var p=r.getBounds(),d=p.width,y=p.height,m=p.x,v=p.y,_=v<0?i+Math.abs(v):i,g=this._lineOffsets[n]-i,b=Object(a.d)(r,{width:d+m,height:y+Math.abs(v)+i,offsetY:_}),E=[r.points[0],r.points[r.points.length-1]];return E[0].y+=i,E[1].y+=i,b.y=v<0?v+g:g,b.visible=!1,b.points=E,delete r.points,r.destroy(),b}},{key:"_drawLayer",value:function(t,e){var n=e.image,r=e.width,i=e.alignment;t.lineTextureStyle({width:r,texture:Qn.c[n],alignment:i});var o=t.points;o.forEach((function(e,n){var r=e.x,i=e.y;0===n?t.moveTo(o[0].x,o[0].y):t.lineTo(r,i)}))}}])&&br(n.prototype,r),i&&br(n,i),e}(lr);function Sr(t){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Or(t){return function(t){if(Array.isArray(t))return Pr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Pr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Rr(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Ar(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Rr(o,r,i,a,s,"next",t)}function s(t){Rr(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Ir(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cr(t,e,n){return e=kr(e),function(t,e){if(e&&("object"===Sr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],kr(t).constructor):e.apply(t,n))}function kr(t){return(kr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nr(t,e){return(Nr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mr(Object(n),!0).forEach((function(e){Dr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Dr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Lr=vt.a.events.ANIMATION_SPIN_ENDING,Br=vt.a.events.RENDERER_MOVE,Fr=jr(jr({},i.a),{},{PLAY_ANIM_START:"rc_play_anim_start",PLAY_ANIM_END:"rc_play_anim_end",SINGLE_PLAY_ANIM_START:"rc_single_play_anim_start",SINGLE_PLAY_ANIM_END:"rc_single_play_anim_end",SINGLE_SHOW_START:"rc_single_show_start",SINGLE_SHOW_END:"rc_single_show_end",SINGLE_HIDE_START:"rc_single_hide_start",SINGLE_HIDE_END:"rc_single_hide_end"}),Ur=function(t){function e(t){var n,r=t.name,i=void 0===r?"ReelCovers":r,s=t.reelMaster,u=t.source,c=void 0===u?{}:u,l=t.config,h=void 0===l?{}:l,f=t.mask,p=void 0===f?null:f;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Cr(this,e)).name=i,n.mask=p,n.isActive=!1,n._reelMaster=s,n._sourceData=c,n._config=h,n._rtConfig=h.renderTexture||{},n._useRenderTexture=a.b.type===o.RENDERER_TYPE.WEBGL&&n._rtConfig.enabled,n._rtCache={},n._observeActivations=[],n._addRendererListeners(),n}var n,i,s,u,c,l,h,f,p,d;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nr(t,e)}(e,t),n=e,i=[{key:"inRtMode",get:function(){return this._useRenderTexture}},{key:"observeReels",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._observeActivations=[];var n=this._config.observeReels||{},i=Object(r.c)(n,e),o=i.activationEvent,a=void 0===o?Lr:o,s=i.reels;this._reelMaster.onceReels(a,(function(n){return t.handleObserveEvent(jr(jr({activationEvent:a},n),e))}),!0,s)}},{key:"whenAllActive",value:(d=Ar(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this._observeActivations);case 2:this._observeActivations=[];case 3:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"activate",value:(p=Ar(regeneratorRuntime.mark((function t(n){var r,i=this,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},n){t.next=3;break}throw new Error('"'.concat(this.name,'" ==> No activation data provided!'));case 3:return this.isActive=!0,this.visible=!0,this.emit(e.events.ACTIVATE_START),t.next=8,Promise.all([].concat(n).map((function(t){return i._addCover(t,r)})));case 8:this.emit(e.events.ACTIVATE_END);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"deactivate",value:(f=Ar(regeneratorRuntime.mark((function t(n){var r,i,o,a,s,u=this,c=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},this.emit(e.events.DEACTIVATE_START),i=r.detachFromReels,o=void 0!==i&&i,a=r.removeAtEnd,s=void 0===a||a,o&&this.detach(n),t.next=6,this._exec(n,(function(t){return u._hideCover(t,jr({stopTickChildren:s},r))}));case 6:s&&this._exec(n,(function(t){return u._destroyCover(t,r)})),this.emit(e.events.DEACTIVATE_END);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"play",value:(h=Ar(regeneratorRuntime.mark((function t(n,r){var i,o=this,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.length>2&&void 0!==a[2]?a[2]:{},this.emit(e.events.PLAY_ANIM_START,{label:n}),t.next=4,this._exec(r,(function(t){return o._playAnimation(n,t,i)}));case 4:this.emit(e.events.PLAY_ANIM_END,{label:n});case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return h.apply(this,arguments)})},{key:"skip",value:function(t){this._exec(t,(function(t){return t.skip()}))}},{key:"attach",value:function(t){this._exec(t,(function(t){return t.attached=!0}))}},{key:"detach",value:function(t){this._exec(t,(function(t){return t.attached=!1}))}},{key:"stop",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._exec(t,(function(t){return t.stop(e)}))}},{key:"finish",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._exec(t,(function(t){return t.finish(e)}))}},{key:"remove",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._exec(t,(function(t){return e._destroyCover(t,n)}))}},{key:"getCovers",value:function(t){var e=this;return t?[].concat(t).map((function(t){var n=t.reel,r=t.index;return e._getCoverOnPos({reel:n,index:r})})).filter(Boolean):Or(this.children)}},{key:"applyTexture",value:function(t){var e=t.from,n=t.to,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._getCoverOnPos(e);if(!i)throw new Error('"'.concat(this.name,'" ==> No cover on the given position!'));var o=jr(jr({},e),{},{tileId:i.tileId}),a=this._createRenderTexture(o,i,r);this._exec(n,(function(t){return t.applyTexture(a)}))}},{key:"removeTexture",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.from;this._exec(e,(function(t){return t.removeTexture()}))}},{key:"onCreated",value:function(t,e,n){}},{key:"onDestroyed",value:function(t,e){}},{key:"onShowStart",value:function(t,e,n,r){}},{key:"onShowEnd",value:function(t,e,n,r){}},{key:"onHideStart",value:function(t,e,n){}},{key:"onHideEnd",value:function(t,e,n){}},{key:"onPlayStart",value:function(t,e,n){}},{key:"onPlayEnd",value:function(t,e,n){}},{key:"handleObserveEvent",value:function(t){var e=this.onReelEvent(t)||Promise.resolve();this._observeActivations.push(e)}},{key:"onReelEvent",value:function(t){return Promise.resolve()}},{key:"_addCover",value:(l=Ar(regeneratorRuntime.mark((function t(n){var r,i,o,a,s,u,c=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},i=r.attachToReels,o=void 0!==i&&i,a=r.animLabel,s=void 0===a?"show":a,u=this._create(n,r),this.addChild(u),o&&this.attach(n),this.onShowStart(u,s,n,r),this.emit(e.events.SINGLE_SHOW_START,{cover:u,label:s}),t.next=9,u.show(jr({animLabel:s,force:this._useRenderTexture},r));case 9:this.onShowEnd(u,s,n,r),this.emit(e.events.SINGLE_SHOW_END,{cover:u,label:s});case 11:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"_create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._getCoverOnPos(t);return n||(n=this._createCover(t,Object(r.c)(this._sourceData,e),e),this._setUpCover(n,t,e),this.onCreated(n,t,e)),this._useRenderTexture&&n.applyTexture(this._createRenderTexture(t,null,e)),n}},{key:"_setUpCover",value:function(t,e,n){var r,i=e.reel,o=e.index,a=void 0===o?0:o;t.name="".concat(this.name,"Cover").concat(a,"x").concat(i),t.reel=i,t.index=a,t.attached=!1,(r=t.position).set.apply(r,Or(this._calcCoverPosition(e)))}},{key:"_createCover",value:function(t,e,n){var r=e.cover;return new(void 0===r?E:r)({animation:e.animation,config:e.config,mask:e.mask,data:t})}},{key:"_calcCoverPosition",value:function(t){var e=t.reel,n=t.index,r=void 0===n?0:n,i=this._reelMaster.getTilePosition({reel:e,index:r});return[i.x,i.y]}},{key:"_hideCover",value:(c=Ar(regeneratorRuntime.mark((function t(n){var r,i,o,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:{},n){t.next=3;break}return t.abrupt("return",Promise.resolve());case 3:return i=r.animLabel,o=void 0===i?"hide":i,this.onHideStart(n,o,r),this.emit(e.events.SINGLE_HIDE_START,{cover:n,label:o}),t.next=8,n.hide(jr({animLabel:o,force:this._useRenderTexture},r));case 8:this.onHideEnd(n,o,r),this.emit(e.events.SINGLE_HIDE_END,{cover:n,label:o});case 10:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"_destroyCover",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.silent||this.onDestroyed(t,e),t.destroy(),this._reset()}},{key:"_exec",value:function(t,e){var n=this.getCovers(t);return n.length?Promise.all(n.map((function(t){return e(t)}))):Promise.resolve()}},{key:"_getCoverOnPos",value:function(t){var e=t.reel,n=t.index,r=void 0===n?0:n;return this.children.find((function(t){return t.reel===e&&t.index===r}))}},{key:"_playAnimation",value:(u=Ar(regeneratorRuntime.mark((function t(n,r){var i,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=o.length>2&&void 0!==o[2]?o[2]:{},this.onPlayStart(r,n,i),this.emit(e.events.SINGLE_PLAY_ANIM_START,{cover:r,label:n}),t.next=5,r.play(n,jr({force:this._useRenderTexture},i));case 5:this.onPlayEnd(r,n,i),this.emit(e.events.SINGLE_PLAY_ANIM_END,{cover:r,label:n});case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return u.apply(this,arguments)})},{key:"_createRenderTexture",value:function(t,e,n){if(!this._fetchFromRtCache(t)){var i=e||this._createCover(t,Object(r.c)(this._sourceData,n),n),o=n.padding,a=void 0===o?this._rtConfig.padding:o;this._addToRtCache(t,i.generateRenderTexture({padding:a}))}return this._fetchFromRtCache(t)}},{key:"_addToRtCache",value:function(t,e){var n=t.tileId;this._rtCache["tid".concat(n)]=e}},{key:"_fetchFromRtCache",value:function(t){var e=t.tileId;return this._rtCache["tid".concat(e)]}},{key:"_onReelsMove",value:function(t){var e=this,n=t.index,r=t.delta,i=this.getCovers().filter((function(t){return Boolean(t.attached)}));i.length&&i.filter((function(t){return t.reel===n})).forEach((function(t){e._updateCoverPosition(t,r),e._isOutOfBounds(t)&&e._destroyCover(t,{silent:!0})}))}},{key:"_updateCoverPosition",value:function(t,e){t.y-=e}},{key:"_isOutOfBounds",value:function(t){var e=this._reelMaster.reels[t.reel].y+this._reelMaster.getReelBounds(t.reel).height+this._calcOutOfBoundsOffset(t.reel);return t.y>e}},{key:"_calcOutOfBoundsOffset",value:function(t){var e,n=this._config.offsetFactor||1;return(this._reelMaster.tileGuide.height||(null===(e=this._reelMaster.tileGuide[this._reelMaster.reels[t].minTileSize])||void 0===e?void 0:e.height)||0)*n}},{key:"_addRendererListeners",value:function(){var t=this;this._config.attachable&&this._reelMaster.on(this._config.reelsMoveEvent||Br,(function(e){return t._onReelsMove(e)}))}},{key:"_reset",value:function(){this.children.length||(this.isActive=!1,this.visible=!1,this._rtCache={})}}],s=[{key:"events",get:function(){return Fr}}],i&&Ir(n.prototype,i),s&&Ir(n,s),e}(o.Container);function Gr(t){return(Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vr(t,e,n){return e=Wr(e),function(t,e){if(e&&("object"===Gr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Wr(t).constructor):e.apply(t,n))}function Xr(t,e,n){return(Xr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wr(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Wr(t){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yr(t,e){return(Yr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Kr=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zr(Object(n),!0).forEach((function(e){qr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Ur.events),Zr=function(t){function e(t){var n=t.reelMaster,r=t.source,i=t.config,o=t.mask;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Vr(this,e,[{name:"WinTiles",reelMaster:n,source:r,config:i,mask:o}])}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yr(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return Kr}}],(r=[{key:"onCreated",value:function(t,n,r){Xr(Wr(e.prototype),"onCreated",this).call(this,t,n,r),t.setTile(n,r)}}])&&Hr(n.prototype,r),i&&Hr(n,i),e}(Ur);function $r(t){return($r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ti(t,e,n){return e=ni(e),function(t,e){if(e&&("object"===$r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],ni(t).constructor):e.apply(t,n))}function ei(t,e,n){return(ei="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ni(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ni(t){return(ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ri(t,e){return(ri=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ii=function(t){function e(){return Jr(this,e),ti(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ri(t,e)}(e,t),n=e,(r=[{key:"setTile",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._anim.tileContainer;n&&(n.removeChildren(),n.addChild(this._createInnerTile(t,e)))}},{key:"_createInnerTile",value:function(t,e){var n=new kt.a;return n.to({id:t.tileId},"normal"),n}},{key:"_createAnim",value:function(t){ei(ni(e.prototype),"_createAnim",this).call(this,t["winTile".concat(this._data.tileId||"")]||t.winTile)}}])&&Qr(n.prototype,r),i&&Qr(n,i),e}(E),oi=n("./src/core/features/reels/tiles/MegaWaysTile.js");function ai(t){return(ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function si(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ui(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ci(t,e,n){return e=hi(e),function(t,e){if(e&&("object"===ai(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],hi(t).constructor):e.apply(t,n))}function li(t,e,n){return(li="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hi(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function hi(t){return(hi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fi(t,e){return(fi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pi=function(t){function e(){return si(this,e),ci(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fi(t,e)}(e,t),n=e,(r=[{key:"setTile",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._anim.tileContainer;n&&(n.removeChildren(),n.addChild(this._createInnerTile(t,e)))}},{key:"_createInnerTile",value:function(t,e){var n=new oi.a;return n.to({id:t.tileId},"normal",e.variant,t.size),n}},{key:"_createAnim",value:function(t){var n=t["winTile".concat(this._data.tileId,"x").concat(this._data.size)]?"winTile".concat(this._data.tileId,"x").concat(this._data.size):"winTilex".concat(this._data.size);li(hi(e.prototype),"_createAnim",this).call(this,t[n])}}])&&ui(n.prototype,r),i&&ui(n,i),e}(E);function di(t){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yi(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function mi(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){yi(o,r,i,a,s,"next",t)}function s(t){yi(o,r,i,a,s,"throw",t)}a(void 0)}))}}function vi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _i(t,e,n){return e=gi(e),function(t,e){if(e&&("object"===di(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],gi(t).constructor):e.apply(t,n))}function gi(t){return(gi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bi(t,e){return(bi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ei={SHOW_LINES_START:"show_lines_start",SHOW_LINES_END:"show_end",SHOW_LINE:"show_line"},Ti=function(t){function e(t){var n,r=t.linesData,i=t.tiles,o=t.lines,a=t.config;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=_i(this,e)).tiles=i,n.lines=o,n._linesData=r,n._config=a,n._skippedTilePositions=[],n._specialTilePositions=[],n._lineShowPromises=[],n._loopActivated=!1,n}var n,i,o,a,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bi(t,e)}(e,t),n=e,i=[{key:"setSkippedPositions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.tiles.inRtMode?console.warn("Skipping WinTiles positions not supported in RenderTexture mode!"):this._skippedTilePositions=t}},{key:"setSpecialPositions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.tiles.inRtMode?console.warn("Setting special WinTiles positions not supported in RenderTexture mode!"):this._specialTilePositions=t}},{key:"showLines",value:(u=mi(regeneratorRuntime.mark((function t(n){var i,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=o.length>1&&void 0!==o[1]?o[1]:{},this.emit(e.events.SHOW_LINES_START),t.next=4,this._singleLoop(n,Object(r.c)({delay:this._config.lines.delays.betweenLines,skipTiles:!0,hidePrevious:!1},i));case 4:this.emit(e.events.SHOW_LINES_END);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"startLoop",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.lines.hideAll(),this._loopActivated=!0,this._loop(t,e)}},{key:"deactivate",value:function(){this._loopActivated=!1,this._lineShowPromises.forEach((function(t){return t.kill()})),this._lineShowPromises=[],this.lines.hideAll(),this.tiles.remove()}},{key:"isWinningPosition",value:function(t,e){var n=this._linesData;return e.map((function(t){var e=t.index,r=t.start,i=t.length;return n[e].slice(r,r+i)})).some((function(e){return e[t.reel]===t.index}))}},{key:"skip",value:function(){this._loopActivated||(this._lineShowPromises.forEach((function(t){1!==t.progress()&&t.progress(1)})),this._lineShowPromises=[])}},{key:"_loop",value:(s=mi(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._loopActivated){t.next=2;break}return t.abrupt("return");case 2:return this._lineShowPromises=[],t.next=5,this._singleLoop(e,Object(r.c)({delay:this._config.lines.delays.singleLoop,skipTiles:!1,hidePrevious:!0},n));case 5:return t.next=7,Object(r.d)(this._config.lines.delays.singleLoop);case 7:return t.next=9,this._loop(e,n);case 9:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})},{key:"_singleLoop",value:(a=mi(regeneratorRuntime.mark((function t(e){var n,r,i,o,a=this,s=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=n.delay,i=n.hidePrevious,o=void 0!==i&&i,e.forEach((function(t,e,i){a._lineShowPromises.push(w.b.delayedCall(e*r,(function(){o&&a._hideLine(i[e-1]?i[e-1]:i[i.length-1],n),a._showLine(t,n)})))})),t.next=5,Promise.all(this._lineShowPromises);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"_showLine",value:function(t,n){var r=n.delay,i=n.skipTiles;if(this.emit(e.events.SHOW_LINE,{delay:r,skipTiles:i,inLoop:this._loopActivated,tileId:t.tile}),this.lines.show(t),!i){var o=this._generateLinePositions(t),a=o.positions,s=o.skipped;this.tiles.activate(a),n.onLineTilesShown&&n.onLineTilesShown({line:t,positions:a,skipped:s})}}},{key:"_hideLine",value:function(t,e){var n=e.skipTiles;if(this.lines.hide(t),!n){var r=this._generateLinePositions(t),i=r.positions,o=r.skipped;this.tiles.remove(i),e.onLineTilesHidden&&e.onLineTilesHidden({line:t,positions:i,skipped:o})}}},{key:"_generateLinePositions",value:function(t){var e=this,n=[],r=[];return t.tiles.forEach((function(i,o){i&&(e._getOnPosition(t,o,e._skippedTilePositions)?r.push(e._generatePositionData(t,o)):n.push(e._generatePositionData(t,o)))})),{positions:n,skipped:r}}},{key:"_generatePositionData",value:function(t,e){var n=t.index;return{reel:e,index:this._linesData[n][e],tileId:this._getTileId(t,e)}}},{key:"_getOnPosition",value:function(t,e,n){var r=this._linesData[t.index];return n.find((function(t){var n=t.reel,i=t.index;return n===e&&i===r[e]}))}},{key:"_getTileId",value:function(t,e){var n=this._getOnPosition(t,e,this._specialTilePositions);return(null==n?void 0:n.tileId)||(null==n?void 0:n.tile)||t.tile}}],o=[{key:"events",get:function(){return Ei}}],i&&vi(n.prototype,i),o&&vi(n,o),e}(Vn.a);function wi(t){return(wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xi(t){return function(t){if(Array.isArray(t))return Si(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Si(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Si(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Si(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Oi(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Pi(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Oi(o,r,i,a,s,"next",t)}function s(t){Oi(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Ri(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ai(t,e,n){return e=Ii(e),function(t,e){if(e&&("object"===wi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Ii(t).constructor):e.apply(t,n))}function Ii(t){return(Ii=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ci(t,e){return(Ci=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ki={SHOW_ALL_START:"show_all_start",SHOW_ALL_END:"show_all_end",SHOW_SINGLE:"show_single",HIDE_ALL_START:"hide_all_start",HIDE_ALL_END:"hide_all_end",HIDE_SINGLE:"hide_single",REMOVE_ALL_START:"remove_all_start",REMOVE_ALL_END:"remove_all_end",REMOVE_SINGLE:"remove_single"},Ni=function(t){function e(t){var n,r=t.reelMaster,i=t.tiles,o=t.config;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ai(this,e)).tiles=i,n._reelMaster=r,n._config=o,n._skippedTilePositions=[],n._specialTilePositions=[],n}var n,i,o,a,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ci(t,e)}(e,t),n=e,i=[{key:"setSkippedPositions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._skippedTilePositions=t}},{key:"setSpecialPositions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.tiles.inRtMode?console.warn("Setting special WinTiles positions not supported in RenderTexture mode!"):this._specialTilePositions=t}},{key:"show",value:(u=Pi(regeneratorRuntime.mark((function t(n){var r,i=this,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},this.emit(e.events.SHOW_ALL_START),t.next=4,Promise.all(n.map((function(t,e){return i._showSingle(t,e,r)})));case 4:this.emit(e.events.SHOW_ALL_END);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"hide",value:(s=Pi(regeneratorRuntime.mark((function t(n){var r,i,o=this,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:{},this.emit(e.events.HIDE_ALL_START),n){t.next=9;break}return i=this._getActivePositions(),r.onTilesHide&&r.onTilesHide({positions:i,skipped:this._skippedTilePositions}),t.next=7,this.tiles.deactivate(null,r);case 7:t.next=11;break;case 9:return t.next=11,Promise.all([].concat(n).map((function(t,e){return o._hideSingle(t,e,r)})));case 11:this.emit(e.events.HIDE_ALL_END);case 12:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"remove",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.emit(e.events.REMOVE_ALL_START),t)[].concat(t).forEach((function(t,e){return n._removeSingle(t,e,r)}));else{var i=this._getActivePositions();r.onTilesRemove&&r.onTilesRemove({positions:i,skipped:this._skippedTilePositions}),this.tiles.remove(null,r)}this.emit(e.events.REMOVE_ALL_END)}},{key:"deactivate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.remove(t,e)}},{key:"_showSingle",value:(a=Pi(regeneratorRuntime.mark((function t(n,i){var o,a,s,u,c,l,h,f=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=f.length>2&&void 0!==f[2]?f[2]:{},a=Object(Zt.a)(o,this._config),s=a.delays.betweenShows,u=this._generatePositions(n),c=u.positions,l=u.skipped,!((h=s*i)>0)){t.next=7;break}return t.next=7,Object(r.d)(h);case 7:return this.emit(e.events.SHOW_SINGLE,{winData:n,positions:c,skipped:l,index:i}),o.onTilesShow&&o.onTilesShow({winData:n,positions:c,skipped:l,index:i}),t.abrupt("return",this.tiles.activate(c,o));case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"_hideSingle",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this._generatePositions(t),o=i.positions,a=i.skipped;return this.emit(e.events.HIDE_SINGLE,{winData:t,positions:o,skipped:a,index:n}),r.onTilesHide&&r.onTilesHide({winData:t,positions:o,skipped:a,index:n}),this.tiles.deactivate(o,r)}},{key:"_removeSingle",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this._generatePositions(t),o=i.positions,a=i.skipped;this.emit(e.events.REMOVE_SINGLE,{winData:t,positions:o,skipped:a,index:n}),r.onTilesRemove&&r.onTilesRemove({winData:t,positions:o,skipped:a,index:n}),this.tiles.remove(o,r)}},{key:"_generatePositions",value:function(t){var e=this,n=t.tiles,r=t.tile,i=[],o=[];return n.forEach((function(t,n){var a=e._getPositionsOnReel(n,t,r);i.push.apply(i,xi(a.skipped)),o.push.apply(o,xi(a.positions))})),{positions:o,skipped:i}}},{key:"_getPositionsOnReel",value:function(t,e,n){var r=this,i=this._reelMaster.reels[t].currentSize,o=[],a=[];return e.forEach((function(e,s){if(e){var u=r._getTileId({reel:t,index:s},n),c=r._isPositionSkipped(t,s),l={reel:t,index:s,size:i,tileId:u};c?a.push(l):o.push(l)}})),{positions:o,skipped:a}}},{key:"_getTileId",value:function(t,e){var n=t.reel,r=t.index,i=this._specialTilePositions.find((function(t){return t.reel===n&&t.index===r}));return(null==i?void 0:i.tileId)||(null==i?void 0:i.tile)||e}},{key:"_isPositionSkipped",value:function(t,e){return Boolean(this._skippedTilePositions.find((function(n){return n.index===e&&n.reel===t})))}},{key:"_getActivePositions",value:function(){return this.tiles.getCovers().map((function(t){return t.data}))}}],o=[{key:"events",get:function(){return ki}}],i&&Ri(n.prototype,i),o&&Ri(n,o),e}(Vn.a);function Mi(t){return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ji(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Di(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ji(Object(n),!0).forEach((function(e){Li(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ji(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Li(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bi(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Fi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ui(t,e,n){return e=Hi(e),function(t,e){if(e&&("object"===Mi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Hi(t).constructor):e.apply(t,n))}function Gi(t,e,n){return(Gi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hi(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Hi(t){return(Hi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vi(t,e){return(Vi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xi={TOP_LEFT:{x:0,y:0},LEFT:{x:0,y:.5},BOTTOM_LEFT:{x:0,y:1},TOP_CENTER:{x:.5,y:0},CENTER:{x:.5,y:.5},BOTTOM_CENTER:{x:.5,y:1},TOP_RIGHT:{x:1,y:0},RIGHT:{x:1,y:.5},BOTTOM_RIGHT:{x:1,y:1}},Wi=function(t){function e(t){var n,r=t.animation,i=t.config,o=t.mask;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ui(this,e,[{animation:r,config:i,mask:o}]))._adjustGuide=n._anim.main.adjust,n._innerContainer=n._anim.main.inner,n._waysLabels=n._innerContainer.waysLabels,n._waysCountContainer=n._innerContainer.waysCountContainer,n._sumContainer=n._innerContainer.sumContainer,n._sumCounter=null,n._waysCounter=null,n._initCounters(),n}var n,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vi(t,e)}(e,t),n=e,(i=[{key:"show",value:(a=regeneratorRuntime.mark((function t(n,r){var i,o,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=a.length>2&&void 0!==a[2]?a[2]:{},!this._isShowing&&!this._isShown){t.next=3;break}return t.abrupt("return");case 3:return o=n.reduce((function(t,e){return t+e.ways}),0),this._reset(),this._waysCounter.currentCount=o,this._sumCounter.currentCount=r,this._setLabel(o),this._adjustPosition(),t.abrupt("return",Gi(Hi(e.prototype),"show",this).call(this,i));case 10:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=a.apply(t,e);function o(t){Bi(i,n,r,o,s,"next",t)}function s(t){Bi(i,n,r,o,s,"throw",t)}o(void 0)}))},function(t,e){return s.apply(this,arguments)})},{key:"_setLabel",value:function(t){t>1?this._waysLabels.ways.visible=!0:this._waysLabels.way.visible=!0}},{key:"_initCounters",value:function(){this._sumCounter=this._createCounter(this._sumContainer,Di(Di({},this._config.sum),{},{alignType:"TOP_LEFT"})),this._waysCounter=this._createCounter(this._waysCountContainer,Di(Di({},this._config.waysCount),{},{alignType:"TOP_LEFT"}))}},{key:"_createCounter",value:function(t,e){var n=t.getLocalBounds().height,r=new k({config:Di({fontSize:n},e)});return t.removeChildren(),t.addChild(r),r}},{key:"_adjustPosition",value:function(){var t=this._config,e=t.labelSpacing,n=e.left,i=void 0===n?0:n,o=e.right,a=void 0===o?0:o,s=t.alignType,u=void 0===s?"CENTER":s,c=t.fit,l=c.ignoreRatio,h=c.overscale,f=this._adjustGuide.getLocalBounds(),p=f.width,d=f.height,y=Xi[u],m=this._adjustGuide.getLocalBounds();this._waysCountContainer.x=0,this._waysLabels.x=this._waysCountContainer.width+i,this._sumContainer.x=this._waysLabels.x+this._waysLabels.width+a,Object(r.e)(this._innerContainer,m,l,h),this._innerContainer.x=this._adjustGuide.x+(p-this._innerContainer.width)*y.x,this._innerContainer.y=this._adjustGuide.y+(d-this._innerContainer.height)*y.y}},{key:"_reset",value:function(){this._innerContainer.scale.set(1),this._waysLabels.ways.visible=!1,this._waysLabels.way.visible=!1}}])&&Fi(n.prototype,i),o&&Fi(n,o),e}(E),Yi=n("./node_modules/ramda/es/isNil.js"),zi=n("./src/core/utils/particles.js");function qi(t){return(qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Ki=["duration","force"],Zi=["instant"],$i=["life"];function Ji(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Qi(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function to(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Qi(o,r,i,a,s,"next",t)}function s(t){Qi(o,r,i,a,s,"throw",t)}a(void 0)}))}}function eo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function no(t,e,n){return e=ro(e),function(t,e){if(e&&("object"===qi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],ro(t).constructor):e.apply(t,n))}function ro(t){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function io(t,e){return(io=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function oo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ao(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oo(Object(n),!0).forEach((function(e){so(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function so(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var uo=ao({},i.a),co=function(t){function e(t){var n,r=t.source,i=t.guide,o=t.config,a=t.mask;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=no(this,e)).isEmitting=!1,n.isActive=!1,n.mask=a,n._emitterGuide=i,n._particlesSource=r,n._emittersData=[],n._config=o,n}var n,r,i,o,a,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&io(t,e)}(e,t),n=e,r=[{key:"activate",value:(u=to(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,u,c,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=l.length>0&&void 0!==l[0]?l[0]:{},n=e.duration,r=e.force,i=void 0!==r&&r,o=Ji(e,Ki),i||this._canActivate()){t.next=3;break}return t.abrupt("return");case 3:if(a=this._createEmitter(ao(ao({},o),{},{life:n})),u=a.emitter,c=a.container,this.addChild(c),this._emittersData.push({emitter:u,container:c}),u.emit(),this.isActive=!0,this.isEmitting=!0,this.emit(uo.ACTIVATE_START),!n||s.a.Ticker.isLowFPS){t.next=17;break}return t.next=13,this._waitForParticlesDead({container:c});case 13:this._remove(c),this._updateEmittersData(o),this.isEmitting=!1,this.isActive=!1;case 17:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"deactivate",value:(a=to(regeneratorRuntime.mark((function t(){var e,n,r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:{},n=e.instant,r=Ji(e,Zi),this._emittersData.length){t.next=3;break}return t.abrupt("return");case 3:return this.emit(uo.DEACTIVATE_START),this.isEmitting=!1,t.next=7,this._destroyAll(n);case 7:this._updateEmittersData(r),this.isActive=!1;case 9:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"reset",value:function(){this._destroyAll(!0),this._emittersData=[],this.isActive=!1,this.isEmitting=!1}},{key:"_createEmitter",value:function(t){var e=t.life,n=(Ji(t,$i),Object(zi.a)(ao(ao({},this._config.emitter),{},{emitterGuide:this._emitterGuide,source:this._particlesSource}))),r=n.emitter,i=n.container;return r.life=e,{emitter:r,container:i}}},{key:"_updateEmittersData",value:function(t){this._emittersData=this._emittersData.filter((function(t){return!t.emitter.dead}))}},{key:"_canActivate",value:function(){return!this._emittersData.some((function(t){var e=t.emitter;return e.life===1/0&&!e.dead}))&&!s.a.Ticker.isLowFPS}},{key:"_destroyAll",value:function(t){var e=this;return Promise.all(this._emittersData.map((function(n){return e._destroyEmitter(n,t)})))}},{key:"_destroyEmitter",value:(o=to(regeneratorRuntime.mark((function t(e){var n,r,i,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.emitter,r=e.container,i=o.length>1&&void 0!==o[1]&&o[1],n.destroy(),i){t.next=6;break}return t.next=6,this._waitForParticlesDead({container:r});case 6:this._remove(r);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"_waitForParticlesDead",value:function(t){var e=t.container;return new Promise((function(t){e.once("destroyed",(function(){return t()}))}))}},{key:"_remove",value:function(t){t.destroy()}}],i=[{key:"events",get:function(){return uo}}],r&&eo(n.prototype,r),i&&eo(n,i),e}(o.Container);function lo(t){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ho=["thresholds","animation","config","mask","counterConstructor"];function fo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return po(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return po(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function po(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function mo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yo(Object(n),!0).forEach((function(e){vo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function vo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _o(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function go(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){_o(o,r,i,a,s,"next",t)}function s(t){_o(o,r,i,a,s,"throw",t)}a(void 0)}))}}function bo(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Eo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function To(t,e,n){return e=wo(e),function(t,e){if(e&&("object"===lo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],wo(t).constructor):e.apply(t,n))}function wo(t){return(wo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xo(t,e){return(xo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var So={NORMAL_WIN:"normalWin",BIG_WIN:"bigWin",SUPER_WIN:"superWin",MEGA_WIN:"megaWin",EPIC_WIN:"epicWin",TOTAL_WIN:"totalWin"},Oo={SUM_PLAY_START:"sum_play_start",SUM_PLAY_END:"sum_play_end",HIDE_START:"hide_start",HIDE_END:"hide_end",BANGUP_START:"bangup_start",BANGUP_END:"bangup_end",LABEL_SHOW_START:"label_show_start",LABEL_SHOW_END:"label_show_end",LABEL_SUM_SHOW_START:"label_sum_show_start",LABEL_SUM_SHOW_END:"label_sum_show_end",LABEL_CHANGE:"label_change"},Po=function(t){function e(t){var n,r=t.thresholds,i=void 0===r?{}:r,o=t.animation,a=t.config,s=t.mask,u=t.counterConstructor,c=void 0===u?k:u,l=bo(t,ho);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=To(this,e)).mask=s,n.thresholds=i,n.movieClip=o,n.type=null,n.amount=null,n.multiplier=null,n.anim=null,n.winLabels=null,n.sum=null,n.sumInner=null,n.sumTween=null,n.coins=null,n.isSkipped=!1,n.isLabelShown=!1,n.isSumShown=!1,n.isBangupActive=!1,n.roundHasCelebrations=!0,n._counterConstructor=c,n._fitBounds=null,n._config=a,n._init(l),n._createAnim(),n}var n,i,o,a,s,u,c,l,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xo(t,e)}(e,t),n=e,i=[{key:"showLabel",value:(h=go(regeneratorRuntime.mark((function t(){var e,n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:So.BIG_WIN,n=r.length>1&&void 0!==r[1]?r[1]:"show",this.roundHasCelebrations){t.next=4;break}return t.abrupt("return");case 4:if(this._setUpAnimation(),this.winLabels[e]){t.next=7;break}return t.abrupt("return");case 7:return this.type=e,this.emit(Oo.LABEL_SHOW_START,{label:e}),this.winLabels["".concat(e,"Bg")].promises.gotoAndPlay(n),t.next=12,this.winLabels[e].promises.gotoAndPlay(n);case 12:this.isLabelShown=!0,this.emit(Oo.LABEL_SHOW_END,{label:e});case 14:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"showLabelSum",value:(l=go(regeneratorRuntime.mark((function t(){var e,n=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.length>0&&void 0!==n[0]?n[0]:So.BIG_WIN,this.roundHasCelebrations){t.next=3;break}return t.abrupt("return");case 3:if(this._setUpAnimation(),this.winLabels[e]){t.next=6;break}return t.abrupt("return");case 6:if(this.winLabels[e].labels.find((function(t){return"showSum"===t.label}))){t.next=8;break}return t.abrupt("return");case 8:return this.type=e,this.emit(Oo.LABEL_SUM_SHOW_START,{label:e}),t.next=12,this.winLabels[e].promises.gotoAndPlay("showSum");case 12:this.emit(Oo.LABEL_SUM_SHOW_END,{label:e});case 13:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"hideLabel",value:(c=go(regeneratorRuntime.mark((function t(){var e,n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:this.type,n=r.length>1&&void 0!==r[1]?r[1]:"hide",this.winLabels[e]&&this.roundHasCelebrations){t.next=4;break}return t.abrupt("return");case 4:return this.winLabels["".concat(e,"Bg")].promises.gotoAndPlay(n),t.next=7,this.winLabels[e].promises.gotoAndPlay(n);case 7:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"playSum",value:(u=go(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,u,c=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=c.length>0&&void 0!==c[0]?c[0]:{},n=e.value,r=e.anim,i=void 0===r?"show":r,o=e.shouldLoop,a=void 0!==o&&o,s=e.loopAnim,u=void 0===s?"loop":s,this.roundHasCelebrations){t.next=3;break}return t.abrupt("return");case 3:return this.type||(this.type=So.NORMAL_WIN),this.isSumShown=!0,this._setUpAnimation(),this._createCounter(n),this.emit(Oo.SUM_PLAY_START,{anim:i}),t.next=10,this.sum.promises.gotoAndPlay(i);case 10:this.emit(Oo.SUM_PLAY_END,{anim:i}),a&&this.sum.promises.gotoAndPlay(u,{repeat:-1});case 12:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"bangup",value:(s=go(regeneratorRuntime.mark((function t(){var e,n,i,o,a,s,u,c,l,h,f=this,p=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=p.length>0&&void 0!==p[0]?p[0]:{},n=e.from,i=void 0===n?this.counter.currentCount:n,o=e.to,a=e.duration,s=e.stake,u=void 0===s?this.stake:s,c=e.dynamicLabels,l=e.speed,h=void 0===l?this._config.bangupSpeed:l,this.roundHasCelebrations){t.next=3;break}return t.abrupt("return");case 3:return this.stake=u,a=Object(Yi.a)(a)?this._calculateBangupDuration(i,o,h):a,this.emit(Oo.BANGUP_START,{label:this.type}),t.next=8,this.counter.update(o,{from:i,duration:a,onUpdate:function(t){return f._onBangup(t,c)},easing:Object(r.m)(this._config.easings)});case 8:this.isBangupActive=!1,this.emit(Oo.BANGUP_END,{label:this.type});case 10:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"pulseSum",value:function(){if(this.sumInner){var t=this._config.pulseSum,e=this.sumInner.scale;this.sumInner.initialScale={x:e.x,y:e.y},this.sumTween=w.b.to(e,mo(mo({},t.animation),{},{x:this.sumInner.initialScale.x*t.scaleBy,y:this.sumInner.initialScale.y*t.scaleBy}))}}},{key:"stopPulse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._config.pulseSum.returnAnimation,e=t.duration,n=t.ease;if(this.sumTween){var r=this.sumInner.initialScale||{x:1,y:1};this.sumTween.kill(),this.sumTween=null,w.b.to(this.sumInner.scale,{duration:e,ease:n,x:r.x,y:r.y})}}},{key:"startCoins",value:function(){this.winLabels&&this.roundHasCelebrations&&(this.anim.winLabels.coinsContainer.removeChild(this.coins),this.coins=new co({source:qt.a.ExtraWin.extraWinCoin,guide:this.winLabels.coinsGuide,config:this._config.coins}),this.anim.winLabels.coinsContainer.addChild(this.coins),this.coins.activate())}},{key:"stopCoins",value:function(){this.coins&&this.coins.deactivate()}},{key:"hide",value:(a=go(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=a.length>0&&void 0!==a[0]?a[0]:{},n=e.sumAnim,r=void 0===n?"hide":n,i=e.labelsAnim,o=void 0===i?"hide":i,this.roundHasCelebrations){t.next=3;break}return t.abrupt("return");case 3:return this.emit(Oo.HIDE_START,{label:this.type}),t.next=6,Promise.all([this.playSum({anim:r}),this.hideLabel(this.type,o)]);case 6:this.emit(Oo.HIDE_END,{label:this.type}),this.reset();case 8:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"skip",value:function(){this.canSkip()&&(this.counter.skip(),this.isSkipped=!0)}},{key:"canSkip",value:function(){return this.isSumShown&&this.isBangupActive&&!this.isSkipped}},{key:"reset",value:function(){this.removeChild(this.anim),this.sumInner.removeChildren(),this.counter=null,this.coins=null,this.type=null,this.amount=null,this.multiplier=null,this.isSkipped=!1,this.isLabelShown=!1,this.isSumShown=!1,this.isBangupActive=!1}},{key:"getTypeBasedOnMultiplier",value:function(t){return Object.entries(this.thresholds).reduce((function(e,n){var r=fo(n,2),i=r[0],o=r[1];return t>=o?i:e}),So.NORMAL_WIN)}},{key:"getDelay",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.type,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.multiplier;if(!this.roundHasCelebrations)return 0;var r=t[e],i=r.default,o=r.custom;return Object(Ct.a)(o)?i:Object.entries(o).reduce((function(t,e){var r=fo(e,2),i=r[0],o=r[1];return n>i?o:t}),null)}},{key:"_init",value:function(t){}},{key:"_createAnim",value:function(){if(!this.anim){this.anim=new this.movieClip,this.addChild(this.anim),this.sum=this.anim.sumContainer,this.sumInner=this.sum.amount.sumInner,this.winLabels=this.anim.winLabels,this._initAnims();var t=this.sumInner.getLocalBounds(),e=t.width,n=t.height;this._fitBounds=mo({width:e,height:n},this._config.sum.fitBounds)}}},{key:"_createCounter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.counter){var e={config:mo({fontSize:this._fitBounds.height},this._config.sum)};this.counter=new this._counterConstructor(e),this.counter.name="extraWinSum",this.sumInner.removeChildren(),this.sumInner.addChild(this.counter),this.counter.currentCount=t}}},{key:"_setUpAnimation",value:function(){this.anim.parent||(this.addChild(this.anim),this._initAnims())}},{key:"_initAnims",value:function(){this.sum.promises.gotoAndStop("init"),this.winLabels.children.forEach((function(t){var e,n;return null===(e=(n=t.promises).gotoAndStop)||void 0===e?void 0:e.call(n,"init")}))}},{key:"_onBangup",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._config.dynamicLabels;this.isBangupActive=!0,this.amount=t,this.multiplier=t/this.stake;var i=this._config.sum,o=i.ignoreRatio,a=i.overscale;if(Object(r.e)(this.counter,this._fitBounds,o,a),this.type!==So.TOTAL_WIN&&this.type!==So.JACKPOT_WIN&&n){var s=this.getTypeBasedOnMultiplier(this.multiplier);[So.NORMAL_WIN,this.type].includes(s)||(this.emit(Oo.LABEL_CHANGE,{oldLabel:this.type,newLabel:s,isSkipped:this.isSkipped}),this.hideLabel(),this.showLabel(s).then((function(){e.type===s&&e.showLabelSum(s)})))}}},{key:"_calculateBangupDuration",value:function(t,e,n){return(e-t)/(this.stake*n)}}],o=[{key:"events",get:function(){return Oo}},{key:"types",get:function(){return So}}],i&&Eo(n.prototype,i),o&&Eo(n,o),e}(o.Container),Ro=n("./node_modules/ramda/es/clone.js");function Ao(t){return(Ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Io(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Co(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Io(o,r,i,a,s,"next",t)}function s(t){Io(o,r,i,a,s,"throw",t)}a(void 0)}))}}function ko(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function No(t,e,n){return e=jo(e),function(t,e){if(e&&("object"===Ao(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],jo(t).constructor):e.apply(t,n))}function Mo(t,e,n){return(Mo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jo(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function jo(t){return(jo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Do(t,e){return(Do=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Lo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Lo(Object(n),!0).forEach((function(e){Fo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Fo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Uo=Bo(Bo({},Po.animLabels),{},{sum:{PULSE:"pulse"}}),Go=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=No(this,e,[t]))._preventSkip=!1,n._inSkipDelay=!1,n._skipCount=0,n._skipCfg={},n}var n,i,o,a,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Do(t,e)}(e,t),n=e,i=[{key:"reset",value:function(){this._skipCount=0,this._skipCfg={},this._inSkipDelay=!1,this._preventSkip=!1,Mo(jo(e.prototype),"reset",this).call(this)}},{key:"showLabel",value:(u=Co(regeneratorRuntime.mark((function t(){var n,r,i,o,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(this._preventSkip=!this._config.sum.skip.skipOnLabelChange,r=a.length,i=new Array(r),o=0;o<r;o++)i[o]=a[o];return t.next=4,(n=Mo(jo(e.prototype),"showLabel",this)).call.apply(n,[this].concat(i));case 4:this._preventSkip=!1;case 5:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"skip",value:function(){if(this.canSkip()){this._skipCfg=this._getCurrentSkipConfig();var t=this._getStepAmount();return this.counter.skip(t),this._setSkipDelay(),this._pulseAnim()}}},{key:"canSkip",value:function(){return this.isSumShown&&this.isBangupActive&&!this._inSkipDelay&&!this._preventSkip}},{key:"_setSkipDelay",value:(s=Co(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this._getCurrentOption("skipDelay"),this._inSkipDelay=!!e,!this._inSkipDelay){t.next=5;break}return t.next=5,Object(r.d)(e);case 5:this._inSkipDelay=!1;case 6:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"_pulseAnim",value:(a=Co(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.sumInner){t.next=2;break}return t.abrupt("return");case 2:if(!this.sum.labelsMap[Uo.sum.PULSE]){t.next=8;break}return t.next=6,this.sum.promises.gotoAndPlay(Uo.sum.PULSE);case 6:t.next=12;break;case 8:return this.pulseSum(),t.next=11,this.sumTween;case 11:this.stopPulse();case 12:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"_getStepMultiplier",value:function(){var t=this._getCurrentOption("stepDeviation")||0,e=this._getCurrentOption("stepMultiplier")+Object(r.h)(-t,t);return Math.abs(e)}},{key:"_getStepAmount",value:function(){var t=this._skipCfg,e=t.skipToThreshold,n=t.value;if(!e){var r=this._getStepMultiplier()*this.stake,i=this.counter.currentCount+r;return this._skipCount++,i}return n*this.stake}},{key:"_getCurrentOption",value:function(t){if(this._skipCfg&&this._skipCfg[t]){var e=this._skipCfg[t];return Array.isArray(e)?e[this._skipCount]||e[e.length-1]:e}}},{key:"_getCurrentSkipConfig",value:function(){var t=this,e=Object(Ro.a)(this._config.sum.skip.thresholds).sort((function(t,e){return t.value-e.value})),n=e[e.length-1];return e.find((function(e){return t.multiplier<e.value}))||n}}],o=[{key:"animLabels",get:function(){return Uo}}],i&&ko(n.prototype,i),o&&ko(n,o),e}(Po);function Ho(t){return(Ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Xo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vo(Object(n),!0).forEach((function(e){Wo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Wo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zo(t,e,n){return e=qo(e),function(t,e){if(e&&("object"===Ho(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],qo(t).constructor):e.apply(t,n))}function qo(t){return(qo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ko(t,e){return(Ko=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zo=function(t){function e(t){var n,r=t.target,i=t.mask,o=t.config,a=void 0===o?{}:o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=zo(this,e)).mask=i,n._reference={x:r.x,y:r.y},n._target=r,n._config=n._parseConfig(a),n._rumbler={x:null,y:null},n._accelerator={x:null,y:null},n._decelerator={x:null,y:null},n._stopDelay={x:null,y:null},n}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ko(t,e)}(e,t),n=e,(i=[{key:"isActive",get:function(){var t,e,n,r,i,o;return(null===(t=this._rumbler)||void 0===t||null===(e=t.x)||void 0===e||null===(n=e.isActive)||void 0===n?void 0:n.call(e))||(null===(r=this._rumbler)||void 0===r||null===(i=r.y)||void 0===i||null===(o=i.isActive)||void 0===o?void 0:o.call(i))||!1}},{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.stop();var e=Object(r.c)(this._config,this._parseConfig(t));if(this._isConfigValid(e)){var n=e.duration,i=e.randomize,o=e.intensity,a=e.acceleration,s=e.deceleration,u=e.interval;o.x>0&&0!==n.x&&this._startRumble({axis:"x",acceleration:a,deceleration:s,intensity:o,duration:n,interval:u,randomize:i}),o.y>0&&0!==n.y&&this._startRumble({axis:"y",acceleration:a,deceleration:s,intensity:o,duration:n,interval:u,randomize:i})}}},{key:"stop",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["x","y"];[].concat(e).forEach((function(e){var n,r,i,o;null===(n=t._rumbler[e])||void 0===n||n.kill(),null===(r=t._accelerator[e])||void 0===r||r.kill(),null===(i=t._decelerator[e])||void 0===i||i.kill(),null===(o=t._stopDelay[e])||void 0===o||o.kill(),t._rumbler[e]=null,t._accelerator[e]=null,t._decelerate[e]=null,t._stopDelay[e]=null,t._target[e]=t._reference[e]}))}},{key:"_startRumble",value:function(t){var e,n,r,i=this,o=t.axis,a=t.acceleration,s=t.deceleration,u=t.intensity,c=t.duration,l=t.interval,h=t.randomize,f=null!==(e=a[o])&&void 0!==e&&e.duration?{intensity:Wo({},o,0)}:{intensity:Wo({},o,u[o])};(null===(n=a[o])||void 0===n?void 0:n.duration)>0&&(this._accelerator[o]=this._accelerate(f,{intensity:Wo({},o,u[o]),acceleration:a[o]})),c[o]>0&&(null===(r=s[o])||void 0===r?void 0:r.duration)>0&&(this._decelerator[o]=this._decelerate(f,{axis:o,duration:c[o],deceleration:s[o]})),this._rumbler[o]=w.b.to({val:0},{val:1,duration:l[o],repeat:-1,onRepeat:function(){return i._rumble({axis:o,intensity:f.intensity,randomize:h[o]})}}),c[o]>0&&(this._stopDelay[o]=w.b.delayedCall(c[o],(function(){return i.stop([o])})))}},{key:"_rumble",value:function(t){var e=t.axis,n=t.intensity,r=t.randomize;if(n[e]>0){var i=r?this._getRandomOffset(n[e]):n[e];i*=this._target[e]>this._reference[e]?-1:1,this._target[e]=this._reference[e]+i}}},{key:"_accelerate",value:function(t,e){var n=e.intensity,r=e.acceleration;return w.b.to(t.intensity,Xo(Xo({},n),r))}},{key:"_decelerate",value:function(t,e){var n=e.axis,r=e.duration,i=e.deceleration;return w.b.to(t.intensity,Xo(Wo(Wo({},"".concat(n),0),"delay",r-i.duration),i))}},{key:"_getRandomOffset",value:function(t){var e;do{e=Object(r.h)(0,t)}while(0===e&&0!==t);return e}},{key:"_isConfigValid",value:function(t){var e=t.acceleration,n=t.deceleration,r=t.duration,i=this._isAccelerationValid({axis:"x",acceleration:e,deceleration:n,duration:r})||this._isAccelerationValid({axis:"y",acceleration:e,deceleration:n,duration:r});return 0===r.x&&0===r.y&&(console.error("You are trying to do a Rumble with 0 duration for both x and y!",t),i=!1),i}},{key:"_isAccelerationValid",value:function(t){var e=t.axis,n=t.acceleration,r=t.deceleration,i=t.duration,o=!0;return i[e]>0&&n[e].duration+r[e].duration>i[e]&&(o=!1,console.error("The sum of acceleration and deceleration durations of ".concat(e," config MUST NOT be greater than the rumble duration!"))),o}},{key:"_parseConfig",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(n,r){return n[r]={},"acceleration"===r||"deceleration"===r?n[r]=t._parseAcceleration(e[r]):"number"==typeof e[r]?(n[r].x=e[r],n[r].y=e[r]):n[r]=e[r],n}),{})}},{key:"_parseAcceleration",value:function(t){return t.x&&t.y?t:{x:Xo({},t),y:Xo({},t)}}}])&&Yo(n.prototype,i),o&&Yo(n,o),e}(o.Container),$o=n("./node_modules/seamless-immutable/seamless-immutable.development.js"),Jo=n.n($o);function Qo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ta=function(){function t(e){var n=e.user.prevRounds,r=e.game;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lastSpinData=this._parseInitialState(n),this.defaultState=Jo()({reelsBuffer:r.reelsBuffer}),this._lastMainSpinData=this._parseInitialState(n,!0)||Jo()({}),this._enabled=r.stateful,this._currBonusId=0}var e,n,r;return e=t,(n=[{key:"enabled",get:function(){return this._enabled}},{key:"getData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e?this._lastMainSpinData[t]:this.lastSpinData[t];return n&&n[this._currBonusId]||this.defaultState}},{key:"updateData",value:function(t){var e=Xn.a.extraSpins,n=Xn.a.main.game,r=e.length?e[e.length-1]:n;this.lastSpinData[t]||(this.lastSpinData=this.lastSpinData.set(t,{})),this._lastMainSpinData[t]||(this._lastMainSpinData=this._lastMainSpinData.set(t,{})),this.lastSpinData=Jo.a.setIn(this.lastSpinData,["".concat(t),"".concat(this._currBonusId)],r),this._lastMainSpinData=Jo.a.setIn(this._lastMainSpinData,["".concat(t),"".concat(this._currBonusId)],n)}},{key:"setCurrBonusId",value:function(t){t||(t=0),this._currBonusId=t}},{key:"_parseInitialState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Gn.a.hasFeatureBuy&&Gn.a.featureBuy.excludeDataFromPrevRounds?t.filter((function(t){return void 0===t.game[0].bonus})):t;return Jo()(n.reduce((function(t,n){var r=Xn.a.parseExtraSpins(n.game[0]),i=r&&!e?Xn.a.flattenExtraSpins(r):n.game,o=parseFloat(n.stake),a=parseInt(n.bonusId);return t[o]||(t[o]={}),t[o][a]=i[i.length-1],t}),{}))}}])&&Qo(e.prototype,n),r&&Qo(e,r),t}();function ea(t){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function na(t){return function(t){if(Array.isArray(t))return ra(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ra(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ra(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ra(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ia(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function aa(t,e,n){return e=ua(e),function(t,e){if(e&&("object"===ea(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],ua(t).constructor):e.apply(t,n))}function sa(t,e,n){return(sa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ua(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ua(t){return(ua=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ca(t,e){return(ca=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function la(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ha(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?la(Object(n),!0).forEach((function(e){fa(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function fa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pa=ha(ha({},Ur.events),{},{TILE_ADD:"tile_add"}),da=function(t){function e(){return ia(this,e),aa(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ca(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return pa}}],(r=[{key:"onCreated",value:function(t,n,r){sa(ua(e.prototype),"onCreated",this).call(this,t,n,r),t.tileId=n.tileId}},{key:"onShowStart",value:function(t,n,r,i){sa(ua(e.prototype),"onShowStart",this).call(this,t,n,r,i);var o=r.reel,a=r.index,s=r.tileId;this._reelMaster.replaceTile(a,0,o),this.emit(pa.TILE_ADD,{reel:o,index:a,tileId:s,total:this.children.length})}},{key:"onShowEnd",value:function(t,n,r,i){sa(ua(e.prototype),"onShowEnd",this).call(this,t,n,r,i),this.play("loop",r,{repeat:-1})}},{key:"onDestroyed",value:function(t,n){sa(ua(e.prototype),"onDestroyed",this).call(this,t,n),this._reelMaster.replaceTile(t.index,t.tileId,t.reel)}},{key:"onReelEvent",value:function(t){var e=this._getMatchingData(t.reel);return e.length?this.activate(e,{animLabel:t.animLabel,attachToReels:t.attachToReels}):Promise.resolve()}},{key:"_getMatchingData",value:function(t){var e=this._config.tileIds||[].concat(this._config.tileId);return this._reelMaster.getResultData(t.index).reduce((function(n,r,i){return e.includes(r.id)?[].concat(na(n),[ha({reel:t.index,index:i,tileId:r.id},r)]):n}),[])}}])&&oa(n.prototype,r),i&&oa(n,i),e}(Ur);function ya(t){return(ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ma(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function va(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){ma(o,r,i,a,s,"next",t)}function s(t){ma(o,r,i,a,s,"throw",t)}a(void 0)}))}}function _a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ga(t,e,n){return e=ba(e),function(t,e){if(e&&("object"===ya(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],ba(t).constructor):e.apply(t,n))}function ba(t){return(ba=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ea(t,e){return(Ea=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ta(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wa(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ta(Object(n),!0).forEach((function(e){xa(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ta(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Sa=wa(wa({},i.a),{},{SIRENS:"SIRENS",WHEEL_START:"WHEEL_START",WHEEL_HIDE:"WHEEL_HIDE",WHEEL_HIDE_ALL:"WHEEL_HIDE_ALL"}),Oa=function(t){function e(t){var n,r=t.features,i=t.config;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ga(this,e))._config=i,n._features=r,n._isSirenPlayed=!1,n}var n,i,o,a,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ea(t,e)}(e,t),n=e,i=[{key:"observeReels",value:function(t){this._features.jackpotPopupTiles.observeReels(t)}},{key:"activate",value:(u=va(regeneratorRuntime.mark((function t(){var e,n,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:[],!(n=e.filter((function(t){return!t.screen}))).length){t.next=9;break}return t.next=5,Object(r.d)(this._config.delays.spawn.beforeShow);case 5:return this._features.wins.deactivate(),this._features.rumble.start({duration:this._config.rumble.duration}),t.next=9,this._spawnTiles(n);case 9:e.length===this._config.winTilesThreshold&&this._playSiren();case 10:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"deactivate",value:function(){this._features.jackpotPopupTiles.deactivate()}},{key:"reset",value:function(){this._isSirenPlayed=!1}},{key:"resume",value:function(){}},{key:"wheelStart",value:function(){this.emit(Sa.WHEEL_START)}},{key:"wheelHide",value:function(){this.emit(Sa.WHEEL_HIDE)}},{key:"wheelHideAll",value:function(){this.emit(Sa.WHEEL_HIDE_ALL)}},{key:"_spawnTiles",value:(s=va(regeneratorRuntime.mark((function t(){var e,n,i,o,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=a.length>0&&void 0!==a[0]?a[0]:[],n=this._config.delays.spawn.betweenTiles,i=0;case 3:if(!(i<e.length)){t.next=13;break}if(o=e[i],0===i){t.next=8;break}return t.next=8,Object(r.d)(n);case 8:return t.next=10,this._addTileToReel(o);case 10:i++,t.next=3;break;case 13:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"_addTileToReel",value:(a=va(regeneratorRuntime.mark((function t(e){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this._config.labels,r=n.tileWin,i=n.tileIdle,t.next=3,this._features.jackpotPopupTiles.activate(e,{animLabel:r});case 3:this._features.jackpotPopupTiles.play(i,e,{repeat:-1});case 4:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"_playSiren",value:function(){this._isSirenPlayed||(this.emit(Sa.SIRENS),this._isSirenPlayed=!0)}}],o=[{key:"events",get:function(){return Sa}}],i&&_a(n.prototype,i),o&&_a(n,o),e}(o.Container),Pa=n("./node_modules/ramda/es/internal/_curryN.js"),Ra=n("./node_modules/ramda/es/internal/_dispatchable.js"),Aa=n("./node_modules/ramda/es/internal/_has.js"),Ia=n("./node_modules/ramda/es/internal/_reduce.js"),Ca=n("./node_modules/ramda/es/internal/_xfBase.js"),ka=function(){function t(t,e,n,r){this.valueFn=t,this.valueAcc=e,this.keyFn=n,this.xf=r,this.inputs={}}return t.prototype["@@transducer/init"]=Ca.a.init,t.prototype["@@transducer/result"]=function(t){var e;for(e in this.inputs)if(Object(Aa.a)(e,this.inputs)&&(t=this.xf["@@transducer/step"](t,this.inputs[e]))["@@transducer/reduced"]){t=t["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){var n=this.keyFn(e);return this.inputs[n]=this.inputs[n]||[n,this.valueAcc],this.inputs[n][1]=this.valueFn(this.inputs[n][1],e),t},t}(),Na=Object(Pa.a)(4,[],(function(t,e,n,r){return new ka(t,e,n,r)})),Ma=Object(Pa.a)(4,[],Object(Ra.a)([],Na,(function(t,e,n,r){return Object(Ia.a)((function(r,i){var o=n(i);return r[o]=t(Object(Aa.a)(o,r)?r[o]:e,i),r}),{},r)})))((function(t,e){return t+1}),0),ja=n("./node_modules/ramda/es/internal/_arity.js");function Da(t,e){return function(){return e.call(this,t.apply(this,arguments))}}var La=n("./node_modules/ramda/es/internal/_curry3.js"),Ba=Object(La.a)(Ia.a),Fa=n("./node_modules/ramda/es/internal/_isArray.js");function Ua(t,e){return function(){var n=arguments.length;if(0===n)return e();var r=arguments[n-1];return Object(Fa.a)(r)||"function"!=typeof r[t]?e.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}var Ga=n("./node_modules/ramda/es/internal/_curry1.js"),Ha=Object(La.a)(Ua("slice",(function(t,e,n){return Array.prototype.slice.call(n,t,e)}))),Va=Object(Ga.a)(Ua("tail",Ha(1,1/0)));function Xa(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return Object(ja.a)(arguments[0].length,Ba(Da,arguments[0],Va(arguments)))}var Wa=n("./node_modules/ramda/es/internal/_isString.js"),Ya=Object(Ga.a)((function(t){return Object(Wa.a)(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()}));function za(){if(0===arguments.length)throw new Error("compose requires at least one argument");return Xa.apply(this,Ya(arguments))}function qa(t){return t}var Ka=Object(Ga.a)(qa),Za=Object(se.a)((function(t,e){for(var n,r,i=new le,o=[],a=0;a<e.length;)n=t(r=e[a]),i.add(n)&&o.push(r),a+=1;return o}))(Ka);function $a(t){return"[object Function]"===Object.prototype.toString.call(t)}var Ja=n("./node_modules/ramda/es/internal/_map.js");function Qa(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var ts=function(t){return(t<10?"0":"")+t},es="function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+ts(t.getUTCMonth()+1)+"-"+ts(t.getUTCDate())+"T"+ts(t.getUTCHours())+":"+ts(t.getUTCMinutes())+":"+ts(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},ns=n("./node_modules/ramda/es/keys.js"),rs=n("./node_modules/ramda/es/reject.js");var is=Object(Ga.a)((function(t){return function t(e,n){var r=function(r){var i=n.concat([e]);return Object(ue.a)(r,i)?"<Circular>":t(r,i)},i=function(t,e){return Object(Ja.a)((function(e){return Qa(e)+": "+r(t[e])}),e.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+Object(Ja.a)(r,e).join(", ")+"))";case"[object Array]":return"["+Object(Ja.a)(r,e).concat(i(e,Object(rs.a)((function(t){return/^\d+$/.test(t)}),Object(ns.a)(e)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof e?"new Boolean("+r(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?r(NaN):Qa(es(e)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof e?"new Number("+r(e.valueOf())+")":1/e==-1/0?"-0":e.toString(10);case"[object String]":return"object"==typeof e?"new String("+r(e.valueOf())+")":Qa(e);case"[object Undefined]":return"undefined";default:if("function"==typeof e.toString){var o=e.toString();if("[object Object]"!==o)return o}return"{"+i(e,Object(ns.a)(e)).join(", ")+"}"}}(t,[])})),os=Object(se.a)((function(t,e){if(Object(Fa.a)(t)){if(Object(Fa.a)(e))return t.concat(e);throw new TypeError(is(e)+" is not an array")}if(Object(Wa.a)(t)){if(Object(Wa.a)(e))return t+e;throw new TypeError(is(e)+" is not a string")}if(null!=t&&$a(t["fantasy-land/concat"]))return t["fantasy-land/concat"](e);if(null!=t&&$a(t.concat))return t.concat(e);throw new TypeError(is(t)+' does not have a method named "concat" or "fantasy-land/concat"')})),as=n("./src/core/utils/misc.js");function ss(t){return(ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function us(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cs(t,e,n){return e=hs(e),function(t,e){if(e&&("object"===ss(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],hs(t).constructor):e.apply(t,n))}function ls(t,e,n){return(ls="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hs(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function hs(t){return(hs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fs(t,e){return(fs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ps(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ds(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ps(Object(n),!0).forEach((function(e){ys(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ps(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ys(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ms=ds(ds({},Ur.events),{},{START:"start",STOP:"stop",FINISH:"finish"}),vs=function(t){function e(t){var n,r=t.reelMaster,i=t.source,o=t.config,a=t.mask,s=t.name;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=cs(this,e,[{reelMaster:r,source:i,config:o,mask:a,name:s}]))._activeReels=[],n._isOver=!1,n.name=s||"Anticipation",n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fs(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return ms}}],(r=[{key:"prepare",value:function(t){var e=this._reelMaster.parseBuffer(t).map((function(t){return t[1]})),n=this._getReelTileTotals(e),r=this._getReelsCriteria(n),i=this._getReelDurations(r);r.some(Boolean)&&(this._reset(),this._adjustReelDurations(i),this._attachReelListeners(r))}},{key:"_getReelTileTotals",value:function(t){var e=this._config.tileId,n=[0];return this._reelMaster.reels.forEach((function(r){var i=t[r.index],o=Ma(parseInt)(i)[e]||0;n.push(n[r.index]+o)})),n.slice(0,-1)}},{key:"_getReelsCriteria",value:function(t){var e=this;return t.map((function(t,n){var r=e._config.reels.includes(n),i=t>=e._config.minTiles&&t<=e._config.maxTiles;return r&&i}))}},{key:"_getReelDurations",value:function(t){var e=[],n=this._config,r=n.minDuration,i=n.maxDuration;return t.forEach((function(t,n){var o=e[n-1]||0,a=o;t&&(a=Object(as.g)(r,i)+o),e.push(a)})),e}},{key:"_adjustReelDurations",value:function(t){var e=this;t.forEach((function(t,n){if(!(t<=0)){var r=e._reelMaster.getReelConfig(n);e._reelMaster.preConfigStop({distance:r.distance+t},n)}}))}},{key:"_attachReelListeners",value:function(t){var e=this,n=this._config.activationEvent||vt.a.events.ANIMATION_SPIN_ENDING;this._reelMaster.onceAll(n,(function(n){var r=!t.some((function(t,e){return e>n.reel.index&&t})),i=t[n.reel.index],o=t[n.reel.index+1];if(r)return e._finishAnticipation(n.reel.index);i&&e._stopAnticipation(n.reel.index),o&&e._startAnticipation(n.reel.index+1)}),!0)}},{key:"_startAnticipation",value:function(t){var n=this,r=this._config.reels.filter((function(e){return e>=t&&!n._activeReels.includes(e)})),i=r.map((function(t){return{reel:t}}));this.activate(i),this.emit(e.events.START,{reelIndex:t}),this._activeReels=za(Za,os)(this._activeReels,r)}},{key:"_stopAnticipation",value:function(t){this._isOver||(this.deactivate({reel:t}),this.emit(e.events.STOP,{reelIndex:t}))}},{key:"_finishAnticipation",value:function(t){if(!this._isOver){this._isOver=!0;var n=this._config.reels.filter((function(e){return e>=t})).map((function(t){return{reel:t}}));this.deactivate(n),this.emit(e.events.FINISH,{reelIndex:t})}}},{key:"_reset",value:function(){ls(hs(e.prototype),"_reset",this).call(this),this._activeReels=[],this._isOver=!1}}])&&us(n.prototype,r),i&&us(n,i),e}(Ur);function _s(t){return(_s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bs(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gs(Object(n),!0).forEach((function(e){Es(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Es(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ts(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function ws(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Ts(o,r,i,a,s,"next",t)}function s(t){Ts(o,r,i,a,s,"throw",t)}a(void 0)}))}}function xs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ss(t,e,n){return e=Os(e),function(t,e){if(e&&("object"===_s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Os(t).constructor):e.apply(t,n))}function Os(t){return(Os=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ps(t,e){return(Ps=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rs=function(t){function e(t){var n,r=t.name,i=void 0===r?"PassingEffects":r,o=t.reelMaster,a=t.source,s=t.config,u=void 0===s?{}:s,c=t.mask,l=void 0===c?null:c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ss(this,e)).name=i,n.mask=l,n._config=u,n._reelMaster=o,n._sourceData=a,n.enabled=!1,n.observeReels(),n}var n,r,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ps(t,e)}(e,t),n=e,(r=[{key:"observeReels",value:function(){var t=this,e=this._config,n=e.tileEnterEvent,r=void 0===n?oe.events.RENDERER_TILE_ENTERING:n,i=e.reelEndEvent,o=void 0===i?oe.events.ANIMATION_SPIN_END:i,a=e.moveEvent,s=void 0===a?oe.events.RENDERER_MOVE:a;this._reelMaster.on(r,(function(e){var n=e.tile,r=e.tileIndex,i=e.index,o=e.label;return t._handleTileEnter(n,i,o,r)})),this._reelMaster.on(o,(function(e){var n=e.index;return t._handleReelEnd(n)})),this._reelMaster.on(s,(function(e){var n=e.index,r=e.delta;return t._updatePositions(n,r)}))}},{key:"enable",value:function(){this.enabled=!0}},{key:"disable",value:function(){this.enabled=!1}},{key:"_handleTileEnter",value:(s=ws(regeneratorRuntime.mark((function t(e,n,r,i){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._shouldTrigger({tileData:e,label:r,tileIndex:i})){t.next=2;break}return t.abrupt("return");case 2:this._createEffect({reel:n,index:i,id:e.id}).show(this._config.onShow);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r){return s.apply(this,arguments)})},{key:"_handleReelEnd",value:(a=ws(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.children.filter((function(t){return t.reel===e&&n._shouldRemove(t,!1)})).forEach((function(t){return n._removeEffect(t)}));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"_createEffect",value:function(t){var e=t.reel,n=t.index,r=this._sourceData,i=r.cover,o=void 0===i?E:i,a=r.animation,s=r.config,u=r.mask,c=this._reelMaster.getTileCoords({reel:e,index:n}),l=new o({name:"".concat(this.name,"Cover").concat(n,"x").concat(e),animation:a,config:s,mask:u,data:t});return l.reel=e,l.index=n,l.isRemoving=!1,l.position.set(c.x,c.y),this.addChild(l),l}},{key:"_removeEffect",value:(o=ws(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.isRemoving=!0,t.next=3,e.hide(bs({stopTickChildren:!0},this._config.onHide));case 3:this.removeChild(e);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"_updatePositions",value:function(t,e){var n=this;this.children.length&&this.children.filter((function(e){return e.reel===t})).forEach((function(t){n._updatePosition(t,e),n._shouldRemove(t,!0)&&n._removeEffect(t)}))}},{key:"_shouldTrigger",value:function(t){var e=t.tileData,n=t.label,r=t.tileIndex;return!(!this.enabled||e.id!==this._config.tileId||n===oe.labels.EASE_END||n===oe.labels.EASE_START||r>=Gn.a.reels.tiles.visible)}},{key:"_updatePosition",value:function(t,e){t.y-=e}},{key:"_shouldRemove",value:function(t,e){return!t.isRemoving&&(!e||t.y>this._reelMaster.getReelBounds(t.reel).height)}}])&&xs(n.prototype,r),i&&xs(n,i),e}(o.Container);function As(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Is=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=null!=e?e:0,this.y=null!=n?n:0}var e,n,r;return e=t,r=[{key:"fromPositions",value:function(e,n){var r=e.x,i=e.y;return new t(n.x-r,n.y-i)}}],(n=[{key:"length",get:function(){return Math.hypot(this.x,this.y)}},{key:"direction",get:function(){var t=180*Math.atan2(this.y,this.x)/Math.PI;return t<0&&(t=360+t),t}}])&&As(e.prototype,n),r&&As(e,r),t}(),Cs=n("./node_modules/pixi-spine/lib/all.es.js"),ks=n("./src/core/utils/SpineUpdater.js");function Ns(t){return(Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ms(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function js(t,e,n){return e=Ds(e),function(t,e){if(e&&("object"===Ns(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Ds(t).constructor):e.apply(t,n))}function Ds(t){return(Ds=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ls(t,e){return(Ls=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bs=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=js(this,e,[t]))._attachChildListeners(),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ls(t,e)}(e,t),n=e,(r=[{key:"isPlaying",get:function(){return!!this._anim.state.getCurrent(0)}},{key:"play",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._hasAnimation(this._anim,t))return console.warn("[".concat(this.name,"] Missing animation: ").concat(t)),Promise.resolve();var r=0,i=n.repeat,o=void 0===i?0:i;return new Promise((function(n){e._anim.parent||e.addChild(e._anim),e._anim.state.setAnimation(0,t,o),e._anim.state.addListener({complete:function(t){o>=0?++r!==o&&0!==o||(t.loop=!1,e._stopEntry(t),e._removeAnimListeners("complete"),n()):(e._removeAnimListeners("complete"),n())}})}))}},{key:"stop",value:function(){this._anim.state.tracks.forEach(this._stopEntry,this)}},{key:"finish",value:function(){var t=this;return new Promise((function(e){t._anim.state.addListener({complete:function(){t._anim.state.tracks.forEach((function(n,r,i){var o=r===i.length-1;t._stopEntry(n),o&&t._removeAnimListeners("complete"),e()}))}})}))}},{key:"skip",value:function(){var t=this.anim.state.tracks[0];t&&(t.trackTime=t.trackEnd)}},{key:"getCurrentAnimation",value:function(){return this.anim.state.tracks.length?this.anim.state.tracks[0].animation.name:null}},{key:"_stopEntry",value:function(t){t&&this._anim.state.clearTrack(t.trackIndex)}},{key:"_createAnim",value:function(t){try{this._anim=new Cs.d(t),this._anim.autoUpdate=!1,this._anim.update(0)}catch(t){console.error("[SpineCover](".concat(this.name,") Failed to create movieClip")),console.error(t)}}},{key:"_hasAnimation",value:function(t){var e=t.spineData.animations;if(!Array.isArray(e))return!1;for(var n=e.map((function(t){return t.name})),r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.every((function(t){return n.includes(t)}))}},{key:"_removeAnimListeners",value:function(t){this._anim.state.listeners=this._anim.state.listeners.filter((function(e){return!e[t]}))}},{key:"_attachChildListeners",value:function(){this.on("childAdded",this._onChildAdded),this.on("childRemoved",this._onChildRemoved)}},{key:"_onChildAdded",value:function(t){t instanceof Cs.d&&ks.a.add(t)}},{key:"_onChildRemoved",value:function(t){t instanceof Cs.d&&ks.a.remove(t)}}])&&Ms(n.prototype,r),i&&Ms(n,i),e}(E);function Fs(t){return(Fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Us(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hs(t,e,n){return e=Vs(e),function(t,e){if(e&&("object"===Fs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Vs(t).constructor):e.apply(t,n))}function Vs(t){return(Vs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xs(t,e){return(Xs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ws=function(t){function e(){return Us(this,e),Hs(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xs(t,e)}(e,t),n=e,(r=[{key:"activate",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.curvePoints,i=void 0===r?[]:r;return this._applyTrajectory(t,e),this._modifyPath(i),this._playAnim()}},{key:"_applyTrajectory",value:function(t,e){var n=Is.fromPositions(t,e);this.anim.x=t.x,this.anim.y=t.y,this.anim.angle=n.direction,this.anim.width=n.length}},{key:"_modifyPath",value:function(t){for(var e=0;e<t.length;e++){var n=t[e];this.anim.skeleton.findBone("".concat(this._config.boneName).concat(e+1)).y+=n.y}}},{key:"_playAnim",value:function(){return this.play(this._config.trailLabel)}}])&&Gs(n.prototype,r),i&&Gs(n,i),e}(Bs);function Ys(t){return(Ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var zs=["staggerDelay"],qs=["shouldCurve"];function Ks(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Zs(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function $s(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Zs(o,r,i,a,s,"next",t)}function s(t){Zs(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Js(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qs(t,e,n){return e=tu(e),function(t,e){if(e&&("object"===Ys(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],tu(t).constructor):e.apply(t,n))}function tu(t){return(tu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eu(t,e){return(eu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function nu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ru(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nu(Object(n),!0).forEach((function(e){iu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function iu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ou={shouldCurve:!0,shapeMatrices:[[[0,1,0,0],[0,0,1,0],[1,0,0,1],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[1,0,0,1],[0,0,1,0],[0,1,0,0]]],yGridSize:40,staggerDelay:.3,trail:{boneName:"trailControl",trailLabel:"show"}},au=ru(ru({},i.a),{},{TRAIL_START:"tc_trail_start",TRAIL_END:"tc_trail_end",SINGLE_START:"tc_single_start",SINGLE_END:"tc_single_end"}),su=function(t){function e(t){var n,i=t.reelMaster,o=t.animation,a=t.trailSource,s=void 0===a?Ws:a,u=t.config,c=t.mask;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Qs(this,e)).mask=c,n._reelMaster=i,n._animation=o,n._trailSource=s,n._config=Object(r.c)(ou,u),n}var n,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&eu(t,e)}(e,t),n=e,i=[{key:"onCreated",value:function(t,e,n,r){}},{key:"onRemoved",value:function(t,e,n,r){}},{key:"fromTo",value:(s=$s(regeneratorRuntime.mark((function t(n,r){var i,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=o.length>2&&void 0!==o[2]?o[2]:{},this.emit(e.events.TRAIL_START,{fromPos:n,toPos:r}),t.next=4,this._fromAllToAll(n,r,i);case 4:this.emit(e.events.TRAIL_END,{fromPos:n,toPos:r});case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})},{key:"_initTrail",value:function(t){var e=new this._trailSource({animation:this._animation,config:this._config.trail});return e.name="trail",this.addChild(e),e}},{key:"_fromAllToAll",value:function(t,e,n){var i=this,o=n.staggerDelay,a=void 0===o?this._config.staggerDelay:o,s=Ks(n,zs),u=[].concat(t),c=[].concat(e),l=Object(ae.a)(0,Math.max(u.length,c.length));return Promise.all(l.map(function(){var t=$s(regeneratorRuntime.mark((function t(e){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=u[Object(r.f)(e,u.length)],o=c[Object(r.f)(e,c.length)],!a||0===e){t.next=5;break}return t.next=5,Object(r.d)(e*a);case 5:return t.abrupt("return",i._fromTo(n,o,s));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}},{key:"_fromTo",value:(a=$s(regeneratorRuntime.mark((function t(n,r,i){var o,a,s,u,c,l,h,f,p,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=i.shouldCurve,a=void 0===o?this._config.shouldCurve:o,s=Ks(i,qs),u=ru({shouldCurve:a},s),c=this._initTrail(u),l=this._calculateCoordinates(n,r,u),h=l.fromPos,f=l.toPos,p=ru(ru({},n),h),d=ru(ru({},r),f),this.onCreated(c,p,d,u),this.emit(e.events.SINGLE_START,{fromData:p,toData:d}),t.next=10,c.activate(h,f,{curvePoints:a&&this._calculateCurvePoints(s)});case 10:this.emit(e.events.SINGLE_END,{fromData:p,toData:d}),this.onRemoved(c,p,d,u),c.destroy();case 13:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return a.apply(this,arguments)})},{key:"_calculateCoordinates",value:function(t,e,n){return{fromPos:this._parsePosition(t,n),toPos:this._parsePosition(e,n)}}},{key:"_parsePosition",value:function(t,e){var n=t;if(!Object(Yi.a)(t.reel)&&!Object(Yi.a)(t.index)&&(n=this._reelMaster.getTileCoords({reel:t.reel,index:t.index}),t.center)){var r=this._reelMaster.tileGuide.width/2,i=r,o=r;t.height&&(i=r*t.height),t.width&&(o=r*t.width),n.x+=o,n.y+=i}return n}},{key:"_calculateCurvePoints",value:function(t){for(var e=[],n=this._getShapeMatrix(t),r=parseInt(-n.length/2),i=0;i<n.length;i++){for(var o=0;o<n[i].length;o++)n[i][o]&&e.push({xOffset:o,y:r*this._config.yGridSize*-1});r++}return e.sort((function(t,e){return t.xOffset-e.xOffset}))}},{key:"_getShapeMatrix",value:function(t){return Object(r.m)(this._config.shapeMatrices)}}],o=[{key:"events",get:function(){return au}}],i&&Js(n.prototype,i),o&&Js(n,o),e}(o.Container),uu=n("./node_modules/ramda/es/mergeDeepRight.js");function cu(t){return(cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var lu=["animLabel"];function hu(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function fu(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function pu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function du(t,e,n){return e=mu(e),function(t,e){if(e&&("object"===cu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],mu(t).constructor):e.apply(t,n))}function yu(t,e,n){return(yu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mu(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function mu(t){return(mu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vu(t,e){return(vu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gu(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_u(Object(n),!0).forEach((function(e){bu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function bu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Eu=gu(gu({},E.animLabels),{},{NUM_HIDE:"numHide",COUNT:"count",COUNT_BIG:"countBig"}),Tu=gu({},E.events),wu=function(t){function e(t){var n,r=t.reelMaster,i=t.animation,o=t.config,a=t.mask,s=t.data,u=t.stopTickChildren,c=t.rtMode;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=du(this,e,[{name:"MegaWaysCounter",animation:i,config:o,mask:a,data:s,stopTickChildren:u,rtMode:c}])).num=null,n._reelMaster=r,n._numBounds=n._getNumBounds(),n._createNum(),n}var n,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vu(t,e)}(e,t),n=e,i=[{key:"observeReels",value:function(t,e){var n=this,r=this._config.activationEvent||vt.a.events.ANIMATION_SPIN_ENDING;this._reelMaster.onceReels(r,(function(r){var i=r.reel;return n.update(t[i.index],e)}),!0)}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[yu(mu(e.prototype),"show",this).call(this,n)];return this._config.counter.isInitiallyVisible&&r.push(this.update(t,n)),Promise.all(r)}},{key:"update",value:(a=regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},this.emit(Tu.UPDATE_START),r=n.playAnim,i=void 0===r||r,o=n.bangupOptions,a=[this._updateNum(e,o)],i&&a.push(this._playUpdateAnim(e,n)),t.next=7,Promise.all(a);case 7:this.emit(Tu.UPDATE_END);case 8:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=a.apply(t,e);function o(t){fu(i,n,r,o,s,"next",t)}function s(t){fu(i,n,r,o,s,"throw",t)}o(void 0)}))},function(t){return s.apply(this,arguments)})},{key:"reset",value:function(){this.num.currentCount=0}},{key:"_createNum",value:function(){var t=this._anim.numContainer.getLocalBounds().height,e=this._config.counter;this.num=new k({config:gu({fontSize:t},e)}),this.num.alpha=e.isInitiallyVisible?1:0,this._anim.numContainer.removeChildren(),this._anim.numContainer.addChild(this.num)}},{key:"_updateNum",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this._config,i=r.ignoreRatio,o=r.overscale,a=r.counter,s=a.bangup;return a.fitInBounds&&(s=gu(gu({},s),{},{onUpdate:function(){return e._fitNumInBounds(i,o)}})),this.num.alpha=0===t?a.isZeroVisible?1:0:1,this.num.update(t,Object(uu.a)(s,n))}},{key:"_playUpdateAnim",value:function(t,e){var n=this,r=this._config.counter.thresholds.find((function(e){var r=e.range;return n._isInRange(r[0],r[1],t)}))||{},i=r.animLabel,o=void 0===i?Eu.COUNT:i,a=hu(r,lu);return this.play(o,Object(uu.a)(a,e))}},{key:"_isInRange",value:function(t,e,n){return n>=t&&n<=e}},{key:"_fitNumInBounds",value:function(t,e){this.num.scale.set(1,1),Object(r.e)(this.num,this._numBounds,t,e)}},{key:"_getNumBounds",value:function(){return this._anim.numContainer.getBounds()}}],o=[{key:"events",get:function(){return Tu}}],i&&pu(n.prototype,i),o&&pu(n,o),e}(E);function xu(t){return(xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Su(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ou(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pu(t,e,n){return e=Ru(e),function(t,e){if(e&&("object"===xu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Ru(t).constructor):e.apply(t,n))}function Ru(t){return(Ru=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Au(t,e){return(Au=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Iu=function(t){function e(){return Su(this,e),Pu(this,e,arguments)}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Au(t,e)}(e,t),n=e,(i=[{key:"_createPoints",value:function(t){var e=this.markers,n=this._config.endToEnd,i=this._tileWidth,a=this._tileHeight,s=[];if(n&&s.push(new o.Point(e[0].x,e[0].y+t[0]*a)),t.forEach((function(t,n){var a=Object(r.g)(n,t).reel,u=e[a].x+i/2,c=e[a].y;s.push(new o.Point(u,c))})),n){var u=Gn.a.reels,c=u.count,l=u.tiles.visible;s.push(new o.Point(e[l*c-l].x+i,e[l*c-l].y+t[t.length-1]*a))}return s}}])&&Ou(n.prototype,i),a&&Ou(n,a),e}(vr);function Cu(t){return(Cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ku(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Nu(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ku(Object(n),!0).forEach((function(e){Mu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ku(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Mu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ju(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Du(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lu(t,e,n){return e=Fu(e),function(t,e){if(e&&("object"===Cu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Fu(t).constructor):e.apply(t,n))}function Bu(t,e,n){return(Bu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fu(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Fu(t){return(Fu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Uu(t,e){return(Uu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gu=function(t){function e(){return ju(this,e),Lu(this,e,arguments)}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Uu(t,e)}(e,t),n=e,(i=[{key:"_getMatchingData",value:function(t){return Bu(Fu(e.prototype),"_getMatchingData",this).call(this,t).map((function(t){return Nu(Nu({},t),Object(r.o)(t.reel))}))}}])&&Du(n.prototype,i),o&&Du(n,o),e}(da);function Hu(t){return(Hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Xu(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vu(Object(n),!0).forEach((function(e){Wu(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Wu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yu(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function zu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qu(t,e,n){return e=Ku(e),function(t,e){if(e&&("object"===Hu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Ku(t).constructor):e.apply(t,n))}function Ku(t){return(Ku=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zu(t,e){return(Zu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $u={CHANGE_SCENE:"change_scene",CHANGE_SCENE_END:"change_scene_end"},Ju=function(t){function e(t){var n,r=t.scenes,i=t.name,o=t.config,a=t.mask;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=qu(this,e)).name="SceneEffects".concat(i),n.mask=a,n.activeType=void 0,n._effects={},n._scenes=r,n._config=o,n.change(n._config.types[0]),n}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zu(t,e)}(e,t),n=e,r=[{key:"activeEffect",get:function(){var t=this;return this.children.find((function(e){return e.name===t.activeType}))}},{key:"change",value:(o=regeneratorRuntime.mark((function t(n){var r,i,o,a,s,u,c,l,h=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:{},this._config.types.includes(n)){t.next=3;break}return t.abrupt("return",console.warn("trying to show non-existent effect ".concat(n," ").concat(this.name)));case 3:if(n!==this.activeType){t.next=5;break}return t.abrupt("return");case 5:return i=Object(uu.a)(this._config,r),o=i.transition,a=o.fadeIn,s=o.fadeOut,u=i.stopTickChildren,Gn.a.static&&(a.duration=0,s.duration=0,u=!0),c=this.activeEffect,l=this._createEffect(n,u),this.emit(e.events.CHANGE_SCENE,{effect:this.name,type:n}),this.activeType=n,t.next=13,Promise.all([c&&w.b.to(c,Xu(Xu({},s),{},{alpha:0}))||Promise.resolve(),w.b.to(l,Xu(Xu({},a),{},{alpha:1}))]);case 13:c&&(c.stopTick(!0),this.removeChild(c)),this.emit(e.events.CHANGE_SCENE_END,{effect:this.name,type:n});case 15:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Yu(i,n,r,a,s,"next",t)}function s(t){Yu(i,n,r,a,s,"throw",t)}a(void 0)}))},function(t){return a.apply(this,arguments)})},{key:"_createEffect",value:function(t,e){var n;return this._effects[t]?n=this._effects[t]:((n=new this._scenes[t]).name=t,this._effects[t]=n),this.addChild(n),e?n.stopTick(e):n.startTick(!0),n.alpha=0,n}}],i=[{key:"events",get:function(){return $u}},{key:"types",get:function(){var t={};return this._config.types.forEach((function(e){return t[e.toUpperCase()]=e})),t}}],r&&zu(n.prototype,r),i&&zu(n,i),e}(o.Container);n("./node_modules/@games/pixi-animate/lib/index.js");function Qu(t){return(Qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tc(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function ec(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){tc(o,r,i,a,s,"next",t)}function s(t){tc(o,r,i,a,s,"throw",t)}a(void 0)}))}}function nc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rc(t,e,n){return e=ac(e),function(t,e){if(e&&("object"===Qu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ic(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],ac(t).constructor):e.apply(t,n))}function ic(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oc(t,e,n){return(oc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ac(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ac(t){return(ac=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sc(t,e){return(sc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function uc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function cc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?uc(Object(n),!0).forEach((function(e){lc(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function lc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var hc={INIT:"init",SHOW:"show",HIDE:"hide"},fc=cc(cc({},E.events),{},{STALLED:"stalled",PAUSED:"pause",RESUMED:"playing",WAITING:"waiting",ERROR:"error"}),pc=function(t){function e(t){var n,r=t.animation,i=t.source,o=t.config,a=t.mask;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=rc(this,e,[{animation:r,config:o,mask:a}]))._endPromise=null,n._inLoop=!1,n._videoSkipped=!1,n._videoSprite=n._createVideoSprite(i),n._videoSource=n._videoSprite.texture.baseTexture.resource.source,n._onVideoEventBound=n._onVideoEvent.bind(ic(n)),n._addVideoSprite(n._videoSprite),n}var n,r,i,a,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sc(t,e)}(e,t),n=e,r=[{key:"source",get:function(){return this._videoSource}},{key:"loopVideo",set:function(t){"boolean"==typeof t&&(this._videoSource.loop=t)}},{key:"play",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((n.force||!this._isPlaying)&&this._isValid(t)){var r=n.repeat;return(-1===r||r>0)&&(this._inLoop=!0),Promise.all([oc(ac(e.prototype),"play",this).call(this,t,n),t===e.animLabels.SHOW?this.playVideo(n):Promise.resolve()])}}},{key:"hide",value:function(){var t;this.clearSourceListeners();for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=oc(ac(e.prototype),"hide",this)).call.apply(t,[this].concat(r))}},{key:"playVideo",value:(u=ec(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.addSourceListeners(),this._setVideoOptions(e),n=this._videoSource.play(),t.prev=3,t.next=6,n;case 6:t.next=15;break;case 8:return t.prev=8,t.t0=t.catch(3),this.emit(fc.ERROR,{type:fc.ERROR}),this.clearSourceListeners(),this._anim.videoContainer.removeChildren(),console.warn("VideoCover failed to play.",t.t0),t.abrupt("return");case 15:return t.abrupt("return",this.finish());case 16:case"end":return t.stop()}}),t,this,[[3,8]])}))),function(t){return u.apply(this,arguments)})},{key:"stop",value:(s=ec(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oc(ac(e.prototype),"stop",this).call(this);case 2:this._videoSource.pause();case 3:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"finish",value:(a=ec(regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._inLoop){t.next=3;break}return t.next=3,oc(ac(e.prototype),"finish",this).call(this);case 3:if(!this._videoSource.ended){t.next=5;break}return t.abrupt("return");case 5:if(!this._endPromise){t.next=7;break}return t.abrupt("return",this._endPromise);case 7:return this._endPromise=new Promise((function(t){n._videoSource.addEventListener("ended",t,{once:!0})})),t.next=10,this._endPromise;case 10:this._reset();case 11:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"getCurrentAnimation",value:function(){return""}},{key:"skip",value:function(){this._videoSkipped||this._videoSource.paused||(this._videoSource.currentTime=this._videoSource.duration)}},{key:"addSourceListeners",value:function(){var t=this._videoSource;t.addEventListener("playing",this._onVideoEventBound),t.addEventListener("pause",this._onVideoEventBound),t.addEventListener("waiting",this._onVideoEventBound),t.addEventListener("stalled",this._onVideoEventBound),t.addEventListener("error",this._onVideoEventBound)}},{key:"clearSourceListeners",value:function(){var t=this._videoSource;t.removeEventListener("playing",this._onVideoEventBound),t.removeEventListener("pause",this._onVideoEventBound),t.removeEventListener("waiting",this._onVideoEventBound),t.removeEventListener("stalled",this._onVideoEventBound),t.removeEventListener("error",this._onVideoEventBound)}},{key:"_setVideoOptions",value:function(t){var e=this,n=t.reset;(void 0===n||n)&&(t.currentTime=0),Object.keys(t).forEach((function(n){void 0!==e._videoSource[n]&&(e._videoSource[n]=t[n])}))}},{key:"_createVideoSprite",value:function(t){var e=null;try{e=new o.Sprite(t)}catch(t){console.error("[VideoCover](".concat(this.name,") Failed to create video sprite")),console.error(t)}return e}},{key:"_addVideoSprite",value:function(t){var e=this._anim.videoContainer;if(e){var n=e.getLocalBounds(),r=n.width,i=n.height;t.width=r,t.height=i,this._anim.videoContainer.removeChildren(),this._anim.videoContainer.addChild(t)}else console.error("[VideoCover](".concat(this.name,") Missing 'videoContainer' in animation!"))}},{key:"_reset",value:function(){this._videoSkipped=!1,this._endPromise=null,this._inLoop=!1}},{key:"_onVideoEvent",value:function(t){this.emit(t.type,t)}}],i=[{key:"animLabels",get:function(){return hc}},{key:"events",get:function(){return fc}}],r&&nc(n.prototype,r),i&&nc(n,i),e}(E),dc=n("./node_modules/ramda/es/without.js");function yc(t){return(yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||_c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vc(t){return function(t){if(Array.isArray(t))return gc(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _c(t,e){if(t){if("string"==typeof t)return gc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gc(t,e):void 0}}function gc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bc(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Ec(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){bc(o,r,i,a,s,"next",t)}function s(t){bc(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Tc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wc(t,e,n){return e=Sc(e),function(t,e){if(e&&("object"===yc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Sc(t).constructor):e.apply(t,n))}function xc(t,e,n){return(xc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sc(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Sc(t){return(Sc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Oc(t,e){return(Oc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Rc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pc(Object(n),!0).forEach((function(e){Ac(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ac(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ic=Rc(Rc({},E.events),{},{HIDE:"hide",BUTTON_CLICKED:"button_clicked",SLIDE_SCREEN:"slide_screen"}),Cc=function(t){function e(t){var n,r=t.name,i=t.animation,o=t.config,a=t.mask,s=t.data,u=t.stopTickChildren,c=t.onLoadStart,l=t.onLoadEnd,h=t.settings;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=wc(this,e,[{name:r,animation:i,config:o,mask:a,data:s,stopTickChildren:u}])).isLoading=!1,n.settings=h,n._tween=null,n._container=null,n._deactivating=!1,n._hasLoaded=!1,n._isInitialPageLoaded=!1,n._onLoadStart=c,n._onLoadEnd=l,n._parsers=n._getParsers(),n._createdScreens=[],n._selectedStake=null,n._initScreens(),n}var n,i,s,u,c,l,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Oc(t,e)}(e,t),n=e,i=[{key:"currentScreenIndex",get:function(){return this._current}},{key:"screens",get:function(){return this._config.screens+this.optionalScreenIndices.length}},{key:"optionalScreenIndices",get:function(){var t=this._config.optional;return(void 0===t?[]:t).filter((function(t){var e=t.condition;return Gn.a[e]})).map((function(t){return t.index-1}))}},{key:"show",value:function(t){this._loadInitialPage(),this._setSymbolWins(),this.slideTo(this._config.initialScreen||0,0),xc(Sc(e.prototype),"show",this).call(this),t&&(this.anim.promises.gotoAndStop("hide"),this._isShown=!0,this._isShowing=!1),this._deactivating=!1,this.visible=!0,Me.a.set(Me.a.TYPES.PAYTABLE,!0),Me.a.set(Me.a.TYPES.IS_WHOLE_GAME_STAGE_USED,!0),Me.a.set(Me.a.TYPES.GAME_ENABLED,!1)}},{key:"next",value:function(){return this.slideTo(this._current+1)}},{key:"previous",value:function(){return this.slideTo(this._current-1)}},{key:"slideTo",value:(h=Ec(regeneratorRuntime.mark((function t(n,r){var i,o,a,s,u,c,l,h,f,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===(n=Math.max(n,0))){t.next=4;break}return t.next=4,this._loadPages().catch((function(t){n=0,console.warn("Paytable page failed to change!"),console.warn(t)}));case 4:if(!(null!==this._tween&&this._tween.progress()<1)){t.next=6;break}return t.abrupt("return");case 6:if(i=this._config,o=i.slideDuration,a=i.ease,s=i.arrangement,u=this._container.children.length,c=void 0!==r?r:o,l=n%u,h=this._container.children[l],f="horizontal"===s?-h.x:0,p="vertical"===s?-h.y:0,l!==this._current&&c>0&&this.emit(e.events.SLIDE_SCREEN,{from:this._current,to:l}),this._updateTitle(l,0===c),this._current=l,!(c>0)){t.next=23;break}return this._tween=w.b.to(this._container,{duration:c,x:f,y:p,ease:a}),t.next=20,this._tween.then();case 20:this._tween=null,t.next=24;break;case 23:this._container.position.set(f,p);case 24:Y.a.emit(Y.a.events.PAYTABLE_SCREEN_CHANGE,{value:n});case 25:case"end":return t.stop()}}),t,this)}))),function(t,e){return h.apply(this,arguments)})},{key:"hide",value:(l=Ec(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._deactivating){t.next=2;break}return t.abrupt("return");case 2:if(this._deactivating=!0,Me.a.set(Me.a.TYPES.START_SCREEN,!1),Me.a.set(Me.a.TYPES.PAYTABLE,!1),Me.a.set(Me.a.TYPES.IS_WHOLE_GAME_STAGE_USED,!1),Me.a.set(Me.a.TYPES.GAME_ENABLED,!0),this.emit(e.events.HIDE),n){t.next=11;break}return t.next=11,xc(Sc(e.prototype),"hide",this).call(this);case 11:this._deactivating&&(this.visible=!1);case 12:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"initDrag",value:function(){this._drag=new Sn(this._container.mask,{onUpdate:this._dragUpdate.bind(this),onComplete:this._dragEnd.bind(this)}),this._drag.enable()}},{key:"setStake",value:function(t){this._selectedStake=t}},{key:"slideToPays",value:(c=Ec(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._loadPages();case 2:return t.abrupt("return",this.slideTo(this.paysScreenIndex,e));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"paysScreenIndex",get:function(){return this._container.children.findIndex((function(t){return t.children.find((function(t){return t.name&&t.name.startsWith("paysTile")}))}))}},{key:"_loadPages",value:(u=Ec(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._hasLoaded){t.next=2;break}return t.abrupt("return");case 2:if(!this.isLoading){t.next=4;break}return t.abrupt("return",Promise.reject());case 4:return this.isLoading=!0,this._onLoadStart(),n=!1,t.next=9,qt.b.loadFeature("paytable",{nonrecoverable:!1}).then((function(){return n=!0})).catch((function(){return console.warn("Paytable assets failed to load!")}));case 9:if(this.isLoading=!1,this._onLoadEnd(),n){t.next=13;break}return t.abrupt("return",Promise.reject());case 13:r=this._createRemainingScreens(),(e=this._container).addChild.apply(e,vc(r)),this._setSymbolWins(),this._config.drawLines&&this._drawLines(),this._hasLoaded=!0;case 18:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"_loadInitialPage",value:function(){if(!this._isInitialPageLoaded){this._isInitialPageLoaded=!0;var t=this._createScreen(this._config.initialScreen,this._config);this._container.removeChildren(),this._container.addChild(t)}}},{key:"_dragUpdate",value:function(t){var e=t.delta,n=this._container.children.length,r=this._config.maxDrag,i=this._container.children[0],o=this._container.children[n-1],a=this._container.width/n,s=this._container.height/n,u={x:-o.x-a*r,y:-o.y-s*r},c={x:i.x+a*r,y:o.y+s*r};"horizontal"===this._config.arrangement?this._container.x=Math.max(Math.min(this._container.x+e.x,c.x),u.x):"vertical"===this._config.arrangement&&(this._container.y=Math.max(Math.min(this._container.y+e.y,c.y),u.y))}},{key:"_dragEnd",value:function(t){var e=t.direction,n="horizontal"===this._config.arrangement?"x":"y",r=e[n],i=-this._container[n]-r*this._config.transitionLeverage,o=this._container.children.reduce((function(t,e){return Math.abs(e[n]-i)<Math.abs(t[n]-i)?e:t}),this._container.children[0]),a=this._hasLoaded?this._container.children.indexOf(o):-r;this.slideTo(a)}},{key:"_updateTitle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t!==this._current){var n=this._anim.title["title".concat(this._current+1)],r=this._anim.title["title".concat(t+1)];n&&(e?n.promises.gotoAndStop("init"):n.promises.gotoAndPlay("hide")),r&&(e?r.promises.gotoAndStop("hide"):r.promises.gotoAndPlay("show"))}}},{key:"_createRemainingScreens",value:function(){var t=this._config,e=t.arrangement,n=t.bounds,r=this._getScreensToLoad();return this._createScreens({screens:r,arrangement:e,bounds:n})}},{key:"_createScreens",value:function(t){var e=this,n=t.screens,r=t.arrangement,i=t.bounds;return n.map((function(t){return e._createScreen(t,{arrangement:r,bounds:i})}))}},{key:"_createScreen",value:function(t,e){var n=e.arrangement,r=e.bounds,i="PaytableScreen".concat(t+1),o="paytableScreen".concat(t+1),a=new Qn.a[i][o];return a.name=o,a.x="horizontal"===n?r.width*t:0,a.y="vertical"===n?r.height*t:0,this._createdScreens.push(t),a}},{key:"_getScreensToLoad",value:function(){var t=this._config.screens,e=Object(r.k)(t).concat(this.optionalScreenIndices);return Object(dc.a)(this._createdScreens,e)}},{key:"_drawLines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._container.children,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.settings,n=e.lines,i=e.cols,s=e.rows,u=t.reduce((function(t,e){return e.linesContainer?t.concat(e.linesContainer.children):t}),[]),c=Object(a.f)(new Qn.a.Paytable.paytableLineActive),l=Object(a.f)(new Qn.a.Paytable.paytableLineInactive),h=n.map((function(t){return Object(r.k)(s,(function(e){return Object(r.k)(i,(function(n){return t[n]===e?1:0}))}))}));u.forEach((function(t,e){if(h[e]){t.lineMatrix=h[e];var n=h[e],r=t.width/i,a=t.height/s,u=n.reduce((function(e,n,i){var s=n.map((function(e,n){var s=1===e?c:l,u=new o.Sprite(s);return u.y=a*i+1,u.x=r*n+1,t.lineMatrix[i][n]=e,u}));return e.concat.apply(e,vc(s))}),[]);t.removeChildren(),t.addChild.apply(t,vc(u)),t.cacheAsBitmap=!0}}))}},{key:"_setSymbolWins",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._container.children,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.settings,r=n.tiles,i=this._getPayingTexts(r),o=e.reduce((function(t,e){var n=e.children.filter((function(t){return t.name&&t.name.startsWith("paysTile")}));return t.concat(n)}),[]),a=o.map((function(e){var n=i[e.name];return t._getFontSize(n,e)})),s=Math.min.apply(Math,vc(a));o.forEach((function(e){var n=i[e.name];t._setFieldPayoutText(n,e,s)}))}},{key:"_getFontSize",value:function(t,e){e.originalStyle||(e.originalStyle=e.style.clone()),e.originalPosition||(e.originalPosition=e.position.clone());for(var n=e.originalStyle.clone(),r=e.name.split("paysTile")[1].replace(/(left|right)/i,""),i=Object.values(this.settings.tiles.find((function(t){return t.id==r})).pays).filter((function(t){return t>0})).length,a=o.TextMetrics.measureText(t,n);a.lines.length>i+1;)a.style.fontSize--,a=o.TextMetrics.measureText(t,a.style);return a.style.fontSize}},{key:"_setFieldPayoutText",value:function(t,e,n){var r=e.originalStyle.clone(),i=o.TextMetrics.measureText(t,r);i.style.fontSize=n,e.style=i.style,e.text=t||"{{MISSING_DATA}}",e.position=e.originalPosition.clone(),e.x+=e.style.wordWrapWidth/2-e.width/2}},{key:"_getPayingTexts",value:function(t){var e=this;return t.reduce((function(t,n){var r=n.id,i=n.pays;return t["paysTile".concat(r)]=e._parsers[e._config.type](i),t}),{})}},{key:"_parseClusterWin",value:function(t){var e=this;return Object.entries(t).reduceRight((function(t,n,r,i){var o=mc(n,2),a=o[0],s=o[1];if(0===s)return t;var u=parseInt(a),c=Gn.a.reels.count*Gn.a.reels.tiles.visible===u,l=mc(i[r+1]||i[r],1)[0],h=r===i.length-1,f=!c&&h||parseInt(l)-u>1?e._applyTemplate(u):u,p=e._config.paytableDynamicPayouts&&e._selectedStake?x.a.format(e._selectedStake*s):parseFloat(s);return t+"".concat(f," = ").concat(p,"\n")}),"")}},{key:"_parseWin",value:function(t){var e=this;return t.reduceRight((function(t,n,r){var i=e._config.paytableDynamicPayouts&&e._selectedStake?x.a.format(e._selectedStake*n):parseFloat(n);return t+(parseFloat(n)>0?"".concat(e._applyTemplate(r+1)," = ").concat(i,"\n"):"")}),"")}},{key:"_getParsers",value:function(){return{lines:this._parseWin.bind(this),cluster:this._parseClusterWin.bind(this)}}},{key:"_applyTemplate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._config.type;return this._config.templates[e].replace("{{val}}",t)}},{key:"_initScreens",value:function(){var t=this._anim,e=t.screens;t.title.children.forEach((function(t){return t.promises.gotoAndPlay("init")})),this._container=e,this._config.bounds=this._container.getBounds(),this._container.mask.name="paytableMask"}}],s=[{key:"events",get:function(){return Ic}}],i&&Tc(n.prototype,i),s&&Tc(n,s),e}(E);function kc(t){return(kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nc(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Mc(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Nc(o,r,i,a,s,"next",t)}function s(t){Nc(o,r,i,a,s,"throw",t)}a(void 0)}))}}function jc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dc(t,e,n){return e=Bc(e),function(t,e){if(e&&("object"===kc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Bc(t).constructor):e.apply(t,n))}function Lc(t,e,n){return(Lc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bc(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Bc(t){return(Bc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fc(t,e){return(Fc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Uc=function(t){function e(t){var n,r=t.name,i=t.animation,o=t.config,a=t.mask,s=t.data,u=t.stopTickChildren,c=t.lang;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Dc(this,e,[{name:r,animation:i,config:Object(as.b)(o.default,o[c]),mask:a,data:s,stopTickChildren:u}]))._shown=[],n._previous=null,n._current=null,Gn.a.static&&(n.setChance(100),n._config.weights=[]),n}var n,r,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fc(t,e)}(e,t),n=e,(r=[{key:"config",get:function(){return this._config}},{key:"current",get:function(){return this._current}},{key:"display",value:(s=Mc(regeneratorRuntime.mark((function t(e){var n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:this._config.showTime,!this._isShown){t.next=3;break}return t.abrupt("return");case 3:return this._setActive(e),t.next=6,this.show();case 6:return t.next=8,Object(as.c)(n);case 8:if(e===this.current){t.next=10;break}return t.abrupt("return");case 10:if(!this._config.waitHideAnimation){t.next=15;break}return t.next=13,this.hide();case 13:t.next=16;break;case 15:this.hide();case 16:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"hide",value:(a=Mc(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._isShown||this._isShowing){t.next=2;break}return t.abrupt("return");case 2:return this._previous=this._current,this._current=null,t.next=6,Lc(Bc(e.prototype),"hide",this).call(this);case 6:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"displayRandom",value:(o=Mc(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._isShown){t.next=2;break}return t.abrupt("return");case 2:return n=this._generatePool(),r=Object(as.k)(n),this._updateShown(r),t.next=7,this.display(r,e);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"setChance",value:function(t){(!Number.isInteger(t)||t<0||t>100)&&(t=this._config.showChance),this._config.showChance=t}},{key:"getChance",value:function(){return!this._isShowing&&!this._isShown&&Object(as.a)(this._config.showChance)}},{key:"_updateShown",value:function(t){this._shown.push(t),this._shown.length===this._config.count&&(this._shown=[])}},{key:"_setActive",value:function(t){var e=this;this._current=t,this.anim.container.children.forEach((function(n){n.visible=n.name==="".concat(e._config.prefix).concat(t)}))}},{key:"_generatePool",value:function(){var t=this;if(1===this._config.count)return[1];var e=Object(ae.a)(1,this._config.count+1).filter((function(e){return!t._shown.includes(e)&&e!==t._previous})).map((function(e){var n=t._config.weights[e]||1;return Object(tr.a)(Object(er.a)(e),n)}));return Object(bt.a)(e)}}])&&jc(n.prototype,r),i&&jc(n,i),e}(E);function Gc(t){return(Gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vc(t,e,n){return e=Wc(e),function(t,e){if(e&&("object"===Gc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Wc(t).constructor):e.apply(t,n))}function Xc(t,e,n){return(Xc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wc(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Wc(t){return(Wc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yc(t,e){return(Yc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zc(Object(n),!0).forEach((function(e){Kc(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Kc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Zc=qc(qc({},E.events),{},{LOAD_COMPLETE:"load_complete",BUTTON_CLICKED:"button_clicked"}),$c=function(t){function e(t){var n=t.name,r=void 0===n?"LoadingScreen":n,i=t.animation,o=t.config,a=t.mask,s=t.data,u=t.stopTickChildren;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Vc(this,e,[{name:r,animation:i,config:o,mask:a,data:s,stopTickChildren:u}])}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yc(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return Zc}}],(r=[{key:"_init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.stopTickChildren;Xc(Wc(e.prototype),"_init",this).call(this,{stopTickChildren:n}),this.addChild(this._anim)}},{key:"onComplete",value:function(){return this.emit(e.events.LOAD_COMPLETE),Gn.a.autoStart?Promise.resolve():this.show()}}])&&Hc(n.prototype,r),i&&Hc(n,i),e}(E);function Jc(t){return(Jc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qc(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function tl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function el(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tl(Object(n),!0).forEach((function(e){nl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function nl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function il(t,e,n){return e=ol(e),function(t,e){if(e&&("object"===Jc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],ol(t).constructor):e.apply(t,n))}function ol(t){return(ol=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function al(t,e){return(al=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var sl=function(t){function e(t){var n,r=t.name,i=t.animation,o=t.config,a=t.mask,s=t.data,u=t.stopTickChildren,c=t.counterSource;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=il(this,e,[{name:r,animation:i,config:o,mask:a,data:s,stopTickChildren:u}]))._counterMc=n._anim.counter,n._counter=n._createCounter(c),n._counter.prepareText(),n}var n,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&al(t,e)}(e,t),n=e,(i=[{key:"activate",value:function(t){var e=this,n=t.value,i=t.stake,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._addCounter(),Promise.all([this.show(),this._counter.update(n,el(el({},Object(r.c)({duration:this._calcBangupDuration({value:n,stake:i})},o)),{},{onUpdate:function(t){return e._onSumUpdate(t,e._config.counter)}}))])}},{key:"deactivate",value:(a=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.hide();case 2:this._counter.reset(),this._counterMc.numContainer.inner.removeChild(this._counter);case 4:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=a.apply(t,e);function o(t){Qc(i,n,r,o,s,"next",t)}function s(t){Qc(i,n,r,o,s,"throw",t)}o(void 0)}))},function(){return s.apply(this,arguments)})},{key:"skip",value:function(){this._counter.skip()}},{key:"_calcBangupDuration",value:function(t){var e=t.value,n=t.stake;return Math.abs(e)/(n*this._config.counter.bangup.speed)}},{key:"_createCounter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k;return new t({config:el({fontSize:this._counterMc.numContainer.inner.getLocalBounds().height},this._config.counter)})}},{key:"_addCounter",value:function(){this._counterMc.numContainer.inner.removeChildren(),this._counterMc.numContainer.inner.addChild(this._counter)}},{key:"_onSumUpdate",value:function(t,e){var n=e.fitBounds,i=e.ignoreRatio,o=e.overscale;Object(r.e)(this._counter,{width:n.width||Gn.a.renderer.width,height:n.height||Gn.a.renderer.height},i,o)}}])&&rl(n.prototype,i),o&&rl(n,o),e}(E);function ul(t){return(ul="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ll(t,e,n){return e=hl(e),function(t,e){if(e&&("object"===ul(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],hl(t).constructor):e.apply(t,n))}function hl(t){return(hl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fl(t,e){return(fl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pl=function(t){function e(t){var n,r=t.animation,i=t.config,o=t.mask,a=t.data;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ll(this,e,[{animation:r,config:i,mask:o,data:a}]))._tile=null,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fl(t,e)}(e,t),n=e,(r=[{key:"setTile",value:function(t){var e=t.tileId,n=t.type,r=void 0===n?"normal":n;this._tile||this._initTile(),this._tile.to({id:e},r)}},{key:"_initTile",value:function(){var t=this._anim.tileContainer;if(!t)return console.error("Missing tileContainer inside Cascade Tile!");this._tile=this._createInnerTile(),t.removeChildren(),t.addChild(this._tile)}},{key:"_createInnerTile",value:function(){return new kt.a}}])&&cl(n.prototype,r),i&&cl(n,i),e}(E);function dl(t){return(dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var yl=["name","reelMaster","source","config","mask"],ml=["onSingleDrop","dropLabel"];function vl(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function _l(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){vl(o,r,i,a,s,"next",t)}function s(t){vl(o,r,i,a,s,"throw",t)}a(void 0)}))}}function gl(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function El(t,e,n){return e=wl(e),function(t,e){if(e&&("object"===dl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],wl(t).constructor):e.apply(t,n))}function Tl(t,e,n){return(Tl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wl(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function wl(t){return(wl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xl(t,e){return(xl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Sl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ol(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Sl(Object(n),!0).forEach((function(e){Pl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Pl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Rl=Ol(Ol({},Ur.events),{},{DESTROY_START:"c_destroy_start",DESTROY_END:"c_destroy_end",MOVE_START:"c_move_start",SINGLE_MOVE_START:"c_single_move_start",SINGLE_MOVE_ENDING:"c_single_move_ending",SINGLE_MOVE_END:"c_single_move_end",SINGLE_MOVE_UPDATE:"c_single_move_update",MOVE_END:"c_move_end",DROP_START:"c_drop_start",DROP_END:"c_drop_end",END:"c_feature_end"}),Al=function(t){function e(t){var n,r=t.name,i=t.reelMaster,o=t.source,a=t.config,s=t.mask,u=gl(t,yl);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=El(this,e,[Ol({name:r,reelMaster:i,source:Ol({cover:pl},o),config:a,mask:s},u)])).isActive=!1,n._emptyScreen=[],n._timelines=[],n._inDestroy=!1,n._inMove=!1,n._inDrop=!1,n._isSkipped=!1,n._onSingleMove=function(){},n}var n,i,o,a,s,u,c,l,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xl(t,e)}(e,t),n=e,i=[{key:"screenData",get:function(){return this._emptyScreen},set:function(t){this._emptyScreen=this._emptyScreenPositions(t)}},{key:"activate",value:(h=_l(regeneratorRuntime.mark((function t(n){var r,i,o=this,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},i=n.map((function(t){if(t.tileId)return t;var e=o._reelMaster.getResultData(t.reel)[t.index].id;return Ol(Ol({},t),{},{tileId:e})})),t.abrupt("return",Tl(wl(e.prototype),"activate",this).call(this,i,r));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"destroyTiles",value:(l=_l(regeneratorRuntime.mark((function t(n){var i,o,a,s,u,c,l,h=this,f=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=f.length>1&&void 0!==f[1]?f[1]:{},this.isActive=!0,this._inDestroy=!0,o=this._config.destroy,a=o.delays,s=a.beforeSetStart,u=a.betweenBlocks,c=a.afterEnd,!s){t.next=8;break}return t.next=8,Object(r.d)(s);case 8:if(this.emit(e.events.DESTROY_START),!u){t.next=15;break}return l=[].concat(n).map(function(){var t=_l(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(r.d)(u*n);case 2:return t.next=4,h.play("destroy",e,i);case 4:h.remove(e,i);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),t.next=13,Promise.all(l);case 13:t.next=18;break;case 15:return t.next=17,this.play("destroy",n,i);case 17:this.remove(n,i);case 18:if(this.emit(e.events.DESTROY_END),!c){t.next=22;break}return t.next=22,Object(r.d)(c);case 22:this._inDestroy=!1;case 23:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"move",value:(c=_l(regeneratorRuntime.mark((function t(n){var i,o,a,s,u,c,l,h,f,p=this,d=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=d.length>1&&void 0!==d[1]?d[1]:{},o=Ol(Ol({},this._config.move),i),a=o.onSingleMove,s=void 0===a?function(){}:a,u=o.moveLabel,c=void 0===u?"init":u,this._inMove=!0,this._onSingleMove=s,l=this.parsePositions(Object(Ro.a)(n)),h=o.delays.afterEnd,t.next=9,this.activate(l,{animLabel:c});case 9:return f=this._groupByReelIndex(l),t.next=12,Promise.all(f.map((function(t,e){return p._moveGroup(t,e,o)})));case 12:if(this.emit(e.events.MOVE_END),this._timelines=[],this._isSkipped=!1,!h){t.next=18;break}return t.next=18,Object(r.d)(h);case 18:this._inMove=!1,this.emit(e.events.END);case 20:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"drop",value:(u=_l(regeneratorRuntime.mark((function t(n){var r,i,o,a,s,u=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},this._inDrop=!0,i=this._positionsFromBufferData(n),o=r.onSingleDrop,a=r.dropLabel,s=gl(r,ml),this.emit(e.events.DROP_START),t.next=7,this.move(i,Ol(Ol({},this._config.drop),{},{onSingleMove:o,moveLabel:a},s));case 7:this.emit(e.events.DROP_END),this._inDrop=!1,this._emptyScreen=[],this._reset();case 11:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"onCreated",value:function(t,n,r){Tl(wl(e.prototype),"onCreated",this).call(this,t,n,r);var i=n.reel,o=n.index;t.setTile(n),void 0!==n.x&&(t.position.x=n.x),void 0!==n.y&&(t.position.y=n.y),this._reelMaster.replaceTile(o,0,i)}},{key:"onDestroyed",value:function(t,n){Tl(wl(e.prototype),"onDestroyed",this).call(this,t,n);var r=this._config.destroy.replaceTile;this._inDestroy&&!r||this._reelMaster.replaceTile(t.index,t.data.tileId,t.reel,!0)}},{key:"onMoveEnd",value:function(t,e){}},{key:"onMoveEnding",value:function(t,e){}},{key:"parsePositions",value:function(t){return this._sort(t)}},{key:"skip",value:function(){var t=this;this._isSkipped||this._config.skipTimeScale<=0||(this._isSkipped=!0,this._timelines.forEach((function(e){return e.timeScale(t._config.skipTimeScale)})))}},{key:"_moveGroup",value:(s=_l(regeneratorRuntime.mark((function t(e,n,r){var i,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.sort((function(t,e){return e.index-t.index})),t.next=3,Promise.all(i.map((function(t,e){return o._moveTo(t,e,n,r)})));case 3:case"end":return t.stop()}}),t)}))),function(t,e,n){return s.apply(this,arguments)})},{key:"_moveTo",value:(a=_l(regeneratorRuntime.mark((function t(n,r,i,o){var a,s,u,c,l,h,f,p,d,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.removeAtEnd,s=void 0===a||a,u=this._getCoverOnPos(n),c=this._inDrop?"drop":"move",l=n.to,h=n.tileId,f=this._parsePositionData(n),p=f.start,d=f.end,u.position.set(p.x,p.y),y=this._getMoveTimeline({position:n,tileIndex:r,groupIndex:i,options:o,cover:u,end:d,id:h}),this._isSkipped&&this._config.skipTimeScale>0&&y.timeScale(this._config.skipTimeScale),this._timelines.push(y),t.next=11,y;case 11:return u.reel=l.reel,u.index=l.index,this.emit(e.events.SINGLE_MOVE_END,{position:n,tileIndex:r,id:h,type:c}),t.next=16,this.onMoveEnd(u,o);case 16:s&&this._destroyCover(u,o);case 17:case"end":return t.stop()}}),t,this)}))),function(t,e,n,r){return a.apply(this,arguments)})},{key:"_getMoveTimeline",value:function(t){var n=this,r=t.cover,i=t.position,o=t.tileIndex,a=t.groupIndex,s=t.options,u=t.end,c=t.id,l=i.to,h=s.speed,f=s.ease,p=s.easeEnd,d=void 0===p?{offset:0,speed:0,easings:[]}:p,y=s.delays,m=y.beforeSetStart,v=y.betweenBlockSets,_=y.betweenBlocks,g=this._inDrop?"drop":"move",b=(u.y-r.position.y)/h,E=v*a+m,T=w.b.timeline({onUpdate:function(){return n._onTweenUpdate(r,i,c,g)},onStart:function(){n.emit(e.events.SINGLE_MOVE_START,{cover:r,tileIndex:o,position:i,id:c,type:g}),n._onSingleMove(i,l,u,b,f)},delay:E}).to(r.position,{x:u.x,y:u.y,duration:b,ease:f,delay:_*o,onComplete:function(){n.emit(e.events.SINGLE_MOVE_ENDING,{cover:r,tileIndex:o,position:i,id:c,type:g}),n.onMoveEnding(r,s)}});return d.offset&&0!==d.offset&&this._setEaseEndOffsets(T,r,d),T}},{key:"_setEaseEndOffsets",value:function(t,e,n){var r=n.offset,i=n.speed,o=n.easings;if(0===i||2!==o.length)return console.error("Invalid ease end cascade configuration offset: ".concat(r,", speed: ").concat(i,", easings: ").concat(o));var a=Math.abs(r)/i/o.length;t.to(e.position,{y:"+=".concat(r),duration:a,ease:o[0]}).to(e.position,{y:"-=".concat(r),duration:a,ease:o[1]})}},{key:"_onTweenUpdate",value:function(t,n,r,i){this.emit(e.events.SINGLE_MOVE_UPDATE,{cover:t,position:n,tileId:r,type:i})}},{key:"_positionsFromBufferData",value:function(t){var e=this,n=t.map((function(t){return t[1]})),r=this._calcDropOffset();return this._emptyScreen.map((function(t){var i=t.reel,o=t.index,a=e._reelMaster.getTilePosition({reel:i,index:o}),s=a.x,u=a.y;return{x:s,y:u-r,reel:i,index:o,to:{x:s,y:u,reel:i,index:o},tileId:n[i][o]}}))}},{key:"_parsePositionData",value:function(t){var e=t.to;return{start:void 0!==t.x&&void 0!==t.y?t:this._reelMaster.getTilePosition(t),end:void 0!==e.x&&void 0!==e.y?e:this._reelMaster.getTilePosition(e)}}},{key:"_emptyScreenPositions",value:function(t){for(var e=[],n=0;n<t.length;n++)for(var r=0;r<t[n].length;r++)null===t[n][r]&&e.push({reel:n,index:r});return e}},{key:"_calcDropOffset",value:function(){var t=this,e=this._config.drop.addedDropOffset,n=void 0===e?0:e;return this._emptyScreen.reduce((function(e,n){var r=t._getTileGuide(n).height*(n.index+1);return Math.max(r,e)}),0)+n}},{key:"_getTileGuide",value:function(t){return this._reelMaster.tileGuide}},{key:"_groupByReelIndex",value:function(t){var e=this._reelMaster.reels,n=[];return e.forEach((function(e){var r=t.filter((function(t){return t.reel===e.index}));r.length>0&&n.push(r)})),n}},{key:"_sort",value:function(t){return t.sort((function(t,e){return t.reel===e.reel?t.index-e.index:t.reel-e.reel}))}}],o=[{key:"events",get:function(){return Rl}}],i&&bl(n.prototype,i),o&&bl(n,o),e}(Ur),Il=n("./node_modules/ramda/es/internal/_includesWith.js"),Cl=Object(La.a)((function(t,e,n){for(var r=[],i=0,o=e.length;i<o;)Object(Il.a)(t,e[i],n)||Object(Il.a)(t,e[i],r)||r.push(e[i]),i+=1;return r}));function kl(t){return(kl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nl(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Ml(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Nl(o,r,i,a,s,"next",t)}function s(t){Nl(o,r,i,a,s,"throw",t)}a(void 0)}))}}function jl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dl(t,e,n){return e=Bl(e),function(t,e){if(e&&("object"===kl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Bl(t).constructor):e.apply(t,n))}function Ll(t,e,n){return(Ll="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bl(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Bl(t){return(Bl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fl(t,e){return(Fl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ul(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Gl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ul(Object(n),!0).forEach((function(e){Hl(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ul(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Hl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Vl=Gl(Gl({},Ur.events),{},{LOCK_START:"lock_start",UNLOCK_START:"unlock_start"}),Xl=function(t){function e(t){var n,r=t.name,i=t.reelMaster,o=t.source,a=t.config,s=t.mask;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Dl(this,e,[{name:r,reelMaster:i,source:o,config:a,mask:s}]))._prevData=Jo()([]),n}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fl(t,e)}(e,t),n=e,r=[{key:"activate",value:(a=Ml(regeneratorRuntime.mark((function t(n){var r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:{},0!==n.length){t.next=3;break}return t.abrupt("return");case 3:return this.emit(e.events.LOCK_START),t.next=6,Ll(Bl(e.prototype),"activate",this).call(this,n,r);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"deactivate",value:(o=Ml(regeneratorRuntime.mark((function t(n){var r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},this.emit(e.events.UNLOCK_START),t.next=4,Ll(Bl(e.prototype),"deactivate",this).call(this,n,r);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"parse",value:function(t){return{added:this._getDifference(t.filter((function(t){return t.spins>0})),this._prevData.filter((function(t){return t.spins>0}))),updated:this._getIntersection(t.filter((function(t){return t.spins>0})),this._prevData.filter((function(t){return t.spins>0}))),removed:this._getIntersection(t.filter((function(t){return 0===t.spins})),this._prevData)}}},{key:"set",value:function(t){this._prevData=Jo()(t)}},{key:"reset",value:function(){this._prevData=Jo()([]),this.remove()}},{key:"hasTiles",value:function(){return this.children.length>0}},{key:"hasCacheData",value:function(){return this._prevData.length>0}},{key:"onCreated",value:function(t,e){t.tile=e.tile}},{key:"getTiles",value:function(){return this.children}},{key:"_getIntersection",value:function(t,e){return t.filter((function(t){return e.find((function(e){return t.reel===e.reel&&t.index===e.index&&t.tile===e.tile}))}))}},{key:"_getDifference",value:function(t,e){return Cl((function(t,e){return t.reel===e.reel&&t.index===e.index&&t.tile===e.tile}),t,e)}}],i=[{key:"events",get:function(){return Vl}}],r&&jl(n.prototype,r),i&&jl(n,i),e}(Ur);function Wl(t){return(Wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zl(t,e,n){return e=ql(e),function(t,e){if(e&&("object"===Wl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],ql(t).constructor):e.apply(t,n))}function ql(t){return(ql=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kl(t,e){return(Kl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zl=function(t){function e(t){var n,r=t.name,i=t.animation,o=t.config,a=t.container;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=zl(this,e,[{name:r,animation:i,config:o}]))._container=a,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kl(t,e)}(e,t),n=e,(r=[{key:"activate",value:function(){var t=Gn.a.renderer,e=t.width,n=t.height,r=this._container.getBounds(),i=this._container.worldTransform.a,o=this._createBackground(r,i);this._anim.throbber.bg.removeChildren(),this._anim.throbber.bg.addChild(o),this._anim.scale.set(1/i),this._anim.x=e/2,this._anim.y=n/2,this.play("loop")}},{key:"deactivate",value:function(){this.removeChild(this._anim),this._anim.promises.stop()}},{key:"_createBackground",value:function(t,e){var n=this._config,r=n.color,i=n.alpha,a=t.width/e,s=t.height/e,u=new o.Graphics,c=a/2,l=s/2;return u.beginFill(r,i),u.drawRect(-c,-l,a,s),u.endFill(),u}}])&&Yl(n.prototype,r),i&&Yl(n,i),e}(E),$l=Object(se.a)((function(t,e){return Array.prototype.slice.call(e,0).sort((function(e,n){for(var r=0,i=0;0===r&&i<t.length;)r=t[i](e,n),i+=1;return r}))})),Jl=Object(La.a)((function(t,e,n){var r=t(e),i=t(n);return r<i?-1:r>i?1:0})),Ql=n("./node_modules/ramda/es/path.js"),th=n("./node_modules/@games/gsap/PixiPlugin.js"),eh=["scale","offsetX","offsetY","duration","ease"],nh=["duration","ease"];function rh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ih(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rh(Object(n),!0).forEach((function(e){oh(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function oh(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ah(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sh(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function uh(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){sh(o,r,i,a,s,"next",t)}function s(t){sh(o,r,i,a,s,"throw",t)}a(void 0)}))}}function ch(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}w.b.registerPlugin(th.a);var lh=function(){function t(e,n){var r=n.width,i=n.height;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.target=e,this.configs=$l([Jl(Object(Ql.a)(["threshold","width"])),Jl(Object(Ql.a)(["threshold","ratio"]))],Gn.a.camera),this.stage=document.querySelector("#stage"),this._origin={x:this.target.x,y:this.target.y,width:r,height:i},this.isActive=!1,this.scale=1,this.offsetX=0,this.offsetY=0}var e,n,r,i,o;return e=t,(n=[{key:"origin",get:function(){return this._origin},set:function(t){var e=t.x,n=void 0===e?this._origin.x:e,r=t.y,i=void 0===r?this._origin.y:r,o=t.width,a=void 0===o?this._origin.width:o,s=t.height,u=void 0===s?this._origin.height:s;this.isActive?(this._origin.x=n,this._origin.y=i,this._origin.width=a,this._origin.height=u):console.error("The camera has not been activated yet.")}},{key:"start",value:function(){this.isActive=!0,Y.a.on(Y.a.events.RESIZE,this._onResize.bind(this)),this._onResize()}},{key:"change",value:(o=uh(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,u,c,l,h,f,p=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=p.length>0&&void 0!==p[0]?p[0]:{},this.isActive){t.next=3;break}return t.abrupt("return",console.error("The camera has not been activated yet."));case 3:return n=e.scale,r=void 0===n?this.scale:n,i=e.offsetX,o=void 0===i?this.offsetX:i,a=e.offsetY,s=void 0===a?this.offsetY:a,u=e.duration,c=void 0===u?0:u,l=e.ease,h=void 0===l?"none":l,f=ah(e,eh),this.scale=r,this.offsetX=o,this.offsetY=s,t.next=9,this._applyConfig(this.activeConfig,ih({duration:c,ease:h},f));case 9:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"_onResize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.width,n=void 0===e?this.stage.width:e,r=t.height,i=void 0===r?this.stage.height:r,o=this._getConfig(n,i);o&&o!==this.activeConfig&&(this._applyConfig(o),this.activeConfig=o)}},{key:"_applyConfig",value:(i=uh(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s,u,c,l,h,f=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:{},r=n.duration,i=void 0===r?0:r,o=n.ease,a=void 0===o?"none":o,s=ah(n,nh),w.b.killTweensOf(this.target),w.b.killTweensOf(this.target.scale),i=Gn.a.static?0:null==i?e.duration:i,u=this.origin.width*e.scale*this.scale,c=(this.origin.width-u)/2,l=this.origin.height*e.scale*this.scale,h=(this.origin.height-l)/2,t.abrupt("return",w.b.to(this.target,ih({duration:i,pixi:{positionX:c+this.origin.x+e.offsetX+this.offsetX,positionY:h+this.origin.y+e.offsetY+this.offsetY,scaleX:e.scale*this.scale,scaleY:e.scale*this.scale},ease:a},s)));case 9:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"_getConfig",value:function(t,e){var n=t/e;return this.configs.find((function(e){return t<=e.threshold.width&&n<=e.threshold.ratio}))}}])&&ch(e.prototype,n),r&&ch(e,r),t}();function hh(t){return(hh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ph(t,e,n){return e=yh(e),function(t,e){if(e&&("object"===hh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],yh(t).constructor):e.apply(t,n))}function dh(t,e,n){return(dh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yh(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function yh(t){return(yh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mh(t,e){return(mh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vh(Object(n),!0).forEach((function(e){gh(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gh(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bh=_h(_h({},k.events),{},{BANGUP_SKIP:"bangup_skip"}),Eh=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ph(this,e,[t]))._startValue=0,n}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mh(t,e)}(e,t),n=e,o=[{key:"events",get:function(){return bh}}],(i=[{key:"startValue",get:function(){return this._startValue}},{key:"endValue",get:function(){var t,e;return(null===(t=this._updateTween)||void 0===t||null===(e=t.vars)||void 0===e?void 0:e.value)||this._count}},{key:"update",value:function(t,n){return this._startValue=(null==n?void 0:n.from)||this._count,dh(yh(e.prototype),"update",this).call(this,t,n)}},{key:"skip",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.endValue,n=arguments.length>1?arguments[1]:void 0;if(this._shouldSkip()){var r=t>this.endValue?this.endValue:t;this.emit(e.events.BANGUP_SKIP,{targetValue:r}),this._updateProgress(r,n)}}},{key:"_shouldSkip",value:function(){var t;return 1!==(null===(t=this._updateTween)||void 0===t?void 0:t.progress())||this._count!==this.endValue}},{key:"_updateProgress",value:function(t,e){var n=w.b.utils.normalize(this.startValue,this.endValue,t),i=Object(r.l)(this._updateTween.vars.ease,n,null==e?void 0:e.precision);this._updateTween.progress(i)}}])&&fh(n.prototype,i),o&&fh(n,o),e}(k);function Th(t){return(Th="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wh(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function xh(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){wh(o,r,i,a,s,"next",t)}function s(t){wh(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Sh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Oh(t,e,n){return e=Rh(e),function(t,e){if(e&&("object"===Th(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Rh(t).constructor):e.apply(t,n))}function Ph(t,e,n){return(Ph="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rh(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Rh(t){return(Rh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ah(t,e){return(Ah=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ih(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ch(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var kh=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ih(Object(n),!0).forEach((function(e){Ch(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ih(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Ni.events),Nh=function(t){function e(t){var n,r=t.reelMaster,i=t.tiles,o=t.winFrames,a=t.labels,s=t.config;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Oh(this,e,[{reelMaster:r,tiles:i,config:s}]))._winFrames=o,n._clusterLabels=a,n}var n,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ah(t,e)}(e,t),n=e,i=[{key:"show",value:(s=xh(regeneratorRuntime.mark((function t(){var n,i,o=this,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:[],i=a.length>1&&void 0!==a[1]?a[1]:{},t.abrupt("return",Ph(Rh(e.prototype),"show",this).call(this,n,Object(r.c)({onTilesShow:function(t){return o.onTilesShow(t,i)}},i)));case 3:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"hide",value:(a=xh(regeneratorRuntime.mark((function t(){var n,i,o=this,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>0&&void 0!==a[0]?a[0]:[],i=a.length>1&&void 0!==a[1]?a[1]:{},n.length){t.next=5;break}return this.emit(e.events.HIDE_ALL_START),t.abrupt("return",Promise.all([this.tiles.deactivate(),this._clusterLabels.hide(),this._winFrames&&this._winFrames.hide()]).then((function(){return o.emit(e.events.HIDE_ALL_END)})));case 5:return t.abrupt("return",Ph(Rh(e.prototype),"hide",this).call(this,n,Object(r.c)({onTilesHide:function(t){return o.onTilesHide(t,i)}},i)));case 6:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"remove",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.length?Ph(Rh(e.prototype),"remove",this).call(this,n,Object(r.c)({onTilesRemove:function(e){return t.onTilesRemove(e,i)}},i)):(this.emit(e.events.REMOVE_ALL_START),Promise.all([this.tiles.remove(),this._clusterLabels.remove(),this._winFrames&&this._winFrames.remove()]).then((function(){return t.emit(e.events.REMOVE_ALL_END)})))}},{key:"onTilesShow",value:function(t){var e=t.winData,n=t.positions,r=t.index,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._clusterLabels.show(r,e,n,i),this._winFrames&&this._winFrames.show(r,e,n,i)}},{key:"onTilesHide",value:function(t){t.winData,t.positions;var e=t.index,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._clusterLabels.hide(e,n),this._winFrames&&this._winFrames.hide(e,n)}},{key:"onTilesRemove",value:function(t){t.winData,t.positions;var e=t.index,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._clusterLabels.remove(e,n),this._winFrames&&this._winFrames.remove(e,n)}}],o=[{key:"events",get:function(){return kh}}],i&&Sh(n.prototype,i),o&&Sh(n,o),e}(Ni);function Mh(t){return(Mh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var jh=["id"];function Dh(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Lh(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dh(Object(n),!0).forEach((function(e){Bh(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Bh(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fh(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Uh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gh(t,e,n){return e=Vh(e),function(t,e){if(e&&("object"===Mh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Vh(t).constructor):e.apply(t,n))}function Hh(t,e,n){return(Hh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vh(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Vh(t){return(Vh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xh(t,e){return(Xh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wh=function(t){function e(t){var n,r=t.id,i=Fh(t,jh);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Gh(this,e,[i])).id=r,n.counter=null,n._sumBounds=n._anim.numContainer.getLocalBounds(),n}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xh(t,e)}(e,t),n=e,(i=[{key:"show",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t)return this.counter||(this.counter=this._createCounter(),this._anim.numContainer.removeChildren(),this._anim.numContainer.addChild(this.counter)),this.counter.reset(),Promise.all([Hh(Vh(e.prototype),"show",this).call(this,n),this.update(t,n)])}},{key:"update",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object(r.c)(this._config.counter.bangup,n),o=Lh(Lh({},i),{},{onUpdate:function(){return e._onSumUpdate()}});return this.counter.update(t,o)}},{key:"_createCounter",value:function(){return new k({config:Lh(Lh({},this._config.counter),{},{fontSize:this._sumBounds.height})})}},{key:"_onSumUpdate",value:function(){Object(r.e)(this.counter,{width:this._sumBounds.width,height:this._sumBounds.height},this._config.counter.ignoreRatio,this._config.counter.overscale)}}])&&Uh(n.prototype,i),o&&Uh(n,o),e}(E);function Yh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var zh=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.anchorPoint=void 0,this.reverse=!1,this.points=[]}var e,n,r;return e=t,(n=[{key:"getHull",value:function(t,e,n){var r,i,o=this,a=[];if(this._addPointsToGTest(t,e,n),this.reverse=this.points.every((function(t){return t.x<0&&t.y<0})),r=this._sortPoints(),(i=r.length)<3)return r.unshift(this.anchorPoint),r;a.push(r.shift(),r.shift());for(var s,u=function(){var t,e,n;if(a.push(r.shift()),t=a[a.length-3],e=a[a.length-2],n=a[a.length-1],o._checkPoints(t,e,n)&&a.splice(a.length-2,1),0==r.length){if(i==a.length){var s=o.anchorPoint;return(a=a.filter((function(t){return!!t}))).some((function(t){return t.x==s.x&&t.y==s.y}))||a.unshift(o.anchorPoint),{v:a.map((function(t){return[t.x,t.y]}))}}i=(r=a).length,(a=[]).push(r.shift(),r.shift())}};;)if(s=u())return s.v}},{key:"addPoint",value:function(t,e){void 0===this.anchorPoint||this.anchorPoint.y>e||this.anchorPoint.y===e&&this.anchorPoint.x>t?(void 0!==this.anchorPoint&&this.points.push(new o.Point(this.anchorPoint.x,this.anchorPoint.y)),this.anchorPoint=new o.Point(t,e)):this.points.push(new o.Point(t,e))}},{key:"_addPointsToGTest",value:function(t,e,n){var r=this;t.forEach((function(t){r.addPoint(t.x,t.y),r.addPoint(t.x+e,t.y),r.addPoint(t.x,t.y+n),r.addPoint(t.x+e,t.y+n)}))}},{key:"_sortPoints",value:function(){var t=this;return this.points.sort((function(e,n){var r=t._findPolarAngle(t.anchorPoint,e),i=t._findPolarAngle(t.anchorPoint,n);return r<i?-1:r>i?1:0}))}},{key:"_checkPoints",value:function(t,e,n){var r=this._findPolarAngle(t,e),i=this._findPolarAngle(t,n);return r>i?!(r-i>180):!(r<i)||i-r>180}},{key:"_findPolarAngle",value:function(t,e){var n,r;if(!t||!e)return 0;if(n=e.x-t.x,r=e.y-t.y,0==n&&0==r)return 0;var i=57.295779513082*Math.atan2(r,n);return this.reverse?i<=0&&(i+=360):i>=0&&(i+=360),i}}])&&Yh(e.prototype,n),r&&Yh(e,r),t}();function qh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Kh=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=[]}var e,n,r;return e=t,(n=[{key:"push",value:function(t){this.data.push(t),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(t){for(var e=this.data[t];t>0;){var n=t-1>>1,r=this.data[n];if(this.compare(e,r)>=0)break;this.data[t]=r,t=n}this.data[t]=e}},{key:"_down",value:function(t){for(var e=this.length>>1,n=this.data[t];t<e;){var r=1+(t<<1),i=this.data[r],o=r+1;if(o<this.length&&this.compare(this.data[o],i)<0&&(r=o,i=this.data[o]),this.compare(i,n)>=0)break;this.data[t]=i,t=r}this.data[t]=n}},{key:"compare",value:function(t,e){return e.max-t.max}}])&&qh(e.prototype,n),r&&qh(e,r),t}();function Zh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"getCentroid",value:function(t,e,n){var r,i,o,a;e=e||1;for(var s=0;s<t.length;s++){var u=t[s];(!s||u[0]<r)&&(r=u[0]),(!s||u[1]<i)&&(i=u[1]),(!s||u[0]>o)&&(o=u[0]),(!s||u[1]>a)&&(a=u[1])}var c=o-r,l=a-i,h=Math.min(c,l),f=h/2,p=new Kh;if(0===h)return[r,i];for(var d=r;d<o;d+=h)for(var y=i;y<a;y+=h)p.push(this.getCell(d+f,y+f,f,t));var m=this.getCentroidCell(t),v=this.getCell(r+c/2,i+l/2,0,t);v.d>m.d&&(m=v);for(var _=p.length;p.length;){var g=p.pop();g.d>m.d&&(m=g,n&&console.log("found best %d after %d probes",Math.round(1e4*g.d)/1e4,_)),g.max-m.d<=e||(f=g.h/2,p.push(this.getCell(g.x-f,g.y-f,f,t)),p.push(this.getCell(g.x+f,g.y-f,f,t)),p.push(this.getCell(g.x-f,g.y+f,f,t)),p.push(this.getCell(g.x+f,g.y+f,f,t)),_+=4)}return n&&(console.log("num probes: "+_),console.log("best distance: "+m.d)),m}},{key:"compareMax",value:function(t,e){return e.max-t.max}},{key:"pointToPolygonDist",value:function(t,e,n){for(var r=!1,i=1/0,o=0;o<n.length;o++)for(var a=n[o],s=0,u=a.length,c=u-1;s<u;c=s++){var l=a[s],h=a[c];l[1]>e!=h[1]>e&&t<(h[0]-l[0])*(e-l[1])/(h[1]-l[1])+l[0]&&(r=!r),i=Math.min(i,this.getSegDistSq(t,e,l,h))}return(r?1:-1)*Math.sqrt(i)}},{key:"getCentroidCell",value:function(t){for(var e=0,n=0,r=0,i=t,o=0,a=i.length,s=a-1;o<a;s=o++){var u=i[o],c=i[s],l=u[0]*c[1]-c[0]*u[1];n+=(u[0]+c[0])*l,r+=(u[1]+c[1])*l,e+=3*l}return 0===e?this.getCell(i[0][0],i[0][1],0,t):this.getCell(n/e,r/e,0,t)}},{key:"getSegDistSq",value:function(t,e,n,r){var i=n[0],o=n[1],a=r[0]-i,s=r[1]-o;if(0!==a||0!==s){var u=((t-i)*a+(e-o)*s)/(a*a+s*s);u>1?(i=r[0],o=r[1]):u>0&&(i+=a*u,o+=s*u)}return(a=t-i)*a+(s=e-o)*s}},{key:"getCell",value:function(t,e,n,r){return{x:t,y:e,h:n,d:this.pointToPolygonDist(t,e,r),max:this.pointToPolygonDist(t,e,r)+n*Math.SQRT2}}}])&&Zh(e.prototype,n),r&&Zh(e,r),t}();function Jh(t){return(Jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qh(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function tf(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Qh(o,r,i,a,s,"next",t)}function s(t){Qh(o,r,i,a,s,"throw",t)}a(void 0)}))}}function ef(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nf(t,e,n){return e=rf(e),function(t,e){if(e&&("object"===Jh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],rf(t).constructor):e.apply(t,n))}function rf(t){return(rf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function of(t,e){return(of=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var af={CLUSTER_LABEL_SHOW:"cluster_label_show",CLUSTER_LABEL_HIDE:"cluster_label_hide"},sf=function(t){function e(t){var n,r=t.name,i=void 0===r?"ClusterLabels":r,o=t.reelMaster,a=t.source,s=void 0===a?{}:a,u=t.config,c=void 0===u?{}:u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=nf(this,e)).name=i,n._sourceData=s,n._reelMaster=o,n._config=c,n}var n,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&of(t,e)}(e,t),n=e,i=[{key:"show",value:function(t,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=this._createWinLabel(t,n,Object(r.c)(this._sourceData,o));return this._setPosition(i,a),this.addChild(a),this.emit(e.events.CLUSTER_LABEL_SHOW),a.show(n.amount,o)}},{key:"hide",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getLabelById(t),i=r?[].concat(r):this.children;return Promise.all(i.map((function(t){return e._hideLabel(t,n)})))}},{key:"remove",value:(s=tf(regeneratorRuntime.mark((function t(e){var n,r=this,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=i.length>1&&void 0!==i[1]?i[1]:{},e?this._destroyLabel(e,n):this.children.map((function(t){return t.id})).map((function(t){return r._destroyLabel(t,n)}));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"getLabelById",value:function(t){return this.children.find((function(e){return e.id===t}))}},{key:"onLabelHidden",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._destroyLabel(t.id,e)}},{key:"_hideLabel",value:(a=tf(regeneratorRuntime.mark((function t(n){var r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},this.emit(e.events.CLUSTER_LABEL_HIDE),t.next=4,n.hide(r);case 4:this.onLabelHidden(n,r);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"_createWinLabel",value:function(t,e,n){var r=n.labelConstructor;return new(void 0===r?Wh:r)({id:t,animation:n.animation,config:n.config})}},{key:"_setPosition",value:function(t,e){var n=this._getLabelPosition(t);e.position.set(n.x,n.y)}},{key:"_getLabelPosition",value:function(t){var e=this,n=this._reelMaster.tileGuide,r=n.width,i=n.height,o=t.map((function(t){return e._reelMaster.getTilePosition(t)})),a=this._getClusterVisualCenter(o,r,i,this._config.polygonPrecision);return{x:a.x,y:a.y}}},{key:"_getClusterVisualCenter",value:function(t,e,n,r){var i=new zh,o=new $h,a=i.getHull(t,e,n);return o.getCentroid(a,r)}},{key:"_destroyLabel",value:function(t){var e=this.getLabelById(t);null==e||e.destroy({children:!0})}}],o=[{key:"events",get:function(){return af}}],i&&ef(n.prototype,i),o&&ef(n,o),e}(o.Container);function uf(t){return(uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cf(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function lf(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){cf(o,r,i,a,s,"next",t)}function s(t){cf(o,r,i,a,s,"throw",t)}a(void 0)}))}}function hf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ff(t,e,n){return e=pf(e),function(t,e){if(e&&("object"===uf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],pf(t).constructor):e.apply(t,n))}function pf(t){return(pf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function df(t,e){return(df=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yf=function(t){function e(t){var n,r=t.name,i=void 0===r?"WinFrames":r,o=t.reelMaster,a=t.source,s=t.config;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ff(this,e)).name=i,n._reelMaster=o,n._frameFillTexture=a.frameFillTexture,n._frameEdgeTexture=a.frameEdgeTexture,n._config=s,n}var n,i,a,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&df(t,e)}(e,t),n=e,(i=[{key:"show",value:function(t,e,n){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=Object(r.c)(this._config,a),u=Object(Ro.a)(n),c=new o.Container;return c.alpha=0,c.id=t,u.forEach((function(t){var n=i._getPoints(u,t,s);n.length&&(i._drawFrame(e,c,n,s),s.edges.enabled&&i._drawEdges(e,c,n,s))})),this._showFrame(c,a),this.addChild(c),c}},{key:"hide",value:(u=lf(regeneratorRuntime.mark((function t(e){var n,r,i,o=this,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},r=this.getFrameById(e),i=r?[].concat(r):this.children,t.abrupt("return",Promise.all(i.map((function(t){return o._hideFrame(t,n)}))));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"remove",value:(s=lf(regeneratorRuntime.mark((function t(e){var n,r=this,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=i.length>1&&void 0!==i[1]?i[1]:{},e?this._destroyFrame(e,n):this.children.map((function(t){return t.id})).map((function(t){return r._destroyFrame(t,n)}));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"getFrameById",value:function(t){return this.children.find((function(e){return e.id===t}))}},{key:"_getPoints",value:function(t,e,n){var r=this._reelMaster.tileGuide,i=r.width,o=r.height,a=this._reelMaster.getTilePosition(e),s=[];return this._hasTopNeighbor(t,e)&&s.push({x:a.x+i/2,y:a.y,rotation:-90,edge:n.edges.enabled&&this._hasRightNeighbor(t,e)?{x:a.x+i,y:a.y}:void 0}),this._hasBottomNeighbor(t,e)&&s.push({x:a.x+i/2,y:a.y+o,rotation:90,edge:n.edges.enabled&&this._hasLeftNeighbor(t,e)?{x:a.x,y:a.y+o}:void 0}),this._hasRightNeighbor(t,e)&&s.push({x:a.x+i,y:a.y+o/2,rotation:0,edge:n.edges.enabled&&this._hasBottomNeighbor(t,e)?{x:a.x+i,y:a.y+o}:void 0}),this._hasLeftNeighbor(t,e)&&s.push({x:a.x,y:a.y+o/2,rotation:180,edge:n.edges.enabled&&this._hasTopNeighbor(t,e)?{x:a.x,y:a.y}:void 0}),s}},{key:"_drawFrame",value:function(t,e,n){for(var r=[],i=0;i<n.length;i++){var o=this._createSprite(this._frameFillTexture),a=n[i],s=a.x,u=a.y,c=a.rotation,l=c*(Math.PI/180),h=this._reelMaster.tileGuide,f=h.width,p=h.height,d=0===c||180===c;o.height=d?p:f,o.x=s,o.y=u,o.rotation=l,o.anchor.set(.5),r.push(o)}e.addChild.apply(e,r)}},{key:"_drawEdges",value:function(t,e,n){for(var r=[],i=0;i<n.length;i++){var o=n[i],a=o.rotation,s=o.edge;if(s){var u=a*(Math.PI/180),c=this._createSprite(this._lineEdgeTexture);c.x=s.x,c.y=s.y,c.rotation=u,c.anchor.set(.5),r.push(c)}}r.length&&e.addChild.apply(e,r)}},{key:"_createSprite",value:function(t){return new o.Sprite(t)}},{key:"_showFrame",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return w.b.to(t,Object(r.c)({alpha:1,duration:this._config.fadeDuration||0},e))}},{key:"_hideFrame",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return w.b.to(t,Object(r.c)({alpha:0,duration:this._config.fadeDuration||0},n)).then((function(){return e._destroyFrame(t.id,n)}))}},{key:"_hasTopNeighbor",value:function(t,e){return!t.find((function(t){return t.reel===e.reel&&t.index===e.index-1}))}},{key:"_hasLeftNeighbor",value:function(t,e){return!t.find((function(t){return t.reel===e.reel-1&&t.index===e.index}))}},{key:"_hasRightNeighbor",value:function(t,e){return!t.find((function(t){return t.reel===e.reel+1&&t.index===e.index}))}},{key:"_hasBottomNeighbor",value:function(t,e){return!t.find((function(t){return t.reel===e.reel&&t.index===e.index+1}))}},{key:"_destroyFrame",value:function(t){var e=this.getFrameById(t);null==e||e.destroy({children:!0})}}])&&hf(n.prototype,i),a&&hf(n,a),e}(o.Container);function mf(t){return(mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vf(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function _f(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){vf(o,r,i,a,s,"next",t)}function s(t){vf(o,r,i,a,s,"throw",t)}a(void 0)}))}}function gf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bf(t,e,n){return e=Ef(e),function(t,e){if(e&&("object"===mf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Ef(t).constructor):e.apply(t,n))}function Ef(t){return(Ef=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tf(t,e){return(Tf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wf={INIT:"init",WIN:"win",NO_WIN:"noWin",NO_WIN_HIDE:"noWinHide",SELECT:"select",DESELECT:"deselect"},xf=function(t){function e(t){var n,r=t.index,i=t.anim,o=t.config,a=t.sourceData,s=void 0===a?{}:a,u=t.sectorRange;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bf(this,e)).index=r,n.anim=i,n.range=u,n.isWinning=!1,n._config=o,n._sourceData=s,n}var n,r,i,o,a,s,u,c,l;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tf(t,e)}(e,t),n=e,r=[{key:"width",get:function(){return this.range.max-this.range.min}},{key:"select",value:(l=_f(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return l.apply(this,arguments)})},{key:"deselect",value:(c=_f(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return c.apply(this,arguments)})},{key:"win",value:(u=_f(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return u.apply(this,arguments)})},{key:"noWin",value:(s=_f(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return s.apply(this,arguments)})},{key:"noWinHide",value:(a=_f(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return a.apply(this,arguments)})},{key:"update",value:(o=_f(regeneratorRuntime.mark((function t(){var e=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:!(e.length>0&&void 0!==e[0])||e[0];case 1:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"isInRange",value:function(t){return this.range.max>=t&&this.range.min<=t}},{key:"reset",value:function(){}},{key:"onUpdateHit",value:function(t){}},{key:"onBeforeUpdateHit",value:function(t){}},{key:"onAfterUpdateHit",value:function(t){}}],i=[{key:"states",get:function(){return wf}}],r&&gf(n.prototype,r),i&&gf(n,i),e}(x.b);function Sf(t){return(Sf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Of=["anim","value"];function Pf(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Rf(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Pf(o,r,i,a,s,"next",t)}function s(t){Pf(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Af(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function If(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cf(t,e,n){return e=kf(e),function(t,e){if(e&&("object"===Sf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],kf(t).constructor):e.apply(t,n))}function kf(t){return(kf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nf(t,e){return(Nf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mf(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jf(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mf(Object(n),!0).forEach((function(e){Df(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mf(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Df(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Lf=jf(jf({},xf.states),{},{UPDATE_START:"updateStart",UPDATE_END:"updateEnd"}),Bf=function(t){function e(t){var n,r=t.anim,i=t.value,o=Af(t,Of);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Cf(this,e,[o])).anim=r,n.num=null,n.init({value:i}),n}var n,r,i,o,a,s,u,c,l,h;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nf(t,e)}(e,t),n=e,r=[{key:"currentValue",get:function(){var t;return null===(t=this.num)||void 0===t?void 0:t.currentCount}},{key:"reset",value:function(){this.play(e.states.INIT)}},{key:"play",value:function(t){return this.anim.promises.gotoAndPlay(t)}},{key:"select",value:(h=Rf(regeneratorRuntime.mark((function t(){var n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:e.states.SELECT,t.next=3,this.play(n);case 3:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"deselect",value:(l=Rf(regeneratorRuntime.mark((function t(){var n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:e.states.DESELECT,t.next=3,this.play(n);case 3:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"win",value:(c=Rf(regeneratorRuntime.mark((function t(){var n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:e.states.WIN,t.next=3,this.play(n);case 3:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"noWin",value:(u=Rf(regeneratorRuntime.mark((function t(){var n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:e.states.NO_WIN,t.next=3,this.play(n);case 3:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"updateStart",value:(s=Rf(regeneratorRuntime.mark((function t(){var n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:e.states.UPDATE_START,t.next=3,this.play(n);case 3:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"updateEnd",value:(a=Rf(regeneratorRuntime.mark((function t(){var n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:e.states.UPDATE_END,t.next=3,this.play(n);case 3:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"update",value:(o=Rf(regeneratorRuntime.mark((function t(){var n,r,i,o,a,s,u,c,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=l.length>0&&void 0!==l[0]?l[0]:{},i=r.data,o=r.instant,a=r.updateStartLabel,s=void 0===a?e.states.UPDATE_START:a,u=r.updateEndLabel,c=void 0===u?e.states.UPDATE_END:u,this.onBeforeUpdateHit(r),t.t0=!o,!t.t0){t.next=7;break}return t.next=7,this.updateStart(s);case 7:return this.onUpdateHit(r),t.next=10,null===(n=this.num)||void 0===n?void 0:n.update(i,r);case 10:if(t.t1=!o,!t.t1){t.next=14;break}return t.next=14,this.updateEnd(c);case 14:this.onAfterUpdateHit(r);case 15:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"init",value:function(t){var e=t.value;this.anim.promises.gotoAndPlay("init"),this._createCounter({value:e})}},{key:"_createCounter",value:function(t){var e=t.value;if(this.anim.numContainer&&!this.anim.numContainer.inner&&console.warn("Inner container is missing this will cause issues with font size on mobile devices!"),this.anim.numContainer){var n=this._sourceData,r=n.counter,i=void 0===r?k:r,o=n.counterConfig,a=void 0===o?this._config.counter:o,s=this.anim.numContainer.inner||this.anim.numContainer,u=new i({config:jf({fontSize:s.getLocalBounds().height},a)});s.removeChildren(),s.addChild(u),u.update(e),this.num=u}}}],i=[{key:"states",get:function(){return Lf}}],r&&If(n.prototype,r),i&&If(n,i),e}(xf);function Ff(t){return(Ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Uf=["sectors","instant"],Gf=["resetNonWinning"],Hf=["sector"];function Vf(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Xf(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Wf(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Xf(o,r,i,a,s,"next",t)}function s(t){Xf(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Yf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zf(t,e,n){return e=Kf(e),function(t,e){if(e&&("object"===Ff(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Kf(t).constructor):e.apply(t,n))}function qf(t,e,n){return(qf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kf(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Kf(t){return(Kf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zf(t,e){return(Zf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Jf(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$f(Object(n),!0).forEach((function(e){Qf(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Qf(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tp=Jf(Jf({},E.events),{},{SPIN_BEGINNING_START:"spin_beginning_start",SPIN_BEGINNING_END:"spin_beginning_end",SPIN_LOOP_START:"spin_loop_start",SPIN_LOOP_END:"spin_loop_end",SPIN_FINISH_START:"spin_finish_start",SPIN_FINISH_END:"spin_finish_end",WIN_START:"win_start",WIN_END:"win_end",SECTOR_CHANGE:"sector_change",SECTORS_UPDATE_START:"sectors_update_start",SECTORS_UPDATE_END:"sectors_update_end"}),ep={INIT:"init",WIN:"win",SPIN:"spin"},np=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=zf(this,e,[t]))._spinTarget=n._anim.wheel,n._sourceData=t.source,n._currentWinValue=0,n._currentSectorId=0,n._spin={angle:0},n._idleSpinner=null,n._spinner=w.b.timeline({onUpdate:function(){return n._onSpinUpdate()}}),n._sectors=[],n}var n,i,o,a,s,u,c,l,h,f,p,d,y,m,v;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zf(t,e)}(e,t),n=e,i=[{key:"maxDegrees",get:function(){return 360}},{key:"winningSector",get:function(){return this._sectors[this._currentSectorId]}},{key:"nonWinningSectors",get:function(){return this._sectors.filter((function(t){return!t.isWinning}))}},{key:"show",value:(v=Wf(regeneratorRuntime.mark((function t(){var n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:{},this._reset(),this.prepareSectors(n),t.next=5,qf(Kf(e.prototype),"show",this).call(this,n);case 5:this._config.spin.idle.startAfterShow&&this.startIdle();case 6:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"hide",value:(m=Wf(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===(r=this._idleSpinner)||void 0===r||r.kill(),t.abrupt("return",qf(Kf(e.prototype),"hide",this).call(this,n));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"updateSectors",value:(y=Wf(regeneratorRuntime.mark((function t(){var n,r,i,o,a,s=this,u=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.length>0&&void 0!==u[0]?u[0]:{},r=n.sectors,i=void 0===r?[]:r,o=n.instant,a=Vf(n,Uf),this.emit(e.events.SECTORS_UPDATE_START,Jf({sectors:i,instant:o},a)),t.next=4,Promise.all(this._sectors.map((function(t,e){return s._onUpdateSector(Jf({sector:t,data:i[e],instant:o},a))})));case 4:this.emit(e.events.SECTORS_UPDATE_END,Jf({sectors:i,instant:o},a));case 5:case"end":return t.stop()}}),t,this)}))),function(){return y.apply(this,arguments)})},{key:"startIdle",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.resetNonWinning,r=void 0!==n&&n,i=Vf(e,Gf);r&&this._resetNonWinningSectors(i);var o=this._config.spin;this._idleSpinner=w.b.timeline({onUpdate:function(){return t._onSpinUpdate()},repeat:-1}),this._idleSpinner.to(this._spin,Jf({angle:"+="+this.maxDegrees,duration:this._calcDuration(this.maxDegrees,o.idle.speed)},o.idle.tweenOptions))}},{key:"spin",value:(d=Wf(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.start(e);case 2:return t.next=4,this.loop(e);case 4:return t.next=6,this.end(e);case 6:return t.next=8,this.win(e);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"win",value:(p=Wf(regeneratorRuntime.mark((function t(n){var r,i,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.onBeforeWin,i=void 0===r?function(){}:r,o=n.onAfterWin,a=void 0===o?function(){}:o,this.emit(e.events.WIN_START,{winValue:this.winningSector.currentValue}),i(n),t.next=5,Promise.all([this._handleWinningSector(n),this._handleNonWinningSectors(n)]);case 5:a(n),this.emit(e.events.WIN_END,{winValue:this.winningSector.currentValue}),this._spin.angle%=this.maxDegrees,this._sectors.forEach((function(t){return t.isWinning=!1}));case 9:case"end":return t.stop()}}),t,this)}))),function(t){return p.apply(this,arguments)})},{key:"start",value:(f=Wf(regeneratorRuntime.mark((function t(){var n,r,i,o,a,s,u,c,l,h,f,p,d,y,m,v,_,g,b=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=b.length>0&&void 0!==b[0]?b[0]:{},i=Object(uu.a)(this._config,r),o=i.spin.start,a=r.onBeforeStart,s=void 0===a?function(){}:a,u=r.onAfterStart,c=void 0===u?function(){}:u,l=r.spinLabel,h=void 0===l?e.animLabels.SPIN:l,f=o.distance,p=o.speed,d=o.duration,y=void 0===d?this._calcDuration(f,p):d,m=o.angle,v=void 0===m?"+="+f:m,_=o.tweenOptions,g=Jf({duration:y,angle:v},r),null===(n=this._idleSpinner)||void 0===n||n.kill(),s(g),this.emit(e.events.SPIN_BEGINNING_START,g),this.play(h),t.next=12,this._spinner.to(this._spin,Jf({duration:y,angle:v},_));case 12:c(g),this.emit(e.events.SPIN_BEGINNING_END,g);case 14:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"loop",value:(h=Wf(regeneratorRuntime.mark((function t(){var n,i,o,a,s,u,c,l,h,f,p,d,y,m,v,_,g,b,E,T,w,x,S=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=S.length>0&&void 0!==S[0]?S[0]:{},i=Object(uu.a)(this._config,n),o=n.onBeforeLoop,a=void 0===o?function(){}:o,s=n.onAfterLoop,u=void 0===s?function(){}:s,c=i.spin.loop,l=c.spinCount,f=(h=void 0===l?{}:l).min,p=void 0===f?1:f,d=h.max,y=void 0===d?1:d,m=c.speed,v=c.distance,_=void 0===v?Object(r.i)(p,y)*this.maxDegrees:v,g=c.duration,b=void 0===g?this._calcDuration(_,m):g,E=c.angle,T=void 0===E?"+="+_:E,w=c.tweenOptions,x=Jf({distance:_,duration:b,angle:T},n),a(x),this.emit(e.events.SPIN_LOOP_START,x),t.next=10,this._spinner.to(this._spin,Jf({duration:b,angle:T},w));case 10:u(x),this.emit(e.events.SPIN_LOOP_END,x);case 12:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"end",value:(l=Wf(regeneratorRuntime.mark((function t(){var n,i,o,a,s,u,c,l,h,f,p,d,y,m,v,_,g,b,E,T,w,x,S,O=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=O.length>0&&void 0!==O[0]?O[0]:{},i=Object(uu.a)(this._config,n),o=i.spin.end,a=i.targetSector,s=i.onBeforeEnd,u=void 0===s?function(){}:s,c=i.onAfterEnd,l=void 0===c?function(){}:c,h=o.speed,f=o.spinCount,d=(p=void 0===f?{}:f).min,y=void 0===d?1:d,m=p.max,v=void 0===m?1:m,_=o.distance,g=void 0===_?this._calcDistance(a)+Object(r.i)(y,v)*this.maxDegrees:_,b=o.duration,E=void 0===b?this._calcDuration(g,h):b,T=o.angle,w=void 0===T?"+="+g:T,x=o.tweenOptions,S=Jf({distance:g,duration:E,angle:w,targetSector:a},n),u(S),this.emit(e.events.SPIN_FINISH_START,S),this._spinner.kill(),t.next=11,this._spinner.to(this._spin,Jf({duration:E,angle:w},x));case 11:this._sectors[this._currentSectorId].isWinning=!0,l(S),this.emit(e.events.SPIN_FINISH_END,Jf({winValue:this._sectors[this._currentSectorId].currentValue},S));case 14:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"prepareSectors",value:function(t){var e=this._parseSectorsData(t);this._sectors=this._createSectors(e),this._currentSectorId=this._calcSpinningSectorId()}},{key:"_handleNonWinningSectors",value:(c=Wf(regeneratorRuntime.mark((function t(){var e,n,r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},n=e.noWinLabel,r=void 0===n?this._sourceData.sector.states.NO_WIN:n,t.next=3,Promise.all(this.nonWinningSectors.map((function(t){return t.noWin(r)})));case 3:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"_resetNonWinningSectors",value:(u=Wf(regeneratorRuntime.mark((function t(){var e,n,r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},n=e.noWinHideLabel,r=void 0===n?this._sourceData.sector.states.NO_WIN_HIDE:n,t.next=3,Promise.all(this.nonWinningSectors.map((function(t){return t.noWinHide(r)})));case 3:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"_handleWinningSector",value:(s=Wf(regeneratorRuntime.mark((function t(){var n,r,i,o,a,s,u,c,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>0&&void 0!==l[0]?l[0]:{},r=n.sectorWinLabel,i=void 0===r?this._sourceData.sector.states.WIN:r,o=n.winLabel,a=void 0===o?e.animLabels.WIN:o,s=n.shouldPlayWin,u=void 0===s?this.winningSector.currentValue>this._currentWinValue:s,(c=[]).push(this.winningSector.win(i)),u&&c.push(this.play(a)),this._currentWinValue=this.winningSector.currentValue,t.next=8,Promise.all(c);case 8:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"_changeSector",value:(a=Wf(regeneratorRuntime.mark((function t(n){var r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this._sectors[this._currentSectorId],i=this._sectors[n],this.emit(e.events.SECTOR_CHANGE,{current:r,next:i}),o=Promise.all([r.deselect(this._sourceData.sector.states.DESELECT),i.select(this._sourceData.sector.states.SELECT)]),this._currentSectorId=n,t.next=7,o;case 7:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"_createSectors",value:function(t){var e=this;return t.map((function(t){return e._createSector(t)}))}},{key:"_onUpdateSector",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sector,n=Vf(t,Hf);return e.update(Jf({},n))}},{key:"_parseSectorsData",value:function(t){throw new Error("this method should be overridden with custom logic for parsing data for each sector")}},{key:"_createSector",value:function(t){throw new Error("this method should be overridden with custom logic for creating individual sector instance")}},{key:"_calcDuration",value:function(t,e){return t/e}},{key:"_onSpinUpdate",value:function(){this._spinTarget.angle=this._spin.angle%this.maxDegrees;var t=this._calcSpinningSectorId();this._currentSectorId!==t&&this._changeSector(t)}},{key:"_calcSpinningSectorId",value:function(){var t=Math.floor((this._spin.angle+this._config.targetPointerOffset)%this.maxDegrees),e=this._sectors.find((function(e){return e.isInRange(t)}));return(null==e?void 0:e.index)||0}},{key:"_calcDistance",value:function(t){var e=this._config.spin.end.sectorDeviation,n=this._sectors[t],i=n.width/2,o=0;null!=e&&e.enabled&&(o=Object(r.i)(-i+e.offset,i-e.offset));var a=+(this._config.targetPointerOffset+this._spin.angle)%this.maxDegrees,s=n.range.max-i-a;return s<0?s+this.maxDegrees+o:s+o}},{key:"_reset",value:function(){this._currentWinValue=0,this._spinTarget.angle=0,this._spin={angle:0},this._sectors.forEach((function(t){return t.reset()})),this._currentSectorId=this._calcSpinningSectorId()}}],o=[{key:"events",get:function(){return tp}},{key:"animLabels",get:function(){return ep}}],i&&Yf(n.prototype,i),o&&Yf(n,o),e}(E);function rp(t){return(rp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ip=["source"];function op(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ap(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sp(t,e,n){return e=cp(e),function(t,e){if(e&&("object"===rp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],cp(t).constructor):e.apply(t,n))}function up(t,e,n){return(up="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cp(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function cp(t){return(cp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lp(t,e){return(lp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fp(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hp(Object(n),!0).forEach((function(e){pp(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var dp=fp(fp({},np.events),{},{SECTOR_CHANGE:"sector_change"}),yp=function(t){function e(t){var n=t.source,r=void 0===n?{}:n,i=op(t,ip);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),sp(this,e,[fp({source:fp({sector:Bf},r)},i)])}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lp(t,e)}(e,t),n=e,o=[{key:"events",get:function(){return dp}}],(i=[{key:"prepareSectors",value:function(t){if(!this._sectors.length){var n=this._anim.wheel.sectors;this._sectorsMCs=Object(r.k)(n.children.length,(function(t){return n["sector".concat(t)]})),up(cp(e.prototype),"prepareSectors",this).call(this,t)}this.updateSectors(fp({instant:!0},t))}},{key:"_parseSectorsData",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.sectors,r=void 0===n?[]:n,i=e.sectorWidths,o=void 0===i?[]:i,a=this.maxDegrees;return this._sectorsMCs.map((function(e,n){var i=o[n]||t.maxDegrees/t._sectorsMCs.length,s={max:a,min:a-i};return a-=i,{value:r[n],sectorRange:s,index:n,width:i}}))}},{key:"_createSector",value:function(t){var e=t.index,n=t.sectorRange,r=t.value,i=this._sectorsMCs[e],o=this._sourceData||{},a=o.sector,s=o.sectorConfig,u=void 0===s?this._config.sector:s,c=o.sectorSource;return new a({index:e,anim:i,config:u,value:r,sourceData:void 0===c?{}:c,sectorRange:n})}}])&&ap(n.prototype,i),o&&ap(n,o),e}(np);function mp(t){return(mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vp(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return _p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _p(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bp(t,e,n){return e=Tp(e),function(t,e){if(e&&("object"===mp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Tp(t).constructor):e.apply(t,n))}function Ep(t,e,n){return(Ep="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tp(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Tp(t){return(Tp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wp(t,e){return(wp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Sp(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xp(Object(n),!0).forEach((function(e){Op(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Op(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pp=Sp({},E.events),Rp=function(t){function e(t){var n,r=t.animation,i=t.config,o=t.mask,a=t.counterCtor,s=void 0===a?k:a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bp(this,e,[{animation:r,config:i,mask:o}])).counters={},n._counterCtor=s,n._countersBounds={},n}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wp(t,e)}(e,t),n=e,o=[{key:"events",get:function(){return Pp}}],(i=[{key:"show",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._config.counters,o=void 0===i?[]:i;return Object.keys(n).forEach((function(e){if(o[e]){var r=t._getContainer(o[e].containerName),i=t._getCounterBounds(r,e),a=t._createCounter(Sp(Sp({},o[e].counter),{},{fontSize:i.height}));t.counters[e]=a,t._updateCounter(a,n[e]),t._fitCounter(a,i),t._addCounter(a,r)}else console.error("No counter data found for key ".concat(e))})),Ep(Tp(e.prototype),"show",this).call(this,r)}},{key:"update",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=0,n=Object.entries(t);e<n.length;e++){var r=vp(n[e],2),i=r[0],o=r[1];if(this.counters[i]){var a=this.counters[i],s=this._countersBounds[i];this._updateCounter(a,o),this._fitCounter(a,s)}else console.error("No counter data found for key ".concat(i))}}},{key:"_createCounter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new this._counterCtor({config:t})}},{key:"_addCounter",value:function(t,e){e.removeChildren(),e.addChild(t)}},{key:"_updateCounter",value:function(t,e){t.currentCount=e}},{key:"_fitCounter",value:function(t,e){var n=this._config.fit,i=void 0===n?{}:n,o=i.width,a=void 0===o?e.width:o,s=i.height,u=void 0===s?e.height:s,c=i.ignoreRatio,l=void 0!==c&&c,h=i.overscale,f=void 0!==h&&h;Object(r.e)(t,{width:a,height:u},l,f)}},{key:"_getContainer",value:function(t){var e=this,n=t.split("."),r=null;return n.forEach((function(t){if(!(r=r?r[t]:e._anim[t]))throw new Error("No container found with name ".concat(t))})),r}},{key:"_getCounterBounds",value:function(t,e){return this._countersBounds[e]||(this._countersBounds[e]=t.getLocalBounds()),this._countersBounds[e]}}])&&gp(n.prototype,i),o&&gp(n,o),e}(E);function Ap(t){return(Ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ip(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cp(t,e,n){return e=Np(e),function(t,e){if(e&&("object"===Ap(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Np(t).constructor):e.apply(t,n))}function kp(t,e,n){return(kp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Np(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Np(t){return(Np=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mp(t,e){return(Mp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jp={WIN_ACTIVE:"win_active",LOSE_ACTIVE:"no_win_active",WIN_FINAL:"win_final",LOSE_FINAL:"lose_final"},Dp=function(t){function e(t){var n,r=t.animation,i=t.config,o=t.mask;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Cp(this,e,[{animation:r,config:i,mask:o}]))._isWinning=!1,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mp(t,e)}(e,t),n=e,(r=[{key:"animLabels",get:function(){return jp}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=t?jp.WIN_ACTIVE:jp.LOSE_ACTIVE;this._isWinning=t,this._anim.gamble.gotoAndStop(e)}},{key:"win",value:function(){var t=this._isWinning?jp.WIN_FINAL:jp.LOSE_FINAL;return this._anim.gamble.promises.gotoAndPlay(t)}},{key:"reset",value:function(){this._anim.gamble.gotoAndStop("init")}},{key:"_init",value:function(){this._anim.gamble.gotoAndStop("init"),kp(Np(e.prototype),"_init",this).call(this)}}])&&Ip(n.prototype,r),i&&Ip(n,i),e}(Rp),Lp=Object(La.a)((function(t,e,n){if(t>e)throw new Error("min must not be greater than max in clamp(min, max, value)");return n<t?t:n>e?e:n}));function Bp(t){return(Bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fp(t){return function(t){if(Array.isArray(t))return Up(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Up(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Up(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Up(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Gp(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Hp(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Gp(o,r,i,a,s,"next",t)}function s(t){Gp(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Vp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xp(t,e,n){return e=zp(e),function(t,e){if(e&&("object"===Bp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Wp(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],zp(t).constructor):e.apply(t,n))}function Wp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yp(t,e,n){return(Yp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zp(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function zp(t){return(zp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qp(t,e){return(qp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Kp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zp(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kp(Object(n),!0).forEach((function(e){$p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Jp=38,Qp=40,td=Zp(Zp({},Cc.events),{},{TITLE_UPDATE:"title_update"}),ed=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Xp(this,e,[t])).isMinimal=Boolean(n._config.isMinimal),n._isSplashShown=!1,n._sliderClicked=!1,n._sliderShown=!1,n._sliderDrag=null,n._onScroll=n._onScroll.bind(Wp(n)),n._onKeyDown=n._onKeyDown.bind(Wp(n)),n._smoothMoveTimeline=null,n._splashScreenMc=null;var r=n._config.screens.length+n.optionalScreenIndices.length,i=n._config.bounds.height;return n._topY=0+(n._config.offsets.top||0),n._bottomY=-(r-1)*i+(n._config.offsets.bottom||0),n._mobileScrollStartY=0,n._initTitles(),n}var n,r,i,a,s,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qp(t,e)}(e,t),n=e,r=[{key:"paysScreenIndex",get:function(){return this._config.paysScreen||Yp(zp(e.prototype),"paysScreenIndex",this)}},{key:"setup",value:function(t){this._hasLoaded=t,this._isInitialPageLoaded=!0,this._isSplashShown=!0}},{key:"show",value:function(t){Yp(zp(e.prototype),"show",this).call(this,t),this._toggleListeners()}},{key:"hide",value:(u=Hp(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._deactivating){t.next=2;break}return t.abrupt("return");case 2:return this._toggleListeners(!1),t.next=5,Yp(zp(e.prototype),"hide",this).call(this,n);case 5:this._isSplashShown=!0,this._container.removeChild(this._splashScreenMc),this._container.position.set(0,0),this._moveSlider(),this._changeMasks();case 10:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"slideTo",value:(s=Hp(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s,u,c,l,h,f,p=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=p.length>1&&void 0!==p[1]?p[1]:0,r=p.length>2&&void 0!==p[2]&&p[2],this._isSplashShown){t.next=4;break}return t.abrupt("return");case 4:if((i=e%this._container.children.length)!==this._current&&this.emit(Cc.events.SLIDE_SCREEN,{from:this._current,to:i}),this._updateTitle(i,!1),this._current=i,0!==e){t.next=10;break}return t.abrupt("return");case 10:if(e=Math.max(e,0),!this._hasMissingScreens()){t.next=15;break}return t.next=14,this._loadPages().catch((function(){e=0,console.warn("Paytable page failed to change!")}));case 14:this._hasMissingScreens()&&this._attachMissingScreens();case 15:if(!r){t.next=30;break}if(o=this._config,a=o.slideDuration,s=o.ease,u=o.arrangement,c=void 0!==n?n:a,l=this._container.children[i],h="horizontal"===u?-l.x+(this._config.offsets.left||0):0,f="vertical"===u?-l.y+(this._config.offsets.top||0):0,!(c>0)){t.next=28;break}return this._tween=w.a.to(this._container,{duration:c,x:h,y:f,ease:s}),t.next=25,this._tween.then();case 25:this._tween=null,t.next=29;break;case 28:this._container.position.set(h,f);case 29:this._moveSlider();case 30:Y.a.emit(Y.a.events.PAYTABLE_SCREEN_CHANGE,{value:e});case 31:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"initSlider",value:function(){var t=this,e=this.anim.slider;if(e&&!this._sliderShown){this._sliderShown=!0;var n=this.anim.slider,r=n.sliderBody,i=n.sliderHead;r.interactive=!0,i.interactive=!0,i.buttonMode=!0,e.promises.gotoAndStop("show"),i.promises.gotoAndPlay("over"),r.on("click",(function(e){var n=e.data;return t._onSliderClick(n)})),i.on("pointermove",(function(e){var n=e.data;return t._onMouseMove(n)})),i.on("pointermoveoutside",(function(e){var n=e.data;return t._onMouseMove(n)})),i.on("pointerover",(function(){return i.promises.gotoAndPlay("hit")})),i.on("pointerout",(function(){return i.promises.gotoAndPlay("over")})),i.on("pointerdown",(function(){return t._sliderClicked=!0})),i.on("pointerup",(function(){return t._sliderClicked=!1})),i.on("pointerupoutside",(function(){return t._sliderClicked=!1}))}}},{key:"_updateTitle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.anim.title&&t!==this._current){this.emit(td.TITLE_UPDATE,{index:t});var n=this._anim.title.children[this._current],r=this._anim.title.children[t];n&&(e?n.promises.gotoAndStop("init"):n.promises.gotoAndPlay("hide")),r&&(e?r.promises.gotoAndStop("hide"):r.promises.gotoAndPlay("show")),this._current=t}}},{key:"_getScreensToLoad",value:function(){var t=Fp(this._config.screens);return this.optionalScreenIndices.map((function(e){return t.splice(e,0,e+1)})),Object(dc.a)(this._createdScreens,t.concat(this.optionalScreenIndices))}},{key:"_hasMissingScreens",value:function(){return this._createdScreens.length!==this._config.screens.length+this.optionalScreenIndices.length}},{key:"_attachMissingScreens",value:function(){var t;if(!this.isLoading){var e=this._createRemainingScreens();e.length&&(this._setSymbolWins(e,this.settings),this._config.drawLines&&this._drawLines(e,this.settings),(t=this._container).addChild.apply(t,Fp(e)))}}},{key:"_createScreen",value:function(t,n){var r=n.arrangement,i=n.bounds,o=Yp(zp(e.prototype),"_createScreen",this).call(this,t,{arrangement:r,bounds:i});return o.x="horizontal"===r?i.width*(this._createdScreens.length-1):0,o.y="vertical"===r?i.height*(this._createdScreens.length-1):0,o}},{key:"_scrollTable",value:function(t){if(this._isSplashShown){this._killSmoothMove();var e=Lp(this._bottomY,this._topY,this._container.y+t.y);this._container.y=e,this._moveSlider(),this.slideTo(this._getNextIndex())}}},{key:"_moveSlider",value:function(){if(this.anim.slider){var t=this.anim.slider,e=t.sliderHead,n=t.sliderBody,r=Math.abs(this._bottomY+this._topY),i=e.height/2,o=n.bodyHitArea.height-e.height/2,a=Math.abs(this._container.y/r),s=n.bodyHitArea.height*a,u=Lp(i,o,s);e.y=u}}},{key:"_toggleListeners",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._sliderShown&&(e?(window.addEventListener("touchstart",(function(e){return t._touchstartStart(e)}),!0),window.addEventListener("touchmove",(function(e){return t._onMobileScroll(e)}),!0),window.addEventListener("wheel",this._onScroll),window.addEventListener("keydown",this._onKeyDown)):(window.removeEventListener("touchstart",this._touchstartStart,!0),window.removeEventListener("touchmove",this._onMobileScroll,!0),window.removeEventListener("wheel",this._onScroll),window.removeEventListener("keydown",this._onKeyDown)))}},{key:"_onScroll",value:function(t){this._scrollTable({y:-t.deltaY})}},{key:"_onMobileScroll",value:function(t){var e=t.touches[0].clientY,n=(this._mobileScrollStartY-e)*this._config.mobileScrollSpeed;this._mobileScrollStartY=e,this._scrollTable({y:-n})}},{key:"_touchstartStart",value:function(t){this._mobileScrollStartY=t.touches[0].clientY}},{key:"_onKeyDown",value:function(t){if([Jp,Qp].includes(t.keyCode)){var e=this._config.arrowKeysDeltas,n=e.up,r=e.down;this._scrollTable({y:t.keyCode===Jp?n:r})}}},{key:"_dragUpdate",value:function(t){var e=t.delta;this._scrollTable(e)}},{key:"_dragEnd",value:function(t){t.direction}},{key:"_initScreens",value:function(){var t=this._anim,e=t.screens,n=t.title;n&&n.children.forEach((function(t){return t.promises.gotoAndPlay("init")})),this._container=e,this._config.bounds=this._container.getBounds(),this._config.bounds=Zp(Zp({},this._config.bounds),{},{height:this._config.bounds.height-(this._config.offsets.height||0),width:this._config.bounds.width-(this._config.offsets.width||0)}),this._container.mask.name="paytableMask",this._container.removeChildren()}},{key:"_initTitles",value:function(){var t=this;if(this.anim.title){var e=this._config.optional;(void 0===e?[]:e).map((function(t){return t.index})).filter((function(e){return!t.optionalScreenIndices.includes(e-1)})).forEach((function(e){return t.anim.title.removeChild(t.anim.title["title".concat(e)])}))}}},{key:"_onMouseMove",value:function(t){this._sliderClicked&&(this._container.y=this._topY,this._scrollTable({y:this._calcSliderPosition(t)}))}},{key:"_onSliderClick",value:function(t){this._smoothMove(this._calcSliderPosition(t))}},{key:"_calcSliderPosition",value:function(t){return-this.anim.slider.toLocal(new o.Point(0,t.global.y)).y/this.anim.slider.sliderBody.bodyHitArea.height*Math.abs(this._bottomY+this._topY)}},{key:"_smoothMove",value:function(t){var e=this,n=this._config.smoothSlide,r=n.ease,i=n.speed,o=Math.abs(this._container.y-t)/i;this._smoothMoveTimeline=w.a.to(this._container,{y:t,duration:o,ease:r,onUpdate:function(){e._moveSlider(),e._updateTitle(e._getNextIndex())}})}},{key:"_killSmoothMove",value:function(){this._smoothMoveTimeline&&(this._smoothMoveTimeline.kill(),this._smoothMoveTimeline=null)}},{key:"_getNextIndex",value:function(){var t=this,e=this._container.children.reduce((function(e,n){var r=Math.abs(n.y+t._container.y);return Math.abs(e.y+t._container.y)<r?e:n}),this._container.children[0]);return this._hasLoaded?this._container.children.indexOf(e):1}},{key:"_loadInitialPage",value:function(){if(!this._isInitialPageLoaded){this._isInitialPageLoaded=!0;var t=this._config,e=t.splashNameSpace,n=void 0===e?"PaytableScreen1":e,r=t.splashName,i=void 0===r?"paytableScreen1":r;this._splashScreenMc=new qt.a[n][i],this._splashScreenMc.name=i,this._container.removeChildren(),this._container.addChild(this._splashScreenMc)}}},{key:"_changeMasks",value:function(){var t=this._container.mask,e=this._anim.maskVertical;t.alpha=0,e.alpha=1,this._container.mask=e}},{key:"slideToPays",value:(a=Hp(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._loadPages();case 2:return this._hasMissingScreens()&&this._attachMissingScreens(),t.abrupt("return",this.slideTo(this.paysScreenIndex,e,!0));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})}],i=[{key:"events",get:function(){return td}}],r&&Vp(n.prototype,r),i&&Vp(n,i),e}(Cc),nd={FreeSpinsStatus:W,FreeSpinsStartScreen:at,FreeSpinsBonusScreen:mt,LoadingScreen:$c,ReelMaster:vt.a,SpinningReelMaster:oe,FallingReelMaster:gn,SpinningMegaWaysReelMaster:bn.a,SceneEffects:Ju,Cascade:Al,Cover:E,Choices:Un,Drag:Sn,WinBar:Jn,WinLinesImage:vr,WinLinesColor:xr,WinTiles:Zr,WinTile:ii,MegaWaysWinTile:pi,Wins:Ti,WaysWins:Ni,WinWaysBar:Wi,ReelCovers:Ur,ExtraWin:Po,SkipStepExtraWin:Go,Rumble:Zo,HeaderBanners:Uc,StatefulControl:ta,PopupTiles:da,Jackpots:Oa,Anticipation:vs,SpineCover:Bs,VideoCover:pc,Paytable:Cc,PassingEffects:Rs,CenterWinBar:sl,LockedTiles:Xl,Throbber:Zl,Camera:lh,TrailController:su,MegaWaysCounter:wu,ParticlesContainer:co,SkipStepCounter:Eh,ClusterWins:Nh,ClusterLabels:sf,ClusterWinFrames:yf,ClusterWinLabel:Wh,RoyalWheel:yp,SpinningTilesPopupTiles:Gu,SpinningTilesWinLines:Iu,CounterCover:Rp,GambleStatus:Dp,ScrollablePaytable:ed};function rd(t){return(rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var id=["configs"];function od(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ad(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ad(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ad(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function sd(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ud(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cd(t,e,n){return e=ld(e),function(t,e){if(e&&("object"===rd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],ld(t).constructor):e.apply(t,n))}function ld(t){return(ld=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hd(t,e){return(hd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fd=function(t){function e(t){var n,r=t.configs,i=sd(t,id);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=cd(this,e,[i])).activeType="",n._configs=r,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hd(t,e)}(e,t),n=e,(r=[{key:"_startAnticipation",value:function(t){var n=this,r=this._config,i=r.reels,o=r.skipActivation,a=void 0!==o&&o,s=i.filter((function(e){return e===t&&!n._activeReels.includes(e)}));if(!a){var u=s.map((function(t){return{reel:t}}));this.activate(u)}this.emit(e.events.START,{reelIndex:t}),this._activeReels=za(Za,os)(this._activeReels,s)}},{key:"_getReelTileTotals",value:function(t){for(var e=this,n=0,r=[],i=function(){var i=od(a[o],2),s=i[0],u=i[1],c=u.tileId,l=[0];e._reelMaster.reels.forEach((function(e){var n=t[e.index],r=Ma(parseInt)(n)[c]||0;l.push(l[e.index]+r)}));var h=l.slice(0,-1),f=h.reduce((function(t,e){return t+e}),0);f>n&&(n=f,r=h,e._config=u,e.activeType=s)},o=0,a=Object.entries(this._configs);o<a.length;o++)i();return r}},{key:"_getReelsCriteria",value:function(t){var e=this._config,n=e.reels,r=e.maxTiles,i=e.minTiles,o=e.once,a=void 0!==o&&o,s=!1;return t.map((function(t,e){var o=n.includes(e)&&!s,u=t>=i&&t<=r;return o&&u&&a&&(s=!0),o&&u}))}}])&&ud(n.prototype,r),i&&ud(n,i),e}(vs);function pd(t){return(pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var dd=["containers"];function yd(t){return function(t){if(Array.isArray(t))return md(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return md(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return md(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function md(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vd(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gd(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ed(t,e,n){return e=xd(e),function(t,e){if(e&&("object"===pd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Td(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],xd(t).constructor):e.apply(t,n))}function Td(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wd(t,e,n){return(wd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xd(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function xd(t){return(xd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Sd(t,e){return(Sd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Od=function(t){function e(t){var n,r=t.containers,i=gd(t,dd);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ed(this,e,[i]))._containers=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vd(Object(n),!0).forEach((function(e){_d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({main:Td(n)},r),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sd(t,e)}(e,t),n=e,(r=[{key:"allChildren",get:function(){return Object.values(this._containers).reduce((function(t,e){return t.concat(e.children)}),[])}},{key:"onCreated",value:function(t,n,r){wd(xd(e.prototype),"onCreated",this).call(this,t,n,r),this._setupFgCover(t)}},{key:"onShowStart",value:function(t,n,r,i){var o;wd(xd(e.prototype),"onShowStart",this).call(this,t,n,r,i),null===(o=this._getBgCover(t))||void 0===o||o.show()}},{key:"getCovers",value:function(t){var e=this;return t?[].concat(t).map((function(t){var n=t.reel,r=t.index;return e._getCoverOnPos({reel:n,index:r})})).flat().filter(Boolean):yd(this._containers)}},{key:"_getCoverOnPos",value:function(t){var e=t.reel,n=t.index,r=void 0===n?0:n,i=this.allChildren.filter((function(t){return t.reel===e&&t.index===r}));return i.length?i:void 0}},{key:"_getBgCover",value:function(t){var e=t.reel,n=t.index;return this._containers.background.children.find((function(t){var r=t.reel,i=t.index;return r===e&&i===n}))}},{key:"_createCover",value:function(t,n,r){var i=n.cover,o=void 0===i?E:i,a=n.animation,s=n.animationBg,u=n.config,c=n.mask;return this._createBgCover(t,s,r),wd(xd(e.prototype),"_createCover",this).call(this,t,{cover:o,animation:a,config:u,mask:c},r)}},{key:"_createBgCover",value:function(t,e,n){var r=new E({animation:e,config:this._config,mask:this._mask,data:t});this._setupBgCover(r,t,n),this._containers.background.addChild(r)}},{key:"_setupBgCover",value:function(t,e,n){var r=t.anim.bg.base,i=this._config.bgAlpha;r&&!isNaN(i)&&r.alpha!==i&&(r.alpha=i),this._setUpCover(t,e,n)}},{key:"_setupFgCover",value:function(t){var e=t.anim.anticipationInner,n=(void 0===e?{}:e).anticipationCloudsDown;n&&(n.y=this._reelMaster.getReelBounds(0).height)}}])&&bd(n.prototype,r),i&&bd(n,i),e}(fd);function Pd(t){return(Pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ad(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Id(t,e,n){return e=Cd(e),function(t,e){if(e&&("object"===Pd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Cd(t).constructor):e.apply(t,n))}function Cd(t){return(Cd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kd(t,e){return(kd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Nd=function(t){function e(){return Rd(this,e),Id(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kd(t,e)}(e,t),n=e,(r=[{key:"setTile",value:function(t){var e=t.tileId,n=t.type,r=void 0===n?"normal":n,i=t.heightIndex;this._tile||this._initTile(),this._tile.to({id:e},r,"",i)}},{key:"_createInnerTile",value:function(){return new oi.a}}])&&Ad(n.prototype,r),i&&Ad(n,i),e}(pl),Md=n("./src/core/features/reels/tiles/TileBuilder.js");function jd(t){return(jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dd(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ld(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dd(Object(n),!0).forEach((function(e){Bd(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Bd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ud(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gd(t,e,n){return e=Vd(e),function(t,e){if(e&&("object"===jd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Vd(t).constructor):e.apply(t,n))}function Hd(t,e,n){return(Hd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Vd(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Vd(t){return(Vd=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xd(t,e){return(Xd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wd=function(t){function e(){return Fd(this,e),Gd(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xd(t,e)}(e,t),n=e,(r=[{key:"onCreated",value:function(t,n,r){var i=this._reelMaster.reels[n.reel].currentSize;Hd(Vd(e.prototype),"onCreated",this).call(this,t,Ld(Ld({},n),{},{heightIndex:i}),r)}},{key:"onShowStart",value:function(t,n,r,i){!this._inDrop&&this._config.specialTileIds.includes(r.tileId)&&(t.visible=!1),Hd(Vd(e.prototype),"onShowStart",this).call(this,t,n,r,i)}},{key:"onDestroyed",value:function(t,e){var n=t.index,r=t.reel,i=t.data.tileId,o=this._config,a=o.destroy.replaceTile,s=o.specialTileIds;this._inDestroy&&!a||null!=s&&s.includes(i)||this._reelMaster.replaceTile(n,i,r,!0)}},{key:"_createCover",value:function(t,e,n){var r=e.cover,i=void 0===r?E:r,o=e.animation,a=e.config,s=e.mask,u=this._reelMaster.reels[t.reel].currentSize;return new i({animation:o["tilex".concat(u)],config:a,mask:s,data:t})}},{key:"_calcDropOffset",value:function(){var t=this._reelMaster.reels,e=this._config.drop.addedDropOffset,n=void 0===e?0:e;return this._emptyScreen.reduce((function(e,n){var r=Md.a.guides[t[n.reel].currentSize].height*(n.index+1);return Math.max(r,e)}),0)+n}}])&&Ud(n.prototype,r),i&&Ud(n,i),e}(Al);function Yd(t){return(Yd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kd(t,e,n){return e=$d(e),function(t,e){if(e&&("object"===Yd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],$d(t).constructor):e.apply(t,n))}function Zd(t,e,n){return(Zd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$d(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function $d(t){return($d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jd(t,e){return(Jd=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qd(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ty(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qd(Object(n),!0).forEach((function(e){ey(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ey(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ny=ty(ty({},Zr.events),{},{PARTICLES_BURST_START:"particles_burst_start"}),ry="coins",iy=function(t){function e(){return zd(this,e),Kd(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jd(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return ny}}],(r=[{key:"onCreated",value:function(t,n,r){var i=this;Zd($d(e.prototype),"onCreated",this).call(this,t,n,r),t.anim.once(ry,(function(){return i.emit(e.events.PARTICLES_BURST_START,{cover:t})})),!r.hasMaxWin&&this._reelMaster.replaceTile(t.index,0,t.reel)}}])&&qd(n.prototype,r),i&&qd(n,i),e}(Zr);function oy(t){return(oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ay=["onTilesShow"],sy=["onTilesHide"];function uy(t){return function(t){if(Array.isArray(t))return cy(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return cy(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cy(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cy(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ly(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function hy(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function fy(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){hy(o,r,i,a,s,"next",t)}function s(t){hy(o,r,i,a,s,"throw",t)}a(void 0)}))}}function py(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yy(t,e,n){return e=my(e),function(t,e){if(e&&("object"===oy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],my(t).constructor):e.apply(t,n))}function my(t){return(my=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vy(t,e){return(vy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _y=function(t){function e(){return py(this,e),yy(this,e,arguments)}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vy(t,e)}(e,t),n=e,(r=[{key:"show",value:(a=fy(regeneratorRuntime.mark((function t(n){var r,i,o,a,s,u,c,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},this.emit(e.events.SHOW_ALL_START),i=r.onTilesShow,o=ly(r,ay),a=this._getPositions(n),s=a.positions,u=a.skipped,c=Promise.resolve(),i&&(c=i({positions:s,skipped:u})),t.next=8,Promise.all([this.tiles.activate(s,o),c]);case 8:this.emit(e.events.SHOW_ALL_END);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"hide",value:(o=fy(regeneratorRuntime.mark((function t(n){var r,i,o,a,s,u,c=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},this.emit(e.events.HIDE_ALL_START),i=r.onTilesHide,o=ly(r,sy),a=this._getPositions(n),s=a.positions,u=a.skipped,i&&i({positions:s,skipped:u}),t.next=7,this.tiles.deactivate(s,o);case 7:this.tiles.remove(),this.emit(e.events.HIDE_ALL_END);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"_getPositions",value:function(t){var e=this;return t.reduce((function(t,n){var r,i,o=e._generatePositions(n),a=o.positions,s=o.skipped;return(r=t.positions).push.apply(r,uy(a)),(i=t.skipped).push.apply(i,uy(s.filter((function(e){var n=e.reel,r=e.index;return!t.skipped.some((function(t){return t.reel===n&&t.index===r}))})))),t}),{positions:[],skipped:[]})}},{key:"_getWaysBatches",value:function(t){var e=[],n=Object(Ro.a)(t);return n.sort((function(t,e){return t.tileId-e.tileId})).forEach((function(t){return!e.includes(t.tileId)&&e.push(t.tileId)})),e.map((function(t){return n.filter((function(e){return e.tileId===t}))}))}}])&&dy(n.prototype,r),i&&dy(n,i),e}(Ni);function gy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var by=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._total=0}var e,n,r;return e=t,(n=[{key:"total",get:function(){return this._format(this._total)}},{key:"update",value:function(t){this._total+=this._format(t)}},{key:"reset",value:function(){this._total=0}},{key:"_format",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return parseFloat(t.toFixed(e))}}])&&gy(e.prototype,n),r&&gy(e,r),t}();function Ey(t){return(Ey="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ty(t){return function(t){if(Array.isArray(t))return Sy(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||xy(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wy(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||xy(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xy(t,e){if(t){if("string"==typeof t)return Sy(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sy(t,e):void 0}}function Sy(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Oy(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Py(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Oy(o,r,i,a,s,"next",t)}function s(t){Oy(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Ry(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ay(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Iy(t,e,n){return e=ky(e),function(t,e){if(e&&("object"===Ey(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],ky(t).constructor):e.apply(t,n))}function Cy(t,e,n){return(Cy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ky(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ky(t){return(ky=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ny(t,e){return(Ny=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function My(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?My(Object(n),!0).forEach((function(e){Dy(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):My(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Dy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ly=jy(jy({},Po.events),{},{LABEL_HIT:"label_hit"}),By=jy(jy({},Po.types),{},{MAX_WIN:"maxWin"}),Fy=function(t){function e(){return Ry(this,e),Iy(this,e,arguments)}var n,r,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ny(t,e)}(e,t),n=e,r=[{key:"playSum",value:(s=Py(regeneratorRuntime.mark((function t(){var n,r,i,o,a,s,u,c,l,h,f=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=f.length>0&&void 0!==f[0]?f[0]:{},r=n.value,i=n.anim,o=void 0===i?"show":i,a=n.shouldLoop,s=void 0!==a&&a,u=n.loopAnim,c=void 0===u?"loop":u,l=n.skipCoins,h=void 0!==l&&l,o.includes("hide")||this.type===e.types.NORMAL_WIN||h||this._activateCoins(this.type),t.next=4,Cy(ky(e.prototype),"playSum",this).call(this,{value:r,anim:o,shouldLoop:s,loopAnim:c});case 4:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"reset",value:function(){this._handleActiveCoins(),Cy(ky(e.prototype),"reset",this).call(this),this._particles=[]}},{key:"bangup",value:(a=Py(regeneratorRuntime.mark((function t(){var n,r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:{},t.next=3,Cy(ky(e.prototype),"bangup",this).call(this,n);case 3:(void 0===(r=n.stopCoins)||r)&&this.deactivateCoins();case 5:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"deactivateCoins",value:(o=Py(regeneratorRuntime.mark((function t(){var e,n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:"",n=this.winLabels[this.type],t.t0=n&&!n.paused,!t.t0){t.next=6;break}return t.next=6,n.promises.finish();case 6:return t.next=8,Promise.all(this._particles.filter((function(t){return t.name.includes(e)})).map(function(){var t=Py(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.isActive,!t.t0){t.next=5;break}return t.next=4,e.deactivate();case 4:t.t0=t.sent;case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 8:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"_init",value:function(t){Cy(ky(e.prototype),"_init",this).call(this,t),this._guide=t.particles.guide,this._sources=t.particles.source,this._coinsContainer=t.coinsContainer,this._particles=[]}},{key:"_createAnim",value:function(){Cy(ky(e.prototype),"_createAnim",this).call(this),this._createCoins(),this._addLabelHitListeners()}},{key:"_setUpAnimation",value:function(){this.anim.parent||(Cy(ky(e.prototype),"_setUpAnimation",this).call(this),this._createCoins())}},{key:"_onBangup",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._config.dynamicLabels,r=this.type;Cy(ky(e.prototype),"_onBangup",this).call(this,t,n);var i=this.getTypeBasedOnMultiplier(this.multiplier),o=e.types,a=o.TOTAL_WIN,s=o.JACKPOT_WIN,u=o.NORMAL_WIN;r!==a&&r!==s&&n&&![u,r].includes(i)&&this._activateCoins(i)}},{key:"_createCoins",value:function(){var t=this,e=this._config,n=e.coinsParticles,r=e.particlesSource;Object.entries(n).forEach((function(e){var n,i=wy(e,2),o=i[0],a=i[1],s=r[o].map((function(e){return t._sources[e]})),u=t._guide||(null===(n=t.winLabels)||void 0===n?void 0:n.coinsGuide),c=new co({source:s,guide:u,config:a});c.name=o,t.winLabels.coinsContainer.addChild(c),t._particles.push(c)}))}},{key:"_activateCoins",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t===e.types.MAX_WIN&&(t=e.types.MEGA_WIN),this._particles.filter((function(e){return e.name.includes(t)})).forEach((function(t){return!t.isActive&&t.activate()})),this._activatePreviousLabelsCoins(t)}},{key:"_handleActiveCoins",value:function(){var t,e=this;this._particles.length&&((t=this._coinsContainer).addChild.apply(t,Ty(this._particles)),this._particles.forEach(function(){var t=Py(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n.isActive,!t.t0){t.next=4;break}return t.next=4,n.deactivate();case 4:e._coinsContainer.removeChild(n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}},{key:"_activatePreviousLabelsCoins",value:function(t){var n=[e.types.BIG_WIN,e.types.SUPER_WIN,e.types.MEGA_WIN],r=n.indexOf(t);if(!(r<=0)){var i=n.slice(0,r);this._particles.filter((function(t){return i.find((function(e){return t.name.includes(e)}))})).forEach((function(t){return!t.isActive&&t.activate()}))}}},{key:"_addLabelHitListeners",value:function(){var t=this;this.anim.winLabels.megaWin.on("MEGA_WIN_HIT",(function(){return t.emit(e.events.LABEL_HIT,{type:"megaWin"})})),this.anim.winLabels.superWin.on("SUPER_WIN_HIT",(function(){return t.emit(e.events.LABEL_HIT,{type:"superWin"})})),this.anim.winLabels.bigWin.on("BIG_WIN_HIT",(function(){return t.emit(e.events.LABEL_HIT,{type:"bigWin"})})),this.anim.winLabels.totalWin.on("TOTAL_WIN_HIT",(function(){return t.emit(e.events.LABEL_HIT,{type:"totalWin"})}))}}],i=[{key:"events",get:function(){return Ly}},{key:"types",get:function(){return By}}],r&&Ay(n.prototype,r),i&&Ay(n,i),e}(Po);function Uy(t){return(Uy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gy(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Hy(t){return function(t){if(Array.isArray(t))return Vy(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Vy(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vy(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vy(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wy(t,e,n){return e=zy(e),function(t,e){if(e&&("object"===Uy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],zy(t).constructor):e.apply(t,n))}function Yy(t,e,n){return(Yy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zy(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function zy(t){return(zy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qy(t,e){return(qy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ky(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ky(Object(n),!0).forEach((function(e){$y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ky(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Jy=Zy(Zy({},sl.events),{},{BANGUP_END:"bangup_end"}),Qy="counter_bangup_end",tm=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Wy(this,e,[t]))._fitBounds=n._counterMc.numContainer.inner.getLocalBounds(),n._particlesContainer=new o.Container,n._particles=[],n.addChild(n._particlesContainer),n._counter.on(Qy,(function(t){return n.emit(e.events.BANGUP_END,t)})),n}var n,i,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qy(t,e)}(e,t),n=e,a=[{key:"events",get:function(){return Jy}}],(i=[{key:"activate",value:function(t){var n=t.value,r=t.stake,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n>r?this._calcBangupDuration({value:n,stake:r}):0,a=Yy(zy(e.prototype),"activate",this).call(this,{value:n,stake:r},Zy({duration:o},i));return this._activateParticles(Zy({duration:o},i)),a}},{key:"deactivate",value:function(){return this._handleActiveCoins(),Yy(zy(e.prototype),"deactivate",this).call(this)}},{key:"skip",value:function(){this._particles.forEach((function(t){return t.deactivate()})),Yy(zy(e.prototype),"skip",this).call(this)}},{key:"_onSumUpdate",value:function(t,e){var n=e.fitBounds,i=e.ignoreRatio,o=e.overscale;Object(r.e)(this._counter,{width:n.width||this._fitBounds.width,height:n.height||this._fitBounds.height},i,o)}},{key:"_activateParticles",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.duration,n=void 0===e?0:e,r=(new qt.a.CenterWinBar.emitterGuide).guide,i=qt.a.ExtraWin.extraWinCoin,o=this._config,a=o.particles,s=o.burstParticles,u=o.burstDuration,c=n?a:s,l=new co({guide:r,source:i,config:c});this.anim.particlesContainer.addChild(l),this._particles.push(l),l.activate({duration:n||u})}},{key:"_handleActiveCoins",value:function(){var t,e=this;this._particles.length&&((t=this._particlesContainer).addChild.apply(t,Hy(this._particles)),this._particles.forEach(function(){var t,n=(t=regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n.isActive,!t.t0){t.next=4;break}return t.next=4,n.deactivate();case 4:e._particlesContainer.removeChild(n);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Gy(o,r,i,a,s,"next",t)}function s(t){Gy(o,r,i,a,s,"throw",t)}a(void 0)}))});return function(t){return n.apply(this,arguments)}}()),this._particles=[])}}])&&Xy(n.prototype,i),a&&Xy(n,a),e}(sl);function em(t){return(em="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rm(t,e){if(e&&("object"===em(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function im(t,e,n){return(im="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=om(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function om(t){return(om=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function am(t,e){return(am=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var sm=function(t){function e(t){var n,r=t.scenes,i=t.name,o=t.config,a=t.mask;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e,n){return e=om(e),rm(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],om(t).constructor):e.apply(t,n))}(this,e,[{scenes:r,name:i,config:o,mask:a}]))._config.types.length<=1?rm(n):(n._config.types.slice(1).forEach((function(t){return n._createEffect(t,!0)})),n)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&am(t,e)}(e,t),n=e,(r=[{key:"_createEffect",value:function(t,n){var r=!this._effects[t],i=im(om(e.prototype),"_createEffect",this).call(this,t,n);return r&&Object(a.a)(i),i}}])&&nm(n.prototype,r),i&&nm(n,i),e}(Ju),um=n("./src/core/utils/AsyncAction.js");function cm(t){return(cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lm(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function hm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pm(t,e,n){return e=dm(e),function(t,e){if(e&&("object"===cm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],dm(t).constructor):e.apply(t,n))}function dm(t){return(dm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ym(t,e){return(ym=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function mm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mm(Object(n),!0).forEach((function(e){_m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var gm=vm(vm({},E.animLabels),{},{LOOP:"loop"}),bm="label_end",Em=function(t){function e(){return hm(this,e),pm(this,e,arguments)}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ym(t,e)}(e,t),n=e,r=[{key:"finish",value:(o=regeneratorRuntime.mark((function t(){var n,r,i,o,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.length>0&&void 0!==a[0]?a[0]:{},!(this._anim.paused||null!==(n=this._anim.currentLabel)&&void 0!==n&&n.toLowerCase().includes(e.animLabels.LOOP))){t.next=3;break}return t.abrupt("return");case 3:return i=r.stopTickChildren,o=void 0===i||i,t.next=6,this._waitLabelEnd(o);case 6:o&&this._anim.stopTick(!0);case 7:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){lm(i,n,r,a,s,"next",t)}function s(t){lm(i,n,r,a,s,"throw",t)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"_waitLabelEnd",value:function(t){var e=new um.a;return this._anim.once(bm,(function(){return e.complete()})),t&&this._anim.stop(),e.wait()}}],i=[{key:"animLabels",get:function(){return gm}}],r&&fm(n.prototype,r),i&&fm(n,i),e}(E),Tm=n("./node_modules/@games/gsap/index.js");function wm(t){return(wm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var xm=["containers"],Sm=["skipRemove"];function Om(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||Rm(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pm(t){return function(t){if(Array.isArray(t))return Am(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Rm(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rm(t,e){if(t){if("string"==typeof t)return Am(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Am(t,e):void 0}}function Am(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Im(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Cm(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Im(o,r,i,a,s,"next",t)}function s(t){Im(o,r,i,a,s,"throw",t)}a(void 0)}))}}function km(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Nm(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mm(t,e,n){return e=Lm(e),function(t,e){if(e&&("object"===wm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jm(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Lm(t).constructor):e.apply(t,n))}function jm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dm(t,e,n){return(Dm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lm(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Lm(t){return(Lm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bm(t,e){return(Bm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Fm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Um(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fm(Object(n),!0).forEach((function(e){Gm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Gm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Hm=Um(Um({},E.animLabels),{},{LOOP:"loop",WIN:"win",WIN_SHOW:"winShow",WIN_LOOP:"winLoop"}),Vm=function(t){function e(t){var n,r=t.containers,i=void 0===r?{}:r,o=km(t,xm);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Mm(this,e,[o]))._containers=Um({main:jm(n)},i),n}var n,i,o,a,s,u,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bm(t,e)}(e,t),n=e,i=[{key:"allChildren",get:function(){return Object.values(this._containers).reduce((function(t,e){return t.concat(e.children)}),[])}},{key:"positions",get:function(){return this.allChildren.map((function(t){return{reel:t.reel,index:t.index,tileId:t.tileId}}))}},{key:"tileIds",get:function(){return this._config.tileIds||[].concat(this._config.tileId).filter(Number.isFinite)}},{key:"activate",value:(c=Cm(regeneratorRuntime.mark((function t(n){var r,i=this,o=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},n){t.next=3;break}throw new Error('"'.concat(this.name,'" ==> No activation data provided!'));case 3:return this.isActive=!0,this.visible=!0,this.emit(e.events.ACTIVATE_START,r),t.next=8,Promise.all([].concat(n).map((function(t){return i._addCover(t,r)})));case 8:this.emit(e.events.ACTIVATE_END,r);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"deactivate",value:(u=Cm(regeneratorRuntime.mark((function t(n){var r,i,o,a,s=this,u=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},i=r.skipRemove,o=void 0!==i&&i,a=km(r,Sm),t.abrupt("return",Dm(Lm(e.prototype),"deactivate",this).call(this,n,Um(Um({},a),{},{removeAtEnd:!1})).then((function(){return!o&&s.remove(n,a)})));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"getContainerPositions",value:function(t){var e;return(null===(e=this._containers[t])||void 0===e?void 0:e.children.map((function(t){return{reel:t.reel,index:t.index,tileId:t.tileId}})))||[]}},{key:"moveToContainer",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this._config.sortChildren,i=null===(e=this._containers)||void 0===e?void 0:e[t];if(i&&i.children.length!==this.allChildren.length){var o=[].concat(n),a=Object.values(this._containers).reduce((function(t,e){return t.concat(e.children)}),[]).filter((function(t){var e=t.reel,n=t.index;return!o.length||o.some((function(t){return t.reel===e&&t.index===n}))}));a.forEach((function(t){return i.addChild(t)})),r&&this.sortAllChildren(r)}}},{key:"onShowStart",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.reel,a=r.index,s=r.tileId,u=i.skipTileReplace,c=void 0===u?this._config.skipTileReplace:u,l=i.sortChildren,h=void 0===l?this._config.sortChildren:l,f=i.skipTileAddEmit,p=void 0!==f&&f,d=i.container,y=void 0===d?"":d,m=i.replaceOptions,v=void 0===m?{}:m,_=v.id,g=void 0===_?0:_,b=v.force,E=void 0!==b&&b,T=v.type,w=v.heightIndex,x=i.payload,S=void 0===x?{}:x;y&&this._containers[y].addChild(t),!c&&this._reelMaster.replaceTile(a,g,o,E,T||w),h&&this.sortAllChildren(h),!p&&this.emit(e.events.TILE_ADD,Um({reel:o,index:a,tileId:s,total:this.allChildren.length,animLabel:n},S))}},{key:"onShowEnd",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.skipLoop,a=void 0===o?this._config.skipLoop:o;!a&&this.play(e.animLabels.LOOP,r,{repeat:-1})}},{key:"onPlayStart",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.sortChildren,i=void 0===r?this._config.sortChildren:r;i&&this.sortAllChildren(i)}},{key:"onDestroyed",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.skipTileReplace,i=void 0===r?this._config.skipTileReplace:r,o=n.replaceParams,a=void 0===o?[]:o;!i&&(e=this._reelMaster).replaceTile.apply(e,[t.index,t.tileId,t.reel].concat(Pm(a)))}},{key:"getCovers",value:function(t){var e=this;return t?[].concat(t).map((function(t){var n=t.reel,r=t.index;return e._getCoverOnPos({reel:n,index:r})})).filter(Boolean):Pm(this.allChildren)}},{key:"finish",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.waitLabel;return i?this._exec(t,(function(t){return n._finishLabel(t,i,r)})):Dm(Lm(e.prototype),"finish",this).call(this,t,r)}},{key:"sortAllChildren",value:function(t){Object.values(this._containers).forEach((function(e){return e.children.sort((function(e,n){return Object.entries(function(t){return"string"==typeof t?{reel:t,index:t}:t}(t)).map((function(t){var r=Om(t,2),i=r[0],o=r[1];return(e[i]-n[i]||0)*function(t){return"ascending"===t?1:"descending"===t?-1:0}(o)})).find((function(t){return 0!==t}))||0}))}))}},{key:"_create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this._getCoverOnPos(t);return!e.force&&n||(n=this._createCover(t,Object(r.c)(this._sourceData,e),e),this._setUpCover(n,t,e),this.onCreated(n,t,e)),this._useRenderTexture&&n.applyTexture(this._createRenderTexture(t,null,e)),n}},{key:"_setUpCover",value:function(t,e,n){var r,i=e.reel,o=e.index,a=void 0===o?0:o,s=e.width,u=void 0===s?1:s,c=e.height,l=void 0===c?1:c,h=n.isReelsSpinning,f=void 0!==h&&h,p=n.attachToReels,d=void 0===p?this._config.attachable:p;t.name="".concat(this.name,"Cover").concat(a,"x").concat(i),t.reel=i,t.index=a,t.attached=d,t.size={width:u,height:l};var y=f?this._calcMovingCoverPosition(e,n):this._calcCoverPosition(e);(r=t.position).set.apply(r,Pm(y))}},{key:"_calcMovingCoverPosition",value:function(t){var e=t.reel,n=t.index,r=void 0===n?0:n,i=this._reelMaster.reels[e],o=i.tileHeight,a=i.buffer,s=i.offset,u=this._reelMaster.getTilePosition({reel:e,index:r});return[u.x,u.y-(a.distance*o+s)]}},{key:"_finishLabel",value:(s=Cm(regeneratorRuntime.mark((function t(e,n){var r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=i.length>2&&void 0!==i[2]?i[2]:{},e.anim.currentLabel===n){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.finish(r);case 5:case"end":return t.stop()}}),t)}))),function(t,e){return s.apply(this,arguments)})},{key:"_getCoverOnPos",value:function(t){var e=t.reel,n=t.index,r=void 0===n?0:n;return this.allChildren.find((function(t){return t.reel===e&&t.index===r}))}},{key:"_destroyCover",value:(a=Cm(regeneratorRuntime.mark((function t(n){var i,o,a,s,u,c,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=l.length>1&&void 0!==l[1]?l[1]:{},o=Object(r.c)(this._config,i),a=o.fadeOut,s=void 0!==a&&a,u=o.fadeOutTweenOptions,c=void 0===u?{}:u,t.t0=s,!t.t0){t.next=6;break}return t.next=6,Tm.b.to(n,Um({alpha:0,duration:.2},c));case 6:Dm(Lm(e.prototype),"_destroyCover",this).call(this,n,i);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"_reset",value:function(){this.allChildren.length||(this.isActive=!1,this.visible=!1,this._rtCache={})}}],o=[{key:"animLabels",get:function(){return Hm}}],i&&Nm(n.prototype,i),o&&Nm(n,o),e}(da);function Xm(t){return(Xm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ym(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wm(Object(n),!0).forEach((function(e){zm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function zm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Km(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zm(t,e,n){return e=$m(e),function(t,e){if(e&&("object"===Xm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],$m(t).constructor):e.apply(t,n))}function $m(t){return($m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jm(t,e){return(Jm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qm(t){return(Qm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ev(t,e,n){return e=rv(e),function(t,e){if(e&&("object"===Qm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],rv(t).constructor):e.apply(t,n))}function nv(t,e,n){return(nv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rv(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function rv(t){return(rv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iv(t,e){return(iv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ov=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ev(this,e,[t]))._initialReelMasterPositions=n._reelMaster.reels.map((function(t){return{x:t.x,y:t.y}})),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&iv(t,e)}(e,t),n=e,(r=[{key:"createInitial",value:function(){for(var t=0;t<Gn.a.reels.count;t++){var e=this._getMatchingData({index:t});this.activate(e,{attachToReels:!0,skipTileAddEmit:!0})}}},{key:"replaceTiles",value:function(){var t=this;this.allChildren.forEach((function(e){var n=e.reel,r=e.index;return t._reelMaster.replaceTile(r,0,n,!1)}))}},{key:"_createCover",value:function(t,n,r){var i=n.cover,o=void 0===i?E:i,a=n.animation,s=n.animations,u=n.config,c=n.mask,l=t.reel,h=t.height,f=t.tileId,p=h||this._reelMaster.reels[l].currentSize;return nv(rv(e.prototype),"_createCover",this).call(this,t,{cover:o,animation:a||s["popupTile".concat(f,"x").concat(p)],config:u,mask:c},r)}},{key:"_updateCoverPosition",value:function(t,e){t.y+=e}},{key:"_calcMovingCoverPosition",value:function(t,n){var r=t.reel,i=t.index,o=void 0===i?0:i,a=t.height;return n.isStatic?this._getPosition({reel:r,index:o,height:a}):nv(rv(e.prototype),"_calcMovingCoverPosition",this).call(this,{reel:r,index:o,height:a})}},{key:"_getPosition",value:function(t){var e=t.reel,n=t.index,r=void 0===n?0:n,i=t.height,o=this._initialReelMasterPositions[e];return[o.x,o.y+r*this._reelMaster.tileGuide[i].height]}}])&&tv(n.prototype,r),i&&tv(n,i),e}(function(t){function e(){return qm(this,e),Zm(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jm(t,e)}(e,t),n=e,(r=[{key:"onCascadeSingleEnd",value:function(t){var e=t.position,n=t.id,r=this._getCoverOnPos(e);if(this.tileIds.includes(n)&&r){var i=e.to,o=this._reelMaster.getTileCoords({reel:i.reel,index:i.index}),a=o.y,s=o.x;r.index=i.index,r.reel=i.reel,r.position.set(s,a)}}},{key:"onCascadeSingleEnding",value:function(t){var e=t.position,n=e.reel,r=e.index,i=t.id,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.tileIds.includes(i)&&this.activate({reel:n,index:r,tileId:i},Ym({attachToReels:this._config.attachable},o))}},{key:"onCascadeSingleUpdate",value:function(t){var e=t.position,n=e.reel,r=e.index,i=t.cover,o=this._getCoverOnPos({reel:n,index:r});if(o&&this.tileIds.includes(o.tileId)){var a=i.position,s=a.x,u=a.y;o.position.set(s,u)}}},{key:"onCascadeSingleStart",value:function(t){var n=t.position,r=n.reel,i=n.index,o=t.id,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.tileIds.includes(o)&&this.activate({reel:r,index:i,tileId:o},Ym({animLabel:e.animLabels.INIT,attachToReels:this._config.attachable,skipTileAddEmit:!0,skipLoop:!0},a))}}])&&Km(n.prototype,r),i&&Km(n,i),e}(Vm));function av(t){return(av="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var sv=["skipReel"];function uv(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function cv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cv(Object(n),!0).forEach((function(e){hv(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function hv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fv(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function pv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yv(t,e,n){return e=vv(e),function(t,e){if(e&&("object"===av(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],vv(t).constructor):e.apply(t,n))}function mv(t,e,n){return(mv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vv(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function vv(t){return(vv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _v(t,e){return(_v=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gv=function(t){function e(){return pv(this,e),yv(this,e,arguments)}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_v(t,e)}(e,t),n=e,(r=[{key:"onShowStart",value:(o=regeneratorRuntime.mark((function t(n,r,i,o){var a,s,u,c,l,h,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=i.reel,s=i.index,u=i.tileId,c=void 0===u?this._config.tileId:u,l=i.screen,h=void 0===l||l,mv(vv(e.prototype),"onShowStart",this).call(this,n,r,lv(lv({},i),{},{tileId:c}),lv(lv({},o),{},{skipTileReplace:!0,payload:{screen:h}})),f=this._reelMaster.reels[n.reel].tiles[n.index]){t.next=5;break}return t.abrupt("return");case 5:if(h){t.next=8;break}return t.next=8,w.b.to(f,this._config.spawnTween);case 8:this._reelMaster.replaceTile(s,0,a,!1),f.alpha=1;case 10:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){fv(i,n,r,a,s,"next",t)}function s(t){fv(i,n,r,a,s,"throw",t)}a(void 0)}))},function(t,e,n,r){return a.apply(this,arguments)})},{key:"onDestroyed",value:function(t,n){var r=n.skipReel,i=uv(n,sv);r&&t.reel===r||mv(vv(e.prototype),"onDestroyed",this).call(this,t,i)}}])&&dv(n.prototype,r),i&&dv(n,i),e}(ov);function bv(t){return(bv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ev(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Tv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ev(Object(n),!0).forEach((function(e){wv(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ev(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function wv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xv(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Sv(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){xv(o,r,i,a,s,"next",t)}function s(t){xv(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Ov(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rv(t,e,n){return e=Av(e),function(t,e){if(e&&("object"===bv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Av(t).constructor):e.apply(t,n))}function Av(t){return(Av=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Iv(t,e){return(Iv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Cv={WIN:"win",LOOP:"loop"},kv=function(t){function e(){return Ov(this,e),Rv(this,e,arguments)}var n,r,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Iv(t,e)}(e,t),n=e,r=[{key:"activate",value:(s=Sv(regeneratorRuntime.mark((function t(){var n,r,i,o,a,s=this,u=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=u.length>0&&void 0!==u[0]?u[0]:[],r=e.animLabels,i=r.WIN,o=r.LOOP,!(a=n.filter((function(t){return!t.screen}))).length){t.next=9;break}return t.next=6,Object(as.c)(this._config.delays.spawn.beforeShow);case 6:return this.prepareScene(),t.next=9,this._spawnTiles(a);case 9:return t.next=11,this._features.jackpotPopupTiles.finish(null,{stopTickChildren:!1});case 11:if(this._features.jackpotPopupTiles.play(i).then((function(){return s._features.jackpotPopupTiles.play(o,null,{repeat:-1})})),n.length===this._config.winTilesThreshold&&this._playSiren(),!this._features.fade.isPlaying){t.next=16;break}return t.next=16,this._features.fade.finish({stopTickChildren:!1});case 16:return a.length||this.prepareScene(),t.next=19,this._features.fade.show();case 19:Object(as.c)(this._config.delays.deactivate).then((function(){s._features.jackpotPopupTiles.deactivate(null,{skipRemove:!0}).then((function(){return s._features.jackpotPopupTiles.remove(s._features.fatTiles.getTilesArea(),{silent:!0})})),s._features.fade.hide()}));case 20:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"prepareScene",value:function(){this._features.jackpotPopupTiles.moveToContainer("main"),this._features.beerPopupTiles.moveToContainer("below"),this._features.fairyPopupTiles.moveToContainer("below"),this._features.freeSpinsPopupTiles.moveToContainer("below"),this._features.fatTiles.moveToContainer("below"),this._features.seniorPopupTiles.remove()}},{key:"_addTileToReel",value:(a=Sv(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this._config.labels.tileWin,t.abrupt("return",this._features.jackpotPopupTiles.activate(e,{animLabel:n,attachToReels:!0}));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"_spawnTiles",value:(o=Sv(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=a.length>0&&void 0!==a[0]?a[0]:[],n=this._config.delays.spawn.betweenTiles,r=0;case 3:if(!(r<e.length)){t.next=16;break}if(i=e[r],0===r){t.next=8;break}return t.next=8,Object(as.c)(n);case 8:o={silent:!0,fadeOut:!0},this._features.fairyPopupTiles.remove(i,o),this._features.beerPopupTiles.remove(i,o),this._features.wildPopupTiles.remove(i,o),this._addTileToReel(Tv(Tv({},i),{},{tileId:this._config.tileId}));case 13:r++,t.next=3;break;case 16:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],i=[{key:"animLabels",get:function(){return Cv}}],r&&Pv(n.prototype,r),i&&Pv(n,i),e}(Oa);function Nv(t){return(Nv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dv(t,e,n){return e=Bv(e),function(t,e){if(e&&("object"===Nv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Bv(t).constructor):e.apply(t,n))}function Lv(t,e,n){return(Lv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bv(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Bv(t){return(Bv=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fv(t,e){return(Fv=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Uv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Gv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Uv(Object(n),!0).forEach((function(e){Hv(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Hv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Vv=Gv(Gv({},ov.events),{},{PARTICLES_BURST_START:"particles_burst_start"}),Xv="coins",Wv=function(t){function e(){return Mv(this,e),Dv(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fv(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return Vv}}],(r=[{key:"onCreated",value:function(t,n,r){var i=this;Lv(Bv(e.prototype),"onCreated",this).call(this,t,n,r),t.anim.once(Xv,(function(){return i.emit(e.events.PARTICLES_BURST_START,{cover:t})}))}}])&&jv(n.prototype,r),i&&jv(n,i),e}(ov);function Yv(t){return(Yv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zv(Object(n),!0).forEach((function(e){Kv(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Kv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zv(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function $v(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Zv(o,r,i,a,s,"next",t)}function s(t){Zv(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Jv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qv(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function t_(t,e,n){return e=n_(e),function(t,e){if(e&&("object"===Yv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],n_(t).constructor):e.apply(t,n))}function e_(t,e,n){return(e_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function n_(t){return(n_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r_(t,e){return(r_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var i_=function(t){function e(){return Jv(this,e),t_(this,e,arguments)}var n,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r_(t,e)}(e,t),n=e,(i=[{key:"onShowEnd",value:function(t,n,r,i){t.anim.paused&&e_(n_(e.prototype),"onShowEnd",this).call(this,t,n,r,i)}},{key:"playMultiplier",value:(s=$v(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._exec(null,(function(t){return t.playMultiplier(e,n)})));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return s.apply(this,arguments)})},{key:"finishMultiplier",value:(a=$v(regeneratorRuntime.mark((function t(){var e,n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},n=e.waitLabel,t.abrupt("return",this._exec(null,(function(t){return t.finishMultiplier(n)})));case 3:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"getTilesArea",value:function(){var t=this;return this.allChildren.map((function(e){var n=e.reel;return Object(r.k)(t._config.visibleTiles).map((function(t){return{reel:n,index:t}}))})).flat()}},{key:"replaceTilesArea",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.allChildren.filter((function(t){return!e.some((function(e){return t.reel===e.reel}))})).forEach((function(e){var n=e.reel,r=e.index,i=e.size.height;return t._replaceTileArea({reel:n,index:r,height:i})}))}},{key:"_replaceTileArea",value:function(t){var e=t.reel,n=t.index,r=t.height;this._reelMaster.replaceTilesArea(qv({index:e,offset:n,height:r},this._config.replaceArea))}},{key:"_createCover",value:function(t,e,n){var r=e.cover,i=void 0===r?E:r,o=e.animations,a=e.spineAnimations,s=e.config,u=void 0===s?this._config:s,c=e.mask,l=t.height,h=t.tileId;return new i({animation:o["fatTile".concat(h)],config:u,mask:c,data:qv(qv({},t),{},{multiplier:l,spineAnimations:a}),options:n})}}])&&Qv(n.prototype,i),o&&Qv(n,o),e}(Wv);function o_(t){return(o_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a_(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function s_(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){a_(o,r,i,a,s,"next",t)}function s(t){a_(o,r,i,a,s,"throw",t)}a(void 0)}))}}function u_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c_(t,e,n){return e=l_(e),function(t,e){if(e&&("object"===o_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],l_(t).constructor):e.apply(t,n))}function l_(t){return(l_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h_(t,e){return(h_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p_(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f_(Object(n),!0).forEach((function(e){d_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var y_=p_(p_({},E.animLabels),{},{LOOP:"loop"}),m_=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=c_(this,e,[t]))._fitBounds=null,n._counter=null,n._createCounter(),n}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h_(t,e)}(e,t),n=e,r=[{key:"currentCount",get:function(){return this._counter.currentCount},set:function(t){this._counter.currentCount=t}},{key:"playMultiplier",value:(a=s_(regeneratorRuntime.mark((function t(e){var n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},t.abrupt("return",this.anim.multiplier.promises.gotoAndPlay(e,n));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"finishMultiplier",value:(o=s_(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.anim.multiplier.paused||e&&this.anim.multiplier.currentLabel!==e)){t.next=2;break}return t.abrupt("return");case 2:return t.abrupt("return",this.anim.multiplier.promises.finish());case 3:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"_setupCover",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.skipLoop,r=void 0!==n&&n,i=t.animLabel;this.anim.promises.gotoAndStop(i),this.addChild(this._anim),!r&&this.play(e.animLabels.LOOP,{repeat:-1})}},{key:"_createCounter",value:function(){var t=this.anim.multiplier.numContainer;this._fitBounds||(this._fitBounds=t.getLocalBounds()),this._counter=new k({config:p_({fontSize:this._fitBounds.height},this._config.counter)}),t.removeChildren(),t.addChild(this._counter),this._counter.currentCount=this._data.multiplier}}],i=[{key:"animLabels",get:function(){return y_}}],r&&u_(n.prototype,r),i&&u_(n,i),e}(E);function v_(t){return(v_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var __=["fatTiles"];function g_(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function b_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E_(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b_(Object(n),!0).forEach((function(e){T_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T_(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function x_(t,e,n){return e=O_(e),function(t,e){if(e&&("object"===v_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],O_(t).constructor):e.apply(t,n))}function S_(t,e,n){return(S_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=O_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function O_(t){return(O_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function P_(t,e){return(P_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var R_=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=x_(this,e,[t]))._initialCount=0,n._originY=n._anim.y,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&P_(t,e)}(e,t),n=e,(r=[{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._initialCount,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return S_(O_(e.prototype),"show",this).call(this,t,E_({playAnim:!1},n))}},{key:"update",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._initialCount=t,S_(O_(e.prototype),"update",this).call(this,t,n)}},{key:"observeReels",value:function(t,e){var n=this,r=e.fatTiles,i=g_(e,__),o=this._config.activationEvent||vt.a.events.ANIMATION_SPIN_ENDING;this._reelMaster.onceReels(o,(function(e){var o=e.reel;return!r.some((function(t){return t.reel===o.index}))&&n.update(t[o.index],i)}),!0)}},{key:"lowerCounterPos",value:function(){var t=this._config.tweens.move,e=t.offsetY,n=t.ease,r=t.duration;Tm.b.to(this._anim,{y:this._originY+e,ease:n,duration:r})}},{key:"resetCounterPos",value:function(){Tm.b.to(this._anim,E_({y:this._originY},this._config.tweens.reset))}}])&&w_(n.prototype,r),i&&w_(n,i),e}(wu);function A_(t){return(A_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function I_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function k_(t,e,n){return e=M_(e),function(t,e){if(e&&("object"===A_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],M_(t).constructor):e.apply(t,n))}function N_(t,e,n){return(N_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=M_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function M_(t){return(M_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j_(t,e){return(j_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var D_=function(t){function e(){return I_(this,e),k_(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j_(t,e)}(e,t),n=e,(r=[{key:"onCreated",value:function(t,n,r){N_(M_(e.prototype),"onCreated",this).call(this,t,n,r);var i=n.height;i&&(t.anim.anticipationInner.anticipationCloudsDown.y=i)}}])&&C_(n.prototype,r),i&&C_(n,i),e}(Ur);function L_(t){return(L_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U_(t,e,n){return e=H_(e),function(t,e){if(e&&("object"===L_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],H_(t).constructor):e.apply(t,n))}function G_(t,e,n){return(G_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=H_(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function H_(t){return(H_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function V_(t,e){return(V_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var X_=function(t){function e(){return B_(this,e),U_(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&V_(t,e)}(e,t),n=e,(r=[{key:"onCreated",value:function(t,n,r){G_(H_(e.prototype),"onCreated",this).call(this,t,n,r),this._setMask(t,n.height)}},{key:"_setMask",value:function(t,e){var n=this._createMask(t.anim.width,e);t.anim.mask=n,t.anim.addChild(n)}},{key:"_createMask",value:function(t,e){return(new o.Graphics).beginFill(0).drawRect(0,0,t,e)}}])&&F_(n.prototype,r),i&&F_(n,i),e}(Ur);function W_(t){return(W_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y_(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function z_(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Y_(o,r,i,a,s,"next",t)}function s(t){Y_(o,r,i,a,s,"throw",t)}a(void 0)}))}}function q_(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function K_(t,e,n){return e=Z_(e),function(t,e){if(e&&("object"===W_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Z_(t).constructor):e.apply(t,n))}function Z_(t){return(Z_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $_(t,e){return($_=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var J_={START:"start",FINISH:"finish"},Q_=function(t){function e(t){var n,r=t.config,i=t.name,o=t.anticipation,a=t.anticipationBg,s=t.reelMaster;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=K_(this,e)).name=i,n.activeReels=[],n._defaultConfig=r,n._config=r,n._anticipation=o,n._anticipationBg=a,n._isActive=!1,n._reelMaster=s,n._hidingReels=[],n}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$_(t,e)}(e,t),n=e,r=[{key:"isActive",get:function(){return this._isActive}},{key:"activate",value:(a=z_(regeneratorRuntime.mark((function t(n,r){var i,o,a,s,u,c,l,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this._config,o=i.minTiles,a=i.maxTiles,s=i.skipReels,u=void 0===s?[]:s,c=i.unique,l=void 0===c?[]:c,h=this._generatePositions(r).filter((function(t){var e=t.reel;return!u.includes(e)&&!r[e].some((function(t){return l.includes(t)}))})),!(n<o||n>=a)&&h.length){t.next=4;break}return t.abrupt("return");case 4:return this.emit(e.events.START),this._isActive=!0,this.activeReels=h.map((function(t){return t.reel})),t.abrupt("return",Promise.all([this._anticipation.activate(h),this._anticipationBg.activate(h)]));case 8:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"deactivate",value:(o=z_(regeneratorRuntime.mark((function t(){var n,r,i,o,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.length>0&&void 0!==a[0]?a[0]:null,r=this._config.skipReels,i=void 0===r?[]:r,o=(n||{}).reel,!i.includes(o)&&!this._hidingReels.includes(o)&&this._isActive){t.next=5;break}return t.abrupt("return");case 5:return this._hidingReels.push(o),this._isLastActiveReel(o)&&this.emit(e.events.FINISH),t.next=9,Promise.all([this._anticipation.deactivate(n),this._anticipationBg.deactivate(n)]);case 9:this._isActive=!1,this._hidingReels=this._hidingReels.filter((function(t){return t!==o}));case 11:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"preconfig",value:function(t){this._config=Object(uu.a)(this._config,t)}},{key:"reset",value:function(){this._config=this._defaultConfig,this.activeReels=[]}},{key:"_isLastActiveReel",value:function(t){var e=this._anticipation.children;return e[e.length-1].reel===t}},{key:"_generatePositions",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return e.forEach((function(e,r){var i=e.filter((function(t){return null===t})).length;if(i){var o=t._reelMaster.reels[r].currentSize,a=t._reelMaster.tileGuide[o].height;n.push({reel:r,height:i*a})}})),n}}],i=[{key:"events",get:function(){return J_}}],r&&q_(n.prototype,r),i&&q_(n,i),e}(Hn.EventEmitter);function tg(t){return(tg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var eg=["reelMaster"];function ng(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function rg(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ig(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function og(t,e,n){return e=sg(e),function(t,e){if(e&&("object"===tg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],sg(t).constructor):e.apply(t,n))}function ag(t,e,n){return(ag="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sg(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function sg(t){return(sg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ug(t,e){return(ug=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var cg=function(t){function e(t){var n,r=t.reelMaster,i=rg(t,eg);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=og(this,e,[i]))._reelMaster=r,n._guide=null,n.alpha=n._config.alpha,n}var n,r,i,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ug(t,e)}(e,t),n=e,(r=[{key:"show",value:(a=regeneratorRuntime.mark((function t(){var n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=r.length>0&&void 0!==r[0]?r[0]:{},this._redrawMask(n.reelIndex),ag(sg(e.prototype),"show",this).call(this,n);case 3:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=a.apply(t,e);function o(t){ng(i,n,r,o,s,"next",t)}function s(t){ng(i,n,r,o,s,"throw",t)}o(void 0)}))},function(){return s.apply(this,arguments)})},{key:"_redrawMask",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this._reelMaster.getReelBounds(0),n=e.width,r=e.height,i=this._reelMaster.getTilePosition({reel:0,index:0}),a=i.x,s=i.y;this.removeChild(this._guide),this._guide=(new o.Graphics).beginFill(16449791).drawRect(a,s,n*t,r),this.addChild(this._guide),this.mask=this._guide}}])&&ig(n.prototype,r),i&&ig(n,i),e}(E);function lg(t){return(lg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var hg=["loopAtEnd"];function fg(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function pg(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function dg(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){pg(o,r,i,a,s,"next",t)}function s(t){pg(o,r,i,a,s,"throw",t)}a(void 0)}))}}function yg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vg(t,e,n){return e=gg(e),function(t,e){if(e&&("object"===lg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],gg(t).constructor):e.apply(t,n))}function _g(t,e,n){return(_g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gg(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function gg(t){return(gg=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bg(t,e){return(bg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Eg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Tg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Eg(Object(n),!0).forEach((function(e){wg(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Eg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function wg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xg=Tg(Tg({},E.animLabels),{},{LOOP:"loop",SHOW_PICKED_START:"showPickedStart",SHOW_PICKED_END:"showPickedEnd"}),Sg=function(t){function e(){return yg(this,e),vg(this,e,arguments)}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bg(t,e)}(e,t),n=e,r=[{key:"trailStartingPosition",get:function(){return this.anim.marker.position.clone()}},{key:"play",value:(a=dg(regeneratorRuntime.mark((function t(n){var r,i,o,a,s,u=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},i=r.loopAtEnd,o=void 0!==i&&i,a=fg(r,hg),s=e.animLabels.LOOP,t.next=5,_g(gg(e.prototype),"play",this).call(this,n,a);case 5:o&&this.anim.promises.gotoAndPlay(s,{repeat:-1});case 6:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"finish",value:(o=dg(regeneratorRuntime.mark((function t(n){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this._config.framerate,i=this.anim.currentLabel,!n||i===n){t.next=4;break}return t.abrupt("return",Promise.resolve());case 4:return this.anim.framerate=r.skip,t.next=7,_g(gg(e.prototype),"finish",this).call(this);case 7:this.anim.framerate=r.normal;case 8:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})}],i=[{key:"animLabels",get:function(){return xg}}],r&&mg(n.prototype,r),i&&mg(n,i),e}(E);function Og(t,e){var n=t.labels.findIndex((function(t){var n=t.label;return e===n})),r=t.labels[n+1];return r?r.position-1:t.totalFrames-1}function Pg(t){return(Pg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Rg=["fairyActivator","fairyTrailParticles","levelsMultipliers"],Ag=["instant","playLock","lockLabel","playArrow","arrowLabel"];function Ig(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||kg(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cg(t){return function(t){if(Array.isArray(t))return Ng(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||kg(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kg(t,e){if(t){if("string"==typeof t)return Ng(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ng(t,e):void 0}}function Ng(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mg(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function jg(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Mg(o,r,i,a,s,"next",t)}function s(t){Mg(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Dg(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Lg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bg(t,e,n){return e=Ug(e),function(t,e){if(e&&("object"===Pg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Ug(t).constructor):e.apply(t,n))}function Fg(t,e,n){return(Fg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ug(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ug(t){return(Ug=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gg(t,e){return(Gg=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Hg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Vg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Hg(Object(n),!0).forEach((function(e){Xg(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xg(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Wg="pointerdown",Yg="pointerover",zg="pointerout",qg=Vg(Vg({},E.animLabels),{},{IDLE:"idle",SWAP:"swap",HOVER:"hover",UNHOVER:"unhover",UNLOCKED:"unlocked",PICKED:"picked",SHOW_PICKED:"showPicked",SHOW_UNPICKED:"showUnpicked",SHOW_UNWON:"showUnwon",BURST:"burst"}),Kg=Vg(Vg({},E.events),{},{ACTIVATE_START:"activate_start",ACTIVATE_END:"activate_end",HOVER:"hover",UNHOVER:"unhover",PICKER_CLICKED:"picker_clicked",PICK_START:"pick_start",PICK_END:"pick_end",PICK_ARROW_SHOW_START:"pick_arrow_show_start",SHOW_NEXT_ROW:"show_next_row",SINGLE_ANIM_PLAY_START:"single_anim_play_start",SINGLE_ANIM_PLAY_END:"single_anim_play_end"}),Zg=function(t){function e(t){var n,r=t.fairyActivator,i=t.fairyTrailParticles,o=t.levelsMultipliers,a=Dg(t,Rg);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Bg(this,e,[a])).anim.sortableChildren=!0,n._levelsMultipliers=o,n._fairyActivator=r,n._fairyTrailParticles=i,n._pickers=n._getInnerAnimations("pick"),n._effects=n._getInnerAnimations("swap"),n._levels=n._pickersByLevel(n._pickers),n._activatePromise=new um.a,n._idlePromise=new um.a,n._currentLevelPickers=null,n._pickedPicker=null,n._progress=null,n._stake=null,n._fitBounds=null,n}var n,i,a,s,u,c,l,h,f;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gg(t,e)}(e,t),n=e,i=[{key:"picked",get:function(){return this._pickedPicker}},{key:"show",value:function(t){var n=this._levels.slice(t).flat();return this._playLockAnimation(n,e.animLabels.SHOW),Fg(Ug(e.prototype),"show",this).call(this)}},{key:"activate",value:(f=jg(regeneratorRuntime.mark((function t(n,r,i){var o,a,s,u,c,l,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.animLabels,a=o.SHOW,s=o.SWAP,u=o.UNLOCKED,c=this._config.unlockedPickersTween.fadeOut,l=this._levels.slice(0,r),h=l.slice(1).flat(),this._currentLevelPickers=l[0],this._progress=n,this._stake=i,this.emit(e.events.ACTIVATE_START),h.forEach((function(t){return Tm.b.to(t,c)})),t.next=11,Promise.all([this._executeAnimation(l.flat(),s),this._executeAnimation(this._effects[0],a)]);case 11:return this._executeAnimation(h,u),this._playIdleLoop(),this._attachListeners(this._currentLevelPickers),this.emit(e.events.ACTIVATE_END),this._activatePromise=new um.a,t.next=18,this._activatePromise.wait();case 18:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return f.apply(this,arguments)})},{key:"_reset",value:function(){Fg(Ug(e.prototype),"_reset",this).call(this),this._currentLevelPickers=null,this._pickedPicker=null,this._progress=null,this._stake=null,this._activatePromise=new um.a,this._idlePromise=new um.a,this._effects.forEach((function(t){return t.alpha=1})),this._pickers.forEach((function(t){t.zIndex=0,t.arrow.zIndex=0,Object.values(t.trackedPointers).forEach((function(t){return t.over=!1}))})),this._executeAnimation(this._effects,e.animLabels.INIT,{instant:!0}),this._executeAnimation(this._pickers,e.animLabels.INIT,{instant:!0,playLock:!0,playArrow:!0}),this._removeListeners()}},{key:"_executeAnimation",value:(h=jg(regeneratorRuntime.mark((function t(n,r){var i,o,a,s,u,c,l,h,f,p,d,y,m,v,_=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=_.length>2&&void 0!==_[2]?_[2]:{},o=Array.isArray(n)?n:[n],a=i.instant,s=void 0!==a&&a,u=i.playLock,c=void 0!==u&&u,l=i.lockLabel,h=i.playArrow,f=void 0!==h&&h,p=i.arrowLabel,d=Dg(i,Ag),y=Promise.all(o.map((function(t){var e=s?Og(t,r):r;return t.promises["gotoAnd".concat(s?"Stop":"Play")](e,d)}))),m=c?this._playLockAnimation(n,l||r,Vg({instant:s},d)):Promise.resolve(),v=f?this._playArrowAnimation(n,p||r,Vg({instant:s},d)):Promise.resolve(),this.emit(e.events.SINGLE_ANIM_PLAY_START,{target:o,animLabel:r,options:i}),t.next=9,Promise.all([y,m,v]);case 9:this.emit(e.events.SINGLE_ANIM_PLAY_END,{target:o,animLabel:r,options:i});case 10:case"end":return t.stop()}}),t,this)}))),function(t,e){return h.apply(this,arguments)})},{key:"_playLockAnimation",value:(l=jg(regeneratorRuntime.mark((function t(e,n){var r,i,o,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},i=Array.isArray(e)?e:[e],o=i.map((function(t){return"lock"===t.name?t:t.lock})),r.playLock=!1,t.next=6,this._executeAnimation(o,n,r);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return l.apply(this,arguments)})},{key:"_playArrowAnimation",value:(c=jg(regeneratorRuntime.mark((function t(e,n){var r,i,o,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},i=Array.isArray(e)?e:[e],o=i.map((function(t){return"arrow"===t.name?t:t.arrow})),r.playArrow=!1,t.next=6,this._executeAnimation(o,n,r);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return c.apply(this,arguments)})},{key:"_onPointerDown",value:(u=jg(regeneratorRuntime.mark((function t(n){var i,o,a,s,u,c,l,h,f,p,d,y,m,v,_,g,b,E,T,w,x,S,O,P,R,A,I,C,k,N,M=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._pickedPicker=n,n.zIndex=n.data.row,n.arrow.zIndex=1,o=Sg.animLabels,a=o.SHOW_PICKED_START,s=o.SHOW_PICKED_END,u=e.animLabels,c=u.SHOW,l=u.HIDE,h=u.SWAP,f=u.HOVER,p=u.UNHOVER,d=u.PICKED,y=u.SHOW_PICKED,m=u.SHOW_UNPICKED,v=u.BURST,_=this._config,g=_.unlockedPickersTween.fadeIn,b=_.arrowDelays,E=b.afterPickedShow,T=b.anticipation,w=n.data.row,x=this._progress[w],S=x.win,O=x.next,P=x.arrows,R=Object(Ro.a)(P),A=this._levels[w-1],I=this._levels[w],C=(null==I||null===(i=I[0])||void 0===i?void 0:i.lock.currentLabel)===c,this._removeListeners(A),this.emit(e.events.PICKER_CLICKED,{target:n}),k=A.filter((function(t){return t!==n})),N=Object(r.n)(this._levelsMultipliers[w].filter((function(t,e){return e!==M._levelsMultipliers[w].indexOf(S)}))),this._createCounter(n,"picked",S),k.forEach((function(t,e){return M._createCounter(t,"unpicked",N[e])})),n.promises.gotoAndPlay(d),t.next=21,this._fairyActivator.finish();case 21:return t.next=23,this._fairyActivator.play(a);case 23:return this._fairyActivator.play(s,{loopAtEnd:!0}),t.next=26,this._fairyTrailParticles.activate({from:this._fairyActivator.trailStartingPosition,to:n.position.clone()});case 26:return this.emit(e.events.PICK_START,{target:n}),C&&n.rainbowFx.promises.gotoAndPlay(c),t.next=30,this._executeAnimation(n,y);case 30:return t.next=32,Object(r.d)(E);case 32:if(!C){t.next=36;break}return t.next=35,Object(r.d)(T);case 35:n.rainbowFx.promises.gotoAndPlay(O?v:l);case 36:return O&&(this.emit(e.events.PICK_ARROW_SHOW_START),this._playArrowAnimation(n,y),R.splice(R.indexOf(S),1)),this._showPotentialPickersArrows(R,k),t.next=40,this._executeAnimation(k,m);case 40:if(this.emit(e.events.PICK_END,{target:n}),O&&I){t.next=46;break}return t.next=44,this._showPotentialPickersValues(w);case 44:return this._activatePromise.complete(),t.abrupt("return");case 46:if(I.forEach((function(t){return Tm.b.to(t,g)})),!C){t.next=55;break}return this.emit(e.events.SHOW_NEXT_ROW,{target:n,next:O}),this._fairyActivator.finish().then((function(){return M._fairyActivator.play(h,{loopAtEnd:!0})})),this._executeAnimation(this._effects[w],c),t.next=53,this._executeAnimation(I,h,{playLock:!0});case 53:t.next=60;break;case 55:return this.emit(e.events.SHOW_NEXT_ROW,{target:n,next:O}),t.next=58,this._executeAnimation(I,f);case 58:return t.next=60,this._executeAnimation(I,p);case 60:this._idlePromise.complete(),this._currentLevelPickers=I,this._attachListeners(I);case 63:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"_onPointerOver",value:function(t){t.zIndex=t.data.row,this._idlePromise.complete(),this.emit(e.events.HOVER,{target:t}),t.promises.gotoAndPlay(e.animLabels.HOVER);var n=this._currentLevelPickers.filter((function(e){return e!==t}));this._executeAnimation(n,e.animLabels.SWAP,{instant:!0})}},{key:"_onPointerOut",value:function(t){t.zIndex=0,this._idlePromise.complete(),t.currentLabel===e.animLabels.HOVER&&(this.emit(e.events.UNHOVER,{target:t}),t.promises.gotoAndPlay(this._getUnhoverMirrorFrame(t)))}},{key:"_getUnhoverMirrorFrame",value:function(t){var n=e.animLabels,r=n.HOVER,i=n.UNHOVER,o=this._config.hoverExtraFrames,a=t.labels.find((function(t){return t.label===r})),s=t.labels.find((function(t){return t.label===i})),u=t.currentFrame,c=a.position+o,l=s.position-1-c;return u===s.position-1?s.position:u<=c?Og(t,i):u>c?s.position+(l-(u-c)):void 0}},{key:"_attachListeners",value:function(t){var e=this;t.forEach((function(t){var n=t.hitRadius.getChildAt(0).getLocalBounds().width;t.hitArea=new o.Circle(0,0,n/2),t.interactiveChildren=!1,t.interactive=!0,t.buttonMode=!0,t.on(Wg,(function(){return e._onPointerDown(t)})),t.on(zg,(function(){return e._onPointerOut(t)})),t.on(Yg,(function(){return e._onPointerOver(t)}))}))}},{key:"_removeListeners",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._pickers;t.forEach((function(t){t.interactive=!1,t.buttonMode=!1,t.off(Wg),t.off(zg),t.off(Yg)}))}},{key:"_playIdleLoop",value:(s=jg(regeneratorRuntime.mark((function t(n){var i,o,a,s,u,c,l,h,f,p,d,y=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.animLabels,a=o.IDLE,s=o.HOVER,u=o.PICKED,c=o.SHOW_PICKED,l=this._config.idleDelay,h=l.min,f=l.max,null===(i=this._activatePromise)||void 0===i||!i.isComplete){t.next=4;break}return t.abrupt("return");case 4:return p=this._currentLevelPickers.filter((function(t){return t.name!==n})),d=Object(r.m)(p),this._currentLevelPickers.every((function(t){return![s,u,c].includes(t.currentLabel)}))&&d.promises.gotoAndPlay(a).then((function(){return y._idlePromise.complete()})),t.next=9,this._idlePromise.wait();case 9:return this._idlePromise=new um.a,t.next=12,Object(r.d)(Object(r.h)(h,f));case 12:return t.next=14,this._playIdleLoop(d.name);case 14:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"_showPotentialPickersArrows",value:function(t,n){var i=this;if(null==t||!t.length)return Promise.resolve();var o=e.animLabels.SHOW_UNPICKED,a=Object(r.n)(Cg(n),!0);return Promise.all(t.map((function(t){var e=a.find((function(e){return e.data.multiplier===t&&e.arrow.currentLabel!==o}));return e?i._playArrowAnimation(e,o):Promise.resolve()})))}},{key:"_showPotentialPickersValues",value:function(t){var n=this,i=e.animLabels,o=i.SWAP,a=i.SHOW_UNWON,s=this._levels.slice(t),u=s.flat();return s.forEach((function(t){var e,i=t[0].data.row,o=Object(r.n)(n._levelsMultipliers[i]),a=null===(e=n._progress[i])||void 0===e?void 0:e.arrows;t.forEach((function(t,e){return n._createCounter(t,"unpicked",o[e])})),n._showPotentialPickersArrows(a,t)})),this._executeAnimation(u,a,{playLock:!0,lockLabel:o})}},{key:"_getInnerAnimations",value:function(t){return Object.entries(this.anim).filter((function(e){var n=Ig(e,2),r=n[0];return n[1],r.startsWith(t)})).map((function(t){var e=Ig(t,2);return e[0],e[1]}))}},{key:"_pickersByLevel",value:function(t){var e=Math.ceil(Math.sqrt(t.length));return t.reduce((function(t,n,r){n.sortableChildren=!0;var i=Math.floor(r/e)+1,o=r%e+1;return n.data={row:i,column:o},t[i-1]=(t[i-1]||[]).concat(n),t}),[])}},{key:"_createCounter",value:function(t,e,n){var i=this._config.counters,o=i.default,a=i.multiplier,s=i.currency,u=i[e],c=void 0===u?{}:u,l=i.ignoreRatio,h=i.overscale,f=this._stake<=this._config.countersStakeThreshold,p=Vg(Vg(Vg({},o),c),f?s:a),d=t.numContainer.inner;this._fitBounds||(this._fitBounds=d.getLocalBounds());var y=new k({config:Vg({fontSize:this._fitBounds.height},p)});y.currentCount=f?n*this._stake:n,Object(r.e)(y,this._fitBounds,l,h),d.removeChildren(),d.addChild(y),t.data.multiplier=n,t.data.amount=n*this._stake}}],a=[{key:"animLabels",get:function(){return qg}},{key:"events",get:function(){return Kg}}],i&&Lg(n.prototype,i),a&&Lg(n,a),e}(E);function $g(t){return($g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jg(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Qg(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tb(t,e,n){return e=eb(e),function(t,e){if(e&&("object"===$g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],eb(t).constructor):e.apply(t,n))}function eb(t){return(eb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nb(t,e){return(nb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rb=function(t){function e(t){var n,r=t.name,i=void 0===r?"FairyArrows":r,o=t.animation,a=t.markers,s=t.config,u=void 0===s?{}:s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=tb(this,e)).name=i,n._animation=o,n._markers=a,n._config=u,n._arrows={},n}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nb(t,e)}(e,t),n=e,(r=[{key:"show",value:function(t){var e=t.row,n=new E({animation:this._animation}),r=this._markers["marker".concat(e)].position,i=r.x,o=r.y;n.position.set(i,o),this.addChild(n),this._arrows[e]=n,n.show()}},{key:"hide",value:(o=regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.row,r=this._arrows[n],t.next=4,r.hide();case 4:this._arrows[n]=null,r.destroy({children:!0});case 6:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Jg(i,n,r,a,s,"next",t)}function s(t){Jg(i,n,r,a,s,"throw",t)}a(void 0)}))},function(t){return a.apply(this,arguments)})}])&&Qg(n.prototype,r),i&&Qg(n,i),e}(o.Container);function ib(t){return(ib="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ob=["name"];function ab(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function sb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ub(t,e,n){return e=cb(e),function(t,e){if(e&&("object"===ib(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],cb(t).constructor):e.apply(t,n))}function cb(t){return(cb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lb(t,e){return(lb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var hb=function(t){function e(t){var n,r=t.name,i=void 0===r?"ParticlesContainer":r,o=ab(t,ob);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ub(this,e,[o])).name=i,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lb(t,e)}(e,t),n=e,(r=[{key:"emitterGuide",get:function(){return this._emitterGuide}}])&&sb(n.prototype,r),i&&sb(n,i),e}(co),fb=n("./node_modules/@games/gsap/MotionPathPlugin.js");function pb(t){return(pb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function db(t){return function(t){if(Array.isArray(t))return yb(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return yb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yb(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yb(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mb(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function vb(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){mb(o,r,i,a,s,"next",t)}function s(t){mb(o,r,i,a,s,"throw",t)}a(void 0)}))}}function _b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function gb(t,e,n){return e=bb(e),function(t,e){if(e&&("object"===pb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],bb(t).constructor):e.apply(t,n))}function bb(t){return(bb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Eb(t,e){return(Eb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}w.b.registerPlugin(fb.a);var Tb=function(t){function e(t){var n,r=t.animation,i=t.config;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=gb(this,e))._animation=r,n._config=i,n}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Eb(t,e)}(e,t),n=e,(r=[{key:"activate",value:function(t){var e=new this._animation;return this.addChild(e),this._move(e,t)}},{key:"_move",value:(a=vb(regeneratorRuntime.mark((function t(e,n){var r,i,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this._config.moveTween,(r=e.position).set.apply(r,db(Object.values(n.from))),o=this._getCurvePoints(n),a=this._createParticlesContainer(e),t.next=6,w.b.to([e,a.emitterGuide],Object(as.b)(i,{motionPath:{path:o}}));case 6:this._removeParticles(e,a);case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})},{key:"_getCurvePoints",value:function(t){var e=t.from,n=t.to,r=this._config,i=r.switchDirectionChance,o=r.curvature,a=r.offsetY,s=e.x,u=e.y,c=n.x,l=n.y,h=(s-c)/2,f=(u-l)/2,p=Object(as.a)(i)?-1:1,d=Is.fromPositions(e,n).length*o;return[{x:s,y:u},{x:s-h,y:u-f+Object(as.g)(a.min,a.max)*d*p},{x:c,y:l}]}},{key:"_createParticlesContainer",value:function(t){var e=this._config.particles,n=e.particlesSource,r=e.emitter,i=t.emitterGuide,o=n.map((function(t){return qt.a.FairyActivator[t]})),a=new hb({guide:i,source:o,config:{emitter:r}});return a.pivot.set(i.width/2,i.height/2),a.emitterGuide.position.copyFrom(t.position),a.activate(),this.addChild(a),a}},{key:"_removeParticles",value:(o=vb(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([w.b.to(e,this._config.hideTween),n.deactivate()]);case 2:n.destroy({children:!0}),e.destroy({children:!0}),this.removeChild(e);case 5:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})}])&&_b(n.prototype,r),i&&_b(n,i),e}(o.Container);function wb(t){return(wb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ob(t,e,n){return e=Rb(e),function(t,e){if(e&&("object"===wb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Rb(t).constructor):e.apply(t,n))}function Pb(t,e,n){return(Pb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rb(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Rb(t){return(Rb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ab(t,e){return(Ab=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ib(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Cb(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ib(Object(n),!0).forEach((function(e){kb(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ib(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function kb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Nb=Cb(Cb({},E.animLabels),{},{TEXT1:"txt1",TEXT2:"txt2"}),Mb=function(t){function e(){return xb(this,e),Ob(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ab(t,e)}(e,t),n=e,i=[{key:"animLabels",get:function(){return Nb}}],(r=[{key:"show",value:function(t){var n=e.animLabels,r=n.TEXT1,i=n.TEXT2,o=t>1,a=Pb(Rb(e.prototype),"show",this).call(this);return o?this._createCounter(t):this.anim.numContainer.inner.removeChildren(),this.anim.text.promises.gotoAndPlay(o?i:r),a}},{key:"_createCounter",value:function(t){var e=this.anim.numContainer.inner,n=e.getLocalBounds().height,r=new k({config:Cb({fontSize:n},this._config.counter)});e.removeChildren(),e.addChild(r),r.currentCount=t}}])&&Sb(n.prototype,r),i&&Sb(n,i),e}(E);function jb(t){return(jb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Db(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Lb(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Db(Object(n),!0).forEach((function(e){Bb(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Db(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Bb(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fb(t){return function(t){if(Array.isArray(t))return Vb(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Hb(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ub(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||Hb(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gb(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Hb(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Hb(t,e){if(t){if("string"==typeof t)return Vb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vb(t,e):void 0}}function Vb(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xb(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Wb(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Xb(o,r,i,a,s,"next",t)}function s(t){Xb(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Yb(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zb(t,e,n){return e=qb(e),function(t,e){if(e&&("object"===jb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],qb(t).constructor):e.apply(t,n))}function qb(t){return(qb=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kb(t,e){return(Kb=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Zb={ACTIVATE_START:"activate_start",ACTIVATE_END:"activate_end",SINGLE_TILE_MOVE_START:"single_tile_move_start",SINGLE_TILE_LAND:"single_tile_land",TILE_ENTER:"tile_enter"},$b=function(t){function e(t){var n,r=t.animation,i=t.reelMaster,o=t.config,a=t.renderer;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=zb(this,e))._animation=r,n._reelMaster=i,n._config=o,n._generateFake=!0,n._renderer=a,n._isSkipped=!1,n._activeTweens=[],n._activeFakeTweens=[],n._activeDelays=[],n._initialReelMasterPositions=n._reelMaster.reels.map((function(t){return{x:t.x,y:t.y}})),n}var n,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kb(t,e)}(e,t),n=e,i=[{key:"activate",value:(s=Wb(regeneratorRuntime.mark((function t(n){var i,o,a,s,u,c,l,h,f,p,d,y,m,v,_,g,b,E,T,w,x=this,S=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=S.length>1&&void 0!==S[1]?S[1]:{},o=i.hasFakeTiles,a=void 0!==o&&o,s=i.skipSort,u=this._config,c=u.normal,l=c.speed,h=c.tweens.move,f=c.diagonalOffset,p=u.delays,d=p.betweenNormalTiles,y=p.betweenBonusTiles,m=u.degree,v=u.scale,_=u.skipTimeScale,this.emit(e.events.ACTIVATE_START),this._isSkipped=!1,a&&this._startFake(n[0].tileId),g=s?n:n.sort((function(t,e){return t.reel-e.reel||t.index-e.index})),b=a?d:y,E=Gb(g.entries()),t.prev=9,w=regeneratorRuntime.mark((function t(){var o,s,u,c,p,d,y,g,E,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=Ub(T.value,2),s=o[0],u=o[1],t.t0=a||s,!t.t0){t.next=5;break}return t.next=5,x._delay(r.h.apply(void 0,Fb(b)));case 5:c=s===n.length-1,p=x._createCover(u.tileId),d=x._getPosition(u,f,m),y=d.from,g=d.to,E=x._getDuration(y,g,l),p.x=y.x,p.y=y.y,v&&p.scale.set(v),x.emit(e.events.SINGLE_TILE_MOVE_START),w=Tm.a.to(p,Lb(Lb(Lb({},g),h),{},{duration:E,onStart:function(){return x._onTweenStart(c)},onComplete:function(){return x._onTweenComplete(Lb({cover:p,isLast:c,position:u,to:g},i))},onUpdate:function(){return x._onTweenUpdate(p)}})),x._isSkipped&&w.timeScale(_),x._activeTweens.push(w);case 16:case"end":return t.stop()}}),t)})),E.s();case 12:if((T=E.n()).done){t.next=16;break}return t.delegateYield(w(),"t0",14);case 14:t.next=12;break;case 16:t.next=21;break;case 18:t.prev=18,t.t1=t.catch(9),E.e(t.t1);case 21:return t.prev=21,E.f(),t.finish(21);case 24:return t.abrupt("return",Promise.all(this._activeTweens));case 25:case"end":return t.stop()}}),t,this,[[9,18,21,24]])}))),function(t){return s.apply(this,arguments)})},{key:"reset",value:function(){this._generateFake=!0,this._isSkipped=!1,this._activeTweens=[],this._activeFakeTweens=[],this._activeDelays=[]}},{key:"skip",value:function(){if(!this._isSkipped){var t=this._config.skipTimeScale;this._isSkipped=!0,this._activeTweens.forEach((function(e){return e.timeScale(t)})),this._activeFakeTweens.forEach((function(e){return e.timeScale(t)})),this._activeDelays.forEach((function(e){return e.timeScale(t)}))}}},{key:"_startFake",value:(a=Wb(regeneratorRuntime.mark((function t(n){var i,o,a,s,u,c,l,h,f,p,d,y,m,v,_,g=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._generateFake){t.next=2;break}return t.abrupt("return");case 2:return i=this._config,o=i.fake,a=o.speed,s=o.tweens,u=s.move,c=s.fadeOut,l=i.delays.betweenFakeTiles,h=i.scale,f=i.skipTimeScale,p=this._createCover(n),d=this._getFakePositions(),y=d.from,m=d.to,v=this._getDuration(y,m,r.h.apply(void 0,Fb(a))),p.x=y.x,p.y=y.y,h&&p.scale.set(h),this.emit(e.events.SINGLE_TILE_MOVE_START),_=Tm.a.timeline().to(p,Lb(Lb(Lb({},m),u),{},{duration:v,onComplete:function(){return p.destroy()},onUpdate:function(){return g._onTweenUpdate(p)}})).to(p,Lb({},c),"-=".concat(c.duration)),this._isSkipped&&_.timeScale(f),this._activeFakeTweens.push(_),t.next=15,this._delay(r.h.apply(void 0,Fb(l)));case 15:this._startFake(n);case 16:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"_getFakePositions",value:function(){var t=this._config,e=t.fake,n=e.endPointOffset,i=n.x,o=n.y,a=e.endPointDeviationRange,s=e.diagonalOffset,u=t.degree,c=this._getTileGuide(),l=c.width,h=c.height,f=r.h.apply(void 0,Fb(a)),p={x:l*i+f,y:h*(this._config.visibleTiles+o)+f};return{from:this._getFromPosition(p,u,s),to:p}}},{key:"_getDuration",value:function(t,e,n){return this._getDistance(t.x,t.y,e.x,e.y)/n}},{key:"_getDistance",value:function(t,e,n,r){return Is.fromPositions({x:t,y:e},{x:n,y:r}).length}},{key:"_getPosition",value:function(t,e,n){var r=t.reel,i=t.index,o=void 0===i?0:i,a=t.height,s=this._initialReelMasterPositions[r],u=s.x,c=s.y,l=this._getTileGuide(a),h=l.height,f={x:u+l.width/2,y:c+o*h+h/2};return{from:this._getFromPosition(f,n,e),to:f}}},{key:"_getFromPosition",value:function(t,e,n){var r=this._renderer.getVisibleArea().bottomRightX,i=this._initialReelMasterPositions[0],o=i.x,a=i.y,s=this._getTileGuide(),u=this._getDistance(o,a+this._config.visibleTiles*s.height,r,0)+this._getRectDiagonal(s)*n;return this._findOppositePoint(t.x,t.y,e,u)}},{key:"_createCover",value:function(t){var e=new this._animation;return e.tileContainer.promises.gotoAndStop("tile".concat(t)),this.addChild(e),e}},{key:"_findOppositePoint",value:function(t,e,n,r){var i=(n+180)*Math.PI/180;return{x:t-r*Math.cos(i),y:e+r*Math.sin(i)}}},{key:"_getRectDiagonal",value:function(t){var e=t.width,n=t.height;return Math.sqrt(Math.pow(e,2)+Math.pow(n,2))}},{key:"_getTileGuide",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._config.visibleTiles;return this._reelMaster.tileGuide[t]}},{key:"_onTweenStart",value:function(t){t&&Object(r.b)(this._config.chances.stopGenerateFake)&&(this._generateFake=!1)}},{key:"_onTweenUpdate",value:function(t){!t.entered&&this._hasEntered(t.position)&&(t.entered=!0,this.emit(e.events.TILE_ENTER))}},{key:"_onTweenComplete",value:function(t){var n=t.cover,r=t.isLast,i=t.position,o=t.to,a=t.onSingleLand,s=void 0===a?function(){}:a;r&&(this._generateFake=!1,this.emit(e.events.ACTIVATE_END,i)),this.emit(e.events.SINGLE_TILE_LAND,i),s({position:i,coords:o}),n.destroy()}},{key:"_hasEntered",value:function(t){var e=t.x,n=t.y;return e<this._renderer.getVisibleArea().bottomRightX&&n>0}},{key:"_delay",value:function(t){var e=Tm.a.to({val:0},{duration:t,val:1});return this._isSkipped&&e.timeScale(this._config.skipTimeScale),this._activeDelays.push(e),e}}],o=[{key:"events",get:function(){return Zb}}],i&&Yb(n.prototype,i),o&&Yb(n,o),e}(o.Container);function Jb(t){return(Jb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function eE(t,e,n){return e=rE(e),function(t,e){if(e&&("object"===Jb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],rE(t).constructor):e.apply(t,n))}function nE(t,e,n){return(nE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rE(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function rE(t){return(rE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function iE(t,e){return(iE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oE=function(t){function e(){return Qb(this,e),eE(this,e,arguments)}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&iE(t,e)}(e,t),n=e,(i=[{key:"_onTweenStart",value:function(t){var e=this._config,n=e.reelsCount,i=e.chances.stopGenerateFake,o=this._activeTweens.length===n||Object(r.b)(i);t&&o&&(this._generateFake=!1)}},{key:"_getPosition",value:function(t,n,r){var i=t.reel,o=this._config.visibleTiles;return nE(rE(e.prototype),"_getPosition",this).call(this,{reel:i,index:parseInt(o/2),height:o},n,r)}}])&&tE(n.prototype,i),o&&tE(n,o),e}($b);function aE(t){return(aE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function uE(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sE(Object(n),!0).forEach((function(e){cE(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function cE(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lE(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function hE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fE(t,e,n){return e=dE(e),function(t,e){if(e&&("object"===aE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],dE(t).constructor):e.apply(t,n))}function pE(t,e,n){return(pE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dE(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function dE(t){return(dE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yE(t,e){return(yE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mE=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=fE(this,e,[t]))._fitBounds=null,n._counter=n._createCounter(),n}var n,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yE(t,e)}(e,t),n=e,(i=[{key:"currentCount",get:function(){return this._counter.currentCount}},{key:"show",value:(a=regeneratorRuntime.mark((function t(n,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._counter.currentCount=n,t.abrupt("return",pE(dE(e.prototype),"show",this).call(this,r));case 2:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=a.apply(t,e);function o(t){lE(i,n,r,o,s,"next",t)}function s(t){lE(i,n,r,o,s,"throw",t)}o(void 0)}))},function(t,e){return s.apply(this,arguments)})},{key:"_createCounter",value:function(){var t=this._anim.counter.inner;this._fitBounds||(this._fitBounds=t.getLocalBounds());var e=new k({config:uE({fontSize:this._fitBounds.height},this._config.counter)});return t.removeChildren(),t.addChild(e),e}},{key:"bangup",value:function(t){var e=this,n=this._config.counter,i=n.bangupDuration,o=n.ignoreRatio,a=n.overscale;return this._counter.update(t,{duration:i,onUpdate:function(){return Object(r.e)(e._counter,e._fitBounds,o,a)}})}}])&&hE(n.prototype,i),o&&hE(n,o),e}(E);function vE(t){return(vE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _E(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function gE(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){_E(o,r,i,a,s,"next",t)}function s(t){_E(o,r,i,a,s,"throw",t)}a(void 0)}))}}function bE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function TE(t,e,n){return e=wE(e),function(t,e){if(e&&("object"===vE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],wE(t).constructor):e.apply(t,n))}function wE(t){return(wE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xE(t,e){return(xE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function SE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function OE(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?SE(Object(n),!0).forEach((function(e){PE(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function PE(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var RE=OE(OE({},mE.animLabels),{},{INCREASE_START:"increaseStart",INCREASE_END:"increaseEnd"}),AE=function(t){function e(){return bE(this,e),TE(this,e,arguments)}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xE(t,e)}(e,t),n=e,r=[{key:"increase",value:(a=gE(regeneratorRuntime.mark((function t(n){var r,i,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.animLabels,i=r.INCREASE_START,o=r.INCREASE_END,(a=n-this._counter.currentCount>1&&this._config.counter.hasBangup)&&this.bangup(n),t.next=5,this.play(i);case 5:return a||(this._counter.currentCount=n),t.abrupt("return",this.play(o));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"deactivate",value:(o=gE(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.animLabels,r=n.INIT,i=n.HIDE,this._anim.currentLabel!==r&&this._anim.currentLabel!==i){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,this.hide();case 5:this._counter.reset();case 6:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],i=[{key:"animLabels",get:function(){return RE}}],r&&EE(n.prototype,r),i&&EE(n,i),e}(mE);function IE(t){return(IE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kE(t,e,n){return e=NE(e),function(t,e){if(e&&("object"===IE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],NE(t).constructor):e.apply(t,n))}function NE(t){return(NE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ME(t,e){return(ME=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jE=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=kE(this,e,[t]))._isFlipped=!1,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ME(t,e)}(e,t),n=e,(r=[{key:"isFlipped",get:function(){return this._isFlipped}},{key:"reset",value:function(){this.isFlipped&&(this.anim.scale.x=1,this.anim.x=0,this._isFlipped=!1)}},{key:"flip",value:function(){this.anim.scale.x=-1,this.anim.x=Gn.a.renderer.width,this._isFlipped=!0}}])&&CE(n.prototype,r),i&&CE(n,i),e}(E);function DE(t){return(DE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var LE=["tileId","activator","shouldFlip"],BE=["innerAnimLabel"];function FE(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function UE(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function GE(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){UE(o,r,i,a,s,"next",t)}function s(t){UE(o,r,i,a,s,"throw",t)}a(void 0)}))}}function HE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function VE(t,e,n){return e=WE(e),function(t,e){if(e&&("object"===DE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],WE(t).constructor):e.apply(t,n))}function XE(t,e,n){return(XE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=WE(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function WE(t){return(WE=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function YE(t,e){return(YE=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qE(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zE(Object(n),!0).forEach((function(e){KE(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function KE(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ZE=qE(qE({},jE.animLabels),{},{NORMAL:"normal",SPECIAL:"special",LOOP:"loop",SHOW_END:"showEnd",SHOW_BONUS_PIPE:"showBonusPipe"}),$E=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=VE(this,e,[t]))._isSkipped=!1,n}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&YE(t,e)}(e,t),n=e,r=[{key:"activate",value:(a=GE(regeneratorRuntime.mark((function t(){var n,r,i,o,a,s,u,c,l,h,f,p,d,y,m,v,_,g,b,E,T,w,x,S=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=S.length>0&&void 0!==S[0]?S[0]:{},r=n.tileId,i=n.activator,o=n.shouldFlip,a=FE(n,LE),s=e.animLabels,u=s.SPECIAL,c=s.NORMAL,l=s.HIDE,h=s.SHOW,f=s.SHOW_END,p=s.SHOW_BONUS_PIPE,d=s.LOOP,y=Gn.a.activators,m=y.RANDOM_TILES_MEGA,v=y.RANDOM_TILES,_=this.anim,g=_.pipeTiles,b=_.pipeTilesBonus,E=_.character,this._isSkipped=!1,this._setFramerate(),o&&this.flip(),T="tile".concat(r).concat(this.isFlipped?"Flip":""),t.next=11,this.show(a);case 11:t.t0=i,t.next=t.t0===v?14:t.t0===m?18:25;break;case 14:return g.tileContainer.promises.gotoAndStop(T),t.next=17,this._playSequence(c,g);case 17:return t.abrupt("break",46);case 18:return g.tileContainerFat.promises.gotoAndStop(T),g.multiply.promises.gotoAndStop("multiply".concat(this.isFlipped?"Flip":"")),t.next=22,this._playSequence(u,g);case 22:return t.next=24,g.promises.gotoAndPlay(l);case 24:return t.abrupt("break",46);case 25:return w=g.tileContainerBonus[T],g.multiply.visible=!1,g.tileContainerBonus.promises.gotoAndStop(T),w.promises.gotoAndPlay(h).then((function(){return w.promises.gotoAndPlay(d,{repeat:-1})})),x=this.play(u),t.next=32,g.promises.gotoAndPlay(u);case 32:if(!i.includes("Mega")){t.next=43;break}return g.promises.gotoAndPlay(d,{repeat:-1}),b.tileContainer.promises.gotoAndStop(T),t.next=37,x;case 37:return t.next=39,E.promises.gotoAndPlay(p);case 39:return this.play(c),t.next=42,b.promises.gotoAndPlay(h);case 42:b.promises.gotoAndPlay(f).then((function(){return b.promises.gotoAndPlay(l)}));case 43:return t.next=45,g.promises.gotoAndPlay(l);case 45:return t.abrupt("break",46);case 46:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"skip",value:function(){this._isSkipped||(this._isSkipped=!0,this._setFramerate(this._config.framerate.skip))}},{key:"_reset",value:function(){var t=e.animLabels.INIT,n=this.anim.pipeTiles,r=n.tileContainer,i=n.tileContainerFat,o=n.tileContainerBonus,a=n.multiply;[r,i,o].forEach((function(e){return e.promises.gotoAndStop(t)})),Object.keys(o).forEach((function(e){return e.includes("tile")&&o[e].gotoAndStop(t)})),a.visible=!0,this._isSkipped=!1,this._setFramerate(),XE(WE(e.prototype),"_reset",this).call(this)}},{key:"_setFramerate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._config.framerate.normal;this.anim.pipeTiles.framerate=t,this.anim.pipeTilesBonus.framerate=t,this.anim.framerate=t}},{key:"_playSequence",value:(o=GE(regeneratorRuntime.mark((function t(e,n){var r,i,o,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},i=r.innerAnimLabel,o=FE(r,BE),this.play(e),t.abrupt("return",n.promises.gotoAndPlay(i||e,o));case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return o.apply(this,arguments)})}],i=[{key:"animLabels",get:function(){return ZE}}],r&&HE(n.prototype,r),i&&HE(n,i),e}(jE);function JE(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var QE=function(){function t(e){var n=e.reelMaster;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._reelMaster=n}var e,n,i;return e=t,(n=[{key:"preConfigStop",value:function(t){var e=this,n=Gn.a.reels,i=n.count,o=n.spin.delay.atEnd;Object(r.k)(i,(function(n){if(t.find((function(t){return t===n}))){var r=e._reelMaster.getReelConfig(n-1).extraDistance;e._reelMaster.preConfigStop({extraDistance:r},n),Object(ae.a)(n+1,i).forEach((function(t){var n=e._reelMaster.getReelConfig(t-1).extraDistance;e._reelMaster.preConfigStop({extraDistance:n+o},t)}))}}))}}])&&JE(e.prototype,n),i&&JE(e,i),t}();function tT(t){return(tT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eT(t){return function(t){if(Array.isArray(t))return nT(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return nT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nT(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nT(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rT(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function iT(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){rT(o,r,i,a,s,"next",t)}function s(t){rT(o,r,i,a,s,"throw",t)}a(void 0)}))}}function oT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function aT(t,e,n){return e=uT(e),function(t,e){if(e&&("object"===tT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],uT(t).constructor):e.apply(t,n))}function sT(t,e,n){return(sT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uT(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function uT(t){return(uT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cT(t,e){return(cT=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function hT(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lT(Object(n),!0).forEach((function(e){fT(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function fT(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pT="pointerdown",dT="pointerover",yT="pointerout",mT=hT(hT({},E.animLabels),{},{MOVE:"move",PROMPT:"prompt",HOVER:"hover",UNHOVER:"unhover",SELECT:"select",DESELECT:"deselect",BEER_BONUS:"beerBonus",MEGA_BEER_BONUS:"megaBeerBonus"}),vT=hT(hT({},E.events),{},{BUTTON_CLICKED:"button_clicked",HOVER_TAP:"hover_tap",UNHOVER_TAP:"unhover_tap",SELECT_TAP:"select_tap"}),_T=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=aT(this,e,[t])).lastChoiceId=0,n._pickers=n._getMcsByName("picker"),n._beerTaps=n._getMcsByName("tap"),n._isHovered=!1,n._asyncAction=null,n._onPointerDownCallback=n._onPointerDown,n._onPointerOverCallback=n._onPointerOver,n._onPointerOutCallback=n._onPointerOut,n}var n,i,a,s,u,c,l,h,f,p;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cT(t,e)}(e,t),n=e,i=[{key:"show",value:(p=iT(regeneratorRuntime.mark((function t(){var n,r,i,o,a,s,u,c,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=l.length>0&&void 0!==l[0]?l[0]:{},r=n.force,i=n.isMega,o=e.animLabels,a=o.BEER_BONUS,s=o.MEGA_BEER_BONUS,u=o.INIT,c=o.HIDE,r||!this._isShowing&&!this._isShown){t.next=5;break}return t.abrupt("return");case 5:return this.lastChoiceId=0,this.anim.title.promises.gotoAndPlay(i?s:a),i||(this._asyncAction=new um.a),this._beerTaps.forEach((function(t){return t.arrow.promises.gotoAndPlay(i?c:u)})),t.next=11,sT(uT(e.prototype),"show",this).call(this,n);case 11:if(i){t.next=18;break}return this._attachListeners(),this._playPrompt(),t.next=16,this._asyncAction.wait();case 16:t.next=20;break;case 18:return t.next=20,this._playMegaBonusSequence();case 20:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"hide",value:(f=iT(regeneratorRuntime.mark((function t(){var n,r=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=r.length>0&&void 0!==r[0]?r[0]:{}).force||(this._isShown||this._isShowing)&&!this._isHiding){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,sT(uT(e.prototype),"hide",this).call(this,n);case 5:this._resetMcs();case 6:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"_onPointerDown",value:(h=iT(regeneratorRuntime.mark((function t(n){var r,i,o,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=this._getTapMc(n),i=this._beerTaps.filter((function(t){return t.name!==r.name})),o=e.animLabels,a=o.SELECT,s=o.DESELECT,this._isHovered=!1,this._detachListeners(),this.lastChoiceId=parseInt(r.name.match(/\d+/g)),i.forEach((function(t){return t.promises.gotoAndPlay(s)})),this.emit(e.events.SELECT_TAP,{choiceId:this.lastChoiceId}),t.next=10,Promise.all([r.promises.gotoAndPlay(a),this.play(a)]);case 10:this._asyncAction.complete();case 11:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"_onPointerOver",value:function(t){var n=this._getTapMc(t),r=this._beerTaps.filter((function(t){return t.name!==n.name})),i=e.animLabels,o=i.INIT,a=i.HOVER,s=i.UNHOVER,u=Og(n,s);this._isHovered=!0,n.promises.gotoAndPlay(a),n.arrow.promises.gotoAndStop(o),r.forEach((function(t){t.promises.gotoAndStop(u),t.arrow.promises.gotoAndStop(o)})),this.emit(e.events.HOVER_TAP)}},{key:"_onPointerOut",value:function(t){var n=e.animLabels,r=n.HOVER,i=n.UNHOVER,o=this._getTapMc(t);o.currentLabel===r&&(this._isHovered=!1,o.promises.gotoAndPlay(i),this.emit(e.events.UNHOVER_TAP))}},{key:"_attachListeners",value:function(){var t=this;this._pickers.forEach((function(e){var n=e.getLocalBounds(),r=n.width,i=n.height;e.hitArea=new o.Rectangle(0,0,r,i),e.buttonMode=!0,e.interactive=!0,e.interactiveChildren=!1,e.once(pT,t._onPointerDownCallback,t),e.on(dT,t._onPointerOverCallback,t),e.on(yT,t._onPointerOutCallback,t)}))}},{key:"_playPrompt",value:(l=iT(regeneratorRuntime.mark((function t(n){var i,o,a,s,u,c,l,h,f,p,d,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this._config.tapsPromptDelay,o=i.min,a=i.max,s=e.animLabels,u=s.SHOW,c=s.PROMPT,l=s.HOVER,h=s.UNHOVER,f=s.SELECT,p=this._beerTaps.filter((function(t){return t.name!==n})),d=Object(r.m)(p),y=Object(r.h)(o,a),[l,f].includes(d.currentLabel)&&(d.currentLabel!==h||!d.paused)){t.next=14;break}if(this._isHovered){t.next=10;break}return d.arrow.promises.gotoAndPlay(u),t.next=10,d.promises.gotoAndPlay(c);case 10:if("show"===this.anim.currentLabel){t.next=12;break}return t.abrupt("return");case 12:return t.next=14,Object(r.d)(y);case 14:if("show"===this.anim.currentLabel){t.next=16;break}return t.abrupt("return");case 16:return t.next=18,this._playPrompt(d.name);case 18:case"end":return t.stop()}}),t,this)}))),function(t){return l.apply(this,arguments)})},{key:"_detachListeners",value:function(){var t=this;this._pickers.forEach((function(e){e.buttonMode=!1,e.interactive=!1,e.off(pT,t._onPointerDownCallback),e.off(dT,t._onPointerOverCallback),e.off(yT,t._onPointerOutCallback)}))}},{key:"_getTapMc",value:function(t){var e=this._config.pickersMap,n=t.currentTarget.name;return this._beerTaps.find((function(t){return t.name===e[n]}))}},{key:"_getMcsByName",value:function(t){return this.anim.children.filter((function(e){var n;return null===(n=e.name)||void 0===n?void 0:n.includes(t)}))}},{key:"_resetMcs",value:function(){var t=e.animLabels.INIT;this._pickers.forEach((function(t){return Object.values(t.trackedPointers).forEach((function(t){return t.over=!1}))})),this._beerTaps.forEach((function(e){return e.promises.gotoAndPlay(t)})),this.anim.title.promises.gotoAndPlay(t),this.play(t)}},{key:"_playMegaBonusSequence",value:(c=iT(regeneratorRuntime.mark((function t(){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.animLabels,r=n.SELECT,i=n.PROMPT,this._beerTaps.map((function(t){return t.promises.gotoAndPlay(i,{repeat:-1})})),t.next=4,this._showStartButton();case 4:return this._hideStartButton(),t.next=7,Promise.all([].concat(eT(this._beerTaps.map((function(t){return t.promises.gotoAndPlay(r)}))),[this.play(r)]));case 7:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"_showStartButton",value:(u=iT(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Y.a.emit(Y.a.events.FEATURE_CONTROLS_SHOW,{options:this._getButtonOptions()}),t.next=3,z.a.when("BEER_MEGA_START");case 3:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"_hideStartButton",value:(s=iT(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Y.a.emit(Y.a.events.FEATURE_CONTROLS_HIDE),this.emit(e.events.BUTTON_CLICKED);case 2:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"_getButtonOptions",value:function(){return{align:"center",buttons:[{name:"BEER_MEGA_START",label:x.c.texts.FREE_SPINS_START,type:"primary",size:"large",spacebar:!0}]}}}],a=[{key:"animLabels",get:function(){return mT}},{key:"events",get:function(){return vT}}],i&&oT(n.prototype,i),a&&oT(n,a),e}(E);function gT(t){return(gT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bT(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function ET(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function TT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wT(t,e,n){return e=ST(e),function(t,e){if(e&&("object"===gT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],ST(t).constructor):e.apply(t,n))}function xT(t,e,n){return(xT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ST(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function ST(t){return(ST=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function OT(t,e){return(OT=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function PT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function RT(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?PT(Object(n),!0).forEach((function(e){AT(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function AT(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var IT=RT(RT({},E.animLabels),{},{WIN:"win"}),CT=RT(RT({},E.events),{},{SHOW_GLASSES:"show_glasses"}),kT=function(t){function e(){return ET(this,e),wT(this,e,arguments)}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&OT(t,e)}(e,t),n=e,r=[{key:"awaitEmit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.events.SHOW_GLASSES,n=new um.a;return this.anim.once(t,(function(){return n.complete()})),n.wait()}},{key:"showMegaEffect",value:function(){return this.anim.activeAllFx.promises.gotoAndPlay(e.animLabels.SHOW)}},{key:"winMegaEffect",value:function(){return this.anim.activeAllFx.promises.gotoAndPlay(e.animLabels.WIN)}},{key:"hide",value:(o=regeneratorRuntime.mark((function t(){var n,r,i,o,a,s=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.length>0&&void 0!==s[0]?s[0]:{},r=n.force,i=n.isMega,o=n.animLabel,a=void 0===o?e.animLabels.HIDE:o,r||(this._isShown||this._isShowing)&&!this._isHiding){t.next=4;break}return t.abrupt("return");case 4:return i&&this.anim.activeAllFx.promises.gotoAndPlay(a),t.next=7,xT(ST(e.prototype),"hide",this).call(this,n);case 7:this.anim.activeAllFx.promises.gotoAndPlay(e.animLabels.INIT);case 8:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){bT(i,n,r,a,s,"next",t)}function s(t){bT(i,n,r,a,s,"throw",t)}a(void 0)}))},function(){return a.apply(this,arguments)})}],i=[{key:"animLabels",get:function(){return IT}},{key:"events",get:function(){return CT}}],r&&TT(n.prototype,r),i&&TT(n,i),e}(E);function NT(t){return(NT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MT(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function jT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function DT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function LT(t,e,n){return e=FT(e),function(t,e){if(e&&("object"===NT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],FT(t).constructor):e.apply(t,n))}function BT(t,e,n){return(BT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=FT(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function FT(t){return(FT=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function UT(t,e){return(UT=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function GT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function HT(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?GT(Object(n),!0).forEach((function(e){VT(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function VT(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var XT=HT(HT({},Vm.events),{},{FILL_START:"fill_start",SINGLE_FILL_END:"single_fill_end",WIN_START:"win_start"}),WT=function(t){function e(){return jT(this,e),LT(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&UT(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return XT}}],(r=[{key:"onShowStart",value:function(t,n,r,i){BT(FT(e.prototype),"onShowStart",this).call(this,t,n,r,i),i.isMega||!t.selected&&this.moveToContainer("below",r)}},{key:"startFilling",value:function(t){var n=this,r=t.isMega,i=t.onFillEnd,o=0;return this.emit(e.events.FILL_START),this._exec(null,function(){var t,a=(t=regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.startFilling({isMega:r});case 2:n.emit(e.events.SINGLE_FILL_END,{selected:a.selected,isMega:r,fullCount:++o}),a.selected&&!r&&n.getCovers().filter((function(t){return t.reel!==a.reel})).forEach((function(t){return t.timeScaleTweens()})),i&&i(a);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){MT(o,r,i,a,s,"next",t)}function s(t){MT(o,r,i,a,s,"throw",t)}a(void 0)}))});return function(t){return a.apply(this,arguments)}}())}},{key:"playWin",value:function(){return this.emit(e.events.WIN_START),this._exec(null,(function(t){return t.playWin()}))}},{key:"hideWonSum",value:function(){return this._exec(null,(function(t){return t.hideWonSum()}))}},{key:"skipTweens",value:function(){this._exec(null,(function(t){return t.skipTweens()}))}},{key:"_setUpCover",value:function(t,n,r){var i=n.amount,o=n.multiplier,a=n.selected;BT(FT(e.prototype),"_setUpCover",this).call(this,t,n,r),t.amount=i,t.multiplier=o,t.selected=a}}])&&DT(n.prototype,r),i&&DT(n,i),e}(Vm);function YT(t){return(YT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function KT(t,e,n){return e=$T(e),function(t,e){if(e&&("object"===YT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],$T(t).constructor):e.apply(t,n))}function ZT(t,e,n){return(ZT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$T(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function $T(t){return($T=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function JT(t,e){return(JT=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var QT=function(t){function e(){return zT(this,e),KT(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&JT(t,e)}(e,t),n=e,(r=[{key:"onShowStart",value:function(t,n,r,i){ZT($T(e.prototype),"onShowStart",this).call(this,t,n,r,i),i.isMega||!t.selected&&this.moveToContainer("below",r)}},{key:"playWin",value:function(t){return this._exec(null,(function(e){return e.playWin(t)}))}},{key:"_setUpCover",value:function(t,n,r){var i=n.selected;ZT($T(e.prototype),"_setUpCover",this).call(this,t,n,r),t.selected=i}}])&&qT(n.prototype,r),i&&qT(n,i),e}(Vm);function tw(t){return(tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ew(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nw(t,e,n){return e=iw(e),function(t,e){if(e&&("object"===tw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],iw(t).constructor):e.apply(t,n))}function rw(t,e,n){return(rw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iw(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function iw(t){return(iw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ow(t,e){return(ow=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var aw=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=nw(this,e,[t]))._markers=new qt.a.BeerBonus.markers,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ow(t,e)}(e,t),n=e,(r=[{key:"onShowStart",value:function(t,n,r,i){rw(iw(e.prototype),"onShowStart",this).call(this,t,n,r,i),i.isMega||!t.selected&&this.moveToContainer("below",r)}},{key:"_setUpCover",value:function(t,n,r){var i=n.selected,o=this._markers["marker".concat(n.reel)],a=o.x,s=o.y;rw(iw(e.prototype),"_setUpCover",this).call(this,t,n,r),t.selected=i,t.position.set(a,s)}}])&&ew(n.prototype,r),i&&ew(n,i),e}(Vm);function sw(t){return(sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cw(t,e,n){return e=lw(e),function(t,e){if(e&&("object"===sw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],lw(t).constructor):e.apply(t,n))}function lw(t){return(lw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hw(t,e){return(hw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fw=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=cw(this,e,[t]))._taps=n._getMcsByName("tap"),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hw(t,e)}(e,t),n=e,(r=[{key:"showTapEffect",value:function(t){var n=t.isMega,r=t.choiceId;return this._taps.map((function(t){if(n||t.name.includes(r))return t.promises.gotoAndPlay(e.animLabels.SHOW)}))}},{key:"hideTapEffect",value:function(t){return this.anim["tap".concat(t)].promises.gotoAndPlay(e.animLabels.HIDE)}},{key:"_getMcsByName",value:function(t){return this.anim.children.filter((function(e){var n;return null===(n=e.name)||void 0===n?void 0:n.includes(t)}))}}])&&uw(n.prototype,r),i&&uw(n,i),e}(E);function pw(t){return(pw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dw(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function yw(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){dw(o,r,i,a,s,"next",t)}function s(t){dw(o,r,i,a,s,"throw",t)}a(void 0)}))}}function mw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vw(t,e,n){return e=gw(e),function(t,e){if(e&&("object"===pw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],gw(t).constructor):e.apply(t,n))}function _w(t,e,n){return(_w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gw(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function gw(t){return(gw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bw(t,e){return(bw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ew(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Tw(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ew(Object(n),!0).forEach((function(e){ww(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ew(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ww(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xw=Tw(Tw({},E.animLabels),{},{WIN:"win",WIN_ACTIVE:"winActive",WIN_INACTIVE:"winInactive",SHOW_ACTIVE:"showActive",SHOW_INACTIVE:"showInactive",OVERFLOW:"overflow"}),Sw=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=vw(this,e,[t])).reel=null,n.index=null,n.amount=0,n.multiplier=0,n.selected=!1,n._isSkippable=!1,n._isSkipped=!1,n._moveTween=null,n._sumMoveTween=null,n._foamScaleTween=null,n._bangupTween=null,n._sumPulseTimeline=w.a.timeline(),n._fitBounds=null,n._counter=null,n._progressBar=n.anim.progressBarIn,n._sumAnimation=n.anim.sum.sumContainer,n._setMasks(),n._createCounter(),n}var n,i,o,a,s,u,c;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bw(t,e)}(e,t),n=e,i=[{key:"currentCount",get:function(){return this._counter.currentCount},set:function(t){this._counter.currentCount=t}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.force||!this._isShowing&&!this._isShown){var n=e.animLabels,r=n.SHOW_ACTIVE,i=n.SHOW_INACTIVE;return t.animLabel=this.selected?r:i,_w(gw(e.prototype),"show",this).call(this,t)}}},{key:"startFilling",value:(c=yw(regeneratorRuntime.mark((function t(n){var r,i,o,a,s,u,c,l,h,f,p,d,y,m,v,_,g;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.isMega,i=e.animLabels.SHOW,o=this._config,a=o.counter,s=a.downScale,u=a.upScale,c=o.fullGlassMultiplier,l=this._progressBar,h=l.slider,f=l.fill,p=l.fillMask,d=p.y,y=Math.abs(f.y-d),m=y/c*Math.min(c,this.multiplier),v=this._calcBangupDuration(r),_=this._calcDistanceDuration(r),g=this.selected?u:s,!r&&this._sumAnimation.scale.set(g,g),h.promises.gotoAndPlay(i),this._sumAnimation.promises.gotoAndPlay(i),this._isSkipped=!1,this._isSkippable=!0,t.next=18,Promise.all([this._bangupSum({duration:v,isMega:r}),this._fill({duration:_,distance:m,maxDistance:y})]);case 18:this._isSkippable=!1;case 19:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"playWin",value:(u=yw(regeneratorRuntime.mark((function t(){var n,r,i,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.animLabels,r=n.WIN,i=n.WIN_ACTIVE,o=n.WIN_INACTIVE,!this.selected){t.next=6;break}return t.next=4,Promise.all([this.play(r),this._sumAnimation.promises.gotoAndPlay(i)]);case 4:t.next=7;break;case 6:this._sumAnimation.promises.gotoAndPlay(o);case 7:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"hideWonSum",value:function(){return this._sumAnimation.promises.gotoAndPlay(e.animLabels.HIDE)}},{key:"timeScaleTweens",value:function(){var t=this;if(this._isSkippable&&!this._isSkipped){var e={timeScale:1};w.a.to(e,Tw(Tw({},this._config.timeScaleTween),{},{onUpdate:function(){var n,r,i,o;if(t._isSkippable&&!t._isSkipped){var a=e.timeScale;null===(n=t._moveTween)||void 0===n||n.timeScale(a),null===(r=t._sumMoveTween)||void 0===r||r.timeScale(a),null===(i=t._foamScaleTween)||void 0===i||i.timeScale(a),null===(o=t._bangupTween)||void 0===o||o.timeScale(a)}}}))}}},{key:"skipTweens",value:function(){var t,e,n,r;this._isSkippable&&!this._isSkipped&&(this._isSkipped=!0,null===(t=this._moveTween)||void 0===t||t.seek(null,!1),null===(e=this._sumMoveTween)||void 0===e||e.seek(null,!1),null===(n=this._foamScaleTween)||void 0===n||n.seek(null,!1),null===(r=this._bangupTween)||void 0===r||r.seek(null,!1),this.currentCount=this.amount)}},{key:"_fill",value:(s=yw(regeneratorRuntime.mark((function t(n){var r,i,o,a,s,u,c,l,h,f,p,d,y,m,v,_,g,b,E,T,x,S=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.distance,i=n.maxDistance,o=n.duration,a=this._progressBar,s=a.slider,u=a.fillMask,c=e.animLabels,l=c.OVERFLOW,h=c.SHOW,f=c.HIDE,p=this._config,d=p.tweensEase,y=p.foam,m=y.ease,v=y.maxAddScale,_=p.sumAnim.endPosOffsetY,g=p.fullGlassMultiplier,b=v/i*r,E=i-_,T=Math.min(r,E),x=o/r*T,this._moveTween=w.a.to([u,s],{y:"-=".concat(r),ease:d,duration:o,onComplete:function(){S.multiplier<g||(S.anim.promises.gotoAndPlay(l),S.anim.foam.promises.gotoAndPlay(h,{repeat:-1}))}}),this._sumMoveTween=w.a.to(this._sumAnimation,{y:"-=".concat(T),ease:d,duration:x}),this._foamScaleTween=w.a.to(s.foamUp.inner.scale,{y:"+=".concat(b),ease:m,duration:o,onComplete:function(){return s.promises.gotoAndPlay(f)}}),t.next=14,Promise.all([this._moveTween,this._sumMoveTween,this._foamScaleTween]);case 14:this._killFillTweens();case 15:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"_bangupSum",value:(a=yw(regeneratorRuntime.mark((function t(n){var i,o,a,s,u,c,l,h,f=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.duration,o=n.isMega,a=this._config,s=a.counter,u=s.ignoreRatio,c=s.overscale,l=a.tweensEase,h=a.fullGlassMultiplier,this._bangupTween=this._counter.update(this.amount,{duration:i,easing:l,onUpdate:function(){return Object(r.e)(f._counter,f._fitBounds,u,c)}}),this.selected&&this._onSumBangupStart(o),t.next=6,this._bangupTween;case 6:this.multiplier>=h&&this.anim.foam.promises.finish().then((function(){return f.anim.foam.promises.gotoAndStop(e.animLabels.INIT)})),this._bangupTween.kill(),this._bangupTween=null,this.selected&&this._onSumBangupEnd();case 10:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"_createCounter",value:function(){var t=this._sumAnimation.numContainer.inner;this._fitBounds||(this._fitBounds=t.getLocalBounds()),this._counter=new k({config:Tw({fontSize:this._fitBounds.height},this._config.counter)}),t.removeChildren(),t.addChild(this._counter),this._counter.currentCount=0}},{key:"_calcBangupDuration",value:function(t){var e=this._config.counter,n=e.bangupSpeed,r=e.bangupSpeedMega;return this.multiplier/(t?r:n)}},{key:"_calcDistanceDuration",value:function(t){var e=this._config,n=e.counter,r=n.bangupSpeed,i=n.bangupSpeedMega,o=e.fullGlassMultiplier;return Math.min(o,this.multiplier)/(t?i:r)}},{key:"_onSumBangupStart",value:function(t){var e=this._config.sumAnim,n=e.pumpDuration,r=e.pumpEase,i=e.deflateDuration,o=e.deflateEase,a=e.peakDelay,s=e.scaleNormal,u=e.scaleMega,c=this._sumAnimation.numContainer.inner,l=t?u:s;this._sumPulseTimeline.clear(),this._sumPulseTimeline.to(c.scale,{duration:n,ease:r,x:l,y:l}).to(c.scale,{duration:i,ease:o,x:1,y:1},"+="+a).repeat(-1).play()}},{key:"_onSumBangupEnd",value:function(){return this._sumPulseTimeline.clear(),this._sumPulseTimeline.kill(),w.a.to(this._sumAnimation.numContainer.inner.scale,this._config.sumAnim.reset)}},{key:"_setMasks",value:function(){var t=this._progressBar,e=t.fill,n=t.fillMask,r=t.slider,i=t.glassMask;n.renderable=!1,i.renderable=!1,e.mask=n,r.mask=i.children[0]}},{key:"_killFillTweens",value:function(){var t,e,n;null===(t=this._moveTween)||void 0===t||t.kill(),null===(e=this._sumMoveTween)||void 0===e||e.kill(),null===(n=this._foamScaleTween)||void 0===n||n.kill(),this._moveTween=null,this._sumMoveTween=null,this._foamScaleTween=null}}],o=[{key:"animLabels",get:function(){return xw}}],i&&mw(n.prototype,i),o&&mw(n,o),e}(E);function Ow(t){return(Ow="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Aw(t,e,n){return e=Cw(e),function(t,e){if(e&&("object"===Ow(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Cw(t).constructor):e.apply(t,n))}function Iw(t,e,n){return(Iw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cw(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Cw(t){return(Cw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function kw(t,e){return(kw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Nw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Mw(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nw(Object(n),!0).forEach((function(e){jw(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nw(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function jw(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Dw=Mw(Mw({},E.animLabels),{},{WIN:"win",SHOW_ACTIVE:"showActive",SHOW_INACTIVE:"showInactive"}),Lw=function(t){function e(){return Pw(this,e),Aw(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kw(t,e)}(e,t),n=e,i=[{key:"animLabels",get:function(){return Dw}}],(r=[{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.force||!this._isShowing&&!this._isShown){var n=e.animLabels,r=n.SHOW_ACTIVE,i=n.SHOW_INACTIVE;return t.animLabel=this.selected?r:i,this.selected&&(this.anim.beerBonusFrame.promises.gotoAndPlay(e.animLabels.SHOW),!t.isMega&&this.anim.activeFx.promises.gotoAndPlay(e.animLabels.SHOW)),Iw(Cw(e.prototype),"show",this).call(this,t)}}},{key:"hide",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.force||(this._isShown||this._isShowing)&&!this._isHiding)return this.selected&&(this.anim.beerBonusFrame.promises.gotoAndPlay(e.animLabels.HIDE),!t.isMega&&this.anim.activeFx.promises.gotoAndPlay(e.animLabels.HIDE)),Iw(Cw(e.prototype),"hide",this).call(this,t)}},{key:"playWin",value:function(t){if(this.selected)return Promise.all([this.play(e.animLabels.WIN),!t&&this.anim.activeFx.promises.gotoAndPlay(e.animLabels.WIN)])}}])&&Rw(n.prototype,r),i&&Rw(n,i),e}(E);function Bw(t){return(Bw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gw(t,e,n){return e=Hw(e),function(t,e){if(e&&("object"===Bw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Hw(t).constructor):e.apply(t,n))}function Hw(t){return(Hw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vw(t,e){return(Vw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xw=function(t){function e(){return Fw(this,e),Gw(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vw(t,e)}(e,t),n=e,(r=[{key:"onReelEvent",value:function(t){var e=t.skipPositions,n=void 0===e?[]:e,r=t.skipReels,i=void 0===r?[]:r,o=t.reel,a=this._getMatchingData(o).filter((function(t){var e=t.reel,r=t.index;return!i.includes(e)&&!n.some((function(t){return e===t.reel&&r===t.index}))}));if(a.length)return this.activate(a,{animLabel:t.animLabel,attachToReels:t.attachToReels})}}])&&Uw(n.prototype,r),i&&Uw(n,i),e}(ov);function Ww(t){return(Ww="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zw(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qw(t,e,n){return e=Kw(e),function(t,e){if(e&&("object"===Ww(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Kw(t).constructor):e.apply(t,n))}function Kw(t){return(Kw=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zw(t,e){return(Zw=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $w=function(t){function e(){return Yw(this,e),qw(this,e,arguments)}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zw(t,e)}(e,t),n=e,(i=[{key:"_isValid",value:function(t){return!(!this._hasFrame(this._anim.tileEffect,t)&&!Object(r.j)(this._anim.tileEffect,t)&&(console.warn('"'.concat(this.name,'" ==> Missing animation state: ').concat(t)),1))}},{key:"_playAnimation",value:function(t,e){return this._loopsCount=e.repeat,this._exec((function(n){return n.tileEffect.promises.gotoAndPlay(t,e)}))}}])&&zw(n.prototype,i),o&&zw(n,o),e}(E);function Jw(t){return(Jw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qw(t){return function(t){if(Array.isArray(t))return tx(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return tx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tx(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tx(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ex(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rx(t,e,n){return e=ix(e),function(t,e){if(e&&("object"===Jw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],ix(t).constructor):e.apply(t,n))}function ix(t){return(ix=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ox(t,e){return(ox=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ax=function(t){function e(){return ex(this,e),rx(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ox(t,e)}(e,t),n=e,(r=[{key:"onCreated",value:function(t,e,n){var r,i=n.coords;i&&(r=t.position).set.apply(r,Qw(Object.values(i)))}},{key:"_createCover",value:function(t,e,n){var r=e.cover,i=void 0===r?E:r,o=e.animations,a=e.config,s=e.mask,u=o.rainingBonusEffect,c=o.rainingTileEffect;return new i({animation:this._config.specialIds.includes(t.tileId)?u:c,config:a,mask:s,data:t})}}])&&nx(n.prototype,r),i&&nx(n,i),e}(Ur);function sx(t){return(sx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ux=["shouldFlip"];function cx(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function lx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hx(t,e,n){return e=fx(e),function(t,e){if(e&&("object"===sx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],fx(t).constructor):e.apply(t,n))}function fx(t){return(fx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function px(t,e){return(px=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var dx=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=hx(this,e,[t]))._isSkipped=!1,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&px(t,e)}(e,t),n=e,(r=[{key:"activate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.shouldFlip,n=cx(t,ux);return this._isSkipped=!1,this._setFramerate(this._config.framerate.normal),e&&this.flip(),this.show(n)}},{key:"skip",value:function(){this._isSkipped||(this._isSkipped=!0,this._setFramerate(this._config.framerate.skip))}},{key:"_setFramerate",value:function(t){this.anim.framerate=t,this.anim.hat.framerate=t}}])&&lx(n.prototype,r),i&&lx(n,i),e}(jE);function yx(t){return(yx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var mx=["duration"];function vx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vx(Object(n),!0).forEach((function(e){gx(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vx(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gx(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bx(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ex(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Tx(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return wx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wx(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function wx(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sx(t,e,n){return e=Ox(e),function(t,e){if(e&&("object"===yx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Ox(t).constructor):e.apply(t,n))}function Ox(t){return(Ox=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Px(t,e){return(Px=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Rx={ACTIVATE_START:"activateStart"},Ax=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Sx(this,e,[t]))._lastEntered={},n}var n,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Px(t,e)}(e,t),n=e,i=[{key:"reset",value:function(){this._lastEntered={}}},{key:"_handleTileEnter",value:function(t,e,n,i){var o,a=this._lastEntered[e]||0,s=Tx(Object(r.k)(Math.max(a-i,1)).reverse());try{for(s.s();!(o=s.n()).done;){var u=o.value,c=u?this._reelMaster.reels[e].getTileData(u):t;this._triggerEffect({tileData:c,reelIndex:e,label:n,tileIndex:u}),this._lastEntered[e]=i+u}}catch(t){s.e(t)}finally{s.f()}}},{key:"_triggerEffect",value:function(t){var n=t.tileData,r=t.reelIndex,i=t.label,o=t.tileIndex;if(this._shouldTrigger({tileData:n,label:i,tileIndex:o,reelIndex:r})){var a=this._createEffect({reel:r,index:o,id:n.id});this.emit(e.events.ACTIVATE_START,{reel:r,index:o,id:n.id}),a.show(this._config.onShow)}}},{key:"_shouldTrigger",value:function(t){var e=t.tileData,n=t.label,r=t.tileIndex,i=t.reelIndex;return!(!this.enabled||e.id!==this._config.tileId||n===oe.labels.EASE_END&&!this._isInstantStopping()||n===oe.labels.EASE_START||this._isFirstTile(i)||r>=Gn.a.reels.tiles.visible)}},{key:"_updatePosition",value:function(t,e){t.y+=e}},{key:"_isInstantStopping",value:function(){return this._reelMaster.controller.isInstantStopping}},{key:"_isFirstTile",value:function(t){return!(this._lastEntered[t]-1-this._reelMaster.reels[t].currentSize)}},{key:"_removeEffect",value:(a=regeneratorRuntime.mark((function t(e){var n,r,i,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this._config.fadeOut,i=(r=void 0===n?{}:n).duration,o=void 0===i?.2:i,a=bx(r,mx),t.next=3,Tm.a.to(e,_x({alpha:0,duration:o},a));case 3:this.removeChild(e);case 4:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=a.apply(t,e);function o(t){Ex(i,n,r,o,s,"next",t)}function s(t){Ex(i,n,r,o,s,"throw",t)}o(void 0)}))},function(t){return s.apply(this,arguments)})}],o=[{key:"events",get:function(){return Rx}}],i&&xx(n.prototype,i),o&&xx(n,o),e}(Rs);function Ix(t){return(Ix="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Cx=["force"];function kx(t){return function(t){if(Array.isArray(t))return Bx(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Lx(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Mx(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nx(Object(n),!0).forEach((function(e){jx(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nx(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function jx(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dx(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(t,e)||Lx(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lx(t,e){if(t){if("string"==typeof t)return Bx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bx(t,e):void 0}}function Bx(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fx(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ux(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gx(t,e,n){return e=Hx(e),function(t,e){if(e&&("object"===Ix(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],Hx(t).constructor):e.apply(t,n))}function Hx(t){return(Hx=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vx(t,e){return(Vx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xx={x:0,y:0,width:5,height:5},Wx=function(t){function e(t){var n,r=t.reelMaster,i=t.animation,o=t.config;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Gx(this,e)).anim=i,n._reelMaster=r,n._config=o,n._activePositions=[],n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vx(t,e)}(e,t),n=e,(r=[{key:"burst",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.reel,i=t.index,o=Object(uu.a)(this._config,n),a=o.force,s=void 0!==a&&a,u=Fx(o,Cx);if(!this._activePositions.some((function(t){return t.reel===r&&t.index===i}))||s){this._activePositions.push({reel:r,index:i});var c=this._parseConfig(u),l=c.sources,h=c.particles,f=this._getEmitterGuide(t,u);Object.entries(h).forEach((function(n){var r=Dx(n,2),i=r[0],o=r[1];return e._activateParticles({type:i,sources:l,guide:f,cover:t,config:o},u)}))}}},{key:"reset",value:function(){this._activePositions=[]}},{key:"_parseConfig",value:function(t){var e=t.particlesEmitter,n=t.particlesSource,r=t.label;return{sources:r?jx({},r,n[r]):n,particles:r?jx({},r,e[r]):e}}},{key:"_getEmitterGuide",value:function(t,e){var n=t.anim,r=(void 0===n?{}:n).emitterGuide,i=t.reel,o=e.useReelBounds,a=void 0!==o&&o,s=e.customGuide,u=e.fromCenter;return s||void 0!==u&&u?s||Xx:a?this._reelMaster.getReelBounds(i):Mx(Mx({},r.getLocalBounds()),{},{height:r.height})}},{key:"_activateParticles",value:function(t,e){var n,r=this,i=t.type,o=t.sources,a=t.guide,s=t.cover,u=t.config,c=e.duration,l=o[i].map((function(t){return r.anim[t]})),h=new co({guide:a,source:l,config:u});(n=h.position).set.apply(n,kx(this._getPosition(s,e))),this.addChild(h),h.activate({duration:c}).then((function(){return h.destroy({children:!0})}))}},{key:"_getPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.fromCenter,r=void 0!==n&&n,i=e.useReelBounds,o=void 0!==i&&i,a=t.position,s=a.x,u=a.y,c=o?[]:[s,u];return r?this._getCenterPosition(t,e):c}},{key:"_getCenterPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.centerUsingTileGuide,r=void 0!==n&&n,i=e.centerUsingReelBounds,o=void 0===i?this._config.useReelBounds:i,a=e.centerUsingOriginEmitterGuide,s=void 0!==a&&a,u=e.centerUsingCustomGuide,c=void 0!==u&&u,l=e.customGuide,h=t.anim,f=void 0===h?{}:h,p=f.emitterGuide,d=t.reel,y=t.position,m=void 0===y?{}:y,v=m.x,_=m.y,g=t.width,b=t.height,E={width:g,height:b};o?E=this._reelMaster.getReelBounds(d):r?E=this._getTileGuide(d):s?E=p.getLocalBounds():c&&(E=l);var T=E,w=T.width,x=T.height;return[v+w/2,_+x/2]}},{key:"_getTileGuide",value:function(t){var e,n=this._reelMaster,r=n.reels,i=n.tileGuide;return i[null===(e=r[t])||void 0===e?void 0:e.currentSize]||i}}])&&Ux(n.prototype,r),i&&Ux(n,i),e}(o.Container);function Yx(t){return(Yx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zx(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qx(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Kx(t,e,n){return e=$x(e),function(t,e){if(e&&("object"===Yx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],$x(t).constructor):e.apply(t,n))}function Zx(t,e,n){return(Zx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$x(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function $x(t){return($x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jx(t,e){return(Jx=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qx=function(t){function e(){return zx(this,e),Kx(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jx(t,e)}(e,t),n=e,(r=[{key:"onShowStart",value:function(t,n,r,i){Zx($x(e.prototype),"onShowStart",this).call(this,t,n,r,i),this._playInner(t,n)}},{key:"onPlayStart",value:function(t,n,r){Zx($x(e.prototype),"onPlayStart",this).call(this,t,n,r),this._playInner(t,n)}},{key:"_playInner",value:function(t,n){var r=this._config.thresholds,i=r.second,o=r.third,a=t.tileId===this._config.fairyId?t.anim:t.anim.symbol,s=a.hit2,u=a.hit3;n===e.animLabels.SHOW&&(t.countNumber>=i&&s.promises.gotoAndPlay("show"),t.countNumber>=o&&u.promises.gotoAndPlay("show"))}},{key:"_setUpCover",value:function(t,n,r){Zx($x(e.prototype),"_setUpCover",this).call(this,t,n,r),t.countNumber=this.allChildren.length+1}}])&&qx(n.prototype,r),i&&qx(n,i),e}(ov);function tS(t){return(tS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eS(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return nS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nS(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function nS(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rS(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function iS(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){rS(o,r,i,a,s,"next",t)}function s(t){rS(o,r,i,a,s,"throw",t)}a(void 0)}))}}function oS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sS(t,e,n){return e=cS(e),function(t,e){if(e&&("object"===tS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],cS(t).constructor):e.apply(t,n))}function uS(t,e,n){return(uS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cS(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function cS(t){return(cS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lS(t,e){return(lS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fS(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hS(Object(n),!0).forEach((function(e){pS(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pS(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var dS=fS(fS({},Qx.animLabels),{},{COLLECT:"collect",HIDE_COLLECT:"hideCollect"}),yS=fS(fS({},Qx.events),{},{PARTICLES_BURST_START:"particles_burst_start"}),mS="burst",vS=function(t){function e(){return oS(this,e),sS(this,e,arguments)}var n,i,o,a,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lS(t,e)}(e,t),n=e,i=[{key:"onCreated",value:function(t,n,r){var i=this;uS(cS(e.prototype),"onCreated",this).call(this,t,n,r),t.anim.once(mS,(function(){return i.emit(e.events.PARTICLES_BURST_START,{cover:t})}))}},{key:"collect",value:(s=iS(regeneratorRuntime.mark((function t(e){var n,i,o,a,s,u,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this._config.delays,i=(void 0===n?{}:n).betweenSingleCollect,o=void 0===i?0:i,a=[],s=this.getCovers(),u=eS(s),t.prev=4,u.s();case 6:if((c=u.n()).done){t.next=15;break}if(l=c.value,a.push(this._collectSingle(l,e)),t.t0=o,!t.t0){t.next=13;break}return t.next=13,Object(r.d)(o);case 13:t.next=6;break;case 15:t.next=20;break;case 17:t.prev=17,t.t1=t.catch(4),u.e(t.t1);case 20:return t.prev=20,u.f(),t.finish(20);case 23:return t.abrupt("return",Promise.all(a));case 24:case"end":return t.stop()}}),t,this,[[4,17,20,23]])}))),function(t){return s.apply(this,arguments)})},{key:"_collectSingle",value:(a=iS(regeneratorRuntime.mark((function t(n,i){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=i.onSingleCollect,t.next=3,this._playAnimation(e.animLabels.COLLECT,n,i);case 3:return t.next=5,Object(r.d)(this._config.delays.afterCollectShow);case 5:return o&&o(),t.next=8,this._playAnimation(e.animLabels.HIDE_COLLECT,n,i);case 8:case"end":return t.stop()}}),t,this)}))),function(t,e){return a.apply(this,arguments)})}],o=[{key:"animLabels",get:function(){return dS}},{key:"events",get:function(){return yS}}],i&&aS(n.prototype,i),o&&aS(n,o),e}(Qx);function _S(t){return(_S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var gS=["config"],bS=["playAll","symbolsCount"];function ES(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function TS(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function wS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xS(t,e,n){return e=SS(e),function(t,e){if(e&&("object"===_S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],SS(t).constructor):e.apply(t,n))}function SS(t){return(SS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function OS(t,e){return(OS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function PS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function RS(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?PS(Object(n),!0).forEach((function(e){AS(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function AS(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var IS=RS(RS({},E.animLabels),{},{SHOW2:"show2"}),CS=function(t){function e(t){var n,r=t.config,i=TS(t,gS);return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=xS(this,e))._config=r,n._coverFactory=function(){return new E(i)},n}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&OS(t,e)}(e,t),n=e,r=[{key:"activate",value:(o=regeneratorRuntime.mark((function t(){var n,r,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:{},r=this._coverFactory(),this.addChildAt(r,0),this.emit(e.events.SHOW_START,n),t.next=6,this._playCoverAnimation(r,n);case 6:r.destroy(),this.emit(e.events.SHOW_END,n);case 8:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){ES(i,n,r,a,s,"next",t)}function s(t){ES(i,n,r,a,s,"throw",t)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"_playCoverAnimation",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.anim,i=r.first,o=r.second,a=r.third,s=n.playAll,u=void 0!==s&&s,c=n.symbolsCount,l=void 0===c?0:c,h=TS(n,bS),f=this._config,p=f.firstEffectThreshold,d=f.secondEffectThreshold,y=f.thirdEffectThreshold,m=e.animLabels,v=m.SHOW,_=m.SHOW2,g=[t.show(h)];if(i&&(u||l===p)&&g.push(i.promises.gotoAndPlay(v)),o&&(u||l===d)&&g.push(o.promises.gotoAndPlay(v)),a&&(u||l>=y)){var b=void 0===a.labelsMap[_]||l%2?v:_;g.push(a.promises.gotoAndPlay(b))}return Promise.all(g)}}],i=[{key:"events",get:function(){return E.events}},{key:"animLabels",get:function(){return IS}}],r&&wS(n.prototype,r),i&&wS(n,i),e}(o.Container);function kS(t){return(kS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function MS(t,e,n){return e=jS(e),function(t,e){if(e&&("object"===kS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],jS(t).constructor):e.apply(t,n))}function jS(t){return(jS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function DS(t,e){return(DS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var LS=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=MS(this,e,[t]),Object(a.a)(n.anim),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&DS(t,e)}(e,t),n=e,r&&NS(n.prototype,r),i&&NS(n,i),n;var n,r,i}(E);function BS(t){return(BS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function FS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function US(t,e,n){return e=GS(e),function(t,e){if(e&&("object"===BS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],GS(t).constructor):e.apply(t,n))}function GS(t){return(GS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function HS(t,e){return(HS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var VS=function(t){function e(t){var n,r=t.config;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=US(this,e))._config=r,n.graphic=n._createMask(),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&HS(t,e)}(e,t),n=e,(r=[{key:"apply",value:function(t){t.mask=this.graphic}},{key:"unmask",value:function(t){t.mask=null,this.graphic.renderable=!1}},{key:"_createMask",value:function(){var t=this._config,e=t.color,n=t.x,r=t.y,i=t.width,a=t.height,s=(new o.Graphics).beginFill(e).drawRect(n,r,i,a);return s.renderable=!1,this.addChild(s),s}}])&&FS(n.prototype,r),i&&FS(n,i),e}(o.Container);function XS(t){return(XS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WS(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function YS(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zS(t,e,n){return e=qS(e),function(t,e){if(e&&("object"===XS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],qS(t).constructor):e.apply(t,n))}function qS(t){return(qS=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function KS(t,e){return(KS=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ZS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ZS(Object(n),!0).forEach((function(e){JS(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function JS(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var QS=$S($S({},E.events),{},{RAINBOW_SHOW:"rainbow",LOGO:"logo"}),tO=function(t){function e(){return WS(this,e),zS(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&KS(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return QS}}],(r=[{key:"awaitEmit",value:function(t){var e=new um.a;return this.anim.once(t,(function(){return e.complete()})),e.wait()}}])&&YS(n.prototype,r),i&&YS(n,i),e}(E);function eO(t){return(eO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function iO(t,e,n){return e=aO(e),function(t,e){if(e&&("object"===eO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],aO(t).constructor):e.apply(t,n))}function oO(t,e,n){return(oO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=aO(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function aO(t){return(aO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sO(t,e){return(sO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var uO=function(t){function e(){return nO(this,e),iO(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sO(t,e)}(e,t),n=e,(r=[{key:"_adjustPosition",value:function(){var t=this._adjustGuide.getLocalBounds(),n=t.width,r=t.height;oO(aO(e.prototype),"_adjustPosition",this).call(this);var i=this._anim.main.shadow;i&&(i.scale.x=(this._innerContainer.width+this._innerContainer.width/this._config.scaleFactor)/i.inner.width,i.x=this._adjustGuide.x+n/2,i.y=this._adjustGuide.y+r/2)}}])&&rO(n.prototype,r),i&&rO(n,i),e}(Wi);function cO(t){return(cO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fO(t,e,n){return e=pO(e),function(t,e){if(e&&("object"===cO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],pO(t).constructor):e.apply(t,n))}function pO(t){return(pO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dO(t,e){return(dO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yO=function(t){function e(){return lO(this,e),fO(this,e,arguments)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dO(t,e)}(e,t),n=e,(r=[{key:"_updateTitle",value:function(){var t=this.anim.textContainer,e=this.animLabels,n=e.LAST_SPIN,r=e.RETURN_SPINS,i=e.SPIN,o=e.SPINS,a=e.INIT;this._count?(this._isInLastSpin&&this.play(r),1===this._count?this._isInLastSpin?t.promises.gotoAndStop(Og(t,i)):t.promises.gotoAndPlay(i):[o,a].includes(t.currentLabel)||t.promises.gotoAndPlay(o),this._isInLastSpin=!1):(this._isInLastSpin=!0,this.play(n))}}])&&hO(n.prototype,r),i&&hO(n,i),e}(W);function mO(t){return(mO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vO(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function _O(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bO(t,e,n){return e=EO(e),function(t,e){if(e&&("object"===mO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){return!1}}()?Reflect.construct(e,n||[],EO(t).constructor):e.apply(t,n))}function EO(t){return(EO=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function TO(t,e){return(TO=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wO=function(t){function e(){return _O(this,e),bO(this,e,arguments)}var n,r,i,o,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&TO(t,e)}(e,t),n=e,(r=[{key:"set",value:(o=regeneratorRuntime.mark((function t(n){var r,i,o=this,a=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:0,i=a.length>2&&void 0!==a[2]&&a[2],this.emit(e.events.UPDATE_START,{isInstant:!r,silent:i}),0!==r){t.next=8;break}return this.value=parseFloat(n),Y.a.emit(Y.a.events.WINBAR_CHANGE,{value:this.value}),this._bangupPromise=Promise.resolve(),t.abrupt("return",this.emit(e.events.UPDATE_END,{isInstant:!r,silent:i}));case 8:return this._bangupTween=w.b.to(this,{duration:r,value:parseFloat(n),onUpdate:function(){return Y.a.emit(Y.a.events.WINBAR_CHANGE,{value:o.value})}}),this._bangupPromise=this._bangupTween.then(),t.next=12,this._bangupPromise;case 12:this.emit(e.events.UPDATE_END,{isInstant:!r,silent:i});case 13:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){vO(i,n,r,a,s,"next",t)}function s(t){vO(i,n,r,a,s,"throw",t)}a(void 0)}))},function(t){return a.apply(this,arguments)})}])&&gO(n.prototype,r),i&&gO(n,i),e}(Jn);function xO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function SO(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xO(Object(n),!0).forEach((function(e){OO(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function OO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.a=SO(SO({},nd),{},{AnticipationLayers:Od,CustomCascadeTile:Nd,MegaWaysCascade:Wd,WinTiles:iy,WaysWins:_y,RespinWins:by,ExtraWin:Fy,CenterWinBar:tm,SceneEffects:sm,FinishCover:Em,JackpotPopupTiles:gv,Jackpots:kv,FatTiles:i_,FatTileCover:m_,MegaWaysCounter:R_,CascadeAnticipation:D_,CascadeAnticipationBg:X_,CascadeAnticipationController:Q_,AnticipationFade:cg,MegaWaysPopupTiles:ov,FairyPicker:Zg,FairyArrows:rb,FairyActivator:Sg,FairyTrailParticles:Tb,FairySplash:Mb,RainingTiles:$b,RainingTilesMega:oE,MultiplierCover:mE,Multiplier:AE,CharacterActivator:$E,SpinConfigurator:QE,BeerBonusSplash:_T,BeerBonusPlate:kT,BeerBonusGlasses:WT,BeerBonusGlassesFrames:QT,BeerBonusGlassesStreams:aw,BeerTapsCover:fw,BeerGlassCover:Sw,BeerGlassFrameCover:Lw,SeniorPopupTiles:Xw,RainingTilesEffectCover:$w,RainingTilesEffect:ax,FlipCover:jE,ChanceActivator:dx,PassingEffects:Ax,TilesParticles:Wx,FreeSpinsPopupTiles:vS,ParticlesContainer:hb,Anticipation:fd,HitEffect:CS,PrerenderedCover:LS,GameFrameMask:VS,GameIntro:tO,BurstPopupTiles:Wv,ScatterPopupTiles:Qx,WinWaysBar:uO,FreeSpinsStatus:yO,WinBar:wO})},"./src/states.js":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={INIT:"init",INTRO:"intro",READY:"ready",PLAY_START:"play_start",PLAY_DATA:"play_data",LUCKY_PIPE:"lucky_pipe",PLAY_STOP:"play_stop",PLAY_END:"play_end",WIN_LINES:"win_lines",WIN_LINES_EW:"win_lines_ew",WIN_LINES_SUM:"win_lines_sum",WIN_LINES_NO_WIN:"win_lines_no_win",BEER_BONUS:"beer_bonus",FAIRY_BONUS:"fairy_bonus",INSTANT_WIN:"instant_win",RESPIN_START:"respin_start",CASCADE:"cascade",RESPIN_END:"respin_end",FREE_SPINS_START:"free_spins_start",FREE_SPINS_BONUS:"free_spins_bonus",TOTAL_WIN:"total_win",JACKPOT_WIN:"jackpot_win",FINISH:"finish"}},"./src/texts/index.js":function(t,e,n){"use strict";var r={bg:{CANNOT_PRELOAD_ASSETS:"     :",NO_CONNECTION:"   ",REMOVE_LOCKED_TILES:"        .",TITLE_SERVER_ERROR:"  ",CHOICE_GAMBLE:"",CHOICE_COLLECT:"",CHOICE_EXCHANGE:"",CHOICE_SPIN:"",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"",FREE_SPINS_START:""},cs:{CANNOT_PRELOAD_ASSETS:"Poloky nelze nahrt:",NO_CONNECTION:"Chyb pipojen na server",REMOVE_LOCKED_TILES:"Zmna vkladu odstran vechna uzamen pole.",TITLE_SERVER_ERROR:"Chyba serveru",CHOICE_GAMBLE:"Vsadit",CHOICE_COLLECT:"Sebrat",CHOICE_EXCHANGE:"Vymte",CHOICE_SPIN:"Roztoit",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Pokraovat",FREE_SPINS_START:"Spustit"},da:{CANNOT_PRELOAD_ASSETS:"Kan ikke forindlse aktiver:",NO_CONNECTION:"Ingen forbindelse til server",REMOVE_LOCKED_TILES:"ndrer du din indsats nu, fjerner det alle lste felter.",TITLE_SERVER_ERROR:"Serverfejl",CHOICE_GAMBLE:"Gamble",CHOICE_COLLECT:"Indsaml",CHOICE_EXCHANGE:"Veksl",CHOICE_SPIN:"Spin",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Fortst",FREE_SPINS_START:"Start"},de:{CANNOT_PRELOAD_ASSETS:"Objekte knnen nicht im Voraus geladen werden:",NO_CONNECTION:"Keine Verbindung zum Server",REMOVE_LOCKED_TILES:"Durch eine nderung der Wette zum jetzigen Zeitpunkt werden alle gesperrten Kacheln entfernt.",TITLE_SERVER_ERROR:"Serverfehler",CHOICE_GAMBLE:"Spielen",CHOICE_COLLECT:"Sammeln",CHOICE_EXCHANGE:"Austausch",CHOICE_SPIN:"Drehen",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Weiter",FREE_SPINS_START:"Start"},en:{CANNOT_PRELOAD_ASSETS:"Cannot preload assets:",NO_CONNECTION:"No connection to server",REMOVE_LOCKED_TILES:"Changing your stake now will remove all the locked tiles.",TITLE_SERVER_ERROR:"Server Error",CHOICE_GAMBLE:"Gamble",CHOICE_COLLECT:"Collect",CHOICE_EXCHANGE:"Exchange",CHOICE_SPIN:"Spin",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Continue",FREE_SPINS_START:"Start"},"en-US":{CANNOT_PRELOAD_ASSETS:"Cannot preload assets:",NO_CONNECTION:"No connection to server",REMOVE_LOCKED_TILES:"Changing your stake now will remove all the locked tiles.",TITLE_SERVER_ERROR:"Server Error",CHOICE_GAMBLE:"Gamble",CHOICE_COLLECT:"Collect",CHOICE_EXCHANGE:"Exchange",CHOICE_SPIN:"Spin",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Continue",FREE_SPINS_START:"Start"},el:{CANNOT_PRELOAD_ASSETS:"      :",NO_CONNECTION:"    ",REMOVE_LOCKED_TILES:"            .",TITLE_SERVER_ERROR:" ",CHOICE_GAMBLE:"",CHOICE_COLLECT:"",CHOICE_EXCHANGE:"",CHOICE_SPIN:".",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"",FREE_SPINS_START:""},es:{CANNOT_PRELOAD_ASSETS:"No se pueden precargar los valores:",NO_CONNECTION:"No hay conexin al servidor",REMOVE_LOCKED_TILES:"Si cambia la apuesta ahora se quitarn todas las posiciones bloqueadas.",TITLE_SERVER_ERROR:"Error del servidor",CHOICE_GAMBLE:"Apostar",CHOICE_COLLECT:"Recaudar",CHOICE_EXCHANGE:"Intercambia",CHOICE_SPIN:"Girar",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Continuar",FREE_SPINS_START:"Empezar"},"es-PE":{CANNOT_PRELOAD_ASSETS:"No se pueden cargar los activos:",NO_CONNECTION:"Se perdi la conexin con el servidor.",REMOVE_LOCKED_TILES:"Si cambia su apuesta se eliminarn todas las celdas bloqueadas.",TITLE_SERVER_ERROR:"Error en el servidor",CHOICE_GAMBLE:"Apostar",CHOICE_COLLECT:"Recaudar",CHOICE_EXCHANGE:"Intercambia",CHOICE_SPIN:"Girar",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Continuar",FREE_SPINS_START:"Iniciar"},et:{CANNOT_PRELOAD_ASSETS:"Ei saa mnguressursse eellaadida:",NO_CONNECTION:"Puudub hendus serveriga",REMOVE_LOCKED_TILES:"Panuse muutmine eemaldab kik lukustatud plaadid.",TITLE_SERVER_ERROR:"Serveri viga",CHOICE_GAMBLE:"nnemng",CHOICE_COLLECT:"Kogu",CHOICE_EXCHANGE:"Vaheta",CHOICE_SPIN:"Keeruta",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Jtka",FREE_SPINS_START:"Alusta"},fi:{CANNOT_PRELOAD_ASSETS:"Varoja ei voi ladata etukteen:",NO_CONNECTION:"Ei palvelinyhteytt",REMOVE_LOCKED_TILES:"Jos muutat panosta nyt, poistetaan kaikki lukitut palkit.",TITLE_SERVER_ERROR:"Palvelinvirhe",CHOICE_GAMBLE:"Onnenpeli",CHOICE_COLLECT:"Ker",CHOICE_EXCHANGE:"Vaihda",CHOICE_SPIN:"Pelaa",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Jatka",FREE_SPINS_START:"Kynnist"},fr:{CANNOT_PRELOAD_ASSETS:"Impossible de prcharger les ressources :",NO_CONNECTION:"Aucune connexion au serveur",REMOVE_LOCKED_TILES:"Si vous modifiez votre mise, les cases verrouilles seront dbloques.",TITLE_SERVER_ERROR:"Erreur du serveur",CHOICE_GAMBLE:"Parier",CHOICE_COLLECT:"Collecter",CHOICE_EXCHANGE:"changer",CHOICE_SPIN:"Lancer",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Continuer",FREE_SPINS_START:"Dmarrer"},"fr-CA":{CANNOT_PRELOAD_ASSETS:"Impossible de prcharger les ressources:",NO_CONNECTION:"Aucune connexion au serveur",REMOVE_LOCKED_TILES:"Si vous modifiez votre mise, les cases verrouilles seront dbloques.",TITLE_SERVER_ERROR:"Erreur du serveur",CHOICE_GAMBLE:"Parier",CHOICE_COLLECT:"Collecter",CHOICE_EXCHANGE:"changez",CHOICE_SPIN:"Lancer",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Continuer",FREE_SPINS_START:"Dmarrer"},hi:{CANNOT_PRELOAD_ASSETS:"      :",NO_CONNECTION:"     ",REMOVE_LOCKED_TILES:"              ",TITLE_SERVER_ERROR:" ",CHOICE_GAMBLE:" ",CHOICE_COLLECT:"  ",CHOICE_EXCHANGE:" ",CHOICE_SPIN:"",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:" ",FREE_SPINS_START:" "},hy:{CANNOT_PRELOAD_ASSETS:"   ",NO_CONNECTION:"   ",REMOVE_LOCKED_TILES:"      :",TITLE_SERVER_ERROR:" ",CHOICE_GAMBLE:"",CHOICE_COLLECT:"",CHOICE_EXCHANGE:"",CHOICE_SPIN:"",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"",FREE_SPINS_START:""},hu:{CANNOT_PRELOAD_ASSETS:"Az eszkzk eltltse sikertelen:",NO_CONNECTION:"Nincs kapcsolat a szerverrel.",REMOVE_LOCKED_TILES:"A tted megvltoztatsval trld az sszes zrolt csempt.",TITLE_SERVER_ERROR:"Szerverhiba",CHOICE_GAMBLE:"Kockztat",CHOICE_COLLECT:"Begyjt",CHOICE_EXCHANGE:"tvlts",CHOICE_SPIN:"Prgets",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Folytats",FREE_SPINS_START:"Start"},hr:{CANNOT_PRELOAD_ASSETS:"Nemogue uitati elemente:",NO_CONNECTION:"Nema veze s posluiteljem",REMOVE_LOCKED_TILES:"Promjena uloga u ovom trenutku uklonit e sve zakljuane ploice.",TITLE_SERVER_ERROR:"Greka posluitelja",CHOICE_GAMBLE:"Kockaj",CHOICE_COLLECT:"Uzmi Dobitak",CHOICE_EXCHANGE:"Zamijeni",CHOICE_SPIN:"Okretanje",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Nastavak",FREE_SPINS_START:"Start"},id:{CANNOT_PRELOAD_ASSETS:"Tidak dapat memuat aset lebih dulu:",NO_CONNECTION:"Tidak tersambung ke server",REMOVE_LOCKED_TILES:"Mengubah taruhanmu sekarang akan menghapus semua ubin yang terkunci.",TITLE_SERVER_ERROR:"Server Bermasalah",CHOICE_GAMBLE:"Taruhan",CHOICE_COLLECT:"Kumpulkan",CHOICE_EXCHANGE:"Tukarkan",CHOICE_SPIN:"Putar",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Lanjutkan",FREE_SPINS_START:"Mulai"},it:{CANNOT_PRELOAD_ASSETS:"Impossibile caricare asset:",NO_CONNECTION:"Connessione al server assente",REMOVE_LOCKED_TILES:"Se cambi la puntata in questo momento, tutte le posizioni bloccate saranno rimosse.",TITLE_SERVER_ERROR:"Errore del server",CHOICE_GAMBLE:"Scommetti",CHOICE_COLLECT:"Riscuoti",CHOICE_EXCHANGE:"Scambia",CHOICE_SPIN:"Gira",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Continua",FREE_SPINS_START:"Inizia"},ja:{CANNOT_PRELOAD_ASSETS:":",NO_CONNECTION:"",REMOVE_LOCKED_TILES:"",TITLE_SERVER_ERROR:"",CHOICE_GAMBLE:"",CHOICE_COLLECT:"",CHOICE_EXCHANGE:"",CHOICE_SPIN:"",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"",FREE_SPINS_START:""},ka:{CANNOT_PRELOAD_ASSETS:"   :",NO_CONNECTION:"   ",REMOVE_LOCKED_TILES:"       .",TITLE_SERVER_ERROR:"  ",CHOICE_GAMBLE:"",CHOICE_COLLECT:"",CHOICE_EXCHANGE:"",CHOICE_SPIN:"Spin",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"",FREE_SPINS_START:""},ko:{CANNOT_PRELOAD_ASSETS:":",NO_CONNECTION:"  ",REMOVE_LOCKED_TILES:"      .",TITLE_SERVER_ERROR:" ",CHOICE_GAMBLE:"",CHOICE_COLLECT:"",CHOICE_EXCHANGE:"",CHOICE_SPIN:"",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"",FREE_SPINS_START:""},lt:{CANNOT_PRELOAD_ASSETS:"Nepavyko i anksto kelti itekli:",NO_CONNECTION:"Nra ryio su serveriu",REMOVE_LOCKED_TILES:"Jei dabar pakeisite savo statymo dyd, visos ufiksuotos plytels bus paalintos.",TITLE_SERVER_ERROR:"Serverio klaida",CHOICE_GAMBLE:"Laintis",CHOICE_COLLECT:"Gauti",CHOICE_EXCHANGE:"Keiskite",CHOICE_SPIN:"Sukti",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Tsti",FREE_SPINS_START:"Pradti"},lv:{CANNOT_PRELOAD_ASSETS:"Nevar ieldt resursus:",NO_CONNECTION:"Nav savienojuma ar serveri",REMOVE_LOCKED_TILES:"Ja tagad mainsi likmi, tiks noemti visi blotie sples kaulii.",TITLE_SERVER_ERROR:"Servera kda",CHOICE_GAMBLE:"Riskt",CHOICE_COLLECT:"Saemt",CHOICE_EXCHANGE:"Apmainiet",CHOICE_SPIN:"Griezt",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Turpint",FREE_SPINS_START:"Skt"},ms:{CANNOT_PRELOAD_ASSETS:"Tidak dapat pramuat aset:",NO_CONNECTION:"Tiada sambungan ke pelayan",REMOVE_LOCKED_TILES:"Menukarkan pertaruhan anda sekarang akan mengeluarkan semua jubin dikunci.",TITLE_SERVER_ERROR:"Ralat Pelayan",CHOICE_GAMBLE:"Taruh",CHOICE_COLLECT:"Kumpul",CHOICE_EXCHANGE:"Tukar",CHOICE_SPIN:"Putar",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Teruskan",FREE_SPINS_START:"Mula"},nl:{CANNOT_PRELOAD_ASSETS:"Kan vooraf geen activa laden:",NO_CONNECTION:"Geen verbinding met de server",REMOVE_LOCKED_TILES:"Door nu uw inzet te veranderen verwijdert u alle vergrendelde tegels.",TITLE_SERVER_ERROR:"Serverfout",CHOICE_GAMBLE:"Gokken",CHOICE_COLLECT:"Innen",CHOICE_EXCHANGE:"Wissel In",CHOICE_SPIN:"Draaien",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Doorgaan",FREE_SPINS_START:"Start"},no:{CANNOT_PRELOAD_ASSETS:"Kan ikke forhndsinnlaste ressurser:",NO_CONNECTION:"Ingen tilkobling til serveren",REMOVE_LOCKED_TILES:"Endrer du innsatsen din n oppheves alle de lste feltene.",TITLE_SERVER_ERROR:"Serverfeil",CHOICE_GAMBLE:"Gamble",CHOICE_COLLECT:"Samle Inn",CHOICE_EXCHANGE:"Veksle",CHOICE_SPIN:"Spinn",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Fortsette",FREE_SPINS_START:"Start"},pl:{CANNOT_PRELOAD_ASSETS:"Nie mona wczyta zasobw:",NO_CONNECTION:"Brak poczenia z serwerem",REMOVE_LOCKED_TILES:"Zmiana stawki usunie zablokowane pola.",TITLE_SERVER_ERROR:"Bd serwera",CHOICE_GAMBLE:"Postaw",CHOICE_COLLECT:"Zbierz",CHOICE_EXCHANGE:"Wymie",CHOICE_SPIN:"Obrt",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Kontynuuj",FREE_SPINS_START:"Start"},pt:{CANNOT_PRELOAD_ASSETS:"Impossvel fazer o pr-carregamento de ativos.",NO_CONNECTION:"Sem ligao ao servidor",REMOVE_LOCKED_TILES:"Mudar a sua aposta agora remover todos os blocos trancados.",TITLE_SERVER_ERROR:"Erro de Servidor",CHOICE_GAMBLE:"Arriscar",CHOICE_COLLECT:"Receber",CHOICE_EXCHANGE:"Troque",CHOICE_SPIN:"Rodar",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Continuar",FREE_SPINS_START:"Iniciar"},"pt-BR":{CANNOT_PRELOAD_ASSETS:"Impossvel fazer o pr-carregamento de ativos.",NO_CONNECTION:"Sem ligao ao servidor",REMOVE_LOCKED_TILES:"Mudar a sua aposta agora remover todos os blocos trancados.",TITLE_SERVER_ERROR:"Erro de Servidor",CHOICE_GAMBLE:"Apostar",CHOICE_COLLECT:"Coletar",CHOICE_EXCHANGE:"Trocar",CHOICE_SPIN:"Rodar",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Continuar",FREE_SPINS_START:"Iniciar"},ro:{CANNOT_PRELOAD_ASSETS:"Nu se pot prencrca resursele:",NO_CONNECTION:"Fr conexiune la server",REMOVE_LOCKED_TILES:"Dac schimbai miza acum, vor fi eliminate toate plcile blocate.",TITLE_SERVER_ERROR:"Eroare de server",CHOICE_GAMBLE:"Pariai",CHOICE_COLLECT:"Colectai",CHOICE_EXCHANGE:"Schimbai",CHOICE_SPIN:"Rotii",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Continuare",FREE_SPINS_START:"Start"},ru:{CANNOT_PRELOAD_ASSETS:"   :",NO_CONNECTION:"   ",REMOVE_LOCKED_TILES:"       .",TITLE_SERVER_ERROR:" ",CHOICE_GAMBLE:"",CHOICE_COLLECT:"",CHOICE_EXCHANGE:"",CHOICE_SPIN:"",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"",FREE_SPINS_START:""},sv:{CANNOT_PRELOAD_ASSETS:"Lyckades inte ladda resurser",NO_CONNECTION:"Ingen serveranslutning",REMOVE_LOCKED_TILES:"Om du ndrar din insats nu avlgsnas alla lsta rutor.",TITLE_SERVER_ERROR:"Serverfel",CHOICE_GAMBLE:"Gamble",CHOICE_COLLECT:"Samla",CHOICE_EXCHANGE:"Byt",CHOICE_SPIN:"Snurra",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Fortstt",FREE_SPINS_START:"Starta"},sk:{CANNOT_PRELOAD_ASSETS:"Nemono nata poloky na pozad:",NO_CONNECTION:"iadne pripojenie k serveru.",REMOVE_LOCKED_TILES:"Ak teraz zmente stvku, odstrnia sa vetky zamknut dladice.",TITLE_SERVER_ERROR:"Chyba servera",CHOICE_GAMBLE:"Riskova",CHOICE_COLLECT:"Zobra",CHOICE_EXCHANGE:"Vymeni",CHOICE_SPIN:"Toi",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Pokraova",FREE_SPINS_START:"tart"},sl:{CANNOT_PRELOAD_ASSETS:"Predhodno nalaganje sredstev ni mogoe:",NO_CONNECTION:"Ni povezave s strenikom.",REMOVE_LOCKED_TILES:"e boste spremenili svoj vloek zdaj, boste odstranili vse zaklenjene ploice.",TITLE_SERVER_ERROR:"Napaka strenika",CHOICE_GAMBLE:"Hazard",CHOICE_COLLECT:"Unovi",CHOICE_EXCHANGE:"Zamenjaj",CHOICE_SPIN:"Zavrti",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Nadaljuj",FREE_SPINS_START:"Start"},sr:{CANNOT_PRELOAD_ASSETS:"Nije mogue unapred uitati sredstva:",NO_CONNECTION:"Ne postoji veza sa serverom",REMOVE_LOCKED_TILES:"Ako sad promenite ulog, bie uklonjene sve zakljuane ploice.",TITLE_SERVER_ERROR:"Greka servera",CHOICE_GAMBLE:"Kockaj Se",CHOICE_COLLECT:"Uzmi",CHOICE_EXCHANGE:"Razmeni",CHOICE_SPIN:"Zavrti",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Nastavi",FREE_SPINS_START:"Start"},tr:{CANNOT_PRELOAD_ASSETS:"nykleme baarsz:",NO_CONNECTION:"Sunucuya bal deilsiniz",REMOVE_LOCKED_TILES:"Bahis tutarnz imdi deitirirseniz kilitli tm kareler kaldrlr.",TITLE_SERVER_ERROR:"Sunucu Hatas",CHOICE_GAMBLE:"Gamble",CHOICE_COLLECT:"Topla",CHOICE_EXCHANGE:"Takas Et",CHOICE_SPIN:"Dndr",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Devam",FREE_SPINS_START:"Bala"},th:{CANNOT_PRELOAD_ASSETS:":",NO_CONNECTION:"",REMOVE_LOCKED_TILES:" ",TITLE_SERVER_ERROR:"",CHOICE_GAMBLE:"",CHOICE_COLLECT:"",CHOICE_EXCHANGE:"",CHOICE_SPIN:"",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"",FREE_SPINS_START:""},vi:{CANNOT_PRELOAD_ASSETS:"Khng th ti trc ti sn:",NO_CONNECTION:"Cha kt ni vi my ch",REMOVE_LOCKED_TILES:"i tin cc ca bn lc ny s xa mi vin gch b kha.",TITLE_SERVER_ERROR:"Li my ch",CHOICE_GAMBLE:"Th Vn May",CHOICE_COLLECT:"Thu Thp",CHOICE_EXCHANGE:"Trao i",CHOICE_SPIN:"Quay",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"Tip tc",FREE_SPINS_START:"Bt u"},zh:{CANNOT_PRELOAD_ASSETS:"",NO_CONNECTION:"",REMOVE_LOCKED_TILES:"",TITLE_SERVER_ERROR:"",CHOICE_GAMBLE:"",CHOICE_COLLECT:"",CHOICE_EXCHANGE:"",CHOICE_SPIN:"",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"",FREE_SPINS_START:""},"zh-TW":{CANNOT_PRELOAD_ASSETS:"",NO_CONNECTION:"",REMOVE_LOCKED_TILES:"",TITLE_SERVER_ERROR:"",CHOICE_GAMBLE:"",CHOICE_COLLECT:"",CHOICE_EXCHANGE:"",CHOICE_SPIN:"",CHOICE_ACCEPT:"Accept",CHOICE_DECLINE:"Decline",WIN_EXCHANGE_SPLASH_BUTTON:"",FREE_SPINS_START:""}},i=n("./src/core/utils/misc.js"),o=Object(i.b)(r,{bg:{},cs:{},da:{},de:{},en:{},"en-US":{},el:{},es:{},"es-PE":{},et:{},fi:{},fr:{},"fr-CA":{},hi:{},hy:{},hu:{},hr:{},id:{},it:{},ja:{},ka:{},ko:{},lt:{},lv:{},ms:{},nl:{},no:{},pl:{},pt:{},"pt-BR":{},ro:{},ru:{},sv:{},sk:{},sl:{},sr:{},tr:{},th:{},vi:{},zh:{},"zh-TW":{}});e.a=o},0:function(t,e){}});